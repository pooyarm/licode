{"version":3,"sources":["webpack://Erizo/webpack/bootstrap","webpack://Erizo/./src/utils/Logger.js","webpack://Erizo/./../common/semanticSdp/SemanticSdp.js","webpack://Erizo/./src/utils/ConnectionHelpers.js","webpack://Erizo/./../common/semanticSdp/DirectionWay.js","webpack://Erizo/./../common/semanticSdp/Setup.js","webpack://Erizo/./../common/semanticSdp/Enum.js","webpack://Erizo/./../common/semanticSdp/Direction.js","webpack://Erizo/C:/workspace/www/licode/node_modules/sdp-transform/lib/grammar.js","webpack://Erizo/./../common/semanticSdp/CandidateInfo.js","webpack://Erizo/./../common/semanticSdp/CodecInfo.js","webpack://Erizo/./../common/semanticSdp/DTLSInfo.js","webpack://Erizo/./../common/semanticSdp/ICEInfo.js","webpack://Erizo/./../common/semanticSdp/MediaInfo.js","webpack://Erizo/./../common/semanticSdp/SimulcastInfo.js","webpack://Erizo/./../common/semanticSdp/SourceGroupInfo.js","webpack://Erizo/./../common/semanticSdp/SourceInfo.js","webpack://Erizo/./../common/semanticSdp/StreamInfo.js","webpack://Erizo/./../common/semanticSdp/TrackInfo.js","webpack://Erizo/(webpack)/buildin/harmony-module.js","webpack://Erizo/(webpack)/buildin/module.js","webpack://Erizo/./lib/socket.io.js","webpack://Erizo/./src/OldErizo.js","webpack://Erizo/./lib/socket.io.old.js","webpack://Erizo/./../common/semanticSdp/SDPInfo.js","webpack://Erizo/C:/workspace/www/licode/node_modules/sdp-transform/lib/index.js","webpack://Erizo/C:/workspace/www/licode/node_modules/sdp-transform/lib/parser.js","webpack://Erizo/C:/workspace/www/licode/node_modules/sdp-transform/lib/writer.js","webpack://Erizo/./../common/semanticSdp/TrackEncodingInfo.js","webpack://Erizo/./../common/semanticSdp/SimulcastStreamInfo.js","webpack://Erizo/./../common/semanticSdp/RIDInfo.js","webpack://Erizo/./src/utils/L.Resizer.js?a91e","webpack://Erizo/C:/workspace/www/licode/node_modules/script-loader/addScript.js","webpack://Erizo/./src/utils/L.Resizer.js","webpack://Erizo/./src/utils/SdpHelpers.js","webpack://Erizo/./src/webrtc-stacks/BaseStack.js","webpack://Erizo/./src/webrtc-stacks/ChromeStableStack.js","webpack://Erizo/./src/webrtc-stacks/FirefoxStack.js","webpack://Erizo/./src/webrtc-stacks/FcStack.js","webpack://Erizo/./src/Events.js","webpack://Erizo/./src/utils/ErizoMap.js","webpack://Erizo/./src/ErizoConnectionManager.js","webpack://Erizo/./src/Socket.js","webpack://Erizo/./src/views/View.js","webpack://Erizo/./src/views/Speaker.js","webpack://Erizo/./src/views/Bar.js","webpack://Erizo/./src/views/VideoPlayer.js","webpack://Erizo/./src/views/AudioPlayer.js","webpack://Erizo/./src/Stream.js","webpack://Erizo/./src/utils/Base64.js","webpack://Erizo/./src/Room.js","webpack://Erizo/./src/Erizo.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Logger","outputFunction","logPrefix","args","_console","console","log","apply","_toConsumableArray","DEBUG","TRACE","INFO","WARNING","ERROR","NONE","setLogLevel","level","targetLevel","logLevel","setOutputFunction","newOutputFunction","setLogPrefix","newLogPrefix","out","concat","_len","arguments","length","Array","_key","tempArgs","undefined","panel","tmp","idx","debug","_len2","_key2","trace","_len3","_key3","info","_len4","_key4","warning","_len5","_key5","error","_len6","_key6","__webpack_exports__","SDPInfo","CandidateInfo","CodecInfo","DTLSInfo","ICEInfo","MediaInfo","Setup","SourceGroupInfo","SourceInfo","StreamInfo","TrackInfo","Direction","_Logger__WEBPACK_IMPORTED_MODULE_0__","getBrowser","browser","window","navigator","userAgent","match","ConnectionHelpers","GetUserMedia","config","screenConfig","callback","getUserMedia","userMediaConfig","cb","errorCb","mediaDevices","then","catch","screen","video","mandatory","chromeMediaSource","chromeMediaSourceId","desktopStreamId","mediaSource","audio","App","isDesktop","chrome","desktopCapture","chooseDesktopMedia","id","extensionId","runtime","sendMessage","getStream","response","theId","streamId","code","e","configureScreensharing","DirectionWay","Enum","byValue","direction","toUpperCase","toString","SEND","RECV","reverse","setup","ACTIVE","PASSIVE","ACTPASS","INACTIVE","_this","this","Function","slice","from","forEach","arg","for","SENDRECV","SENDONLY","RECVONLY","grammar","v","reg","names","format","u","z","b","push","a","rate","address","subtype","sessionConfig","str","raddr","tcptype","generation","attribute","maxMessageSize","RegExp","dir2","keys","obj","foundation","componentId","transport","priority","port","type","relAddr","relPort","_classCallCheck","plain","codec","encoding","params","feedback","cloned","rtx","setRTX","paramName","mapFromNames","codecs","Map","dyn","nameWithUpperCases","pt","toLowerCase","set","getCodec","hash","fingerprint","randomIntInc","low","high","range","random","Math","floor","randomBytes","size","numbers","Uint8Array","buf2hex","buffer","map","x","hexValue","join","ufrag","pwd","opts","lite","endOfCandidates","setLite","setEndOfCandidates","generate","frag","SimulcastInfo","extensions","rids","simulcast","simulcast_03","bitrate","ice","dtls","connection","candidates","setDirection","setBitrate","setConnection","addCodec","clone","extension","addExtension","rid","addRID","setSimulcast","xGoogleFlag","setXGoogleFlag","setICE","setDTLS","candidate","addCandidate","setSetup","ridInfo","getId","codecInfo","getType","result","dtlsInfo","iceInfo","supported","answer","has","setType","hasRTX","getRTX","sendEntries","getSimulcastStreams","sendStreams","alternatives","sendStream","addSimulcastAlternativeStreams","recvEntries","recvStreams","recvStream","reversed","getDirection","send","recv","plainString","streams","stream","string","semantics","ssrcs","ssrc","parseInt","setCName","cname","setStreamId","setTrackId","trackId","label","mslabel","trackid","tracks","track","addTrack","media","getMedia","clear","groups","encodings","mediaId","setMediaId","addSSRC","group","addSourceGroup","entry","addAlternativeEncoding","schematics","getSemantics","originalModule","webpackPolyfill","children","deprecate","paths","_typeof","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","__WEBPACK_AMD_DEFINE_FACTORY__","loaded","source","h","path","f","nsps","forceNew","multiplex","query","socket","iterator","constructor","managers","protocol","connect","Manager","Socket","location","host","charAt","test","indexOf","href","substring","replace","exec","authority","ipv6uri","storage","env","formatArgs","useColors","namespace","humanize","diff","color","splice","save","removeItem","load","process","document","documentElement","style","WebkitAppearance","firebug","exception","table","$1","local","localStorage","colors","formatters","j","JSON","stringify","message","enable","Error","setTimeout","y","run","clearTimeout","fun","array","nextTick","title","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","umask","enabled","Date","prev","curr","coerce","unshift","charCodeAt","abs","init","stack","disable","skips","split","substr","ceil","String","parseFloat","isNaN","round","BINARY_EVENT","BINARY_ACK","attachments","nsp","data","reconstructor","Number","types","parse","reconPack","buffers","CONNECT","DISCONNECT","EVENT","ACK","Encoder","Decoder","encode","removeBlobs","deconstructPacket","packet","add","base64","takeBinaryData","destroy","finishedReconstruction","reconstructPacket","addEventListener","_callbacks","fn","removeEventListener","hasListeners","Blob","File","Buffer","isBuffer","ArrayBuffer","toJSON","isArray","_placeholder","num","FileReader","onload","readAsArrayBuffer","subs","reconnection","reconnectionAttempts","reconnectionDelay","reconnectionDelayMax","randomizationFactor","backoff","min","max","jitter","timeout","readyState","uri","connecting","lastPing","packetBuffer","parser","encoder","decoder","autoConnect","open","emitAll","updateSocketIds","generateId","engine","_reconnection","_reconnectionAttempts","_reconnectionDelay","setMin","_randomizationFactor","setJitter","_reconnectionDelayMax","setMax","_timeout","maybeReconnectOnOpen","reconnecting","attempts","reconnect","skipReconnect","onopen","cleanup","close","onping","onpong","ondata","ondecoded","onerror","write","options","processPacketQueue","shift","disconnect","reset","onclose","duration","onreconnect","hostname","secure","agent","decode","upgrade","forceJSONP","jsonp","forceBase64","enablesXDR","timestampParam","timestampRequests","transports","transportOptions","writeBuffer","prevBufferLen","policyPort","rememberUpgrade","binaryType","onlyBinaryUpgrades","perMessageDeflate","threshold","pfx","passphrase","cert","ca","ciphers","rejectUnauthorized","forceNode","global","extraHeaders","localAddress","upgrades","pingInterval","pingTimeout","pingIntervalTimer","pingTimeoutTimer","priorWebsocketSuccess","Transport","createTransport","EIO","sid","requestTimeout","protocols","setTransport","onDrain","onPacket","onError","onClose","probe","supportsBinary","upgrading","pause","flush","onOpen","onHandshake","setPing","filterUpgrades","onHeartbeat","ping","sendPacket","writable","compress","polling","xdomain","xscheme","websocket","XMLHttpRequest","XDomainRequest","xd","xs","method","async","isBinary","requests","abort","Request","request","doWrite","sendXhr","doPoll","onData","pollXhr","xhr","setDisableHeaderCheck","setRequestHeader","withCredentials","hasXDR","onLoad","responseText","onreadystatechange","getResponseHeader","responseType","status","index","requestsCount","onSuccess","attachEvent","doOpen","poll","decodePayload","doClose","encodePayload","b64","description","decodePacket","packets","encodeBase64Packet","byteLength","g","encodePacket","k","pong","noop","w","strict","readAsDataURL","fromCharCode","btoa","decodeBase64Packet","encodePayloadAsBlob","encodePayloadAsArrayBuffer","decodePayloadAsBinary","reduce","count","byteOffset","append","getBlob","BlobBuilder","WebKitBlobBuilder","MSBlobBuilder","MozBlobBuilder","encodeURIComponent","decodeURIComponent","___eio","script","parentNode","removeChild","form","iframe","createElement","src","getElementsByTagName","insertBefore","head","body","appendChild","iframeId","className","position","top","left","target","setAttribute","area","action","submit","usingBrowserWebSocket","WebSocket","MozWebSocket","check","headers","ws","supports","binary","addEventListeners","onmessage","io","json","ids","acks","receiveBuffer","sendBuffer","connected","disconnected","connect_error","connect_timeout","reconnect_attempt","reconnect_failed","reconnect_error","subEvents","flags","pop","onpacket","onconnect","onevent","onack","ondisconnect","ack","emitBuffered","ms","factor","pow","L","Erizo","EventDispatcher","spec","that","dispatcher","eventListeners","eventType","listener","dispatchEvent","event","LicodeEvent","RoomEvent","StreamEvent","msg","bandwidth","PublisherEvent","FcStack","signalCallback","ChromeStableStack","WebkitRTCPeerConnection","webkitRTCPeerConnection","pcConfig","iceServers","con","optional","DtlsSrtpKeyAgreement","mediaConstraints","OfferToReceiveVideo","OfferToReceiveAudio","errorCallback","peerConnection","localDesc","remoteDesc","setMaxBW","sdp","maxVideoBW","maxAudioBW","state","localCandidates","onicecandidate","candidateObject","sdpMLineIndex","sdpMid","remoteDescriptionSet","onaddstream","onremovestream","oniceconnectionstatechange","ev","iceConnectionState","setLocalDesc","sessionDescription","sdpMatch","theLine","enableOpusNacks","setLocalDescp2p","setLocalDescription","updateSpec","limitMaxVideoBW","limitMaxAudioBW","Sdp","setRemoteDescription","RTCSessionDescription","minVideoBW","slideShowMode","muteStream","createOffer","isSubscribe","iceRestart","addStream","remoteCandidates","processSignalingMessage","createAnswer","addIceCandidate","RTCIceCandidate","ChromeCanaryStack","stunServerUrl","url","turnServer","username","credential","password","nop2p","roapSessionId","sessionId","iceCandidateCount","iceGatheringState","ices","moreIceComing","markActionNeeded","msgstring","sd","incomingMessage","messageType","sendOK","removeStream","actionNeeded","doLater","onstablestate","what","mySDP","prevOffer","localDescription","iceStarted","now","getTime","operation","roapMessage","offererSessionId","answererSessionId","otherSessionId","seq","sequenceNumber","tiebreaker","onsignalingmessage","text","currentTarget","FirefoxStack","mozRTCPeerConnection","mozRTCSessionDescription","mozRTCIceCandidate","offerToReceiveAudio","offerToReceiveVideo","mozDontOfferDataChannel","gotCandidate","BowserStack","Connection","newSpec","appVersion","webkitGetUserMedia","mozGetUserMedia","msGetUserMedia","screenCfg","theConfig","videoCfg","width","minWidth","maxWidth","height","minHeight","maxHeight","Stream","getFrame","recording","room","showing","videoSize","getID","streamID","getAttributes","attributes","setAttributes","updateLocalAttributes","attrs","hasAudio","hasVideo","hasData","hasScreen","sendData","streamEvent","videoOpt","opt","fake","unpublish","hide","getTracks","stop","player","SoundMeter","play","elementID","VideoPlayer","AudioPlayer","setSinkId","sinkId","show","div","defaultView","getComputedStyle","getPropertyValue","getElementById","divStyle","divWidth","divHeight","canvas","getContext","drawImage","getVideoFrameURL","toDataURL","getVideoFrame","getImageData","checkOptions","isUpdate","muteAudio","isMuted","p2p","pc","updateConfiguration","Room","connectSocket","sendMessageSocket","sendSDPSocket","sendDataSocket","updateAttributes","remoteStreams","localStreams","roomID","evt2","failed","token","_lib_socket_io_old__WEBPACK_IMPORTED_MODULE_0___default","force new connection","evt","peerId","mess","peerSocket","createRemotePc","myStream","disconnectEvt","unsubscribe","respType","respCallback","Base64","decodeBase64","roomId","connectEvt","streamList","defaultVideoBW","publish","metadata","scheme","startRecording","to","stopRecording","recordingId","subscribe","getStreamsByAttribute","localStreamsCount","enableLogPanel","base64Chars","reverseBase64Chars","base64Str","base64Count","setBase64Str","readBase64","readReverseBase64","ntos","nextCharacter","unescape","encodeBase64","inBuffer","lineCount","done","ElementQueries","getEmSize","element","fontSize","convertToPx","units","clientWidth","clientHeight","vw","vh","chooser","setupElement","elementQueriesSetupInformation","addOption","option","actualValue","attrValues","attrValue","attrName","offsetWidth","offsetHeight","removeAttribute","ResizeSensor","queueQuery","selector","querySelectorAll","$$","jQuery","elements","regex","extractQuery","css","readRules","rules","selectorText","cssText","cssRules","styleSheets","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","forEachElement","elementsType","isCollectionTyped","Elements","attachResizeEvent","resized","resizedAttached","q","remove","newQueue","resizeSensor","styleChild","innerHTML","prop","currentStyle","expand","childNodes","expandChild","shrink","scrollLeft","scrollTop","lastWidth","lastHeight","cachedWidth","cachedHeight","dirty","dirtyChecking","onScroll","addEvent","el","elem","detach","contains","View","staticUrl","onmouseover","onmouseout","bar","display","resizer","resize","container","crop","containerWidth","containerHeight","myURL","URL","webkitURL","streamUrl","createObjectURL","loader","volume","Bar","soundMeter","getAudioTracks","soundMeterAnimation","waiting","displaying","speaker","Speaker","mute","unmute","lastVolume","icon","muted","onclick","picker","step","oninput","AudioContext","webkitAudioContext","audioContext","$target","soundMeterTarget","$","$holder","$bar","appendTo","SoundMeterClass","connectToSource","alert","animate","audioLevel","toFixed","transform","context","createScriptProcessor","analyser","createAnalyser","smoothingTimeConstant","fftSize","onaudioprocess","frequencyBinCount","getByteFrequencyData","values","mic","createMediaStreamSource","destination","sockets","details","uuri","util","parseUri","domain","uniqueUri","merge","of","re","parts","base","addition","chunkQuery","components","part","qs","kv","pageLoaded","capture","ua","hasCORS","defer","webkit","importScripts","additional","deep","lastseen","seen","depth","mixin","ctor","ctor2","inherit","intersect","arr","arr2","ret","longest","shortest","toArray","enu","iDevice","EventEmitter","$events","self","list","pos","handler","parent","nativeJSON","date","isFinite","valueOf","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","cx","escapable","gap","indent","meta","\b","\t","\n","\f","\r","\"","\\","rep","quote","lastIndex","holder","partial","mind","replacer","space","","reviver","walk","eval","SyntaxError","reasons","advice","endpoint","reason","adv","ackId","encoded","decoded","regexp","pieces","sessid","heartbeats","clearCloseTimeout","setCloseTimeout","msgs","setHeartbeatTimeout","onConnect","isOpen","closeTimeout","onDisconnect","clearTimeouts","reopenTimeout","heartbeat","prepareUrl","resource","ready","connect timeout","try multiple transports","reconnection delay","reconnection limit","Infinity","reopen delay","max reconnection attempts","sync disconnect on unload","auto connect","flash policy port","manualFlush","namespaces","doBuffer","isXDomain","disconnectSync","empty","SocketNamespace","$emit","handshake","complete","insertAt","getTransport","override","xdomainCheck","sessionid","heartbeatTimeout","origTransports","connectTimeoutTimer","remaining","heartbeatTimeoutTimer","setBuffer","flushBuffer","payload","err","wasConnected","wasConnecting","maxAttempts","tryMultiple","limit","reconnectionTimer","maybeReconnect","redoTransports","Flag","ackPackets","lastArg","WS","Flashsocket","flashsocket","__addTask","__tasks","WEB_SOCKET_SWF_LOCATION","loadFlashPolicyFile","__initialize","swfobject","getFlashPlayerVersion","major","WEB_SOCKET_DISABLE_AUTO_INITIALIZATION","Q","E","B","G","D","S","R","O","T","U","X","aa","C","Z","Y","GetVariable","ab","M","pv","callee","H","V","N","I","J","ah","platform","ae","ac","af","ag","plugins","mimeTypes","enabledPlugin","ad","w3","wk","ie","win","mac","detachEvent","doScroll","K","callbackFn","success","F","swfVersion","expressInstall","A","ai","getAttribute","styleclass","align","P","ref","SetVariable","nodeName","flashvars","replaceChild","nodeType","cloneNode","movie","outerHTML","addRule","createTextNode","visibility","registerObject","getObjectById","embedSWF","aj","al","am","ak","an","switchOffAutoHideShow","minor","release","hasFlashPlayerVersion","createSWF","showExpressInstall","removeSWF","createCSS","addDomLoadEvent","addLoadEvent","getQueryParamValue","search","expressInstallCallback","_WebSocket","_x","_x2","_x3","_x4","_x5","proxyHost","proxyPort","__id","__nextId","__instances","CONNECTING","bufferedAmount","__events","__flash","CLOSED","CLOSING","useCapture","events","__handleEvent","flashEvent","jsEvent","__createSimpleEvent","__createMessageEvent","createEvent","Event","initEvent","bubbles","cancelable","MessageEvent","opera","initMessageEvent","OPEN","loadManualPolicyFile","__swfLocation","__isFlashLite","hasPriority","swliveconnect","allowScriptAccess","__onFlashInitialized","setCallerUrl","setDebug","WEB_SOCKET_DEBUG","__onFlashEvent","receiveEvents","webSocketId","__log","__error","task","mimeType","filename","XHR","post","sendXHR","posting","req","contentType","usesXDomReq","socketProtocol","isXProtocol","HTMLFile","htmlfile","doc","parentWindow","iframeC","_","CollectGarbage","XHRPolling","retryCounter","indicator","JSONPPolling","initIframe","SDPTransform","TrackEncodingInfo","SimulcastStreamInfo","RIDInfo","medias","addMedia","origin","timing","msid","delete","sessionVersion","netType","ipVer","getConnection","start","getICE","isLite","icelite","iceOptions","getOpts","iceUfrag","getUfrag","icePwd","getPwd","msidSemantic","semantic","bundle","mids","getDTLS","getHash","getFingerprint","getSetup","md","getPort","fmtp","rtp","rtcpFb","ext","ssrcGroups","rtcpMux","getXGoogleFlag","mid","rtcp","getBitrate","getCandidates","getFoundation","component","getComponentId","getPriority","ip","getAddress","getRelAddr","getRelPort","getGeneration","isEndOfCandidates","getCodecs","getRate","getEncoding","getParams","item","getFeedback","payloads","getExtensions","getRIDs","getFormats","param","prefix","getSimulcast","simulcast03","getSimulcast03","isPaused","getSimulcastPlainString","sort","m1","m2","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","next","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_loop","getMediaId","getSourceGroups","getSSRCs","getCName","getStreamId","getTrackId","getMSLabel","getLabel","_iterator3","return","getSimulcastDir","simulcastDir","simulcastList","parseSimulcastStreamList","scid","paused","processString","sdpInfo","setVersion","setTiming","setOrigin","fingerprintAttr","remoteHash","remoteFingerprint","mediaInfo","thisIce","apts","fmt","trim","apt","getCodecForType","extmaps","extmap","formats","parseParams","setFormats","setParams","sources","ssrcAttr","getSSRC","setMSLabel","setLabel","getTrack","setEncodings","ssrcGroupAttr","getRID","setSimulcastPlainString","getSimulcast3Dir","setSimulcast03","writer","parseFmtpConfig","parsePayloads","parseRemoteCandidates","parseImageAttributes","toIntIfInt","parseReg","content","needsBlank","keyLocation","rawName","attachProperties","validLine","session","filter","paramReducer","acc","expr","formatRegExp","makeLine","formatStr","len","defaultOuterOrder","defaultInnerOrder","mLine","outerOrder","innerOrder","execScript","SdpHelpers","spatialLayers","line","spatialLayerId","spatialLayerIdRtx","sdpInput","mediaType","setParam","utils_SdpHelpers","webrtc_stacks_BaseStack","specInput","localSdp","remoteSdp","processOffer","specBase","offerQueue","isNegotiating","latestSessionVersion","sdpSemantics","forceTurn","iceTransportPolicy","RTCPeerConnection","where","errorcb","checkOfferQueue","setLocalDescForAnswer","SemanticSdp_default","successCallback","setStartVideoBW","setHardMinVideoBW","enableSimulcast","setVideo","setAudio","configInput","shouldApplyMaxVideoBWToSdp","shouldSendMaxVideoBWInOptions","qualityLayer","slideShowBelowLayer","forceOfferToReceive","msgInput","processAnswer","processNewCandidate","webrtc_stacks_ChromeStableStack","matchGroup","numSpatialLayers","baseSsrc","baseSsrcRtx","spatialLayersRtx","addSim","addGroup","addSpatialLayer","startVideoBW","setParamForCodecs","hardMinVideoBW","webrtc_stacks_FirefoxStack","possibleLayers","scaleResolutionDownBy","promises","getSenders","sender","kind","totalLayers","parameters","getParameters","layer","setParameters","getSimulcastParameters","baseCreateOffer","Promise","all","webrtc_stacks_FcStack","Events_EventDispatcher","emitter","ConnectionEvent","utils_ErizoMap","func","EventEmitterConst","ErizoSessionId","ErizoConnectionManager_ErizoConnection","ErizoConnection","erizoId","ErizoConnectionManager_classCallCheck","_possibleConstructorReturn","_getPrototypeOf","streamsMap","streamRemovedListener","setSignallingCallback","sendSignalingMessage","src_ErizoConnectionManager","ErizoConnectionManager","ErizoConnectionsMap","singlePC","connectionEntry","Socket_Socket","newIo","defaultCallback","messageBuffer","CONNECTED","RECONNECTING","DISCONNECTED","IO","socket_io_default","Socket_SocketEvent","userOptions","closeCode","socketOnCloseFunction","closeEvent","attemptNumber","clientId","resp","addToBuffer","sendSDP","views_View","views_Speaker","views_Bar","link","logo","views_VideoPlayer","applyRatio","ratio","VideoPlayer_typeof","srcObject","views_AudioPlayer","AudioPlayer_typeof","src_Stream","altConnectionHelpers","videoFrameRate","audioMuted","videoMuted","onStreamAddedToPC","onStreamRemovedFromPC","onICEConnectionStateChange","hasMedia","isExternal","addPC","p2pKey","frameRate","trackInput","onended","secondTrackInput","optionsInput","Stream_this","Stream_typeof","getVideoTracks","muteVideo","_setStaticQualityLayer","spatialLayer","temporalLayer","_setDynamicQualityLayer","_enableSlideShowBelowSpatialLayer","_setMinSpatialLayer","controlHandler","handlersInput","publisherSideInput","publisherSide","handlers","sendControlMessage","disableHandlers","enableHandlers","utils_Base64","src_Room","altIo","altConnectionManager","erizoConnectionManager","streamInput","maybeCloseConnection","onStreamFailed","streamFailedEvt","dispatchStreamSubscribed","getP2PConnectionOptions","onRemoteStreamRemovedListener","dispatchStreamUnsubscribed","getErizoConnectionOptions","isRemote","connectionOpts","sendDataSocketFromStreamEvent","updateAttributesFromStreamEvent","socketEventToArgs","Room_toConsumableArray","createSdpConstraints","populateStreamFunctions","publishErizo","constraints","getOrBuildErizoConnection","createLocalStreamErizoConnection","subscribeErizo","constraint","getVideoConstraints","createRemoteStreamErizoConnection","streamIndices","publishExternal","publishP2P","publishData","localStream","streamToSubscribe","subscribeData","getStreamStats","createRemoteStreamP2PConnection","createLocalStreamP2PConnection","removeLocalStreamP2PConnection","NewErizo","OldErizo"],"mappings":"sBACA,IAAAA,KAGA,SAAAC,EAAAC,GAGA,GAAAF,EAAAE,GACA,OAAAF,EAAAE,GAAAC,QAGA,IAAAC,EAAAJ,EAAAE,IACAG,EAAAH,EACAI,GAAA,EACAH,YAUA,OANAI,EAAAL,GAAAM,KAAAJ,EAAAD,QAAAC,IAAAD,QAAAF,GAGAG,EAAAE,GAAA,EAGAF,EAAAD,QA0DA,OArDAF,EAAAQ,EAAAF,EAGAN,EAAAS,EAAAV,EAGAC,EAAAU,EAAA,SAAAR,EAAAS,EAAAC,GACAZ,EAAAa,EAAAX,EAAAS,IACAG,OAAAC,eAAAb,EAAAS,GAA0CK,YAAA,EAAAC,IAAAL,KAK1CZ,EAAAkB,EAAA,SAAAhB,GACA,oBAAAiB,eAAAC,aACAN,OAAAC,eAAAb,EAAAiB,OAAAC,aAAwDC,MAAA,WAExDP,OAAAC,eAAAb,EAAA,cAAiDmB,OAAA,KAQjDrB,EAAAsB,EAAA,SAAAD,EAAAE,GAEA,GADA,EAAAA,IAAAF,EAAArB,EAAAqB,IACA,EAAAE,EAAA,OAAAF,EACA,KAAAE,GAAA,iBAAAF,QAAAG,WAAA,OAAAH,EACA,IAAAI,EAAAX,OAAAY,OAAA,MAGA,GAFA1B,EAAAkB,EAAAO,GACAX,OAAAC,eAAAU,EAAA,WAAyCT,YAAA,EAAAK,UACzC,EAAAE,GAAA,iBAAAF,EAAA,QAAAM,KAAAN,EAAArB,EAAAU,EAAAe,EAAAE,EAAA,SAAAA,GAAgH,OAAAN,EAAAM,IAAqBC,KAAA,KAAAD,IACrI,OAAAF,GAIAzB,EAAA6B,EAAA,SAAA1B,GACA,IAAAS,EAAAT,KAAAqB,WACA,WAA2B,OAAArB,EAAA,SAC3B,WAAiC,OAAAA,GAEjC,OADAH,EAAAU,EAAAE,EAAA,IAAAA,GACAA,GAIAZ,EAAAa,EAAA,SAAAiB,EAAAC,GAAsD,OAAAjB,OAAAkB,UAAAC,eAAA1B,KAAAuB,EAAAC,IAGtD/B,EAAAkC,EAAA,GAIAlC,IAAAmC,EAAA,wXC7EA,IAAMC,EAAU,WACd,IAOIC,EADAC,EAAY,GAchBD,EAAiB,SAACE,GAAS,IAAAC,GAEzBA,EAAAC,SAAQC,IAARC,MAAAH,EAAAI,EAAeL,KA8DjB,OACEM,MArFY,EAsFZC,MArFY,EAsFZC,KArFW,EAsFXC,QArFc,EAsFdC,MArFY,EAsFZC,KArFW,EAsFXC,YAjFkB,SAACC,GACnB,IAAIC,EAAcD,EACdA,EAAQhB,EAAOc,KACjBG,EAAcjB,EAAOc,KACZE,EAAQhB,EAAOS,QACxBQ,EAAcjB,EAAOS,OAEvBT,EAAOkB,SAAWD,GA2ElBE,kBAnEwB,SAACC,GACzBnB,EAAiBmB,GAmEjBC,aAhEmB,SAACC,GACpBpB,EAAYoB,GAgEZhB,IA3DU,SAACU,GACX,IAAIO,EAAMrB,EACV,KAAIc,EAAQhB,EAAOkB,UAAnB,CAGIF,IAAUhB,EAAOS,MACnBc,EAAG,GAAAC,OAAMD,EAAN,SACMP,IAAUhB,EAAOU,MAC1Ba,EAAG,GAAAC,OAAMD,EAAN,SACMP,IAAUhB,EAAOW,KAC1BY,EAAG,GAAAC,OAAMD,EAAN,QACMP,IAAUhB,EAAOY,QAC1BW,EAAG,GAAAC,OAAMD,EAAN,WACMP,IAAUhB,EAAOa,QAC1BU,EAAG,GAAAC,OAAMD,EAAN,UAELA,EAAG,GAAAC,OAAMD,EAAN,MAhB2B,QAAAE,EAAAC,UAAAC,OAATxB,EAAS,IAAAyB,MAAAH,EAAA,EAAAA,EAAA,KAAAI,EAAA,EAAAA,EAAAJ,EAAAI,IAAT1B,EAAS0B,EAAA,GAAAH,UAAAG,GAiB9B,IAAMC,GAAYP,GAAKC,OAAOrB,GAC9B,QAAqB4B,IAAjB/B,EAAOgC,MAAqB,CAE9B,IADA,IAAIC,EAAM,GACDC,EAAM,EAAGA,EAAMJ,EAASH,OAAQO,GAAO,EAC9CD,GAAOH,EAASI,GAElBlC,EAAOgC,MAAM/C,MAAb,GAAAuC,OAAwBxB,EAAOgC,MAAM/C,MAArC,MAAAuC,OAA+CS,QAE/ChC,EAAeM,MAAMP,GAAS8B,MAmChCK,MA/BY,WAAa,QAAAC,EAAAV,UAAAC,OAATxB,EAAS,IAAAyB,MAAAQ,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAATlC,EAASkC,GAAAX,UAAAW,GACzBrC,EAAOM,IAAPC,MAAAP,GAAWA,EAAOS,OAAZe,OAAsBrB,KA+B5BmC,MA5BY,WAAa,QAAAC,EAAAb,UAAAC,OAATxB,EAAS,IAAAyB,MAAAW,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAATrC,EAASqC,GAAAd,UAAAc,GACzBxC,EAAOM,IAAPC,MAAAP,GAAWA,EAAOU,OAAZc,OAAsBrB,KA4B5BsC,KAzBW,WAAa,QAAAC,EAAAhB,UAAAC,OAATxB,EAAS,IAAAyB,MAAAc,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAATxC,EAASwC,GAAAjB,UAAAiB,GACxB3C,EAAOM,IAAPC,MAAAP,GAAWA,EAAOW,MAAZa,OAAqBrB,KAyB3ByC,QAtBc,WAAa,QAAAC,EAAAnB,UAAAC,OAATxB,EAAS,IAAAyB,MAAAiB,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAT3C,EAAS2C,GAAApB,UAAAoB,GAC3B9C,EAAOM,IAAPC,MAAAP,GAAWA,EAAOY,SAAZY,OAAwBrB,KAsB9B4C,MAnBY,WAAa,QAAAC,EAAAtB,UAAAC,OAATxB,EAAS,IAAAyB,MAAAoB,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAT9C,EAAS8C,GAAAvB,UAAAuB,GACzBjD,EAAOM,IAAPC,MAAAP,GAAWA,EAAOa,OAAZW,OAAsBrB,MAlFhB,GAwGhB+C,EAAA,qBC7GA,IAAMC,EAAUvF,EAAQ,IAClBwF,EAAgBxF,EAAQ,GACxByF,EAAYzF,EAAQ,GACpB0F,EAAW1F,EAAQ,IACnB2F,EAAU3F,EAAQ,IAClB4F,EAAY5F,EAAQ,IACpB6F,EAAQ7F,EAAQ,GAChB8F,EAAkB9F,EAAQ,IAC1B+F,EAAa/F,EAAQ,IACrBgG,EAAahG,EAAQ,IACrBiG,EAAYjG,EAAQ,IACpBkG,EAAYlG,EAAQ,GAE1BG,EAAOD,SACLqF,UACAC,gBACAC,YACAC,WACAC,UACAC,YACAC,QACAC,kBACAC,aACAC,aACAC,YACAC,wDCzBF,IAAAC,EAAAnG,EAAA,GAGMoG,EAAa,WACjB,IAAIC,EAAU,OAiBd,YAfuB,IAAXlG,GAA0BA,EAAOD,QAC3CmG,EAAU,OAC+C,OAAhDC,OAAOC,UAAUC,UAAUC,MAAM,WAE1CJ,EAAU,UAC8C,OAA/CC,OAAOC,UAAUC,UAAUC,MAAM,WAC1CJ,EAAU,gBAC2C,OAAjDC,OAAOC,UAAUC,UAAUC,MAAM,cACnCJ,EAAU,aAE4C,OAA/CC,OAAOC,UAAUC,UAAUC,MAAM,UAC1CJ,EAAU,SACmD,OAApDC,OAAOC,UAAUC,UAAUC,MAAM,iBAC1CJ,EAAU,UAELA,GAqIHK,GAAsBC,aAlIP,SAACC,GAAkD,IAClEC,EADwBC,EAA0ChD,UAAAC,OAAA,QAAAI,IAAAL,UAAA,GAAAA,UAAA,GAA/B,aAAUqB,EAAqBrB,UAAAC,OAAA,QAAAI,IAAAL,UAAA,GAAAA,UAAA,GAAb,aAGnDiD,EAAe,SAACC,EAAiBC,EAAIC,GACzCX,UAAUY,aAAaJ,aAAaC,GAAiBI,KAAKH,GAAII,MAAMH,IAmHlEN,EAAOU,OAhHoB,WAE7B,OADAnB,EAAA,EAAO5B,MAAM,2BACL6B,KACN,IAAK,WACHD,EAAA,EAAO5B,MAAM,+BACbsC,MACaU,MAAQX,EAAOW,UAC5BV,EAAaU,MAAMC,UAAYZ,EAAOW,MAAMC,cAC5CX,EAAaU,MAAMC,UAAUC,kBAAoB,UACjDZ,EAAaU,MAAMC,UAAUE,oBAAsBd,EAAOe,gBAC1DZ,EAAaF,EAAcC,EAAU3B,GACrC,MACF,IAAK,UACHgB,EAAA,EAAO5B,MAAM,6BACbsC,UACqB1C,IAAjByC,EAAOW,OACTV,EAAaU,MAAQX,EAAOW,MACvBV,EAAaU,MAAMK,cACtBf,EAAaU,MAAMK,YAAc,WAGnCf,GACEgB,MAAOjB,EAAOiB,MACdN,OAASK,YAAa,WAG1Bb,EAAaF,EAAcC,EAAU3B,GACrC,MAEF,IAAK,gBAIH,GAHAgB,EAAA,EAAO5B,MAAM,4BACbsC,KAEIiB,KAAOA,IAAIC,UAEbC,OAAOC,eAAeC,oBAAoB,SAAU,UAAW,SAASC,GACpEhC,EAAA,EAAO5B,MAAM,wCAAyC4D,GACtDpB,GACEQ,OACEC,WACIE,oBAAqBS,EACrBV,kBAAkB,aAGvBX,EAAU3B,UAoBZ,GAAIyB,EAAOe,gBAChBd,EAAaU,MAAQX,EAAOW,QAAWC,cACvCX,EAAaU,MAAMC,UAAYX,EAAaU,MAAMC,cAClDX,EAAaU,MAAMC,UAAUC,kBAAoB,UACjDZ,EAAaU,MAAMC,UAAUE,oBAAsBd,EAAOe,gBAC1DZ,EAAaF,EAAcC,EAAU3B,OAChC,CAIL,IAAIiD,EAAc,mCACdxB,EAAOwB,cACTjC,EAAA,EAAO5B,MAAP,+BAAAX,OAA4CgD,EAAOwB,cACnDA,EAAcxB,EAAOwB,aAEvBjC,EAAA,EAAO5B,MAAM,yDACb,IACEyD,OAAOK,QAAQC,YAAYF,GAAeG,WAAW,GACnD,SAACC,GACC,QAAiBrE,IAAbqE,EAAJ,CAMA,IAAMC,EAAQD,EAASE,cACQvE,IAA3ByC,EAAOW,MAAMC,WACfX,EAAaU,MAAQX,EAAOW,QAAWC,cACvCX,EAAaU,MAAMC,UAAUC,kBAAoB,UACjDZ,EAAaU,MAAMC,UAAUE,oBAAsBe,GAEnD5B,GAAiBU,OAASC,WAAaC,kBAAmB,UACxDC,oBAAqBe,KAEzB1B,EAAaF,EAAcC,EAAU3B,QAdnCgB,EAAA,EAAOhB,MAAM,2BAEbA,GADmBwD,KAAM,8BAe/B,MAAOC,GACPzC,EAAA,EAAO5B,MAAM,2CAEbY,GADmBwD,KAAM,uBAI7B,MACF,QACExC,EAAA,EAAOhB,MAAM,gDAKjB0D,QAC2B,IAAX1I,GAA0BA,EAAOD,QACjDiG,EAAA,EAAOhB,MAAM,qDAEbgB,EAAA,EAAO5B,MAAM,mCAAoCqC,GACjDG,EAAaH,EAAQE,EAAU3B,KAKOiB,cAE1Cd,EAAA,2CC5JA,IAEMwD,EAFO9I,EAAQ,EAEA+I,CAAK,OAAQ,QAElCD,EAAaE,QAAU,SAAAC,GAAS,OAAIH,EAAaG,EAAUC,gBAE3DJ,EAAaK,SAAW,SAACF,GACvB,OAAQA,GACN,KAAKH,EAAaM,KAChB,MAAO,OACT,KAAKN,EAAaO,KAChB,MAAO,OACT,QACE,MAAO,YAIbP,EAAaQ,QAAU,SAACL,GACtB,OAAQA,GACN,KAAKH,EAAaM,KAChB,OAAON,EAAaO,KACtB,KAAKP,EAAaO,KAElB,QACE,OAAOP,EAAaM,OAI1BjJ,EAAOD,QAAU4I,mBC5BjB,IAEMjD,EAFO7F,EAAQ,EAEP+I,CAAK,SAAU,UAAW,UAAW,YAEnDlD,EAAMmD,QAAU,SAAAO,GAAK,OAAI1D,EAAM0D,EAAML,gBAErCrD,EAAMsD,SAAW,SAACI,GAChB,OAAQA,GACN,KAAK1D,EAAM2D,OACT,MAAO,SACT,KAAK3D,EAAM4D,QACT,MAAO,UACT,KAAK5D,EAAM6D,QACT,MAAO,UACT,KAAK7D,EAAM8D,SACT,MAAO,WACT,QACE,OAAO,OAIb9D,EAAMyD,QAAU,SAACC,GACf,OAAQA,GACN,KAAK1D,EAAM2D,OACT,OAAO3D,EAAM4D,QACf,KAAK5D,EAAM4D,QACT,OAAO5D,EAAM2D,OACf,KAAK3D,EAAM6D,QACT,OAAO7D,EAAM4D,QACf,KAAK5D,EAAM8D,SACT,OAAO9D,EAAM8D,SACf,QACE,OAAO9D,EAAM2D,SAInBrJ,EAAOD,QAAU2F,iBCzBjB1F,EAAOD,QAVP,SAAS6I,IAAc,QAAAa,EAAAC,KAAAhG,EAAAC,UAAAC,OAANxB,EAAM,IAAAyB,MAAAH,GAAAI,EAAA,EAAAA,EAAAJ,EAAAI,IAAN1B,EAAM0B,GAAAH,UAAAG,GACrB,KAAM4F,gBAAgBd,GACpB,OAAO,IAAKe,SAAS9H,UAAUJ,KAAKe,MAAMoG,GACvC,MAAMnF,OAAOI,MAAMhC,UAAU+H,MAAMxJ,KAAKgC,MAE7CyB,MAAMgG,KAAKzH,GAAM0H,QAAQ,SAACC,GACxBN,EAAKM,GAAO/I,OAAOgJ,IAAP,uBAAAvG,OAAkCsG,wBCPlD,IAEMhE,EAFOlG,EAAQ,EAEH+I,CAAK,WAAY,WAAY,WAAY,YAE3D7C,EAAU8C,QAAU,SAAAC,GAAS,OAAI/C,EAAU+C,EAAUC,gBAQrDhD,EAAUiD,SAAW,SAACF,GACpB,OAAQA,GACN,KAAK/C,EAAUkE,SACb,MAAO,WACT,KAAKlE,EAAUmE,SACb,MAAO,WACT,KAAKnE,EAAUoE,SACb,MAAO,WACT,KAAKpE,EAAUyD,SACb,MAAO,WACT,QACE,MAAO,YAIbzD,EAAUoD,QAAU,SAACL,GACnB,OAAQA,GACN,KAAK/C,EAAUkE,SACb,OAAOlE,EAAUkE,SACnB,KAAKlE,EAAUmE,SACb,OAAOnE,EAAUoE,SACnB,KAAKpE,EAAUoE,SACb,OAAOpE,EAAUmE,SACnB,KAAKnE,EAAUyD,SACb,OAAOzD,EAAUyD,SACnB,QACE,OAAOzD,EAAUkE,WAIvBjK,EAAOD,QAAUgG,iBC1CjB,IAAAqE,EAAApK,EAAAD,SACAsK,IACA7J,KAAA,UACA8J,IAAA,YAEA5J,IAEAF,KAAA,SACA8J,IAAA,wCACAC,OAAA,qEACAC,OAAA,wBAGAxI,IAAOxB,KAAA,SACPP,IAAOO,KAAA,gBACPiK,IAAOjK,KAAA,QACPiI,IAAOjI,KAAA,UACPuB,IAAOvB,KAAA,UACPkK,IAAOlK,KAAA,cACPO,IAAOP,KAAA,YAEPW,IACAX,KAAA,SACA8J,IAAA,eACAC,OAAA,gBACAC,OAAA,UAEAlK,IACAE,KAAA,aACA8J,IAAA,mBACAC,OAAA,gBACAC,OAAA,eAEAG,IACAC,KAAA,YACAN,IAAA,4BACAC,OAAA,gBACAC,OAAA,UAEAnK,IAGAiK,IAAA,mCACAC,OAAA,qCACAC,OAAA,gBAEAK,IAEAD,KAAA,MACAN,IAAA,0DACAC,OAAA,qCACAC,OAAA,SAAA9J,GACA,OAAAA,EAAA,SACA,qBACAA,EAAAoK,KACA,kBACA,kBAKAF,KAAA,OACAN,IAAA,wBACAC,OAAA,oBACAC,OAAA,eAGAhK,KAAA,UACA8J,IAAA,gBACAE,OAAA,eAGAhK,KAAA,OACA8J,IAAA,sCACAC,OAAA,oCACAC,OAAA,SAAA9J,GACA,aAAAA,EAAAqK,QACA,qBACA,aAIAH,KAAA,eACAN,IAAA,kCACAC,OAAA,mBACAC,OAAA,0BAGAI,KAAA,SACAN,IAAA,6CACAC,OAAA,4BACAC,OAAA,SAAA9J,GACA,aAAAA,EAAAsK,QACA,mBACA,mBAKAJ,KAAA,MACAN,IAAA,6CACAC,OAAA,oCACAC,OAAA,SAAA9J,GACA,mBAAAA,EAAAoI,UAAA,mBAAApI,EAAA+F,OAAA,aAIAmE,KAAA,SACAN,IAAA,0CACAC,OAAA,uCACAC,OAAA,SAAA9J,GACA,aAAAA,EAAAuK,cACA,qBACA,qBAIAzK,KAAA,QACA8J,IAAA,eACAE,OAAA,aAGAhK,KAAA,MACA8J,IAAA,gBACAE,OAAA,WAGAhK,KAAA,OACA8J,IAAA,aACAE,OAAA,YAGAhK,KAAA,QACA8J,IAAA,eACAE,OAAA,aAGAhK,KAAA,WACA8J,IAAA,kBACAE,OAAA,gBAGAhK,KAAA,YACA8J,IAAA,2CAGA9J,KAAA,UACA8J,IAAA,gBAGA9J,KAAA,WACA8J,IAAA,mBACAE,OAAA,iBAGAhK,KAAA,SACA8J,IAAA,iBACAE,OAAA,eAGAhK,KAAA,cACA8J,IAAA,2BACAC,OAAA,eACAC,OAAA,sBAOAI,KAAA,aACAN,IAAA,+KACAC,OAAA,uIACAC,OAAA,SAAA9J,GACA,IAAAwK,EAAA,qCAaA,OAXAA,GAAA,MAAAxK,EAAAyK,MAAA,4BAGAD,GAAA,MAAAxK,EAAA0K,QAAA,mBAEA,MAAA1K,EAAA2K,aACAH,GAAA,kBAGAA,GAAA,MAAAxK,EAAA,oCACAwK,GAAA,MAAAxK,EAAA,2CAKAF,KAAA,kBACA8J,IAAA,yBAGA9J,KAAA,mBACA8J,IAAA,0BACAE,OAAA,yBAGAhK,KAAA,aACA8J,IAAA,qBACAE,OAAA,mBAGAI,KAAA,QACAN,IAAA,kCACAC,OAAA,0BACAC,OAAA,SAAA9J,GACA,IAAAwK,EAAA,UAOA,OANA,MAAAxK,EAAA4K,YACAJ,GAAA,MACA,MAAAxK,EAAAQ,QACAgK,GAAA,QAGAA,KAKAN,KAAA,aAEAN,IAAA,mEACAC,OAAA,qBACAC,OAAA,qBAGAhK,KAAA,eACA8J,IAAA,gCACAC,OAAA,oBACAC,OAAA,yBAGAI,KAAA,SACAN,IAAA,oBACAC,OAAA,eACAC,OAAA,gBAGAhK,KAAA,UACA8J,IAAA,gBAGA9J,KAAA,YACA8J,IAAA,kBAGA9J,KAAA,UACA8J,IAAA,uCACAC,OAAA,wCACAC,OAAA,SAAA9J,GACA,aAAAA,EAAA6K,eACA,mBACA,mBAIA/K,KAAA,cACA8J,IAAA,0BACAE,OAAA,qBAGAI,KAAA,OACAN,IAAA,sCACAC,OAAA,2BACAC,OAAA,SAAA9J,GACA,OAAAA,EAAA,qCAMAkK,KAAA,aACAN,IAAA,IAAAkB,OAEA,wKAMAjB,OAAA,sCACAC,OAAA,SAAA9J,GACA,4BAAAA,EAAA+K,KAAA,gBAKAjL,KAAA,YACA8J,IAAA,IAAAkB,OAEA,2FAQAjB,OAAA,+BACAC,OAAA,SAAA9J,GACA,yBAAAA,EAAA+K,KAAA,gBAOAjL,KAAA,eACA8J,IAAA,kCACAC,OAAA,SACAC,OAAA,kBAKAhK,KAAA,YACA8J,IAAA,8BACAE,OAAA,iBAIAhK,KAAA,eACA8J,IAAA,6DACAC,OAAA,+DACAC,OAAA,kCAGAI,KAAA,UACAL,OAAA,YAMA5J,OAAA+K,KAAAtB,GAAAN,QAAA,SAAAtI,GACA4I,EAAA5I,GACAsI,QAAA,SAAA6B,GACAA,EAAArB,MACAqB,EAAArB,IAAA,QAEAqB,EAAAnB,SACAmB,EAAAnB,OAAA,mMCvVMnF,aACJ,SAAAA,EAAYuG,EAAYC,EAAaC,EAAWC,EAAUhB,EAASiB,EACjEC,EAAMZ,EAAYa,EAASC,gGAASC,CAAA1C,KAAArE,GACpCqE,KAAKkC,WAAaA,EAClBlC,KAAKmC,YAAcA,EACnBnC,KAAKoC,UAAYA,EACjBpC,KAAKqC,SAAWA,EAChBrC,KAAKqB,QAAUA,EACfrB,KAAKsC,KAAOA,EACZtC,KAAKuC,KAAOA,EACZvC,KAAK2B,WAAaA,EAClB3B,KAAKwC,QAAUA,EACfxC,KAAKyC,QAAUA,yFAIf,OAAO,IAAI9G,EAAcqE,KAAKkC,WAAYlC,KAAKmC,YAAanC,KAAKoC,UAAWpC,KAAKqC,SACvErC,KAAKqB,QAASrB,KAAKsC,KAAMtC,KAAKuC,KAAMvC,KAAK2B,WAAY3B,KAAKwC,QAASxC,KAAKyC,yCAIlF,IAAME,GACJT,WAAYlC,KAAKkC,WACjBC,YAAanC,KAAKmC,YAClBC,UAAWpC,KAAKoC,UAChBC,SAAUrC,KAAKqC,SACfhB,QAASrB,KAAKqB,QACdiB,KAAMtC,KAAKsC,KACXC,KAAMvC,KAAKuC,KACXZ,WAAY3B,KAAK2B,YAInB,OAFI3B,KAAKwC,UAASG,EAAMH,QAAUxC,KAAKwC,SACnCxC,KAAKyC,UAASE,EAAMF,QAAUzC,KAAKyC,SAChCE,0CAIP,OAAO3C,KAAKkC,oDAIZ,OAAOlC,KAAKmC,mDAIZ,OAAOnC,KAAKoC,gDAIZ,OAAOpC,KAAKqC,8CAIZ,OAAOrC,KAAKqB,0CAIZ,OAAOrB,KAAKsC,uCAIZ,OAAOtC,KAAKuC,6CAIZ,OAAOvC,KAAK2B,gDAIZ,OAAO3B,KAAKwC,6CAIZ,OAAOxC,KAAKyC,iBAKhBnM,EAAOD,QAAUsF,2LC9EXC,aAEJ,SAAAA,EAAYgH,EAAOL,EAAMnB,EAAMyB,EAAUC,EAAQC,gGAAUL,CAAA1C,KAAApE,GACzDoE,KAAK4C,MAAQA,EACb5C,KAAKuC,KAAOA,EACZvC,KAAKoB,KAAOA,EACZpB,KAAK6C,SAAWA,EAChB7C,KAAK8C,OAASA,MACd9C,KAAK+C,SAAWA,6FAIhB,IAAMC,EAAS,IAAIpH,EAAUoE,KAAK4C,MAAO5C,KAAKuC,KAAMvC,KAAKoB,KAAMpB,KAAK6C,SAClE7C,KAAK8C,OAAQ9C,KAAK+C,UAIpB,OAHI/C,KAAKiD,KACPD,EAAOE,OAAOlD,KAAKiD,KAEdD,kCAKP,OACEJ,MAAO5C,KAAK4C,MACZL,KAAMvC,KAAKuC,KACXnB,KAAMpB,KAAKoB,KACXyB,SAAU7C,KAAK6C,SACfC,OAAQ9C,KAAK8C,OACbC,SAAU/C,KAAK+C,yCAIZE,GACLjD,KAAKiD,IAAMA,oCAIX,OAAOjD,KAAKuC,qCAGNA,GACNvC,KAAKuC,KAAOA,qCAIZ,OAAOvC,KAAK4C,0CAIZ,OAAO5C,KAAK8C,wCAGLK,EAAW3L,GAClBwI,KAAK8C,OAAOK,GAAa3L,mCAIzB,OAAOwI,KAAKiD,qCAIZ,OAAOjD,KAAKiD,sCAIZ,OAAOjD,KAAKoB,2CAIZ,OAAOpB,KAAK6C,+CAIZ,OAAO7C,KAAK+C,kBAIhBnH,EAAUwH,aAAe,SAACvC,EAAOoC,GAC/B,IAAMI,EAAS,IAAIC,IAEfC,EAAM,GAiBV,OAhBA1C,EAAMT,QAAQ,SAACoD,GACb,IAAIC,EACE3M,EAAO0M,EAAmBE,cACXD,EAAR,SAAT3M,EAAsB,EACR,SAATA,EAAsB,EAE7ByM,GAAO,EAGT,IAAMX,EAAQ,IAAIhH,EAAU9E,EAAM2M,GAC9BR,GAAgB,WAATnM,GAA8B,eAATA,GAAkC,QAATA,IACvDyM,GAAO,EACPX,EAAMM,OAAOK,IAEfF,EAAOM,IAAIf,EAAMgB,WAAWF,cAAed,KAEtCS,GAGT/M,EAAOD,QAAUuF,yLCpGjB,IAAMI,EAAQ7F,EAAQ,GAEhB0F,aACJ,SAAAA,EAAY6D,EAAOmE,EAAMC,gGAAapB,CAAA1C,KAAAnE,GACpCmE,KAAKN,MAAQA,EACbM,KAAK6D,KAAOA,EACZ7D,KAAK8D,YAAcA,yFAInB,OAAO,IAAIjI,EAASmE,KAAKN,MAAOM,KAAK6D,KAAM7D,KAAK8D,6CAIhD,OACEpE,MAAO1D,EAAMsD,SAASU,KAAKN,OAC3BmE,KAAM7D,KAAK6D,KACXC,YAAa9D,KAAK8D,sDAKpB,OAAO9D,KAAK8D,8CAIZ,OAAO9D,KAAK6D,wCAIZ,OAAO7D,KAAKN,uCAGLA,GACPM,KAAKN,MAAQA,WAIjBpJ,EAAOD,QAAUwF,uLCtCjB,SAASkI,EAAaC,EAAKC,GACzB,IAAMC,EAASD,EAAOD,EAAO,EACvBG,EAASC,KAAKD,SAAWD,EAC/B,OAAOE,KAAKC,MAAMF,EAASH,GAG7B,SAASM,EAAYC,GAGnB,IAFA,IAAMC,EAAU,IAAIC,WAAWF,GAEtBhO,EAAI,EAAGA,EAAIiO,EAAQtK,OAAQ3D,GAAK,EACvCiO,EAAQjO,GAAKwN,EAAa,EAAG,KAE/B,OAAOS,EAGT,SAASE,EAAQC,GACf,OAAOxK,MAAMhC,UAAUyM,IAAIlO,KAAK,IAAI+N,WAAWE,GAAS,SAACE,GACvD,IAAMC,EAAWD,EAAEvF,SAAS,IAC5B,MAAO,KAAAvF,OAAK+K,GAAW5E,OAAO,KAC7B6E,KAAK,QAGJjJ,aACJ,SAAAA,EAAYkJ,EAAOC,EAAKC,gGAAMxC,CAAA1C,KAAAlE,GAC5BkE,KAAKgF,MAAQA,EACbhF,KAAKiF,IAAMA,EACXjF,KAAKkF,KAAOA,EACZlF,KAAKmF,MAAO,EACZnF,KAAKoF,iBAAkB,yFAIvB,IAAMpC,EAAS,IAAIlH,EAAQkE,KAAKgF,MAAOhF,KAAKiF,IAAKjF,KAAKkF,MAGtD,OAFAlC,EAAOqC,QAAQrF,KAAKmF,MACpBnC,EAAOsC,mBAAmBtF,KAAKoF,iBACxBpC,kCAIP,IAAML,GACJqC,MAAOhF,KAAKgF,MACZC,IAAKjF,KAAKiF,KAIZ,OAFIjF,KAAKmF,OAAMxC,EAAMwC,KAAOnF,KAAKmF,MAC7BnF,KAAKoF,kBAAiBzC,EAAMyC,gBAAkBpF,KAAKoF,iBAChDzC,qCAIP,OAAO3C,KAAKgF,uCAIZ,OAAOhF,KAAKiF,qCAIZ,OAAOjF,KAAKmF,uCAIZ,OAAOnF,KAAKkF,qCAGNC,GACNnF,KAAKmF,KAAOA,8CAIZ,OAAOnF,KAAKoF,2DAGKA,GACjBpF,KAAKoF,gBAAkBA,WAK3BtJ,EAAQyJ,SAAW,WACjB,IAAMvK,EAAO,IAAIc,EACX0J,EAAOlB,EAAY,GACnBW,EAAMX,EAAY,IAGxB,OAFAtJ,EAAKgK,MAAQN,EAAQc,GACrBxK,EAAKiK,IAAMP,EAAQO,GACZjK,GAGT1E,EAAOD,QAAUyF,yLCvFjB,IAAM2J,EAAgBtP,EAAQ,IACxBkG,EAAYlG,EAAQ,GACpB8I,EAAe9I,EAAQ,GAEvB4F,aACJ,SAAAA,EAAYuC,EAAIgE,EAAMC,gGAAMG,CAAA1C,KAAAjE,GAC1BiE,KAAK1B,GAAKA,EACV0B,KAAKuC,KAAOA,EACZvC,KAAKsC,KAAOA,EACZtC,KAAKZ,UAAY/C,EAAUkE,SAC3BP,KAAK0F,WAAa,IAAIpC,IACtBtD,KAAKqD,OAAS,IAAIC,IAClBtD,KAAK2F,KAAO,IAAIrC,IAChBtD,KAAK4F,UAAY,KACjB5F,KAAK6F,aAAe,KACpB7F,KAAK8F,QAAU,EACf9F,KAAK+F,IAAM,KACX/F,KAAKgG,KAAO,KACZhG,KAAKiG,WAAa,KAClBjG,KAAKkG,qGAIL,IAAMlD,EAAS,IAAIjH,EAAUiE,KAAK1B,GAAI0B,KAAKsC,KAAMtC,KAAKuC,MA+BtD,OA9BAS,EAAOmD,aAAanG,KAAKZ,WACzB4D,EAAOoD,WAAWpG,KAAK8F,SACvB9C,EAAOqD,cAAcrG,KAAKiG,YAC1BjG,KAAKqD,OAAOjD,QAAQ,SAACwC,GACnBI,EAAOsD,SAAS1D,EAAM2D,WAExBvG,KAAK0F,WAAWtF,QAAQ,SAACoG,EAAWlI,GAClC0E,EAAOyD,aAAanI,EAAIkI,KAE1BxG,KAAK2F,KAAKvF,QAAQ,SAACsG,EAAKpI,GACtB0E,EAAO2D,OAAOrI,EAAIoI,EAAIH,WAEpBvG,KAAK4F,WACP5C,EAAO4D,aAAa5G,KAAK4F,UAAUW,SAEjCvG,KAAK6G,aACP7D,EAAO8D,eAAe9G,KAAK6G,aAEzB7G,KAAK+F,KACP/C,EAAO+D,OAAO/G,KAAK+F,IAAIQ,SAErBvG,KAAKgG,MACPhD,EAAOgE,QAAQhH,KAAKgG,KAAKO,SAE3BvG,KAAKkG,WAAW9F,QAAQ,SAAC6G,GACvBjE,EAAOkE,aAAaD,EAAUV,WAE5BvG,KAAKN,OACPsD,EAAOmE,SAASnH,KAAKN,OAEhBsD,kCAIP,IAAML,GACJrE,GAAI0B,KAAK1B,GACTgE,KAAMtC,KAAKsC,KACXC,KAAMvC,KAAKuC,KACX0D,WAAYjG,KAAKiG,WACjB7G,UAAW/C,EAAUiD,SAASU,KAAKZ,WACnCyH,YAAa7G,KAAK6G,YAClBnB,cACAC,QACAtC,UACA6C,eAsBF,OApBIlG,KAAK8F,UACPnD,EAAMmD,QAAU9F,KAAK8F,SAEvB9F,KAAKqD,OAAOjD,QAAQ,SAACwC,GACnBD,EAAMU,OAAOnC,KAAK0B,EAAMD,WAE1B3C,KAAK0F,WAAWtF,QAAQ,SAACoG,GACvB7D,EAAM+C,WAAWxE,KAAKsF,EAAU7D,WAElC3C,KAAK2F,KAAKvF,QAAQ,SAACsG,GACjB/D,EAAMgD,KAAKzE,KAAKwF,EAAI/D,WAElB3C,KAAK4F,YACPjD,EAAMiD,UAAY5F,KAAK4F,UAAUjD,SAEnC3C,KAAKkG,WAAW9F,QAAQ,SAAC6G,GACvBtE,EAAMuD,WAAWhF,KAAK+F,EAAUtE,WAElCA,EAAMoD,IAAM/F,KAAK+F,KAAO/F,KAAK+F,IAAIpD,QACjCA,EAAMqD,KAAOhG,KAAKgG,MAAQhG,KAAKgG,KAAKrD,QAC7BA,oCAIP,OAAO3C,KAAKuC,uCAIZ,OAAOvC,KAAKsC,qCAIZ,OAAOtC,KAAK1B,wCAGDA,EAAIxH,GACfkJ,KAAK0F,WAAW/B,IAAIrF,EAAIxH,kCAGnBsQ,GACLpH,KAAK2F,KAAKhC,IAAIyD,EAAQC,QAASD,oCAGxBE,GACPtH,KAAKqD,OAAOM,IAAI2D,EAAUC,UAAWD,2CAGvB/E,GACd,OAAOvC,KAAKqD,OAAOjM,IAAImL,oCAGhBK,GACP,IAAI4E,EAMJ,OALAxH,KAAKqD,OAAOjD,QAAQ,SAACpF,GACfA,EAAK4I,WAAWF,gBAAkBd,EAAMc,gBAC1C8D,EAASxM,KAGNwM,mCAGA5E,GACP,OAAgC,OAAzB5C,KAAK4D,SAAShB,uCAIrB,OAAO5C,KAAKqD,+CAIZ,OAAOrD,KAAK0F,6CAIZ,OAAO1F,KAAK2F,oCAGPrH,GACL,OAAO0B,KAAK2F,KAAKvO,IAAIkH,wCAIrB,OAAO0B,KAAK8F,2CAGHA,GACT9F,KAAK8F,QAAUA,yCAIf,OAAO9F,KAAKZ,+CAGDA,GACXY,KAAKZ,UAAYA,oCAIjB,OAAOY,KAAKgG,qCAGNyB,GACNzH,KAAKgG,KAAOyB,mCAIZ,OAAOzH,KAAK+F,mCAGP2B,GACL1H,KAAK+F,IAAM2B,uCAGAT,GACXjH,KAAKkG,WAAWhF,KAAK+F,yCAGTf,GAAY,IAAAnG,EAAAC,KACxBkG,EAAW9F,QAAQ,SAAC6G,GAClBlH,EAAKmH,aAAaD,6CAKpB,OAAOjH,KAAKkG,kDAGC1O,GACbwI,KAAK6G,YAAcrP,2CAInB,OAAOwI,KAAK6G,oDAIZ,OAAO7G,KAAKiG,iDAGAA,GACZjG,KAAKiG,WAAaA,iCAGb0B,GACL,IAAMC,EAAS,IAAI7L,EAAUiE,KAAK1B,GAAI0B,KAAKsC,KAAMtC,KAAKuC,MAuBtD,GArBAqF,EAAOzB,aAAa9J,EAAUoD,QAAQO,KAAKZ,YAEvCuI,EAAUtE,QACZrD,KAAKqD,OAAOjD,QAAQ,SAACwC,GACnB,GAAI+E,EAAUtE,OAAOwE,IAAIjF,EAAMgB,WAAWF,eAAgB,CACxD,IAAMV,EAAS2E,EAAUtE,OAAOjM,IAAIwL,EAAMgB,WAAWF,eAAe6C,QACpEvD,EAAO8E,QAAQlF,EAAM2E,WACjBvE,EAAO+E,UACT/E,EAAOE,OAAON,EAAMoF,UAEtBJ,EAAOtB,SAAStD,MAKtBhD,KAAK0F,WAAWtF,QAAQ,SAACoG,EAAWlI,GAC9BqJ,EAAUjC,WAAWmC,IAAIvJ,IAC3BsJ,EAAOnB,aAAanI,EAAIkI,KAIxBmB,EAAU/B,WAAa5F,KAAK4F,UAAW,CACzC,IAAMA,EAAY,IAAIH,EAChBwC,EAAcjI,KAAK4F,UAAUsC,oBAAoBjJ,EAAaM,MAChE0I,GACFA,EAAY7H,QAAQ,SAAC+H,GACnB,IAAMC,KACND,EAAY/H,QAAQ,SAACiI,GACnBD,EAAalH,KAAKmH,EAAW9B,WAE/BX,EAAU0C,+BAA+BrJ,EAAaO,KAAM4I,KAIhE,IAAMG,EAAcvI,KAAK4F,UAAUsC,oBAAoBjJ,EAAaO,MAChE+I,GACFA,EAAYnI,QAAQ,SAACoI,GACnB,IAAMJ,KACNI,EAAYpI,QAAQ,SAACqI,GACnBL,EAAalH,KAAKuH,EAAWlC,WAE/BX,EAAU0C,+BAA+BrJ,EAAaM,KAAM6I,KAIhEpI,KAAK2F,KAAKvF,QAAQ,SAACsG,GACjB,IAAMgC,EAAWhC,EAAIH,QACrBmC,EAASvC,aAAalH,EAAaQ,QAAQiH,EAAIiC,iBAC/Cf,EAAOjB,OAAO+B,KAGhBd,EAAOhB,aAAahB,GAEtB,OAAOgC,yCAIP,OAAO5H,KAAK4F,+CAGDA,GACX5F,KAAK4F,UAAYA,2CAIjB,OAAO5F,KAAK6F,oDAGCD,GACb5F,KAAK6F,aAAeD,qCAIpB,OAAO5F,KAAKN,uCAGLA,GACPM,KAAKN,MAAQA,WAIjBpJ,EAAOD,QAAU0F,yLCzSjB,IAAMkD,EAAe9I,EAAQ,GAEvBsP,aACJ,SAAAA,iGAAc/C,CAAA1C,KAAAyF,GACZzF,KAAK4I,QACL5I,KAAK6I,QACL7I,KAAK8I,YAAc,4FAInB,IAAM9F,EAAS,IAAIyC,EAenB,OAdAzF,KAAK4I,KAAKxI,QAAQ,SAAC+H,GACjB,IAAMC,KACND,EAAY/H,QAAQ,SAACiI,GACnBD,EAAalH,KAAKmH,EAAW9B,WAE/BvD,EAAOsF,+BAA+BF,KAExCpI,KAAK6I,KAAKzI,QAAQ,SAACoI,GACjB,IAAMJ,KACNI,EAAYpI,QAAQ,SAACqI,GACnBL,EAAalH,KAAKuH,EAAWlC,WAE/BvD,EAAOsF,+BAA+BF,KAEjCpF,kCAIP,IAAML,GACJiG,QACAC,SAgBF,OAdA7I,KAAK4I,KAAKxI,QAAQ,SAAC+H,GACjB,IAAMC,KACND,EAAY/H,QAAQ,SAACiI,GACnBD,EAAalH,KAAKmH,EAAW1F,WAE/BA,EAAMiG,KAAK1H,KAAKkH,KAElBpI,KAAK6I,KAAKzI,QAAQ,SAACoI,GACjB,IAAMJ,KACNI,EAAYpI,QAAQ,SAACqI,GACnBL,EAAalH,KAAKuH,EAAW9F,WAE/BA,EAAMkG,KAAK3H,KAAKkH,KAEXzF,yDAGsBvD,EAAW2J,GACxC,OAAI3J,IAAcH,EAAaM,KACtBS,KAAK4I,KAAK1H,KAAK6H,GAEjB/I,KAAK6I,KAAK3H,KAAK6H,8CAGL3J,EAAW4J,GAC5B,OAAI5J,IAAcH,EAAaM,KACtBS,KAAK4I,KAAK1H,MAAM8H,IAElBhJ,KAAK6I,KAAK3H,MAAM8H,gDAGL5J,GAClB,OAAIA,IAAcH,EAAaM,KACtBS,KAAK4I,KAEP5I,KAAK6I,qDAGUI,GACtBjJ,KAAK8I,YAAcG,oDAInB,OAAOjJ,KAAK8I,qBAIhBxS,EAAOD,QAAUoP,2LChFXxJ,aACJ,SAAAA,EAAYiN,EAAWC,GAAO,IAAApJ,EAAAC,kGAAA0C,CAAA1C,KAAA/D,GAC5B+D,KAAKkJ,UAAYA,EACjBlJ,KAAKmJ,SACLA,EAAM/I,QAAQ,SAACgJ,GACbrJ,EAAKoJ,MAAMjI,KAAKmI,SAASD,EAAM,8FAKjC,OAAO,IAAInN,EAAgB+D,KAAKkJ,UAAWlJ,KAAKmJ,uCAIhD,IAAMxG,GACJuG,UAAWlJ,KAAKkJ,UAChBC,UAGF,OADAxG,EAAMwG,MAAQnJ,KAAKmJ,MACZxG,yCAIP,OAAO3C,KAAKkJ,6CAIZ,OAAOlJ,KAAKmJ,eAIhB7S,EAAOD,QAAU4F,2LC/BXC,aACJ,SAAAA,EAAYkN,gGAAM1G,CAAA1C,KAAA9D,GAChB8D,KAAKoJ,KAAOA,yFAIZ,IAAM7C,EAAQ,IAAIrK,EAAW8D,KAAKoJ,MAClC7C,EAAM+C,SAAStJ,KAAKuJ,OACpBhD,EAAMiD,YAAYxJ,KAAKnB,UACvBmB,KAAKyJ,WAAWzJ,KAAK0J,yCAKrB,IAAM/G,GACJyG,KAAMpJ,KAAKoJ,MAOb,OALIpJ,KAAKuJ,QAAO5G,EAAM4G,MAAQvJ,KAAKuJ,OAC/BvJ,KAAK2J,QAAOhH,EAAMgH,MAAQ3J,KAAK2J,OAC/B3J,KAAK4J,UAASjH,EAAMiH,QAAU5J,KAAK4J,SACnC5J,KAAKnB,WAAU8D,EAAM9D,SAAWmB,KAAKnB,UACrCmB,KAAK0J,UAAS/G,EAAMkH,QAAU7J,KAAK0J,SAChC/G,qCAIP,OAAO3C,KAAKuJ,uCAGLA,GACPvJ,KAAKuJ,MAAQA,wCAIb,OAAOvJ,KAAKnB,6CAGFA,GACVmB,KAAKnB,SAAWA,uCAIhB,OAAOmB,KAAK0J,2CAGHA,GACT1J,KAAK0J,QAAUA,uCAIf,OAAO1J,KAAK4J,2CAGHA,GACT5J,KAAK4J,QAAUA,qCAIf,OAAO5J,KAAK2J,uCAGLA,GACP3J,KAAK2J,MAAQA,oCAIb,OAAO3J,KAAKoJ,cAIhB9S,EAAOD,QAAU6F,2LCtEXC,aACJ,SAAAA,EAAYmC,gGAAIoE,CAAA1C,KAAA7D,GACd6D,KAAK1B,GAAKA,EACV0B,KAAK8J,OAAS,IAAIxG,2FAIlB,IAAMN,EAAS,IAAI7G,EAAW6D,KAAK1B,IAInC,OAHA0B,KAAK8J,OAAO1J,QAAQ,SAAC2J,GACnB/G,EAAOgH,SAASD,EAAMxD,WAEjBvD,kCAIP,IAAML,GACJrE,GAAI0B,KAAK1B,GACTwL,WAKF,OAHA9J,KAAK8J,OAAO1J,QAAQ,SAAC2J,GACnBpH,EAAMmH,OAAO5I,KAAK6I,EAAMpH,WAEnBA,kCAIP,OAAO3C,KAAK1B,oCAGLyL,GACP/J,KAAK8J,OAAOnG,IAAIoG,EAAM1C,QAAS0C,yCAGnBE,GACZ,IAAIzC,EAMJ,OALAxH,KAAK8J,OAAO1J,QAAQ,SAAC2J,GACfA,EAAMG,WAAWxG,gBAAkBuG,EAAMvG,gBAC3C8D,EAASuC,KAGNvC,sCAIP,OAAOxH,KAAK8J,iDAIZ9J,KAAK8J,OAAOK,yCAGLT,GACP,OAAO1J,KAAK8J,OAAO1S,IAAIsS,YAI3BpT,EAAOD,QAAU8F,2LCxDXC,aACJ,SAAAA,EAAY6N,EAAO3L,gGAAIoE,CAAA1C,KAAA5D,GACrB4D,KAAKiK,MAAQA,EACbjK,KAAK1B,GAAKA,EACV0B,KAAKmJ,SACLnJ,KAAKoK,UACLpK,KAAKqK,oGAIL,IAAMrH,EAAS,IAAI5G,EAAU4D,KAAKiK,MAAOjK,KAAK1B,IAiB9C,OAhBI0B,KAAKsK,SACPtH,EAAOuH,WAAWvK,KAAKsK,SAEzBtK,KAAKmJ,MAAM/I,QAAQ,SAACgJ,GAClBpG,EAAOwH,QAAQpB,KAEjBpJ,KAAKoK,OAAOhK,QAAQ,SAACqK,GACnBzH,EAAO0H,eAAeD,EAAMlE,WAE9BvG,KAAKqK,UAAUjK,QAAQ,SAACyC,GACtB,IAAMuF,KACNvF,EAASzC,QAAQ,SAACuK,GAChBvC,EAAalH,KAAKyJ,EAAM3H,YAE1BA,EAAO4H,uBAAuBxC,KAEzBpF,kCAIP,IAAML,GACJsH,MAAOjK,KAAKiK,MACZ3L,GAAI0B,KAAK1B,GACT6K,SACAiB,UACAC,cAkBF,OAhBIrK,KAAKsK,UACP3H,EAAM2H,QAAUtK,KAAKsK,SAEvBtK,KAAKmJ,MAAM/I,QAAQ,SAACgJ,GAClBzG,EAAMwG,MAAMjI,KAAKkI,KAEnBpJ,KAAKoK,OAAOhK,QAAQ,SAACqK,GACnB9H,EAAMyH,OAAOlJ,KAAKuJ,EAAM9H,WAE1B3C,KAAKqK,UAAUjK,QAAQ,SAACyC,GACtB,IAAMuF,KACNvF,EAASzC,QAAQ,SAACuK,GAChBvC,EAAalH,KAAKyJ,EAAMhI,WAE1BA,EAAM0H,UAAUnJ,KAAKkH,KAEhBzF,qCAIP,OAAO3C,KAAKiK,yCAGHK,GACTtK,KAAKsK,QAAUA,uCAIf,OAAOtK,KAAKsK,wCAIZ,OAAOtK,KAAK1B,mCAGN8K,GACNpJ,KAAKmJ,MAAMjI,KAAKkI,sCAIhB,OAAOpJ,KAAKmJ,6CAGCsB,GACbzK,KAAKoK,OAAOlJ,KAAKuJ,0CAGJI,GACb,IAAIrD,EAMJ,OALAxH,KAAKoK,OAAOhK,QAAQ,SAACqK,GACfA,EAAMK,eAAepH,gBAAkBmH,EAAWnH,gBACpD8D,EAASiD,KAGNjD,4CAIP,OAAOxH,KAAKoK,8CAGCS,GACb,IAAIrD,GAAS,EAMb,OALAxH,KAAKoK,OAAOhK,QAAQ,SAACqK,GACfA,EAAMK,eAAepH,gBAAkBmH,EAAWnH,gBACpD8D,GAAS,KAGNA,yCAIP,OAAOxH,KAAKqK,0DAGUjC,GACtBpI,KAAKqK,UAAUnJ,KAAKkH,wCAGTiC,GACXrK,KAAKqK,UAAYA,WAIrB/T,EAAOD,QAAU+F,iBC1HjB9F,EAAAD,QAAA,SAAA0U,GACA,IAAAA,EAAAC,gBAAA,CACA,IAAA1U,EAAAW,OAAAY,OAAAkT,GAEAzU,EAAA2U,WAAA3U,EAAA2U,aACAhU,OAAAC,eAAAZ,EAAA,UACAa,YAAA,EACAC,IAAA,WACA,OAAAd,EAAAE,KAGAS,OAAAC,eAAAZ,EAAA,MACAa,YAAA,EACAC,IAAA,WACA,OAAAd,EAAAC,KAGAU,OAAAC,eAAAZ,EAAA,WACAa,YAAA,IAEAb,EAAA0U,gBAAA,EAEA,OAAA1U,kBCtBAA,EAAAD,QAAA,SAAAC,GAoBA,OAnBAA,EAAA0U,kBACA1U,EAAA4U,UAAA,aACA5U,EAAA6U,SAEA7U,EAAA2U,WAAA3U,EAAA2U,aACAhU,OAAAC,eAAAZ,EAAA,UACAa,YAAA,EACAC,IAAA,WACA,OAAAd,EAAAE,KAGAS,OAAAC,eAAAZ,EAAA,MACAa,YAAA,EACAC,IAAA,WACA,OAAAd,EAAAC,KAGAD,EAAA0U,gBAAA,GAEA1U,iRCpBC,SAASmB,EAAEsH,GAAG,UAAAqM,EAAiB/U,IAAS,UAAA+U,EAAiB9U,GAAOA,EAAOD,QAAQ0I,KAA0CsM,UAAM/Q,KAAAgR,EAAA,mBAAAC,EAAA,GAAAA,EAAAzS,MAAAzC,EAAAgV,GAAAE,KAAAjV,EAAAD,QAAAiV,IAA/H,CAAwLtL,EAAK,WAAW,OAAO,SAASvI,GAAG,SAASsH,EAAE1H,GAAG,GAAGW,EAAEX,GAAG,OAAOW,EAAEX,GAAGhB,QAAQ,IAAIW,EAAEgB,EAAEX,IAAIhB,WAAWiI,GAAGjH,EAAEmU,QAAO,GAAI,OAAO/T,EAAEJ,GAAGX,KAAKM,EAAEX,QAAQW,EAAEA,EAAEX,QAAQ0I,GAAG/H,EAAEwU,QAAO,EAAGxU,EAAEX,QAAQ,IAAI2B,KAAK,OAAO+G,EAAEpI,EAAEc,EAAEsH,EAAEnI,EAAEoB,EAAE+G,EAAE1G,EAAE,GAAG0G,EAAE,GAAlM,EAAuM,SAAStH,EAAEsH,EAAE/G,GAAG,aAAa,SAASX,EAAEI,EAAEsH,GAAG,iBAAY,IAAoBtH,EAAE,YAAYT,EAAES,MAAMsH,EAAEtH,EAAEA,OAAE,GAAQsH,EAAEA,MAAM,IAAI/G,EAAEX,EAAEd,EAAEkB,GAAGa,EAAEjB,EAAEoU,OAAO1K,EAAE1J,EAAEiH,GAAGoN,EAAErU,EAAEsU,KAAKC,EAAEvT,EAAE0I,IAAI2K,KAAKrT,EAAE0I,GAAG8K,KAAkE,OAA3D9M,EAAE+M,UAAU/M,EAAE,0BAAyB,IAAKA,EAAEgN,WAAWH,GAAYhV,EAAE,+BAA+B0B,GAAGN,EAAEmJ,EAAE7I,EAAEyG,KAAK1G,EAAE0I,KAAKnK,EAAE,yBAAyB0B,GAAGD,EAAE0I,GAAGI,EAAE7I,EAAEyG,IAAI/G,EAAEK,EAAE0I,IAAI1J,EAAE2U,QAAQjN,EAAEiN,QAAQjN,EAAEiN,MAAM3U,EAAE2U,OAAOhU,EAAEiU,OAAO5U,EAAEsU,KAAK5M,GAAG,IAAI/H,EAAE,mBAAmBM,QAAQ,UAAA8T,EAAiB9T,OAAO4U,UAAS,SAASzU,GAAG,OAAA2T,EAAc3T,IAAG,SAASA,GAAG,OAAOA,GAAG,mBAAmBH,QAAQG,EAAE0U,cAAc7U,QAAQG,IAAIH,OAAOa,UAAU,SAA3EiT,EAA2F3T,IAAGlB,EAAEyB,EAAE,GAAGM,EAAEN,EAAE,GAAGmJ,EAAEnJ,EAAE,IAAIpB,EAAEoB,EAAE,EAAFA,CAAK,oBAAoBP,EAAEpB,QAAQ0I,EAAE1H,EAAE,IAAIgB,EAAE0G,EAAEqN,YAAYrN,EAAEsN,SAAS/T,EAAE+T,SAAStN,EAAEuN,QAAQjV,EAAE0H,EAAEwN,QAAQvU,EAAE,IAAI+G,EAAEyN,OAAOxU,EAAE,KAAK,SAASP,EAAEsH,EAAE/G,IAAG,SAAU+G,GAAG,aAAmlB,IAAI/H,EAAEgB,EAAE,GAAGzB,EAAEyB,EAAE,EAAFA,CAAK,wBAAwBP,EAAEpB,QAAlnB,SAAWoB,EAAEO,GAAG,IAAIX,EAAEI,EAAEO,EAAEA,GAAG+G,EAAE0N,SAAS,MAAMhV,IAAIA,EAAEO,EAAEqU,SAAS,KAAKrU,EAAE0U,MAAM,iBAAiBjV,IAAI,MAAMA,EAAEkV,OAAO,KAAKlV,EAAE,MAAMA,EAAEkV,OAAO,GAAG3U,EAAEqU,SAAS5U,EAAEO,EAAE0U,KAAKjV,GAAG,sBAAsBmV,KAAKnV,KAAKlB,EAAE,uBAAuBkB,GAAGA,OAAE,IAAoBO,EAAEA,EAAEqU,SAAS,KAAK5U,EAAE,WAAWA,GAAGlB,EAAE,WAAWkB,GAAGJ,EAAEL,EAAES,IAAIJ,EAAEiL,OAAO,cAAcsK,KAAKvV,EAAEgV,UAAUhV,EAAEiL,KAAK,KAAK,eAAesK,KAAKvV,EAAEgV,YAAYhV,EAAEiL,KAAK,QAAQjL,EAAEsU,KAAKtU,EAAEsU,MAAM,IAAI,IAA+BxK,GAAF,IAAvB9J,EAAEqV,KAAKG,QAAQ,KAAc,IAAIxV,EAAEqV,KAAK,IAAIrV,EAAEqV,KAAK,OAAOrV,EAAEiH,GAAGjH,EAAEgV,SAAS,MAAMlL,EAAE,IAAI9J,EAAEiL,KAAKjL,EAAEyV,KAAKzV,EAAEgV,SAAS,MAAMlL,GAAGnJ,GAAGA,EAAEsK,OAAOjL,EAAEiL,KAAK,GAAG,IAAIjL,EAAEiL,MAAMjL,KAA0DX,KAAKqI,EAAE,WAAW,OAAOiB,KAAlB,KAA4B,SAASvI,EAAEsH,GAAG,IAAI/G,EAAE,0OAA0OX,GAAG,SAAS,WAAW,YAAY,WAAW,OAAO,WAAW,OAAO,OAAO,WAAW,OAAO,YAAY,OAAO,QAAQ,UAAUI,EAAEpB,QAAQ,SAASoB,GAAG,IAAIsH,EAAEtH,EAAET,EAAES,EAAEoV,QAAQ,KAAKtW,EAAEkB,EAAEoV,QAAQ,MAAS,GAAJ7V,IAAW,GAAJT,IAAQkB,EAAEA,EAAEsV,UAAU,EAAE/V,GAAGS,EAAEsV,UAAU/V,EAAET,GAAGyW,QAAQ,KAAK,KAAKvV,EAAEsV,UAAUxW,EAAEkB,EAAEyC,SAAS,IAAI,IAAI5B,EAAEN,EAAEiV,KAAKxV,GAAG,IAAI0J,KAAKvK,EAAE,GAAGA,KAAKuK,EAAE9J,EAAET,IAAI0B,EAAE1B,IAAI,GAAG,OAAW,GAAJI,IAAW,GAAJT,IAAQ4K,EAAEsK,OAAO1M,EAAEoC,EAAEuL,KAAKvL,EAAEuL,KAAKK,UAAU,EAAE5L,EAAEuL,KAAKxS,OAAO,GAAG8S,QAAQ,KAAK,KAAK7L,EAAE+L,UAAU/L,EAAE+L,UAAUF,QAAQ,IAAI,IAAIA,QAAQ,IAAI,IAAIA,QAAQ,KAAK,KAAK7L,EAAEgM,SAAQ,GAAIhM,IAAI,SAAS1J,EAAEsH,EAAE/G,IAAG,SAAUX,GAAwlC,SAAST,IAAI,IAAIa,EAAE,IAAIA,EAAEsH,EAAEqO,QAAQ1S,MAAM,MAAM1C,IAAI,OAAOP,QAAG,IAAoBJ,GAAG,QAAQA,IAAII,EAAEJ,EAAEgW,IAAIrU,OAAOvB,GAAyDsH,EAAEtH,EAAEpB,QAAQ2B,EAAE,IAAKa,IAAvY,WAAa,MAAM,+BAAiBD,QAAjB,YAAAwS,EAAiBxS,WAASA,QAAQC,KAAKoH,SAAS9H,UAAUW,MAAMpC,KAAKkC,QAAQC,IAAID,QAAQqB,YAAiS8E,EAAEuO,WAArrB,SAAW7V,GAAG,IAAIO,EAAEgI,KAAKuN,UAAU,GAAG9V,EAAE,IAAIO,EAAE,KAAK,IAAIgI,KAAKwN,WAAWxV,EAAE,MAAM,KAAKP,EAAE,IAAIO,EAAE,MAAM,KAAK,IAAI+G,EAAE0O,SAASzN,KAAK0N,MAAM1V,EAAE,CAAC,IAAIX,EAAE,UAAU2I,KAAK2N,MAAMlW,EAAEmW,OAAO,EAAE,EAAEvW,EAAE,kBAAkB,IAAIL,EAAE,EAAET,EAAE,EAAEkB,EAAE,GAAGuV,QAAQ,cAAc,SAASvV,GAAG,OAAOA,GAAQ,OAAOA,IAAIlB,IAAfS,KAAuBS,EAAEmW,OAAOrX,EAAE,EAAEc,KAAga0H,EAAE8O,KAAvS,SAAWpW,GAAG,IAAI,MAAMA,EAAEsH,EAAEqO,QAAQU,WAAW,SAAS/O,EAAEqO,QAAQ1S,MAAMjD,EAAE,MAAMO,MAA8N+G,EAAEgP,KAAKnX,EAAEmI,EAAEwO,UAAzzC,WAAa,QAAQ,oBAAoB9Q,SAASA,OAAOuR,SAAS,aAAavR,OAAOuR,QAAQzL,OAAQ,oBAAoB0L,UAAUA,SAASC,iBAAiBD,SAASC,gBAAgBC,OAAOF,SAASC,gBAAgBC,MAAMC,kBAAkB,oBAAoB3R,QAAQA,OAAO7D,UAAU6D,OAAO7D,QAAQyV,SAAS5R,OAAO7D,QAAQ0V,WAAW7R,OAAO7D,QAAQ2V,QAAQ,oBAAoB7R,WAAWA,UAAUC,WAAWD,UAAUC,UAAU+G,cAAc9G,MAAM,mBAAmByM,SAASvH,OAAO0M,GAAG,KAAK,IAAI,oBAAoB9R,WAAWA,UAAUC,WAAWD,UAAUC,UAAU+G,cAAc9G,MAAM,uBAAyvBmC,EAAEqO,QAAQ,oBAAoBjP,aAAQ,IAAoBA,OAAOiP,QAAQjP,OAAOiP,QAAQqB,MAAvN,WAAa,IAAI,OAAOhS,OAAOiS,aAAa,MAAMjX,KAA2KY,GAAI0G,EAAE4P,QAAQ,gBAAgB,cAAc,YAAY,aAAa,aAAa,WAAW5P,EAAE6P,WAAWC,EAAE,SAASpX,GAAG,IAAI,OAAOqX,KAAKC,UAAUtX,GAAG,MAAMsH,GAAG,MAAM,+BAA+BA,EAAEiQ,UAAUjQ,EAAEkQ,OAAOrY,OAAOF,KAAKqI,EAAE/G,EAAE,KAAK,SAASP,EAAEsH,GAAG,SAAS/G,IAAI,MAAM,IAAIkX,MAAM,mCAAmC,SAAS7X,IAAI,MAAM,IAAI6X,MAAM,qCAAqC,SAASlY,EAAES,GAAG,GAAGsJ,IAAIoO,WAAW,OAAOA,WAAW1X,EAAE,GAAG,IAAIsJ,IAAI/I,IAAI+I,IAAIoO,WAAW,OAAOpO,EAAEoO,WAAWA,WAAW1X,EAAE,GAAG,IAAI,OAAOsJ,EAAEtJ,EAAE,GAAG,MAAMsH,GAAG,IAAI,OAAOgC,EAAErK,KAAK,KAAKe,EAAE,GAAG,MAAMsH,GAAG,OAAOgC,EAAErK,KAAKsJ,KAAKvI,EAAE,KAAqN,SAASa,IAAI8W,GAAG5Y,IAAI4Y,GAAE,EAAG5Y,EAAE0D,OAAOrD,EAAEL,EAAEuD,OAAOlD,GAAGF,GAAG,EAAEE,EAAEqD,QAAQiH,KAAK,SAASA,IAAI,IAAIiO,EAAE,CAAC,IAAI3X,EAAET,EAAEsB,GAAG8W,GAAE,EAAG,IAAI,IAAIrQ,EAAElI,EAAEqD,OAAO6E,GAAG,CAAC,IAAIvI,EAAEK,EAAEA,OAAOF,EAAEoI,GAAGvI,GAAGA,EAAEG,GAAG0Y,MAAM1Y,GAAG,EAAEoI,EAAElI,EAAEqD,OAAO1D,EAAE,KAAK4Y,GAAE,EAA1Y,SAAW3X,GAAG,GAAGiU,IAAI4D,aAAa,OAAOA,aAAa7X,GAAG,IAAIiU,IAAIrU,IAAIqU,IAAI4D,aAAa,OAAO5D,EAAE4D,aAAaA,aAAa7X,GAAG,IAAWiU,EAAEjU,GAAG,MAAMsH,GAAG,IAAI,OAAO2M,EAAEhV,KAAK,KAAKe,GAAG,MAAMsH,GAAG,OAAO2M,EAAEhV,KAAKsJ,KAAKvI,KAAkMlB,CAAEkB,IAAI,SAASb,EAAEa,EAAEsH,GAAGiB,KAAKuP,IAAI9X,EAAEuI,KAAKwP,MAAMzQ,EAAE,SAAS1G,KAAK,IAAI0I,EAAE2K,EAAEE,EAAEnU,EAAEpB,YAAY,WAAW,IAAI0K,EAAE,mBAAmBoO,WAAWA,WAAWnX,EAAE,MAAMP,GAAGsJ,EAAE/I,EAAE,IAAI0T,EAAE,mBAAmB4D,aAAaA,aAAajY,EAAE,MAAMI,GAAGiU,EAAErU,GAAzI,GAA+I,IAAIb,EAAEK,KAAKuY,GAAE,EAAGzY,GAAG,EAAEiV,EAAE6D,SAAS,SAAShY,GAAG,IAAIsH,EAAE,IAAI5E,MAAMF,UAAUC,OAAO,GAAG,GAAGD,UAAUC,OAAO,EAAE,IAAI,IAAIlC,EAAE,EAAEA,EAAEiC,UAAUC,OAAOlC,IAAI+G,EAAE/G,EAAE,GAAGiC,UAAUjC,GAAGnB,EAAEqK,KAAK,IAAItK,EAAEa,EAAEsH,IAAI,IAAIlI,EAAEqD,QAAQkV,GAAGpY,EAAEmK,IAAIvK,EAAEuB,UAAUkX,IAAI,WAAWrP,KAAKuP,IAAIzW,MAAM,KAAKkH,KAAKwP,QAAQ5D,EAAE8D,MAAM,UAAU9D,EAAEpP,SAAQ,EAAGoP,EAAEyB,OAAOzB,EAAE+D,QAAQ/D,EAAEgE,QAAQ,GAAGhE,EAAEiE,YAAYjE,EAAEkE,GAAGzX,EAAEuT,EAAEmE,YAAY1X,EAAEuT,EAAEoE,KAAK3X,EAAEuT,EAAEqE,IAAI5X,EAAEuT,EAAEsE,eAAe7X,EAAEuT,EAAEuE,mBAAmB9X,EAAEuT,EAAEwE,KAAK/X,EAAEuT,EAAEyE,gBAAgBhY,EAAEuT,EAAE0E,oBAAoBjY,EAAEuT,EAAE2E,UAAU,SAAS9Y,GAAG,UAAUmU,EAAE4E,QAAQ,SAAS/Y,GAAG,MAAM,IAAIyX,MAAM,qCAAqCtD,EAAE6E,IAAI,WAAW,MAAM,KAAK7E,EAAE8E,MAAM,SAASjZ,GAAG,MAAM,IAAIyX,MAAM,mCAAmCtD,EAAE+E,MAAM,WAAW,OAAO,IAAI,SAASlZ,EAAEsH,EAAE/G,GAAmH,SAAShB,EAAES,GAAG,SAASO,IAAI,GAAGA,EAAE4Y,QAAQ,CAAC,IAAInZ,EAAEO,EAAEX,GAAG,IAAIwZ,KAAK7Z,EAAEK,GAAGgB,GAAGhB,GAAGI,EAAEiW,KAAK1W,EAAES,EAAEqZ,KAAKzY,EAAEZ,EAAEsZ,KAAK1Z,EAAEgB,EAAEhB,EAAE,IAAI,IAAId,EAAE,IAAI4D,MAAMF,UAAUC,QAAQ5B,EAAE,EAAEA,EAAE/B,EAAE2D,OAAO5B,IAAI/B,EAAE+B,GAAG2B,UAAU3B,GAAG/B,EAAE,GAAGwI,EAAEiS,OAAOza,EAAE,IAAI,iBAAiBA,EAAE,IAAIA,EAAE0a,QAAQ,MAAM,IAAI9P,EAAE,EAAE5K,EAAE,GAAGA,EAAE,GAAGyW,QAAQ,gBAAgB,SAAShV,EAAEX,GAAG,GAAG,OAAOW,EAAE,OAAOA,EAAEmJ,IAAI,IAAInK,EAAE+H,EAAE6P,WAAWvX,GAAG,GAAG,mBAAmBL,EAAE,CAAC,IAAIsB,EAAE/B,EAAE4K,GAAGnJ,EAAEhB,EAAEN,KAAKe,EAAEa,GAAG/B,EAAEqX,OAAOzM,EAAE,GAAGA,IAAI,OAAOnJ,IAAI+G,EAAEuO,WAAW5W,KAAKe,EAAElB,IAASyB,EAAEa,KAAKkG,EAAElG,KAAKD,QAAQC,IAAId,KAAKa,UAAWE,MAAMrB,EAAElB,IAAI,OAAOyB,EAAEwV,UAAU/V,EAAEO,EAAE4Y,QAAQ7R,EAAE6R,QAAQnZ,GAAGO,EAAEuV,UAAUxO,EAAEwO,YAAYvV,EAAE2V,MAA9qB,SAAWlW,GAAG,IAAIO,EAAEX,EAAE,EAAE,IAAIW,KAAKP,EAAEJ,GAAGA,GAAG,GAAGA,EAAEI,EAAEyZ,WAAWlZ,GAAGX,GAAG,EAAE,OAAO0H,EAAE4P,OAAOvK,KAAK+M,IAAI9Z,GAAG0H,EAAE4P,OAAOzU,QAA4kB7C,CAAEI,GAAG,mBAAmBsH,EAAEqS,MAAMrS,EAAEqS,KAAKpZ,GAAGA,EAAynB,IAAIK,GAA3I0G,EAAEtH,EAAEpB,QAAQW,EAAE0D,MAAM1D,EAAC,QAAYA,GAAIga,OAAlG,SAAWvZ,GAAG,OAAOA,aAAayX,MAAMzX,EAAE4Z,OAAO5Z,EAAEuX,QAAQvX,GAAgDsH,EAAEuS,QAAtS,WAAavS,EAAEkQ,OAAO,KAA0RlQ,EAAEkQ,OAA5iB,SAAWxX,GAAGsH,EAAE8O,KAAKpW,GAAGsH,EAAE8B,SAAS9B,EAAEwS,SAAS,IAAI,IAAIvZ,GAAG,iBAAiBP,EAAEA,EAAE,IAAI+Z,MAAM,UAAUna,EAAEW,EAAEkC,OAAOlD,EAAE,EAAEA,EAAEK,EAAEL,IAAIgB,EAAEhB,KAAiC,OAA5BS,EAAEO,EAAEhB,GAAGgW,QAAQ,MAAM,QAAe,GAAGjO,EAAEwS,MAAMrQ,KAAK,IAAIY,OAAO,IAAIrK,EAAEga,OAAO,GAAG,MAAM1S,EAAE8B,MAAMK,KAAK,IAAIY,OAAO,IAAIrK,EAAE,QAAkUsH,EAAE6R,QAAnS,SAAWnZ,GAAG,IAAIO,EAAEX,EAAE,IAAIW,EAAE,EAAEX,EAAE0H,EAAEwS,MAAMrX,OAAOlC,EAAEX,EAAEW,IAAI,GAAG+G,EAAEwS,MAAMvZ,GAAG4U,KAAKnV,GAAG,OAAM,EAAG,IAAIO,EAAE,EAAEX,EAAE0H,EAAE8B,MAAM3G,OAAOlC,EAAEX,EAAEW,IAAI,GAAG+G,EAAE8B,MAAM7I,GAAG4U,KAAKnV,GAAG,OAAM,EAAG,OAAM,GAAiJsH,EAAE0O,SAASzV,EAAE,GAAG+G,EAAE8B,SAAS9B,EAAEwS,SAASxS,EAAE6P,eAAqB,SAASnX,EAAEsH,GAAmwB,SAAS/H,EAAES,GAAG,OAAOlB,EAAEkB,EAAEY,EAAE,QAAQ9B,EAAEkB,EAAEb,EAAE,SAASL,EAAEkB,EAAE0J,EAAE,WAAW5K,EAAEkB,EAAEa,EAAE,WAAWb,EAAE,MAAM,SAASlB,EAAEkB,EAAEsH,EAAE/G,GAAG,KAAKP,EAAEsH,GAAG,OAAOtH,EAAE,IAAIsH,EAAEqF,KAAKC,MAAM5M,EAAEsH,GAAG,IAAI/G,EAAEoM,KAAKsN,KAAKja,EAAEsH,GAAG,IAAI/G,EAAE,IAAI,IAAIM,EAAE,IAAI6I,EAAE,GAAG7I,EAAE1B,EAAE,GAAGuK,EAAE9I,EAAE,GAAGzB,EAAEmK,EAAE,OAAO1I,EAAEZ,EAAEpB,QAAQ,SAASoB,EAAEsH,GAAGA,EAAEA,MAAM,IAAIxI,EAAC6U,EAAQ3T,GAAE,GAAG,WAAWlB,GAAGkB,EAAEyC,OAAO,EAAE,OAA3iC,SAAWzC,GAAG,MAAGA,EAAEka,OAAOla,IAAOyC,OAAO,KAAK,CAAC,IAAI6E,EAAE,wHAAwHkO,KAAKxV,GAAG,GAAGsH,EAAE,CAAC,IAAI/G,EAAE4Z,WAAW7S,EAAE,IAAiC,QAA1BA,EAAE,IAAI,MAAM2E,eAAwB,IAAI,QAAQ,IAAI,OAAO,IAAI,MAAM,IAAI,KAAK,IAAI,IAAI,OAAO1L,EAAE+I,EAAE,IAAI,OAAO,IAAI,MAAM,IAAI,IAAI,OAAO/I,EAAEK,EAAE,IAAI,QAAQ,IAAI,OAAO,IAAI,MAAM,IAAI,KAAK,IAAI,IAAI,OAAOL,EAAEpB,EAAE,IAAI,UAAU,IAAI,SAAS,IAAI,OAAO,IAAI,MAAM,IAAI,IAAI,OAAOoB,EAAEmJ,EAAE,IAAI,UAAU,IAAI,SAAS,IAAI,OAAO,IAAI,MAAM,IAAI,IAAI,OAAOnJ,EAAEM,EAAE,IAAI,eAAe,IAAI,cAAc,IAAI,QAAQ,IAAI,OAAO,IAAI,KAAK,OAAON,EAAE,QAAQ,UAA4bA,CAAEP,GAAG,GAAG,WAAWlB,IAAc,IAAXsb,MAAMpa,GAAQ,OAAOsH,EAAC,KAAS/H,EAAES,GAAze,SAAWA,GAAG,OAAOA,GAAGY,EAAE+L,KAAK0N,MAAMra,EAAEY,GAAG,IAAIZ,GAAGb,EAAEwN,KAAK0N,MAAMra,EAAEb,GAAG,IAAIa,GAAG0J,EAAEiD,KAAK0N,MAAMra,EAAE0J,GAAG,IAAI1J,GAAGa,EAAE8L,KAAK0N,MAAMra,EAAEa,GAAG,IAAIb,EAAE,KAAiXJ,CAAEI,GAAG,MAAM,IAAIyX,MAAM,wDAAwDJ,KAAKC,UAAUtX,MAAM,SAASA,EAAEsH,EAAE/G,GAAG,SAASX,KAAK,SAASL,EAAES,GAAG,IAAIO,EAAE,GAAGP,EAAE8K,KAAK,OAAOxD,EAAEgT,eAAeta,EAAE8K,MAAMxD,EAAEiT,aAAava,EAAE8K,OAAOvK,GAAGP,EAAEwa,YAAY,KAAKxa,EAAEya,KAAK,MAAMza,EAAEya,MAAMla,GAAGP,EAAEya,IAAI,KAAK,MAAMza,EAAE6G,KAAKtG,GAAGP,EAAE6G,IAAI,MAAM7G,EAAE0a,OAAOna,GAAG8W,KAAKC,UAAUtX,EAAE0a,OAAOzG,EAAE,mBAAmBjU,EAAEO,GAAGA,EAA4H,SAASM,IAAI0H,KAAKoS,cAAc,KAAK,SAASjR,EAAE1J,GAAG,IAAIO,EAAE,EAAEX,GAAGkL,KAAK8P,OAAO5a,EAAEkV,OAAO,KAAK,GAAG,MAAM5N,EAAEuT,MAAMjb,EAAEkL,MAAM,OAAOxB,IAAI,GAAGhC,EAAEgT,eAAe1a,EAAEkL,MAAMxD,EAAEiT,aAAa3a,EAAEkL,KAAK,CAAC,IAAI,IAAIvL,EAAE,GAAG,MAAMS,EAAEkV,SAAS3U,KAAKhB,GAAGS,EAAEkV,OAAO3U,GAAGA,GAAGP,EAAEyC,UAAU,GAAGlD,GAAGqb,OAAOrb,IAAI,MAAMS,EAAEkV,OAAO3U,GAAG,MAAM,IAAIkX,MAAM,uBAAuB7X,EAAE4a,YAAYI,OAAOrb,GAAG,GAAG,MAAMS,EAAEkV,OAAO3U,EAAE,GAAG,IAAIX,EAAE6a,IAAI,KAAKla,GAAG,CAAmB,GAAG,OAAjBzB,EAAEkB,EAAEkV,OAAO3U,IAAc,MAAM,GAAGX,EAAE6a,KAAK3b,EAAEyB,IAAIP,EAAEyC,OAAO,WAAW7C,EAAE6a,IAAI,IAAI,IAAI5Z,EAAEb,EAAEkV,OAAO3U,EAAE,GAAG,GAAG,KAAKM,GAAG+Z,OAAO/Z,IAAIA,EAAE,CAAC,IAAIjB,EAAEiH,GAAG,KAAKtG,GAAG,CAAC,IAAIzB,EAAc,GAAG,OAAjBA,EAAEkB,EAAEkV,OAAO3U,KAAeqa,OAAO9b,IAAIA,EAAE,GAAGyB,EAAE,MAAM,GAAGX,EAAEiH,IAAI7G,EAAEkV,OAAO3U,GAAGA,IAAIP,EAAEyC,OAAO,MAAM7C,EAAEiH,GAAG+T,OAAOhb,EAAEiH,IAAI,OAAO7G,EAAEkV,SAAS3U,KAAKX,EAAgD,SAAWI,EAAEsH,GAAG,IAAItH,EAAE0a,KAAKrD,KAAKyD,MAAMxT,GAAG,MAAM/G,GAAG,OAAO+I,IAAI,OAAOtJ,EAAlHb,CAAES,EAAEI,EAAEga,OAAOzZ,KAAK0T,EAAE,mBAAmBjU,EAAEJ,GAAGA,EAAwE,SAASgB,EAAEZ,GAAGuI,KAAKwS,UAAU/a,EAAEuI,KAAKyS,WAAW,SAAS1R,IAAI,OAAOwB,KAAKxD,EAAE3F,MAAM+Y,KAAK,gBAAgB,IAAIzG,EAAE1T,EAAE,EAAFA,CAAK,oBAAoB4T,EAAE5T,EAAE,GAAGxB,EAAEwB,EAAE,GAAGnB,EAAEmB,EAAE,IAAIoX,EAAEpX,EAAE,IAAI+G,EAAEsN,SAAS,EAAEtN,EAAEuT,OAAO,UAAU,aAAa,QAAQ,MAAM,QAAQ,eAAe,cAAcvT,EAAE2T,QAAQ,EAAE3T,EAAE4T,WAAW,EAAE5T,EAAE6T,MAAM,EAAE7T,EAAE8T,IAAI,EAAE9T,EAAE3F,MAAM,EAAE2F,EAAEgT,aAAa,EAAEhT,EAAEiT,WAAW,EAAEjT,EAAE+T,QAAQzb,EAAE0H,EAAEgU,QAAQza,EAAEjB,EAAEc,UAAU6a,OAAO,SAASvb,EAAEO,IAAMP,EAAE8K,OAAOxD,EAAE6T,OAAOnb,EAAE8K,OAAOxD,EAAE8T,MAAMrc,EAAEiB,EAAE0a,QAAQ1a,EAAE8K,KAAK9K,EAAE8K,OAAOxD,EAAE6T,MAAM7T,EAAEgT,aAAahT,EAAEiT,YAAYtG,EAAE,qBAAqBjU,GAAGsH,EAAEgT,eAAeta,EAAE8K,MAAMxD,EAAEiT,aAAava,EAAE8K,MAAh8C,SAAW9K,EAAEsH,GAA0FlI,EAAEoc,YAAYxb,EAArG,SAAWA,GAAG,IAAIO,EAAEnB,EAAEqc,kBAAkBzb,GAAGJ,EAAEL,EAAEgB,EAAEmb,QAAQ5c,EAAEyB,EAAEya,QAAQlc,EAAE0a,QAAQ5Z,GAAG0H,EAAExI,KAAi2CA,CAAEkB,EAAEO,GAAmBA,GAALhB,EAAES,MAAYmU,EAAEtT,EAAEH,WAAWG,EAAEH,UAAUib,IAAI,SAAS3b,GAAG,IAAIO,EAAE,GAAG,iBAAiBP,EAAEO,EAAEmJ,EAAE1J,GAAGsH,EAAEgT,eAAe/Z,EAAEuK,MAAMxD,EAAEiT,aAAaha,EAAEuK,MAAMvC,KAAKoS,cAAc,IAAI/Z,EAAEL,GAAG,IAAIgI,KAAKoS,cAAcI,UAAUP,aAAajS,KAAKoQ,KAAK,UAAUpY,IAAIgI,KAAKoQ,KAAK,UAAUpY,OAAO,CAAC,IAAIoX,EAAE3X,KAAKA,EAAE4b,OAAO,MAAM,IAAInE,MAAM,iBAAiBzX,GAAG,IAAIuI,KAAKoS,cAAc,MAAM,IAAIlD,MAAM,qDAAoDlX,EAAEgI,KAAKoS,cAAckB,eAAe7b,MAAOuI,KAAKoS,cAAc,KAAKpS,KAAKoQ,KAAK,UAAUpY,MAAMM,EAAEH,UAAUob,QAAQ,WAAWvT,KAAKoS,eAAepS,KAAKoS,cAAcoB,0BAA0Bnb,EAAEF,UAAUmb,eAAe,SAAS7b,GAAG,GAAGuI,KAAKyS,QAAQvR,KAAKzJ,GAAGuI,KAAKyS,QAAQvY,SAAS8F,KAAKwS,UAAUP,YAAY,CAAC,IAAIlT,EAAElI,EAAE4c,kBAAkBzT,KAAKwS,UAAUxS,KAAKyS,SAAS,OAAOzS,KAAKwT,yBAAyBzU,EAAE,OAAO,MAAM1G,EAAEF,UAAUqb,uBAAuB,WAAWxT,KAAKwS,UAAU,KAAKxS,KAAKyS,aAAa,SAAShb,EAAEsH,EAAE/G,GAAG,SAASX,EAAEI,GAAG,GAAGA,EAAE,OAAY,SAAWA,GAAG,IAAI,IAAIsH,KAAK1H,EAAEc,UAAUV,EAAEsH,GAAG1H,EAAEc,UAAU4G,GAAG,OAAOtH,EAAvET,CAAES,GAAuEA,EAAEpB,QAAQgB,EAAEA,EAAEc,UAAU2X,GAAGzY,EAAEc,UAAUub,iBAAiB,SAASjc,EAAEsH,GAAG,OAAOiB,KAAK2T,WAAW3T,KAAK2T,gBAAgB3T,KAAK2T,WAAW,IAAIlc,GAAGuI,KAAK2T,WAAW,IAAIlc,QAAQyJ,KAAKnC,GAAGiB,MAAM3I,EAAEc,UAAU6X,KAAK,SAASvY,EAAEsH,GAAG,SAAS/G,IAAIgI,KAAKiQ,IAAIxY,EAAEO,GAAG+G,EAAEjG,MAAMkH,KAAK/F,WAAW,OAAOjC,EAAE4b,GAAG7U,EAAEiB,KAAK8P,GAAGrY,EAAEO,GAAGgI,MAAM3I,EAAEc,UAAU8X,IAAI5Y,EAAEc,UAAU+X,eAAe7Y,EAAEc,UAAUgY,mBAAmB9Y,EAAEc,UAAU0b,oBAAoB,SAASpc,EAAEsH,GAAG,GAAGiB,KAAK2T,WAAW3T,KAAK2T,eAAe,GAAG1Z,UAAUC,OAAO,OAAO8F,KAAK2T,cAAc3T,KAAK,IAAIhI,EAAEgI,KAAK2T,WAAW,IAAIlc,GAAG,IAAIO,EAAE,OAAOgI,KAAK,GAAG,GAAG/F,UAAUC,OAAO,cAAc8F,KAAK2T,WAAW,IAAIlc,GAAGuI,KAAK,IAAI,IAAI3I,EAAEL,EAAE,EAAEA,EAAEgB,EAAEkC,OAAOlD,IAAI,IAAGK,EAAEW,EAAEhB,MAAO+H,GAAG1H,EAAEuc,KAAK7U,EAAE,CAAC/G,EAAE4V,OAAO5W,EAAE,GAAG,MAAM,OAAOgJ,MAAM3I,EAAEc,UAAUiY,KAAK,SAAS3Y,GAAGuI,KAAK2T,WAAW3T,KAAK2T,eAAe,IAAI5U,KAAKmB,MAAMxJ,KAAKuD,UAAU,GAAGjC,EAAEgI,KAAK2T,WAAW,IAAIlc,GAAG,GAAGO,EAAgB,IAAI,IAAIX,EAAE,EAAEL,GAAzBgB,EAAEA,EAAEkI,MAAM,IAAmBhG,OAAO7C,EAAEL,IAAIK,EAAEW,EAAEX,GAAGyB,MAAMkH,KAAKjB,GAAG,OAAOiB,MAAM3I,EAAEc,UAAUoY,UAAU,SAAS9Y,GAAG,OAAOuI,KAAK2T,WAAW3T,KAAK2T,eAAe3T,KAAK2T,WAAW,IAAIlc,QAAQJ,EAAEc,UAAU2b,aAAa,SAASrc,GAAG,QAAQuI,KAAKuQ,UAAU9Y,GAAGyC,SAAS,SAASzC,EAAEsH,EAAE/G,IAAG,SAAU+G,GAAge,IAAI/H,EAAEgB,EAAE,IAAIzB,EAAEU,OAAOkB,UAAUmH,SAAShH,EAAE,mBAAmByG,EAAEgV,MAAM,6BAA6Bxd,EAAEG,KAAKqI,EAAEgV,MAAM5S,EAAE,mBAAmBpC,EAAEiV,MAAM,6BAA6Bzd,EAAEG,KAAKqI,EAAEiV,MAAMvc,EAAEpB,QAAzpB,SAASgB,EAAEI,GAAG,IAAIA,GAAG,UAAA2T,EAAiB3T,GAAE,OAAM,EAAG,GAAGT,EAAES,GAAG,CAAC,IAAI,IAAIO,EAAE,EAAEzB,EAAEkB,EAAEyC,OAAOlC,EAAEzB,EAAEyB,IAAI,GAAGX,EAAEI,EAAEO,IAAI,OAAM,EAAG,OAAM,EAAG,GAAG,mBAAmB+G,EAAEkV,QAAQlV,EAAEkV,OAAOC,UAAUnV,EAAEkV,OAAOC,SAASzc,IAAI,mBAAmBsH,EAAEoV,aAAa1c,aAAa0c,aAAa7b,GAAGb,aAAasc,MAAM5S,GAAG1J,aAAauc,KAAK,OAAM,EAAG,GAAGvc,EAAE2c,QAAQ,mBAAmB3c,EAAE2c,QAAQ,IAAIna,UAAUC,OAAO,OAAO7C,EAAEI,EAAE2c,UAAS,GAAI,IAAI,IAAIxd,KAAKa,EAAE,GAAGR,OAAOkB,UAAUC,eAAe1B,KAAKe,EAAEb,IAAIS,EAAEI,EAAEb,IAAI,OAAM,EAAG,OAAM,KAA2MF,KAAKqI,EAAE,WAAW,OAAOiB,KAAlB,KAA4B,SAASvI,EAAEsH,GAAG,IAAI/G,KAAKsH,SAAS7H,EAAEpB,QAAQ8D,MAAMka,SAAS,SAAS5c,GAAG,MAAM,kBAAkBO,EAAEtB,KAAKe,KAAK,SAASA,EAAEsH,EAAE/G,IAAG,SAAUP,GAAmd,IAAIlB,EAAEyB,EAAE,IAAIM,EAAEN,EAAE,IAAImJ,EAAElK,OAAOkB,UAAUmH,SAAS1I,EAAE,mBAAmBa,EAAEsc,MAAM,6BAA6B5S,EAAEzK,KAAKe,EAAEsc,MAAM1b,EAAE,mBAAmBZ,EAAEuc,MAAM,6BAA6B7S,EAAEzK,KAAKe,EAAEuc,MAAMjV,EAAEmU,kBAAkB,SAASzb,GAAG,IAAIsH,KAAK/G,EAAEP,EAAE0a,KAAKnb,EAAES,EAAE,OAAOT,EAAEmb,KAAjtB,SAAS9a,EAAEI,EAAEsH,GAAG,IAAItH,EAAE,OAAOA,EAAE,GAAGa,EAAEb,GAAG,CAAC,IAAIO,GAAGsc,cAAa,EAAGC,IAAIxV,EAAE7E,QAAQ,OAAO6E,EAAEmC,KAAKzJ,GAAGO,EAAE,GAAGzB,EAAEkB,GAAG,CAAC,IAAI,IAAIT,EAAE,IAAImD,MAAM1C,EAAEyC,QAAQiH,EAAE,EAAEA,EAAE1J,EAAEyC,OAAOiH,IAAInK,EAAEmK,GAAG9J,EAAEI,EAAE0J,GAAGpC,GAAG,OAAO/H,EAAE,GAAG,UAAAoU,EAAiB3T,MAAKA,aAAaoZ,MAAM,CAAU,IAAI,IAAIja,KAAbI,KAAkBS,EAAET,EAAEJ,GAAGS,EAAEI,EAAEb,GAAGmI,GAAG,OAAO/H,EAAE,OAAOS,EAAgcJ,CAAEW,EAAE+G,GAAG/H,EAAEib,YAAYlT,EAAE7E,QAAQiZ,OAAOnc,EAAEyb,QAAQ1T,IAAIA,EAAE0U,kBAAkB,SAAShc,EAAEsH,GAAG,OAAOtH,EAAE0a,KAA7hB,SAASnb,EAAES,EAAEsH,GAAG,IAAItH,EAAE,OAAOA,EAAE,GAAGA,GAAGA,EAAE6c,aAAa,OAAOvV,EAAEtH,EAAE8c,KAAK,GAAGhe,EAAEkB,GAAG,IAAI,IAAIO,EAAE,EAAEA,EAAEP,EAAEyC,OAAOlC,IAAIP,EAAEO,GAAGhB,EAAES,EAAEO,GAAG+G,QAAQ,GAAG,UAAAqM,EAAiB3T,GAAE,IAAI,IAAIJ,KAAKI,EAAEA,EAAEJ,GAAGL,EAAES,EAAEJ,GAAG0H,GAAG,OAAOtH,EAA4WT,CAAES,EAAE0a,KAAKpT,GAAGtH,EAAEwa,iBAAY,EAAOxa,GAAGsH,EAAEkU,YAAY,SAASxb,EAAEsH,GAAoT,IAAI1H,EAAE,EAAEL,EAAES,GAA3T,SAASO,EAAEP,EAAE0J,EAAEJ,GAAG,IAAItJ,EAAE,OAAOA,EAAE,GAAGb,GAAGa,aAAasc,MAAM1b,GAAGZ,aAAauc,KAAK,CAAC3c,IAAI,IAAIqU,EAAE,IAAI8I,WAAW9I,EAAE+I,OAAO,WAAW1T,EAAEA,EAAEI,GAAGnB,KAAKwH,OAAOxQ,EAAEgJ,KAAKwH,SAASnQ,GAAG0H,EAAE/H,IAAI0U,EAAEgJ,kBAAkBjd,QAAQ,GAAGlB,EAAEkB,GAAG,IAAI,IAAImU,EAAE,EAAEA,EAAEnU,EAAEyC,OAAO0R,IAAI5T,EAAEP,EAAEmU,GAAGA,EAAEnU,QAAQ,GAAG,UAAA2T,EAAiB3T,KAAIa,EAAEb,GAAG,IAAI,IAAIjB,KAAKiB,EAAEO,EAAEP,EAAEjB,GAAGA,EAAEiB,IAAeO,CAAEhB,GAAGK,GAAG0H,EAAE/H,MAAMN,KAAKqI,EAAE,WAAW,OAAOiB,KAAlB,KAA4B,SAASvI,EAAEsH,IAAG,SAAUA,GAAgGtH,EAAEpB,QAA/F,SAAWoB,GAAG,OAAOsH,EAAEkV,QAAQlV,EAAEkV,OAAOC,SAASzc,IAAIsH,EAAEoV,aAAa1c,aAAa0c,eAA0Bzd,KAAKqI,EAAE,WAAW,OAAOiB,KAAlB,KAA4B,SAASvI,EAAEsH,EAAE/G,GAAG,aAAa,SAASX,EAAEI,EAAEsH,GAAG,KAAKiB,gBAAgB3I,GAAG,OAAO,IAAIA,EAAEI,EAAEsH,GAAGtH,GAAG,iBAAY,IAAoBA,EAAE,YAAYT,EAAES,MAAMsH,EAAEtH,EAAEA,OAAE,IAAQsH,EAAEA,OAAQ4M,KAAK5M,EAAE4M,MAAM,aAAa3L,KAAK6L,QAAQ7L,KAAK2U,QAAQ3U,KAAKkF,KAAKnG,EAAEiB,KAAK4U,cAA8B,IAAjB7V,EAAE6V,cAAmB5U,KAAK6U,qBAAqB9V,EAAE8V,sBAAsB,KAAK7U,KAAK8U,kBAAkB/V,EAAE+V,mBAAmB,KAAK9U,KAAK+U,qBAAqBhW,EAAEgW,sBAAsB,KAAK/U,KAAKgV,oBAAoBjW,EAAEiW,qBAAqB,IAAIhV,KAAKiV,QAAQ,IAAIze,GAAG0e,IAAIlV,KAAK8U,oBAAoBK,IAAInV,KAAK+U,uBAAuBK,OAAOpV,KAAKgV,wBAAwBhV,KAAKqV,QAAQ,MAAMtW,EAAEsW,QAAQ,IAAItW,EAAEsW,SAASrV,KAAKsV,WAAW,SAAStV,KAAKuV,IAAI9d,EAAEuI,KAAKwV,cAAcxV,KAAKyV,SAAS,KAAKzV,KAAK6C,UAAS,EAAG7C,KAAK0V,gBAAgB,IAAI1d,EAAE+G,EAAE4W,QAAQ/e,EAAEoJ,KAAK4V,QAAQ,IAAI5d,EAAE8a,QAAQ9S,KAAK6V,QAAQ,IAAI7d,EAAE+a,QAAQ/S,KAAK8V,aAA4B,IAAhB/W,EAAE+W,YAAiB9V,KAAK8V,aAAa9V,KAAK+V,OAAO,IAAI/e,EAAE,mBAAmBM,QAAQ,UAAA8T,EAAiB9T,OAAO4U,UAAS,SAASzU,GAAG,OAAA2T,EAAc3T,IAAG,SAASA,GAAG,OAAOA,GAAG,mBAAmBH,QAAQG,EAAE0U,cAAc7U,QAAQG,IAAIH,OAAOa,UAAU,SAA3EiT,EAA2F3T,IAAGlB,EAAEyB,EAAE,IAAIM,EAAEN,EAAE,IAAImJ,EAAEnJ,EAAE,GAAGpB,EAAEoB,EAAE,GAAGK,EAAEL,EAAE,IAAI+I,EAAE/I,EAAE,IAAI0T,EAAE1T,EAAE,EAAFA,CAAK,4BAA4B4T,EAAE5T,EAAE,IAAIxB,EAAEwB,EAAE,IAAInB,EAAEI,OAAOkB,UAAUC,eAAeX,EAAEpB,QAAQgB,EAAEA,EAAEc,UAAU6d,QAAQ,WAA2C,IAAI,IAAIve,KAAxCuI,KAAKoQ,KAAKtX,MAAMkH,KAAK/F,WAAwB+F,KAAK6L,KAAKhV,EAAEH,KAAKsJ,KAAK6L,KAAKpU,IAAIuI,KAAK6L,KAAKpU,GAAG2Y,KAAKtX,MAAMkH,KAAK6L,KAAKpU,GAAGwC,YAAY5C,EAAEc,UAAU8d,gBAAgB,WAAW,IAAI,IAAIxe,KAAKuI,KAAK6L,KAAKhV,EAAEH,KAAKsJ,KAAK6L,KAAKpU,KAAKuI,KAAK6L,KAAKpU,GAAG6G,GAAG0B,KAAKkW,WAAWze,KAAKJ,EAAEc,UAAU+d,WAAW,SAASze,GAAG,OAAO,MAAMA,EAAE,GAAGA,EAAE,KAAKuI,KAAKmW,OAAO7X,IAAI6C,EAAE9J,EAAEc,WAAWd,EAAEc,UAAUyc,aAAa,SAASnd,GAAG,OAAOwC,UAAUC,QAAQ8F,KAAKoW,gBAAgB3e,EAAEuI,MAAMA,KAAKoW,eAAe/e,EAAEc,UAAU0c,qBAAqB,SAASpd,GAAG,OAAOwC,UAAUC,QAAQ8F,KAAKqW,sBAAsB5e,EAAEuI,MAAMA,KAAKqW,uBAAuBhf,EAAEc,UAAU2c,kBAAkB,SAASrd,GAAG,OAAOwC,UAAUC,QAAQ8F,KAAKsW,mBAAmB7e,EAAEuI,KAAKiV,SAASjV,KAAKiV,QAAQsB,OAAO9e,GAAGuI,MAAMA,KAAKsW,oBAAoBjf,EAAEc,UAAU6c,oBAAoB,SAASvd,GAAG,OAAOwC,UAAUC,QAAQ8F,KAAKwW,qBAAqB/e,EAAEuI,KAAKiV,SAASjV,KAAKiV,QAAQwB,UAAUhf,GAAGuI,MAAMA,KAAKwW,sBAAsBnf,EAAEc,UAAU4c,qBAAqB,SAAStd,GAAG,OAAOwC,UAAUC,QAAQ8F,KAAK0W,sBAAsBjf,EAAEuI,KAAKiV,SAASjV,KAAKiV,QAAQ0B,OAAOlf,GAAGuI,MAAMA,KAAK0W,uBAAuBrf,EAAEc,UAAUkd,QAAQ,SAAS5d,GAAG,OAAOwC,UAAUC,QAAQ8F,KAAK4W,SAASnf,EAAEuI,MAAMA,KAAK4W,UAAUvf,EAAEc,UAAU0e,qBAAqB,YAAY7W,KAAK8W,cAAc9W,KAAKoW,eAAe,IAAIpW,KAAKiV,QAAQ8B,UAAU/W,KAAKgX,aAAa3f,EAAEc,UAAU4d,KAAK1e,EAAEc,UAAUmU,QAAQ,SAAS7U,EAAEsH,GAAG,GAAG2M,EAAE,gBAAgB1L,KAAKsV,aAAatV,KAAKsV,WAAWzI,QAAQ,QAAQ,OAAO7M,KAAK0L,EAAE,aAAa1L,KAAKuV,KAAKvV,KAAKmW,OAAO5f,EAAEyJ,KAAKuV,IAAIvV,KAAKkF,MAAM,IAAIlN,EAAEgI,KAAKmW,OAAO9e,EAAE2I,KAAKA,KAAKsV,WAAW,UAAUtV,KAAKiX,eAAc,EAAG,IAAIjgB,EAAEqB,EAAEL,EAAE,OAAO,WAAWX,EAAE6f,SAASzf,GAAGA,MAAMa,EAAED,EAAEL,EAAE,QAAQ,SAAS+G,GAAG,GAAG2M,EAAE,iBAAiBrU,EAAE8f,UAAU9f,EAAEie,WAAW,SAASje,EAAE2e,QAAQ,gBAAgBjX,GAAGtH,EAAE,CAAC,IAAIO,EAAE,IAAIkX,MAAM,oBAAoBlX,EAAEma,KAAKpT,EAAEtH,EAAEO,QAAQX,EAAEwf,yBAAyB,IAAG,IAAK7W,KAAK4W,SAAS,CAAC,IAAIzV,EAAEnB,KAAK4W,SAASlL,EAAE,wCAAwCvK,GAAG,IAAIvK,EAAEuY,WAAW,WAAWzD,EAAE,qCAAqCvK,GAAGnK,EAAEuc,UAAUvb,EAAEof,QAAQpf,EAAEoY,KAAK,QAAQ,WAAW/Y,EAAE2e,QAAQ,kBAAkB7U,IAAIA,GAAGnB,KAAK2U,KAAKzT,MAAMqS,QAAQ,WAAWjE,aAAa1Y,MAAM,OAAOoJ,KAAK2U,KAAKzT,KAAKlK,GAAGgJ,KAAK2U,KAAKzT,KAAK5I,GAAG0H,MAAM3I,EAAEc,UAAU+e,OAAO,WAAWxL,EAAE,QAAQ1L,KAAKmX,UAAUnX,KAAKsV,WAAW,OAAOtV,KAAKoQ,KAAK,QAAQ,IAAI3Y,EAAEuI,KAAKmW,OAAOnW,KAAK2U,KAAKzT,KAAK7I,EAAEZ,EAAE,OAAOsJ,EAAEf,KAAK,YAAYA,KAAK2U,KAAKzT,KAAK7I,EAAEZ,EAAE,OAAOsJ,EAAEf,KAAK,YAAYA,KAAK2U,KAAKzT,KAAK7I,EAAEZ,EAAE,OAAOsJ,EAAEf,KAAK,YAAYA,KAAK2U,KAAKzT,KAAK7I,EAAEZ,EAAE,QAAQsJ,EAAEf,KAAK,aAAaA,KAAK2U,KAAKzT,KAAK7I,EAAEZ,EAAE,QAAQsJ,EAAEf,KAAK,aAAaA,KAAK2U,KAAKzT,KAAK7I,EAAE2H,KAAK6V,QAAQ,UAAU9U,EAAEf,KAAK,gBAAgB3I,EAAEc,UAAUkf,OAAO,WAAWrX,KAAKyV,SAAS,IAAI5E,KAAK7Q,KAAKgW,QAAQ,SAAS3e,EAAEc,UAAUmf,OAAO,WAAWtX,KAAKgW,QAAQ,OAAO,IAAInF,KAAK7Q,KAAKyV,WAAWpe,EAAEc,UAAUof,OAAO,SAAS9f,GAAGuI,KAAK6V,QAAQzC,IAAI3b,IAAIJ,EAAEc,UAAUqf,UAAU,SAAS/f,GAAGuI,KAAKoQ,KAAK,SAAS3Y,IAAIJ,EAAEc,UAAUsf,QAAQ,SAAShgB,GAAGiU,EAAE,QAAQjU,GAAGuI,KAAKgW,QAAQ,QAAQve,IAAIJ,EAAEc,UAAU8T,OAAO,SAASxU,EAAEsH,GAAG,SAAS/G,KAAK4T,EAAE5U,EAAEwe,WAAWne,IAAIL,EAAEwe,WAAWtU,KAAK7J,GAAG,IAAIA,EAAE2I,KAAK6L,KAAKpU,GAAG,IAAIJ,EAAE,CAACA,EAAE,IAAIiB,EAAE0H,KAAKvI,EAAEsH,GAAGiB,KAAK6L,KAAKpU,GAAGJ,EAAE,IAAIL,EAAEgJ,KAAK3I,EAAEyY,GAAG,aAAa9X,GAAGX,EAAEyY,GAAG,UAAU,WAAWzY,EAAEiH,GAAGtH,EAAEkf,WAAWze,KAAKuI,KAAK8V,aAAa9d,IAAI,OAAOX,GAAGA,EAAEc,UAAUob,QAAQ,SAAS9b,GAAG,IAAIsH,EAAE6M,EAAE5L,KAAKwV,WAAW/d,IAAIsH,GAAGiB,KAAKwV,WAAW5H,OAAO7O,EAAE,GAAGiB,KAAKwV,WAAWtb,QAAQ8F,KAAKoX,SAAS/f,EAAEc,UAAUgb,OAAO,SAAS1b,GAAGiU,EAAE,oBAAoBjU,GAAG,IAAIsH,EAAEiB,KAAKvI,EAAEuU,OAAO,IAAIvU,EAAE8K,OAAO9K,EAAEya,KAAK,IAAIza,EAAEuU,OAAOjN,EAAE8D,SAAS9D,EAAE2W,aAAaxU,KAAKzJ,IAAIsH,EAAE8D,UAAS,EAAG7C,KAAK4V,QAAQ5C,OAAOvb,EAAE,SAASO,GAAG,IAAI,IAAIX,EAAE,EAAEA,EAAEW,EAAEkC,OAAO7C,IAAI0H,EAAEoX,OAAOuB,MAAM1f,EAAEX,GAAGI,EAAEkgB,SAAS5Y,EAAE8D,UAAS,EAAG9D,EAAE6Y,yBAAyBvgB,EAAEc,UAAUyf,mBAAmB,WAAW,GAAG5X,KAAK0V,aAAaxb,OAAO,IAAI8F,KAAK6C,SAAS,CAAC,IAAIpL,EAAEuI,KAAK0V,aAAamC,QAAQ7X,KAAKmT,OAAO1b,KAAKJ,EAAEc,UAAUgf,QAAQ,WAAWzL,EAAE,WAAW,IAAI,IAAIjU,EAAEuI,KAAK2U,KAAKza,OAAO6E,EAAE,EAAEA,EAAEtH,EAAEsH,IAAI,CAAOiB,KAAK2U,KAAKkD,QAAUtE,UAAUvT,KAAK0V,gBAAgB1V,KAAK6C,UAAS,EAAG7C,KAAKyV,SAAS,KAAKzV,KAAK6V,QAAQtC,WAAWlc,EAAEc,UAAUif,MAAM/f,EAAEc,UAAU2f,WAAW,WAAWpM,EAAE,cAAc1L,KAAKiX,eAAc,EAAGjX,KAAK8W,cAAa,EAAG,YAAY9W,KAAKsV,YAAYtV,KAAKmX,UAAUnX,KAAKiV,QAAQ8C,QAAQ/X,KAAKsV,WAAW,SAAStV,KAAKmW,QAAQnW,KAAKmW,OAAOiB,SAAS/f,EAAEc,UAAU6f,QAAQ,SAASvgB,GAAGiU,EAAE,WAAW1L,KAAKmX,UAAUnX,KAAKiV,QAAQ8C,QAAQ/X,KAAKsV,WAAW,SAAStV,KAAKoQ,KAAK,QAAQ3Y,GAAGuI,KAAKoW,gBAAgBpW,KAAKiX,eAAejX,KAAKgX,aAAa3f,EAAEc,UAAU6e,UAAU,WAAW,GAAGhX,KAAK8W,cAAc9W,KAAKiX,cAAc,OAAOjX,KAAK,IAAIvI,EAAEuI,KAAK,GAAGA,KAAKiV,QAAQ8B,UAAU/W,KAAKqW,sBAAsB3K,EAAE,oBAAoB1L,KAAKiV,QAAQ8C,QAAQ/X,KAAKgW,QAAQ,oBAAoBhW,KAAK8W,cAAa,MAAO,CAAC,IAAI/X,EAAEiB,KAAKiV,QAAQgD,WAAWvM,EAAE,0CAA0C3M,GAAGiB,KAAK8W,cAAa,EAAG,IAAI9e,EAAEmX,WAAW,WAAW1X,EAAEwf,gBAAgBvL,EAAE,wBAAwBjU,EAAEue,QAAQ,oBAAoBve,EAAEwd,QAAQ8B,UAAUtf,EAAEue,QAAQ,eAAeve,EAAEwd,QAAQ8B,UAAUtf,EAAEwf,eAAexf,EAAEse,KAAK,SAAShX,GAAGA,GAAG2M,EAAE,2BAA2BjU,EAAEqf,cAAa,EAAGrf,EAAEuf,YAAYvf,EAAEue,QAAQ,kBAAkBjX,EAAEoT,QAAQzG,EAAE,qBAAqBjU,EAAEygB,mBAAmBnZ,GAAGiB,KAAK2U,KAAKzT,MAAMqS,QAAQ,WAAWjE,aAAatX,QAAQX,EAAEc,UAAU+f,YAAY,WAAW,IAAIzgB,EAAEuI,KAAKiV,QAAQ8B,SAAS/W,KAAK8W,cAAa,EAAG9W,KAAKiV,QAAQ8C,QAAQ/X,KAAKiW,kBAAkBjW,KAAKgW,QAAQ,YAAYve,KAAK,SAASA,EAAEsH,EAAE/G,GAAGP,EAAEpB,QAAQ2B,EAAE,KAAK,SAASP,EAAEsH,EAAE/G,GAAGP,EAAEpB,QAAQ2B,EAAE,IAAIP,EAAEpB,QAAQsf,OAAO3d,EAAE,KAAK,SAASP,EAAEsH,EAAE/G,IAAG,SAAU+G,GAAG,SAAS1H,EAAEI,EAAEO,GAAG,KAAKgI,gBAAgB3I,GAAG,OAAO,IAAIA,EAAEI,EAAEO,GAAGA,EAAEA,MAAMP,GAAG,UAAA2T,EAAiB3T,KAAIO,EAAEP,EAAEA,EAAE,MAAMA,GAAGA,EAAEsJ,EAAEtJ,GAAGO,EAAEmgB,SAAS1gB,EAAEiV,KAAK1U,EAAEogB,OAAO,UAAU3gB,EAAE4U,UAAU,QAAQ5U,EAAE4U,SAASrU,EAAEsK,KAAK7K,EAAE6K,KAAK7K,EAAEuU,QAAQhU,EAAEgU,MAAMvU,EAAEuU,QAAQhU,EAAE0U,OAAO1U,EAAEmgB,SAASpX,EAAE/I,EAAE0U,MAAMA,MAAM1M,KAAKoY,OAAO,MAAMpgB,EAAEogB,OAAOpgB,EAAEogB,OAAOrZ,EAAE0N,UAAU,WAAWA,SAASJ,SAASrU,EAAEmgB,WAAWngB,EAAEsK,OAAOtK,EAAEsK,KAAKtC,KAAKoY,OAAO,MAAM,MAAMpY,KAAKqY,MAAMrgB,EAAEqgB,QAAO,EAAGrY,KAAKmY,SAASngB,EAAEmgB,WAAWpZ,EAAE0N,SAASA,SAAS0L,SAAS,aAAanY,KAAKsC,KAAKtK,EAAEsK,OAAOvD,EAAE0N,UAAUA,SAASnK,KAAKmK,SAASnK,KAAKtC,KAAKoY,OAAO,IAAI,IAAIpY,KAAKgM,MAAMhU,EAAEgU,UAAU,iBAAiBhM,KAAKgM,QAAQhM,KAAKgM,MAAMJ,EAAE0M,OAAOtY,KAAKgM,QAAQhM,KAAKuY,SAAQ,IAAKvgB,EAAEugB,QAAQvY,KAAK2L,MAAM3T,EAAE2T,MAAM,cAAcqB,QAAQ,MAAM,IAAI,IAAIhN,KAAKwY,aAAaxgB,EAAEwgB,WAAWxY,KAAKyY,OAAM,IAAKzgB,EAAEygB,MAAMzY,KAAK0Y,cAAc1gB,EAAE0gB,YAAY1Y,KAAK2Y,aAAa3gB,EAAE2gB,WAAW3Y,KAAK4Y,eAAe5gB,EAAE4gB,gBAAgB,IAAI5Y,KAAK6Y,kBAAkB7gB,EAAE6gB,kBAAkB7Y,KAAK8Y,WAAW9gB,EAAE8gB,aAAa,UAAU,aAAa9Y,KAAK+Y,iBAAiB/gB,EAAE+gB,qBAAqB/Y,KAAKsV,WAAW,GAAGtV,KAAKgZ,eAAehZ,KAAKiZ,cAAc,EAAEjZ,KAAKkZ,WAAWlhB,EAAEkhB,YAAY,IAAIlZ,KAAKmZ,gBAAgBnhB,EAAEmhB,kBAAiB,EAAGnZ,KAAKoZ,WAAW,KAAKpZ,KAAKqZ,mBAAmBrhB,EAAEqhB,mBAAmBrZ,KAAKsZ,mBAAkB,IAAKthB,EAAEshB,oBAAoBthB,EAAEshB,wBAAuB,IAAKtZ,KAAKsZ,oBAAoBtZ,KAAKsZ,sBAAsBtZ,KAAKsZ,mBAAmB,MAAMtZ,KAAKsZ,kBAAkBC,YAAYvZ,KAAKsZ,kBAAkBC,UAAU,MAAMvZ,KAAKwZ,IAAIxhB,EAAEwhB,KAAK,KAAKxZ,KAAKlI,IAAIE,EAAEF,KAAK,KAAKkI,KAAKyZ,WAAWzhB,EAAEyhB,YAAY,KAAKzZ,KAAK0Z,KAAK1hB,EAAE0hB,MAAM,KAAK1Z,KAAK2Z,GAAG3hB,EAAE2hB,IAAI,KAAK3Z,KAAK4Z,QAAQ5hB,EAAE4hB,SAAS,KAAK5Z,KAAK6Z,wBAAmB,IAAS7hB,EAAE6hB,oBAAoB7hB,EAAE6hB,mBAAmB7Z,KAAK8Z,YAAY9hB,EAAE8hB,UAAU,IAAI9iB,EAAE,UAAAoU,EAAiBrM,IAAGA,EAAE/H,EAAE+iB,SAAS/iB,IAAIgB,EAAEgiB,cAAc/iB,OAAO+K,KAAKhK,EAAEgiB,cAAc9f,OAAO,IAAI8F,KAAKga,aAAahiB,EAAEgiB,cAAchiB,EAAEiiB,eAAeja,KAAKia,aAAajiB,EAAEiiB,eAAeja,KAAK1B,GAAG,KAAK0B,KAAKka,SAAS,KAAKla,KAAKma,aAAa,KAAKna,KAAKoa,YAAY,KAAKpa,KAAKqa,kBAAkB,KAAKra,KAAKsa,iBAAiB,KAAKta,KAAK+V,OAAuF,IAAIxf,EAAEyB,EAAE,IAAIM,EAAEN,EAAE,GAAGmJ,EAAEnJ,EAAE,EAAFA,CAAK,2BAA2BpB,EAAEoB,EAAE,IAAIK,EAAEL,EAAE,IAAI+I,EAAE/I,EAAE,GAAG0T,EAAE1T,EAAE,IAAI4T,EAAE5T,EAAE,IAAIP,EAAEpB,QAAQgB,EAAEA,EAAEkjB,uBAAsB,EAAGjiB,EAAEjB,EAAEc,WAAWd,EAAEgV,SAAShU,EAAEgU,SAAShV,EAAEmV,OAAOnV,EAAEA,EAAEmjB,UAAUxiB,EAAE,IAAIX,EAAEyhB,WAAW9gB,EAAE,IAAIX,EAAEse,OAAO3d,EAAE,IAAIX,EAAEc,UAAUsiB,gBAAgB,SAAShjB,GAAG0J,EAAE,0BAA0B1J,GAAG,IAAIsH,EAAlY,SAAWtH,GAAG,IAAIsH,KAAK,IAAI,IAAI/G,KAAKP,EAAEA,EAAEW,eAAeJ,KAAK+G,EAAE/G,GAAGP,EAAEO,IAAI,OAAO+G,EAAsT/H,CAAEgJ,KAAKgM,OAAOjN,EAAE2b,IAAIriB,EAAEgU,SAAStN,EAAEqD,UAAU3K,EAAE,IAAIO,EAAEgI,KAAK+Y,iBAAiBthB,OAAi/B,OAA1+BuI,KAAK1B,KAAKS,EAAE4b,IAAI3a,KAAK1B,IAAU,IAAI/H,EAAEkB,IAAIuU,MAAMjN,EAAEkN,OAAOjM,KAAKqY,MAAMrgB,EAAEqgB,OAAOrY,KAAKqY,MAAMF,SAASngB,EAAEmgB,UAAUnY,KAAKmY,SAAS7V,KAAKtK,EAAEsK,MAAMtC,KAAKsC,KAAK8V,OAAOpgB,EAAEogB,QAAQpY,KAAKoY,OAAOzM,KAAK3T,EAAE2T,MAAM3L,KAAK2L,KAAK6M,WAAWxgB,EAAEwgB,YAAYxY,KAAKwY,WAAWC,MAAMzgB,EAAEygB,OAAOzY,KAAKyY,MAAMC,YAAY1gB,EAAE0gB,aAAa1Y,KAAK0Y,YAAYC,WAAW3gB,EAAE2gB,YAAY3Y,KAAK2Y,WAAWE,kBAAkB7gB,EAAE6gB,mBAAmB7Y,KAAK6Y,kBAAkBD,eAAe5gB,EAAE4gB,gBAAgB5Y,KAAK4Y,eAAeM,WAAWlhB,EAAEkhB,YAAYlZ,KAAKkZ,WAAWM,IAAIxhB,EAAEwhB,KAAKxZ,KAAKwZ,IAAI1hB,IAAIE,EAAEF,KAAKkI,KAAKlI,IAAI2hB,WAAWzhB,EAAEyhB,YAAYzZ,KAAKyZ,WAAWC,KAAK1hB,EAAE0hB,MAAM1Z,KAAK0Z,KAAKC,GAAG3hB,EAAE2hB,IAAI3Z,KAAK2Z,GAAGC,QAAQ5hB,EAAE4hB,SAAS5Z,KAAK4Z,QAAQC,mBAAmB7hB,EAAE6hB,oBAAoB7Z,KAAK6Z,mBAAmBP,kBAAkBthB,EAAEshB,mBAAmBtZ,KAAKsZ,kBAAkBU,aAAahiB,EAAEgiB,cAAcha,KAAKga,aAAaF,UAAU9hB,EAAE8hB,WAAW9Z,KAAK8Z,UAAUG,aAAajiB,EAAEiiB,cAAcja,KAAKia,aAAaW,eAAe5iB,EAAE4iB,gBAAgB5a,KAAK4a,eAAeC,UAAU7iB,EAAE6iB,gBAAW,KAAmBxjB,EAAEc,UAAU4d,KAAK,WAAW,IAAIte,EAAE,GAAGuI,KAAKmZ,iBAAiB9hB,EAAEkjB,wBAA+D,IAAxCva,KAAK8Y,WAAWjM,QAAQ,aAAkBpV,EAAE,gBAAgB,CAAC,GAAG,IAAIuI,KAAK8Y,WAAW5e,OAAO,CAAC,IAAI6E,EAAEiB,KAAK,YAAYmP,WAAW,WAAWpQ,EAAEqR,KAAK,QAAQ,4BAA4B,GAAG3Y,EAAEuI,KAAK8Y,WAAW,GAAG9Y,KAAKsV,WAAW,UAAU,IAAI7d,EAAEuI,KAAKya,gBAAgBhjB,GAAG,MAAMO,GAAG,OAAOgI,KAAK8Y,WAAWjB,aAAa7X,KAAK+V,OAAOte,EAAEse,OAAO/V,KAAK8a,aAAarjB,IAAIJ,EAAEc,UAAU2iB,aAAa,SAASrjB,GAAG0J,EAAE,uBAAuB1J,EAAEX,MAAM,IAAIiI,EAAEiB,KAAKA,KAAKoC,YAAYjB,EAAE,iCAAiCnB,KAAKoC,UAAUtL,MAAMkJ,KAAKoC,UAAU+N,sBAAsBnQ,KAAKoC,UAAU3K,EAAEA,EAAEqY,GAAG,QAAQ,WAAW/Q,EAAEgc,YAAYjL,GAAG,SAAS,SAASrY,GAAGsH,EAAEic,SAASvjB,KAAKqY,GAAG,QAAQ,SAASrY,GAAGsH,EAAEkc,QAAQxjB,KAAKqY,GAAG,QAAQ,WAAW/Q,EAAEmc,QAAQ,sBAAsB7jB,EAAEc,UAAUgjB,MAAM,SAAS1jB,GAAG,SAASsH,IAAI,GAAG6M,EAAEyN,mBAAmB,CAAC,IAAIta,GAAGiB,KAAKob,gBAAgBxP,EAAExJ,UAAUgZ,eAAe1P,EAAEA,GAAG3M,EAAE2M,IAAIvK,EAAE,8BAA8B1J,GAAGsJ,EAAE6H,OAAOrG,KAAK,OAAO4P,KAAK,WAAWpR,EAAEiP,KAAK,SAAS,SAASjR,GAAG,IAAI2M,EAAE,GAAG,SAAS3M,EAAEwD,MAAM,UAAUxD,EAAEoT,KAAK,CAAC,GAAGhR,EAAE,4BAA4B1J,GAAGmU,EAAEyP,WAAU,EAAGzP,EAAEwE,KAAK,YAAYrP,IAAIA,EAAE,OAAO1J,EAAEkjB,sBAAsB,cAAcxZ,EAAEjK,KAAKqK,EAAE,iCAAiCyK,EAAExJ,UAAUtL,MAAM8U,EAAExJ,UAAUkZ,MAAM,WAAW5P,GAAG,WAAWE,EAAE0J,aAAanU,EAAE,iDAAiD9I,IAAIuT,EAAEkP,aAAa/Z,GAAGA,EAAE6H,OAAOrG,KAAK,aAAaqJ,EAAEwE,KAAK,UAAUrP,GAAGA,EAAE,KAAK6K,EAAEyP,WAAU,EAAGzP,EAAE2P,eAAe,CAACpa,EAAE,8BAA8B1J,GAAG,IAAIO,EAAE,IAAIkX,MAAM,eAAelX,EAAEoK,UAAUrB,EAAEjK,KAAK8U,EAAEwE,KAAK,eAAepY,OAAO,SAASA,IAAI0T,IAAIA,GAAE,EAAGrT,IAAI0I,EAAEqW,QAAQrW,EAAE,MAAM,SAAS/J,EAAE+H,GAAG,IAAI1H,EAAE,IAAI6X,MAAM,gBAAgBnQ,GAAG1H,EAAE+K,UAAUrB,EAAEjK,KAAKkB,IAAImJ,EAAE,mDAAmD1J,EAAEsH,GAAG6M,EAAEwE,KAAK,eAAe/Y,GAAG,SAASd,IAAIS,EAAE,oBAAoB,SAASsB,IAAItB,EAAE,iBAAiB,SAASJ,EAAEa,GAAGsJ,GAAGtJ,EAAEX,OAAOiK,EAAEjK,OAAOqK,EAAE,6BAA6B1J,EAAEX,KAAKiK,EAAEjK,MAAMkB,KAAK,SAASK,IAAI0I,EAAEmP,eAAe,OAAOnR,GAAGgC,EAAEmP,eAAe,QAAQlZ,GAAG+J,EAAEmP,eAAe,QAAQ3Z,GAAGqV,EAAEsE,eAAe,QAAQ5X,GAAGsT,EAAEsE,eAAe,YAAYtZ,GAAGuK,EAAE,yBAAyB1J,GAAG,IAAIsJ,EAAEf,KAAKya,gBAAgBhjB,GAAG0jB,MAAM,IAAIzP,GAAE,EAAGE,EAAE5L,KAAK3I,EAAEkjB,uBAAsB,EAAGxZ,EAAEiP,KAAK,OAAOjR,GAAGgC,EAAEiP,KAAK,QAAQhZ,GAAG+J,EAAEiP,KAAK,QAAQzZ,GAAGyJ,KAAKgQ,KAAK,QAAQ1X,GAAG0H,KAAKgQ,KAAK,YAAYpZ,GAAGmK,EAAEgV,QAAQ1e,EAAEc,UAAUqjB,OAAO,WAAW,GAAGra,EAAE,eAAenB,KAAKsV,WAAW,OAAOje,EAAEkjB,sBAAsB,cAAcva,KAAKoC,UAAUtL,KAAKkJ,KAAKoQ,KAAK,QAAQpQ,KAAKub,QAAQ,SAASvb,KAAKsV,YAAYtV,KAAKuY,SAASvY,KAAKoC,UAAUkZ,MAAM,CAACna,EAAE,2BAA2B,IAAI,IAAI1J,EAAE,EAAEsH,EAAEiB,KAAKka,SAAShgB,OAAOzC,EAAEsH,EAAEtH,IAAIuI,KAAKmb,MAAMnb,KAAKka,SAASziB,MAAMJ,EAAEc,UAAU6iB,SAAS,SAASvjB,GAAG,GAAG,YAAYuI,KAAKsV,YAAY,SAAStV,KAAKsV,YAAY,YAAYtV,KAAKsV,WAAW,OAAOnU,EAAE,uCAAuC1J,EAAE8K,KAAK9K,EAAE0a,MAAMnS,KAAKoQ,KAAK,SAAS3Y,GAAGuI,KAAKoQ,KAAK,aAAa3Y,EAAE8K,MAAM,IAAI,OAAOvC,KAAKyb,YAAY/P,EAAEjU,EAAE0a,OAAO,MAAM,IAAI,OAAOnS,KAAK0b,UAAU1b,KAAKoQ,KAAK,QAAQ,MAAM,IAAI,QAAQ,IAAIrR,EAAE,IAAImQ,MAAM,gBAAgBnQ,EAAED,KAAKrH,EAAE0a,KAAKnS,KAAKib,QAAQlc,GAAG,MAAM,IAAI,UAAUiB,KAAKoQ,KAAK,OAAO3Y,EAAE0a,MAAMnS,KAAKoQ,KAAK,UAAU3Y,EAAE0a,WAAWhR,EAAE,8CAA8CnB,KAAKsV,aAAaje,EAAEc,UAAUsjB,YAAY,SAAShkB,GAAGuI,KAAKoQ,KAAK,YAAY3Y,GAAGuI,KAAK1B,GAAG7G,EAAEkjB,IAAI3a,KAAKoC,UAAU4J,MAAM2O,IAAIljB,EAAEkjB,IAAI3a,KAAKka,SAASla,KAAK2b,eAAelkB,EAAEyiB,UAAUla,KAAKma,aAAa1iB,EAAE0iB,aAAana,KAAKoa,YAAY3iB,EAAE2iB,YAAYpa,KAAKwb,SAAS,WAAWxb,KAAKsV,aAAatV,KAAK0b,UAAU1b,KAAKkQ,eAAe,YAAYlQ,KAAK4b,aAAa5b,KAAK8P,GAAG,YAAY9P,KAAK4b,eAAevkB,EAAEc,UAAUyjB,YAAY,SAASnkB,GAAG6X,aAAatP,KAAKsa,kBAAkB,IAAIvb,EAAEiB,KAAKjB,EAAEub,iBAAiBnL,WAAW,WAAW,WAAWpQ,EAAEuW,YAAYvW,EAAEmc,QAAQ,iBAAiBzjB,GAAGsH,EAAEob,aAAapb,EAAEqb,cAAc/iB,EAAEc,UAAUujB,QAAQ,WAAW,IAAIjkB,EAAEuI,KAAKsP,aAAa7X,EAAE4iB,mBAAmB5iB,EAAE4iB,kBAAkBlL,WAAW,WAAWhO,EAAE,mDAAmD1J,EAAE2iB,aAAa3iB,EAAEokB,OAAOpkB,EAAEmkB,YAAYnkB,EAAE2iB,cAAc3iB,EAAE0iB,eAAe9iB,EAAEc,UAAU0jB,KAAK,WAAW,IAAIpkB,EAAEuI,KAAKA,KAAK8b,WAAW,OAAO,WAAWrkB,EAAE2Y,KAAK,WAAW/Y,EAAEc,UAAU4iB,QAAQ,WAAW/a,KAAKgZ,YAAYpL,OAAO,EAAE5N,KAAKiZ,eAAejZ,KAAKiZ,cAAc,EAAE,IAAIjZ,KAAKgZ,YAAY9e,OAAO8F,KAAKoQ,KAAK,SAASpQ,KAAKub,SAASlkB,EAAEc,UAAUojB,MAAM,WAAW,WAAWvb,KAAKsV,YAAYtV,KAAKoC,UAAU2Z,WAAW/b,KAAKqb,WAAWrb,KAAKgZ,YAAY9e,SAASiH,EAAE,gCAAgCnB,KAAKgZ,YAAY9e,QAAQ8F,KAAKoC,UAAUwG,KAAK5I,KAAKgZ,aAAahZ,KAAKiZ,cAAcjZ,KAAKgZ,YAAY9e,OAAO8F,KAAKoQ,KAAK,WAAW/Y,EAAEc,UAAUuf,MAAMrgB,EAAEc,UAAUyQ,KAAK,SAASnR,EAAEsH,EAAE/G,GAAG,OAAOgI,KAAK8b,WAAW,UAAUrkB,EAAEsH,EAAE/G,GAAGgI,MAAM3I,EAAEc,UAAU2jB,WAAW,SAASrkB,EAAEsH,EAAE/G,EAAEX,GAAG,GAAG,mBAAmB0H,IAAI1H,EAAE0H,EAAEA,OAAE,GAAQ,mBAAmB/G,IAAIX,EAAEW,EAAEA,EAAE,MAAM,YAAYgI,KAAKsV,YAAY,WAAWtV,KAAKsV,WAAW,EAACtd,EAAEA,OAAQgkB,UAAS,IAAKhkB,EAAEgkB,SAAS,IAAIhlB,GAAGuL,KAAK9K,EAAE0a,KAAKpT,EAAE4Y,QAAQ3f,GAAGgI,KAAKoQ,KAAK,eAAepZ,GAAGgJ,KAAKgZ,YAAY9X,KAAKlK,GAAGK,GAAG2I,KAAKgQ,KAAK,QAAQ3Y,GAAG2I,KAAKub,UAAUlkB,EAAEc,UAAUif,MAAM,WAAW,SAAS3f,IAAIJ,EAAE6jB,QAAQ,gBAAgB/Z,EAAE,+CAA+C9J,EAAE+K,UAAUgV,QAAQ,SAASrY,IAAI1H,EAAE6Y,eAAe,UAAUnR,GAAG1H,EAAE6Y,eAAe,eAAenR,GAAGtH,IAAI,SAASO,IAAIX,EAAE2Y,KAAK,UAAUjR,GAAG1H,EAAE2Y,KAAK,eAAejR,GAAG,GAAG,YAAYiB,KAAKsV,YAAY,SAAStV,KAAKsV,WAAW,CAACtV,KAAKsV,WAAW,UAAU,IAAIje,EAAE2I,KAAKA,KAAKgZ,YAAY9e,OAAO8F,KAAKgQ,KAAK,QAAQ,WAAWhQ,KAAKqb,UAAUrjB,IAAIP,MAAMuI,KAAKqb,UAAUrjB,IAAIP,IAAI,OAAOuI,MAAM3I,EAAEc,UAAU8iB,QAAQ,SAASxjB,GAAG0J,EAAE,kBAAkB1J,GAAGJ,EAAEkjB,uBAAsB,EAAGva,KAAKoQ,KAAK,QAAQ3Y,GAAGuI,KAAKkb,QAAQ,kBAAkBzjB,IAAIJ,EAAEc,UAAU+iB,QAAQ,SAASzjB,EAAEsH,GAAG,GAAG,YAAYiB,KAAKsV,YAAY,SAAStV,KAAKsV,YAAY,YAAYtV,KAAKsV,WAAW,CAACnU,EAAE,iCAAiC1J,GAAc6X,aAAatP,KAAKqa,mBAAmB/K,aAAatP,KAAKsa,kBAAkBta,KAAKoC,UAAU+N,mBAAmB,SAASnQ,KAAKoC,UAAUgV,QAAQpX,KAAKoC,UAAU+N,qBAAqBnQ,KAAKsV,WAAW,SAAStV,KAAK1B,GAAG,KAAK0B,KAAKoQ,KAAK,QAAQ3Y,EAAEsH,GAA9OiB,KAAmPgZ,eAAnPhZ,KAAoQiZ,cAAc,IAAI5hB,EAAEc,UAAUwjB,eAAe,SAASlkB,GAAG,IAAI,IAAIsH,KAAK/G,EAAE,EAAEX,EAAEI,EAAEyC,OAAOlC,EAAEX,EAAEW,KAAKpB,EAAEoJ,KAAK8Y,WAAWrhB,EAAEO,KAAK+G,EAAEmC,KAAKzJ,EAAEO,IAAI,OAAO+G,KAAKrI,KAAKqI,EAAE,WAAW,OAAOiB,KAAlB,KAA4B,SAASvI,EAAEsH,EAAE/G,IAAG,SAAUP,GAAsU,IAAIT,EAAEgB,EAAE,IAAIzB,EAAEyB,EAAE,IAAIM,EAAEN,EAAE,IAAImJ,EAAEnJ,EAAE,IAAI+G,EAAEkd,QAAzW,SAAWld,GAAG,IAAM1H,GAAE,EAAG8J,GAAE,EAAGvK,GAAE,IAAKmI,EAAE0Z,MAAM,GAAGhhB,EAAEgV,SAAS,CAAC,IAAIpU,EAAE,WAAWoU,SAASJ,SAAStL,EAAE0L,SAASnK,KAAKvB,IAAIA,EAAE1I,EAAE,IAAI,IAAIhB,EAAE0H,EAAEoZ,WAAW1L,SAAS0L,UAAUpX,IAAIhC,EAAEuD,KAAKnB,EAAEpC,EAAEqZ,SAAS/f,EAAE,GAAG0G,EAAEmd,QAAQ7kB,EAAE0H,EAAEod,QAAQhb,EAAa,SAAT,IAAInK,EAAE+H,KAAgBA,EAAEyZ,WAAW,OAAO,IAAIjiB,EAAEwI,GAAG,IAAInI,EAAE,MAAM,IAAIsY,MAAM,kBAAkB,OAAO,IAAI5W,EAAEyG,IAAmDA,EAAEqd,UAAUjb,IAAIzK,KAAKqI,EAAE,WAAW,OAAOiB,KAAlB,KAA4B,SAASvI,EAAEsH,EAAE/G,IAAG,SAAU+G,GAAG,IAAI1H,EAAEW,EAAE,IAAIP,EAAEpB,QAAQ,SAASoB,GAAG,IAAIO,EAAEP,EAAEykB,QAAQllB,EAAES,EAAE0kB,QAAQ5lB,EAAEkB,EAAEkhB,WAAW,IAAI,GAAG,oBAAoB0D,kBAAkBrkB,GAAGX,GAAG,OAAO,IAAIglB,eAAe,MAAM/jB,IAAI,IAAI,GAAG,oBAAoBgkB,iBAAiBtlB,GAAGT,EAAE,OAAO,IAAI+lB,eAAe,MAAMhkB,IAAI,IAAIN,EAAE,IAC/v+B,OAAO,IAAI+G,GAAG,UAAUhF,OAAO,UAAUgL,KAAK,OAAO,qBAAqB,MAAMzM,QAAQ5B,KAAKqI,EAAE,WAAW,OAAOiB,KAAlB,KAA4B,SAASvI,EAAEsH,GAAG,IAAItH,EAAEpB,QAAQ,oBAAoBgmB,gBAAgB,oBAAoB,IAAIA,eAAe,MAAMrkB,GAAGP,EAAEpB,SAAQ,IAAK,SAASoB,EAAEsH,EAAE/G,IAAG,SAAU+G,GAAG,SAAS1H,KAAK,SAASL,EAAES,GAAG,GAAGb,EAAEF,KAAKsJ,KAAKvI,GAAGuI,KAAK4a,eAAenjB,EAAEmjB,eAAe5a,KAAKga,aAAaviB,EAAEuiB,aAAajb,EAAE0N,SAAS,CAAC,IAAIzU,EAAE,WAAWyU,SAASJ,SAAShV,EAAEoV,SAASnK,KAAKjL,IAAIA,EAAEW,EAAE,IAAI,IAAIgI,KAAKuc,GAAG9kB,EAAE0gB,WAAWpZ,EAAE0N,SAAS0L,UAAU9gB,IAAII,EAAE6K,KAAKtC,KAAKwc,GAAG/kB,EAAE2gB,SAASpgB,GAAG,SAASzB,EAAEkB,GAAGuI,KAAKyc,OAAOhlB,EAAEglB,QAAQ,MAAMzc,KAAKuV,IAAI9d,EAAE8d,IAAIvV,KAAKuc,KAAK9kB,EAAE8kB,GAAGvc,KAAKwc,KAAK/kB,EAAE+kB,GAAGxc,KAAK0c,OAAM,IAAKjlB,EAAEilB,MAAM1c,KAAKmS,UAAK,IAAS1a,EAAE0a,KAAK1a,EAAE0a,KAAK,KAAKnS,KAAKqY,MAAM5gB,EAAE4gB,MAAMrY,KAAK2c,SAASllB,EAAEklB,SAAS3c,KAAKob,eAAe3jB,EAAE2jB,eAAepb,KAAK2Y,WAAWlhB,EAAEkhB,WAAW3Y,KAAK4a,eAAenjB,EAAEmjB,eAAe5a,KAAKwZ,IAAI/hB,EAAE+hB,IAAIxZ,KAAKlI,IAAIL,EAAEK,IAAIkI,KAAKyZ,WAAWhiB,EAAEgiB,WAAWzZ,KAAK0Z,KAAKjiB,EAAEiiB,KAAK1Z,KAAK2Z,GAAGliB,EAAEkiB,GAAG3Z,KAAK4Z,QAAQniB,EAAEmiB,QAAQ5Z,KAAK6Z,mBAAmBpiB,EAAEoiB,mBAAmB7Z,KAAKga,aAAaviB,EAAEuiB,aAAaha,KAAKnI,SAAS,SAASS,IAAI,IAAI,IAAIb,KAAKlB,EAAEqmB,SAASrmB,EAAEqmB,SAASxkB,eAAeX,IAAIlB,EAAEqmB,SAASnlB,GAAGolB,QAAQ,IAAI1b,EAAEnJ,EAAE,IAAIpB,EAAEoB,EAAE,IAAIK,EAAEL,EAAE,GAAG+I,EAAE/I,EAAE,IAAI0T,EAAE1T,EAAE,EAAFA,CAAK,gCAAgCP,EAAEpB,QAAQW,EAAES,EAAEpB,QAAQymB,QAAQvmB,EAAEwK,EAAE/J,EAAEJ,GAAGI,EAAEmB,UAAUijB,gBAAe,EAAGpkB,EAAEmB,UAAU4kB,QAAQ,SAAStlB,GAAG,OAAOA,EAAEA,OAAQ8d,IAAIvV,KAAKuV,MAAM9d,EAAE8kB,GAAGvc,KAAKuc,GAAG9kB,EAAE+kB,GAAGxc,KAAKwc,GAAG/kB,EAAE4gB,MAAMrY,KAAKqY,QAAO,EAAG5gB,EAAE2jB,eAAepb,KAAKob,eAAe3jB,EAAEkhB,WAAW3Y,KAAK2Y,WAAWlhB,EAAE+hB,IAAIxZ,KAAKwZ,IAAI/hB,EAAEK,IAAIkI,KAAKlI,IAAIL,EAAEgiB,WAAWzZ,KAAKyZ,WAAWhiB,EAAEiiB,KAAK1Z,KAAK0Z,KAAKjiB,EAAEkiB,GAAG3Z,KAAK2Z,GAAGliB,EAAEmiB,QAAQ5Z,KAAK4Z,QAAQniB,EAAEoiB,mBAAmB7Z,KAAK6Z,mBAAmBpiB,EAAEmjB,eAAe5a,KAAK4a,eAAenjB,EAAEuiB,aAAaha,KAAKga,aAAa,IAAIzjB,EAAEkB,IAAIT,EAAEmB,UAAU6kB,QAAQ,SAASvlB,EAAEsH,GAAG,IAAI/G,EAAE,iBAAiBP,QAAG,IAASA,EAAEJ,EAAE2I,KAAK+c,SAASN,OAAO,OAAOtK,KAAK1a,EAAEklB,SAAS3kB,IAAIhB,EAAEgJ,KAAK3I,EAAEyY,GAAG,UAAU/Q,GAAG1H,EAAEyY,GAAG,QAAQ,SAASrY,GAAGT,EAAEikB,QAAQ,iBAAiBxjB,KAAKuI,KAAKid,QAAQ5lB,GAAGL,EAAEmB,UAAU+kB,OAAO,WAAWxR,EAAE,YAAY,IAAIjU,EAAEuI,KAAK+c,UAAUhe,EAAEiB,KAAKvI,EAAEqY,GAAG,OAAO,SAASrY,GAAGsH,EAAEoe,OAAO1lB,KAAKA,EAAEqY,GAAG,QAAQ,SAASrY,GAAGsH,EAAEkc,QAAQ,iBAAiBxjB,KAAKuI,KAAKod,QAAQ3lB,GAAGY,EAAE9B,EAAE4B,WAAW5B,EAAE4B,UAAUN,OAAO,WAAW,IAAIJ,GAAG4gB,MAAMrY,KAAKqY,MAAM6D,QAAQlc,KAAKuc,GAAGJ,QAAQnc,KAAKwc,GAAG7D,WAAW3Y,KAAK2Y,YAAYlhB,EAAE+hB,IAAIxZ,KAAKwZ,IAAI/hB,EAAEK,IAAIkI,KAAKlI,IAAIL,EAAEgiB,WAAWzZ,KAAKyZ,WAAWhiB,EAAEiiB,KAAK1Z,KAAK0Z,KAAKjiB,EAAEkiB,GAAG3Z,KAAK2Z,GAAGliB,EAAEmiB,QAAQ5Z,KAAK4Z,QAAQniB,EAAEoiB,mBAAmB7Z,KAAK6Z,mBAAmB,IAAI7hB,EAAEgI,KAAKqd,IAAI,IAAIlc,EAAE1J,GAAGJ,EAAE2I,KAAK,IAAI0L,EAAE,kBAAkB1L,KAAKyc,OAAOzc,KAAKuV,KAAKvd,EAAE+d,KAAK/V,KAAKyc,OAAOzc,KAAKuV,IAAIvV,KAAK0c,OAAO,IAAI,GAAG1c,KAAKga,aAAmE,IAAI,IAAIhjB,KAA7DgB,EAAEslB,uBAAuBtlB,EAAEslB,uBAAsB,GAAiBtd,KAAKga,aAAaha,KAAKga,aAAa5hB,eAAepB,IAAIgB,EAAEulB,iBAAiBvmB,EAAEgJ,KAAKga,aAAahjB,IAAK,MAAMsB,IAAI,GAAG,SAAS0H,KAAKyc,OAAO,IAAIzc,KAAK2c,SAAS3kB,EAAEulB,iBAAiB,eAAe,4BAA4BvlB,EAAEulB,iBAAiB,eAAe,4BAA4B,MAAMjlB,IAAI,IAAIN,EAAEulB,iBAAiB,SAAS,OAAO,MAAMjlB,IAAI,oBAAoBN,IAAIA,EAAEwlB,iBAAgB,GAAIxd,KAAK4a,iBAAiB5iB,EAAEqd,QAAQrV,KAAK4a,gBAAgB5a,KAAKyd,UAAUzlB,EAAEyc,OAAO,WAAWpd,EAAEqmB,UAAU1lB,EAAEyf,QAAQ,WAAWpgB,EAAE4jB,QAAQjjB,EAAE2lB,gBAAgB3lB,EAAE4lB,mBAAmB,WAAW,GAAG,IAAI5lB,EAAEsd,WAAW,CAAC,IAAI7d,EAAE,IAAIA,EAAEO,EAAE6lB,kBAAkB,gBAAgB,MAAM9e,IAAI,6BAA6BtH,IAAIO,EAAE8lB,aAAa,eAAe,IAAI9lB,EAAEsd,aAAa,MAAMtd,EAAE+lB,QAAQ,OAAO/lB,EAAE+lB,OAAO1mB,EAAEqmB,SAASvO,WAAW,WAAW9X,EAAE4jB,QAAQjjB,EAAE+lB,SAAS,KAAKrS,EAAE,cAAc1L,KAAKmS,MAAMna,EAAE4Q,KAAK5I,KAAKmS,MAAM,MAAM7Z,GAAG,YAAY6W,WAAW,WAAW9X,EAAE4jB,QAAQ3iB,IAAI,GAAGyG,EAAEkP,WAAWjO,KAAKge,MAAMznB,EAAE0nB,gBAAgB1nB,EAAEqmB,SAAS5c,KAAKge,OAAOhe,OAAOzJ,EAAE4B,UAAU+lB,UAAU,WAAWle,KAAKoQ,KAAK,WAAWpQ,KAAKmX,WAAW5gB,EAAE4B,UAAUglB,OAAO,SAAS1lB,GAAGuI,KAAKoQ,KAAK,OAAO3Y,GAAGuI,KAAKke,aAAa3nB,EAAE4B,UAAU8iB,QAAQ,SAASxjB,GAAGuI,KAAKoQ,KAAK,QAAQ3Y,GAAGuI,KAAKmX,SAAQ,IAAK5gB,EAAE4B,UAAUgf,QAAQ,SAAS1f,GAAG,QAAG,IAAoBuI,KAAKqd,KAAK,OAAOrd,KAAKqd,IAAI,CAAC,GAAGrd,KAAKyd,SAASzd,KAAKqd,IAAI5I,OAAOzU,KAAKqd,IAAI5F,QAAQpgB,EAAE2I,KAAKqd,IAAIO,mBAAmBvmB,EAAEI,EAAE,IAAIuI,KAAKqd,IAAIR,QAAQ,MAAM7kB,IAAI+G,EAAEkP,iBAAiB1X,EAAEqmB,SAAS5c,KAAKge,OAAOhe,KAAKqd,IAAI,OAAO9mB,EAAE4B,UAAUulB,OAAO,WAAW,IAAIjmB,EAAE,IAAI,IAAIsH,EAAE,IAAIA,EAAEiB,KAAKqd,IAAIQ,kBAAkB,gBAAgB,MAAM7lB,IAAIP,EAAE,6BAA6BsH,GAAEiB,KAAKqd,IAAI1e,UAAgCqB,KAAKqd,IAAIM,aAAa,MAAM3lB,GAAGgI,KAAKib,QAAQjjB,GAAG,MAAMP,GAAGuI,KAAKmd,OAAO1lB,IAAIlB,EAAE4B,UAAUslB,OAAO,WAAW,YAAM,IAAoB1e,EAAEud,iBAAiBtc,KAAKwc,IAAIxc,KAAK2Y,YAAYpiB,EAAE4B,UAAU0kB,MAAM,WAAW7c,KAAKmX,WAAW5gB,EAAE0nB,cAAc,EAAE1nB,EAAEqmB,YAAY7d,EAAEkP,WAAWlP,EAAEof,YAAYpf,EAAEof,YAAY,WAAW7lB,GAAGyG,EAAE2U,kBAAkB3U,EAAE2U,iBAAiB,eAAepb,GAAE,MAAO5B,KAAKqI,EAAE,WAAW,OAAOiB,KAAlB,KAA4B,SAASvI,EAAEsH,EAAE/G,GAAG,SAASX,EAAEI,GAAG,IAAIsH,EAAEtH,GAAGA,EAAEihB,YAAY3X,IAAIhC,IAAIiB,KAAKob,gBAAe,GAAIpkB,EAAEN,KAAKsJ,KAAKvI,GAAG,IAAIT,EAAEgB,EAAE,IAAIzB,EAAEyB,EAAE,IAAIM,EAAEN,EAAE,IAAImJ,EAAEnJ,EAAE,IAAIpB,EAAEoB,EAAE,IAAIK,EAAEL,EAAE,EAAFA,CAAK,4BAA4BP,EAAEpB,QAAQgB,EAAE,IAAI0J,EAAsD,MAA3B,IAAR/I,EAAE,IAAM,EAAOkkB,SAAQ,IAAoB4B,aAAgB3c,EAAE9J,EAAEL,GAAGK,EAAEc,UAAUrB,KAAK,UAAUO,EAAEc,UAAUimB,OAAO,WAAWpe,KAAKqe,QAAQhnB,EAAEc,UAAUmjB,MAAM,SAAS7jB,GAAG,SAASsH,IAAI1G,EAAE,UAAUL,EAAEsd,WAAW,SAAS7d,IAAI,IAAIO,EAAEgI,KAAK,GAAGA,KAAKsV,WAAW,UAAUtV,KAAKic,UAAUjc,KAAK+b,SAAS,CAAC,IAAI1kB,EAAE,EAAE2I,KAAKic,UAAU5jB,EAAE,+CAA+ChB,IAAI2I,KAAKgQ,KAAK,eAAe,WAAW3X,EAAE,gCAAgChB,GAAG0H,OAAOiB,KAAK+b,WAAW1jB,EAAE,+CAA+ChB,IAAI2I,KAAKgQ,KAAK,QAAQ,WAAW3X,EAAE,gCAAgChB,GAAG0H,YAAYA,KAAK1H,EAAEc,UAAUkmB,KAAK,WAAWhmB,EAAE,WAAW2H,KAAKic,SAAQ,EAAGjc,KAAKkd,SAASld,KAAKoQ,KAAK,SAAS/Y,EAAEc,UAAUglB,OAAO,SAAS1lB,GAAG,IAAIsH,EAAEiB,KAAK3H,EAAE,sBAAsBZ,GAA0Ha,EAAEgmB,cAAc7mB,EAAEuI,KAAKiM,OAAOmN,WAA/I,SAAS3hB,EAAEO,EAAEX,GAAG,MAAM,YAAY0H,EAAEuW,YAAYvW,EAAEyc,SAAS,UAAU/jB,EAAE8K,MAAMxD,EAAEmc,WAAU,QAASnc,EAAEic,SAASvjB,KAAgD,WAAWuI,KAAKsV,aAAatV,KAAKic,SAAQ,EAAGjc,KAAKoQ,KAAK,gBAAgB,SAASpQ,KAAKsV,WAAWtV,KAAKqe,OAAOhmB,EAAE,uCAAuC2H,KAAKsV,cAAcje,EAAEc,UAAUomB,QAAQ,WAAW,SAAS9mB,IAAIY,EAAE,wBAAwB0G,EAAE2Y,QAAQnV,KAAK,WAAW,IAAIxD,EAAEiB,KAAK,SAASA,KAAKsV,YAAYjd,EAAE,4BAA4BZ,MAAMY,EAAE,wCAAwC2H,KAAKgQ,KAAK,OAAOvY,KAAKJ,EAAEc,UAAUuf,MAAM,SAASjgB,GAAG,IAAIsH,EAAEiB,KAAKA,KAAK+b,UAAS,EAAG,IAAI/jB,EAAE,WAAW+G,EAAEgd,UAAS,EAAGhd,EAAEqR,KAAK,UAAU9X,EAAEkmB,cAAc/mB,EAAEuI,KAAKob,eAAe,SAAS3jB,GAAGsH,EAAEie,QAAQvlB,EAAEO,MAAMX,EAAEc,UAAUod,IAAI,WAAW,IAAI9d,EAAEuI,KAAKgM,UAAUjN,EAAEiB,KAAKoY,OAAO,QAAQ,OAAOpgB,EAAE,GAAoR,OAAjR,IAAKgI,KAAK6Y,oBAAoBphB,EAAEuI,KAAK4Y,gBAAgBhiB,KAAKoJ,KAAKob,gBAAgB3jB,EAAEkjB,MAAMljB,EAAEgnB,IAAI,GAAGhnB,EAAElB,EAAEyc,OAAOvb,GAAGuI,KAAKsC,OAAO,UAAUvD,GAAG,MAAMsT,OAAOrS,KAAKsC,OAAO,SAASvD,GAAG,KAAKsT,OAAOrS,KAAKsC,SAAStK,EAAE,IAAIgI,KAAKsC,MAAM7K,EAAEyC,SAASzC,EAAE,IAAIA,GAAgDsH,EAAE,QAAX,IAA9BiB,KAAKmY,SAAStL,QAAQ,KAA4B,IAAI7M,KAAKmY,SAAS,IAAInY,KAAKmY,UAAUngB,EAAEgI,KAAK2L,KAAKlU,IAAI,SAASA,EAAEsH,EAAE/G,GAAG,SAASX,EAAEI,GAAGuI,KAAK2L,KAAKlU,EAAEkU,KAAK3L,KAAKmY,SAAS1gB,EAAE0gB,SAASnY,KAAKsC,KAAK7K,EAAE6K,KAAKtC,KAAKoY,OAAO3gB,EAAE2gB,OAAOpY,KAAKgM,MAAMvU,EAAEuU,MAAMhM,KAAK4Y,eAAenhB,EAAEmhB,eAAe5Y,KAAK6Y,kBAAkBphB,EAAEohB,kBAAkB7Y,KAAKsV,WAAW,GAAGtV,KAAKqY,MAAM5gB,EAAE4gB,QAAO,EAAGrY,KAAKiM,OAAOxU,EAAEwU,OAAOjM,KAAK2Y,WAAWlhB,EAAEkhB,WAAW3Y,KAAKwZ,IAAI/hB,EAAE+hB,IAAIxZ,KAAKlI,IAAIL,EAAEK,IAAIkI,KAAKyZ,WAAWhiB,EAAEgiB,WAAWzZ,KAAK0Z,KAAKjiB,EAAEiiB,KAAK1Z,KAAK2Z,GAAGliB,EAAEkiB,GAAG3Z,KAAK4Z,QAAQniB,EAAEmiB,QAAQ5Z,KAAK6Z,mBAAmBpiB,EAAEoiB,mBAAmB7Z,KAAK8Z,UAAUriB,EAAEqiB,UAAU9Z,KAAKga,aAAaviB,EAAEuiB,aAAaha,KAAKia,aAAaxiB,EAAEwiB,aAAa,IAAIjjB,EAAEgB,EAAE,IAAIzB,EAAEyB,EAAE,GAAGP,EAAEpB,QAAQgB,EAAEd,EAAEc,EAAEc,WAAWd,EAAEc,UAAU8iB,QAAQ,SAASxjB,EAAEsH,GAAG,IAAI/G,EAAE,IAAIkX,MAAMzX,GAAG,OAAOO,EAAEuK,KAAK,iBAAiBvK,EAAE0mB,YAAY3f,EAAEiB,KAAKoQ,KAAK,QAAQpY,GAAGgI,MAAM3I,EAAEc,UAAU4d,KAAK,WAAW,MAAM,WAAW/V,KAAKsV,YAAY,KAAKtV,KAAKsV,aAAatV,KAAKsV,WAAW,UAAUtV,KAAKoe,UAAUpe,MAAM3I,EAAEc,UAAUif,MAAM,WAAW,MAAM,YAAYpX,KAAKsV,YAAY,SAAStV,KAAKsV,aAAatV,KAAKue,UAAUve,KAAKkb,WAAWlb,MAAM3I,EAAEc,UAAUyQ,KAAK,SAASnR,GAAG,GAAG,SAASuI,KAAKsV,WAAW,MAAM,IAAIpG,MAAM,sBAAsBlP,KAAK0X,MAAMjgB,IAAIJ,EAAEc,UAAUqjB,OAAO,WAAWxb,KAAKsV,WAAW,OAAOtV,KAAK+b,UAAS,EAAG/b,KAAKoQ,KAAK,SAAS/Y,EAAEc,UAAUglB,OAAO,SAAS1lB,GAAG,IAAIsH,EAAE/H,EAAE2nB,aAAalnB,EAAEuI,KAAKiM,OAAOmN,YAAYpZ,KAAKgb,SAASjc,IAAI1H,EAAEc,UAAU6iB,SAAS,SAASvjB,GAAGuI,KAAKoQ,KAAK,SAAS3Y,IAAIJ,EAAEc,UAAU+iB,QAAQ,WAAWlb,KAAKsV,WAAW,SAAStV,KAAKoQ,KAAK,WAAW,SAAS3Y,EAAEsH,EAAE/G,IAAG,SAAUP,GAAG,SAASJ,EAAEI,EAAEO,GAA2C,OAAOA,EAAzC,IAAI+G,EAAE6f,QAAQnnB,EAAE8K,MAAM9K,EAAE0a,KAAKA,MAAiB,SAASnb,EAAES,EAAEO,EAAEX,GAAG,IAAIW,EAAE,OAAO+G,EAAE8f,mBAAmBpnB,EAAEJ,GAAG,IAAIL,EAAES,EAAE0a,KAAK5b,EAAE,IAAIkO,WAAWzN,GAAGsB,EAAE,IAAImM,WAAW,EAAEzN,EAAE8nB,YAAYxmB,EAAE,GAAGqI,EAAElJ,EAAE8K,MAAM,IAAI,IAAIpB,EAAE,EAAEA,EAAE5K,EAAE2D,OAAOiH,IAAI7I,EAAE6I,EAAE,GAAG5K,EAAE4K,GAAG,OAAO9J,EAAEiB,EAAEqM,QAAuL,SAASrM,EAAEb,EAAEO,EAAEX,GAAG,IAAIW,EAAE,OAAO+G,EAAE8f,mBAAmBpnB,EAAEJ,GAAG,GAAG0nB,EAAE,OAA7O,SAAWtnB,EAAEO,EAAEX,GAAG,IAAIW,EAAE,OAAO+G,EAAE8f,mBAAmBpnB,EAAEJ,GAAG,IAAIL,EAAE,IAAIwd,WAAW,OAAOxd,EAAEyd,OAAO,WAAWhd,EAAE0a,KAAKnb,EAAEwQ,OAAOzI,EAAEigB,aAAavnB,EAAEO,GAAE,EAAGX,IAAIL,EAAE0d,kBAAkBjd,EAAE0a,MAA2E5b,CAAEkB,EAAEO,EAAEX,GAAG,IAAIL,EAAE,IAAIyN,WAAW,GAAiD,OAA9CzN,EAAE,GAAG2J,EAAElJ,EAAE8K,MAA4ClL,EAAhC,IAAI4nB,GAAGjoB,EAAE2N,OAAOlN,EAAE0a,QAA0F,SAASvb,EAAEa,EAAEsH,EAAE/G,GAAG,IAAI,IAAIX,EAAE,IAAI8C,MAAM1C,EAAEyC,QAAQlD,EAAER,EAAEiB,EAAEyC,OAAOlC,GAAGzB,EAAE,SAASkB,EAAEO,EAAEhB,GAAG+H,EAAE/G,EAAE,SAAS+G,EAAE/G,GAAGX,EAAEI,GAAGO,EAAEhB,EAAE+H,EAAE1H,MAAMiB,EAAE,EAAEA,EAAEb,EAAEyC,OAAO5B,IAAI/B,EAAE+B,EAAEb,EAAEa,GAAGtB,GAAG,IAAIqB,EAAE0I,EAAE/I,EAAE,IAAI0T,EAAE1T,EAAE,GAAG4T,EAAE5T,EAAE,IAAIxB,EAAEwB,EAAE,IAAInB,EAAEmB,EAAE,IAAIP,GAAGA,EAAE0c,cAAc9b,EAAEL,EAAE,KAAK,IAAIoX,EAAE,oBAAoB1S,WAAW,WAAWkQ,KAAKlQ,UAAUC,WAAWhG,EAAE,oBAAoB+F,WAAW,aAAakQ,KAAKlQ,UAAUC,WAAWoiB,EAAE3P,GAAGzY,EAAEoI,EAAEsN,SAAS,EAAE,IAAI1L,EAAE5B,EAAE6f,SAAS7I,KAAK,EAAEqB,MAAM,EAAEyE,KAAK,EAAEqD,KAAK,EAAElQ,QAAQ,EAAEuJ,QAAQ,EAAE4G,KAAK,GAAGle,EAAEF,EAAEJ,GAAGye,GAAG7c,KAAK,QAAQ4P,KAAK,gBAAgB8M,EAAEjnB,EAAE,IAAI+G,EAAEigB,aAAa,SAASjgB,EAAE/G,EAAEzB,EAAE4K,GAAG,mBAAmBnJ,IAAImJ,EAAEnJ,EAAEA,GAAE,GAAI,mBAAmBzB,IAAI4K,EAAE5K,EAAEA,EAAE,MAAM,IAAIK,OAAE,IAASmI,EAAEoT,UAAK,EAAOpT,EAAEoT,KAAKxN,QAAQ5F,EAAEoT,KAAK,GAAG1a,EAAE0c,aAAavd,aAAaud,YAAY,OAAOnd,EAAE+H,EAAE/G,EAAEmJ,GAAG,GAAG8d,GAAGroB,aAAaa,EAAEsc,KAAK,OAAOzb,EAAEyG,EAAE/G,EAAEmJ,GAAG,GAAGvK,GAAGA,EAAEyc,OAAO,OAAOhc,EAAE0H,EAAEoC,GAAG,IAAI9I,EAAEsI,EAAE5B,EAAEwD,MAAM,YAAO,IAASxD,EAAEoT,OAAO9Z,GAAG9B,EAAEM,EAAEmc,OAAOrB,OAAO5S,EAAEoT,OAAOkN,QAAO,IAAK1N,OAAO5S,EAAEoT,OAAOhR,EAAE,GAAG9I,IAAI0G,EAAE8f,mBAAmB,SAAS7mB,EAAEX,GAAG,IAA6KiB,EAAzKtB,EAAE,IAAI+H,EAAE6f,QAAQ5mB,EAAEuK,MAAM,GAAG0c,GAAGjnB,EAAEma,gBAAgB1a,EAAEsc,KAAK,CAAC,IAAIxd,EAAE,IAAIie,WAAW,OAAOje,EAAEke,OAAO,WAAW,IAAIhd,EAAElB,EAAEiR,OAAOgK,MAAM,KAAK,GAAGna,EAAEL,EAAES,IAAIlB,EAAE+oB,cAActnB,EAAEma,MAAY,IAAI7Z,EAAEqZ,OAAO4N,aAAazmB,MAAM,KAAK,IAAI2L,WAAWzM,EAAEma,OAAO,MAAMhR,GAAG,IAAI,IAAIvK,EAAE,IAAI6N,WAAWzM,EAAEma,MAAM9Z,EAAE,IAAI8B,MAAMvD,EAAEsD,QAAQ6G,EAAE,EAAEA,EAAEnK,EAAEsD,OAAO6G,IAAI1I,EAAE0I,GAAGnK,EAAEmK,GAAGzI,EAAEqZ,OAAO4N,aAAazmB,MAAM,KAAKT,GAAG,OAAOrB,GAAGS,EAAE+nB,KAAKlnB,GAAGjB,EAAEL,IAAI+H,EAAE4f,aAAa,SAASlnB,EAAEO,EAAEX,GAAG,QAAG,IAASI,EAAE,OAAO2nB,EAAE,GAAG,iBAAiB3nB,EAAE,CAAC,GAAG,MAAMA,EAAEkV,OAAO,GAAG,OAAO5N,EAAE0gB,mBAAmBhoB,EAAEga,OAAO,GAAGzZ,GAAG,GAAGX,IAAe,KAAXI,EAA5gD,SAAWA,GAAG,IAAIA,EAAEZ,EAAEyhB,OAAO7gB,GAAG4nB,QAAO,IAAK,MAAMtgB,GAAG,OAAM,EAAG,OAAOtH,EAAy8C0J,CAAE1J,IAAW,OAAO2nB,EAAE,IAAIpoB,EAAES,EAAEkV,OAAO,GAAG,OAAO0F,OAAOrb,IAAIA,GAAGiK,EAAEjK,GAAGS,EAAEyC,OAAO,GAAGqI,KAAKtB,EAAEjK,GAAGmb,KAAK1a,EAAEsV,UAAU,KAAKxK,KAAKtB,EAAEjK,IAAIooB,EAA0BpoB,EAAlB,IAAIyN,WAAWhN,GAAO,GAA5B,IAA+Ba,EAAEsT,EAAEnU,EAAE,GAAG,OAAOwnB,GAAG,SAASjnB,IAAIM,EAAE,IAAI2mB,GAAG3mB,MAAMiK,KAAKtB,EAAEjK,GAAGmb,KAAK7Z,IAAIyG,EAAE0gB,mBAAmB,SAAShoB,EAAEsH,GAAG,IAAI/G,EAAEiJ,EAAExJ,EAAEkV,OAAO,IAAI,IAAItU,EAAE,OAAOkK,KAAKvK,EAAEma,MAAMkB,QAAO,EAAGlB,KAAK1a,EAAEga,OAAO,KAAK,IAAIpa,EAAEgB,EAAEigB,OAAO7gB,EAAEga,OAAO,IAAI,MAAM,SAAS1S,GAAGkgB,IAAI5nB,EAAE,IAAI4nB,GAAG5nB,MAAMkL,KAAKvK,EAAEma,KAAK9a,IAAI0H,EAAEyf,cAAc,SAAS/mB,EAAEO,EAAEX,GAA6G,mBAAmBW,IAAIX,EAAEW,EAAEA,EAAE,MAAM,IAAIM,EAAEoT,EAAEjU,GAAG,OAAOO,GAAGM,EAAE2mB,IAAIF,EAAEhgB,EAAE2gB,oBAAoBjoB,EAAEJ,GAAG0H,EAAE4gB,2BAA2BloB,EAAEJ,GAAGI,EAAEyC,YAAYtD,EAAEa,EAAnN,SAAWA,EAAEJ,GAAG0H,EAAEigB,aAAavnB,IAAIa,GAAGN,GAAE,EAAG,SAASP,GAAGJ,EAAE,KAA7F,SAAWI,GAAG,OAAOA,EAAEyC,OAAO,IAAIzC,EAAgET,CAAES,OAAuJ,SAASA,EAAEsH,GAAG,OAAO1H,EAAE0H,EAAEgG,KAAK,OAAO1N,EAAE,OAAO0H,EAAEuf,cAAc,SAAS7mB,EAAEO,EAAEX,GAAG,GAAG,iBAAiBI,EAAE,OAAOsH,EAAE6gB,sBAAsBnoB,EAAEO,EAAEX,GAAsC,IAAIL,EAAE,GAAzC,mBAAmBgB,IAAIX,EAAEW,EAAEA,EAAE,MAAe,KAAKP,EAAE,OAAOJ,EAAE+nB,EAAE,EAAE,GAAG,IAAI,IAAI7oB,EAAE+B,EAAE6I,EAAE,GAAGvK,EAAE,EAAEyB,EAAEZ,EAAEyC,OAAOtD,EAAEyB,EAAEzB,IAAI,CAAC,IAAImK,EAAEtJ,EAAEkV,OAAO/V,GAAG,GAAG,MAAMmK,EAAE,CAAC,GAAG,KAAKI,GAAGA,IAAI5K,EAAE8b,OAAOlR,IAAI,OAAO9J,EAAE+nB,EAAE,EAAE,GAAG,GAAqBje,IAAlB7I,EAAEb,EAAEga,OAAO7a,EAAE,EAAEL,IAAQ2D,OAAO,OAAO7C,EAAE+nB,EAAE,EAAE,GAAG,GAAG9mB,EAAE4B,OAAO,CAAC,GAAGlD,EAAE+H,EAAE4f,aAAarmB,EAAEN,GAAE,GAAIonB,EAAE7c,OAAOvL,EAAEuL,MAAM6c,EAAEjN,OAAOnb,EAAEmb,KAAK,OAAO9a,EAAE+nB,EAAE,EAAE,GAAoB,IAAG,IAAd/nB,EAAEL,EAAEJ,EAAEL,EAAE8B,GAAa,OAAOzB,GAAGL,EAAE4K,EAAE,QAAQA,GAAGJ,EAAE,MAAM,KAAKI,EAAE9J,EAAE+nB,EAAE,EAAE,QAAG,GAAQrgB,EAAE4gB,2BAA2B,SAASloB,EAAEO,GAAyE,OAAOP,EAAEyC,YAAYtD,EAAEa,EAA7F,SAAWA,EAAEO,GAAG+G,EAAEigB,aAAavnB,GAAE,GAAG,EAAG,SAASA,GAAG,OAAOO,EAAE,KAAKP,MAAgC,SAASA,EAAEsH,GAAG,IAAI1H,EAAE0H,EAAE8gB,OAAO,SAASpoB,EAAEsH,GAAG,IAAI/G,EAAE,OAAkDP,GAA3CO,EAAE,iBAAiB+G,EAAEA,EAAE7E,OAAO6E,EAAE+f,YAAexf,WAAWpF,OAAOlC,EAAE,GAAG,GAAGhB,EAAE,IAAIyN,WAAWpN,GAAGd,EAAE,EAAE,OAAOwI,EAAEqB,QAAQ,SAAS3I,GAAG,IAAIsH,EAAE,iBAAiBtH,EAAEO,EAAEP,EAAE,GAAGsH,EAAE,CAAC,IAAI,IAAI1H,EAAE,IAAIoN,WAAWhN,EAAEyC,QAAQ5B,EAAE,EAAEA,EAAEb,EAAEyC,OAAO5B,IAAIjB,EAAEiB,GAAGb,EAAEyZ,WAAW5Y,GAAGN,EAAEX,EAAEsN,OAAS3N,EAAET,KAAJwI,EAAS,EAAS,EAAM,IAAIoC,EAAEnJ,EAAE8mB,WAAWxf,WAAvB,IAAkChH,EAAE,EAAEA,EAAE6I,EAAEjH,OAAO5B,IAAItB,EAAET,KAAK8S,SAASlI,EAAE7I,IAAItB,EAAET,KAAK,IAAI,IAAQc,EAAE,IAAIoN,WAAWzM,GAAGM,EAAE,EAAEA,EAAEjB,EAAE6C,OAAO5B,IAAItB,EAAET,KAAKc,EAAEiB,KAAKN,EAAEhB,EAAE2N,UAAU3M,EAAE,IAAImc,YAAY,KAAKpV,EAAE2gB,oBAAoB,SAASjoB,EAAEO,GAAyZpB,EAAEa,EAAxZ,SAAWA,EAAEO,GAAG+G,EAAEigB,aAAavnB,GAAE,GAAG,EAAG,SAASA,GAAG,IAAIsH,EAAE,IAAI0F,WAAW,GAAG,GAAG1F,EAAE,GAAG,EAAE,iBAAiBtH,EAAE,CAAC,IAAI,IAAIJ,EAAE,IAAIoN,WAAWhN,EAAEyC,QAAQlD,EAAE,EAAEA,EAAES,EAAEyC,OAAOlD,IAAIK,EAAEL,GAAGS,EAAEyZ,WAAWla,GAAGS,EAAEJ,EAAEsN,OAAO5F,EAAE,GAAG,EAAM,IAAmDzG,GAA7Cb,aAAa0c,YAAY1c,EAAEqnB,WAAWrnB,EAAE8M,MAASjF,WAAW6B,EAAE,IAAIsD,WAAWnM,EAAE4B,OAAO,GAAhG,IAAmGlD,EAAE,EAAEA,EAAEsB,EAAE4B,OAAOlD,IAAImK,EAAEnK,GAAGqS,SAAS/Q,EAAEtB,IAAI,GAAGmK,EAAE7I,EAAE4B,QAAQ,IAAI+kB,EAAE,CAAC,IAAIroB,EAAE,IAAIqoB,GAAGlgB,EAAE4F,OAAOxD,EAAEwD,OAAOlN,IAAIO,EAAE,KAAKpB,OAAY,SAASa,EAAEsH,GAAG,OAAO/G,EAAE,IAAIinB,EAAElgB,OAAOA,EAAE6gB,sBAAsB,SAASnoB,EAAEO,EAAEX,GAAG,mBAAmBW,IAAIX,EAAEW,EAAEA,EAAE,MAAM,IAAI,IAAIhB,EAAES,EAAElB,KAAKS,EAAE8nB,WAAW,GAAG,CAAC,IAAI,IAAIxmB,EAAE,IAAImM,WAAWzN,GAAGmK,EAAE,IAAI7I,EAAE,GAAG1B,EAAE,GAAGyB,EAAE,EAAE,MAAMC,EAAED,GAAGA,IAAI,CAAC,GAAGzB,EAAEsD,OAAO,IAAI,OAAO7C,EAAE+nB,EAAE,EAAE,GAAGxoB,GAAG0B,EAAED,GAAGrB,EAAE4U,EAAE5U,EAAE,EAAEJ,EAAEsD,QAAQtD,EAAEyS,SAASzS,GAAG,IAAImK,EAAE6K,EAAE5U,EAAE,EAAEJ,GAAG,GAAGuK,EAAE,IAAIJ,EAAE4Q,OAAO4N,aAAazmB,MAAM,KAAK,IAAI2L,WAAW1D,IAAI,MAAM2K,GAAG,IAAIlV,EAAE,IAAIiO,WAAW1D,GAAGA,EAAE,GAAG,IAAQ1I,EAAE,EAAEA,EAAE7B,EAAE0D,OAAO7B,IAAI0I,GAAG4Q,OAAO4N,aAAa/oB,EAAE6B,IAAI9B,EAAE2K,KAAKH,GAAG/J,EAAE4U,EAAE5U,EAAEJ,GAAG,IAAIC,EAAEN,EAAE2D,OAAO3D,EAAE6J,QAAQ,SAAS3I,EAAET,GAAGK,EAAE0H,EAAE4f,aAAalnB,EAAEO,GAAE,GAAIhB,EAAEH,QAAQH,KAAKqI,EAAE,WAAW,OAAOiB,KAAlB,KAA4B,SAASvI,EAAEsH,GAAGtH,EAAEpB,QAAQY,OAAO+K,MAAM,SAASvK,GAAG,IAAIsH,KAAK/G,EAAEf,OAAOkB,UAAUC,eAAe,IAAI,IAAIf,KAAKI,EAAEO,EAAEtB,KAAKe,EAAEJ,IAAI0H,EAAEmC,KAAK7J,GAAG,OAAO0H,IAAI,SAAStH,EAAEsH,GAAGtH,EAAEpB,QAAQ,SAASoB,EAAEsH,EAAE/G,GAAG,IAAIX,EAAEI,EAAEqnB,WAAW,GAAG/f,EAAEA,GAAG,EAAE/G,EAAEA,GAAGX,EAAEI,EAAEyI,MAAM,OAAOzI,EAAEyI,MAAMnB,EAAE/G,GAAG,GAAG+G,EAAE,IAAIA,GAAG1H,GAAGW,EAAE,IAAIA,GAAGX,GAAGW,EAAEX,IAAIW,EAAEX,GAAG0H,GAAG1H,GAAG0H,GAAG/G,GAAG,IAAIX,EAAE,OAAO,IAAI8c,YAAY,GAAG,IAAI,IAAInd,EAAE,IAAIyN,WAAWhN,GAAGlB,EAAE,IAAIkO,WAAWzM,EAAE+G,GAAGzG,EAAEyG,EAAEoC,EAAE,EAAE7I,EAAEN,EAAEM,IAAI6I,IAAI5K,EAAE4K,GAAGnK,EAAEsB,GAAG,OAAO/B,EAAEoO,SAAS,SAASlN,EAAEsH,GAAqM,SAAS1H,KAAKI,EAAEpB,QAAlN,SAAWoB,EAAEsH,EAAE/G,GAAG,SAAShB,EAAES,EAAEJ,GAAG,GAAGL,EAAE8oB,OAAO,EAAE,MAAM,IAAI5Q,MAAM,iCAAiClY,EAAE8oB,MAAMroB,GAAGlB,GAAE,EAAGwI,EAAEtH,GAAGsH,EAAE/G,GAAG,IAAIhB,EAAE8oB,OAAOvpB,GAAGwI,EAAE,KAAK1H,GAAG,IAAId,GAAE,EAAG,OAAOyB,EAAEA,GAAGX,EAAEL,EAAE8oB,MAAMroB,EAAE,IAAIA,EAAEsH,IAAI/H,IAA6B,SAASS,EAAEsH,EAAE/G,GAAG,IAAIX,GAAE,SAAUI,EAAET,IAAI,SAAST,GAAG,SAAS+B,EAAEb,GAAG,IAAI,IAAIsH,EAAE/G,EAAEX,KAAKL,EAAE,EAAET,EAAEkB,EAAEyC,OAAOlD,EAAET,IAAGwI,EAAEtH,EAAEyZ,WAAWla,OAAQ,OAAO+H,GAAG,OAAO/H,EAAET,EAAuB,QAAQ,OAA5ByB,EAAEP,EAAEyZ,WAAWla,OAAsBK,EAAE6J,OAAO,KAAKnC,IAAI,KAAK,KAAK/G,GAAG,QAAQX,EAAE6J,KAAKnC,GAAG/H,KAAMK,EAAE6J,KAAKnC,GAAG,OAAO1H,EAAyI,SAAST,EAAEa,EAAEsH,GAAG,GAAGtH,GAAG,OAAOA,GAAG,MAAM,CAAC,GAAGsH,EAAE,MAAMmQ,MAAM,oBAAoBzX,EAAE6H,SAAS,IAAID,cAAc,0BAA0B,OAAM,EAAG,OAAM,EAAG,SAAShH,EAAEZ,EAAEsH,GAAG,OAAOqgB,EAAE3nB,GAAGsH,EAAE,GAAG,KAAK,SAASgC,EAAEtJ,EAAEsH,GAAG,GAAG,IAAI,WAAWtH,GAAG,OAAO2nB,EAAE3nB,GAAG,IAAIO,EAAE,GAAG,OAAO,IAAI,WAAWP,GAAGO,EAAEonB,EAAE3nB,GAAG,EAAE,GAAG,KAAK,IAAI,WAAWA,IAAIb,EAAEa,EAAEsH,KAAKtH,EAAE,OAAOO,EAAEonB,EAAE3nB,GAAG,GAAG,GAAG,KAAKO,GAAGK,EAAEZ,EAAE,IAAI,IAAI,WAAWA,KAAKO,EAAEonB,EAAE3nB,GAAG,GAAG,EAAE,KAAKO,GAAGK,EAAEZ,EAAE,IAAIO,GAAGK,EAAEZ,EAAE,IAAIO,EAAGonB,EAAE,GAAG3nB,EAAE,KAAoH,SAASmU,IAAI,GAAG3K,GAAGN,EAAE,MAAMuO,MAAM,sBAAsB,IAAIzX,EAAE,IAAIsnB,EAAE9d,GAAG,GAAGA,IAAI,MAAM,IAAIxJ,GAAG,OAAO,GAAGA,EAAE,MAAMyX,MAAM,6BAA6B,SAAS1Y,EAAEiB,GAAG,IAAIsH,EAAQxI,EAAE,GAAG0K,EAAEN,EAAE,MAAMuO,MAAM,sBAAsB,GAAGjO,GAAGN,EAAE,OAAM,EAAG,GAAG5B,EAAE,IAAIggB,EAAE9d,GAAGA,IAAI,IAAI,IAAIlC,GAAG,OAAOA,EAAE,GAAG,MAAM,IAAIA,GAAG,CAAC,IAASxI,GAAG,GAAGwI,IAAI,EAAd6M,MAAqB,IAAI,OAAOrV,EAAE,MAAM2Y,MAAM,6BAA6B,GAAG,MAAM,IAAInQ,GAAG,CAAC,IAAexI,GAAG,GAAGwI,IAAI,GAApB6M,KAA0B,EAApBA,MAA2B,KAAK,OAAOhV,EAAEL,EAAEkB,GAAGlB,EAAE,MAAM,MAAM2Y,MAAM,6BAA6B,GAAG,MAAM,IAAInQ,MAAuBxI,GAAG,EAAEwI,IAAI,GAAzB6M,KAA+B,GAAzBA,KAA+B,EAAzBA,MAAgC,OAAOrV,GAAG,SAAS,OAAOA,EAAE,MAAM2Y,MAAM,0BAAsJ9D,EAAiBrM,GAAvB,IAA4BpI,GAAG,UAAAyU,EAAiB3T,IAAGA,GAAGA,EAAEpB,QAAc,UAAA+U,EAAiBpU,IAAGA,GAAGL,EAAEojB,SAASpjB,GAAGA,EAAE8F,OAAkB,IAAIsiB,EAAEpe,EAAEM,EAAEme,EAAEzN,OAAO4N,aAAaN,GAAGrP,QAAQ,QAAQoD,OAAhgC,SAAWvb,EAAEsH,GAAW,IAAI,IAAM1H,GAAE,KAApB0H,EAAEA,OAAyBsgB,OAAOroB,EAAEsB,EAAEb,GAAGlB,EAAES,EAAEkD,OAAOiH,GAAG,EAAEvK,EAAE,KAAKuK,EAAE5K,GAAUK,GAAGmK,EAAR/J,EAAEmK,GAAU9J,GAAG,OAAOT,GAA45B0hB,OAAjT,SAAW7gB,EAAEsH,GAAW,IAAI/G,GAAE,KAAd+G,EAAEA,OAAmBsgB,OAAON,EAAEzmB,EAAEb,GAAGkJ,EAAEoe,EAAE7kB,OAAO+G,EAAE,EAAE,IAAI,IAAI5J,EAAEL,MAAgB,KAAVK,EAAEb,EAAEwB,KAAUhB,EAAEkK,KAAK7J,GAAG,OAAp3C,SAAWI,GAAG,IAAI,IAAIsH,EAAE/G,EAAEP,EAAEyC,OAAO7C,GAAG,EAAEL,EAAE,KAAKK,EAAEW,IAAG+G,EAAEtH,EAAEJ,IAAK,QAAiBL,GAAGooB,GAAZrgB,GAAG,SAAe,GAAG,KAAK,OAAOA,EAAE,MAAM,KAAKA,GAAG/H,GAAGooB,EAAErgB,GAAG,OAAO/H,EAAsvCmK,CAAEnK,UAA+O,KAAvCK,EAAE,WAAW,OAAO4nB,GAAGvoB,KAAKqI,EAAE/G,EAAE+G,EAAEtH,MAAkBA,EAAEpB,QAAQgB,GAA91D,KAA22DX,KAAKqI,EAAE/G,EAAE,GAAFA,CAAMP,GAAG,WAAW,OAAOuI,KAAlB,KAA4B,SAASvI,EAAEsH,GAAGtH,EAAEpB,QAAQ,SAASoB,GAAG,OAAOA,EAAEuT,kBAAkBvT,EAAEyT,UAAU,aAAazT,EAAE0T,SAAS1T,EAAEwT,YAAYxT,EAAEuT,gBAAgB,GAAGvT,IAAI,SAASA,EAAEsH,IAAI,WAAW,aAAa,IAAI,IAAItH,EAAE,mEAAmEO,EAAE,IAAIyM,WAAW,KAAKpN,EAAE,EAAEA,EAAEI,EAAEyC,OAAO7C,IAAIW,EAAEP,EAAEyZ,WAAW7Z,IAAIA,EAAE0H,EAAEiU,OAAO,SAASjU,GAAG,IAAI/G,EAAEX,EAAE,IAAIoN,WAAW1F,GAAG/H,EAAEK,EAAE6C,OAAO3D,EAAE,GAAG,IAAIyB,EAAE,EAAEA,EAAEhB,EAAEgB,GAAG,EAAEzB,GAAGkB,EAAEJ,EAAEW,IAAI,GAAGzB,GAAGkB,GAAG,EAAEJ,EAAEW,KAAK,EAAEX,EAAEW,EAAE,IAAI,GAAGzB,GAAGkB,GAAG,GAAGJ,EAAEW,EAAE,KAAK,EAAEX,EAAEW,EAAE,IAAI,GAAGzB,GAAGkB,EAAE,GAAGJ,EAAEW,EAAE,IAAI,OAAOhB,EAAE,GAAI,EAAET,EAAEA,EAAEwW,UAAU,EAAExW,EAAE2D,OAAO,GAAG,IAAIlD,EAAE,GAAI,IAAIT,EAAEA,EAAEwW,UAAU,EAAExW,EAAE2D,OAAO,GAAG,MAAM3D,GAAGwI,EAAEuZ,OAAO,SAAS7gB,GAAG,IAAIsH,EAAE1H,EAAEL,EAAET,EAAE+B,EAAE6I,EAAE,IAAI1J,EAAEyC,OAAOtD,EAAEa,EAAEyC,OAAO7B,EAAE,EAAE,MAAMZ,EAAEA,EAAEyC,OAAO,KAAKiH,IAAI,MAAM1J,EAAEA,EAAEyC,OAAO,IAAIiH,KAAK,IAAIJ,EAAE,IAAIoT,YAAYhT,GAAGuK,EAAE,IAAIjH,WAAW1D,GAAG,IAAIhC,EAAE,EAAEA,EAAEnI,EAAEmI,GAAG,EAAE1H,EAAEW,EAAEP,EAAEyZ,WAAWnS,IAAI/H,EAAEgB,EAAEP,EAAEyZ,WAAWnS,EAAE,IAAIxI,EAAEyB,EAAEP,EAAEyZ,WAAWnS,EAAE,IAAIzG,EAAEN,EAAEP,EAAEyZ,WAAWnS,EAAE,IAAI2M,EAAErT,KAAKhB,GAAG,EAAEL,GAAG,EAAE0U,EAAErT,MAAM,GAAGrB,IAAI,EAAET,GAAG,EAAEmV,EAAErT,MAAM,EAAE9B,IAAI,EAAE,GAAG+B,EAAE,OAAOyI,GAA1vB,IAAiwB,SAAStJ,EAAEsH,IAAG,SAAUA,GAAG,SAAS/G,EAAEP,GAAG,IAAI,IAAIsH,EAAE,EAAEA,EAAEtH,EAAEyC,OAAO6E,IAAI,CAAC,IAAI/G,EAAEP,EAAEsH,GAAG,GAAG/G,EAAE2M,kBAAkBwP,YAAY,CAAC,IAAI9c,EAAEW,EAAE2M,OAAO,GAAG3M,EAAE8mB,aAAaznB,EAAEynB,WAAW,CAAC,IAAI9nB,EAAE,IAAIyN,WAAWzM,EAAE8mB,YAAY9nB,EAAE2M,IAAI,IAAIc,WAAWpN,EAAEW,EAAE+nB,WAAW/nB,EAAE8mB,aAAaznB,EAAEL,EAAE2N,OAAOlN,EAAEsH,GAAG1H,IAAI,SAASA,EAAEI,EAAEsH,GAAGA,EAAEA,MAAM,IAAI1H,EAAE,IAAId,EAAEyB,EAAEP,GAAG,IAAI,IAAIT,EAAE,EAAEA,EAAES,EAAEyC,OAAOlD,IAAIK,EAAE2oB,OAAOvoB,EAAET,IAAI,OAAO+H,EAAEwD,KAAKlL,EAAE4oB,QAAQlhB,EAAEwD,MAAMlL,EAAE4oB,UAAU,SAASjpB,EAAES,EAAEsH,GAAG,OAAO/G,EAAEP,GAAG,IAAIsc,KAAKtc,EAAEsH,OAAO,IAAIxI,EAAEwI,EAAEmhB,aAAanhB,EAAEohB,mBAAmBphB,EAAEqhB,eAAerhB,EAAEshB,eAAe/nB,EAAE,WAAW,IAA2B,OAAO,IAAxB,IAAIyb,MAAM,OAAoBxP,KAAK,MAAMxF,GAAG,OAAM,GAAvE,GAA8EoC,EAAE7I,GAAG,WAAW,IAA4C,OAAO,IAAzC,IAAIyb,MAAM,IAAItP,YAAY,EAAE,MAAmBF,KAAK,MAAMxF,GAAG,OAAM,GAAxF,GAA+FnI,EAAEL,GAAGA,EAAE4B,UAAU6nB,QAAQzpB,EAAE4B,UAAU8nB,QAAQxoB,EAAEpB,QAA0BiC,EAAE6I,EAAEpC,EAAEgV,KAAK/c,EAAEJ,EAAES,OAAE,IAAYX,KAAKqI,EAAE,WAAW,OAAOiB,KAAlB,KAA4B,SAASvI,EAAEsH,GAAGA,EAAEiU,OAAO,SAASvb,GAAG,IAAIsH,EAAE,GAAG,IAAI,IAAI/G,KAAKP,EAAEA,EAAEW,eAAeJ,KAAK+G,EAAE7E,SAAS6E,GAAG,KAAKA,GAAGuhB,mBAAmBtoB,GAAG,IAAIsoB,mBAAmB7oB,EAAEO,KAAK,OAAO+G,GAAGA,EAAEuZ,OAAO,SAAS7gB,GAAG,IAAI,IAAIsH,KAAK/G,EAAEP,EAAE+Z,MAAM,KAAKna,EAAE,EAAEL,EAAEgB,EAAEkC,OAAO7C,EAAEL,EAAEK,IAAI,CAAC,IAAId,EAAEyB,EAAEX,GAAGma,MAAM,KAAKzS,EAAEwhB,mBAAmBhqB,EAAE,KAAKgqB,mBAAmBhqB,EAAE,IAAI,OAAOwI,IAAI,SAAStH,EAAEsH,GAAGtH,EAAEpB,QAAQ,SAASoB,EAAEsH,GAAG,IAAI/G,EAAE,aAAaA,EAAEG,UAAU4G,EAAE5G,UAAUV,EAAEU,UAAU,IAAIH,EAAEP,EAAEU,UAAUgU,YAAY1U,IAAI,SAASA,EAAEsH,GAAG,aAAa,SAAS/G,EAAEP,GAAG,IAAIsH,EAAE,GAAG,GAAGA,EAAEzG,EAAEb,EAAE0J,GAAGpC,EAAEtH,EAAE2M,KAAKC,MAAM5M,EAAE0J,SAAS1J,EAAE,GAAG,OAAOsH,EAA6E,SAAS/H,IAAI,IAAIS,EAAEO,GAAG,IAAI6Y,MAAM,OAAOpZ,IAAIlB,GAAG8B,EAAE,EAAE9B,EAAEkB,GAAGA,EAAE,IAAIO,EAAEK,KAAK,IAAI,IAAI9B,EAAE+B,EAAE,mEAAmEkZ,MAAM,IAAIrQ,EAAE,GAAGvK,KAAKyB,EAAE,EAAE0I,EAAE,EAAEA,EAAEI,EAAEJ,IAAInK,EAAE0B,EAAEyI,IAAIA,EAAE/J,EAAEgc,OAAOhb,EAAEhB,EAAEshB,OAAzR,SAAW7gB,GAAG,IAAIsH,EAAE,EAAE,IAAIgC,EAAE,EAAEA,EAAEtJ,EAAEyC,OAAO6G,IAAIhC,EAAEA,EAAEoC,EAAEvK,EAAEa,EAAEkV,OAAO5L,IAAI,OAAOhC,GAAyNtH,EAAEpB,QAAQW,GAAG,SAASS,EAAEsH,EAAE/G,IAAG,SAAU+G,GAAG,SAAS1H,KAAK,SAASL,EAAES,GAAGlB,EAAEG,KAAKsJ,KAAKvI,GAAGuI,KAAKgM,MAAMhM,KAAKgM,UAAU7K,IAAIpC,EAAEyhB,SAASzhB,EAAEyhB,WAAWrf,EAAEpC,EAAEyhB,QAAQxgB,KAAKge,MAAM7c,EAAEjH,OAAO,IAAIlC,EAAEgI,KAAKmB,EAAED,KAAK,SAASzJ,GAAGO,EAAEmlB,OAAO1lB,KAAKuI,KAAKgM,MAAM6C,EAAE7O,KAAKge,MAAMjf,EAAEkP,UAAUlP,EAAE2U,kBAAkB3U,EAAE2U,iBAAiB,eAAe,WAAW1b,EAAEyoB,SAASzoB,EAAEyoB,OAAOhJ,QAAQpgB,KAAI,GAAI,IAAId,EAAEyB,EAAE,IAAIM,EAAEN,EAAE,IAAIP,EAAEpB,QAAQW,EAAE,IAAImK,EAAEvK,EAAE,MAAMyB,EAAE,OAAOC,EAAEtB,EAAET,GAAGS,EAAEmB,UAAUijB,gBAAe,EAAGpkB,EAAEmB,UAAUomB,QAAQ,WAAWve,KAAKygB,SAASzgB,KAAKygB,OAAOC,WAAWC,YAAY3gB,KAAKygB,QAAQzgB,KAAKygB,OAAO,MAAMzgB,KAAK4gB,OAAO5gB,KAAK4gB,KAAKF,WAAWC,YAAY3gB,KAAK4gB,MAAM5gB,KAAK4gB,KAAK,KAAK5gB,KAAK6gB,OAAO,MAAMtqB,EAAE4B,UAAUomB,QAAQ7nB,KAAKsJ,OAAOhJ,EAAEmB,UAAU+kB,OAAO,WAAW,IAAIzlB,EAAEuI,KAAKjB,EAAEkP,SAAS6S,cAAc,UAAU9gB,KAAKygB,SAASzgB,KAAKygB,OAAOC,WAAWC,YAAY3gB,KAAKygB,QAAQzgB,KAAKygB,OAAO,MAAM1hB,EAAE2d,OAAM,EAAG3d,EAAEgiB,IAAI/gB,KAAKuV,MAAMxW,EAAE0Y,QAAQ,SAAS1Y,GAAGtH,EAAEwjB,QAAQ,mBAAmBlc,IAAI,IAAI/G,EAAEiW,SAAS+S,qBAAqB,UAAU,GAAGhpB,EAAEA,EAAE0oB,WAAWO,aAAaliB,EAAE/G,IAAIiW,SAASiT,MAAMjT,SAASkT,MAAMC,YAAYriB,GAAGiB,KAAKygB,OAAO1hB,EAAQ,oBAAoBrC,WAAW,SAASkQ,KAAKlQ,UAAUC,YAAcwS,WAAW,WAAW,IAAI1X,EAAEwW,SAAS6S,cAAc,UAAU7S,SAASkT,KAAKC,YAAY3pB,GAAGwW,SAASkT,KAAKR,YAAYlpB,IAAI,MAAMT,EAAEmB,UAAU6kB,QAAQ,SAASvlB,EAAEsH,GAAG,SAAS/G,IAAIX,IAAI0H,IAAI,SAAS1H,IAAI,GAAGL,EAAE6pB,OAAO,IAAI7pB,EAAE4pB,KAAKD,YAAY3pB,EAAE6pB,QAAQ,MAAMppB,GAAGT,EAAEikB,QAAQ,qCAAqCxjB,GAAG,IAAI,IAAIsH,EAAE,oCAAoC/H,EAAEqqB,SAAS,KAAK9qB,EAAE0X,SAAS6S,cAAc/hB,GAAG,MAAMtH,IAAGlB,EAAE0X,SAAS6S,cAAc,WAAYhqB,KAAKE,EAAEqqB,SAAS9qB,EAAEwqB,IAAI,eAAexqB,EAAE+H,GAAGtH,EAAEqqB,SAASrqB,EAAE4pB,KAAKQ,YAAY7qB,GAAGS,EAAE6pB,OAAOtqB,EAAE,IAAIS,EAAEgJ,KAAK,IAAIA,KAAK4gB,KAAK,CAAC,IAAIrqB,EAAE+B,EAAE2V,SAAS6S,cAAc,QAAQ3f,EAAE8M,SAAS6S,cAAc,YAAY/f,EAAEf,KAAKqhB,SAAS,cAAcrhB,KAAKge,MAAM1lB,EAAEgpB,UAAU,WAAWhpB,EAAE6V,MAAMoT,SAAS,WAAWjpB,EAAE6V,MAAMqT,IAAI,UAAUlpB,EAAE6V,MAAMsT,KAAK,UAAUnpB,EAAEopB,OAAO3gB,EAAEzI,EAAEmkB,OAAO,OAAOnkB,EAAEqpB,aAAa,iBAAiB,SAASxgB,EAAErK,KAAK,IAAIwB,EAAE8oB,YAAYjgB,GAAG8M,SAASkT,KAAKC,YAAY9oB,GAAG0H,KAAK4gB,KAAKtoB,EAAE0H,KAAK4hB,KAAKzgB,EAAEnB,KAAK4gB,KAAKiB,OAAO7hB,KAAKuV,MAAMle,IAAII,EAAEA,EAAEuV,QAAQ3U,EAAE,QAAQ2H,KAAK4hB,KAAKpqB,MAAMC,EAAEuV,QAAQpW,EAAE,OAAO,IAAIoJ,KAAK4gB,KAAKkB,SAAS,MAAMpW,IAAI1L,KAAK6gB,OAAO1C,YAAYne,KAAK6gB,OAAOjD,mBAAmB,WAAW,aAAa5mB,EAAE6pB,OAAOvL,YAAYtd,KAAKgI,KAAK6gB,OAAOpM,OAAOzc,KAAKtB,KAAKqI,EAAE,WAAW,OAAOiB,KAAlB,KAA4B,SAASvI,EAAEsH,EAAE/G,IAAG,SAAU+G,GAAG,SAAS1H,EAAEI,GAASA,GAAGA,EAAEihB,cAAgB1Y,KAAKob,gBAAe,GAAIpb,KAAKsZ,kBAAkB7hB,EAAE6hB,kBAAkBtZ,KAAK+hB,sBAAsBrW,IAAIjU,EAAEqiB,UAAU9Z,KAAK6a,UAAUpjB,EAAEojB,UAAU7a,KAAK+hB,wBAAwBvrB,EAAEQ,GAAGT,EAAEG,KAAKsJ,KAAKvI,GAAG,IAAIT,EAAET,EAAEyB,EAAE,IAAIM,EAAEN,EAAE,IAAImJ,EAAEnJ,EAAE,IAAIpB,EAAEoB,EAAE,IAAIK,EAAEL,EAAE,IAAI+I,EAAE/I,EAAE,EAAFA,CAAK,8BAA8B0T,EAAE3M,EAAEijB,WAAWjjB,EAAEkjB,aAAa,GAAG,oBAAoBxlB,OAAO,IAAIzF,EAAEgB,EAAE,IAAI,MAAM4T,IAAI,IAAIpV,EAAEkV,EAAElV,GAAG,oBAAoBiG,SAASjG,EAAEQ,GAAGS,EAAEpB,QAAQgB,EAAET,EAAES,EAAEd,GAAGc,EAAEc,UAAUrB,KAAK,YAAYO,EAAEc,UAAUijB,gBAAe,EAAG/jB,EAAEc,UAAUimB,OAAO,WAAW,GAAGpe,KAAKkiB,QAAQ,CAAC,IAAIzqB,EAAEuI,KAAKuV,MAAMxW,EAAEiB,KAAK6a,UAAU7iB,GAAGqgB,MAAMrY,KAAKqY,MAAMiB,kBAAkBtZ,KAAKsZ,mBAAmBthB,EAAEwhB,IAAIxZ,KAAKwZ,IAAIxhB,EAAEF,IAAIkI,KAAKlI,IAAIE,EAAEyhB,WAAWzZ,KAAKyZ,WAAWzhB,EAAE0hB,KAAK1Z,KAAK0Z,KAAK1hB,EAAE2hB,GAAG3Z,KAAK2Z,GAAG3hB,EAAE4hB,QAAQ5Z,KAAK4Z,QAAQ5hB,EAAE6hB,mBAAmB7Z,KAAK6Z,mBAAmB7Z,KAAKga,eAAehiB,EAAEmqB,QAAQniB,KAAKga,cAAcha,KAAKia,eAAejiB,EAAEiiB,aAAaja,KAAKia,cAAc,IAAIja,KAAKoiB,GAAGpiB,KAAK+hB,sBAAsBhjB,EAAE,IAAIvI,EAAEiB,EAAEsH,GAAG,IAAIvI,EAAEiB,GAAG,IAAIjB,EAAEiB,EAAEsH,EAAE/G,GAAG,MAAMX,GAAG,OAAO2I,KAAKoQ,KAAK,QAAQ/Y,QAAG,IAAS2I,KAAKoiB,GAAGhJ,aAAapZ,KAAKob,gBAAe,GAAIpb,KAAKoiB,GAAGC,UAAUriB,KAAKoiB,GAAGC,SAASC,QAAQtiB,KAAKob,gBAAe,EAAGpb,KAAKoiB,GAAGhJ,WAAW,cAAcpZ,KAAKoiB,GAAGhJ,WAAW,cAAcpZ,KAAKuiB,sBAAsBlrB,EAAEc,UAAUoqB,kBAAkB,WAAW,IAAI9qB,EAAEuI,KAAKA,KAAKoiB,GAAGlL,OAAO,WAAWzf,EAAE+jB,UAAUxb,KAAKoiB,GAAGpK,QAAQ,WAAWvgB,EAAEyjB,WAAWlb,KAAKoiB,GAAGI,UAAU,SAASzjB,GAAGtH,EAAE0lB,OAAOpe,EAAEoT,OAAOnS,KAAKoiB,GAAG3K,QAAQ,SAAS1Y,GAAGtH,EAAEwjB,QAAQ,kBAAkBlc,KAAK1H,EAAEc,UAAUuf,MAAM,SAASjgB,GAAwF,IAAIJ,EAAE2I,KAAKA,KAAK+b,UAAS,EAAG,IAAI,IAAI/kB,EAAES,EAAEyC,OAAO3D,EAAE,EAAE4K,EAAEnK,EAAET,EAAE4K,EAAE5K,KAAK,SAASkB,GAAGa,EAAE0mB,aAAavnB,EAAEJ,EAAE+jB,eAAe,SAAS7kB,GAAG,IAAIc,EAAE0qB,sBAAsB,CAAC,IAAIzpB,KAAK,GAAGb,EAAEkgB,UAAUrf,EAAE0jB,SAASvkB,EAAEkgB,QAAQqE,UAAU3kB,EAAEiiB,mBAAyB,iBAAiB/iB,EAAEwI,EAAEkV,OAAO6K,WAAWvoB,GAAGA,EAAE2D,QAAS7C,EAAEiiB,kBAAkBC,YAAYjhB,EAAE0jB,UAAS,GAAK,IAAI3kB,EAAE0qB,sBAAsB1qB,EAAE+qB,GAAGxZ,KAAKrS,GAAGc,EAAE+qB,GAAGxZ,KAAKrS,EAAE+B,GAAG,MAAM1B,GAAGmK,EAAE,2CAA2C/J,IAApgBK,EAAE+Y,KAAK,SAASjB,WAAW,WAAW9X,EAAE0kB,UAAS,EAAG1kB,EAAE+Y,KAAK,UAAU,MAAmE,CAAsY3Y,EAAElB,KAAKc,EAAEc,UAAU+iB,QAAQ,WAAW3kB,EAAE4B,UAAU+iB,QAAQxkB,KAAKsJ,OAAO3I,EAAEc,UAAUomB,QAAQ,gBAAW,IAAoBve,KAAKoiB,IAAIpiB,KAAKoiB,GAAGhL,SAAS/f,EAAEc,UAAUod,IAAI,WAAW,IAAI9d,EAAEuI,KAAKgM,UAAUjN,EAAEiB,KAAKoY,OAAO,MAAM,KAAKpgB,EAAE,GAAoQ,OAAjQgI,KAAKsC,OAAO,QAAQvD,GAAG,MAAMsT,OAAOrS,KAAKsC,OAAO,OAAOvD,GAAG,KAAKsT,OAAOrS,KAAKsC,SAAStK,EAAE,IAAIgI,KAAKsC,MAAMtC,KAAK6Y,oBAAoBphB,EAAEuI,KAAK4Y,gBAAgBvgB,KAAK2H,KAAKob,iBAAiB3jB,EAAEgnB,IAAI,IAAGhnB,EAAE0J,EAAE6R,OAAOvb,IAAKyC,SAASzC,EAAE,IAAIA,GAAgDsH,EAAE,QAAX,IAA9BiB,KAAKmY,SAAStL,QAAQ,KAA4B,IAAI7M,KAAKmY,SAAS,IAAInY,KAAKmY,UAAUngB,EAAEgI,KAAK2L,KAAKlU,GAAGJ,EAAEc,UAAU+pB,MAAM,WAAW,SAAS1rB,GAAG,iBAAiBA,GAAGwJ,KAAKlJ,OAAOO,EAAEc,UAAUrB,SAASJ,KAAKqI,EAAE,WAAW,OAAOiB,KAAlB,KAA4B,SAASvI,EAAEsH,KAAK,SAAStH,EAAEsH,GAAG,IAAI/G,KAAK6U,QAAQpV,EAAEpB,QAAQ,SAASoB,EAAEsH,GAAG,GAAG/G,EAAE,OAAOP,EAAEoV,QAAQ9N,GAAG,IAAI,IAAI1H,EAAE,EAAEA,EAAEI,EAAEyC,SAAS7C,EAAE,GAAGI,EAAEJ,KAAK0H,EAAE,OAAO1H,EAAE,OAAO,IAAI,SAASI,EAAEsH,IAAG,SAAUA,GAAG,IAAI/G,EAAE,gBAAgBX,EAAE,sCAAsCL,EAAE,mEAAmET,EAAE,uBAAuB+B,EAAE,OAAO6I,EAAE,OAAO1J,EAAEpB,QAAQ,SAASoB,GAAG,MAAM,iBAAiBA,GAAGA,GAAGA,EAAEA,EAAEuV,QAAQ1U,EAAE,IAAI0U,QAAQ7L,EAAE,IAAIpC,EAAE+P,MAAMA,KAAKyD,MAAMzD,KAAKyD,MAAM9a,GAAGO,EAAE4U,KAAKnV,EAAEuV,QAAQ3V,EAAE,KAAK2V,QAAQhW,EAAE,KAAKgW,QAAQzW,EAAE,KAAK,IAAI0J,SAAS,UAAUxI,EAAvB,QAA4B,GAAQ,QAAQf,KAAKqI,EAAE,WAAW,OAAOiB,KAAlB,KAA4B,SAASvI,EAAEsH,EAAE/G,GAAG,aAAa,SAASX,EAAEI,EAAEsH,EAAE/G,GAAGgI,KAAKyiB,GAAGhrB,EAAEuI,KAAKkS,IAAInT,EAAEiB,KAAK0iB,KAAK1iB,KAAKA,KAAK2iB,IAAI,EAAE3iB,KAAK4iB,QAAQ5iB,KAAK6iB,iBAAiB7iB,KAAK8iB,cAAc9iB,KAAK+iB,WAAU,EAAG/iB,KAAKgjB,cAAa,EAAGhrB,GAAGA,EAAEgU,QAAQhM,KAAKgM,MAAMhU,EAAEgU,OAAOhM,KAAKyiB,GAAG3M,aAAa9V,KAAK+V,OAAO,IAAI/e,EAAE,mBAAmBM,QAAQ,UAAA8T,EAAiB9T,OAAO4U,UAAS,SAASzU,GAAG,OAAA2T,EAAc3T,IAAG,SAASA,GAAG,OAAOA,GAAG,mBAAmBH,QAAQG,EAAE0U,cAAc7U,QAAQG,IAAIH,OAAOa,UAAU,SAA3EiT,EAA2F3T,IAAGlB,EAAEyB,EAAE,GAAGM,EAAEN,EAAE,GAAGmJ,EAAEnJ,EAAE,IAAIpB,EAAEoB,EAAE,IAAIK,EAAEL,EAAE,IAAI+I,EAAE/I,EAAE,EAAFA,CAAK,2BAA2B0T,EAAE1T,EAAE,IAAIP,EAAEpB,QAAUgB,EAAE,IAAIuU,GAAGU,QAAQ,EAAE2W,cAAc,EAAEC,gBAAgB,EAAE1N,WAAW,EAAEsC,WAAW,EAAExc,MAAM,EAAE0b,UAAU,EAAEmM,kBAAkB,EAAEC,iBAAiB,EAAEC,gBAAgB,EAAEvM,aAAa,EAAE+E,KAAK,EAAEqD,KAAK,GAAG1oB,EAAE8B,EAAEH,UAAUiY,KAAK9X,EAAEjB,EAAEc,WAAWd,EAAEc,UAAUmrB,UAAU,WAAW,IAAItjB,KAAK2U,KAAK,CAAC,IAAIld,EAAEuI,KAAKyiB,GAAGziB,KAAK2U,MAAM/d,EAAEa,EAAE,OAAOY,EAAE2H,KAAK,WAAWpJ,EAAEa,EAAE,SAASY,EAAE2H,KAAK,aAAapJ,EAAEa,EAAE,QAAQY,EAAE2H,KAAK,eAAe3I,EAAEc,UAAU4d,KAAK1e,EAAEc,UAAUmU,QAAQ,WAAW,OAAOtM,KAAK+iB,UAAU/iB,MAAMA,KAAKsjB,YAAYtjB,KAAKyiB,GAAG1M,OAAO,SAAS/V,KAAKyiB,GAAGnN,YAAYtV,KAAKkX,SAASlX,KAAKoQ,KAAK,cAAcpQ,OAAO3I,EAAEc,UAAUyQ,KAAK,WAAW,IAAInR,EAAE0J,EAAElH,WAAW,OAAOxC,EAAEwZ,QAAQ,WAAWjR,KAAKoQ,KAAKtX,MAAMkH,KAAKvI,GAAGuI,MAAM3I,EAAEc,UAAUiY,KAAK,SAAS3Y,GAAG,GAAGmU,EAAExT,eAAeX,GAAG,OAAOjB,EAAEsC,MAAMkH,KAAK/F,WAAW+F,KAAK,IAAIjB,EAAEoC,EAAElH,WAAWjC,GAAGuK,KAAKhM,EAAEqc,MAAMT,KAAKpT,EAAU/G,YAAP,OAAoBA,EAAE2f,QAAQqE,UAAUhc,KAAKujB,QAAO,IAAKvjB,KAAKujB,MAAMvH,SAAS,mBAAmBjd,EAAEA,EAAE7E,OAAO,KAAK6G,EAAE,iCAAiCf,KAAK2iB,KAAK3iB,KAAK4iB,KAAK5iB,KAAK2iB,KAAK5jB,EAAEykB,MAAMxrB,EAAEsG,GAAG0B,KAAK2iB,OAAO3iB,KAAK+iB,UAAU/iB,KAAKmT,OAAOnb,GAAGgI,KAAK8iB,WAAW5hB,KAAKlJ,UAAUgI,KAAKujB,MAAMvjB,MAAM3I,EAAEc,UAAUgb,OAAO,SAAS1b,GAAGA,EAAEya,IAAIlS,KAAKkS,IAAIlS,KAAKyiB,GAAGtP,OAAO1b,IAAIJ,EAAEc,UAAU+e,OAAO,WAAW,GAAGnW,EAAE,kCAAkC,MAAMf,KAAKkS,IAAI,GAAGlS,KAAKgM,MAAM,CAAC,IAAIvU,EAAE,WAAWT,EAAEgJ,KAAKgM,OAAON,EAAEsH,OAAOhT,KAAKgM,OAAOhM,KAAKgM,MAAMjL,EAAE,uCAAuCtJ,GAAGuI,KAAKmT,QAAQ5Q,KAAKhM,EAAEmc,QAAQ1G,MAAMvU,SAASuI,KAAKmT,QAAQ5Q,KAAKhM,EAAEmc,WAAWrb,EAAEc,UAAU6f,QAAQ,SAASvgB,GAAGsJ,EAAE,aAAatJ,GAAGuI,KAAK+iB,WAAU,EAAG/iB,KAAKgjB,cAAa,SAAUhjB,KAAK1B,GAAG0B,KAAKoQ,KAAK,aAAa3Y,IAAIJ,EAAEc,UAAUsrB,SAAS,SAAShsB,GAAG,GAAGA,EAAEya,MAAMlS,KAAKkS,IAAI,OAAOza,EAAE8K,MAAM,KAAKhM,EAAEmc,QAAQ1S,KAAK0jB,YAAY,MAAM,KAAKntB,EAAEqc,MAA4B,KAAKrc,EAAEwb,aAAa/R,KAAK2jB,QAAQlsB,GAAG,MAAM,KAAKlB,EAAEsc,IAAwB,KAAKtc,EAAEyb,WAAWhS,KAAK4jB,MAAMnsB,GAAG,MAAM,KAAKlB,EAAEoc,WAAW3S,KAAK6jB,eAAe,MAAM,KAAKttB,EAAE6C,MAAM4G,KAAKoQ,KAAK,QAAQ3Y,EAAE0a,QAAQ9a,EAAEc,UAAUwrB,QAAQ,SAASlsB,GAAG,IAAIsH,EAAEtH,EAAE0a,SAASpR,EAAE,oBAAoBhC,GAAG,MAAMtH,EAAE6G,KAAKyC,EAAE,mCAAmChC,EAAEmC,KAAKlB,KAAK8jB,IAAIrsB,EAAE6G,MAAM0B,KAAK+iB,UAAUvsB,EAAEsC,MAAMkH,KAAKjB,GAAGiB,KAAK6iB,cAAc3hB,KAAKnC,IAAI1H,EAAEc,UAAU2rB,IAAI,SAASrsB,GAAG,IAAIsH,EAAEiB,KAAKhI,GAAE,EAAG,OAAO,WAAW,IAAIA,EAAE,CAACA,GAAE,EAAG,IAAIX,EAAE8J,EAAElH,WAAW8G,EAAE,iBAAiB1J,GAAG0H,EAAEoU,QAAQ5Q,KAAKhM,EAAEsc,IAAIvU,GAAG7G,EAAE0a,KAAK9a,OAAOA,EAAEc,UAAUyrB,MAAM,SAASnsB,GAAG,IAAIsH,EAAEiB,KAAK4iB,KAAKnrB,EAAE6G,IAAI,mBAAmBS,GAAGgC,EAAE,yBAAyBtJ,EAAE6G,GAAG7G,EAAE0a,MAAMpT,EAAEjG,MAAMkH,KAAKvI,EAAE0a,aAAanS,KAAK4iB,KAAKnrB,EAAE6G,KAAKyC,EAAE,aAAatJ,EAAE6G,KAAKjH,EAAEc,UAAUurB,UAAU,WAAW1jB,KAAK+iB,WAAU,EAAG/iB,KAAKgjB,cAAa,EAAGhjB,KAAKoQ,KAAK,WAAWpQ,KAAK+jB,gBAAgB1sB,EAAEc,UAAU4rB,aAAa,WAAW,IAAItsB,EAAE,IAAIA,EAAE,EAAEA,EAAEuI,KAAK6iB,cAAc3oB,OAAOzC,IAAIjB,EAAEsC,MAAMkH,KAAKA,KAAK6iB,cAAcprB,IAAI,IAAIuI,KAAK6iB,iBAAiBprB,EAAE,EAAEA,EAAEuI,KAAK8iB,WAAW5oB,OAAOzC,IAAIuI,KAAKmT,OAAOnT,KAAK8iB,WAAWrrB,IAAIuI,KAAK8iB,eAAezrB,EAAEc,UAAU0rB,aAAa,WAAW9iB,EAAE,yBAAyBf,KAAKkS,KAAKlS,KAAKuT,UAAUvT,KAAKgY,QAAQ,yBAAyB3gB,EAAEc,UAAUob,QAAQ,WAAW,GAAGvT,KAAK2U,KAAK,CAAC,IAAI,IAAIld,EAAE,EAAEA,EAAEuI,KAAK2U,KAAKza,OAAOzC,IAAIuI,KAAK2U,KAAKld,GAAG8b,UAAUvT,KAAK2U,KAAK,KAAK3U,KAAKyiB,GAAGlP,QAAQvT,OAAO3I,EAAEc,UAAUif,MAAM/f,EAAEc,UAAU2f,WAAW,WAAW,OAAO9X,KAAK+iB,YAAYhiB,EAAE,6BAA6Bf,KAAKkS,KAAKlS,KAAKmT,QAAQ5Q,KAAKhM,EAAEoc,cAAc3S,KAAKuT,UAAUvT,KAAK+iB,WAAW/iB,KAAKgY,QAAQ,wBAAwBhY,MAAM3I,EAAEc,UAAU6jB,SAAS,SAASvkB,GAAG,OAAOuI,KAAKujB,MAAMvjB,KAAKujB,UAAUvjB,KAAKujB,MAAMvH,SAASvkB,EAAEuI,OAAO,SAASvI,EAAEsH,GAAsFtH,EAAEpB,QAArF,SAAWoB,EAAEsH,GAAmB,IAAhB,IAAI/G,KAAoBX,GAAf0H,EAAEA,GAAG,IAAe,EAAE1H,EAAEI,EAAEyC,OAAO7C,IAAIW,EAAEX,EAAE0H,GAAGtH,EAAEJ,GAAG,OAAOW,IAAe,SAASP,EAAEsH,GAAG,aAA4FtH,EAAEpB,QAAjF,SAAWoB,EAAEsH,EAAE/G,GAAG,OAAOP,EAAEqY,GAAG/Q,EAAE/G,IAAIub,QAAQ,WAAW9b,EAAEyY,eAAenR,EAAE/G,OAAkB,SAASP,EAAEsH,GAAG,IAAI/G,KAAKkI,MAAMzI,EAAEpB,QAAQ,SAASoB,EAAEsH,GAAG,GAAG,iBAAiBA,IAAIA,EAAEtH,EAAEsH,IAAI,mBAAmBA,EAAE,MAAM,IAAImQ,MAAM,8BAA8B,IAAI7X,EAAEW,EAAEtB,KAAKuD,UAAU,GAAG,OAAO,WAAW,OAAO8E,EAAEjG,MAAMrB,EAAEJ,EAAE0C,OAAO/B,EAAEtB,KAAKuD,gBAAgB,SAASxC,EAAEsH,GAAG,SAAS/G,EAAEP,GAAGA,EAAEA,MAAMuI,KAAKgkB,GAAGvsB,EAAEyd,KAAK,IAAIlV,KAAKmV,IAAI1d,EAAE0d,KAAK,IAAInV,KAAKikB,OAAOxsB,EAAEwsB,QAAQ,EAAEjkB,KAAKoV,OAAO3d,EAAE2d,OAAO,GAAG3d,EAAE2d,QAAQ,EAAE3d,EAAE2d,OAAO,EAAEpV,KAAK+W,SAAS,EAAEtf,EAAEpB,QAAQ2B,EAAEA,EAAEG,UAAU8f,SAAS,WAAW,IAAIxgB,EAAEuI,KAAKgkB,GAAG5f,KAAK8f,IAAIlkB,KAAKikB,OAAOjkB,KAAK+W,YAAY,GAAG/W,KAAKoV,OAAO,CAAC,IAAIrW,EAAEqF,KAAKD,SAASnM,EAAEoM,KAAKC,MAAMtF,EAAEiB,KAAKoV,OAAO3d,GAAGA,EAAE,IAAI,EAAE2M,KAAKC,MAAM,GAAGtF,IAAItH,EAAEO,EAAEP,EAAEO,EAAE,OAAO,EAAEoM,KAAK8Q,IAAIzd,EAAEuI,KAAKmV,MAAMnd,EAAEG,UAAU4f,MAAM,WAAW/X,KAAK+W,SAAS,GAAG/e,EAAEG,UAAUoe,OAAO,SAAS9e,GAAGuI,KAAKgkB,GAAGvsB,GAAGO,EAAEG,UAAUwe,OAAO,SAASlf,GAAGuI,KAAKmV,IAAI1d,GAAGO,EAAEG,UAAUse,UAAU,SAAShf,GAAGuI,KAAKoV,OAAO3d,6ECo1Fr+4B0sB,EAm/BAC,yPAh0HAA,EAAQA,OACNC,gBAAkB,SAAUC,GAC9B,IAAIC,KAoCJ,OAlCAD,EAAKE,cACLF,EAAKE,WAAWC,kBAKhBF,EAAK7Q,iBAAmB,SAAUgR,EAAWC,QACSrqB,IAA9CgqB,EAAKE,WAAWC,eAAeC,KAC/BJ,EAAKE,WAAWC,eAAeC,OAEnCJ,EAAKE,WAAWC,eAAeC,GAAWxjB,KAAKyjB,IAInDJ,EAAK1Q,oBAAsB,SAAU6Q,EAAWC,GAC5C,IAAI3G,GAEW,KADfA,EAAQsG,EAAKE,WAAWC,eAAeC,GAAW7X,QAAQ8X,KAEtDL,EAAKE,WAAWC,eAAeC,GAAW9W,OAAOoQ,EAAO,IAMhEuG,EAAKK,cAAgB,SAAUC,GAC3B,IAAIF,EAEJ,IAAKA,KADLR,EAAE5rB,OAAOmC,MAAM,UAAYmqB,EAAMtiB,MAChB+hB,EAAKE,WAAWC,eAAeI,EAAMtiB,MAC9C+hB,EAAKE,WAAWC,eAAeI,EAAMtiB,MAAMnK,eAAeusB,IAC1DL,EAAKE,WAAWC,eAAeI,EAAMtiB,MAAMoiB,GAAUE,IAK1DN,GAYXH,EAAMU,YAAc,SAAUR,GAC1B,IAAIC,KAKJ,OAFAA,EAAKhiB,KAAO+hB,EAAK/hB,KAEVgiB,GAYXH,EAAMW,UAAY,SAAUT,GACxB,IAAIC,EAAOH,EAAMU,YAAYR,GAM7B,OAHAC,EAAKxb,QAAUub,EAAKvb,QACpBwb,EAAKvV,QAAUsV,EAAKtV,QAEbuV,GAWXH,EAAMY,YAAc,SAAUV,GAC1B,IAAIC,EAAOH,EAAMU,YAAYR,GAQ7B,OALAC,EAAKvb,OAASsb,EAAKtb,OAEnBub,EAAKU,IAAMX,EAAKW,IAChBV,EAAKW,UAAYZ,EAAKY,UAEfX,GAUXH,EAAMe,eAAiB,SAAUb,GAG7B,OAFWF,EAAMU,YAAYR,KAM7BF,EAAQA,OAENgB,QAAU,SAAUd,GAOtB,IAAIC,GAEJA,YAEAA,kBACAA,QACAA,oBAAsBjqB,EAEtBiqB,MAAa,WACT3rB,QAAQC,IAAI,kBAGhB0rB,YAAmB,WACf3rB,QAAQC,IAAI,yBAGhB0rB,UAAiB,SAASvb,GACtBpQ,QAAQC,IAAI,qBAAsBmQ,IAGtCub,wBAA+B,SAASU,GACpCrsB,QAAQC,IAAI,4BAA6BosB,QACd3qB,IAAxBiqB,EAAKc,gBACJd,EAAKc,eAAeJ,IAG5BV,qBAA4B,SAASU,GACjCrsB,QAAQC,IAAI,qCAAsCosB,GAClDX,EAAKrnB,SAASgoB,IAGlBV,qBAA4B,SAAStnB,GACjCrE,QAAQC,IAAI,wCACZ0rB,EAAKc,eAAiBpoB,IAE1B,OAAOsnB,IAKPH,EAAQA,OAENkB,kBAAoB,SAAUhB,GAChC,IAAIC,KACAgB,EAA0BC,wBAE9BjB,EAAKkB,UACDC,eAIJnB,EAAKoB,KAAOC,WAAcC,sBAAwB,UAE1BvrB,IAApBgqB,EAAKoB,aACLnB,EAAKkB,SAASC,WAAapB,EAAKoB,iBAGjBprB,IAAfgqB,EAAKtmB,QACLsmB,EAAKtmB,OAAQ,QAGE1D,IAAfgqB,EAAK5mB,QACL4mB,EAAK5mB,OAAQ,GAGjB6mB,EAAKuB,kBACDnoB,WACIooB,oBAAuBzB,EAAK5mB,MAC5BsoB,oBAAuB1B,EAAKtmB,QAIpC,IAAIioB,EAAgB,SAAUjX,GAC1BmV,EAAE5rB,OAAO+C,MAAM,kBAAmB0T,IAGtCuV,EAAK2B,eAAiB,IAAIX,EAAwBhB,EAAKkB,SAAUlB,EAAKoB,KAEtE,IAiGIQ,EACAC,EAlGAC,EAAW,SAAUC,GACrB,IAAIjvB,EAAG8J,EAuBP,OAtBImjB,EAAK5mB,OAAS4mB,EAAKiC,aAGV,OADTplB,GADAmlB,EAAMA,EAAItZ,QAAQ,eAAgB,KAC1BpQ,MAAM,oBAEVuE,EAAImlB,EAAI1pB,MAAM,gBAEduE,GAAMA,EAAEjH,OAAS,IACjB7C,EAAI8J,EAAE,GAAK,QAAUmjB,EAAKiC,WAAa,OACvCD,EAAMA,EAAItZ,QAAQ7L,EAAE,GAAI9J,KAI5BitB,EAAKtmB,OAASsmB,EAAKkC,aAEV,OADTrlB,EAAImlB,EAAI1pB,MAAM,oBAEVuE,EAAImlB,EAAI1pB,MAAM,gBAEduE,GAAMA,EAAEjH,OAAS,IACjB7C,EAAI8J,EAAE,GAAK,QAAUmjB,EAAKkC,WAAa,OACvCF,EAAMA,EAAItZ,QAAQ7L,EAAE,GAAI9J,KAGzBivB,GAiBX/B,EAAKnN,MAAQ,WACTmN,EAAKkC,MAAQ,SACblC,EAAK2B,eAAe9O,SAGxBkN,EAAKoC,mBAELnC,EAAK2B,eAAeS,eAAiB,SAAU9B,GAC3C,IAAI+B,KACC/B,EAAM5d,WASF4d,EAAM5d,UAAUA,UAAUrK,MAAM,QACjCioB,EAAM5d,UAAUA,UAAY,KAAO4d,EAAM5d,UAAUA,WAGvD2f,GACIC,cAAehC,EAAM5d,UAAU4f,cAC/BC,OAAQjC,EAAM5d,UAAU6f,OACxB7f,UAAW4d,EAAM5d,UAAUA,aAf/Bkd,EAAE5rB,OAAOyC,KAAK,kDACd4rB,GACIC,eAAgB,EAChBC,OAAQ,MACR7f,UAAW,QAefqd,EAAKyC,qBACLzC,EAAKrnB,UAAUsF,KAAM,YAAa0E,UAAW2f,KAE7CtC,EAAKoC,gBAAgBxlB,KAAK0lB,GAC1BzC,EAAE5rB,OAAOyC,KAAK,sBAAuBspB,EAAKoC,gBAAgBxsB,OAAQ0sB,KAK1ErC,EAAK2B,eAAec,YAAc,SAAUhe,GACpCub,EAAKyC,aACLzC,EAAKyC,YAAYhe,IAIzBub,EAAK2B,eAAee,eAAiB,SAAUje,GACvCub,EAAK0C,gBACL1C,EAAK0C,eAAeje,IAI5Bub,EAAK2B,eAAegB,2BAA6B,SAAUC,GACnD5C,EAAK2C,4BACL3C,EAAK2C,2BAA2BC,EAAGzF,OAAO0F,qBAOlD,IAAIC,EAAe,SAAUC,GACzBA,EAAmBhB,IAAMD,EAASiB,EAAmBhB,KACrDgB,EAAmBhB,IA3ED,SAAUA,GAC5B,IAAIiB,EAEJ,GAAiB,QADjBA,EAAWjB,EAAI1pB,MAAM,4BACC,CAClB,IAAI4qB,EAAUD,EAAS,GAAK,aAAeA,EAAS,GAAK,WACzDjB,EAAMA,EAAItZ,QAAQua,EAAS,GAAIC,GAGnC,OAAOlB,EAmEkBmB,CAAgBH,EAAmBhB,KAC5DgB,EAAmBhB,IAAMgB,EAAmBhB,IAAItZ,QAAQ,gCACA,IACxDsX,EAAKrnB,UACDsF,KAAM+kB,EAAmB/kB,KACzB+jB,IAAKgB,EAAmBhB,MAE5BH,EAAYmB,GAIZI,EAAkB,SAAUJ,GAC5BA,EAAmBhB,IAAMD,EAASiB,EAAmBhB,KACrDhC,EAAKrnB,UACDsF,KAAM+kB,EAAmB/kB,KACzB+jB,IAAKgB,EAAmBhB,MAE5BH,EAAYmB,EACZ/C,EAAK2B,eAAeyB,oBAAoBL,IAmI5C,OAhIA/C,EAAKqD,WAAa,SAAU7qB,EAAQE,IAC5BF,EAAOwpB,YAAcxpB,EAAOypB,cACxBzpB,EAAOwpB,aACPpC,EAAE5rB,OAAOmC,MAAO,sBAAuBqC,EAAOwpB,WAC9B,SAAUjC,EAAKuD,iBAC3B9qB,EAAOwpB,WAAajC,EAAKuD,kBACzB9qB,EAAOwpB,WAAajC,EAAKuD,iBAE7BvD,EAAKiC,WAAaxpB,EAAOwpB,WACzBpC,EAAE5rB,OAAOmC,MAAO,SAAU4pB,EAAKiC,aAE/BxpB,EAAOypB,aACHzpB,EAAOypB,WAAalC,EAAKwD,kBACzB/qB,EAAOypB,WAAalC,EAAKwD,iBAE7BxD,EAAKkC,WAAazpB,EAAOypB,YAG7BL,EAAUG,IAAMD,EAASF,EAAUG,KAC/BvpB,EAAOgrB,KAAOhrB,EAAOypB,YACrBrC,EAAE5rB,OAAOmC,MAAO,kCAAmC4pB,EAAKiC,YACxDhC,EAAK2B,eAAeyB,oBAAoBxB,EAAW,WAC/CC,EAAWE,IAAMD,EAASD,EAAWE,KACrC/B,EAAK2B,eAAe8B,qBACpB,IAAIC,sBAAsB7B,GAAa,WACnC9B,EAAKyC,sBAAuB,EAC5BzC,EAAKrnB,UAAUsF,KAAK,eAAgB+jB,IAAKH,EAAUG,SAExD,SAAUhrB,GACT6oB,EAAE5rB,OAAO+C,MAAM,+BAAgCA,GAC/C2B,EAAS,aAIbknB,EAAE5rB,OAAOmC,MAAO,kDACe4pB,EAAKiC,WACpB,cAAejC,EAAKkC,YACpClC,EAAKrnB,UAAUsF,KAAK,eAAgB+jB,IAAKH,EAAUG,SAGvDvpB,EAAOmrB,iBAAsC5tB,IAAvByC,EAAOorB,oBACN7tB,IAAtByC,EAAOqrB,cACRjE,EAAE5rB,OAAOmC,MAAO,uBAAwBqC,EAAOmrB,YAC/C/D,EAAE5rB,OAAOmC,MAAO,4BAA6BqC,EAAOorB,eACpDhE,EAAE5rB,OAAOmC,MAAO,yBAA0BqC,EAAOqrB,YACjD9D,EAAKrnB,UAAUsF,KAAM,eAAgBxF,OAAOA,MAIpDwnB,EAAK8D,YAAc,SAAUC,IACL,IAAhBA,EACA/D,EAAK2B,eAAemC,YAAYhB,EAAcpB,EAAe1B,EAAKuB,kBAElEvB,EAAK2B,eAAemC,YAAYhB,EAAcpB,GAAgBsC,YAAY,KAKlFhE,EAAKiE,UAAY,SAAUxf,GACvBub,EAAK2B,eAAesC,UAAUxf,IAElCsb,EAAKmE,oBAELnE,EAAKyC,sBAAuB,EAE5BxC,EAAKmE,wBAA0B,SAAUzD,GAGrC,GAAiB,UAAbA,EAAI1iB,KACJ0iB,EAAIqB,IAAMD,EAASpB,EAAIqB,KACvB/B,EAAK2B,eAAe8B,qBAAqB,IAAIC,sBAAsBhD,GAAM,WACrEV,EAAK2B,eAAeyC,aAAajB,EAAiB,SAAUpsB,GACxD6oB,EAAE5rB,OAAO+C,MAAM,UAAWA,IAC3BipB,EAAKuB,kBACRxB,EAAKyC,sBAAuB,GAC7B,SAAUzrB,GACT6oB,EAAE5rB,OAAO+C,MAAM,mCAAoCA,UAIpD,GAAiB,WAAb2pB,EAAI1iB,KACX4hB,EAAE5rB,OAAOyC,KAAK,oCACdmpB,EAAE5rB,OAAOmC,MAAM,qBAAsBuqB,EAAIqB,KACzCnC,EAAE5rB,OAAOmC,MAAM,oBAAqByrB,EAAUG,KAE9CrB,EAAIqB,IAAMD,EAASpB,EAAIqB,KAEvBF,EAAanB,EACbV,EAAK2B,eAAeyB,oBAAoBxB,EAAW,WAC/C5B,EAAK2B,eAAe8B,qBACpB,IAAIC,sBAAsBhD,GAAM,WAI5B,IAHAX,EAAKyC,sBAAuB,EAC5B5C,EAAE5rB,OAAOyC,KAAK,2BAA4BspB,EAAKmE,iBAAiBvuB,OACpDoqB,EAAKmE,kBACVnE,EAAKmE,iBAAiBvuB,OAAS,GAElCqqB,EAAK2B,eAAe0C,gBAAgBtE,EAAKmE,iBAAiB5Q,SAG9D,IADAsM,EAAE5rB,OAAOyC,KAAK,4BAA6BspB,EAAKoC,gBAAgBxsB,QACzDoqB,EAAKoC,gBAAgBxsB,OAAS,GAEjCoqB,EAAKrnB,UAAUsF,KAAM,YAAa0E,UAAWqd,EAAKoC,gBAAgB7O,mBAK3E,GAAiB,cAAboN,EAAI1iB,KACX,IACI,IAAIN,GAEAA,EAD0B,WAA1BmJ,EAAO6Z,EAAIhe,WACLge,EAAIhe,UAEJ6H,KAAKyD,MAAM0S,EAAIhe,YAErBA,UAAYhF,EAAIgF,UAAU+F,QAAQ,MAAO,IAC7C/K,EAAI4kB,cAAgBxd,SAASpH,EAAI4kB,eACjC,IAAI5f,EAAY,IAAI4hB,gBAAgB5mB,GAChCqiB,EAAKyC,qBACLxC,EAAK2B,eAAe0C,gBAAgB3hB,GAEpCqd,EAAKmE,iBAAiBvnB,KAAK+F,GAEjC,MAAOlI,GACLolB,EAAE5rB,OAAO+C,MAAM,0BAA2B2pB,EAAIhe,aAKnDsd,IAKPH,EAAQA,OAEN0E,kBAAoB,SAAUxE,GAChC,IAAIC,KACAgB,EAA0BC,wBAE9BjB,EAAKkB,UACDC,eAGJnB,EAAKoB,KAAOC,WAAcC,sBAAwB,UAEvBvrB,IAAvBgqB,EAAKyE,eACLxE,EAAKkB,SAASC,WAAWxkB,MAAM8nB,IAAO1E,EAAKyE,iBAG1CzE,EAAK2E,gBAAkBD,KACxBzE,EAAKkB,SAASC,WAAWxkB,MAAMgoB,SAAY5E,EAAK2E,WAAWC,SAC3BC,WAAc7E,EAAK2E,WAAWG,SAC9BJ,IAAO1E,EAAK2E,WAAWD,YAGxC1uB,IAAfgqB,EAAKtmB,OAAuBsmB,EAAK+E,SACjC/E,EAAKtmB,OAAQ,SAGE1D,IAAfgqB,EAAK5mB,OAAuB4mB,EAAK+E,SACjC/E,EAAK5mB,OAAQ,GAGjB6mB,EAAKuB,kBACDnoB,WACIooB,oBAAuBzB,EAAK5mB,MAC5BsoB,oBAAuB1B,EAAKtmB,QAIpCumB,EAAK+E,cAAgB,IAErB/E,EAAK2B,eAAiB,IAAIX,EAAwBhB,EAAKkB,SAAUlB,EAAKoB,KAEtEpB,EAAK2B,eAAeS,eAAiB,SAAU9B,GAC3CV,EAAE5rB,OAAOmC,MAAM,mBAAoB4pB,EAAKiF,WACnC1E,EAAM5d,UAcPsd,EAAKiF,mBAAqB,GAX1BrF,EAAE5rB,OAAOmC,MAAM,UAAY6pB,EAAK2B,eAAeuD,wBAE7BnvB,IAAdiqB,EAAKmF,OACLnF,EAAKmF,KAAO,GAEhBnF,EAAKmF,KAAOnF,EAAKmF,KAAO,EACpBnF,EAAKmF,MAAQ,GAAKnF,EAAKoF,gBACvBpF,EAAKoF,eAAgB,EACrBpF,EAAKqF,sBAUjB,IAAIvD,EAAW,SAAUC,GACrB,IAAIjvB,EAAG8J,EAiBP,OAhBImjB,EAAKiC,aACLplB,EAAImlB,EAAI1pB,MAAM,mBACJuE,EAAEjH,OAAS,IACjB7C,EAAI8J,EAAE,GAAK,QAAUmjB,EAAKiC,WAAa,OACvCD,EAAMA,EAAItZ,QAAQ7L,EAAE,GAAI9J,IAI5BitB,EAAKkC,aACLrlB,EAAImlB,EAAI1pB,MAAM,mBACJuE,EAAEjH,OAAS,IACjB7C,EAAI8J,EAAE,GAAK,QAAUmjB,EAAKkC,WAAa,OACvCF,EAAMA,EAAItZ,QAAQ7L,EAAE,GAAI9J,IAIzBivB,GA6SX,OAtSA/B,EAAKmE,wBAA0B,SAAUmB,GAIrC1F,EAAE5rB,OAAOmC,MAAM,oBAAsB6pB,EAAKgF,WAC1C,IAAiCO,EAA7B7E,EAAMnW,KAAKyD,MAAMsX,GACrBtF,EAAKwF,gBAAkB9E,EAEJ,QAAfV,EAAKkC,MACmB,UAApBxB,EAAI+E,aAEJF,GACIxD,IAAKrB,EAAIqB,IACT/jB,KAAM,SAEVgiB,EAAK2B,eAAe8B,qBAAqB,IAAIC,sBAAsB6B,IAEnEvF,EAAKkC,MAAQ,iBAEblC,EAAKqF,oBAELrF,EAAKjpB,MAAM,mCAAqC2pB,EAAI+E,YACxC,aAAezF,EAAKkC,OAGd,eAAflC,EAAKkC,MACY,WAApBxB,EAAI+E,aASJF,GACIxD,IAAKrB,EAAIqB,IACT/jB,KAAM,UAEV4hB,EAAE5rB,OAAOmC,MAAM,oBAAqBovB,EAAGxD,KAEvCwD,EAAGxD,IAAMD,EAASyD,EAAGxD,KAErB/B,EAAK2B,eAAe8B,qBAAqB,IAAIC,sBAAsB6B,IACnEvF,EAAK0F,SACL1F,EAAKkC,MAAQ,eAEc,cAApBxB,EAAI+E,aACXF,GACIxD,IAAKrB,EAAIqB,IACT/jB,KAAM,aAEVgiB,EAAK2B,eAAe8B,qBAAqB,IAAIC,sBAAsB6B,KAGxC,UAApB7E,EAAI+E,YAEXzF,EAAKjpB,MAAM,mBAEXipB,EAAKjpB,MAAM,mCAAqC2pB,EAAI+E,YACxC,aAAezF,EAAKkC,OAGd,gBAAflC,EAAKkC,QACY,UAApBxB,EAAI+E,aAEJF,GACIxD,IAAKrB,EAAIqB,IACT/jB,KAAM,SAEVgiB,EAAK2B,eAAe8B,qBAAqB,IAAIC,sBAAsB6B,IAEnEvF,EAAKkC,MAAQ,iBAEblC,EAAKqF,oBAELrF,EAAKjpB,MAAM,mCAAqC2pB,EAAI+E,YACxC,aAAezF,EAAKkC,SAS5ClC,EAAKiE,UAAY,SAAUxf,GACvBub,EAAK2B,eAAesC,UAAUxf,GAC9Bub,EAAKqF,oBAOTrF,EAAK2F,aAAe,WAOhB3F,EAAKqF,oBAMTrF,EAAKnN,MAAQ,WACTmN,EAAKkC,MAAQ,SACblC,EAAK2B,eAAe9O,SAMxBmN,EAAKqF,iBAAmB,WACpBrF,EAAK4F,cAAe,EACpB5F,EAAK6F,QAAQ,WACT7F,EAAK8F,mBAQb9F,EAAK6F,QAAU,SAAUE,GAIrB7tB,OAAO0S,WAAWmb,EAAM,IAU5B/F,EAAK8F,cAAgB,WACjB,IAAIE,EACJ,GAAIhG,EAAK4F,aAAc,CACnB,GAAmB,QAAf5F,EAAKkC,OAAkC,gBAAflC,EAAKkC,MAI7BlC,EAAK2B,eAAemC,YAAY,SAAUf,GAOtC,GALAA,EAAmBhB,IAAMD,EAASiB,EAAmBhB,KACrDnC,EAAE5rB,OAAOmC,MAAM,UAAW4sB,EAAmBhB,KAE9BgB,EAAmBhB,MAEjB/B,EAAKiG,UAMlB,OAJAjG,EAAK2B,eAAeyB,oBAAoBL,GAExC/C,EAAKkC,MAAQ,uBACblC,EAAKqF,mBAGLzF,EAAE5rB,OAAOmC,MAAM,4BAGpB,KAAM6pB,EAAKuB,uBAGX,GAAmB,oBAAfvB,EAAKkC,MAA6B,CAEzC,GAAIlC,EAAKoF,cACL,OAKJpF,EAAKiG,UAAYjG,EAAK2B,eAAeuE,iBAAiBnE,IACtDnC,EAAE5rB,OAAOmC,MAAM,kBAAoB6pB,EAAKiG,WAExCjG,EAAK9lB,YAAY,QAAS8lB,EAAKiG,WAE/BjG,EAAKkC,MAAQ,kBAEV,GAAmB,mBAAflC,EAAKkC,MAEZlC,EAAK2B,eAAeyC,aAAa,SAAUrB,GAIvC,GAHA/C,EAAK2B,eAAeyB,oBAAoBL,GACxC/C,EAAKkC,MAAQ,kCAERlC,EAAKmG,WAKNnG,EAAKqF,uBALT,CACI,IAAIe,EAAM,IAAI9Z,KACdsT,EAAE5rB,OAAOmC,MAAMiwB,EAAIC,UAAY,+BAC/BrG,EAAKmG,YAAa,IAMvB,KAAMnG,EAAKuB,uBAEX,GAAmB,oCAAfvB,EAAKkC,MAA6C,CACzD,GAAIlC,EAAKoF,cACL,OAGJY,EAAQhG,EAAK2B,eAAeuE,iBAAiBnE,IAE7C/B,EAAK9lB,YAAY,SAAU8rB,GAC3BhG,EAAKkC,MAAQ,mBAEblC,EAAKjpB,MAAM,+BAAiCipB,EAAKkC,MAAQ,mBAE7DlC,EAAK4F,cAAe,IAO5B5F,EAAK0F,OAAS,WACV1F,EAAK9lB,YAAY,OAQrB8lB,EAAK9lB,YAAc,SAAUosB,EAAWvE,GACpC,IAAIwE,KACJA,EAAYd,YAAca,EAC1BC,EAAYxE,IAAMA,EACA,UAAduE,GACAC,EAAYC,iBAAmBxG,EAAKgF,UACpCuB,EAAYE,kBAAoBzG,EAAK0G,eACrCH,EAAYI,IAAO3G,EAAK4G,gBAAkB,EAE1CL,EAAYM,WAAahnB,KAAKC,MAAsB,UAAhBD,KAAKD,SAAuB,KAEhE2mB,EAAYC,iBAAmBxG,EAAKwF,gBAAgBgB,iBACpDD,EAAYE,kBAAoBzG,EAAKgF,UACrCuB,EAAYI,IAAM3G,EAAKwF,gBAAgBmB,KAE3C3G,EAAK8G,mBAAmBvc,KAAKC,UAAU+b,KAO3CvG,EAAKjpB,MAAQ,SAAUgwB,GACnB,KAAM,wBAA0BA,GAGpC/G,EAAKgF,UAAahF,EAAK+E,eAAiB,EACxC/E,EAAK4G,eAAiB,EACtB5G,EAAK4F,cAAe,EACpB5F,EAAKmG,YAAa,EAClBnG,EAAKoF,eAAgB,EACrBpF,EAAKiF,kBAAoB,EACzBjF,EAAK8G,mBAAqB/G,EAAKrnB,SAE/BsnB,EAAK2B,eAAehP,OAAS,WACrBqN,EAAKrN,QACLqN,EAAKrN,UAIbqN,EAAK2B,eAAec,YAAc,SAAUhe,GACpCub,EAAKyC,aACLzC,EAAKyC,YAAYhe,IAIzBub,EAAK2B,eAAee,eAAiB,SAAUje,GACvCub,EAAK0C,gBACL1C,EAAK0C,eAAeje,IAI5Bub,EAAK2B,eAAegB,2BAA6B,SAAUnoB,GACnDwlB,EAAK2C,4BACL3C,EAAK2C,2BAA2BnoB,EAAEwsB,cAAcnE,qBAMxD7C,EAAKyC,YAAc,KACnBzC,EAAK0C,eAAiB,KACtB1C,EAAKkC,MAAQ,MAEblC,EAAKqF,mBACErF,IAIPH,EAAQA,OAENoH,aAAe,SAAUlH,GAC3B,IAAIC,KACAgB,EAA0BkG,qBAC1BxD,EAAwByD,yBACxB7C,EAAkB8C,mBAEtBpH,EAAKkB,UACDC,oBAGoBprB,IAApBgqB,EAAKoB,aACLnB,EAAKkB,SAASC,WAAapB,EAAKoB,iBAGjBprB,IAAfgqB,EAAKtmB,QACLsmB,EAAKtmB,OAAQ,QAGE1D,IAAfgqB,EAAK5mB,QACL4mB,EAAK5mB,OAAQ,GAGjB6mB,EAAKuB,kBACD8F,oBAAqBtH,EAAKtmB,MAC1B6tB,oBAAqBvH,EAAK5mB,MAC1BouB,yBAAyB,EACzBvD,YAAa,GAGjB,IAAItC,EAAgB,SAAUjX,GAC1BmV,EAAE5rB,OAAO+C,MAAM,kBAAmB0T,IAElC+c,GAAe,EACnBxH,EAAK2B,eAAiB,IAAIX,EAAwBhB,EAAKkB,SAAUlB,EAAKoB,KACtErB,EAAKoC,mBAELnC,EAAK2B,eAAeS,eAAkB,SAAU9B,GAC5C,IAAI+B,KACC/B,EAAM5d,WAQP8kB,GAAe,EACVlH,EAAM5d,UAAUA,UAAUrK,MAAM,QACjCioB,EAAM5d,UAAUA,UAAW,KAAO4d,EAAM5d,UAAUA,WAEtD2f,EAAkB/B,EAAM5d,UACpBqd,EAAKyC,qBACLzC,EAAKrnB,UAAUsF,KAAK,YAAa0E,UAAW2f,KAE5CtC,EAAKoC,gBAAgBxlB,KAAK0lB,GAC1BzC,EAAE5rB,OAAOmC,MAAM,4BACC4pB,EAAKoC,gBAAgBxsB,OAAQoqB,EAAKoC,oBAjBtDvC,EAAE5rB,OAAOyC,KAAK,kDACd4rB,GACIC,eAAgB,EAChBC,OAAQ,MACR7f,UAAW,SAoBvBsd,EAAK2B,eAAec,YAAc,SAAUhe,GACpCub,EAAKyC,aACLzC,EAAKyC,YAAYhe,IAIzBub,EAAK2B,eAAee,eAAiB,SAAUje,GACvCub,EAAK0C,gBACL1C,EAAK0C,eAAeje,IAI5Bub,EAAK2B,eAAegB,2BAA6B,SAAUC,GACnD5C,EAAK2C,4BACL3C,EAAK2C,2BAA2BC,EAAGzF,OAAO0F,qBAIlD,IA4BIjB,EA5BAE,EAAW,SAAUC,GACrB,IAAIjvB,EAAG8J,EAwBP,OAvBImjB,EAAK5mB,OAAS4mB,EAAKiC,aAGV,OADTplB,GADAmlB,EAAMA,EAAItZ,QAAQ,eAAgB,KAC1BpQ,MAAM,oBAEVuE,EAAImlB,EAAI1pB,MAAM,gBAEduE,GAAMA,EAAEjH,OAAS,IACjB7C,EAAI8J,EAAE,GAAK,QAAUmjB,EAAKiC,WAAa,OACvCD,EAAMA,EAAItZ,QAAQ7L,EAAE,GAAI9J,KAI5BitB,EAAKtmB,OAASsmB,EAAKkC,aAEV,OADTrlB,EAAImlB,EAAI1pB,MAAM,oBAEVuE,EAAImlB,EAAI1pB,MAAM,gBAEduE,GAAMA,EAAEjH,OAAS,IACjB7C,EAAI8J,EAAE,GAAK,QAAUmjB,EAAKkC,WAAa,OACvCF,EAAMA,EAAItZ,QAAQ7L,EAAE,GAAI9J,KAIzBivB,GAKPe,EAAe,SAAUC,GACzBA,EAAmBhB,IAAMD,EAASiB,EAAmBhB,KACrDgB,EAAmBhB,IACfgB,EAAmBhB,IAAItZ,QAAQ,gCAAiC,IACpEsX,EAAKrnB,SAASqqB,GACdnB,EAAYmB,GAGZI,EAAkB,SAAUJ,GAC5BA,EAAmBhB,IAAMD,EAASiB,EAAmBhB,KACrDgB,EAAmBhB,IACfgB,EAAmBhB,IAAItZ,QAAQ,gCAAiC,IACpEsX,EAAKrnB,SAASqqB,GACdnB,EAAYmB,EACZ/C,EAAK2B,eAAeyB,oBAAoBxB,IAyI5C,OAtIA5B,EAAKqD,WAAa,SAAU7qB,IACpBA,EAAOwpB,YAAcxpB,EAAOypB,cACxBzpB,EAAOwpB,aACPpC,EAAE5rB,OAAOmC,MAAO,qBAAsBqC,EAAOwpB,WAC7B,QAASjC,EAAKuD,iBAC1B9qB,EAAOwpB,WAAajC,EAAKuD,kBACzB9qB,EAAOwpB,WAAajC,EAAKuD,iBAE7BvD,EAAKiC,WAAaxpB,EAAOwpB,WACzBpC,EAAE5rB,OAAOmC,MAAO,SAAU4pB,EAAKiC,aAE/BxpB,EAAOypB,aACHzpB,EAAOypB,WAAalC,EAAKwD,kBACzB/qB,EAAOypB,WAAalC,EAAKwD,iBAE7BxD,EAAKkC,WAAazpB,EAAOypB,YAG7BL,EAAUG,IAAMD,EAASF,EAAUG,KAC/BvpB,EAAOgrB,IACP5D,EAAE5rB,OAAO+C,MAAO,2EAGhB6oB,EAAE5rB,OAAOmC,MAAO,8CAA+C4pB,EAAKiC,WACpD,gBAAiBjC,EAAKkC,YACtClC,EAAKrnB,UAAUsF,KAAK,eAAgB+jB,IAAKH,EAAUG,SAGvDvpB,EAAOmrB,iBAAsC5tB,IAAvByC,EAAOorB,oBACN7tB,IAAtByC,EAAOqrB,cACRjE,EAAE5rB,OAAOmC,MAAO,uBAAwBqC,EAAOmrB,YAC/C/D,EAAE5rB,OAAOmC,MAAO,4BAA6BqC,EAAOorB,eACpDhE,EAAE5rB,OAAOmC,MAAO,yBAA0BqC,EAAOqrB,YACjD9D,EAAKrnB,UAAUsF,KAAM,eAAgBxF,OAAOA,MAIpDwnB,EAAK8D,YAAc,SAAUC,IACL,IAAhBA,EACA/D,EAAK2B,eAAemC,YAAYhB,EAAcpB,EAAe1B,EAAKuB,kBAElEvB,EAAK2B,eAAemC,YAAYhB,EAAcpB,GAAgBsC,YAAY,KAIlFhE,EAAKiE,UAAY,SAAUxf,GACvBub,EAAK2B,eAAesC,UAAUxf,IAElCsb,EAAKmE,oBACLnE,EAAKyC,sBAAuB,EAK5BxC,EAAKnN,MAAQ,WACTmN,EAAKkC,MAAQ,SACblC,EAAK2B,eAAe9O,SAGxBmN,EAAKmE,wBAA0B,SAAUzD,GAIrC,GAAiB,UAAbA,EAAI1iB,KACJ0iB,EAAIqB,IAAMD,EAASpB,EAAIqB,KACvB/B,EAAK2B,eAAe8B,qBAAqB,IAAIC,EAAsBhD,GAAM,WACrEV,EAAK2B,eAAeyC,aAAajB,EAAiB,SAASpsB,GAC3D6oB,EAAE5rB,OAAO+C,MAAM,QAASA,IACzBipB,EAAKuB,kBACJxB,EAAKyC,sBAAuB,GAC7B,SAASzrB,GACZ6oB,EAAE5rB,OAAO+C,MAAM,mCAAoCA,UAEhD,GAAiB,WAAb2pB,EAAI1iB,KAEX4hB,EAAE5rB,OAAOyC,KAAK,oCACdmpB,EAAE5rB,OAAOmC,MAAM,2BAA4ByrB,EAAUG,KACrDnC,EAAE5rB,OAAOmC,MAAM,4BAA6BuqB,EAAIqB,KAEhDrB,EAAIqB,IAAMD,EAASpB,EAAIqB,KAEvB/B,EAAK2B,eAAeyB,oBAAoBxB,EAAW,WAC/C5B,EAAK2B,eAAe8B,qBACpB,IAAIC,EAAsBhD,GAAM,WAG5B,IAFAX,EAAKyC,sBAAuB,EAC5B5C,EAAE5rB,OAAOyC,KAAK,uCACPspB,EAAKmE,iBAAiBvuB,OAAS,GAAK6xB,GACvC5H,EAAE5rB,OAAOyC,KAAK,oCAEdupB,EAAK2B,eAAe0C,gBAAgBtE,EAAKmE,iBAAiB5Q,SAE9D,KAAMyM,EAAKoC,gBAAgBxsB,OAAS,GAChCiqB,EAAE5rB,OAAOyC,KAAK,+BAEdspB,EAAKrnB,UAAUsF,KAAK,YAAa0E,UAAWqd,EAAKoC,gBAAgB7O,WAEtE,SAAUvc,GACT6oB,EAAE5rB,OAAO+C,MAAM,mCAAoCA,MAEzD,SAASA,GACP6oB,EAAE5rB,OAAO+C,MAAM,oCAAqCA,UAGrD,GAAiB,cAAb2pB,EAAI1iB,KAEX,IACI,IAAIN,GAEAA,EAD0B,WAA1BmJ,EAAO6Z,EAAIhe,WACLge,EAAIhe,UAEJ6H,KAAKyD,MAAM0S,EAAIhe,YAErBA,UAAYhF,EAAIgF,UAAU+F,QAAQ,iBAAkB,IACxD/K,EAAIgF,UAAYhF,EAAIgF,UAAU+F,QAAQ,SAAU,SAEhD/K,EAAI4kB,cAAgBxd,SAASpH,EAAI4kB,eACjC,IAAI5f,EAAY,IAAI4hB,EAAgB5mB,GAGpC,GAAIqiB,EAAKyC,sBAAwBgF,EAE7B,IADAxH,EAAK2B,eAAe0C,gBAAgB3hB,GAC7Bqd,EAAKmE,iBAAiBvuB,OAAS,GAClCiqB,EAAE5rB,OAAOyC,KAAK,oCAEdupB,EAAK2B,eAAe0C,gBAAgBtE,EAAKmE,iBAAiB5Q,cAG9DyM,EAAKmE,iBAAiBvnB,KAAK+F,GAEjC,MAAMlI,GACJolB,EAAE5rB,OAAO+C,MAAM,0BAA2B2pB,EAAIhe,UAAWlI,KAI9DwlB,IAIPH,EAAQA,OAEN4H,YAAc,SAAU1H,GAC1B,IAAIC,KACAgB,EAA0BC,wBAE9BjB,EAAKkB,UACDC,eAGJnB,EAAKoB,KAAOC,WAAcC,sBAAwB,UAEvBvrB,IAAvBgqB,EAAKyE,eACLxE,EAAKkB,SAASC,WAAWxkB,MAAM8nB,IAAO1E,EAAKyE,iBAG1CzE,EAAK2E,gBAAkBD,KACxBzE,EAAKkB,SAASC,WAAWxkB,MAAMgoB,SAAY5E,EAAK2E,WAAWC,SAC3BC,WAAc7E,EAAK2E,WAAWG,SAC9BJ,IAAO1E,EAAK2E,WAAWD,WAGxC1uB,IAAfgqB,EAAKtmB,QACLsmB,EAAKtmB,OAAQ,QAGE1D,IAAfgqB,EAAK5mB,QACL4mB,EAAK5mB,OAAQ,GAGjB6mB,EAAKuB,kBACD+F,oBAAuBvH,EAAK5mB,MAC5BkuB,oBAAuBtH,EAAKtmB,MAC5BuqB,YAAa,GAGjBhE,EAAK2B,eAAiB,IAAIX,EAAwBhB,EAAKkB,SAAUlB,EAAKoB,KAEtErB,EAAKyC,sBAAuB,EAE5B,IAAIV,EAAW,SAAUC,GACrB,IAAInlB,EAAG9J,EAuBP,OAtBIitB,EAAKiC,aAEI,OADTplB,EAAImlB,EAAI1pB,MAAM,oBAEduE,EAAImlB,EAAI1pB,MAAM,gBAEVuE,GAAMA,EAAEjH,OAAS,IACjB7C,EAAI8J,EAAE,GAAK,QAAUmjB,EAAKiC,WAAa,OACvCD,EAAMA,EAAItZ,QAAQ7L,EAAE,GAAI9J,KAI5BitB,EAAKkC,aAEI,OADTrlB,EAAImlB,EAAI1pB,MAAM,oBAEduE,EAAImlB,EAAI1pB,MAAM,gBAEVuE,GAAMA,EAAEjH,OAAS,IACjB7C,EAAI8J,EAAE,GAAK,QAAUmjB,EAAKkC,WAAa,OACvCF,EAAMA,EAAItZ,QAAQ7L,EAAE,GAAI9J,KAIzBivB,GAMX/B,EAAKnN,MAAQ,WACTmN,EAAKkC,MAAQ,SACblC,EAAK2B,eAAe9O,SAGxBkN,EAAKoC,mBAELnC,EAAK2B,eAAeS,eAAkB,SAAU9B,GACxCA,EAAM5d,WACD4d,EAAM5d,UAAUA,UAAUrK,MAAM,QACjCioB,EAAM5d,UAAUA,UAAW,KAAO4d,EAAM5d,UAAUA,WAIlDqd,EAAKyC,qBACLzC,EAAKrnB,UAAUsF,KAAK,YAAa0E,UAAW4d,EAAM5d,YAElDqd,EAAKoC,gBAAgBxlB,KAAK2jB,EAAM5d,YAQpCrO,QAAQC,IAAI,qBAAuB0rB,EAAK2B,eAAeuE,mBAI/DlG,EAAK2B,eAAec,YAAc,SAAUhe,GACpCub,EAAKyC,aACLzC,EAAKyC,YAAYhe,IAIzBub,EAAK2B,eAAee,eAAiB,SAAUje,GACvCub,EAAK0C,gBACL1C,EAAK0C,eAAeje,IAI5B,IAIImd,EAJAF,EAAgB,SAASjX,GAC7BpW,QAAQC,IAAI,kBAAmBmW,IAK3BqY,EAAe,SAAUC,GACzBA,EAAmBhB,IAAMD,EAASiB,EAAmBhB,KAGrD1tB,QAAQC,IAAI,wBAAyByuB,EAAmBhB,KACxDH,EAAYmB,EACZ/C,EAAK2B,eAAeyB,oBAAoBxB,EAAW,WACnDvtB,QAAQC,IAAI,sBAAuB0rB,EAAK2B,eAAeuE,kBACvDnG,EAAKrnB,SAASsnB,EAAK2B,eAAeuE,mBAC/BxE,IAIHyB,EAAkB,SAAUJ,GAC5BA,EAAmBhB,IAAMD,EAASiB,EAAmBhB,KAGrDhC,EAAKrnB,SAASqqB,GACdnB,EAAYmB,EACZ/C,EAAK2B,eAAeyB,oBAAoBL,IA4E5C,OAzEA/C,EAAK8D,YAAc,SAAUC,IACX,IAAdA,EACA/D,EAAK2B,eAAemC,YAAYhB,EAAcpB,EAAe1B,EAAKuB,kBAElEvB,EAAK2B,eAAemC,YAAYhB,EAAcpB,GAAgBsC,YAAY,KAI9EhE,EAAKiE,UAAY,SAAUxf,GACvBub,EAAK2B,eAAesC,UAAUxf,IAElCsb,EAAKmE,oBAGLlE,EAAKmE,wBAA0B,SAAUzD,GAGrC,GAFArsB,QAAQC,IAAI,4BAA6BosB,GAExB,UAAbA,EAAI1iB,KACJ0iB,EAAIqB,IAAMD,EAASpB,EAAIqB,KACvB/B,EAAK2B,eAAe8B,qBAAqB,IAAIC,sBAAsBhD,IACnEV,EAAK2B,eAAeyC,aAAajB,EAAiB,KAAMnD,EAAKuB,kBAC7DxB,EAAKyC,sBAAuB,OAEzB,GAAiB,WAAb9B,EAAI1iB,KAEX3J,QAAQC,IAAI,yBAA0BosB,EAAIqB,KAE1CrB,EAAIqB,IAAMD,EAASpB,EAAIqB,KAEvB/B,EAAK2B,eAAe8B,qBAAqB,IAAIC,sBAAsBhD,GAAM,WAGzE,IAFAX,EAAKyC,sBAAuB,EAC5BnuB,QAAQC,IAAI,2BAA4ByrB,EAAKmE,iBAAiBvuB,QACvDoqB,EAAKmE,iBAAiBvuB,OAAS,GAClCtB,QAAQC,IAAI,cAAeyrB,EAAKmE,iBAAiBnE,EAAKmE,iBAAiBvuB,OAAO,IAC9EqqB,EAAK2B,eAAe0C,gBAAgBtE,EAAKmE,iBAAiB5Q,QACtB,aACAoO,GAIxC,KAAM3B,EAAKoC,gBAAgBxsB,OAAS,GAChCoqB,EAAKrnB,UAAUsF,KAAK,YAAa0E,UAAWqd,EAAKoC,gBAAgB7O,WAGlE,WAAWjf,QAAQC,IAAI,2CAEvB,GAAiB,cAAbosB,EAAI1iB,KAAsB,CACrC3J,QAAQC,IAAI,0BACR,IACI,IAAIoJ,GAEAA,EAD0B,WAA1BmJ,EAAO6Z,EAAIhe,WACLge,EAAIhe,UAEJ6H,KAAKyD,MAAM0S,EAAIhe,YAIrBA,UAAYhF,EAAIgF,UAAU+F,QAAQ,MAAO,IAC7C/K,EAAI4kB,cAAgBxd,SAASpH,EAAI4kB,eACjC5kB,EAAI4kB,cAA+B,UAAf5kB,EAAI6kB,OAAqB,EAAI,EACjD,IAAI7f,EAAY,IAAI4hB,gBAAgB5mB,GACpCrJ,QAAQC,IAAI,mBAAoBoO,GAC5Bqd,EAAKyC,qBACLxC,EAAK2B,eAAe0C,gBAAgB3hB,EAAW,aAAcgf,GAE7D3B,EAAKmE,iBAAiBvnB,KAAK+F,GAEjC,MAAMlI,GACJolB,EAAE5rB,OAAO+C,MAAM,0BAA2B2pB,EAAIhe,cAKnDsd,IAIPH,EAAQA,OAENmF,UAAY,IAElBnF,EAAM6H,WAAa,SAAU3H,GACzB,IAAIC,KAMJ,GAJAD,EAAKiF,UAAanF,EAAMmF,WAAa,EAGrChF,EAAK/nB,QAAU4nB,EAAM7nB,aACA,SAAjBgoB,EAAK/nB,QACL2nB,EAAE5rB,OAAO4C,QAAQ,sEACjBopB,EAAOH,EAAMgB,QAAQd,QAClB,GAAqB,YAAjBC,EAAK/nB,QACZ2nB,EAAE5rB,OAAOmC,MAAM,iBACf6pB,EAAOH,EAAMoH,aAAalH,QACvB,GAAqB,WAAjBC,EAAK/nB,QACZ2nB,EAAE5rB,OAAOmC,MAAM,gBACf6pB,EAAOH,EAAM4H,YAAY1H,OACtB,IAAqB,kBAAjBC,EAAK/nB,QAKZ,MADA2nB,EAAE5rB,OAAO+C,MAAM,uCACT,6BAJN6oB,EAAE5rB,OAAOmC,MAAM,uBACf6pB,EAAOH,EAAMkB,kBAAkBhB,GAanC,OARKC,EAAKqD,aACNrD,EAAKqD,WAAa,SAASsE,EAASjvB,GAChCknB,EAAE5rB,OAAO+C,MAAM,wDACX2B,GACAA,EAAU,mBAIfsnB,GAGXH,EAAM7nB,WAAa,WACf,IAAIC,EAAU,OAkBd,YAhBoB,IAATlG,GAAwBA,EAAOD,QACtCmG,EAAU,OAC4C,OAAhDC,OAAOC,UAAUC,UAAUC,MAAM,WAEvCJ,EAAU,UAC4C,OAA/CC,OAAOC,UAAUC,UAAUC,MAAM,UACxCJ,EAAU,SAC4C,OAA/CC,OAAOC,UAAUC,UAAUC,MAAM,UACpCH,OAAOC,UAAUyvB,WAAWvvB,MAAM,wBAAwB,IAAM,KAChEJ,EAAU,iBAEwC,OAA/CC,OAAOC,UAAUC,UAAUC,MAAM,UACxCJ,EAAU,SACiD,OAApDC,OAAOC,UAAUC,UAAUC,MAAM,iBACxCJ,EAAU,UAEPA,GAIX4nB,EAAMtnB,aAAe,SAAUC,EAAQE,EAAU3B,GAO7C,GALAoB,UAAUwN,SAAaxN,UAAUQ,cACbR,UAAU0vB,oBACV1vB,UAAU2vB,iBACV3vB,UAAU4vB,eAE1BvvB,EAAOU,OAEP,GADA0mB,EAAE5rB,OAAOmC,MAAM,2BACXuD,IAAIC,UACRC,OAAOC,eAAeC,oBAAoB,SAAU,UAAW,SAASC,GACpE1F,QAAQC,IAAI,yBAA0ByF,GACtCpB,cACIQ,OACAC,WACIE,oBAAqBS,EACrBV,kBAAkB,aAGvBX,EAAU3B,UAsBjB,OAAQ8oB,EAAM7nB,cACV,IAAK,UACL4nB,EAAE5rB,OAAOmC,MAAM,6BACf,IAAI6xB,UAC2BjyB,IAA3ByC,EAAOW,MAAMC,WACb4uB,EAAU7uB,MAAQX,EAAOW,MACzB6uB,EAAU7uB,MAAMK,YAAc,UAE9BwuB,GACIvuB,MAAOjB,EAAOiB,MACdN,OAAQK,YAAa,WAGzBrB,UAAUY,cAAgBZ,UAAUY,aAAaJ,aACvCR,UAAUY,aAAaJ,aAAaqvB,GAAWhvB,KAAKN,GAEvD,MAAU3B,GAEjBoB,UAAUwN,SAASqiB,EAAWtvB,EAAU3B,GAE5C,MAEA,IAAK,gBACL6oB,EAAE5rB,OAAOmC,MAAM,4BAIf,IAAI6D,EAAc,mCACdxB,EAAOwB,cACP4lB,EAAE5rB,OAAOmC,MAAM,+BAAiCqC,EAAOwB,aACvDA,EAAcxB,EAAOwB,aAEzB4lB,EAAE5rB,OAAOmC,MAAM,yDACf,IACIyD,OAAOK,QAAQC,YAAYF,GAAcG,WAAW,GAAO,SAAUC,GACjE,IAAI6tB,KACJ,QAAiBlyB,IAAbqE,EAAJ,CAMA,IAAIC,EAAQD,EAASE,cACSvE,IAA3ByC,EAAOW,MAAMC,WACZ6uB,EAAU9uB,MAAQX,EAAOW,MACzB8uB,EAAU9uB,MAAMC,UAAUC,kBAAoB,UAC9C4uB,EAAU9uB,MAAMC,UAAUE,oBAAsBe,GAGhD4tB,GAAa9uB,OAAQC,WAAYC,kBAAmB,UACpBC,oBAAqBe,KAEzDlC,UAAUwN,SAASsiB,EAAWvvB,EAAU3B,OAhBxC,CACI6oB,EAAE5rB,OAAO+C,MAAM,2BAEfA,GADgBwD,KAAK,+BAgB/B,MAAMC,GACJolB,EAAE5rB,OAAOmC,MAAM,2CAGf,YADAY,GADgBwD,KAAK,sBAIzB,MAEA,QACAqlB,EAAE5rB,OAAO+C,MAAM,oDAInB,QAAsB,IAAXhF,GAA0BA,EAAOD,QACxC8tB,EAAE5rB,OAAO+C,MAAM,wDACZ,CACH,GAAIyB,EAAOW,OAAgC,YAAvB0mB,EAAM7nB,aAA4B,CAClD,QAA+BjC,IAA3ByC,EAAOW,MAAMC,UAAyB,CACtC,IAAI8uB,EAAW1vB,EAAOW,MAAMC,UAC5BZ,EAAOW,OACHgvB,OAAQxX,IAAKuX,EAASE,SAAUxX,IAAKsX,EAASG,UAC9CC,QAAS3X,IAAKuX,EAASK,UAAW3X,IAAKsX,EAASM,YAGxD,GAAIrwB,UAAUY,cAAgBZ,UAAUY,aAAaJ,aAIjD,YAHUR,UAAUY,aAAaJ,aAAaH,GAAQQ,KAAKN,GAEpD,MAAU3B,GAIzBoB,UAAUwN,SAASnN,EAAQE,EAAU3B,MAU7C8oB,EAAQA,OACN4I,OAAS,SAAU1I,GACrB,IACI2I,EADA1I,EAAOH,EAAMC,gBAAgBC,GAejC,GAZAC,EAAKvb,OAASsb,EAAKtb,OACnBub,EAAKyE,IAAM1E,EAAK0E,IAChBzE,EAAK2I,UAAY5I,EAAK4I,UACtB3I,EAAK4I,UAAO7yB,EACZiqB,EAAK6I,SAAU,EACf7I,EAAK9V,OAAQ,EACb8V,EAAK7mB,MAAQ4mB,EAAK5mB,MAClB6mB,EAAKvmB,MAAQsmB,EAAKtmB,MAClBumB,EAAK9mB,OAAS6mB,EAAK7mB,OACnB8mB,EAAK8I,UAAY/I,EAAK+I,UACtB9I,EAAKhmB,YAAc+lB,EAAK/lB,mBAEDjE,IAAnBiqB,EAAK8I,WACF9I,EAAK8I,qBAAqBlzB,OACC,IAA1BoqB,EAAK8I,UAAUnzB,QACnB,MAAMgV,MAAM,sBA0ThB,YAxTmB5U,IAAfgqB,EAAK7V,QAAsC,IAAf6V,EAAK7V,QACjC8V,EAAK9V,OAAQ,GAKjB8V,EAAK+I,MAAQ,WAST,OANI/I,EAAK9V,QAAU6V,EAAKiJ,SACf,QAGAjJ,EAAKiJ,UAMlBhJ,EAAKiJ,cAAgB,WACjB,OAAOlJ,EAAKmJ,YAIhBlJ,EAAKmJ,cAAgB,WACjBvJ,EAAE5rB,OAAO+C,MAAM,8EAGnBipB,EAAKoJ,sBAAwB,SAASC,GAClCtJ,EAAKmJ,WAAaG,GAItBrJ,EAAKsJ,SAAW,WACZ,OAAOvJ,EAAKtmB,OAIhBumB,EAAKuJ,SAAW,WACZ,OAAOxJ,EAAK5mB,OAIhB6mB,EAAKwJ,QAAU,WACX,OAAOzJ,EAAKnS,MAIhBoS,EAAKyJ,UAAY,WACb,OAAO1J,EAAK7mB,QAIhB8mB,EAAK0J,SAAW,WACZ9J,EAAE5rB,OAAO+C,MAAM,0EAKnBipB,EAAKnT,KAAO,WACZ,IAAI8c,EACJ,IACI,IAAK5J,EAAKtmB,OAASsmB,EAAK5mB,OAAS4mB,EAAK7mB,cAAwBnD,IAAbgqB,EAAK0E,IAAmB,CACzE7E,EAAE5rB,OAAOyC,KAAK,mCACd,IAAImzB,EAAW7J,EAAK5mB,OACF,IAAbywB,IAAqC,IAAhB7J,EAAK7mB,aACRnD,IAAnBiqB,EAAK8I,WAKkB,IAAhB/I,EAAK7mB,aAAgCnD,IAAb6zB,IAC/BA,GAAW,GALXA,GAAYxwB,WAAYgvB,SAAUpI,EAAK8I,UAAU,GACzBP,UAAWvI,EAAK8I,UAAU,GAC1BT,SAAUrI,EAAK8I,UAAU,GACzBN,UAAWxI,EAAK8I,UAAU,KAItD,IAAIe,GAAO1wB,MAAOywB,EACNnwB,MAAOsmB,EAAKtmB,MACZqwB,KAAM/J,EAAK+J,KACX5wB,OAAQ6mB,EAAK7mB,OACbc,YAAYgmB,EAAKhmB,aAC7B4lB,EAAE5rB,OAAOmC,MAAM0zB,GACfhK,EAAMtnB,aAAasxB,EAAK,SAAUplB,GAG9Bmb,EAAE5rB,OAAOyC,KAAK,2CACdupB,EAAKvb,OAASA,EAEdklB,EAAc9J,EAAMY,aAAaziB,KAAM,oBACvCgiB,EAAKK,cAAcsJ,IAEpB,SAAU5yB,GACT6oB,EAAE5rB,OAAO+C,MAAM,uDACCA,EAAMwD,KAAO,KAC7B,IAAIovB,EAAc9J,EAAMY,aAAaziB,KAAM,gBAAiB0iB,IAAI3pB,IAChEipB,EAAKK,cAAcsJ,UAGnBA,EAAc9J,EAAMY,aAAaziB,KAAM,oBACvCgiB,EAAKK,cAAcsJ,GAErB,MAAMnvB,GACJolB,EAAE5rB,OAAO+C,MAAM,kDAAoDyD,EAAI,KACvEmvB,EAAc9J,EAAMY,aAAaziB,KAAM,gBAAiB0iB,IAAKlmB,IAC7DwlB,EAAKK,cAAcsJ,KAK3B3J,EAAKnN,MAAQ,WACLmN,EAAK9V,aACanU,IAAdiqB,EAAK4I,MACL5I,EAAK4I,KAAKmB,UAAU/J,GAGxBA,EAAKgK,YACej0B,IAAhBiqB,EAAKvb,QACLub,EAAKvb,OAAOwlB,YAAYpuB,QAAQ,SAAU2J,GACtCA,EAAM0kB,SAIVlK,EAAKmK,QAAUnK,EAAKmK,OAAOC,YAAcpK,EAAKmK,OAAOC,WAAWF,MACpElK,EAAKmK,OAAOC,WAAWF,OAGvBlK,EAAKvb,YAAS1O,IAItBiqB,EAAKqK,KAAO,SAAUC,EAAWlX,GAG7B,IAAI+W,EAFJ/W,EAAUA,MACV4M,EAAKsK,UAAYA,EAEbtK,EAAKuJ,YAAc9tB,KAAKguB,iBAEN1zB,IAAdu0B,IACAH,EAAS,IAAItK,EAAM0K,aAAaxwB,GAAIimB,EAAK+I,QACLtkB,OAAQub,EACRsK,UAAWA,EACXlX,QAASA,IAC7C4M,EAAKmK,OAASA,EACdnK,EAAK6I,SAAU,GAEZ7I,EAAKsJ,WACZa,EAAS,IAAItK,EAAM2K,aAAazwB,GAAIimB,EAAK+I,QACLtkB,OAAQub,EACRsK,UAAWA,EACXlX,QAASA,IAC7C4M,EAAKmK,OAASA,EACdnK,EAAK6I,SAAU,IAIvB7I,EAAKyK,UAAY,SAASC,GACtB1K,EAAKuJ,YAAc9tB,KAAKguB,YACpBzJ,EAAKmK,OAAOhxB,MAAMsxB,WAClBzK,EAAKmK,OAAOhxB,MAAMsxB,UAAUC,GAG5B1K,EAAKmK,OAAO1wB,MAAMgxB,WAClBzK,EAAKmK,OAAO1wB,MAAMgxB,UAAUC,IAKpC1K,EAAKkK,KAAO,WACJlK,EAAK6I,cACe9yB,IAAhBiqB,EAAKmK,SACLnK,EAAKmK,OAAOnb,UACZgR,EAAK6I,SAAU,GAInB7I,EAAKmK,QAAUnK,EAAKmK,OAAOC,YAAcpK,EAAKmK,OAAOC,WAAWF,MACpElK,EAAKmK,OAAOC,WAAWF,QAI3BlK,EAAK2K,KAAO3K,EAAKqK,KACjBrK,EAAKgK,KAAOhK,EAAKkK,KAEjBxB,EAAW,WACP,QAAoB3yB,IAAhBiqB,EAAKmK,aAAwCp0B,IAAhBiqB,EAAKvb,OAAsB,CACxD,IAQImmB,EARAzxB,EAAQ6mB,EAAKmK,OAAOhxB,MAEpByQ,EAAQF,SAASmhB,YAAYC,iBAAiB3xB,GAC9CgvB,EAAQrjB,SAAS8E,EAAMmhB,iBAAiB,SAAU,IAClDzC,EAASxjB,SAAS8E,EAAMmhB,iBAAiB,UAAW,IACpD7N,EAAOpY,SAAS8E,EAAMmhB,iBAAiB,QAAS,IAChD9N,EAAMnY,SAAS8E,EAAMmhB,iBAAiB,OAAQ,IAK9CH,EAF0B,WAA1B/jB,EAAOmZ,EAAKsK,YACsB,mBAA/BtK,EAAKsK,UAAUzN,YACZmD,EAAKsK,UAGL5gB,SAASshB,eAAehL,EAAKsK,WAGvC,IAAIW,EAAWvhB,SAASmhB,YAAYC,iBAAiBF,GACjDM,EAAWpmB,SAASmmB,EAASF,iBAAiB,SAAU,IACxDI,EAAYrmB,SAASmmB,EAASF,iBAAiB,UAAW,IAE1DK,EAAS1hB,SAAS6S,cAAc,UAYpC,OATA6O,EAAOrxB,GAAK,UACZqxB,EAAOjD,MAAQ+C,EACfE,EAAO9C,OAAS6C,EAChBC,EAAOhO,aAAa,QAAS,iBAEnBgO,EAAOC,WAAW,MAEpBC,UAAUnyB,EAAO+jB,EAAMD,EAAKkL,EAAOG,GAEpC8C,EAEP,OAAO,MAIfpL,EAAKuL,iBAAmB,SAAUhvB,GAC9B,IAAI6uB,EAAS1C,IACb,OAAe,OAAX0C,EACI7uB,EACO6uB,EAAOI,UAAUjvB,GAEjB6uB,EAAOI,YAGX,MAIfxL,EAAKyL,cAAgB,WACjB,IAAIL,EAAS1C,IACb,OAAe,OAAX0C,EACOA,EAAOC,WAAW,MAAMK,aAAa,EAAG,EAAGN,EAAOjD,MAAOiD,EAAO9C,QAEhE,MAIftI,EAAK2L,aAAe,SAAUnzB,EAAQozB,IAEjB,IAAbA,GACIpzB,EAAOW,OAASX,EAAOiB,OAASjB,EAAOU,UACvC0mB,EAAE5rB,OAAO4C,QAAQ,sCACjB4B,EAAOW,WAAQpD,EACfyC,EAAOiB,WAAQ1D,EACfyC,EAAOU,YAASnD,IAGF,IAAfiqB,EAAK9V,SACiB,IAAjB1R,EAAOW,QAAsC,IAApB6mB,EAAKuJ,YAC9B3J,EAAE5rB,OAAO4C,QAAQ,kFAGA,IAAjB4B,EAAOiB,QAAsC,IAApBumB,EAAKsJ,aAC9B1J,EAAE5rB,OAAO4C,QAAQ,iFAEjB4B,EAAOiB,OAAQ,KAIT,IAAfumB,EAAK9V,QACC8V,EAAKuJ,aAAwC,IAAzB/wB,EAAOorB,gBAC5BhE,EAAE5rB,OAAO4C,QAAQ,+FAEjB4B,EAAOorB,eAAgB,KAKnC5D,EAAK6L,UAAY,SAAUC,EAASpzB,GAChC,GAAIsnB,EAAK4I,MAAQ5I,EAAK4I,KAAKmD,IAGvB,OAFAnM,EAAE5rB,OAAO4C,QAAQ,oDACjB8B,EAAU,SAGd,GAAIsnB,EAAK9V,MAGL,OAFA0V,EAAE5rB,OAAO4C,QAAQ,qDACjB8B,EAAS,SAGb,IAAIF,GAAUqrB,YAAcpqB,MAAQqyB,IACpC9L,EAAK2L,aAAanzB,GAAQ,GAC1BwnB,EAAKgM,GAAG3I,WAAW7qB,EAAQE,IAG/BsnB,EAAKiM,oBAAsB,SAAUzzB,EAAQE,GACzC,QAAe3C,IAAXyC,EAEJ,GAAIwnB,EAAKgM,GAEL,GADAhM,EAAK2L,aAAanzB,GAAQ,GACtBwnB,EAAK9V,MACL,GAAG8V,EAAK4I,KAAKmD,IACT,IAAK,IAAItS,KAASuG,EAAKgM,GACnBhM,EAAKgM,GAAGvS,GAAO4J,WAAW7qB,EAAQE,QAGtCsnB,EAAKgM,GAAG3I,WAAW7qB,EAAQE,QAI/BsnB,EAAKgM,GAAG3I,WAAW7qB,EAAQE,QAG/BA,EAAS,yDAIVsnB,IAePH,EAAQA,OAENqM,KAAO,SAAUnM,GACnB,IACIoM,EACAC,EACAC,EACAC,EACAC,EACA5G,EANA3F,EAAOH,EAAMC,gBAAgBC,GAu2BjC,OA51BAC,EAAKmB,WAAapB,EAAKoB,eACvBnB,EAAKwM,iBACLxM,EAAKyM,gBACLzM,EAAK0M,OAAS,GACd1M,EAAKtY,UACLsY,EAAKkC,MATc,EAUnBlC,EAAK+L,KAAM,EAEX/L,EAAK7Q,iBAAiB,oBAAqB,WACvC,IAAIsK,EAAOhV,EAAQkoB,EAInB,IAAKlT,KAHLuG,EAAKkC,MAdU,EAiBDlC,EAAKwM,cACXxM,EAAKwM,cAAc34B,eAAe4lB,KAClChV,EAASub,EAAKwM,cAAc/S,GAC5BkM,EAAalhB,UACNub,EAAKwM,cAAc/S,GACtBhV,IAAWA,EAAOmoB,SAClBD,EAAO9M,EAAMY,aAAaziB,KAAM,iBAAkByG,OAAQA,IAC1Dub,EAAKK,cAAcsM,KAO/B,IAAKlT,KAHLuG,EAAKwM,iBAGSxM,EAAKyM,aACf,GAAIzM,EAAKyM,aAAa54B,eAAe4lB,GAAQ,CAEzC,GADAhV,EAASub,EAAKyM,aAAahT,GACxBuG,EAAK+L,IACJ,IAAI,IAAI/5B,KAAKyS,EAAOunB,GAChBvnB,EAAOunB,GAAGh6B,GAAG6gB,aAGjBpO,EAAOunB,GAAGnZ,eAEPmN,EAAKyM,aAAahT,GAKjC,IACIuG,EAAKtY,OAAO6L,aACd,MAAOxc,GACL6oB,EAAE5rB,OAAOmC,MAAM,+BAEnB6pB,EAAKtY,YAAS3R,IAMlB4vB,EAAe,SAAUlhB,QACC1O,IAAlB0O,EAAOA,SAGPA,EAAOulB,OAGHvlB,EAAOunB,IAAIvnB,EAAOunB,GAAGnZ,QACrBpO,EAAOyF,OACPzF,EAAOA,OAAOylB,cAEXzlB,EAAOA,SAItB6nB,EAAiB,SAAU7nB,EAAQic,GAC3Bjc,EAAOyF,MACPkiB,EAAkB,kBAAmBryB,GAAI0K,EAAOskB,QAASrI,IAAKA,IAE9Dd,EAAE5rB,OAAO+C,MAAM,kDAIvBw1B,EAAmB,SAAS9nB,EAAQ4kB,GAC5B5kB,EAAOyF,OACPzF,EAAO2kB,sBAAsBC,GAC7B+C,EAAkB,0BAA2BryB,GAAI0K,EAAOskB,QAASM,MAAOA,KAExEzJ,EAAE5rB,OAAO+C,MAAM,qDAKvBo1B,EAAgB,SAAUU,EAAOn0B,EAAU3B,GAyBvCipB,EAAKtY,OAASolB,EAAAlwB,EAAGmL,QAAQ8kB,EAAM1kB,MAAOsK,WAAW,EACboB,OAAQgZ,EAAMhZ,OACdkZ,wBAAwB,EACxBxY,YAAa,eAIjDyL,EAAKtY,OAAO6D,GAAG,cAAe,SAAUzP,GACpC,IAOIkxB,EAPAvoB,EAASob,EAAM4I,QAAQO,SAAUltB,EAAI/B,GACbmQ,OAAO,EACPzQ,MAAOqC,EAAIrC,MACXN,MAAO2C,EAAI3C,MACXyU,KAAM9R,EAAI8R,KACV1U,OAAQ4C,EAAI5C,OACZgwB,WAAYptB,EAAIotB,aAE5ClJ,EAAKwM,cAAc1wB,EAAI/B,IAAM0K,EAC7BuoB,EAAMnN,EAAMY,aAAaziB,KAAM,eAAgByG,OAAQA,IACvDub,EAAKK,cAAc2M,KAGvBhN,EAAKtY,OAAO6D,GAAG,0BAA2B,SAAUzP,GAChD,IAAI2I,GAEAA,EADA3I,EAAImxB,OACKjN,EAAKwM,cAAc1wB,EAAImxB,QAEvBjN,EAAKyM,aAAa3wB,EAAIxB,aAGpBmK,EAAOmoB,QAClBnoB,EAAOunB,GAAG7H,wBAAwBroB,EAAIoxB,QAI9ClN,EAAKtY,OAAO6D,GAAG,yBAA0B,SAAUzP,GAE/C,IAAI2I,EAASub,EAAKyM,aAAa3wB,EAAIxB,UAE/BmK,IAAWA,EAAOmoB,OAClBnoB,EAAOunB,GAAGlwB,EAAIqxB,YAAYhJ,wBAAwBroB,EAAI4kB,OAEtDjc,EAASub,EAAKwM,cAAc1wB,EAAIxB,WAEpB0xB,IAlEC,SAAUvnB,EAAQ0oB,GAEnC1oB,EAAOunB,GAAKnM,EAAM6H,YAAYhvB,SAAU,SAAUgoB,GAC9C2L,EAAc,qBAAsB/xB,SAAUmK,EAAOskB,QACjBoE,WAAYA,EACZzM,IAAKA,KAE7CS,WAAYnB,EAAKmB,WACjBc,WAAYlC,EAAKkC,WACjBD,WAAYjC,EAAKiC,WACjBuB,gBAAgBxD,EAAKkC,WACrBqB,gBAAiBvD,EAAKiC,aAEtBvd,EAAOunB,GAAGvJ,YAAc,SAAUuK,GAE9BpN,EAAE5rB,OAAOyC,KAAK,qBACdgO,EAAOA,OAASuoB,EAAIvoB,OACpB,IAAIkoB,EAAO9M,EAAMY,aAAaziB,KAAM,oBAAqByG,OAAQA,IACjEub,EAAKK,cAAcsM,IAiDfS,CAAe3oB,EAAQ3I,EAAIqxB,YAE/B1oB,EAAOunB,GAAG7H,wBAAwBroB,EAAI4kB,QAI9CV,EAAKtY,OAAO6D,GAAG,aAAc,SAAUzP,GACnC,IAAIuxB,EAAWrN,EAAKyM,aAAa3wB,EAAIxB,eAEjBvE,IAAhBs3B,EAASrB,KACTqB,EAASrB,OAGbqB,EAASrB,GAAGlwB,EAAIqxB,YAActN,EAAM6H,YAAYhvB,SAAU,SAAUgoB,GAChE2L,EAAc,qBAAsB/xB,SAAUwB,EAAIxB,SACd6yB,WAAYrxB,EAAIqxB,WAAYzM,IAAKA,KACtEjnB,MAAO4zB,EAAS/D,WAAYnwB,MAAOk0B,EAAS9D,WAC/CpI,WAAYnB,EAAKmB,aAGjBkM,EAASrB,GAAGlwB,EAAIqxB,YAAYxK,2BAA6B,SAAUT,GACjD,WAAVA,IACAmL,EAASrB,GAAGlwB,EAAIqxB,YAAYta,eACrBwa,EAASrB,GAAGlwB,EAAIqxB,cAI/BE,EAASrB,GAAGlwB,EAAIqxB,YAAYlJ,UAAUoJ,EAAS5oB,QAC/C4oB,EAASrB,GAAGlwB,EAAIqxB,YAAYrJ,gBAGhC9D,EAAKtY,OAAO6D,GAAG,mBAAoB,SAAUzP,GAGzC,GAFA8jB,EAAE5rB,OAAOyC,KAAK,qBAAsBqF,EAAIktB,SAAU,UACtCltB,EAAI2O,QAAQ,MAAO3O,EAAI6kB,WAChC7kB,EAAIktB,SAAS,CACZ,IAAIvkB,EAASub,EAAKwM,cAAc1wB,EAAIktB,UACpC,GAAIvkB,IAAWA,EAAOmoB,OAAQ,CAC1B,IAAII,EAAMnN,EAAMY,aAAaziB,KAAK,kBACNyG,OAAOA,EACPic,IAAI5kB,EAAI2O,QACRkW,UAAW7kB,EAAI6kB,YAC3Clc,EAAO4b,cAAc2M,OAOjChN,EAAKtY,OAAO6D,GAAG,eAAgB,SAAUzP,GACrC,IAAI2I,EAASub,EAAKwM,cAAc1wB,EAAI/B,IAChCizB,EAAMnN,EAAMY,aAAaziB,KAAM,cAAe0iB,IAAK5kB,EAAI4kB,IAAKjc,OAAQA,IACxEA,EAAO4b,cAAc2M,KAIzBhN,EAAKtY,OAAO6D,GAAG,0BAA2B,SAAUzP,GAChD,IAAI2I,EAASub,EAAKwM,cAAc1wB,EAAI/B,IAChCizB,EAAMnN,EAAMY,aAAaziB,KAAM,2BACPqrB,MAAOvtB,EAAIutB,MACX5kB,OAAQA,IACpCA,EAAO2kB,sBAAsBttB,EAAIutB,OACjC5kB,EAAO4b,cAAc2M,KAIzBhN,EAAKtY,OAAO6D,GAAG,iBAAkB,SAAUzP,GACvC,IAAI2I,EAASub,EAAKyM,aAAa3wB,EAAI/B,IACnC,IAAI0K,GAAWA,EAAOmoB,OAgBtB,IAFAnoB,EAASub,EAAKwM,cAAc1wB,EAAI/B,MAElB0K,EAAOmoB,OACjBhN,EAAE5rB,OAAOmC,MAAM,yEACsB2F,EAAI/B,SAEvC,GAAK0K,GAMX,UADOub,EAAKwM,cAAc1wB,EAAI/B,IAC1B0K,EAAQ,CACRkhB,EAAalhB,GACb,IAAIuoB,EAAMnN,EAAMY,aAAaziB,KAAM,iBAAkByG,OAAQA,IAC7Dub,EAAKK,cAAc2M,SARnBpN,EAAE5rB,OAAOmC,MAAM,8BAA+B2F,EAAI/B,GAClC,sDAtBpB,CACI0K,EAAOmoB,QAAS,EAChBhN,EAAE5rB,OAAO4C,QAAQ,gFAGjBopB,EAAK+J,UAAUtlB,GAEf,IAAI6oB,EAAgBzN,EAAMY,aAAaziB,KAAM,gBACrC0iB,IAAI,2DACJjc,OAAQA,IAChBub,EAAKK,cAAciN,MAwB3BtN,EAAKtY,OAAO6D,GAAG,aAAc,WAEzB,GADAqU,EAAE5rB,OAAOyC,KAAK,2DArQH,IAsQPupB,EAAKkC,MAAwB,CAC7BtC,EAAE5rB,OAAO+C,MAAM,iDACf,IAAIu2B,EAAgBzN,EAAMW,WAAWxiB,KAAM,oBACPyM,QAAS,6BAC7CuV,EAAKK,cAAciN,MAI3BtN,EAAKtY,OAAO6D,GAAG,oBAAqB,SAASzP,GACzC,IAAI2I,EACA6oB,EACa,YAAbxxB,EAAIkC,MACJ4hB,EAAE5rB,OAAO+C,MAAM,6CACC+E,EAAIxB,SAAU0lB,EAAKkC,OAnR5B,IAoRHlC,EAAKkC,OACFpmB,EAAIxB,WACHmK,EAASub,EAAKyM,aAAa3wB,EAAIxB,aAChBmK,EAAOmoB,SAClBnoB,EAAOmoB,QAAS,EAEhB5M,EAAK+J,UAAUtlB,GAEf6oB,EAAgBzN,EAAMY,aAAaziB,KAAM,gBACjC0iB,IAAK,4CACLjc,OAAQA,IAChBub,EAAKK,cAAciN,MAK/B1N,EAAE5rB,OAAO+C,MAAM,4CAA6C+E,EAAIxB,UApSzD,IAqSH0lB,EAAKkC,OACFpmB,EAAIxB,WACHmK,EAASub,EAAKwM,cAAc1wB,EAAIxB,aACjBmK,EAAOmoB,SAClBnoB,EAAOmoB,QAAS,EAChBU,EAAgBzN,EAAMY,aAAaziB,KAAM,gBACrC0iB,IAAK,uDACLjc,OAAQA,IACZub,EAAKK,cAAciN,GACnBtN,EAAKuN,YAAY9oB,OAOrCub,EAAKtY,OAAO6D,GAAG,QAAS,SAAS/Q,GAC7BolB,EAAE5rB,OAAO+C,MAAO,sCACZA,GAAOA,EAAM,sDAAsDyD,KAI3E4xB,EAAkB,QAASS,EAAOn0B,EAAU3B,IAIhDq1B,EAAoB,SAAUpuB,EAAM0iB,EAAKhoB,EAAU3B,GAC/CipB,EAAKtY,OAAOmE,KAAK7N,EAAM0iB,EAAK,SAAU8M,EAAU9M,GAC3B,YAAb8M,EACQ90B,GAAUA,EAASgoB,GACP,UAAb8M,EACHz2B,GAAOA,EAAM2pB,GAEbhoB,GAAUA,EAAS80B,EAAU9M,MAO7C2L,EAAgB,SAAUruB,EAAMoV,EAAS2O,EAAKrpB,GA7U3B,IA8UXsnB,EAAKkC,MACLlC,EAAKtY,OAAOmE,KAAK7N,EAAMoV,EAAS2O,EAAK,SAAU3nB,EAAUqzB,GACjD/0B,GAAUA,EAAS0B,EAAUqzB,KAGrC7N,EAAE5rB,OAAO4C,QAAQ,wDAQzBopB,EAAKjY,QAAU,WACX,IAAI8kB,EAAQjN,EAAE8N,OAAOC,aAAa5N,EAAK8M,OA5VxB,IA8VX7M,EAAKkC,OACLtC,EAAE5rB,OAAO4C,QAAQ,0BAIrBopB,EAAKkC,MAlWQ,EAmWbiK,EAAc5hB,KAAKyD,MAAM6e,GAAQ,SAAUzyB,GACvC,IAAeqK,EAAyBD,EAASopB,EAAQ9xB,EAAK+xB,EAA1DpU,EAAQ,EAAWqU,KAUvB,IAAKrU,KATLjV,EAAUpK,EAASoK,YACnBwb,EAAK+L,IAAM3xB,EAAS2xB,IACpB6B,EAASxzB,EAASL,GAClBimB,EAAKmB,WAAanB,EAAKmB,WAAW3rB,OAAO4E,EAAS+mB,YAClDnB,EAAKkC,MAxWG,EAyWRnC,EAAKgO,eAAiB3zB,EAAS2zB,eAC/BhO,EAAKiC,WAAa5nB,EAAS4nB,WAGbxd,EACNA,EAAQ3Q,eAAe4lB,KACvB3d,EAAM0I,EAAQiV,GACdhV,EAASob,EAAM4I,QAAQO,SAAUltB,EAAI/B,GACbmQ,OAAO,EACPzQ,MAAOqC,EAAIrC,MACXN,MAAO2C,EAAI3C,MACXyU,KAAM9R,EAAI8R,KACV1U,OAAQ4C,EAAI5C,OACZgwB,WAAYptB,EAAIotB,aACxC4E,EAAWnxB,KAAK8H,GAChBub,EAAKwM,cAAc1wB,EAAI/B,IAAM0K,GAKrCub,EAAK0M,OAASkB,EAEdhO,EAAE5rB,OAAOyC,KAAK,qBAAuBupB,EAAK0M,QAE1CmB,EAAahO,EAAMW,WAAWxiB,KAAM,iBAAkBwG,QAASspB,IAC/D9N,EAAKK,cAAcwN,IACpB,SAAU92B,GACT6oB,EAAE5rB,OAAO+C,MAAM,yBAA2BA,GAC1C,IAAI82B,EAAahO,EAAMW,WAAWxiB,KAAM,aAAcyM,QAAQ1T,IAC9DipB,EAAKK,cAAcwN,MAK3B7N,EAAKzM,WAAa,WACdqM,EAAE5rB,OAAOmC,MAAM,2BAEf,IAAIm3B,EAAgBzN,EAAMW,WAAWxiB,KAAM,oBACPyM,QAAS,2BAC7CuV,EAAKK,cAAciN,IAKvBtN,EAAKgO,QAAU,SAAUvpB,EAAQ2O,EAAS1a,GAsB1B,IAAIsF,EACAlC,IAtBhBsX,EAAUA,OAEF4O,WAAa5O,EAAQ4O,YAAcjC,EAAKgO,eAC5C3a,EAAQ4O,WAAajC,EAAKiC,aAC1B5O,EAAQ4O,WAAajC,EAAKiC,iBAGHjsB,IAAvBqd,EAAQuQ,aACRvQ,EAAQuQ,WAAa,GAGrBvQ,EAAQuQ,WAAa5D,EAAKgO,iBAC1B3a,EAAQuQ,WAAa5D,EAAKgO,gBAI1BtpB,GAAUA,EAAOyF,YAA+CnU,IAAtCiqB,EAAKyM,aAAahoB,EAAOskB,UAG/CtkB,EAAO6kB,YAAc7kB,EAAO8kB,YAAc9kB,EAAOglB,iBAC9B1zB,IAAf0O,EAAOggB,UAA0C1uB,IAArB0O,EAAOkkB,WAG/BlkB,EAAOggB,KACPzmB,EAAO,MACPlC,EAAM2I,EAAOggB,MAEbzmB,EAAO,YACPlC,EAAM2I,EAAOkkB,WAEjB/I,EAAE5rB,OAAOyC,KAAK,+BAAgCgO,EAAOskB,SACrDtkB,EAAOknB,aAAavY,GACpBiZ,EAAc,WAAYnK,MAAOlkB,EACT4P,KAAMnJ,EAAO+kB,UACb/vB,MAAOgL,EAAO6kB,WACdnwB,MAAOsL,EAAO8kB,WACdL,WAAYzkB,EAAOwkB,gBACnBgF,SAAU7a,EAAQ6a,SAClBnK,YAAa1Q,EAAQ0Q,aACjChoB,EAAK,SAAU/B,EAAIhD,GAEZ,OAAPgD,GACA6lB,EAAE5rB,OAAOyC,KAAK,oBACdgO,EAAOskB,MAAQ,WACX,OAAOhvB,GAEX0K,EAAOilB,SAAW,SAAUhJ,GACxB4L,EAAe7nB,EAAQic,IAE3Bjc,EAAO0kB,cAAgB,SAAUE,GAC7BkD,EAAiB9nB,EAAQ4kB,IAE7BrJ,EAAKyM,aAAa1yB,GAAM0K,EACxBA,EAAOmkB,KAAO5I,EACVtnB,GACAA,EAASqB,KAEb6lB,EAAE5rB,OAAO+C,MAAM,+BAAgCA,GAG3C2B,GACAA,OAAS3C,EAAWgB,OAI7BipB,EAAK+L,KAEZhM,EAAKkC,WAAa7O,EAAQ6O,WAC1BlC,EAAKiC,WAAa5O,EAAQ4O,WAC1BqK,EAAc,WAAYnK,MAAO,MACTtU,KAAMnJ,EAAO+kB,UACb/vB,MAAOgL,EAAO6kB,WACdnwB,MAAOsL,EAAO8kB,WACdrwB,OAAQuL,EAAOglB,YACfwE,SAAU7a,EAAQ6a,SAClB/E,WAAYzkB,EAAOwkB,sBAC/BlzB,EAAW,SAAUgE,EAAIhD,GACtB,OAAPgD,IACA6lB,EAAE5rB,OAAO+C,MAAM,mCAAoCA,GAC/C2B,GACAA,OAAS3C,EAAWgB,IAE5B6oB,EAAE5rB,OAAOyC,KAAK,oBACdgO,EAAOskB,MAAQ,WACX,OAAOhvB,GAEP0K,EAAO+kB,YACP/kB,EAAOilB,SAAW,SAAUhJ,GACxB4L,EAAe7nB,EAAQic,KAG/Bjc,EAAO0kB,cAAgB,SAAUE,GAC7BkD,EAAiB9nB,EAAQ4kB,IAG7BrJ,EAAKyM,aAAa1yB,GAAM0K,EACxBA,EAAOmkB,KAAO5I,MAIlBJ,EAAE5rB,OAAOyC,KAAK,+CACF2c,EAAQ0Q,aACpBuI,EAAc,WAAYnK,MAAO,QACTtU,KAAMnJ,EAAO+kB,UACb/vB,MAAOgL,EAAO6kB,WACdnwB,MAAOsL,EAAO8kB,WACdrwB,OAAQuL,EAAOglB,YACf9F,WAAYvQ,EAAQuQ,WACpBuF,WAAYzkB,EAAOwkB,gBACnBnF,YAAa1Q,EAAQ0Q,YACrBmK,SAAU7a,EAAQ6a,SAClBC,OAAQ9a,EAAQ8a,aAC5Bn4B,EAAW,SAAUgE,EAAIhD,GAE7B,GAAW,OAAPgD,EAGA,OAFA6lB,EAAE5rB,OAAO+C,MAAM,qCAAsCA,QACjD2B,GAAUA,OAAS3C,EAAWgB,IAItC6oB,EAAE5rB,OAAOyC,KAAK,uDACdgO,EAAOskB,MAAQ,WACX,OAAOhvB,GAEP0K,EAAO+kB,YACP/kB,EAAOilB,SAAW,SAAUhJ,GACxB4L,EAAe7nB,EAAQic,KAG/Bjc,EAAO0kB,cAAgB,SAAUE,GAC7BkD,EAAiB9nB,EAAQ4kB,IAE7BrJ,EAAKyM,aAAa1yB,GAAM0K,EACxBA,EAAOmkB,KAAO5I,EAEdvb,EAAOunB,GAAKnM,EAAM6H,YAAYhvB,SAAU,SAAU+R,GAC9CmV,EAAE5rB,OAAOmC,MAAM,kBAAmBsU,GAClC4hB,EAAc,qBAAsB/xB,SAAUmK,EAAOskB,QACjBrI,IAAKjW,QAC7B1U,EAAW,eACxBorB,WAAYnB,EAAKmB,WAChBc,WAAY7O,EAAQ6O,WACpBD,WAAY5O,EAAQ4O,WACpBuB,gBAAiBxD,EAAKkC,WACtBqB,gBAAiBvD,EAAKiC,WACtBvoB,MAAOgL,EAAO6kB,WACdnwB,MAAOsL,EAAO8kB,aAElB9kB,EAAOunB,GAAG/H,UAAUxf,EAAOA,QAC3BA,EAAOunB,GAAGrJ,2BAA6B,SAAUT,GAG7C,GAAc,WAAVA,GAhjBb,IAijBiBlC,EAAKkC,OAA0Bzd,IAAWA,EAAOmoB,OAAQ,CACzDnoB,EAAOmoB,QAAO,EACdhN,EAAE5rB,OAAO4C,QAAQ,oBACD6N,EAAOskB,QACP,0CAChB/I,EAAK+J,UAAUtlB,GAEf,IAAI6oB,EAAgBzN,EAAMY,aACtBziB,KAAM,gBACN0iB,IAAI,4CACJjc,OAAOA,IACXub,EAAKK,cAAciN,KAI3Bla,EAAQ0Q,aACRrf,EAAOunB,GAAGlI,cACXprB,GAAUA,EAASqB,MAG3B0K,EAAO+kB,WAEd6C,EAAc,WAAYnK,MAAO,OACTtU,KAAMnJ,EAAO+kB,UACb/vB,OAAO,EACPN,OAAO,EACPD,QAAQ,EACR+0B,SAAU7a,EAAQ6a,SAClB/E,WAAYzkB,EAAOwkB,sBAC/BlzB,EACA,SAAUgE,EAAIhD,GACtB,GAAW,OAAPgD,EAIA,OAHA6lB,EAAE5rB,OAAO+C,MAAM,2BAA4BA,QACvC2B,GACAA,OAAS3C,EAAWgB,IAG5B6oB,EAAE5rB,OAAOyC,KAAK,oBACdgO,EAAOskB,MAAQ,WACX,OAAOhvB,GAEX0K,EAAOilB,SAAW,SAAUhJ,GACxB4L,EAAe7nB,EAAQic,IAE3Bjc,EAAO0kB,cAAgB,SAAUE,GAC7BkD,EAAiB9nB,EAAQ4kB,IAE7BrJ,EAAKyM,aAAa1yB,GAAM0K,EACxBA,EAAOmkB,KAAO5I,EACXtnB,GAAUA,EAASqB,MAI9B6lB,EAAE5rB,OAAO+C,MAAM,oCACZ2B,GAAUA,OAAS3C,EAAW,oBAKzCiqB,EAAKmO,eAAiB,SAAU1pB,EAAQ/L,GAChC+L,GACAmb,EAAE5rB,OAAOmC,MAAM,2BAA6BsO,EAAOskB,SACnDqD,EAAkB,iBAAkBgC,GAAI3pB,EAAOskB,SAAU,SAAShvB,EAAIhD,GAClE,GAAW,OAAPgD,EAGA,OAFA6lB,EAAE5rB,OAAO+C,MAAM,2BAA4BA,QACvC2B,GAAUA,OAAS3C,EAAWgB,IAItC6oB,EAAE5rB,OAAOyC,KAAK,kBAAmBsD,GAC7BrB,GAAUA,EAASqB,OAG3B6lB,EAAE5rB,OAAO+C,MAAM,iDAAkD0N,GAC9D/L,GAAUA,OAAS3C,EAAW,oBAKzCiqB,EAAKqO,cAAgB,SAAUC,EAAa51B,GACxC0zB,EAAkB,gBAAiBryB,GAAIu0B,GAAc,SAASrrB,EAAQlM,GAClE,GAAe,OAAXkM,EAGA,OAFA2c,EAAE5rB,OAAO+C,MAAM,0BAA2BA,QACtC2B,GAAUA,OAAS3C,EAAWgB,IAGtC6oB,EAAE5rB,OAAOyC,KAAK,iBAAkB63B,GAC5B51B,GAAUA,GAAS,MAK/BsnB,EAAK+J,UAAY,SAAUtlB,EAAQ/L,GAG/B,IAAI+L,IAAUA,EAAOyF,MAoCd,CAIH,OAFA0V,EAAE5rB,OAAO+C,aACL2B,GAAUA,OAAS3C,EAFX,4DAnCZq2B,EAAkB,YAAa3nB,EAAOskB,QAAS,SAAS9lB,EAAQlM,GAC5D,GAAe,OAAXkM,EAGA,OAFA2c,EAAE5rB,OAAO+C,MAAM,4BAA6BA,QACxC2B,GAAUA,OAAS3C,EAAWgB,IAItC6oB,EAAE5rB,OAAOyC,KAAK,sBACViC,GAAUA,GAAS,KAI3B,IAAIqzB,EAAMtnB,EAAOmkB,MAAQnkB,EAAOmkB,KAAKmD,IAErC,GADAtnB,EAAOmkB,UAAO7yB,GACT0O,EAAO6kB,YACR7kB,EAAO8kB,YACP9kB,EAAOglB,mBACQ1zB,IAAf0O,EAAOggB,IACP,GAAIsH,EAIA,IAAK,IAAItS,KAAShV,EAAOunB,GACrBvnB,EAAOunB,GAAGvS,GAAO5G,QACjBpO,EAAOunB,GAAGvS,QAAS1jB,OALnB0O,EAAOunB,IAAIvnB,EAAOunB,GAAGnZ,QACzBpO,EAAOunB,QAAKj2B,SAQbiqB,EAAKyM,aAAahoB,EAAOskB,SAEhCtkB,EAAOskB,MAAQ,aACftkB,EAAOilB,SAAW,aAClBjlB,EAAO0kB,cAAgB,cAW/BnJ,EAAKuO,UAAY,SAAU9pB,EAAQ2O,EAAS1a,GAIxC,GAFA0a,EAAUA,OAEN3O,GAAWA,EAAOyF,MAiGjB,CACD,IAAInT,EAAQ,qBAYZ,OAXK0N,EAIIA,EAAOyF,QACZ0V,EAAE5rB,OAAO4C,QAAQ,qGAEjBG,EAAQ,yBANR6oB,EAAE5rB,OAAO4C,QAAQ,qCAAsC6N,GACvD1N,EAAQ,oCAOR2B,GACAA,OAAS3C,EAAWgB,IA3GxB,GAAI0N,EAAO8kB,YAAc9kB,EAAO6kB,YAAc7kB,EAAOglB,YAG7CzJ,EAAK+L,KACLM,EAAc,aAAc/xB,SAAUmK,EAAOskB,QACjBkF,SAAU7a,EAAQ6a,WAC3Cv1B,GAAUA,GAAS,KAEtBknB,EAAE5rB,OAAOyC,KAAK,iCAAkCgO,EAAOskB,SACvDtkB,EAAOknB,aAAavY,GACpBiZ,EAAc,aAAc/xB,SAAUmK,EAAOskB,QACjBtvB,MAAO2Z,EAAQ3Z,MACfN,MAAOia,EAAQja,MACfyU,KAAMwF,EAAQxF,KACd3V,QAAS4nB,EAAM7nB,aACf8rB,YAAa1Q,EAAQ0Q,YACrBmK,SAAU7a,EAAQ6a,SAClBrK,cAAexQ,EAAQwQ,oBACvC7tB,EAAW,SAAUkN,EAAQlM,GACjC,GAAe,OAAXkM,EAIA,OAHA2c,EAAE5rB,OAAO+C,MAAM,+BAAgCA,QAC3C2B,GACAA,OAAS3C,EAAWgB,IAI5B6oB,EAAE5rB,OAAOyC,KAAK,oBAEdgO,EAAOunB,GAAKnM,EAAM6H,YAAYhvB,SAAU,SAAU+R,GAC9CmV,EAAE5rB,OAAOyC,KAAK,kBAAmBgU,GACjC4hB,EAAc,qBAAsB/xB,SAAUmK,EAAOskB,QACjBrI,IAAKjW,EACLxS,QAASwM,EAAOunB,GAAG/zB,cAC3ClC,EAAW,eAE3B+uB,OAAO,EACPrrB,MAAO2Z,EAAQ3Z,MACfN,MAAOia,EAAQja,MACfgoB,WAAYnB,EAAKmB,aAEjB1c,EAAOunB,GAAGvJ,YAAc,SAAUuK,GAE9BpN,EAAE5rB,OAAOyC,KAAK,qBACdgO,EAAOA,OAASuoB,EAAIvoB,OACpB,IAAIkoB,EAAO9M,EAAMY,aAAaziB,KAAM,oBACRyG,OAAQA,IACpCub,EAAKK,cAAcsM,IAGvBloB,EAAOunB,GAAGrJ,2BAA6B,SAAUT,GAC7C,GAAc,WAAVA,GArvBb,IAsvBiBlC,EAAKkC,OAA0Bzd,IAAUA,EAAOmoB,OAAQ,CACxDnoB,EAAOmoB,QAAS,EAChBhN,EAAE5rB,OAAO4C,QAAQ,qBACD6N,EAAOskB,QACP,0CAChB,IAAIuE,EAAgBzN,EAAMY,aACrBziB,KAAM,gBACH0iB,IAAK,6CACLjc,OAAOA,IACfub,EAAKK,cAAciN,GACnBtN,EAAKuN,YAAY9oB,KAK7BA,EAAOunB,GAAGlI,aAAY,GACnBprB,GAAUA,GAAS,UAI/B,KAAI+L,EAAO+kB,YAA8B,IAAjBpW,EAAQxF,KAoBnC,OAFAgS,EAAE5rB,OAAO4C,QAAS,wCACd8B,GAAUA,OAAS3C,EAAW,4BAlBlCs2B,EAAc,aACD/xB,SAAUmK,EAAOskB,QACdnb,KAAMwF,EAAQxF,KACdqgB,SAAU7a,EAAQ6a,eACtBl4B,EAAW,SAAUkN,EAAQlM,GACrC,GAAe,OAAXkM,EAIA,OAHA2c,EAAE5rB,OAAO+C,MAAM,+BAAgCA,QAC3C2B,GACAA,OAAS3C,EAAWgB,IAG5B6oB,EAAE5rB,OAAOyC,KAAK,qBACd,IAAIu2B,EAAMnN,EAAMY,aAAaziB,KAAM,oBAAqByG,OAAQA,IAChEub,EAAKK,cAAc2M,GAChBt0B,GAAUA,GAAS,KAQ9BknB,EAAE5rB,OAAOyC,KAAK,mBAAqBgO,EAAOskB,UAmBlD/I,EAAKuN,YAAc,SAAU9oB,EAAQ/L,QAEb3C,IAAhBiqB,EAAKtY,QACDjD,IAAWA,EAAOyF,OAClBkiB,EAAkB,cAAe3nB,EAAOskB,QAAS,SAAU9lB,EAAQlM,GAChD,OAAXkM,GAKJ0iB,EAAalhB,GACT/L,GAAUA,GAAS,IALfA,GACAA,OAAS3C,EAAWgB,IAK7B,WACC6oB,EAAE5rB,OAAO+C,MAAM,iCAO/BipB,EAAKwO,sBAAwB,SAAUj8B,EAAMU,GACzC,IAAkBwmB,EAAOhV,EAArBD,KAEJ,IAAKiV,KAASuG,EAAKwM,cACXxM,EAAKwM,cAAc34B,eAAe4lB,SAGH1jB,KAF/B0O,EAASub,EAAKwM,cAAc/S,IAEjBwP,sBAC0BlzB,IAAjC0O,EAAOwkB,gBAAgB12B,IAEnBkS,EAAOwkB,gBAAgB12B,KAAUU,GACjCuR,EAAQ7H,KAAK8H,GAM7B,OAAOD,GAGXwb,EAAKyO,kBAAoB,WACrB,OAAO/7B,OAAO+K,KAAKuiB,EAAKyM,cAAc92B,QAGnCqqB,IAIPJ,EAAIA,OAKN5rB,OAAU,SAAU4rB,GAuHlB,OACInrB,MAvHQ,EAwHRC,MAvHQ,EAwHRC,KAvHO,EAwHPC,QAvHU,EAwHVC,MAvHQ,EAwHRC,KAvHO,EAwHP45B,eA5Ga,WACb9O,EAAE5rB,OAAOgC,MAAQ0T,SAAS6S,cAAc,YACxCqD,EAAE5rB,OAAOgC,MAAMonB,aAAa,KAAM,eAClCwC,EAAE5rB,OAAOgC,MAAMonB,aAAa,QAAS,4CACrCwC,EAAE5rB,OAAOgC,MAAMonB,aAAa,OAAQ,IACpCwC,EAAE5rB,OAAOgC,MAAMonB,aAAa,OAAQ,IACpCwC,EAAE5rB,OAAOgC,MAAMonB,aAAa,YAAY,GACxC1T,SAASkT,KAAKC,YAAY+C,EAAE5rB,OAAOgC,QAsGnCjB,YAlGU,SAAUC,GAChBA,EAAQ4qB,EAAE5rB,OAAOc,KACjBE,EAAQ4qB,EAAE5rB,OAAOc,KACVE,EAAQ4qB,EAAE5rB,OAAOS,QACxBO,EAAQ4qB,EAAE5rB,OAAOS,OAErBmrB,EAAE5rB,OAAOkB,SAAWF,GA6FpBV,IAxFE,SAAUU,GACZ,IAAIO,EAAM,GACV,KAAIP,EAAQ4qB,EAAE5rB,OAAOkB,UAArB,CAGIF,IAAU4qB,EAAE5rB,OAAOS,MACnBc,GAAY,QACLP,IAAU4qB,EAAE5rB,OAAOU,MAC1Ba,GAAY,QACLP,IAAU4qB,EAAE5rB,OAAOW,KAC1BY,GAAY,OACLP,IAAU4qB,EAAE5rB,OAAOY,QAC1BW,GAAY,UACLP,IAAU4qB,EAAE5rB,OAAOa,QAC1BU,GAAY,SAEhBA,GAAY,KAEZ,IADA,IAAIpB,KACKnC,EAAI,EAAGA,EAAI0D,UAAUC,OAAQ3D,IAClCmC,EAAKnC,GAAK0D,UAAU1D,GAExB,IAAI8D,EAAW3B,EAAKwH,MAAM,GAE1B,GADAxH,GAAQoB,GAAKC,OAAOM,QACGC,IAAnB6pB,EAAE5rB,OAAOgC,MAAqB,CAE9B,IADA,IAAIC,EAAM,GACDC,EAAM,EAAGA,EAAM/B,EAAKwB,OAAQO,IACjCD,GAAY9B,EAAK+B,GAErB0pB,EAAE5rB,OAAOgC,MAAM/C,MAAQ2sB,EAAE5rB,OAAOgC,MAAM/C,MAAQ,KAAOgD,OAErD5B,QAAQC,IAAIC,MAAMF,QAASF,KA2D/BgC,MAtDI,WAEJ,IADA,IAAIhC,KACKnC,EAAI,EAAGA,EAAI0D,UAAUC,OAAQ3D,IAClCmC,EAAKnC,GAAK0D,UAAU1D,GAExB4tB,EAAE5rB,OAAOM,IAAIC,MAAMqrB,EAAE5rB,QAAQ4rB,EAAE5rB,OAAOS,OAAOe,OAAOrB,KAkDpDmC,MA9CI,WAEJ,IADA,IAAInC,KACKnC,EAAI,EAAGA,EAAI0D,UAAUC,OAAQ3D,IAClCmC,EAAKnC,GAAK0D,UAAU1D,GAExB4tB,EAAE5rB,OAAOM,IAAIC,MAAMqrB,EAAE5rB,QAAQ4rB,EAAE5rB,OAAOU,OAAOc,OAAOrB,KA0CpDsC,KAtCG,WAEH,IADA,IAAItC,KACKnC,EAAI,EAAGA,EAAI0D,UAAUC,OAAQ3D,IAClCmC,EAAKnC,GAAK0D,UAAU1D,GAExB4tB,EAAE5rB,OAAOM,IAAIC,MAAMqrB,EAAE5rB,QAAQ4rB,EAAE5rB,OAAOW,MAAMa,OAAOrB,KAkCnDyC,QA9BM,WAEN,IADA,IAAIzC,KACKnC,EAAI,EAAGA,EAAI0D,UAAUC,OAAQ3D,IAClCmC,EAAKnC,GAAK0D,UAAU1D,GAExB4tB,EAAE5rB,OAAOM,IAAIC,MAAMqrB,EAAE5rB,QAAQ4rB,EAAE5rB,OAAOY,SAASY,OAAOrB,KA0BtD4C,MAtBI,WAEJ,IADA,IAAI5C,KACKnC,EAAI,EAAGA,EAAI0D,UAAUC,OAAQ3D,IAClCmC,EAAKnC,GAAK0D,UAAU1D,GAExB4tB,EAAE5rB,OAAOM,IAAIC,MAAMqrB,EAAE5rB,QAAQ4rB,EAAE5rB,OAAOa,OAAOW,OAAOrB,MApHhD,CAuIVyrB,IAGEA,EAAIA,OACN8N,OAAU,WACR,IACIiB,EACAC,EACAC,EACAC,EACA98B,EACA+8B,EACAC,EAEAC,EACAC,EAkBJ,KAfgB,EAEhBP,GACI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAGvCC,KAEK58B,EAAI,EAAGA,EAAI28B,EAAYh5B,OAAQ3D,GAAQ,EACxC48B,EAAmBD,EAAY38B,IAAMA,EAgHzC,OA7GA+8B,EAAe,SAAU9xB,GACrB4xB,EAAY5xB,EACZ6xB,EAAc,GAGlBE,EAAa,WACT,IAAI38B,EACJ,OAAKw8B,EAGDC,GAAeD,EAAUl5B,QA7BlB,GAgCXtD,EAAwC,IAApCw8B,EAAUliB,WAAWmiB,GACzBA,GAA4B,EACrBz8B,IAlCI,GA0Ef48B,EAAoB,WAChB,IAAKJ,EACD,OA5EO,EA8EX,OAAa,CACT,GAAIC,GAAeD,EAAUl5B,OACzB,OAhFG,EAkFP,IAAIw5B,EAAgBN,EAAUzmB,OAAO0mB,GAErC,GADAA,GAA4B,EACxBF,EAAmBO,GACnB,OAAOP,EAAmBO,GAE9B,GAAsB,MAAlBA,EACA,OAAO,IAKnBD,EAAO,SAAUz7B,GAMb,OAJiB,KADjBA,EAAIA,EAAEsH,SAAS,KACTpF,SACFlC,EAAI,IAAMA,GAEdA,EAAI,IAAMA,EACH27B,SAAS37B,KA8BhB47B,aA5FW,SAAUpyB,GACrB,IAAIgG,EAAQqsB,EAAUC,EAAWC,EAMjC,IALAT,EAAa9xB,GACbgG,EAAS,GACTqsB,EAAW,IAAI15B,MAAM,GACrB25B,EAAY,EACZC,GAAO,GACCA,IA5CG,KA4CMF,EAAS,GAAKN,MAC3BM,EAAS,GAAKN,IACdM,EAAS,GAAKN,IACd/rB,GAAmB0rB,EAAYW,EAAS,IAAM,IA/CvC,IAgDHA,EAAS,IACTrsB,GAAmB0rB,EAAeW,EAAS,IAAM,EAAK,GAASA,EAAS,IAAM,IAjD3E,IAkDCA,EAAS,IACTrsB,GACS0rB,EAAeW,EAAS,IAAM,EAAK,GAASA,EAAS,IAAM,GACpErsB,GAAmB0rB,EAA0B,GAAdW,EAAS,MAExCrsB,GAAmB0rB,EAAcW,EAAS,IAAM,EAAK,IACrDrsB,GAAmB,IACnBusB,GAAO,KAGXvsB,GAAmB0rB,EAAcW,EAAS,IAAM,EAAK,IACrDrsB,GAAmB,IACnBA,GAAmB,IACnBusB,GAAO,IAEXD,GAAwB,IACP,KACbtsB,GAAmB,KACnBssB,EAAY,GAGpB,OAAOtsB,GA2DP0qB,aA5BW,SAAU1wB,GACrB,IAAIgG,EAAQqsB,EAAUE,EAKtB,IAJAT,EAAa9xB,GACbgG,EAAS,GACTqsB,EAAW,IAAI15B,MAAM,GACrB45B,GAAO,GACCA,IA5GG,KA6GNF,EAAS,GAAKL,OA7GR,KA8GNK,EAAS,GAAKL,MACfK,EAAS,GAAKL,IACdK,EAAS,GAAKL,IACdhsB,GAAkBisB,EAAQI,EAAS,IAAM,EAAK,IAAOA,EAAS,IAAM,IAjH7D,IAkHHA,EAAS,IACTrsB,GAAWisB,EAAQI,EAAS,IAAM,EAAK,IAAQA,EAAS,IAAM,IAnH3D,IAoHCA,EAAS,GACTrsB,GAAmBisB,EAAQI,EAAS,IAAM,EAAM,IAAQA,EAAS,IAEjEE,GAAO,GAGXA,GAAO,EAGf,OAAOvsB,IA3IH,GA0JZ,WA6OI,SAAS4J,KACJ,IAAI+S,EAAE6P,gBAAkB5iB,OApO7B+S,EAAE6P,eAAiB,WAMf,SAASC,EAAUC,GACVA,IACDA,EAAUjmB,SAASC,iBAEvB,IAAIimB,EAAW9E,iBAAiB6E,EAAS,YACzC,OAAOtiB,WAAWuiB,IAAa,GAYnC,SAASC,EAAYF,EAAS18B,GAC1B,IAAI68B,EAAQ78B,EAAMwV,QAAQ,SAAU,IAEpC,OADAxV,EAAQoa,WAAWpa,GACX68B,GACJ,IAAK,KACD,OAAO78B,EACX,IAAK,KACD,OAAOA,EAAQy8B,EAAUC,GAC7B,IAAK,MACD,OAAO18B,EAAQy8B,IAInB,IAAK,KACD,OAAOz8B,EAAQyW,SAASC,gBAAgBomB,YAAc,IAC1D,IAAK,KACD,OAAO98B,EAAQyW,SAASC,gBAAgBqmB,aAAe,IAC3D,IAAK,OACL,IAAK,OACD,IAAIC,EAAKvmB,SAASC,gBAAgBomB,YAAc,IAC5CG,EAAKxmB,SAASC,gBAAgBqmB,aAAe,IAEjD,OAAO/8B,GAAQk9B,EADDtwB,KAAe,SAAViwB,EAAmB,MAAQ,QACvBG,EAAIC,GAC/B,QACI,OAAOj9B,GAkFnB,SAASm9B,EAAaT,EAASvc,GACvBuc,EAAQU,+BACRV,EAAQU,+BAA+BC,UAAUld,IAEjDuc,EAAQU,+BAAiC,IA3EjD,SAA0BV,GACtBl0B,KAAKk0B,QAAUA,EACfl0B,KAAK2X,WACL,IAAIphB,EACAsY,EACAimB,EAGAt9B,EACAu9B,EACAC,EACAC,EACAC,EANAxI,EAAQ,EACRG,EAAS,EAUb7sB,KAAK60B,UAAY,SAASC,GACtB90B,KAAK2X,QAAQzW,KAAK4zB,IAGtB,IAAIrH,GAAc,YAAa,aAAc,YAAa,cAK1DztB,KAAKtJ,KAAO,WAOR,IALAg2B,EAAQ1sB,KAAKk0B,QAAQiB,YACrBtI,EAAS7sB,KAAKk0B,QAAQkB,aAEtBJ,KAEKz+B,EAAI,EAAGsY,EAAI7O,KAAK2X,QAAQzd,OAAQ3D,EAAIsY,EAAGtY,IACxCu+B,EAAS90B,KAAK2X,QAAQphB,GACtBiB,EAAQ48B,EAAYp0B,KAAKk0B,QAASY,EAAOt9B,OAEzCu9B,EAAkC,UAApBD,EAAO58B,SAAuBw0B,EAAQG,EACpDqI,EAAWJ,EAAOp9B,KAAO,IAAMo9B,EAAO58B,SACtC+8B,EAAY,GAEQ,QAAhBH,EAAOp9B,MAAkBq9B,GAAev9B,IACxCy9B,GAAaH,EAAOt9B,OAGJ,QAAhBs9B,EAAOp9B,MAAkBq9B,GAAev9B,IACxCy9B,GAAaH,EAAOt9B,OAGnBw9B,EAAWE,KAAWF,EAAWE,GAAY,IAC9CD,IAAc,KAAO,IAAID,EAAWE,GAAU,KACzBroB,QAAQ,IAAMooB,EAAY,OAC/CD,EAAWE,IAAa,IAAMD,GAItC,IAAK,IAAIhW,KAAKwO,EACNuH,EAAWvH,EAAWxO,IACtBjf,KAAKk0B,QAAQvS,aAAa8L,EAAWxO,GACb+V,EAAWvH,EAAWxO,IAAIxN,OAAO,IAEzDzR,KAAKk0B,QAAQmB,gBAAgB5H,EAAWxO,KAcP,CAAqBiV,GAC9DA,EAAQU,+BAA+BC,UAAUld,GACjD,IAAIwM,EAAEmR,aAAapB,EAAS,WACxBA,EAAQU,+BAA+Bl+B,UAG/Cw9B,EAAQU,+BAA+Bl+B,OAS3C,SAAS6+B,EAAWC,EAAU99B,EAAMQ,EAAUV,GAC1C,IAAIwU,EAKJ,GAJIiC,SAASwnB,mBAAkBzpB,EAAQiC,SAASwnB,iBAAiB19B,KAAKkW,WACjEjC,GAAS,oBAAuB0pB,KAAI1pB,EAAQ0pB,IAC5C1pB,GAAS,oBAAuB2pB,SAAQ3pB,EAAQ2pB,SAEhD3pB,EACD,KAAM,+DAIV,IADA,IAAI4pB,EAAW5pB,EAAMwpB,GACZj/B,EAAI,EAAGsY,EAAI+mB,EAAS17B,OAAQ3D,EAAIsY,EAAGtY,IACxCo+B,EAAaiB,EAASr/B,IAClBmB,KAAMA,EACNQ,SAAUA,EACVV,MAAOA,IAKnB,IAAIq+B,EAAQ,qGAKZ,SAASC,EAAaC,GAClB,IAAIn5B,EAEJ,IADAm5B,EAAMA,EAAI/oB,QAAQ,KAAM,KACjB,QAAUpQ,EAAQi5B,EAAM5oB,KAAK8oB,KAC5B,EAAIn5B,EAAM1C,QACVq7B,EAAW34B,EAAM,IAAMA,EAAM,GAAIA,EAAM,GAAIA,EAAM,GAAIA,EAAM,IAQvE,SAASo5B,EAAUC,GACf,IAAIT,EAAW,GACf,GAAKS,EAGL,GAAI,iBAAoBA,GAEf,KADLA,EAAQA,EAAMvyB,eACGmJ,QAAQ,eAAiB,IAAMopB,EAAMppB,QAAQ,cAC1DipB,EAAaG,QAGjB,IAAK,IAAI1/B,EAAI,EAAGsY,EAAIonB,EAAM/7B,OAAQ3D,EAAIsY,EAAGtY,IACjC,IAAM0/B,EAAM1/B,GAAGgM,MAEV,KADLizB,EAAWS,EAAM1/B,GAAG2/B,cAAgBD,EAAM1/B,GAAG4/B,SACzBtpB,QAAQ,gBACvB,IAAM2oB,EAAS3oB,QAAQ,cACxBipB,EAAaN,IACL,IAAMA,EAAS3oB,QAAQ,eACtB,IAAM2oB,EAAS3oB,QAAQ,cAChCipB,EAAaN,GAEV,IAAMS,EAAM1/B,GAAGgM,MACtByzB,EAAUC,EAAM1/B,GAAG6/B,UAAYH,EAAM1/B,GAAG0/B,OAUxDj2B,KAAKoR,KAAO,WACR,IAAK,IAAI7a,EAAI,EAAGsY,EAAIZ,SAASooB,YAAYn8B,OAAQ3D,EAAIsY,EAAGtY,IACpDy/B,EAAU/nB,SAASooB,YAAY9/B,GAAG4/B,SAC1BloB,SAASooB,YAAY9/B,GAAG6/B,UACxBnoB,SAASooB,YAAY9/B,GAAG0/B,SASxCx5B,OAAOiX,iBACPjX,OAAOiX,iBAAiB,OAAQtC,GAAM,GAEtC3U,OAAO0hB,YAAY,SAAU/M,GAQjC,IAAIklB,EAAwB75B,OAAO65B,uBAC/B75B,OAAO85B,0BACP95B,OAAO+5B,6BACP,SAAU5iB,GACN,OAAOnX,OAAO0S,WAAWyE,EAAI,KASrC,SAAS6iB,EAAeb,EAAU34B,GAC9B,IAAIy5B,EAAez/B,OAAOkB,UAAUmH,SAAS5I,KAAKk/B,GAC9Ce,EAAqB,mBAAqBD,GACzC,sBAAwBA,GACxB,4BAA8BA,GAC9B,oBAAuBf,QAAUC,aAAoBD,QACrD,oBAAuBiB,UAAYhB,aAAoBgB,SAExDrgC,EAAI,EAAGsY,EAAI+mB,EAAS17B,OACxB,GAAIy8B,EACA,KAAOpgC,EAAIsY,EAAGtY,IACV0G,EAAS24B,EAASr/B,SAGtB0G,EAAS24B,GAWjBzR,EAAEmR,aAAe,SAASpB,EAASj3B,GAmD/B,SAAS45B,EAAkB3C,EAAS4C,GAChC,GAAK5C,EAAQ6C,iBAGN,GAAI7C,EAAQ6C,gBAEf,YADA7C,EAAQ6C,gBAAgB3jB,IAAI0jB,QAH5B5C,EAAQ6C,gBAAkB,IAhDlC,WACI,IAKIxgC,EAAGsY,EALHmoB,KACJh3B,KAAKoT,IAAM,SAAS+T,GAChB6P,EAAE91B,KAAKimB,IAIXnnB,KAAKtJ,KAAO,WACR,IAAKH,EAAI,EAAGsY,EAAImoB,EAAE98B,OAAQ3D,EAAIsY,EAAGtY,IAC7BygC,EAAEzgC,GAAGG,QAIbsJ,KAAKi3B,OAAS,SAAS9P,GACnB,IAAI+P,KACJ,IAAI3gC,EAAI,EAAGsY,EAAImoB,EAAE98B,OAAQ3D,EAAIsY,EAAGtY,IACzBygC,EAAEzgC,KAAO4wB,GAAI+P,EAASh2B,KAAK81B,EAAEzgC,IAEpCygC,EAAIE,GAGRl3B,KAAK9F,OAAS,WACV,OAAO88B,EAAE98B,SA2BTg6B,EAAQ6C,gBAAgB3jB,IAAI0jB,GAMhC5C,EAAQiD,aAAelpB,SAAS6S,cAAc,OAC9CoT,EAAQiD,aAAa7V,UAAY,gBACjC,IAAInT,EAAQ,+GAERipB,EAAa,uDAEjBlD,EAAQiD,aAAahpB,MAAMgoB,QAAUhoB,EACrC+lB,EAAQiD,aAAaE,UACjB,4CAA8ClpB,EAAQ,iBACjCipB,EAAa,0DAEYjpB,EAAQ,iBACjCipB,EAAa,2CAEtClD,EAAQ9S,YAAY8S,EAAQiD,cAEkB,WAxClD,SAA0BjD,EAASoD,GAC/B,OAAIpD,EAAQqD,aACDrD,EAAQqD,aAAaD,GACrB76B,OAAO4yB,iBACP5yB,OAAO4yB,iBAAiB6E,EAAS,MAAM5E,iBAAiBgI,GAExDpD,EAAQ/lB,MAAMmpB,GAkCrBjI,CAAiB6E,EAAS,cAC1BA,EAAQ/lB,MAAMoT,SAAW,YAG7B,IAAIiW,EAAStD,EAAQiD,aAAaM,WAAW,GACzCC,EAAcF,EAAOC,WAAW,GAChCE,EAASzD,EAAQiD,aAAaM,WAAW,GAEzC1f,EAAQ,WACR2f,EAAYvpB,MAAMue,MAAS,IAAS,KACpCgL,EAAYvpB,MAAM0e,OAAS,IAAS,KAEpC2K,EAAOI,WAAa,IACpBJ,EAAOK,UAAY,IAEnBF,EAAOC,WAAa,IACpBD,EAAOE,UAAY,KAGvB9f,IACA,IAcI+f,EAAWC,EACXC,EAAaC,EAfbC,GAAQ,EAaZ5B,EAXoB,SAAhB6B,IACKjE,EAAQ6C,kBAETmB,IACAhE,EAAQ6C,gBAAgBrgC,OACxBwhC,GAAQ,GAGZ5B,EAAsB6B,MAO1B,IAAIC,EAAW,YACVJ,EAAc9D,EAAQiB,eAAiB2C,IACvCG,EAAe/D,EAAQkB,gBAAkB2C,IAC1CG,GAAQ,EAERJ,EAAYE,EACZD,EAAaE,GAEjBlgB,KAGIsgB,EAAW,SAASC,EAAIxhC,EAAMsG,GAC1Bk7B,EAAGna,YACHma,EAAGna,YAAY,KAAOrnB,EAAMsG,GAE5Bk7B,EAAG5kB,iBAAiB5c,EAAMsG,IAIlCi7B,EAASb,EAAQ,SAAUY,GAC3BC,EAASV,EAAQ,SAAUS,GAG/B3B,EAAevC,EAAS,SAASqE,GAC7B1B,EAAkB0B,EAAMt7B,KAG5B+C,KAAKw4B,OAAS,SAASrR,GACnBhD,EAAEmR,aAAakD,OAAOtE,EAAS/M,KAIvChD,EAAEmR,aAAakD,OAAS,SAAStE,EAAS/M,GACtCsP,EAAevC,EAAS,SAASqE,GAC1BA,EAAKxB,iBAAiC,mBAAP5P,IAC9BoR,EAAKxB,gBAAgBE,OAAO9P,GACzBoR,EAAKxB,gBAAgB78B,WAExBq+B,EAAKpB,eACDoB,EAAKE,SAASF,EAAKpB,eACnBoB,EAAK5X,YAAY4X,EAAKpB,qBAEnBoB,EAAKpB,oBACLoB,EAAKxB,oBA9b5B,IA0cI3S,EAAQA,OACNsU,KAAO,WACT,IAAInU,EAAOH,EAAMC,oBAMjB,OADAE,EAAKyE,IAAM/qB,IAAI06B,UAAY,oBACpBpU,IASPH,EAAQA,OACN0K,YAAc,SAAUxK,GAC1B,IACIsU,EACAC,EAFAtU,EAAOH,EAAMsU,SAOjBnU,EAAKjmB,GAAKgmB,EAAKhmB,GAGfimB,EAAKvb,OAASsb,EAAKtb,OAAOA,OAG1Bub,EAAKsK,UAAYvK,EAAKuK,UAGtB+J,EAAc,WACVrU,EAAKuU,IAAIC,WAGbF,EAAa,WACTtU,EAAKuU,IAAIvK,QAMbhK,EAAKhR,QAAU,WACXgR,EAAK7mB,MAAM4d,eACJiJ,EAAKyU,QACZzU,EAAK7D,WAAWC,YAAY4D,EAAK4K,MAGrC5K,EAAK0U,OAAS,WAEV,IAAIvM,EAAQnI,EAAK2U,UAAU/D,YACvBtI,EAAStI,EAAK2U,UAAU9D,aAExB9Q,EAAKtb,OAAOvL,SAAgC,IAAtB6mB,EAAK3M,QAAQwhB,KAE/BzM,GAAS,EAAI,IAAMG,GAEnBtI,EAAK7mB,MAAMyQ,MAAMue,MAAQA,EAAQ,KACjCnI,EAAK7mB,MAAMyQ,MAAM0e,OAAU,EAAI,GAAMH,EAAQ,KAE7CnI,EAAK7mB,MAAMyQ,MAAMqT,MAAS,EAAI,GAAMkL,EAAQ,EAAIG,EAAS,GAAK,KAC9DtI,EAAK7mB,MAAMyQ,MAAMsT,KAAO,QAIxB8C,EAAK7mB,MAAMyQ,MAAM0e,OAASA,EAAS,KACnCtI,EAAK7mB,MAAMyQ,MAAMue,MAAS,GAAK,EAAKG,EAAS,KAE7CtI,EAAK7mB,MAAMyQ,MAAMsT,OAAU,GAAK,EAAKoL,EAAS,EAAIH,EAAQ,GAAK,KAC/DnI,EAAK7mB,MAAMyQ,MAAMqT,IAAM,OAIvBkL,IAAUnI,EAAK6U,gBAAkBvM,IAAWtI,EAAK8U,kBAExC,IAAL3M,EAAkBG,GAElBtI,EAAK7mB,MAAMyQ,MAAMue,MAAQA,EAAQ,KACjCnI,EAAK7mB,MAAMyQ,MAAM0e,OAAU,IAASH,EAAQ,KAE5CnI,EAAK7mB,MAAMyQ,MAAMqT,MAAS,IAASkL,EAAQ,EAAIG,EAAS,GAAK,KAC7DtI,EAAK7mB,MAAMyQ,MAAMsT,KAAO,QAIxB8C,EAAK7mB,MAAMyQ,MAAM0e,OAASA,EAAS,KACnCtI,EAAK7mB,MAAMyQ,MAAMue,MAAS,EAAI,EAAKG,EAAS,KAE5CtI,EAAK7mB,MAAMyQ,MAAMsT,OAAU,EAAI,EAAKoL,EAAS,EAAIH,EAAQ,GAAK,KAC9DnI,EAAK7mB,MAAMyQ,MAAMqT,IAAM,QAMnC+C,EAAK6U,eAAiB1M,EACtBnI,EAAK8U,gBAAkBxM,GAQ3B1I,EAAE5rB,OAAOmC,MAAM,4BAA8B6pB,EAAKvb,QAClD,IAAIswB,EAAQ78B,OAAO88B,KAAOC,UAsF1B,OArFAjV,EAAKkV,UAAYH,EAAMI,gBAAgBnV,EAAKvb,QAG5Cub,EAAK4K,IAAMlhB,SAAS6S,cAAc,OAClCyD,EAAK4K,IAAIxN,aAAa,KAAM,UAAY4C,EAAKjmB,IAC7CimB,EAAK4K,IAAIxN,aAAa,QAAS,uBAC/B4C,EAAK4K,IAAIxN,aAAa,QAAS,8FAIH,IAAxB2C,EAAK3M,QAAQgiB,SACjBpV,EAAKoV,OAAS1rB,SAAS6S,cAAc,OACrCyD,EAAKoV,OAAOhY,aAAa,QAAS,2GAElC4C,EAAKoV,OAAOhY,aAAa,KAAM,QAAU4C,EAAKjmB,IAC9CimB,EAAKoV,OAAOhY,aAAa,QAAS,UAClC4C,EAAKoV,OAAOhY,aAAa,MAAO4C,EAAKyE,IAAM,uBAI3CzE,EAAK7mB,MAAQuQ,SAAS6S,cAAc,SACpCyD,EAAK7mB,MAAMikB,aAAa,KAAM,SAAW4C,EAAKjmB,IAC9CimB,EAAK7mB,MAAMikB,aAAa,QAAS,UACjC4C,EAAK7mB,MAAMikB,aAAa,QAAS,iDACjC4C,EAAK7mB,MAAMikB,aAAa,WAAY,YAEjC2C,EAAKtb,OAAOyF,QACX8V,EAAK7mB,MAAMk8B,OAAS,QAEDt/B,IAAnBiqB,EAAKsK,UAEyB,WAA1BzjB,EAAOmZ,EAAKsK,YACsB,mBAA/BtK,EAAKsK,UAAUzN,YAClBmD,EAAK2U,UAAY3U,EAAKsK,UAGtBtK,EAAK2U,UAAYjrB,SAASshB,eAAehL,EAAKsK,WAGlDtK,EAAK2U,UAAYjrB,SAASkT,KAE9BoD,EAAK2U,UAAU9X,YAAYmD,EAAK4K,KAEhC5K,EAAK7D,WAAa6D,EAAK4K,IAAIzO,WAEvB6D,EAAKoV,QACTpV,EAAK4K,IAAI/N,YAAYmD,EAAKoV,QAE1BpV,EAAK4K,IAAI/N,YAAYmD,EAAK7mB,OAE1B6mB,EAAK6U,eAAiB,EACtB7U,EAAK8U,gBAAkB,GAEM,IAAzB/U,EAAK3M,QAAQqhB,UACjBzU,EAAKyU,QAAU,IAAI7U,EAAEmR,aAAa/Q,EAAK2U,UAAW3U,EAAK0U,QAEvD1U,EAAK0U,WAIoB,IAArB3U,EAAK3M,QAAQmhB,KACbvU,EAAKuU,IAAM,IAAI1U,EAAMyV,KAAKhL,UAAW,UAAYtK,EAAKjmB,GAC9BA,GAAIimB,EAAKjmB,GACT0K,OAAQsb,EAAKtb,OACbiB,MAAOsa,EAAK7mB,MACZia,QAAS2M,EAAK3M,UAEtC4M,EAAK4K,IAAIyJ,YAAcA,EACvBrU,EAAK4K,IAAI0J,WAAaA,GAItBtU,EAAKta,MAAQsa,EAAK7mB,OAIU,IAA5B4mB,EAAK3M,QAAQmiB,YAAwBxV,EAAKtb,OAAOA,OAAO+wB,iBAAiB7/B,OAAS,IACtFqqB,EAAKoK,WAAa,IAAIvK,EAAMuK,YAAYE,UAAW,UAAYtK,EAAKjmB,GAC5B0K,OAAQsb,EAAKtb,OACb2O,QAAS2M,EAAK3M,WAItD4M,EAAK7mB,MAAMqjB,IAAMwD,EAAKkV,UAEflV,IASPH,EAAQA,OACN2K,YAAc,SAAUzK,GAC1B,IACIsU,EACAC,EAFAtU,EAAOH,EAAMsU,SAOjBnU,EAAKjmB,GAAKgmB,EAAKhmB,GAGfimB,EAAKvb,OAASsb,EAAKtb,OAAOA,OAG1Bub,EAAKsK,UAAYvK,EAAKuK,UAGtB1K,EAAE5rB,OAAOmC,MAAM,4BAA8B6pB,EAAKvb,QAClD,IAAIswB,EAAQ78B,OAAO88B,KAAOC,UA8F1B,OA7FAjV,EAAKkV,UAAYH,EAAMI,gBAAgBnV,EAAKvb,QAG5Cub,EAAKvmB,MAAQiQ,SAAS6S,cAAc,SACpCyD,EAAKvmB,MAAM2jB,aAAa,KAAM,SAAW4C,EAAKjmB,IAC9CimB,EAAKvmB,MAAM2jB,aAAa,QAAS,UACjC4C,EAAKvmB,MAAM2jB,aAAa,QAAS,iDACjC4C,EAAKvmB,MAAM2jB,aAAa,WAAY,YAEjC2C,EAAKtb,OAAOyF,QACX8V,EAAKvmB,MAAM47B,OAAS,GAErBtV,EAAKtb,OAAOyF,QACX8V,EAAKvmB,MAAM47B,OAAS,QAGDt/B,IAAnBiqB,EAAKsK,WAGLtK,EAAKhR,QAAU,WACXgR,EAAKvmB,MAAMsd,QACXiJ,EAAK7D,WAAWC,YAAY4D,EAAK4K,MAGrCyJ,EAAc,WACVrU,EAAKuU,IAAIC,WAGbF,EAAa,WACTtU,EAAKuU,IAAIvK,QAIbhK,EAAK4K,IAAMlhB,SAAS6S,cAAc,OAClCyD,EAAK4K,IAAIxN,aAAa,KAAM,UAAY4C,EAAKjmB,IAC7CimB,EAAK4K,IAAIxN,aAAa,QAAS,uBAC/B4C,EAAK4K,IAAIxN,aAAa,QAAS,oEAID,WAA1BvW,EAAOmZ,EAAKsK,YACsB,mBAA/BtK,EAAKsK,UAAUzN,YAClBmD,EAAK2U,UAAY3U,EAAKsK,UAGtBtK,EAAK2U,UAAYjrB,SAASshB,eAAehL,EAAKsK,WAElDtK,EAAK2U,UAAU9X,YAAYmD,EAAK4K,KAEhC5K,EAAK7D,WAAa6D,EAAK4K,IAAIzO,WAE3B6D,EAAK4K,IAAI/N,YAAYmD,EAAKvmB,QAGD,IAArBsmB,EAAK3M,QAAQmhB,KACbvU,EAAKuU,IAAM,IAAI1U,EAAMyV,KAAKhL,UAAW,UAAYtK,EAAKjmB,GAC9BA,GAAIimB,EAAKjmB,GACT0K,OAAQsb,EAAKtb,OACbiB,MAAOsa,EAAKvmB,MACZ2Z,QAAS2M,EAAK3M,UAEtC4M,EAAK4K,IAAIyJ,YAAcA,EACvBrU,EAAK4K,IAAI0J,WAAaA,GAItBtU,EAAKta,MAAQsa,EAAKvmB,QAKtBumB,EAAKhR,QAAU,WACXgR,EAAKvmB,MAAMsd,QACXiJ,EAAK7D,WAAWC,YAAY4D,EAAKvmB,QAGrCiQ,SAASkT,KAAKC,YAAYmD,EAAKvmB,OAC/BumB,EAAK7D,WAAazS,SAASkT,OAIC,IAA5BmD,EAAK3M,QAAQmiB,YAAwBxV,EAAKtb,OAAOA,OAAO+wB,iBAAiB7/B,OAAS,IACjFoqB,EAAK3M,QAAQqiB,sBACd1V,EAAK3M,QAAQqiB,oBAAsB,SAEvCzV,EAAKoK,WAAa,IAAIvK,EAAMuK,YAAYE,UAAW,UAAYtK,EAAKjmB,GAC5B0K,OAAQsb,EAAKtb,OACb2O,QAAS2M,EAAK3M,WAItD4M,EAAKvmB,MAAM+iB,IAAMwD,EAAKkV,UAEflV,IAUPH,EAAQA,OACNyV,IAAM,SAAUvV,GAClB,IACI2V,EACA/K,EAFA3K,EAAOH,EAAMsU,SA2DjB,OApDAnU,EAAKsK,UAAYvK,EAAKuK,UAGtBtK,EAAKjmB,GAAKgmB,EAAKhmB,GAGfimB,EAAK4K,IAAMlhB,SAAS6S,cAAc,OAClCyD,EAAK4K,IAAIxN,aAAa,KAAM,OAAS4C,EAAKjmB,IAG1CimB,EAAKuU,IAAM7qB,SAAS6S,cAAc,OAClCyD,EAAKuU,IAAInX,aAAa,QAAS,iIAC/B4C,EAAKuU,IAAInX,aAAa,KAAM,UAAY4C,EAAKjmB,IAG7C4wB,EAAO,SAAUgL,GACM,UAAfA,EACAA,EAAa,OAEb5qB,aAAa2qB,GAGjB1V,EAAK4K,IAAIxN,aAAa,QAAS,+EACmCuY,IAKtE3V,EAAKwU,QAAU,WACX7J,EAAK,UAGT3K,EAAKgK,KAAO,WACR0L,EAAU9qB,WAAW+f,EAAM,MAG/BjhB,SAASshB,eAAehL,EAAKsK,WAAWzN,YAAYmD,EAAK4K,KACzD5K,EAAK4K,IAAI/N,YAAYmD,EAAKuU,KAGrBxU,EAAKtb,OAAOvL,aAA4BnD,IAAjBgqB,EAAK3M,cACoBrd,IAAzBgqB,EAAK3M,QAAQwiB,UACY,IAAzB7V,EAAK3M,QAAQwiB,UACrC5V,EAAK4V,QAAU,IAAI/V,EAAMgW,SAASvL,UAAW,UAAYtK,EAAKjmB,GAC9BA,GAAIimB,EAAKjmB,GACT0K,OAAQsb,EAAKtb,OACbiB,MAAOqa,EAAKra,SAGhDsa,EAAKwU,UACLxU,EAAKgK,OAEEhK,IAUPH,EAAQA,OACNgW,QAAU,SAAU9V,GACtB,IACI4K,EACAmL,EACAC,EAHA/V,EAAOH,EAAMsU,SAIb6B,EAAa,IA2HjB,OAtHAhW,EAAKsK,UAAYvK,EAAKuK,UAGtBtK,EAAKta,MAAQqa,EAAKra,MAGlBsa,EAAKjmB,GAAKgmB,EAAKhmB,GAGfimB,EAAKvb,OAASsb,EAAKtb,OAGnBub,EAAK4K,IAAMlhB,SAAS6S,cAAc,OAClCyD,EAAK4K,IAAIxN,aAAa,QAAS,sFAI/B4C,EAAKiW,KAAOvsB,SAAS6S,cAAc,OACnCyD,EAAKiW,KAAK7Y,aAAa,KAAM,UAAY4C,EAAKjmB,IAC9CimB,EAAKiW,KAAK7Y,aAAa,MAAO4C,EAAKyE,IAAM,uBACzCzE,EAAKiW,KAAK7Y,aAAa,QAAS,iDAChC4C,EAAK4K,IAAI/N,YAAYmD,EAAKiW,MAGrBjW,EAAKvb,OAAOyF,OAwEb4rB,EAAO,WACH9V,EAAKta,MAAMwwB,OAAQ,EACnBlW,EAAKiW,KAAK7Y,aAAa,MAAO4C,EAAKyE,IAAM,sBACzCzE,EAAKvb,OAAOA,OAAO+wB,iBAAiB,GAAGnpB,SAAU,GAGrD0pB,EAAS,WACL/V,EAAKta,MAAMwwB,OAAQ,EACnBlW,EAAKiW,KAAK7Y,aAAa,MAAO4C,EAAKyE,IAAM,uBACzCzE,EAAKvb,OAAOA,OAAO+wB,iBAAiB,GAAGnpB,SAAU,GAGrD2T,EAAKiW,KAAKE,QAAU,WACZnW,EAAKta,MAAMwwB,MACXH,IAEAD,OArFR9V,EAAKoW,OAAS1sB,SAAS6S,cAAc,SACrCyD,EAAKoW,OAAOhZ,aAAa,KAAM,UAAY4C,EAAKjmB,IAChDimB,EAAKoW,OAAOp4B,KAAO,QACnBgiB,EAAKoW,OAAOzlB,IAAM,EAClBqP,EAAKoW,OAAOxlB,IAAM,IAClBoP,EAAKoW,OAAOC,KAAO,GACnBrW,EAAKoW,OAAOnjC,MAAQ+iC,EAEpBhW,EAAKoW,OAAOhZ,aAAa,SAAU,YACnC4C,EAAK4K,IAAI/N,YAAYmD,EAAKoW,QAC1BpW,EAAKta,MAAM2vB,OAASrV,EAAKoW,OAAOnjC,MAAQ,IACxC+sB,EAAKta,MAAMwwB,OAAQ,EAEnBlW,EAAKoW,OAAOE,QAAU,WACdtW,EAAKoW,OAAOnjC,MAAQ,GACpB+sB,EAAKta,MAAMwwB,OAAQ,EACnBlW,EAAKiW,KAAK7Y,aAAa,MAAO4C,EAAKyE,IAAM,yBAEzCzE,EAAKta,MAAMwwB,OAAQ,EACnBlW,EAAKiW,KAAK7Y,aAAa,MAAO4C,EAAKyE,IAAM,uBAE7CzE,EAAKta,MAAM2vB,OAASrV,EAAKoW,OAAOnjC,MAAQ,KAI5C03B,EAAO,SAAUgL,GACb3V,EAAKoW,OAAOhZ,aAAa,QAAS,oGAEc4C,EAAK4K,IAAIiG,aAAe,iEAE1B8E,IAGlDG,EAAO,WACH9V,EAAKiW,KAAK7Y,aAAa,MAAO4C,EAAKyE,IAAM,sBACzCuR,EAAahW,EAAKoW,OAAOnjC,MACzB+sB,EAAKoW,OAAOnjC,MAAQ,EACpB+sB,EAAKta,MAAM2vB,OAAS,EACpBrV,EAAKta,MAAMwwB,OAAQ,GAGvBH,EAAS,WACL/V,EAAKiW,KAAK7Y,aAAa,MAAO4C,EAAKyE,IAAM,uBACzCzE,EAAKoW,OAAOnjC,MAAQ+iC,EACpBhW,EAAKta,MAAM2vB,OAASrV,EAAKoW,OAAOnjC,MAAQ,IACxC+sB,EAAKta,MAAMwwB,OAAQ,GAGvBlW,EAAKiW,KAAKE,QAAU,WACZnW,EAAKta,MAAMwwB,MACXH,IAEAD,KAKR9V,EAAK4K,IAAIyJ,YAAc,WACnB1J,EAAK,UAGT3K,EAAK4K,IAAI0J,WAAa,WAClB3J,EAAK,SAGTA,EAAK,SAyBTjhB,SAASshB,eAAehL,EAAKsK,WAAWzN,YAAYmD,EAAK4K,KAClD5K,GAKX9nB,OAAOq+B,aAAer+B,OAAOq+B,cAAgBr+B,OAAOs+B,qBAAsB,EAC1E3W,EAAMuK,WAAa,SAASrK,GAC5B,IAAK7nB,OAAOu+B,aAAc,OAAO,EACjC,IAAIzW,EAAOvkB,KACXA,KAAKi7B,QAAU3W,EAAK3M,QAAQujB,kBAAoBC,EAAE,IAAM7W,EAAKuK,WAC7D7uB,KAAKo7B,QAAUD,EAAE,kCACjBn7B,KAAKq7B,KAAOF,EAAE,iBACdn7B,KAAKq7B,KAAKC,SAASt7B,KAAKo7B,SAExBp7B,KAAK85B,WAAa,IAAI1V,EAAMmX,iBACxBvyB,OAAQsb,EAAKtb,SAEjBhJ,KAAK85B,WAAW0B,gBAAgBlX,EAAKtb,OAAOA,OAAQ,SAASjK,GACrDA,EACJ08B,MAAM18B,GAGNulB,EAAKtb,OAAO0K,iBAAiB,oBAAqB,SAAS3U,GAC3D,GAAwC,SAApCulB,EAAK3M,QAAQqiB,oBACbzV,EAAK8W,KAAK5M,OAAOiN,SACjBhP,MAAO3tB,EAAE48B,WAAWC,QAAQ,GAAK,KAC9B,UACA,GAAwC,SAApCtX,EAAK3M,QAAQqiB,oBAAgC,CACpD,IAAI1hC,EAAK,EAAIyG,EAAE48B,WAAWC,QAAQ,GAAK,IACvCrX,EAAK8W,KAAKtF,KACV8F,UAAa,SAAWvjC,EAAI,WAG5BisB,EAAK8W,KAAK5M,OAAOiN,SACjB7O,OAAQ9tB,EAAE48B,WAAWC,QAAQ,GAAK,KAC/B,SAKX57B,KAAKo7B,QAAQE,SAASt7B,KAAKi7B,UAE3B7W,EAAMuK,WAAWx2B,UAAUs2B,KAAO,WAClCzuB,KAAK85B,YAAc95B,KAAK85B,WAAWrL,OACnCzuB,KAAKo7B,SAAWp7B,KAAKo7B,QAAQnE,UAG7B7S,EAAMmX,gBAAkB,SAASjX,GACjC,IAAK7nB,OAAOu+B,aAAc,OAAO,EAEjCh7B,KAAK87B,QAAUr/B,OAAOu+B,aACtBh7B,KAAK27B,WAAa,EAClB37B,KAAKygB,OAASzgB,KAAK87B,QAAQC,sBAAsB,KAAM,EAAG,GAE1D/7B,KAAKg8B,SAAWh8B,KAAK87B,QAAQG,iBAC7Bj8B,KAAKg8B,SAASE,sBAAwB,GACtCl8B,KAAKg8B,SAASG,QAAU,KAExB,IAAI5X,EAAOvkB,KACXA,KAAKygB,OAAO2b,eAAiB,SAASvX,GAClC,IAAIrV,EAAQ,IAAI/K,WAAW8f,EAAKyX,SAASK,mBACzC9X,EAAKyX,SAASM,qBAAqB9sB,GAInC,IAHA,IAAI+sB,EAAS,EAETriC,EAASsV,EAAMtV,OACV3D,EAAI,EAAGA,EAAI2D,EAAQ3D,IAC5BgmC,GAAW/sB,EAAMjZ,GAGjBguB,EAAKoX,WAAaY,EAASriC,EAC3BoqB,EAAKtb,OAAO4b,eAAeriB,KAAM,oBAAqBo5B,WAAYpX,EAAKoX,eAG3EvX,EAAMmX,gBAAgBpjC,UAAUqjC,gBAAkB,SAASxyB,EAAQ/L,GACnErE,QAAQC,IAAI,yBACZ,IACImH,KAAKw8B,IAAMx8B,KAAK87B,QAAQW,wBAAwBzzB,GAChDhJ,KAAKw8B,IAAIlwB,QAAQtM,KAAKg8B,UACtBh8B,KAAKg8B,SAAS1vB,QAAQtM,KAAKygB,QAC3BzgB,KAAKygB,OAAOnU,QAAQtM,KAAK87B,QAAQY,kBACT,IAAbz/B,GACXA,EAAS,MAEX,MAAO8B,GACLnG,QAAQ0C,MAAMyD,QACU,IAAb9B,GACXA,EAAS8B,KAIbqlB,EAAMmX,gBAAgBpjC,UAAUs2B,KAAO,WACvCzuB,KAAKw8B,IAAI1kB,aACT9X,KAAKygB,OAAO3I,cAIZrc,EAAA;6GCviIA,IAAIgnB,GAA2CnsB,OAAOD,SACtD,WAkoFA,GA1nFA,SAAWA,EAAS0jB,GAQlB,IAAI0I,EAAKpsB,EAQTosB,EAAG7S,QAAU,SAQb6S,EAAGpW,SAAW,EAQdoW,EAAG3J,cAQH2J,EAAG5T,KAOH4T,EAAGka,WAWHla,EAAGnW,QAAU,SAAUI,EAAMkwB,GAC3B,IACIC,EACA5wB,EAFAsJ,EAAMkN,EAAGqa,KAAKC,SAASrwB,GAIvBqN,GAAUA,EAAOtN,WACnB8I,EAAIlJ,SAAWkJ,EAAIlJ,UAAY0N,EAAOtN,SAASJ,SAASnM,MAAM,GAAI,GAClEqV,EAAI7I,KAAO6I,EAAI7I,OAASqN,EAAO9L,SAC3B8L,EAAO9L,SAAS+uB,OAASjjB,EAAOtN,SAAS0L,UAC7C5C,EAAIjT,KAAOiT,EAAIjT,MAAQyX,EAAOtN,SAASnK,MAGzCu6B,EAAOpa,EAAGqa,KAAKG,UAAU1nB,GAEzB,IAAIoC,GACAjL,KAAM6I,EAAI7I,KACV0L,OAAQ,SAAW7C,EAAIlJ,SACvB/J,KAAMiT,EAAIjT,OAAS,SAAWiT,EAAIlJ,SAAW,IAAM,IACnDL,MAAOuJ,EAAIvJ,OAAS,IAgBxB,OAbAyW,EAAGqa,KAAKI,MAAMvlB,EAASilB,IAEnBjlB,EAAQ,yBAA4B8K,EAAGka,QAAQE,KACjD5wB,EAAS,IAAIwW,EAAGjW,OAAOmL,KAGpBA,EAAQ,yBAA2B1L,IACtCwW,EAAGka,QAAQE,GAAQ5wB,IAGrBA,EAASA,GAAUwW,EAAGka,QAAQE,IAGhBM,GAAG5nB,EAAI5J,KAAKzR,OAAS,EAAIqb,EAAI5J,KAAO,KA5FtD,CA+FG,WAAAP,QAAoB9U,QAASA,OAAOD,QAAW2J,KAAKyiB,MAAUziB,MAOjE,SAAW3J,EAAS0jB,GAQlB,IAAI+iB,GA0VH,oBAAsBra,GAAKA,GAAKnsB,OAAOD,SA1VrBymC,QASfM,EAAK,mMAELC,GAAS,SAAU,WAAY,YAAa,WAAY,OAAQ,WACvD,OAAQ,OAAQ,WAAY,OAAQ,YAAa,OAAQ,QACzD,UAEbP,EAAKC,SAAW,SAAUv7B,GAKxB,IAJA,IAAI7K,EAAIymC,EAAGnwB,KAAKzL,GAAO,IACnB+T,KACAhf,EAAI,GAEDA,KACLgf,EAAI8nB,EAAM9mC,IAAMI,EAAEJ,IAAM,GAG1B,OAAOgf,GAUTunB,EAAKG,UAAY,SAAU1nB,GACzB,IAAIlJ,EAAWkJ,EAAIlJ,SACfK,EAAO6I,EAAI7I,KACXpK,EAAOiT,EAAIjT,KAcf,MAZI,aAAcyX,GAChBrN,EAAOA,GAAQuB,SAAS+uB,OACxB16B,EAAOA,IAAqB,SAAZ+J,GACoB,WAA/B4B,SAASxB,SAASJ,SAAwB,IAAM4B,SAASxB,SAASnK,QAEvEoK,EAAOA,GAAQ,YAEVpK,GAAoB,SAAZ+J,IACX/J,EAAO,OAIH+J,GAAY,QAAU,MAAQK,EAAO,KAAOpK,GAAQ,KAW9Dw6B,EAAK9wB,MAAQ,SAAUsxB,EAAMC,GAC3B,IAAIvxB,EAAQ8wB,EAAKU,WAAWF,GAAQ,IAChCG,KAGJ,IAAK,IAAIC,KADTZ,EAAKI,MAAMlxB,EAAO8wB,EAAKU,WAAWD,GAAY,KAC7BvxB,EACXA,EAAM5T,eAAeslC,IACvBD,EAAWv8B,KAAKw8B,EAAO,IAAM1xB,EAAM0xB,IAIvC,OAAOD,EAAWvjC,OAAS,IAAMujC,EAAW14B,KAAK,KAAO,IAU1D+3B,EAAKU,WAAa,SAAUG,GAO1B,IANA,IAIIC,EAJA5xB,KACAlJ,EAAS66B,EAAGnsB,MAAM,KAClBjb,EAAI,EACJC,EAAIsM,EAAO5I,OAGR3D,EAAIC,IAAKD,GACdqnC,EAAK96B,EAAOvM,GAAGib,MAAM,MACd,KACLxF,EAAM4xB,EAAG,IAAMA,EAAG,IAItB,OAAO5xB,GAYT,IAAI6xB,GAAa,EAEjBf,EAAK/uB,KAAO,SAAU6F,GACpB,GAAI,aAAcmG,GAAkC,aAAxB9L,SAASqH,YAA6BuoB,EAChE,OAAOjqB,IAGTkpB,EAAKhtB,GAAGiK,EAAQ,OAAQnG,GAAI,IAS9BkpB,EAAKhtB,GAAK,SAAUokB,EAASrP,EAAOjR,EAAIkqB,GAClC5J,EAAQ/V,YACV+V,EAAQ/V,YAAY,KAAO0G,EAAOjR,GACzBsgB,EAAQxgB,kBACjBwgB,EAAQxgB,iBAAiBmR,EAAOjR,EAAIkqB,IAYxChB,EAAK/f,QAAU,SAAUb,GAEvB,GAAIA,GAAW,oBAAsBI,iBAAmBwgB,EAAKiB,GAAGC,QAC9D,OAAO,IAAI1hB,eAGb,GAAI,oBAAsBD,kBAAoBH,GAAW4gB,EAAKiB,GAAGC,SAC/D,OAAO,IAAI3hB,eAGb,IAAKH,EACH,IACE,OAAO,IAAIzf,QAAS,UAAU1C,OAAO,UAAUgL,KAAK,OAAO,qBAC3D,MAAMhG,IAGV,OAAO,MAcL,oBAAsBtC,QACxBqgC,EAAK/uB,KAAK,WACR8vB,GAAa,IAWjBf,EAAKmB,MAAQ,SAAUrqB,GACrB,IAAKkpB,EAAKiB,GAAGG,QAAU,oBAAsBC,cAC3C,OAAOvqB,IAGTkpB,EAAK/uB,KAAK,WACRoB,WAAWyE,EAAI,QAUnBkpB,EAAKI,MAAQ,SAAgBxb,EAAQ0c,EAAYC,EAAMC,GACrD,IAEIhH,EAFAiH,EAAOD,MACPE,OAAuB,IAARH,EAAsB,EAAIA,EAG7C,IAAK/G,KAAQ8G,EACPA,EAAWhmC,eAAek/B,IAASwF,EAAKjwB,QAAQ0xB,EAAMjH,GAAQ,IACpC,WAAxBlsB,QAAOsW,EAAO4V,KAAuBkH,EAIvC1B,EAAKI,MAAMxb,EAAO4V,GAAO8G,EAAW9G,GAAOkH,EAAQ,EAAGD,IAHtD7c,EAAO4V,GAAQ8G,EAAW9G,GAC1BiH,EAAKr9B,KAAKk9B,EAAW9G,MAO3B,OAAO5V,GASTob,EAAK2B,MAAQ,SAAUC,EAAMC,GAC3B7B,EAAKI,MAAMwB,EAAKvmC,UAAWwmC,EAAMxmC,YASnC2kC,EAAK8B,QAAU,SAAUF,EAAMC,GAC7B,SAAS/yB,KACTA,EAAEzT,UAAYwmC,EAAMxmC,UACpBumC,EAAKvmC,UAAY,IAAIyT,GAavBkxB,EAAKzoB,QAAUla,MAAMka,SAAW,SAAUpS,GACxC,MAA+C,mBAAxChL,OAAOkB,UAAUmH,SAAS5I,KAAKuL,IASxC66B,EAAK+B,UAAY,SAAUC,EAAKC,GAK9B,IAJA,IAAIC,KACAC,EAAUH,EAAI5kC,OAAS6kC,EAAK7kC,OAAS4kC,EAAMC,EAC3CG,EAAWJ,EAAI5kC,OAAS6kC,EAAK7kC,OAAS6kC,EAAOD,EAExCvoC,EAAI,EAAGC,EAAI0oC,EAAShlC,OAAQ3D,EAAIC,EAAGD,KACrCumC,EAAKjwB,QAAQoyB,EAASC,EAAS3oC,KAClCyoC,EAAI99B,KAAKg+B,EAAS3oC,IAGtB,OAAOyoC,GAUTlC,EAAKjwB,QAAU,SAAUiyB,EAAK9nC,EAAGT,GAE1B,IAAIsY,EAAIiwB,EAAI5kC,OAAjB,IAAyB3D,EAAIA,EAAI,EAAIA,EAAIsY,EAAI,EAAI,EAAItY,EAAIsY,EAAItY,GAAK,EAC7DA,EAAIsY,GAAKiwB,EAAIvoC,KAAOS,EAAGT,KAE5B,OAAOsY,GAAKtY,GAAK,EAAIA,GASvBumC,EAAKqC,QAAU,SAAUC,GAGvB,IAFA,IAAIN,KAEKvoC,EAAI,EAAGC,EAAI4oC,EAAIllC,OAAQ3D,EAAIC,EAAGD,IACrCuoC,EAAI59B,KAAKk+B,EAAI7oC,IAEf,OAAOuoC,GASThC,EAAKiB,MAQLjB,EAAKiB,GAAGC,QAAU,oBAAsB3hB,gBAAmB,WACzD,IACE,IAAIlb,EAAI,IAAIkb,eACZ,MAAOtd,GACP,OAAO,EAGT,YAA4BzE,GAArB6G,EAAEqc,gBAPgD,GAgB3Dsf,EAAKiB,GAAGG,OAAS,oBAAsBxhC,WAClC,UAAUkQ,KAAKlQ,UAAUC,WAQ9BmgC,EAAKiB,GAAGsB,QAAU,oBAAsB3iC,WACjC,oBAAoBkQ,KAAKlQ,UAAUC,WAhW5C,CAkWG,EAAgDqD,MAOnD,SAAW3J,EAASosB,GAclB,SAAS6c,KARTjpC,EAAQipC,aAAeA,EAgBvBA,EAAannC,UAAU2X,GAAK,SAAUhZ,EAAM8c,GAa1C,OAZK5T,KAAKu/B,UACRv/B,KAAKu/B,YAGFv/B,KAAKu/B,QAAQzoC,GAEP2rB,EAAGqa,KAAKzoB,QAAQrU,KAAKu/B,QAAQzoC,IACtCkJ,KAAKu/B,QAAQzoC,GAAMoK,KAAK0S,GAExB5T,KAAKu/B,QAAQzoC,IAASkJ,KAAKu/B,QAAQzoC,GAAO8c,GAJ1C5T,KAAKu/B,QAAQzoC,GAAQ8c,EAOhB5T,MAGTs/B,EAAannC,UAAU4X,YAAcuvB,EAAannC,UAAU2X,GAQ5DwvB,EAAannC,UAAU6X,KAAO,SAAUlZ,EAAM8c,GAC5C,IAAI4rB,EAAOx/B,KAEX,SAAS8P,IACP0vB,EAAKtvB,eAAepZ,EAAMgZ,GAC1B8D,EAAG9a,MAAMkH,KAAM/F,WAMjB,OAHA6V,EAAG6U,SAAW/Q,EACd5T,KAAK8P,GAAGhZ,EAAMgZ,GAEP9P,MASTs/B,EAAannC,UAAU+X,eAAiB,SAAUpZ,EAAM8c,GACtD,GAAI5T,KAAKu/B,SAAWv/B,KAAKu/B,QAAQzoC,GAAO,CACtC,IAAI2oC,EAAOz/B,KAAKu/B,QAAQzoC,GAExB,GAAI2rB,EAAGqa,KAAKzoB,QAAQorB,GAAO,CAGzB,IAFA,IAAIC,GAAO,EAEFnpC,EAAI,EAAGC,EAAIipC,EAAKvlC,OAAQ3D,EAAIC,EAAGD,IACtC,GAAIkpC,EAAKlpC,KAAOqd,GAAO6rB,EAAKlpC,GAAGouB,UAAY8a,EAAKlpC,GAAGouB,WAAa/Q,EAAK,CACnE8rB,EAAMnpC,EACN,MAIJ,GAAImpC,EAAM,EACR,OAAO1/B,KAGTy/B,EAAK7xB,OAAO8xB,EAAK,GAEZD,EAAKvlC,eACD8F,KAAKu/B,QAAQzoC,QAEb2oC,IAAS7rB,GAAO6rB,EAAK9a,UAAY8a,EAAK9a,WAAa/Q,WACrD5T,KAAKu/B,QAAQzoC,GAIxB,OAAOkJ,MASTs/B,EAAannC,UAAUgY,mBAAqB,SAAUrZ,GACpD,YAAawD,IAATxD,GACFkJ,KAAKu/B,WACEv/B,OAGLA,KAAKu/B,SAAWv/B,KAAKu/B,QAAQzoC,KAC/BkJ,KAAKu/B,QAAQzoC,GAAQ,MAGhBkJ,OASTs/B,EAAannC,UAAUoY,UAAY,SAAUzZ,GAa3C,OAZKkJ,KAAKu/B,UACRv/B,KAAKu/B,YAGFv/B,KAAKu/B,QAAQzoC,KAChBkJ,KAAKu/B,QAAQzoC,OAGV2rB,EAAGqa,KAAKzoB,QAAQrU,KAAKu/B,QAAQzoC,MAChCkJ,KAAKu/B,QAAQzoC,IAASkJ,KAAKu/B,QAAQzoC,KAG9BkJ,KAAKu/B,QAAQzoC,IAStBwoC,EAAannC,UAAUiY,KAAO,SAAUtZ,GACtC,IAAKkJ,KAAKu/B,QACR,OAAO,EAGT,IAAII,EAAU3/B,KAAKu/B,QAAQzoC,GAE3B,IAAK6oC,EACH,OAAO,EAGT,IAAIjnC,EAAOyB,MAAMhC,UAAU+H,MAAMxJ,KAAKuD,UAAW,GAEjD,GAAI,mBAAqB0lC,EACvBA,EAAQ7mC,MAAMkH,KAAMtH,OACf,KAAI+pB,EAAGqa,KAAKzoB,QAAQsrB,GAOzB,OAAO,EAJP,IAFA,IAAIpvB,EAAYovB,EAAQz/B,QAEf3J,EAAI,EAAGC,EAAI+Z,EAAUrW,OAAQ3D,EAAIC,EAAGD,IAC3Cga,EAAUha,GAAGuC,MAAMkH,KAAMtH,GAM7B,OAAO,GAzKX,MA6KI,IAAsB+pB,GAAKA,GAAKnsB,OAAOD,aACvC,IAAsBosB,GAAKA,GAAKnsB,OAAOspC,OAAOvpC,SAalD,SAAWA,QAASwpC,YAClB,aAGA,GAAIA,YAAcA,WAAWttB,MAC3B,OAAOlc,QAAQyY,MACbyD,MAAOstB,WAAWttB,MAClBxD,UAAW8wB,WAAW9wB,WAI1B,IAAID,KAAOzY,QAAQyY,QAEnB,SAASlD,EAAE5T,GAEP,OAAOA,EAAI,GAAK,IAAMA,EAAIA,EAG9B,SAAS8nC,KAAKjpC,EAAGiB,GACf,OAAOioC,SAASlpC,EAAEmpC,WACdnpC,EAAEopC,iBAAuB,IACzBr0B,EAAE/U,EAAEqpC,cAAgB,GAAK,IACzBt0B,EAAE/U,EAAEspC,cAAqB,IACzBv0B,EAAE/U,EAAEupC,eAAqB,IACzBx0B,EAAE/U,EAAEwpC,iBAAqB,IACzBz0B,EAAE/U,EAAEypC,iBAAqB,IAAM,KAGrC,IAAIC,GAAK,2GACLC,UAAY,2HACZC,IACAC,OACAC,MACIC,KAAM,MACNC,KAAM,MACNC,KAAM,MACNC,KAAM,MACNC,KAAM,MACNC,IAAM,MACNC,KAAM,QAEVC,IAGJ,SAASC,MAAMn4B,GAQX,OADAu3B,UAAUa,UAAY,EACfb,UAAU5zB,KAAK3D,GAAU,IAAMA,EAAO+D,QAAQwzB,UAAW,SAAUr/B,GACtE,IAAIvK,EAAI+pC,KAAKx/B,GACb,MAAoB,iBAANvK,EAAiBA,EAC3B,OAAS,OAASuK,EAAE+P,WAAW,GAAG5R,SAAS,KAAKY,OAAO,KAC1D,IAAM,IAAM+I,EAAS,IAI9B,SAASzH,IAAI1J,EAAKwpC,GAId,IAAI/qC,EACA0oB,EACAte,EACAzG,EAEAqnC,EADAC,EAAOf,IAEPjpC,EAAQ8pC,EAAOxpC,GAiBnB,OAbIN,aAAiBqZ,OACjBrZ,EAAQsoC,KAAKhoC,IAME,mBAARqpC,MACP3pC,EAAQ2pC,IAAIzqC,KAAK4qC,EAAQxpC,EAAKN,IAKlC4T,QAAe5T,IACf,IAAK,SACD,OAAO4pC,MAAM5pC,GAEjB,IAAK,SAID,OAAOuoC,SAASvoC,GAASma,OAAOna,GAAS,OAE7C,IAAK,UACL,IAAK,OAMD,OAAOma,OAAOna,GAKlB,IAAK,SAKD,IAAKA,EACD,MAAO,OAUX,GALAipC,KAAOC,OACPa,KAI+C,mBAA3CtqC,OAAOkB,UAAUmH,SAASxG,MAAMtB,GAA6B,CAM7D,IADA0C,EAAS1C,EAAM0C,OACV3D,EAAI,EAAGA,EAAI2D,EAAQ3D,GAAK,EACzBgrC,EAAQhrC,GAAKiL,IAAIjL,EAAGiB,IAAU,OAUlC,OAJAmJ,EAAuB,IAAnB4gC,EAAQrnC,OAAe,KAAOumC,IAC9B,MAAQA,IAAMc,EAAQx8B,KAAK,MAAQ07B,KAAO,KAAOe,EAAO,IACxD,IAAMD,EAAQx8B,KAAK,KAAO,IAC9B07B,IAAMe,EACC7gC,EAKX,GAAIwgC,KAAsB,WAAf/1B,QAAO+1B,KAEd,IADAjnC,EAASinC,IAAIjnC,OACR3D,EAAI,EAAGA,EAAI2D,EAAQ3D,GAAK,EACH,iBAAX4qC,IAAI5qC,KAEXoK,EAAIa,IADJyd,EAAIkiB,IAAI5qC,GACGiB,KAEP+pC,EAAQrgC,KAAKkgC,MAAMniB,IAAMwhB,IAAM,KAAO,KAAO9/B,QAQzD,IAAKse,KAAKznB,EACFP,OAAOkB,UAAUC,eAAe1B,KAAKc,EAAOynB,KAC5Cte,EAAIa,IAAIyd,EAAGznB,KAEP+pC,EAAQrgC,KAAKkgC,MAAMniB,IAAMwhB,IAAM,KAAO,KAAO9/B,GAa7D,OAJAA,EAAuB,IAAnB4gC,EAAQrnC,OAAe,KAAOumC,IAC9B,MAAQA,IAAMc,EAAQx8B,KAAK,MAAQ07B,KAAO,KAAOe,EAAO,IACxD,IAAMD,EAAQx8B,KAAK,KAAO,IAC9B07B,IAAMe,EACC7gC,GAMfmO,KAAKC,UAAY,SAAUvX,EAAOiqC,EAAUC,GAQxC,IAAInrC,EAOJ,GANAkqC,IAAM,GACNC,OAAS,GAKY,iBAAVgB,EACP,IAAKnrC,EAAI,EAAGA,EAAImrC,EAAOnrC,GAAK,EACxBmqC,QAAU,QAKU,iBAAVgB,IACdhB,OAASgB,GAOb,GADAP,IAAMM,EACFA,GAAgC,mBAAbA,IACM,WAApBr2B,QAAOq2B,IACmB,iBAApBA,EAASvnC,QACpB,MAAM,IAAIgV,MAAM,kBAMpB,OAAO1N,IAAI,IAAKmgC,GAAInqC,KAKxBsX,KAAKyD,MAAQ,SAAU+Y,KAAMsW,SAIzB,IAAI/yB,EAEJ,SAASgzB,KAAKP,EAAQxpC,GAKlB,IAAImnB,EAAGte,EAAGnJ,EAAQ8pC,EAAOxpC,GACzB,GAAIN,GAA0B,WAAjB4T,QAAO5T,GAChB,IAAKynB,KAAKznB,EACFP,OAAOkB,UAAUC,eAAe1B,KAAKc,EAAOynB,UAElC3kB,KADVqG,EAAIkhC,KAAKrqC,EAAOynB,IAEZznB,EAAMynB,GAAKte,SAEJnJ,EAAMynB,IAK7B,OAAO2iB,QAAQlrC,KAAK4qC,EAAQxpC,EAAKN,GA8BrC,GAtBA8zB,KAAO3Z,OAAO2Z,MACdiV,GAAGc,UAAY,EACXd,GAAG3zB,KAAK0e,QACRA,KAAOA,KAAKte,QAAQuzB,GAAI,SAAUp/B,GAC9B,MAAO,OACF,OAASA,EAAE+P,WAAW,GAAG5R,SAAS,KAAKY,OAAO,MAiBvD,gBACK0M,KAAK0e,KAAKte,QAAQ,sCAAuC,KACrDA,QAAQ,mEAAoE,KAC5EA,QAAQ,uBAAwB,KAYzC,OALA6B,EAAIizB,KAAK,IAAMxW,KAAO,KAKI,mBAAZsW,QACVC,MAAMF,GAAI9yB,GAAI,IAAMA,EAK5B,MAAM,IAAIkzB,YAAY,eAhT5B,MAoTI,IAAsBtf,GAAKA,GAAKnsB,OAAOD,QACvB,oBAATyY,KAAuBA,UAAOxU,GASzC,SAAWjE,EAASosB,GAQlB,IAAI9M,EAAStf,EAAQsf,UAMjBiJ,EAAUjJ,EAAOiJ,SACjB,aACA,UACA,YACA,UACA,OACA,QACA,MACA,QACA,QAOAojB,EAAUrsB,EAAOqsB,SACjB,0BACA,wBACA,gBAOAC,EAAStsB,EAAOssB,QAChB,aAOAnzB,EAAO2T,EAAG3T,KACVjC,EAAU4V,EAAGqa,KAAKjwB,QAQtB8I,EAAOqJ,aAAe,SAAU7L,GAC9B,IAAI5Q,EAAOsK,EAAQ+R,EAASzL,EAAO5Q,MAC/BjE,EAAK6U,EAAO7U,IAAM,GAClB4jC,EAAW/uB,EAAO+uB,UAAY,GAC9Bpe,EAAM3Q,EAAO2Q,IACb3R,EAAO,KAEX,OAAQgB,EAAO5Q,MACb,IAAK,QACH,IAAI4/B,EAAShvB,EAAOgvB,OAASt1B,EAAQm1B,EAAS7uB,EAAOgvB,QAAU,GAC3DC,EAAMjvB,EAAO8uB,OAASp1B,EAAQo1B,EAAQ9uB,EAAO8uB,QAAU,GAE5C,KAAXE,GAAyB,KAARC,IACnBjwB,EAAOgwB,GAAkB,KAARC,EAAc,IAAMA,EAAO,KAE9C,MAEF,IAAK,UACiB,KAAhBjvB,EAAOhB,OACTA,EAAOgB,EAAOhB,MAChB,MAEF,IAAK,QACH,IAAIgV,GAAOrwB,KAAMqc,EAAOrc,MAEpBqc,EAAOza,MAAQya,EAAOza,KAAKwB,SAC7BitB,EAAGzuB,KAAOya,EAAOza,MAGnByZ,EAAOrD,EAAKC,UAAUoY,GACtB,MAEF,IAAK,OACHhV,EAAOrD,EAAKC,UAAUoE,EAAOhB,MAC7B,MAEF,IAAK,UACCgB,EAAOwqB,KACTxrB,EAAOgB,EAAOwqB,IAChB,MAEF,IAAK,MACHxrB,EAAOgB,EAAOkvB,OACTlvB,EAAOza,MAAQya,EAAOza,KAAKwB,OACxB,IAAM4U,EAAKC,UAAUoE,EAAOza,MAAQ,IAKhD,IAAI4pC,GACA//B,EACAjE,GAAa,QAAPwlB,EAAgB,IAAM,IAC5Boe,GAOJ,OAHa,OAAT/vB,QAA0B7X,IAAT6X,GACnBmwB,EAAQphC,KAAKiR,GAERmwB,EAAQv9B,KAAK,MAUtB4Q,EAAO6I,cAAgB,SAAUI,GAC/B,IAAI2jB,EAAU,GAEd,GAAsB,GAAlB3jB,EAAQ1kB,OACV,OAAO0kB,EAAQ,GAEjB,IAAK,IAAIroB,EAAI,EAAGC,EAAIooB,EAAQ1kB,OAAQ3D,EAAIC,EAAGD,IAAK,CAE9CgsC,GAAW,IADE3jB,EAAQroB,GACQ2D,OAAS,IAAW0kB,EAAQroB,GAG3D,OAAOgsC,GAST,IAAIC,EAAS,8CAEb7sB,EAAOgJ,aAAe,SAAUxM,GAG9B,KAFIswB,EAAStwB,EAAKvV,MAAM4lC,IAEX,SAEb,IAAIlkC,EAAKmkC,EAAO,IAAM,GAElBtvB,GADAhB,EAAOswB,EAAO,IAAM,IAEhBlgC,KAAMqc,EAAQ6jB,EAAO,IACrBP,SAAUO,EAAO,IAAM,KAa/B,OATInkC,IACF6U,EAAO7U,GAAKA,EACRmkC,EAAO,GACTtvB,EAAO2Q,IAAM,OAEb3Q,EAAO2Q,KAAM,GAIT3Q,EAAO5Q,MACb,IAAK,QACH,IAAIkgC,EAAStwB,EAAKX,MAAM,KACxB2B,EAAOgvB,OAASH,EAAQS,EAAO,KAAO,GACtCtvB,EAAO8uB,OAASA,EAAOQ,EAAO,KAAO,GACrC,MAEF,IAAK,UACHtvB,EAAOhB,KAAOA,GAAQ,GACtB,MAEF,IAAK,QACH,IACE,IAAIjN,EAAO4J,EAAKyD,MAAMJ,GACtBgB,EAAOrc,KAAOoO,EAAKpO,KACnBqc,EAAOza,KAAOwM,EAAKxM,KACnB,MAAOqG,IAEToU,EAAOza,KAAOya,EAAOza,SACrB,MAEF,IAAK,OACH,IACEya,EAAOhB,KAAOrD,EAAKyD,MAAMJ,GACzB,MAAOpT,IACT,MAEF,IAAK,UACHoU,EAAOwqB,GAAKxrB,GAAQ,GACpB,MAEF,IAAK,MAEH,IADIswB,EAAStwB,EAAKvV,MAAM,yBAEtBuW,EAAOkvB,MAAQI,EAAO,GACtBtvB,EAAOza,QAEH+pC,EAAO,IACT,IACEtvB,EAAOza,KAAO+pC,EAAO,GAAK3zB,EAAKyD,MAAMkwB,EAAO,OAC5C,MAAO1jC,KAUjB,OAAOoU,GAUTwC,EAAO2I,cAAgB,SAAUnM,GAE/B,GAAsB,KAAlBA,EAAKxF,OAAO,GAAgB,CAG9B,IAFA,IAAIqyB,KAEKzoC,EAAI,EAAG2D,EAAS,GAAI3D,EAAI4b,EAAKjY,OAAQ3D,IACtB,KAAlB4b,EAAKxF,OAAOpW,IACdyoC,EAAI99B,KAAKyU,EAAOgJ,aAAaxM,EAAKV,OAAOlb,EAAI,GAAGkb,OAAO,EAAGvX,KAC1D3D,GAAK8b,OAAOnY,GAAU,EACtBA,EAAS,IAETA,GAAUiY,EAAKxF,OAAOpW,GAI1B,OAAOyoC,EAEP,OAAQrpB,EAAOgJ,aAAaxM,KAvPlC,MA4PI,IAAsBsQ,GAAKA,GAAKnsB,OAAOD,aACvC,IAAsBosB,GAAKA,GAAKnsB,OAAOspC,OAAOvpC,SAQlD,SAAWA,EAASosB,GAelB,SAASjI,EAAWvO,EAAQy2B,GAC1B1iC,KAAKiM,OAASA,EACdjM,KAAK0iC,OAASA,EAXhBrsC,EAAQmkB,UAAYA,EAkBpBiI,EAAGqa,KAAK2B,MAAMjkB,EAAWiI,EAAG6c,cAS5B9kB,EAAUriB,UAAUwqC,WAAa,WAC/B,OAAO,GAYTnoB,EAAUriB,UAAUglB,OAAS,SAAUhL,GAUrC,GATAnS,KAAK4iC,qBAKD5iC,KAAKiM,OAAO8W,WAAa/iB,KAAKiM,OAAOuJ,YAAcxV,KAAKiM,OAAO6K,eACjE9W,KAAK6iC,kBAGM,KAAT1wB,EAAa,CAEf,IAAI2wB,EAAOrgB,EAAG9M,OAAO2I,cAAcnM,GAEnC,GAAI2wB,GAAQA,EAAK5oC,OACf,IAAK,IAAI3D,EAAI,EAAGC,EAAIssC,EAAK5oC,OAAQ3D,EAAIC,EAAGD,IACtCyJ,KAAKgb,SAAS8nB,EAAKvsC,IAKzB,OAAOyJ,MASTwa,EAAUriB,UAAU6iB,SAAW,SAAU7H,GAGvC,OAFAnT,KAAKiM,OAAO82B,sBAEO,aAAf5vB,EAAO5Q,KACFvC,KAAK4b,eAGK,WAAfzI,EAAO5Q,MAAwC,IAAnB4Q,EAAO+uB,UACrCliC,KAAKgjC,YAGY,SAAf7vB,EAAO5Q,MAAoC,aAAjB4Q,EAAO8uB,SACnCjiC,KAAKijC,QAAS,GAGhBjjC,KAAKiM,OAAO+O,SAAS7H,GAEdnT,OASTwa,EAAUriB,UAAU0qC,gBAAkB,WACpC,IAAK7iC,KAAKkjC,aAAc,CACtB,IAAI1D,EAAOx/B,KAEXA,KAAKkjC,aAAe/zB,WAAW,WAC7BqwB,EAAK2D,gBACJnjC,KAAKiM,OAAOi3B,gBAUnB1oB,EAAUriB,UAAUgrC,aAAe,WAIjC,OAHInjC,KAAKijC,QAAQjjC,KAAKoX,QACtBpX,KAAKojC,gBACLpjC,KAAKiM,OAAOk3B,eACLnjC,MASTwa,EAAUriB,UAAU6qC,UAAY,WAE9B,OADAhjC,KAAKiM,OAAO+2B,YACLhjC,MASTwa,EAAUriB,UAAUyqC,kBAAoB,WAClC5iC,KAAKkjC,eACP5zB,aAAatP,KAAKkjC,cAClBljC,KAAKkjC,aAAe,OAUxB1oB,EAAUriB,UAAUirC,cAAgB,WAClCpjC,KAAK4iC,oBAED5iC,KAAKqjC,eACP/zB,aAAatP,KAAKqjC,gBAWtB7oB,EAAUriB,UAAUgb,OAAS,SAAUA,GACrCnT,KAAK4I,KAAK6Z,EAAG9M,OAAOqJ,aAAa7L,KAWnCqH,EAAUriB,UAAUyjB,YAAc,SAAU0nB,GAC1CtjC,KAAKmT,QAAS5Q,KAAM,eAStBiY,EAAUriB,UAAUqjB,OAAS,WAC3Bxb,KAAKijC,QAAS,EACdjjC,KAAK4iC,oBACL5iC,KAAKiM,OAAOuP,UAUdhB,EAAUriB,UAAU+iB,QAAU,WAQ5Blb,KAAKijC,QAAS,EACdjjC,KAAKiM,OAAOiP,UACZlb,KAAKmjC,gBAWP3oB,EAAUriB,UAAUorC,WAAa,WAC/B,IAAI5rB,EAAU3X,KAAKiM,OAAO0L,QAE1B,OAAO3X,KAAKyyB,SAAW,MACnB9a,EAAQjL,KAAO,IAAMiL,EAAQrV,KAAO,IACpCqV,EAAQ6rB,SAAW,IAAM/gB,EAAGpW,SAC5B,IAAMrM,KAAKlJ,KAAO,IAAMkJ,KAAK0iC,QAWnCloB,EAAUriB,UAAUsrC,MAAQ,SAAUx3B,EAAQ2H,GAC5CA,EAAGld,KAAKsJ,OApPZ,MAuPI,IAAsByiB,GAAKA,GAAKnsB,OAAOD,aACvC,IAAsBosB,GAAKA,GAAKnsB,OAAOspC,OAAOvpC,SAQlD,SAAWA,EAASosB,EAAI1I,GAetB,SAASvN,EAAQmL,GA8Bf,GA7BA3X,KAAK2X,SACDrV,KAAM,GACN8V,QAAQ,EACRnK,SAAU,aAAc8L,GAAS9L,SACjCu1B,SAAU,YACV1qB,WAAY2J,EAAG3J,WACf4qB,kBAAmB,IACnBC,2BAA2B,EAC3B3sB,WAAa,EACb4sB,qBAAsB,IACtBC,qBAAsBC,IACtBC,eAAgB,IAChBC,4BAA6B,GAC7BC,6BAA6B,EAC7BC,gBAAgB,EAChBC,oBAAqB,MACrBC,aAAe,GAGnB3hB,EAAGqa,KAAKI,MAAMl9B,KAAK2X,QAASA,GAE5B3X,KAAK+iB,WAAY,EACjB/iB,KAAK+V,MAAO,EACZ/V,KAAKwV,YAAa,EAClBxV,KAAK8W,cAAe,EACpB9W,KAAKqkC,cACLrkC,KAAK2E,UACL3E,KAAKskC,UAAW,EAEZtkC,KAAK2X,QAAQ,gCACX3X,KAAKukC,aAAe9hB,EAAGqa,KAAKiB,GAAGC,SAAU,CAC7C,IAAIwB,EAAOx/B,KACXyiB,EAAGqa,KAAKhtB,GAAGiK,EAAQ,eAAgB,WACjCylB,EAAKgF,mBACJ,GAGDxkC,KAAK2X,QAAQ,iBACf3X,KAAKsM,UAqDT,SAASm4B,KArGTpuC,EAAQmW,OAASA,EAwDjBiW,EAAGqa,KAAK2B,MAAMjyB,EAAQiW,EAAG6c,cAQzB9yB,EAAOrU,UAAUglC,GAAK,SAAUrmC,GAS9B,OARKkJ,KAAKqkC,WAAWvtC,KACnBkJ,KAAKqkC,WAAWvtC,GAAQ,IAAI2rB,EAAGiiB,gBAAgB1kC,KAAMlJ,GAExC,KAATA,GACFkJ,KAAKqkC,WAAWvtC,GAAMqc,QAAS5Q,KAAM,aAIlCvC,KAAKqkC,WAAWvtC,IASzB0V,EAAOrU,UAAUo6B,QAAU,WAGzB,IAAIrgB,EAEJ,IAAK,IAAI3b,KAJTyJ,KAAKoQ,KAAKtX,MAAMkH,KAAM/F,WAIR+F,KAAKqkC,WACbrkC,KAAKqkC,WAAWjsC,eAAe7B,KACjC2b,EAAMlS,KAAKm9B,GAAG5mC,IACVouC,MAAM7rC,MAAMoZ,EAAKjY,YAa3BuS,EAAOrU,UAAUysC,UAAY,SAAUhxB,GACrC,IAAI4rB,EAAOx/B,KACP2X,EAAU3X,KAAK2X,QAEnB,SAASktB,EAAU1yB,GACbA,aAAgBjD,OAClBswB,EAAKhqB,YAAa,EAClBgqB,EAAKvkB,QAAQ9I,EAAKnD,UAElB4E,EAAG9a,MAAM,KAAMqZ,EAAKX,MAAM,MAI9B,IAAIwX,GACE,QAAUrR,EAAQS,OAAS,IAAM,IAAM,KACvCT,EAAQjL,KAAO,IAAMiL,EAAQrV,KAC7BqV,EAAQ6rB,SACR/gB,EAAGpW,SACHoW,EAAGqa,KAAK9wB,MAAMhM,KAAK2X,QAAQ3L,MAAO,OAAQ,IAAI6E,OAChD9L,KAAK,KAET,GAAI/E,KAAKukC,cAAgB9hB,EAAGqa,KAAKiB,GAAGC,QAAS,CAC3C,IAAI8G,EAAW72B,SAAS+S,qBAAqB,UAAU,GACnDP,EAASxS,SAAS6S,cAAc,UAEpCL,EAAOM,IAAMiI,EAAM,UAAYvG,EAAG5T,EAAE3U,OACpC4qC,EAASpkB,WAAWO,aAAaR,EAAQqkB,GAEzCriB,EAAG5T,EAAE3N,KAAK,SAAUiR,GAClB0yB,EAAS1yB,GACTsO,EAAOC,WAAWC,YAAYF,SAE3B,CACL,IAAIpD,EAAMoF,EAAGqa,KAAK/f,UAElBM,EAAItH,KAAK,MAAOiT,GAAK,GACjBhpB,KAAKukC,cACPlnB,EAAIG,iBAAkB,GAExBH,EAAIO,mBAAqB,WACD,GAAlBP,EAAI/H,aACN+H,EAAIO,mBAAqB6mB,EAEP,KAAdpnB,EAAIU,OACN8mB,EAASxnB,EAAIM,cACU,KAAdN,EAAIU,OACbyhB,EAAKvkB,QAAQoC,EAAIM,eAEjB6hB,EAAKhqB,YAAa,GACjBgqB,EAAK1oB,cAAgB0oB,EAAKvkB,QAAQoC,EAAIM,iBAI7CN,EAAIzU,KAAK,QAUb4D,EAAOrU,UAAU4sC,aAAe,SAAUC,GAGxC,IAFA,IAEgB5iC,EAFZ0W,EAAaksB,GAAYhlC,KAAK8Y,WAEzBviB,EAAI,EAAc6L,EAAY0W,EAAWviB,GAAIA,IACpD,GAAIksB,EAAGjI,UAAUpY,IACZqgB,EAAGjI,UAAUpY,GAAW8f,MAAMliB,SAC5BA,KAAKukC,aAAe9hB,EAAGjI,UAAUpY,GAAW6iC,aAAajlC,OAC9D,OAAO,IAAIyiB,EAAGjI,UAAUpY,GAAWpC,KAAMA,KAAKklC,WAIlD,OAAO,MAWT14B,EAAOrU,UAAUmU,QAAU,SAAUsH,GACnC,GAAI5T,KAAKwV,WACP,OAAOxV,KAGT,IAAIw/B,EAAOx/B,KA2DX,OA1DAw/B,EAAKhqB,YAAa,EAElBxV,KAAK4kC,UAAU,SAAUjqB,EAAK2oB,EAAWlsB,EAAO0B,GAC9C0mB,EAAK0F,UAAYvqB,EACjB6kB,EAAK0D,aAAuB,IAAR9rB,EACpBooB,EAAK2F,iBAA+B,IAAZ7B,EACpB9D,EAAK1mB,aACL0mB,EAAK1mB,WAAa0mB,EAAK4F,eAAkBtsB,EAAa2J,EAAGqa,KAAK+B,UAC1D/lB,EAAWtH,MAAM,KACjBguB,EAAK7nB,QAAQmB,YACb0mB,EAAK7nB,QAAQmB,YAErB0mB,EAAKuD,sBAEL,SAASz2B,EAASwM,GAIhB,GAHI0mB,EAAKp9B,WAAWo9B,EAAKp9B,UAAUghC,gBAEnC5D,EAAKp9B,UAAYo9B,EAAKuF,aAAajsB,IAC9B0mB,EAAKp9B,UAAW,OAAOo9B,EAAKjN,QAAQ,kBAGzCiN,EAAKp9B,UAAUqhC,MAAMjE,EAAM,WACzBA,EAAKhqB,YAAa,EAClBgqB,EAAKjN,QAAQ,aAAciN,EAAKp9B,UAAUtL,MAC1C0oC,EAAKp9B,UAAU2T,OAEXypB,EAAK7nB,QAAQ,qBACf6nB,EAAK6F,oBAAsBl2B,WAAW,WACpC,IAAKqwB,EAAKzc,YACRyc,EAAKhqB,YAAa,EAEdgqB,EAAK7nB,QAAQ,4BAA4B,CAG3C,IAFA,IAAI2tB,EAAY9F,EAAK1mB,WAEdwsB,EAAUprC,OAAS,GAAKorC,EAAU13B,OAAO,EAAE,GAAG,IAC9C4xB,EAAKp9B,UAAUtL,OAEhBwuC,EAAUprC,OACZoS,EAAQg5B,GAER9F,EAAKjN,QAAQ,oBAIpBiN,EAAK7nB,QAAQ,uBAKtBrL,CAAQkzB,EAAK1mB,YAEb0mB,EAAKxvB,KAAK,UAAW,WACnBV,aAAakwB,EAAK6F,qBAElBzxB,GAAmB,mBAANA,GAAoBA,QAI9B5T,MAUTwM,EAAOrU,UAAU4qC,oBAAsB,WAErC,GADAzzB,aAAatP,KAAKulC,wBACfvlC,KAAKoC,WAAcpC,KAAKoC,UAAUugC,aAArC,CAEA,IAAInD,EAAOx/B,KACXA,KAAKulC,sBAAwBp2B,WAAW,WACtCqwB,EAAKp9B,UAAU8Y,WACdlb,KAAKmlC,oBAWV34B,EAAOrU,UAAUgb,OAAS,SAAUhB,GAOlC,OANInS,KAAK+iB,YAAc/iB,KAAKskC,SAC1BtkC,KAAKoC,UAAU+Q,OAAOhB,GAEtBnS,KAAK2E,OAAOzD,KAAKiR,GAGZnS,MASTwM,EAAOrU,UAAUqtC,UAAY,SAAU7kC,GACrCX,KAAKskC,SAAW3jC,GAEXA,GAAKX,KAAK+iB,WAAa/iB,KAAK2E,OAAOzK,SACjC8F,KAAK2X,QAAL,aACH3X,KAAKylC,gBAYXj5B,EAAOrU,UAAUstC,YAAc,WAC7BzlC,KAAKoC,UAAUsjC,QAAQ1lC,KAAK2E,QAC5B3E,KAAK2E,WAWP6H,EAAOrU,UAAU2f,WAAa,WAU5B,OATI9X,KAAK+iB,WAAa/iB,KAAKwV,cACrBxV,KAAK+V,MACP/V,KAAKm9B,GAAG,IAAIhqB,QAAS5Q,KAAM,eAI7BvC,KAAKmjC,aAAa,WAGbnjC,MASTwM,EAAOrU,UAAUqsC,eAAiB,WAEhC,IAAInnB,EAAMoF,EAAGqa,KAAK/f,UACdxH,GACA,QAAUvV,KAAK2X,QAAQS,OAAS,IAAM,IAAM,KAC5CpY,KAAK2X,QAAQjL,KAAO,IAAM1M,KAAK2X,QAAQrV,KACvCtC,KAAK2X,QAAQ6rB,SACb/gB,EAAGpW,SACH,GACArM,KAAKklC,WACPngC,KAAK,KAAO,iBAEdsY,EAAItH,KAAK,MAAOR,GAAK,GACrB8H,EAAIzU,KAAK,MAGT5I,KAAKmjC,aAAa,WAWpB32B,EAAOrU,UAAUosC,UAAY,WAE3B,IAAIjiC,EAAOyX,EAAOtN,SAASnK,OACxB,UAAYyX,EAAOtN,SAASJ,SAAW,IAAM,IAEhD,OAAOrM,KAAK2X,QAAQjL,OAASqN,EAAOtN,SAAS0L,UACxCnY,KAAK2X,QAAQrV,MAAQA,GAS5BkK,EAAOrU,UAAU6qC,UAAY,WACtBhjC,KAAK+iB,YACR/iB,KAAK+iB,WAAY,EACjB/iB,KAAKwV,YAAa,EACbxV,KAAKskC,UAERtkC,KAAKwlC,WAAU,GAEjBxlC,KAAKoQ,KAAK,aAUd5D,EAAOrU,UAAUqjB,OAAS,WACxBxb,KAAK+V,MAAO,GASdvJ,EAAOrU,UAAU+iB,QAAU,WACzBlb,KAAK+V,MAAO,EACZzG,aAAatP,KAAKulC,wBASpB/4B,EAAOrU,UAAU6iB,SAAW,SAAU7H,GACpCnT,KAAKm9B,GAAGhqB,EAAO+uB,UAAUlnB,SAAS7H,IASpC3G,EAAOrU,UAAU8iB,QAAU,SAAU0qB,GAC/BA,GAAOA,EAAI1D,QACM,cAAf0D,EAAI1D,SAA2BjiC,KAAK+iB,WAAa/iB,KAAKwV,cACxDxV,KAAK8X,aACD9X,KAAK2X,QAAQX,WACfhX,KAAKgX,aAKXhX,KAAKuyB,QAAQ,QAASoT,GAAOA,EAAIxD,OAASwD,EAAIxD,OAASwD,IASzDn5B,EAAOrU,UAAUgrC,aAAe,SAAUhB,GACxC,IAAIyD,EAAe5lC,KAAK+iB,UACpB8iB,EAAgB7lC,KAAKwV,WAEzBxV,KAAK+iB,WAAY,EACjB/iB,KAAKwV,YAAa,EAClBxV,KAAK+V,MAAO,GAER6vB,GAAgBC,KAClB7lC,KAAKoC,UAAUgV,QACfpX,KAAKoC,UAAUghC,gBACXwC,IACF5lC,KAAKuyB,QAAQ,aAAc4P,GAEvB,UAAYA,GAAUniC,KAAK2X,QAAQX,YAAchX,KAAK8W,cACxD9W,KAAKgX,eAYbxK,EAAOrU,UAAU6e,UAAY,WAC3BhX,KAAK8W,cAAe,EACpB9W,KAAK6U,qBAAuB,EAC5B7U,KAAK8U,kBAAoB9U,KAAK2X,QAAQ,sBAEtC,IAAI6nB,EAAOx/B,KACP8lC,EAAc9lC,KAAK2X,QAAQ,6BAC3BouB,EAAc/lC,KAAK2X,QAAQ,2BAC3BquB,EAAQhmC,KAAK2X,QAAQ,sBAEzB,SAASI,IACP,GAAIynB,EAAKzc,UAAW,CAClB,IAAK,IAAIxsB,KAAKipC,EAAK6E,WACb7E,EAAK6E,WAAWjsC,eAAe7B,IAAM,KAAOA,GAC5CipC,EAAK6E,WAAW9tC,GAAG4c,QAAS5Q,KAAM,YAGxCi9B,EAAKjN,QAAQ,YAAaiN,EAAKp9B,UAAUtL,KAAM0oC,EAAK3qB,sBAGtDvF,aAAakwB,EAAKyG,mBAElBzG,EAAKtvB,eAAe,iBAAkBg2B,GACtC1G,EAAKtvB,eAAe,UAAWg2B,GAE/B1G,EAAK1oB,cAAe,SAEb0oB,EAAK3qB,4BACL2qB,EAAK1qB,yBACL0qB,EAAKyG,yBACLzG,EAAK2G,eAEZ3G,EAAK7nB,QAAQ,2BAA6BouB,EAG5C,SAASG,IACP,GAAK1G,EAAK1oB,aAIV,OAAI0oB,EAAKzc,UACAhL,IAGLynB,EAAKhqB,YAAcgqB,EAAK1oB,aACnB0oB,EAAKyG,kBAAoB92B,WAAW+2B,EAAgB,UAGzD1G,EAAK3qB,wBAA0BixB,EAC5BtG,EAAK2G,gBAQR3G,EAAKjN,QAAQ,oBACbxa,MARAynB,EAAK1vB,GAAG,iBAAkBo2B,GAC1B1G,EAAK7nB,QAAQ,4BAA6B,EAC1C6nB,EAAK1mB,WAAa0mB,EAAK4F,eACvB5F,EAAKp9B,UAAYo9B,EAAKuF,eACtBvF,EAAK2G,gBAAiB,EACtB3G,EAAKlzB,YAMHkzB,EAAK1qB,kBAAoBkxB,IAC3BxG,EAAK1qB,mBAAqB,GAG5B0qB,EAAKlzB,UACLkzB,EAAKjN,QAAQ,eAAgBiN,EAAK1qB,kBAAmB0qB,EAAK3qB,sBAC1D2qB,EAAKyG,kBAAoB92B,WAAW+2B,EAAgB1G,EAAK1qB,qBAI7D9U,KAAK2X,QAAQ,4BAA6B,EAC1C3X,KAAKimC,kBAAoB92B,WAAW+2B,EAAgBlmC,KAAK8U,mBAEzD9U,KAAK8P,GAAG,UAAWo2B,IAljBvB,MAsjBI,IAAsBzjB,GAAKA,GAAKnsB,OAAOD,aACvC,IAAsBosB,GAAKA,GAAKnsB,OAAOspC,OAAOvpC,QAC9C2J,MAQJ,SAAW3J,EAASosB,GAelB,SAASiiB,EAAiBz4B,EAAQnV,GAChCkJ,KAAKiM,OAASA,EACdjM,KAAKlJ,KAAOA,GAAQ,GACpBkJ,KAAKujB,SACLvjB,KAAK0iB,KAAO,IAAI0jB,EAAKpmC,KAAM,QAC3BA,KAAKqmC,WAAa,EAClBrmC,KAAK4iB,QAwLP,SAASwjB,EAAMl0B,EAAKpb,GAClBkJ,KAAKwN,UAAY0E,EACjBlS,KAAKlJ,KAAOA,EAzMdT,EAAQquC,gBAAkBA,EAsB1BjiB,EAAGqa,KAAK2B,MAAMiG,EAAiBjiB,EAAG6c,cAQlCoF,EAAgBvsC,UAAUwsC,MAAQliB,EAAG6c,aAAannC,UAAUiY,KAS5Ds0B,EAAgBvsC,UAAUglC,GAAK,WAC7B,OAAOn9B,KAAKiM,OAAOkxB,GAAGrkC,MAAMkH,KAAKiM,OAAQhS,YAS3CyqC,EAAgBvsC,UAAUgb,OAAS,SAAUA,GAI3C,OAHAA,EAAO+uB,SAAWliC,KAAKlJ,KACvBkJ,KAAKiM,OAAOkH,OAAOA,GACnBnT,KAAKujB,SACEvjB,MAST0kC,EAAgBvsC,UAAUyQ,KAAO,SAAUuJ,EAAMyB,GAC/C,IAAIT,GACA5Q,KAAMvC,KAAKujB,MAAMb,KAAO,OAAS,UACjCvQ,KAAMA,GASV,MANI,mBAAqByB,IACvBT,EAAO7U,KAAO0B,KAAKqmC,WACnBlzB,EAAO2Q,KAAM,EACb9jB,KAAK4iB,KAAKzP,EAAO7U,IAAMsV,GAGlB5T,KAAKmT,OAAOA,IASrBuxB,EAAgBvsC,UAAUiY,KAAO,SAAUtZ,GACzC,IAAI4B,EAAOyB,MAAMhC,UAAU+H,MAAMxJ,KAAKuD,UAAW,GAC7CqsC,EAAU5tC,EAAKA,EAAKwB,OAAS,GAC7BiZ,GACI5Q,KAAM,QACNzL,KAAMA,GAYd,MATI,mBAAqBwvC,IACvBnzB,EAAO7U,KAAO0B,KAAKqmC,WACnBlzB,EAAO2Q,IAAM,OACb9jB,KAAK4iB,KAAKzP,EAAO7U,IAAMgoC,EACvB5tC,EAAOA,EAAKwH,MAAM,EAAGxH,EAAKwB,OAAS,IAGrCiZ,EAAOza,KAAOA,EAEPsH,KAAKmT,OAAOA,IASrBuxB,EAAgBvsC,UAAU2f,WAAa,WAQrC,MAPkB,KAAd9X,KAAKlJ,KACPkJ,KAAKiM,OAAO6L,cAEZ9X,KAAKmT,QAAS5Q,KAAM,eACpBvC,KAAK2kC,MAAM,eAGN3kC,MAST0kC,EAAgBvsC,UAAU6iB,SAAW,SAAU7H,GAC7C,IAAIqsB,EAAOx/B,KAEX,SAAS8jB,IACP0b,EAAKrsB,QACD5Q,KAAM,MACN7J,KAAM+pB,EAAGqa,KAAKqC,QAAQllC,WACtBooC,MAAOlvB,EAAO7U,KAIpB,OAAQ6U,EAAO5Q,MACb,IAAK,UACHvC,KAAK2kC,MAAM,WACX,MAEF,IAAK,aACe,KAAd3kC,KAAKlJ,KACPkJ,KAAKiM,OAAOk3B,aAAahwB,EAAOgvB,QAAU,UAE1CniC,KAAK2kC,MAAM,aAAcxxB,EAAOgvB,QAElC,MAEF,IAAK,UACL,IAAK,OACH,IAAIr/B,GAAU,UAAWqQ,EAAOhB,MAEd,QAAdgB,EAAO2Q,IACThhB,EAAO5B,KAAK4iB,GACH3Q,EAAO2Q,KAChB9jB,KAAKmT,QAAS5Q,KAAM,MAAO8/B,MAAOlvB,EAAO7U,KAG3C0B,KAAK2kC,MAAM7rC,MAAMkH,KAAM8C,GACvB,MAEF,IAAK,QACCA,GAAUqQ,EAAOrc,MAAMiD,OAAOoZ,EAAOza,MAEvB,QAAdya,EAAO2Q,KACThhB,EAAO5B,KAAK4iB,GAEd9jB,KAAK2kC,MAAM7rC,MAAMkH,KAAM8C,GACvB,MAEF,IAAK,MACC9C,KAAK4iB,KAAKzP,EAAOkvB,SACnBriC,KAAK4iB,KAAKzP,EAAOkvB,OAAOvpC,MAAMkH,KAAMmT,EAAOza,aACpCsH,KAAK4iB,KAAKzP,EAAOkvB,QAE1B,MAEF,IAAK,QACClvB,EAAO8uB,OACTjiC,KAAKiM,OAAOgP,QAAQ9H,GAEC,gBAAjBA,EAAOgvB,OACTniC,KAAK2kC,MAAM,iBAAkBxxB,EAAOgvB,QAEpCniC,KAAK2kC,MAAM,QAASxxB,EAAOgvB,UAwBrCiE,EAAKjuC,UAAUyQ,KAAO,WACpB5I,KAAKwN,UAAU+V,MAAMvjB,KAAKlJ,OAAQ,EAClCkJ,KAAKwN,UAAU5E,KAAK9P,MAAMkH,KAAKwN,UAAWvT,YAS5CmsC,EAAKjuC,UAAUiY,KAAO,WACpBpQ,KAAKwN,UAAU+V,MAAMvjB,KAAKlJ,OAAQ,EAClCkJ,KAAKwN,UAAU4C,KAAKtX,MAAMkH,KAAKwN,UAAWvT,YArO9C,MAyOI,IAAsBwoB,GAAKA,GAAKnsB,OAAOD,aACvC,IAAsBosB,GAAKA,GAAKnsB,OAAOspC,OAAOvpC,SASlD,SAAWA,EAASosB,EAAI1I,GAmBtB,SAASwsB,EAAIt6B,GACXwW,EAAGjI,UAAU1hB,MAAMkH,KAAM/F,WAd3B5D,EAAQ+lB,UAAYmqB,EAqBpB9jB,EAAGqa,KAAK8B,QAAQ2H,EAAI9jB,EAAGjI,WAQvB+rB,EAAGpuC,UAAUrB,KAAO,YAUpByvC,EAAGpuC,UAAU4d,KAAO,WAClB,IAEIvJ,EAFAR,EAAQyW,EAAGqa,KAAK9wB,MAAMhM,KAAKiM,OAAO0L,QAAQ3L,OAC1CwzB,EAAOx/B,KAyBX,OArBKwM,IACHA,EAASuN,EAAOkI,cAAgBlI,EAAOiI,WAGzChiB,KAAKoc,UAAY,IAAI5P,EAAOxM,KAAKujC,aAAev3B,GAEhDhM,KAAKoc,UAAUlF,OAAS,WACtBsoB,EAAKhkB,SACLgkB,EAAKvzB,OAAOu5B,WAAU,IAExBxlC,KAAKoc,UAAUoG,UAAY,SAAU2E,GACnCqY,EAAKriB,OAAOgK,EAAGhV,OAEjBnS,KAAKoc,UAAUpE,QAAU,WACvBwnB,EAAKtkB,UACLskB,EAAKvzB,OAAOu5B,WAAU,IAExBxlC,KAAKoc,UAAU3E,QAAU,SAAU1Y,GACjCygC,EAAKvkB,QAAQlc,IAGRiB,MAcLyiB,EAAGqa,KAAKiB,GAAGsB,QACbkH,EAAGpuC,UAAUyQ,KAAO,SAAUuJ,GAC5B,IAAIqtB,EAAOx/B,KAIX,OAHAmP,WAAW,WACRqwB,EAAKpjB,UAAUxT,KAAKuJ,IACrB,GACKnS,MAGTumC,EAAGpuC,UAAUyQ,KAAO,SAAUuJ,GAE5B,OADAnS,KAAKoc,UAAUxT,KAAKuJ,GACbnS,MAUXumC,EAAGpuC,UAAUutC,QAAU,SAAU5G,GAC/B,IAAK,IAAIvoC,EAAI,EAAGC,EAAIsoC,EAAI5kC,OAAQ3D,EAAIC,EAAGD,IACrCyJ,KAAKmT,OAAO2rB,EAAIvoC,IAElB,OAAOyJ,MAUTumC,EAAGpuC,UAAUif,MAAQ,WAEnB,OADApX,KAAKoc,UAAUhF,QACRpX,MAWTumC,EAAGpuC,UAAU8iB,QAAU,SAAUlc,GAC/BiB,KAAKiM,OAAOgP,QAAQlc,IAQtBwnC,EAAGpuC,UAAUs6B,OAAS,WACpB,OAAOzyB,KAAKiM,OAAO0L,QAAQS,OAAS,MAAQ,MAW9CmuB,EAAGrkB,MAAQ,WACT,MAAQ,cAAenI,KAAY,cAAeiI,YACzC,iBAAkBjI,GAU7BwsB,EAAGtB,aAAe,WAChB,OAAO,GASTxiB,EAAG3J,WAAW5X,KAAK,aAjLrB,MAoLI,IAAsBuhB,GAAKA,GAAGjI,UAAYlkB,OAAOD,aACjD,IAAsBosB,GAAKA,GAAKnsB,OAAOspC,OAAOvpC,QAC9C2J,MASJ,SAAW3J,EAASosB,GAoBlB,SAAS+jB,IACP/jB,EAAGjI,UAAU4B,UAAUtjB,MAAMkH,KAAM/F,WAfrC5D,EAAQowC,YAAcD,EAsBtB/jB,EAAGqa,KAAK8B,QAAQ4H,EAAa/jB,EAAGjI,UAAU4B,WAQ1CoqB,EAAYruC,UAAUrB,KAAO,cAW7B0vC,EAAYruC,UAAU4d,KAAO,WAC3B,IAAIypB,EAAOx/B,KACPtH,EAAOuB,UAKX,OAHA+nB,UAAU0kB,UAAU,WAClBjkB,EAAGjI,UAAU4B,UAAUjkB,UAAU4d,KAAKjd,MAAM0mC,EAAM9mC,KAE7CsH,MAYTwmC,EAAYruC,UAAUyQ,KAAO,WAC3B,IAAI42B,EAAOx/B,KAAMtH,EAAOuB,UAIxB,OAHA+nB,UAAU0kB,UAAU,WAClBjkB,EAAGjI,UAAU4B,UAAUjkB,UAAUyQ,KAAK9P,MAAM0mC,EAAM9mC,KAE7CsH,MAUTwmC,EAAYruC,UAAUif,MAAQ,WAG5B,OAFA4K,UAAU2kB,QAAQzsC,OAAS,EAC3BuoB,EAAGjI,UAAU4B,UAAUjkB,UAAUif,MAAM1gB,KAAKsJ,MACrCA,MAaTwmC,EAAYruC,UAAUsrC,MAAQ,SAAUx3B,EAAQ2H,GAC9C,SAASxC,IACP,IAAIuG,EAAU1L,EAAO0L,QACjBrV,EAAOqV,EAAQ,qBACfhM,GACI,QAAUgM,EAAQS,OAAS,IAAM,IAAM,KACvCT,EAAQjL,KAAO,IAAMiL,EAAQrV,KAC7BqV,EAAQ6rB,SACR,qBACA,iBAAmBv3B,EAAOs4B,YAAc,WAAa,IAAM,QAK9DiC,EAAYh7B,SACwB,oBAA5Bo7B,0BAETA,wBAA0Bj7B,EAAK5G,KAAK,MAGzB,MAATzC,GACF0f,UAAU6kB,oBAAoB,eAAiBlvB,EAAQjL,KAAO,IAAMpK,GAGtE0f,UAAU8kB,eACVN,EAAYh7B,QAAS,GAGvBoI,EAAGld,KAAK8oC,GAGV,IAAIA,EAAOx/B,KACX,GAAIiO,SAASkT,KAAM,OAAO/P,IAE1BqR,EAAGqa,KAAK/uB,KAAKqD,IAYfo1B,EAAYtkB,MAAQ,WAClB,SACwB,oBAAbF,WACJ,iBAAkBA,WAAe+kB,YAGjCA,UAAUC,wBAAwBC,OAAS,IAYpDT,EAAYvB,aAAe,WACzB,OAAO,GAOY,oBAAVxoC,SACTyqC,wCAAyC,GAS3CzkB,EAAG3J,WAAW5X,KAAK,eAnLrB,MAqLI,IAAsBuhB,GAAKA,GAAGjI,UAAYlkB,OAAOD,aACjD,IAAsBosB,GAAKA,GAAKnsB,OAAOspC,OAAOvpC,SAK9C,oBAAsBoG,OAC1B,IAAIsqC,UAAU,WAAW,IAA+NvwC,EAAE2wC,EAAEC,EAAEC,EAAkBrvC,EAAEsvC,EAArPC,EAAE,YAAYlwC,EAAE,SAASmwC,EAAE,kBAAoDxQ,EAAE,gCAAgCyQ,EAAE,oBAAoB5iC,EAAE,qBAAqB6iC,EAAEjrC,OAAOoS,EAAEZ,SAASxW,EAAEiF,UAAUirC,GAAE,EAAMC,GAAkvE,WAAgBD,EAAiB,WAAa,IAAIE,EAAEh5B,EAAEmS,qBAAqB,QAAQ,GAAO8mB,EAAGC,EAAE1wC,GAAGywC,EAAGnmB,aAAa,OAAOqV,GAAG,IAAIgR,EAAEH,EAAEzmB,YAAY0mB,GAAI,GAAGE,EAAE,CAAC,IAAIC,EAAE,GAAE,WAAY,GAAG78B,QAAO48B,EAAEE,cAAaX,EAAE,CAAC,IAAIY,EAAGH,EAAEE,YAAY,YAAeC,IAAIA,EAAGA,EAAG32B,MAAM,KAAK,GAAGA,MAAM,KAAK42B,EAAEC,IAAIh/B,SAAS8+B,EAAG,GAAG,IAAI9+B,SAAS8+B,EAAG,GAAG,IAAI9+B,SAAS8+B,EAAG,GAAG,WAAW,GAAGF,EAAE,GAAwC,OAApCA,SAAI94B,WAAWlV,UAAUquC,OAAO,IAAYT,EAAElnB,YAAYmnB,GAAIE,EAAE,KAAKO,IAAnQ,QAAgRA,IAA/ZC,GAASD,MAAxwEvxC,KAAKyxC,KAAKC,KAAaC,GAAE,EAAMxnC,GAAE,EAAUxK,GAAE,EAAKyxC,EAAE,WAAW,IAAIN,EAAG18B,QAAOyD,EAAE0gB,iBAAgBgY,GAAGn8B,QAAOyD,EAAEmS,uBAAsBumB,GAAGn8B,QAAOyD,EAAEiS,gBAAeymB,EAAEqB,EAAGnxC,EAAEkF,UAAU+G,cAAcukC,EAAExwC,EAAEoxC,SAASnlC,cAAcolC,EAAK,MAAMl8B,KAARq7B,GAA2BW,GAAIG,EAAK,MAAMn8B,KAARq7B,GAA2BW,GAAII,IAAG,SAASp8B,KAAKg8B,IAAIh3B,WAAWg3B,EAAG57B,QAAQ,8BAA8B,OAAa66B,GAAE,EAAQoB,GAAI,EAAE,EAAE,GAAGd,EAAG,KAAK,GAAG/8B,QAAO3T,EAAEyxC,UAAS3B,GAAGn8B,QAAO3T,EAAEyxC,QAAQ1B,KAAInwC,IAAG8wC,EAAG1wC,EAAEyxC,QAAQ1B,GAAG9oB,cAAqBtT,QAAO3T,EAAE0xC,YAAW5B,GAAG9vC,EAAE0xC,UAAUnS,KAAKv/B,EAAE0xC,UAAUnS,GAAGoS,gBAAgBzB,GAAE,EAAKE,GAAE,EAAMM,EAAGA,EAAGn7B,QAAQ,qBAAqB,MAAMi8B,EAAG,GAAG5/B,SAAS8+B,EAAGn7B,QAAQ,aAAa,MAAM,IAAIi8B,EAAG,GAAG5/B,SAAS8+B,EAAGn7B,QAAQ,iBAAiB,MAAM,IAAIi8B,EAAG,GAAG,WAAWr8B,KAAKu7B,GAAI9+B,SAAS8+B,EAAGn7B,QAAQ,oBAAoB,MAAM,IAAI,QAAQ,GAAG5B,QAAOs8B,GAAI,UAAU3tC,OAAO,UAAUgL,KAAK,QAAQwiC,EAAG,IAAI,IAAI8B,EAAG,IAAI5sC,QAAS,UAAU1C,OAAO,UAAUgL,KAAK,OAAziC,iCAAsjCskC,IAAIlB,EAAGkB,EAAGnB,YAAY,eAAmBL,GAAE,EAAKM,EAAGA,EAAG32B,MAAM,KAAK,GAAGA,MAAM,KAAKy3B,GAAI5/B,SAAS8+B,EAAG,GAAG,IAAI9+B,SAAS8+B,EAAG,GAAG,IAAI9+B,SAAS8+B,EAAG,GAAG,MAAO,MAAMH,IAAM,OAAOsB,GAAGxB,EAAGO,GAAGY,EAAGM,GAAGP,EAAGQ,GAAG3B,EAAE4B,IAAIX,EAAGY,IAAIX,GAAziC,GAAikCX,EAAEkB,MAAel+B,QAAOyD,EAAEyG,aAAYiyB,GAAiB,YAAd14B,EAAEyG,YAA0BlK,QAAOyD,EAAEyG,aAAYiyB,IAAI14B,EAAEmS,qBAAqB,QAAQ,IAAInS,EAAEsS,QAAQvV,IAAQ+8B,IAAMv9B,QAAOyD,EAAE6E,mBAAkB6zB,GAAG14B,EAAE6E,iBAAiB,mBAAmB9H,GAAE,GAAUw8B,EAAEoB,IAAIpB,EAAEqB,MAAK56B,EAAEsP,YAAYtZ,EAAE,WAA4B,YAAdgK,EAAEyG,aAAwBzG,EAAE86B,YAAY9kC,EAAE5K,UAAUquC,QAAQ18B,OAAU87B,GAAGlmB,KAAK,WAAY,IAAGmnB,EAAH,CAAa,IAAI95B,EAAEX,gBAAgB07B,SAAS,QAAQ,MAAM/B,GAAkC,YAA/B14B,WAAWlV,UAAUquC,OAAO,GAAU18B,KAA/G,IAA2Hw8B,EAAEmB,IAAI,WAAeZ,IAAc,kBAAkB/7B,KAAKiC,EAAEyG,YAAmD1J,IAAtCuD,WAAWlV,UAAUquC,OAAO,IAA/F,GAAiHhwC,EAAEsT,KAAO,SAASA,IAAI,IAAG+8B,EAAH,CAAa,IAAI,IAAIX,EAAEn5B,EAAEmS,qBAAqB,QAAQ,GAAGI,YAAY2mB,EAAE,SAASC,EAAEtnB,WAAWC,YAAYqnB,GAAG,MAAMF,GAAI,OAAOa,GAAE,EAAoB,IAAf,IAAId,EAAED,EAAE1tC,OAAe+tC,EAAE,EAAEA,EAAEJ,EAAEI,IAAKL,EAAEK,MAAM,SAAS4B,EAAEhC,GAAMc,EAAGd,IAASD,EAAEA,EAAE1tC,QAAQ2tC,EAAG,SAASvvC,EAAE2vC,GAAG,GAAG78B,QAAOs8B,EAAEh0B,mBAAkB6zB,EAAGG,EAAEh0B,iBAAiB,OAAOu0B,GAAE,QAAY,GAAG78B,QAAOyD,EAAE6E,mBAAkB6zB,EAAG14B,EAAE6E,iBAAiB,OAAOu0B,GAAE,QAAY,GAAG78B,QAAOs8B,EAAEvpB,cAAaopB,GAAmjJ,SAAWS,EAAEH,EAAEI,GAAGD,EAAE7pB,YAAY0pB,EAAEI,GAAGS,EAAEA,EAAExuC,SAAS8tC,EAAEH,EAAEI,GAAtmJ1xC,CAAEmxC,EAAE,SAASO,QAAQ,GAAoB,mBAAVP,EAAEjzB,OAAmB,CAAC,IAAIozB,EAAEH,EAAEjzB,OAAOizB,EAAEjzB,OAAO,WAAWozB,IAAII,UAAUP,EAAEjzB,OAAOwzB,EAA6b,SAASM,IAAI,IAAIU,EAAGjyC,EAAEkD,OAAO,GAAG+uC,EAAG,EAAG,IAAI,IAAID,EAAG,EAAEA,EAAGC,EAAGD,IAAK,CAAC,IAAIf,EAAEjxC,EAAEgyC,GAAI1qC,GAAO6pC,EAAGnxC,EAAEgyC,GAAIc,WAAehC,GAAIiC,SAAQ,EAAMzrC,GAAG2pC,GAAG,GAAGG,EAAEC,GAAG,GAAG,EAAE,CAAC,IAAIS,EAAGlyC,EAAEqxC,GAAG,GAAGa,EAAI,IAAGkB,EAAEhzC,EAAEgyC,GAAIiB,aAAe7B,EAAEmB,IAAInB,EAAEmB,GAAG,IAAgE,GAAGvyC,EAAEgyC,GAAIkB,gBAAgBC,IAAI,CAAC,IAAIC,KAAMA,EAAGj4B,KAAKnb,EAAEgyC,GAAIkB,eAAeE,EAAG1d,MAAMoc,EAAGuB,aAAa,UAAU,IAAID,EAAGvd,OAAOic,EAAGuB,aAAa,WAAW,IAAOvB,EAAGuB,aAAa,WAAUD,EAAGE,WAAWxB,EAAGuB,aAAa,UAAYvB,EAAGuB,aAAa,WAAUD,EAAGG,MAAMzB,EAAGuB,aAAa,UAA0E,IAAjE,IAAIzB,KAAUf,EAAEiB,EAAG9nB,qBAAqB,SAAa+nB,EAAGlB,EAAE3tC,OAAemvC,EAAG,EAAEA,EAAGN,EAAGM,IAAmD,SAA1CxB,EAAEwB,GAAIgB,aAAa,QAAQ3mC,gBAAwBklC,EAAGf,EAAEwB,GAAIgB,aAAa,SAASxC,EAAEwB,GAAIgB,aAAa,UAAUG,EAAEJ,EAAGxB,EAAGX,EAAEE,QAAS9vC,EAAEywC,GAAOX,GAAIA,EAAGL,QAAjkB1oB,EAAE6oB,GAAE,GAASE,IAAIL,EAAGiC,SAAQ,EAAKjC,EAAG2C,IAAIzpC,EAAEinC,GAAGE,EAAGL,SAAwiB,GAAV1oB,EAAE6oB,GAAE,GAASE,EAAG,CAAC,IAAIH,EAAEhnC,EAAEinC,GAAMD,GAAG58B,QAAO48B,EAAE0C,cAAanD,IAAGO,EAAGiC,SAAQ,EAAKjC,EAAG2C,IAAIzC,GAAEG,EAAGL,KAAQ,SAAS9mC,EAAE8mC,GAAI,IAAID,EAAE,KAASI,EAAErxC,EAAEkxC,GAAI,GAAGG,GAAe,UAAZA,EAAE0C,SAAoB,GAAGv/B,QAAO68B,EAAEyC,cAAanD,EAAGM,EAAEI,MAAM,CAAC,IAAID,EAAEC,EAAEjnB,qBAAqB3pB,GAAG,GAAM2wC,IAAGH,EAAEG,GAAI,OAAOH,EAAE,SAASsC,IAAI,OAAQhpC,GAAG6oC,EAAE,YAAY5B,EAAEqB,KAAKrB,EAAEsB,QAAQtB,EAAEmB,IAAInB,EAAEmB,GAAG,KAAK,SAASiB,EAAE1C,EAAGK,EAAGN,EAAEG,GAAG7mC,GAAE,EAAKimC,EAAEY,GAAG,KAAKX,GAAG0C,SAAQ,EAAMzrC,GAAGupC,GAAG,IAAIiB,EAAGlyC,EAAEixC,GAAG,GAAGiB,EAAG,CAAiB,UAAbA,EAAG6B,UAAoBn0C,EAAEuoB,EAAE+pB,GAAI3B,EAAE,OAAU3wC,EAAEsyC,EAAG3B,EAAEU,GAAEC,EAAGxpC,GAAGmpC,GAAKr8B,QAAO08B,EAAGpb,QAAO6a,IAAK,KAAK36B,KAAKk7B,EAAGpb,QAAQrjB,SAASy+B,EAAGpb,MAAM,IAAI,OAAMob,EAAGpb,MAAM,QAASthB,QAAO08B,EAAGjb,SAAQ0a,IAAK,KAAK36B,KAAKk7B,EAAGjb,SAASxjB,SAASy+B,EAAGjb,OAAO,IAAI,OAAMib,EAAGjb,OAAO,OAAMhe,EAAEa,MAAMb,EAAEa,MAAMxP,MAAM,EAAE,IAAI,+BAA+B,IAAImpC,EAAGjB,EAAEoB,IAAIpB,EAAEqB,KAAM,UAAU1vC,OAAO,IAAIgL,KAAK,KAAM,SAASgkC,EAAG,iBAAiBrB,EAAEj7B,SAASnN,WAAW0N,QAAQ,KAAK,OAAO,iBAAiBq8B,EAAG,eAAex6B,EAAEa,MAA2E,GAAlEtE,QAAO+8B,EAAGyC,YAAWrD,EAAGY,EAAGyC,WAAW,IAAI7B,EAAQZ,EAAGyC,UAAU7B,EAAMX,EAAEoB,IAAIpB,EAAEqB,KAAoB,GAAfX,EAAGxzB,WAAc,CAAC,IAAI2yB,EAAEF,EAAE,OAAOF,GAAG,eAAeI,EAAEtmB,aAAa,KAAKkmB,GAAGiB,EAAGpoB,WAAWO,aAAagnB,EAAEa,GAAIA,EAAG36B,MAAM4qB,QAAQ,OAAO,WAA8B,GAAf+P,EAAGxzB,WAAewzB,EAAGpoB,WAAWC,YAAYmoB,GAAS35B,WAAWlV,UAAUquC,OAAO,IAAhG,GAAyGvnC,EAAE+mC,EAAGK,EAAGN,IAAI,SAASxvC,EAAE4vC,GAAG,GAAGG,EAAEoB,IAAIpB,EAAEqB,KAAmB,GAAdxB,EAAE3yB,WAAc,CAAC,IAAIuyB,EAAEE,EAAE,OAAOE,EAAEvnB,WAAWO,aAAa4mB,EAAEI,GAAGJ,EAAEnnB,WAAWmqB,aAAa9rB,EAAEkpB,GAAGJ,GAAGI,EAAE95B,MAAM4qB,QAAQ,OAAO,WAA6B,GAAdkP,EAAE3yB,WAAe2yB,EAAEvnB,WAAWC,YAAYsnB,GAAQ94B,WAAWlV,UAAUquC,OAAO,IAA7F,QAA2GL,EAAEvnB,WAAWmqB,aAAa9rB,EAAEkpB,GAAGA,GAAI,SAASlpB,EAAEopB,GAAI,IAAIL,EAAGC,EAAE,OAAO,GAAGK,EAAEqB,KAAKrB,EAAEoB,GAAI1B,EAAGzQ,UAAU8Q,EAAG9Q,cAAc,CAAC,IAAI4Q,EAAEE,EAAGnnB,qBAAqB3pB,GAAG,GAAG,GAAG4wC,EAAE,CAAC,IAAIoB,EAAGpB,EAAExQ,WAAW,GAAG4R,EAAoB,IAAhB,IAAIxB,EAAEwB,EAAGnvC,OAAe8tC,EAAE,EAAEA,EAAEH,EAAEG,IAA0B,GAAhBqB,EAAGrB,GAAG8C,UAA6B,SAAhBzB,EAAGrB,GAAG2C,UAAsC,GAAhBtB,EAAGrB,GAAG8C,UAAchD,EAAG1mB,YAAYioB,EAAGrB,GAAG+C,WAAU,KAAW,OAAOjD,EAAG,SAAS/mC,EAAEqpC,EAAGnB,EAAGhB,GAAG,IAAIJ,EAAEC,EAAGlxC,EAAEqxC,GAAG,GAAGG,EAAEmB,IAAInB,EAAEmB,GAAG,IAAK,OAAO1B,EAAE,GAAGC,EAAgC,GAAzB18B,QAAOg/B,EAAG9rC,KAAIipC,IAAG6C,EAAG9rC,GAAG2pC,GAAKG,EAAEoB,IAAIpB,EAAEqB,IAAI,CAAC,IAAIb,EAAG,GAAG,IAAI,IAAIE,KAAMsB,EAAOA,EAAGtB,IAAK7xC,OAAOkB,UAAU2wC,KAA0B,QAAlBA,EAAGplC,cAAuBulC,EAAG+B,MAAMZ,EAAGtB,GAA8B,cAAlBA,EAAGplC,cAA6BklC,GAAI,WAAWwB,EAAGtB,GAAI,IAA8B,WAAlBA,EAAGplC,gBAA0BklC,GAAI,IAAIE,EAAG,KAAKsB,EAAGtB,GAAI,MAAQ,IAAIE,EAAG,GAAG,IAAI,IAAIK,KAAMJ,EAAOA,EAAGI,IAAKpyC,OAAOkB,UAAUkxC,KAAKL,GAAI,gBAAgBK,EAAG,YAAYJ,EAAGI,GAAI,QAAQvB,EAAGmD,UAAU,+DAA+DrC,EAAG,IAAII,EAAG,YAAYP,EAAEA,EAAEvuC,QAAQkwC,EAAG9rC,GAAGupC,EAAEjxC,EAAEwzC,EAAG9rC,QAAQ,CAAC,IAAI0pC,EAAED,EAAE1wC,GAA4B,IAAI,IAAI0xC,KAAjCf,EAAErmB,aAAa,OAAOqV,GAAiBoT,EAAOA,EAAGrB,IAAK9xC,OAAOkB,UAAU4wC,KAA0B,cAAlBA,EAAGrlC,cAA6BskC,EAAErmB,aAAa,QAAQyoB,EAAGrB,IAA+B,WAAlBA,EAAGrlC,eAA0BskC,EAAErmB,aAAaonB,EAAGqB,EAAGrB,KAAQ,IAAI,IAAIZ,KAAMc,EAAOA,EAAGd,IAAKlxC,OAAOkB,UAAUgwC,IAAuB,SAAlBA,EAAGzkC,eAAwB3E,EAAEipC,EAAEG,EAAGc,EAAGd,IAAML,EAAGpnB,WAAWmqB,aAAa7C,EAAEF,GAAID,EAAEG,EAAG,OAAOH,EAAE,SAAS9oC,EAAEipC,EAAEH,EAAEI,GAAG,IAAIH,EAAGC,EAAE,SAASD,EAAGnmB,aAAa,OAAOkmB,GAAGC,EAAGnmB,aAAa,QAAQsmB,GAAGD,EAAE5mB,YAAY0mB,GAAI,SAAS14B,EAAE64B,GAAG,IAAIJ,EAAEjxC,EAAEqxC,GAAMJ,GAAe,UAAZA,EAAE8C,WAAuBvC,EAAEoB,IAAIpB,EAAEqB,KAAK5B,EAAE15B,MAAM4qB,QAAQ,OAAO,WAA6B,GAAd8O,EAAEvyB,WAAiG,SAAW0yB,GAAG,IAAIC,EAAErxC,EAAEoxC,GAAG,GAAGC,EAAE,CAAC,IAAI,IAAIJ,KAAKI,EAAmB,mBAANA,EAAEJ,KAAgBI,EAAEJ,GAAG,MAAMI,EAAEvnB,WAAWC,YAAYsnB,IAAjMhnC,CAAEgnC,GAAQ94B,WAAWlV,UAAUquC,OAAO,IAAtE,IAAoFT,EAAEnnB,WAAWC,YAAYknB,IAAwH,SAASjxC,EAAEoxC,GAAG,IAAIH,EAAE,KAAK,IAAIA,EAAEh5B,EAAE0gB,eAAeyY,GAAG,MAAMC,IAAI,OAAOJ,EAAE,SAASE,EAAEF,GAAG,OAAOh5B,EAAEiS,cAAc+mB,GAA4D,SAASmC,EAAEhC,GAAG,IAAIC,EAAEG,EAAEC,GAAGR,EAAEG,EAAEx2B,MAAM,KAAgF,OAA3Eq2B,EAAE,GAAGx+B,SAASw+B,EAAE,GAAG,IAAIA,EAAE,GAAGx+B,SAASw+B,EAAE,GAAG,KAAK,EAAEA,EAAE,GAAGx+B,SAASw+B,EAAE,GAAG,KAAK,EAASI,EAAE,GAAGJ,EAAE,IAAKI,EAAE,IAAIJ,EAAE,IAAII,EAAE,GAAGJ,EAAE,IAAMI,EAAE,IAAIJ,EAAE,IAAII,EAAE,IAAIJ,EAAE,IAAII,EAAE,IAAIJ,EAAE,GAAgB,SAASlnC,EAAEooC,EAAGd,EAAEoB,EAAGlB,GAAI,IAAGC,EAAEoB,KAAIpB,EAAEsB,IAAX,CAAuB,IAAI5B,EAAGj5B,EAAEmS,qBAAqB,QAAQ,GAAG,GAAI8mB,EAAJ,CAAe,IAAID,EAAGwB,GAAe,iBAAJA,EAAcA,EAAG,SAA8B,GAAlBlB,IAAInwC,EAAE,KAAKsvC,EAAE,OAAStvC,GAAGsvC,GAAGO,EAAE,CAAC,IAAIG,EAAED,EAAE,SAASC,EAAErmB,aAAa,OAAO,YAAYqmB,EAAErmB,aAAa,QAAQkmB,GAAG7vC,EAAE8vC,EAAG1mB,YAAY4mB,GAAMI,EAAEoB,IAAIpB,EAAEqB,KAAKr+B,QAAOyD,EAAEwnB,cAAakR,GAAG14B,EAAEwnB,YAAYn8B,OAAO,IAAGlC,EAAE6W,EAAEwnB,YAAYxnB,EAAEwnB,YAAYn8B,OAAO,IAAGotC,EAAEO,EAAKO,EAAEoB,IAAIpB,EAAEqB,IAAQzxC,GAAGoT,QAAOpT,EAAEkzC,UAAS7zC,GAAGW,EAAEkzC,QAAQnC,EAAGd,GAAYjwC,GAAGoT,QAAOyD,EAAEs8B,iBAAgB5D,GAAGvvC,EAAEopB,YAAYvS,EAAEs8B,eAAepC,EAAG,KAAKd,EAAE,QAAQ,SAAS7oB,EAAE4oB,EAAEH,GAAG,GAAIlxC,EAAJ,CAAc,IAAIsxC,EAAEJ,EAAE,UAAU,SAAYc,GAAG/xC,EAAEoxC,GAAIpxC,EAAEoxC,GAAG75B,MAAMi9B,WAAWnD,EAAOtnC,EAAE,IAAIqnC,EAAE,cAAcC,IAAI,SAAS9jB,EAAE8jB,GAA6C,OAAL,MAA/B,cAAsBh7B,KAAKg7B,KAAmB,oBAAO3nB,mBAAP,YAAAlV,QAAOkV,sBAAoBinB,EAAEjnB,mBAAmB2nB,GAAGA,EAAsBG,EAAEoB,IAAIpB,EAAEqB,KAAKhtC,OAAO0hB,YAAY,WAAW,WAA2B,IAAhB,IAAI4qB,EAAGL,EAAExuC,OAAeiuC,EAAG,EAAEA,EAAGY,EAAGZ,IAAMO,EAAEP,GAAI,GAAGwB,YAAYjB,EAAEP,GAAI,GAAGO,EAAEP,GAAI,IAAmB,IAAf,IAAIH,EAAES,EAAEvuC,OAAe4tC,EAAG,EAAEA,EAAGE,EAAEF,IAAM14B,EAAEq5B,EAAEX,IAAK,IAAI,IAAIG,KAAKG,EAAGA,EAAEH,GAAG,KAAY,IAAI,IAAIJ,KAAfO,EAAE,KAAkBrB,UAAWA,UAAUc,GAAG,KAAKd,UAAU,OAAW,OAAOsE,eAAe,SAASlD,EAAGN,EAAEC,EAAGE,GAAG,GAAGI,EAAEkB,IAAInB,GAAIN,EAAE,CAAC,IAAII,KAAKA,EAAE3pC,GAAG6pC,EAAGF,EAAEgC,WAAWpC,EAAEI,EAAEiC,eAAepC,EAAGG,EAAE6B,WAAW9B,EAAEhxC,EAAEA,EAAEkD,QAAQ+tC,EAAE7oB,EAAE+oB,GAAG,QAAeH,GAAGA,GAAG+B,SAAQ,EAAMzrC,GAAG6pC,KAAQmD,cAAc,SAASzD,GAAG,GAAGO,EAAEkB,GAAI,OAAOtoC,EAAE6mC,IAAK0D,SAAS,SAASpD,EAAGS,EAAGE,EAAGG,EAAGhB,EAAEH,EAAGE,EAAEqB,EAAGL,EAAGD,GAAI,IAAIlB,GAAGkC,SAAQ,EAAMzrC,GAAGsqC,GAAOR,EAAEkB,MAAMlB,EAAEmB,IAAInB,EAAEmB,GAAG,MAAMpB,GAAIS,GAAIE,GAAIG,GAAIhB,GAAG7oB,EAAEwpB,GAAG,GAAOiB,EAAE,WAAWf,GAAI,GAAGG,GAAI,GAAG,IAAIuC,KAAM,GAAGxC,GAAI59B,QAAO49B,KAAK3xC,EAAG,IAAI,IAAIo0C,KAAMzC,EAAIwC,EAAGC,GAAIzC,EAAGyC,GAAKD,EAAGr5B,KAAKg2B,EAAGqD,EAAG9e,MAAMoc,EAAG0C,EAAG3e,OAAOoc,EAAG,IAAIyC,KAAM,GAAGrC,GAAIj+B,QAAOi+B,KAAKhyC,EAAG,IAAI,IAAIs0C,KAAMtC,EAAIqC,EAAGC,GAAItC,EAAGsC,GAAK,GAAG3D,GAAG58B,QAAO48B,KAAI3wC,EAAG,IAAI,IAAI+yC,KAAMpC,EAAM58B,QAAOsgC,EAAGd,YAAWrD,EAAGmE,EAAGd,WAAW,IAAIR,EAAG,IAAIpC,EAAEoC,GAASsB,EAAGd,UAAUR,EAAG,IAAIpC,EAAEoC,GAAM,GAAGJ,EAAE/B,GAAG,CAAC,IAAI2D,EAAG7qC,EAAEyqC,EAAGE,EAAG9C,GAAO4C,EAAGltC,IAAIsqC,GAAIxpB,EAAEwpB,GAAG,GAAMf,EAAEkC,SAAQ,EAAKlC,EAAE4C,IAAImB,MAAO,CAAC,GAAG9D,GAAIqC,IAA+B,OAA1BqB,EAAGr5B,KAAK21B,OAAG0C,EAAEgB,EAAGE,EAAG9C,EAAGG,GAAgB3pB,EAAEwpB,GAAG,GAAUG,GAAIA,EAAGlB,MAAckB,GAAIA,EAAGlB,IAAMgE,sBAAsB,WAAWl1C,GAAE,GAAOonC,GAAGqK,EAAEpB,sBAAsB,WAAW,OAAOC,MAAMmB,EAAEC,GAAG,GAAGyD,MAAM1D,EAAEC,GAAG,GAAG0D,QAAQ3D,EAAEC,GAAG,KAAK2D,sBAAsBhC,EAAEiC,UAAU,SAASjE,EAAEC,EAAEJ,GAAG,OAAGO,EAAEkB,GAAWvoC,EAAEinC,EAAEC,EAAEJ,QAAQ,GAAmBqE,mBAAmB,SAASlE,EAAEF,EAAGD,EAAEI,GAAMG,EAAEkB,IAAIa,KAAKK,EAAExC,EAAEF,EAAGD,EAAEI,IAAKkE,UAAU,SAAStE,GAAMO,EAAEkB,IAAIl6B,EAAEy4B,IAAKuE,UAAU,SAAStE,EAAGE,EAAEC,EAAEJ,GAAMO,EAAEkB,IAAI3oC,EAAEmnC,EAAGE,EAAEC,EAAEJ,IAAKwE,gBAAgBxC,EAAEyC,aAAah0C,EAAEi0C,mBAAmB,SAASzE,GAAI,IAAIE,EAAEn5B,EAAEpC,SAAS+/B,QAAQ39B,EAAEpC,SAAS5I,KAAK,GAAGmkC,EAAE,CAAoC,GAAhC,KAAKp7B,KAAKo7B,KAAIA,EAAEA,EAAEx2B,MAAM,KAAK,IAAU,MAAJs2B,EAAU,OAAO3jB,EAAE6jB,GAAsB,IAAnB,IAAIC,EAAED,EAAEx2B,MAAM,KAAaq2B,EAAE,EAAEA,EAAEI,EAAE/tC,OAAO2tC,IAAK,GAAGI,EAAEJ,GAAG96B,UAAU,EAAEk7B,EAAEJ,GAAGh7B,QAAQ,OAAOi7B,EAAI,OAAO3jB,EAAE8jB,EAAEJ,GAAG96B,UAAWk7B,EAAEJ,GAAGh7B,QAAQ,KAAK,IAAO,MAAM,IAAI4/B,uBAAuB,WAAW,GAAGtrC,EAAE,CAAC,IAAI0mC,EAAEjxC,EAAE6wC,GAAMI,GAAGrxC,IAAGqxC,EAAEnnB,WAAWmqB,aAAar0C,EAAEqxC,GAAMV,IAAG/nB,EAAE+nB,GAAE,GAASiB,EAAEoB,IAAIpB,EAAEqB,MAAKjzC,EAAE2X,MAAM4qB,QAAQ,UAAYqO,GAAGA,EAAEC,IAAIlmC,GAAE,KAAl5T,IAOd,WAEE,GAAI,oBAAsB1E,SAAUA,OAAOulB,UAA3C,CAEA,IAAIppB,EAAU6D,OAAO7D,QAChBA,GAAYA,EAAQC,KAAQD,EAAQ0C,QACvC1C,GAAWC,IAAK,aAAeyC,MAAO,eAGnCyrC,UAAUiF,sBAAsB,WAIZ,SAArBv/B,SAASJ,UACXzT,EAAQ0C,MACN,wJAaJ0mB,UAAS,SAAA0qB,GAAA,SAAA1qB,EAAA2qB,EAAAC,EAAAC,EAAAC,EAAAC,GAAA,OAAAL,EAAA5zC,MAAAkH,KAAA/F,WAAA,OAAA+nB,EAAA1iB,SAAA,kBAAAotC,EAAAptC,YAAA0iB,EAAA,CAAG,SAASgH,EAAKnO,EAAWmyB,EAAWC,EAAW9qB,GACzD,IAAIqd,EAAOx/B,KACXw/B,EAAK0N,KAAOlrB,UAAUmrB,WACtBnrB,UAAUorB,YAAY5N,EAAK0N,MAAQ1N,EACnCA,EAAKlqB,WAAa0M,UAAUqrB,WAC5B7N,EAAK8N,eAAiB,EACtB9N,EAAK+N,YACA1yB,EAE0B,iBAAbA,IAChBA,GAAaA,IAFbA,KAMF1L,WAAW,WACT6S,UAAU0kB,UAAU,WAClB1kB,UAAUwrB,QAAQ31C,OACd2nC,EAAK0N,KAAMlkB,EAAKnO,EAAWmyB,GAAa,KAAMC,GAAa,EAAG9qB,GAAW,SAE9E,KAQLH,UAAU7pB,UAAUyQ,KAAO,SAASuJ,GAClC,GAAInS,KAAKsV,YAAc0M,UAAUqrB,WAC/B,KAAM,oEAUR,IAAI7lC,EAASwa,UAAUwrB,QAAQ5kC,KAAK5I,KAAKktC,KAAM5sB,mBAAmBnO,IAClE,OAAI3K,EAAS,IAGXxH,KAAKstC,gBAAkB9lC,GAChB,IAOXwa,UAAU7pB,UAAUif,MAAQ,WACtBpX,KAAKsV,YAAc0M,UAAUyrB,QAAUztC,KAAKsV,YAAc0M,UAAU0rB,UAGxE1tC,KAAKsV,WAAa0M,UAAU0rB,QAC5B1rB,UAAUwrB,QAAQp2B,MAAMpX,KAAKktC,QAW/BlrB,UAAU7pB,UAAUub,iBAAmB,SAASnR,EAAMoiB,EAAUgpB,GACxDprC,KAAQvC,KAAKutC,WACjBvtC,KAAKutC,SAAShrC,OAEhBvC,KAAKutC,SAAShrC,GAAMrB,KAAKyjB,IAW3B3C,UAAU7pB,UAAU0b,oBAAsB,SAAStR,EAAMoiB,EAAUgpB,GACjE,GAAMprC,KAAQvC,KAAKutC,SAEnB,IADA,IAAIK,EAAS5tC,KAAKutC,SAAShrC,GAClBhM,EAAIq3C,EAAO1zC,OAAS,EAAG3D,GAAK,IAAKA,EACxC,GAAIq3C,EAAOr3C,KAAOouB,EAAU,CAC1BipB,EAAOhgC,OAAOrX,EAAG,GACjB,QAWNyrB,UAAU7pB,UAAUysB,cAAgB,SAASC,GAE3C,IADA,IAAI+oB,EAAS5tC,KAAKutC,SAAS1oB,EAAMtiB,UACxBhM,EAAI,EAAGA,EAAIq3C,EAAO1zC,SAAU3D,EACnCq3C,EAAOr3C,GAAGsuB,GAEZ,IAAI8a,EAAU3/B,KAAK,KAAO6kB,EAAMtiB,MAC5Bo9B,GAASA,EAAQ9a,IAOvB7C,UAAU7pB,UAAU01C,cAAgB,SAASC,GAQ3C,IAAIC,EACJ,GARI,eAAgBD,IAClB9tC,KAAKsV,WAAaw4B,EAAWx4B,YAE3B,aAAcw4B,IAChB9tC,KAAKqM,SAAWyhC,EAAWzhC,UAIN,QAAnByhC,EAAWvrC,MAAqC,SAAnBurC,EAAWvrC,KAC1CwrC,EAAU/tC,KAAKguC,oBAAoBF,EAAWvrC,WACzC,GAAuB,SAAnBurC,EAAWvrC,KAEpBwrC,EAAU/tC,KAAKguC,oBAAoB,aAC9B,IAAuB,WAAnBF,EAAWvrC,KAIpB,KAAM,uBAAyBurC,EAAWvrC,KAH1C,IAAI4P,EAAOoO,mBAAmButB,EAAW9+B,SACzC++B,EAAU/tC,KAAKiuC,qBAAqB,UAAW97B,GAKjDnS,KAAK4kB,cAAcmpB,IAGrB/rB,UAAU7pB,UAAU61C,oBAAsB,SAASzrC,GACjD,GAAI0L,SAASigC,aAAezxC,OAAO0xC,MAAO,CACxC,IAAItpB,EAAQ5W,SAASigC,YAAY,SAEjC,OADArpB,EAAMupB,UAAU7rC,GAAM,GAAO,GACtBsiB,EAEP,OAAQtiB,KAAMA,EAAM8rC,SAAS,EAAOC,YAAY,IAIpDtsB,UAAU7pB,UAAU81C,qBAAuB,SAAS1rC,EAAM4P,GACxD,GAAIlE,SAASigC,aAAezxC,OAAO8xC,eAAiB9xC,OAAO+xC,MAAO,CAChE,IAAI3pB,EAAQ5W,SAASigC,YAAY,gBAEjC,OADArpB,EAAM4pB,iBAAiB,WAAW,GAAO,EAAOt8B,EAAM,KAAM,KAAM1V,OAAQ,MACnEooB,EAGP,OAAQtiB,KAAMA,EAAM4P,KAAMA,EAAMk8B,SAAS,EAAOC,YAAY,IAOhEtsB,UAAUqrB,WAAa,EACvBrrB,UAAU0sB,KAAO,EACjB1sB,UAAU0rB,QAAU,EACpB1rB,UAAUyrB,OAAS,EAEnBzrB,UAAUwrB,QAAU,KACpBxrB,UAAUorB,eACVprB,UAAU2kB,WACV3kB,UAAUmrB,SAAW,EAMrBnrB,UAAU6kB,oBAAsB,SAAS7d,GACvChH,UAAU0kB,UAAU,WAClB1kB,UAAUwrB,QAAQmB,qBAAqB3lB,MAO3ChH,UAAU8kB,aAAe,WACvB,IAAI9kB,UAAUwrB,QAMd,GAJIxrB,UAAU4sB,gBAEZnyC,OAAOmqC,wBAA0B5kB,UAAU4sB,eAExCnyC,OAAOmqC,wBAAZ,CAIA,IAAI1N,EAAYjrB,SAAS6S,cAAc,OACvCoY,EAAU56B,GAAK,qBAMf46B,EAAU/qB,MAAMoT,SAAW,WACvBS,UAAU6sB,iBACZ3V,EAAU/qB,MAAMsT,KAAO,MACvByX,EAAU/qB,MAAMqT,IAAM,QAEtB0X,EAAU/qB,MAAMsT,KAAO,SACvByX,EAAU/qB,MAAMqT,IAAM,UAExB,IAAI8f,EAASrzB,SAAS6S,cAAc,OACpCwgB,EAAOhjC,GAAK,iBACZ46B,EAAU9X,YAAYkgB,GACtBrzB,SAASkT,KAAKC,YAAY8X,GAG1B6N,UAAUwE,SACR3E,wBACA,iBACA,IACA,IACA,SACA,KACA,MACCkI,aAAa,EAAMC,eAAgB,EAAMC,kBAAmB,UAC7D,KACA,SAASjwC,GACFA,EAAEgrC,SACLnxC,EAAQ0C,MAAM,gDApClB1C,EAAQ0C,MAAM,6EA6ClB0mB,UAAUitB,qBAAuB,WAG/B9/B,WAAW,WACT6S,UAAUwrB,QAAUv/B,SAASshB,eAAe,kBAC5CvN,UAAUwrB,QAAQ0B,aAAaziC,SAASK,MACxCkV,UAAUwrB,QAAQ2B,WAAW1yC,OAAO2yC,kBACpC,IAAK,IAAI74C,EAAI,EAAGA,EAAIyrB,UAAU2kB,QAAQzsC,SAAU3D,EAC9CyrB,UAAU2kB,QAAQpwC,KAEpByrB,UAAU2kB,YACT,IAML3kB,UAAUqtB,eAAiB,WAczB,OAbAlgC,WAAW,WACT,IAKE,IADA,IAAIy+B,EAAS5rB,UAAUwrB,QAAQ8B,gBACtB/4C,EAAI,EAAGA,EAAIq3C,EAAO1zC,SAAU3D,EACnCyrB,UAAUorB,YAAYQ,EAAOr3C,GAAGg5C,aAAa1B,cAAcD,EAAOr3C,IAEpE,MAAOwI,GACPnG,EAAQ0C,MAAMyD,KAEf,IACI,GAITijB,UAAUwtB,MAAQ,SAASxgC,GACzBpW,EAAQC,IAAI0nB,mBAAmBvR,KAIjCgT,UAAUytB,QAAU,SAASzgC,GAC3BpW,EAAQ0C,MAAMilB,mBAAmBvR,KAGnCgT,UAAU0kB,UAAY,SAASgJ,GACzB1tB,UAAUwrB,QACZkC,IAEA1tB,UAAU2kB,QAAQzlC,KAAKwuC,IAQ3B1tB,UAAU6sB,cAAgB,WACxB,IAAKpyC,OAAOC,YAAcD,OAAOC,UAAUysC,UACzC,OAAO,EAET,IAAIwG,EAAWlzC,OAAOC,UAAUysC,UAAU,iCAC1C,SAAKwG,GAAaA,EAASvG,eAAkBuG,EAASvG,cAAcwG,aAG7DD,EAASvG,cAAcwG,SAAShzC,MAAM,eAG1CH,OAAOyqC,yCACNzqC,OAAOiX,iBACTjX,OAAOiX,iBAAiB,OAAQ,WAC9BsO,UAAU8kB,iBACT,GAEHrqC,OAAO0hB,YAAY,SAAU,WAC3B6D,UAAU8kB,mBAxUdluC,EAAQ0C,MAAM,wCAVlB,GA+VA,SAAWjF,EAASosB,EAAI1I,GAiBtB,SAAS81B,EAAK5jC,GACPA,IAELwW,EAAGjI,UAAU1hB,MAAMkH,KAAM/F,WACzB+F,KAAK8iB,eAiEP,SAAS2hB,KA9ETpuC,EAAQw5C,IAAMA,EAoBdptB,EAAGqa,KAAK8B,QAAQiR,EAAKptB,EAAGjI,WASxBq1B,EAAI13C,UAAU4d,KAAO,WASnB,OARA/V,KAAKiM,OAAOu5B,WAAU,GACtBxlC,KAAKwb,SACLxb,KAAK5I,MAIL4I,KAAK6iC,kBAEE7iC,MAUT6vC,EAAI13C,UAAUutC,QAAU,SAAUA,GAGhC,IAFA,IAAI5C,KAEKvsC,EAAI,EAAGC,EAAIkvC,EAAQxrC,OAAQ3D,EAAIC,EAAGD,IACzCusC,EAAK5hC,KAAKuhB,EAAG9M,OAAOqJ,aAAa0mB,EAAQnvC,KAG3CyJ,KAAK4I,KAAK6Z,EAAG9M,OAAO6I,cAAcskB,KAWpC+M,EAAI13C,UAAUyQ,KAAO,SAAUuJ,GAE7B,OADAnS,KAAK8vC,KAAK39B,GACHnS,MAYT6vC,EAAI13C,UAAU23C,KAAO,SAAU39B,GAC7B,IAAIqtB,EAAOx/B,KACXA,KAAKiM,OAAOu5B,WAAU,GAoBtBxlC,KAAK+vC,QAAU/vC,KAAK+c,QAAQ,QAExBhD,EAAOuC,gBAAkBtc,KAAK+vC,mBAAmBzzB,eACnDtc,KAAK+vC,QAAQt7B,OAASzU,KAAK+vC,QAAQt4B,QARrC,WACEzX,KAAKyU,OAASgwB,EACdjF,EAAKvzB,OAAOu5B,WAAU,IAQtBxlC,KAAK+vC,QAAQnyB,mBAvBf,WACyB,GAAnB5d,KAAKsV,aACPtV,KAAK4d,mBAAqB6mB,EAC1BjF,EAAKwQ,SAAU,EAEI,KAAfhwC,KAAK+d,OACPyhB,EAAKvzB,OAAOu5B,WAAU,GAEtBhG,EAAKtkB,YAkBXlb,KAAK+vC,QAAQnnC,KAAKuJ,IAUpB09B,EAAI13C,UAAUif,MAAQ,WAEpB,OADApX,KAAKkb,UACElb,MAYT6vC,EAAI13C,UAAU4kB,QAAU,SAAUN,GAChC,IAAIwzB,EAAMxtB,EAAGqa,KAAK/f,QAAQ/c,KAAKiM,OAAOs4B,aAClCv4B,EAAQyW,EAAGqa,KAAK9wB,MAAMhM,KAAKiM,OAAO0L,QAAQ3L,MAAO,OAAQ,IAAI6E,MAIjE,GAFAo/B,EAAIl6B,KAAK0G,GAAU,MAAOzc,KAAKujC,aAAev3B,GAAO,GAEvC,QAAVyQ,EACF,IACMwzB,EAAI1yB,iBACN0yB,EAAI1yB,iBAAiB,eAAgB,4BAGrC0yB,EAAIC,YAAc,aAEpB,MAAOnxC,IAGX,OAAOkxC,GASTJ,EAAI13C,UAAUs6B,OAAS,WACrB,OAAOzyB,KAAKiM,OAAO0L,QAAQS,OAAS,QAAU,QAWhDy3B,EAAI3tB,MAAQ,SAAUjW,EAAQiQ,GAC5B,IACE,IAAIa,EAAU0F,EAAGqa,KAAK/f,QAAQb,GAC1Bi0B,EAAep2B,EAAOuC,gBAAkBS,aAAmBT,eAC3D8zB,EAAkBnkC,GAAUA,EAAO0L,SAAW1L,EAAO0L,QAAQS,OAAS,SAAW,QACjFi4B,EAAet2B,EAAOtN,UAAY2jC,GAAkBr2B,EAAOtN,SAASJ,SACxE,GAAI0Q,KAAaozB,IAAeE,GAC9B,OAAO,EAET,MAAMtxC,IAER,OAAO,GAUT8wC,EAAI5K,aAAe,SAAUh5B,GAC3B,OAAO4jC,EAAI3tB,MAAMjW,GAAQ,IA1M7B,MA8MI,IAAsBwW,GAAKA,GAAGjI,UAAYlkB,OAAOD,aACjD,IAAsBosB,GAAKA,GAAKnsB,OAAOspC,OAAOvpC,QAC9C2J,MAQJ,SAAW3J,EAASosB,GAmBlB,SAAS6tB,EAAUrkC,GACjBwW,EAAGjI,UAAUq1B,IAAI/2C,MAAMkH,KAAM/F,WAd/B5D,EAAQk6C,SAAWD,EAqBnB7tB,EAAGqa,KAAK8B,QAAQ0R,EAAU7tB,EAAGjI,UAAUq1B,KAQvCS,EAASn4C,UAAUrB,KAAO,WAU1Bw5C,EAASn4C,UAAUf,IAAM,WACvB4I,KAAKwwC,IAAM,IAAI/zC,QAAS,UAAU1C,OAAO,UAAUgL,KAAK,OAAO,YAC/D/E,KAAKwwC,IAAIz6B,OACT/V,KAAKwwC,IAAI94B,MAAM,iBACf1X,KAAKwwC,IAAIp5B,QACTpX,KAAKwwC,IAAIC,aAAan4C,EAAI0H,KAE1B,IAAI0wC,EAAU1wC,KAAKwwC,IAAI1vB,cAAc,OACrC4vB,EAAQpvB,UAAY,WAEpBthB,KAAKwwC,IAAIrvB,KAAKC,YAAYsvB,GAC1B1wC,KAAK6gB,OAAS7gB,KAAKwwC,IAAI1vB,cAAc,UAErC4vB,EAAQtvB,YAAYphB,KAAK6gB,QAEzB,IAAI2e,EAAOx/B,KACPgM,EAAQyW,EAAGqa,KAAK9wB,MAAMhM,KAAKiM,OAAO0L,QAAQ3L,MAAO,OAAO,IAAI6E,MAEhE7Q,KAAK6gB,OAAOE,IAAM/gB,KAAKujC,aAAev3B,EAEtCyW,EAAGqa,KAAKhtB,GAAGrT,OAAQ,SAAU,WAC3B+iC,EAAKjsB,aAcT+8B,EAASn4C,UAAUw4C,EAAI,SAAUx+B,EAAMq+B,GAErCr+B,EAAOA,EAAKnF,QAAQ,QAAS,KAC7BhN,KAAKmd,OAAOhL,GACZ,IACE,IAAIsO,EAAS+vB,EAAIxvB,qBAAqB,UAAU,GAChDP,EAAOC,WAAWC,YAAYF,GAC9B,MAAO1hB,MAWXuxC,EAASn4C,UAAUob,QAAU,WAC3B,GAAIvT,KAAK6gB,OAAO,CACd,IACE7gB,KAAK6gB,OAAOE,IAAM,cAClB,MAAMhiB,IAERiB,KAAKwwC,IAAM,KACXxwC,KAAK6gB,OAAOH,WAAWC,YAAY3gB,KAAK6gB,QACxC7gB,KAAK6gB,OAAS,KAEd+vB,mBAWJN,EAASn4C,UAAUif,MAAQ,WAEzB,OADApX,KAAKuT,UACEkP,EAAGjI,UAAUq1B,IAAI13C,UAAUif,MAAM1gB,KAAKsJ,OAW/CswC,EAASpuB,MAAQ,SAAUjW,GACzB,GAAqB,oBAAVxP,SAA2B,UAAU1C,OAAO,UAAUgL,KAAK,OAAStI,OAC7E,IAEE,OADQ,IAAIA,QAAS,UAAU1C,OAAO,UAAUgL,KAAK,OAAO,aAChD0d,EAAGjI,UAAUq1B,IAAI3tB,MAAMjW,GACnC,MAAMlN,IAEV,OAAO,GAUTuxC,EAASrL,aAAe,WAGtB,OAAO,GASTxiB,EAAG3J,WAAW5X,KAAK,YAjKrB,MAoKI,IAAsBuhB,GAAKA,GAAGjI,UAAYlkB,OAAOD,aACjD,IAAsBosB,GAAKA,GAAKnsB,OAAOspC,OAAOvpC,SASlD,SAAWA,EAASosB,EAAI1I,GAgBtB,SAAS82B,IACPpuB,EAAGjI,UAAUq1B,IAAI/2C,MAAMkH,KAAM/F,WAsD/B,SAASwqC,KAjETpuC,EAAQ,eAAiBw6C,EAkBzBpuB,EAAGqa,KAAK8B,QAAQiS,EAAYpuB,EAAGjI,UAAUq1B,KAMzCptB,EAAGqa,KAAKI,MAAM2T,EAAYpuB,EAAGjI,UAAUq1B,KAQvCgB,EAAW14C,UAAUrB,KAAO,cAQ5B+5C,EAAW14C,UAAUwqC,WAAa,WAChC,OAAO,GAWTkO,EAAW14C,UAAU4d,KAAO,WAI1B,OADA0M,EAAGjI,UAAUq1B,IAAI13C,UAAU4d,KAAKrf,KAFrBsJ,OAGJ,GAWT6wC,EAAW14C,UAAUf,IAAM,WACzB,GAAK4I,KAAKijC,OAAV,CAEA,IAAIzD,EAAOx/B,KAgCXA,KAAKqd,IAAMrd,KAAK+c,UAEZhD,EAAOuC,gBAAkBtc,KAAKqd,eAAef,gBAC/Ctc,KAAKqd,IAAI5I,OApBX,WACEzU,KAAKyU,OAASgwB,EACdzkC,KAAKyX,QAAUgtB,EACfjF,EAAKsR,aAAe,EACpBtR,EAAKriB,OAAOnd,KAAK2d,cACjB6hB,EAAKpoC,OAgBL4I,KAAKqd,IAAI5F,QAbX,WACE+nB,EAAKsR,gBACDtR,EAAKsR,cAAgBtR,EAAKsR,aAAe,EAC3CtR,EAAKtkB,UAELskB,EAAKpoC,QAUP4I,KAAKqd,IAAIO,mBApCX,WACyB,GAAnB5d,KAAKsV,aACPtV,KAAK4d,mBAAqB6mB,EAEP,KAAfzkC,KAAK+d,QACPyhB,EAAKriB,OAAOnd,KAAK2d,cACjB6hB,EAAKpoC,OAELooC,EAAKtkB,YA+BXlb,KAAKqd,IAAIzU,KAAK,QAShBioC,EAAW14C,UAAU+iB,QAAU,WAG7B,GAFAuH,EAAGjI,UAAUq1B,IAAI13C,UAAU+iB,QAAQxkB,KAAKsJ,MAEpCA,KAAKqd,IAAK,CACZrd,KAAKqd,IAAIO,mBAAqB5d,KAAKqd,IAAI5I,OAASzU,KAAKqd,IAAI5F,QAAUgtB,EACnE,IACEzkC,KAAKqd,IAAIR,QACT,MAAM9d,IACRiB,KAAKqd,IAAM,OAefwzB,EAAW14C,UAAUsrC,MAAQ,SAAUx3B,EAAQ2H,GAC7C,IAAI4rB,EAAOx/B,KAEXyiB,EAAGqa,KAAKmB,MAAM,WACZrqB,EAAGld,KAAK8oC,MAUZ/c,EAAG3J,WAAW5X,KAAK,eAnKrB,MAsKI,IAAsBuhB,GAAKA,GAAGjI,UAAYlkB,OAAOD,aACjD,IAAsBosB,GAAKA,GAAKnsB,OAAOspC,OAAOvpC,QAC9C2J,MASJ,SAAW3J,EAASosB,EAAI1I,GAStB,IAAIg3B,EAAYh3B,EAAO9L,UAAY,kBACjC8L,EAAO9L,SAASC,gBAAgBC,MAmBlC,SAAS6iC,EAAc/kC,GACrBwW,EAAGjI,UAAU,eAAe1hB,MAAMkH,KAAM/F,WAExC+F,KAAKge,MAAQyE,EAAG5T,EAAE3U,OAElB,IAAIslC,EAAOx/B,KAEXyiB,EAAG5T,EAAE3N,KAAK,SAAU+jB,GAClBua,EAAKmR,EAAE1rB,KArBX5uB,EAAQ,iBAAmB26C,EA6B3BvuB,EAAGqa,KAAK8B,QAAQoS,EAAcvuB,EAAGjI,UAAU,gBAQ3Cw2B,EAAa74C,UAAUrB,KAAO,gBAY9Bk6C,EAAa74C,UAAU23C,KAAO,SAAU39B,GACtC,IAAIqtB,EAAOx/B,KACPgM,EAAQyW,EAAGqa,KAAK9wB,MACXhM,KAAKiM,OAAO0L,QAAQ3L,MACrB,OAAQ,IAAI6E,KAAQ,MAAQ7Q,KAAKge,OAGzC,IAAKhe,KAAK4gB,KAAM,CACd,IAGIC,EAHAD,EAAO3S,SAAS6S,cAAc,QAC9Bc,EAAO3T,SAAS6S,cAAc,YAC9BxiB,EAAK0B,KAAKqhB,SAAW,mBAAqBrhB,KAAKge,MAGnD4C,EAAKU,UAAY,WACjBV,EAAKzS,MAAMoT,SAAW,WACtBX,EAAKzS,MAAMqT,IAAM,MACjBZ,EAAKzS,MAAMsT,KAAO,MAClBb,EAAKzS,MAAM4qB,QAAU,OACrBnY,EAAKc,OAASpjB,EACdsiB,EAAKnE,OAAS,OACdmE,EAAKe,aAAa,iBAAkB,SACpCC,EAAK9qB,KAAO,IACZ8pB,EAAKQ,YAAYQ,GACjB3T,SAASkT,KAAKC,YAAYR,GAE1B5gB,KAAK4gB,KAAOA,EACZ5gB,KAAK4hB,KAAOA,EAKd,SAASijB,IACPoM,IACAzR,EAAKvzB,OAAOu5B,WAAU,GAGxB,SAASyL,IACHzR,EAAK3e,QACP2e,EAAK5e,KAAKD,YAAY6e,EAAK3e,QAG7B,IAEEA,EAAS5S,SAAS6S,cAAc,iBAAkB0e,EAAKne,SAAU,MACjE,MAAOtiB,IACP8hB,EAAS5S,SAAS6S,cAAc,WACzBhqB,KAAO0oC,EAAKne,SAGrBR,EAAOviB,GAAKkhC,EAAKne,SAEjBme,EAAK5e,KAAKQ,YAAYP,GACtB2e,EAAK3e,OAASA,EAvBhB7gB,KAAK4gB,KAAKiB,OAAS7hB,KAAKujC,aAAev3B,EA0BvCilC,IAIAjxC,KAAK4hB,KAAKpqB,MAAQirB,EAAG3T,KAAKC,UAAUoD,GAEpC,IACEnS,KAAK4gB,KAAKkB,SACV,MAAM/iB,IAEJiB,KAAK6gB,OAAO1C,YACd0C,EAAOjD,mBAAqB,WACI,YAA1B4hB,EAAK3e,OAAOvL,YACduvB,KAIJ7kC,KAAK6gB,OAAOpM,OAASowB,EAGvB7kC,KAAKiM,OAAOu5B,WAAU,IAUxBwL,EAAa74C,UAAUf,IAAM,WAC3B,IAAIooC,EAAOx/B,KACPygB,EAASxS,SAAS6S,cAAc,UAChC9U,EAAQyW,EAAGqa,KAAK9wB,MACXhM,KAAKiM,OAAO0L,QAAQ3L,MACrB,OAAQ,IAAI6E,KAAQ,MAAQ7Q,KAAKge,OAGrChe,KAAKygB,SACPzgB,KAAKygB,OAAOC,WAAWC,YAAY3gB,KAAKygB,QACxCzgB,KAAKygB,OAAS,MAGhBA,EAAO/D,OAAQ,EACf+D,EAAOM,IAAM/gB,KAAKujC,aAAev3B,EACjCyU,EAAOhJ,QAAU,WACf+nB,EAAKtkB,WAGP,IAAI4pB,EAAW72B,SAAS+S,qBAAqB,UAAU,GACvD8jB,EAASpkB,WAAWO,aAAaR,EAAQqkB,GACzC9kC,KAAKygB,OAASA,EAEVswB,GACF5hC,WAAW,WACT,IAAI0R,EAAS5S,SAAS6S,cAAc,UACpC7S,SAASkT,KAAKC,YAAYP,GAC1B5S,SAASkT,KAAKR,YAAYE,IACzB,MAWPmwB,EAAa74C,UAAUw4C,EAAI,SAAU1rB,GAKnC,OAJAjlB,KAAKmd,OAAO8H,GACRjlB,KAAKijC,QACPjjC,KAAK5I,MAEA4I,MAWTgxC,EAAa74C,UAAUsrC,MAAQ,SAAUx3B,EAAQ2H,GAC/C,IAAI4rB,EAAOx/B,KACX,IAAK+wC,EAAW,OAAOn9B,EAAGld,KAAKsJ,MAE/ByiB,EAAGqa,KAAK/uB,KAAK,WACX6F,EAAGld,KAAK8oC,MAWZwR,EAAa9uB,MAAQ,WACnB,MAAO,aAAcnI,GAUvBi3B,EAAa/L,aAAe,WAC1B,OAAO,GASTxiB,EAAG3J,WAAW5X,KAAK,iBAlPrB,MAqPI,IAAsBuhB,GAAKA,GAAGjI,UAAYlkB,OAAOD,aACjD,IAAsBosB,GAAKA,GAAKnsB,OAAOspC,OAAOvpC,QAC9C2J,MAIFqL,gCAAMC,8BAAA,WAAmB,OAAOmX,IAA1B3pB,MAAAzC,QAAAgV,mCAAA/Q,IAAAgR,gCAAAhV,OAAAD,QAAAiV,+BA3xHR,uOCHA,IAAM4lC,EAAe/6C,EAAQ,IACvBwF,EAAgBxF,EAAQ,GACxByF,EAAYzF,EAAQ,GACpB0F,EAAW1F,EAAQ,IACnB2F,EAAU3F,EAAQ,IAClB4F,EAAY5F,EAAQ,IACpB6F,EAAQ7F,EAAQ,GAChBkG,EAAYlG,EAAQ,GACpB8I,EAAe9I,EAAQ,GACvB8F,EAAkB9F,EAAQ,IAC1B+F,EAAa/F,EAAQ,IACrBgG,EAAahG,EAAQ,IACrBiG,EAAYjG,EAAQ,IACpBg7C,EAAoBh7C,EAAQ,IAC5BsP,EAAgBtP,EAAQ,IACxBi7C,EAAsBj7C,EAAQ,IAC9Bk7C,EAAUl7C,EAAQ,IAElBuF,aACJ,SAAAA,EAAYkU,gGAASlN,CAAA1C,KAAAtE,GACnBsE,KAAK4P,QAAUA,GAAW,EAC1B5P,KAAKlJ,KAAO,eACZkJ,KAAK+I,QAAU,IAAIzF,IACnBtD,KAAKsxC,UACLtxC,KAAKkG,cACLlG,KAAKiG,WAAa,KAClBjG,KAAK+F,IAAM,KACX/F,KAAKgG,KAAO,4FAIZ,IAAMhD,EAAS,IAAItH,EAAQsE,KAAK4P,SAchC,OAbA5M,EAAOlM,KAAOkJ,KAAKlJ,KACnBkM,EAAOqD,cAAcrG,KAAKiG,YAC1BjG,KAAKsxC,OAAOlxC,QAAQ,SAAC6J,GACnBjH,EAAOuuC,SAAStnC,EAAM1D,WAExBvG,KAAK+I,QAAQ3I,QAAQ,SAAC4I,GACpBhG,EAAOwlB,UAAUxf,EAAOzC,WAE1BvG,KAAKkG,WAAW9F,QAAQ,SAAC6G,GACvBjE,EAAOkE,aAAaD,EAAUV,WAEhCvD,EAAO+D,OAAO/G,KAAK+F,IAAIQ,SACvBvD,EAAOgE,QAAQhH,KAAKgG,KAAKO,SAClBvD,kCAIP,IAAML,GACJiN,QAAS5P,KAAK4P,QACd9Y,KAAMkJ,KAAKlJ,KACXiS,WACAuoC,UACAprC,cACAD,WAAYjG,KAAKiG,YAanB,OAXAjG,KAAKsxC,OAAOlxC,QAAQ,SAAC6J,GACnBtH,EAAM2uC,OAAOpwC,KAAK+I,EAAMtH,WAE1B3C,KAAK+I,QAAQ3I,QAAQ,SAAC4I,GACpBrG,EAAMoG,QAAQ7H,KAAK8H,EAAOrG,WAE5B3C,KAAKkG,WAAW9F,QAAQ,SAAC6G,GACvBtE,EAAMuD,WAAWhF,KAAK+F,EAAUtE,WAElCA,EAAMoD,IAAM/F,KAAK+F,KAAO/F,KAAK+F,IAAIpD,QACjCA,EAAMqD,KAAOhG,KAAKgG,MAAQhG,KAAKgG,KAAKrD,QAC7BA,qCAGEiN,GACT5P,KAAK4P,QAAUA,oCAGP4hC,GACRxxC,KAAKwxC,OAASA,kCAGR16C,GACNkJ,KAAKlJ,KAAOA,0CAIZ,OAAOkJ,KAAKiG,iDAGAA,GACZjG,KAAKiG,WAAaA,oCAGVwrC,GACRzxC,KAAKyxC,OAASA,mCAGPxnC,GACPjK,KAAKsxC,OAAOpwC,KAAK+I,oCAGV1H,GACP,IAAIiF,EAMJ,OALAxH,KAAKsxC,OAAOlxC,QAAQ,SAAC6J,GACfA,EAAM1C,UAAU7D,gBAAkBnB,EAAKmB,gBACzC8D,EAASyC,KAGNzC,oCAGCjF,GACR,IAAKA,EACH,OAAOvC,KAAKsxC,OAEd,IAAMA,KAMN,OALAtxC,KAAKsxC,OAAOlxC,QAAQ,SAAC6J,GACfA,EAAM1C,UAAU7D,gBAAkBnB,EAAKmB,eACzC4tC,EAAOpwC,KAAK+I,KAGTqnC,uCAGII,GACX,IAAIlqC,EAMJ,OALAxH,KAAKsxC,OAAOlxC,QAAQ,SAAC6J,GACfA,EAAM5C,QAAQ3D,gBAAkBguC,EAAKhuC,gBACvC8D,EAASyC,KAGNzC,uCAIP,OAAOxH,KAAK4P,0CAIZ,OAAO5P,KAAKgG,qCAGNyB,GACNzH,KAAKgG,KAAOyB,mCAIZ,OAAOzH,KAAK+F,mCAGP2B,GACL1H,KAAK+F,IAAM2B,uCAGAT,GACXjH,KAAKkG,WAAWhF,KAAK+F,yCAGTf,GAAY,IAAAnG,EAAAC,KACxBkG,EAAW9F,QAAQ,SAAC6G,GAClBlH,EAAKmH,aAAaD,6CAKpB,OAAOjH,KAAKkG,6CAGJ5H,GACR,OAAO0B,KAAK+I,QAAQ3R,IAAIkH,wCAIxB,OAAO0B,KAAK+I,iDAIZ,OAAI/I,KAAK+I,QAAQwzB,SAASriC,OAAS,EAC1B8F,KAAK+I,QAAQwzB,SAAS,GAExB,uCAGCvzB,GACRhJ,KAAK+I,QAAQpF,IAAIqF,EAAO3B,QAAS2B,wCAGtBA,GACXhJ,KAAK+I,QAAQ4oC,OAAO3oC,EAAO3B,0CAI3B,IAAMif,GACJ1W,QAAS,EACT3F,UAGFqc,EAAI1W,QAAU5P,KAAK4P,SAAW,EAC9B0W,EAAIkrB,OAASxxC,KAAKwxC,SAChBtoB,SAAU,IACVK,WAAY,IAAI1Y,MAAQ+Z,UACxBgnB,eAAgB5xC,KAAK4P,QACrBiiC,QAAS,KACTC,MAAO,EACPzwC,QAAS,aAGXilB,EAAIxvB,KAAOkJ,KAAKlJ,MAAQ,eAExBwvB,EAAIrgB,WAAajG,KAAK+xC,gBACtBzrB,EAAImrB,OAASzxC,KAAKyxC,SAAYO,MAAO,EAAGvjB,KAAM,GAE9C,IAAI1oB,EAAM/F,KAAKiyC,SACXlsC,IACEA,EAAImsC,WACN5rB,EAAI6rB,QAAU,YAEhB7rB,EAAI8rB,WAAarsC,EAAIssC,UACrB/rB,EAAIgsB,SAAWvsC,EAAIwsC,WACnBjsB,EAAIksB,OAASzsC,EAAI0sC,UAGnBnsB,EAAIosB,aAAe1yC,KAAK0yC,eAAkBC,SAAU,MAAOvhB,MAAO,KAClE9K,EAAIlc,UAEJ,IAAMwoC,GAAWrwC,KAAM,SAAUswC,SAC7B7sC,EAAOhG,KAAK8yC,UACZ9sC,IACFsgB,EAAIxiB,aACFvB,KAAMyD,EAAK+sC,UACXlvC,KAAMmC,EAAKgtC,kBAGb1sB,EAAI5mB,MAAQ1D,EAAMsD,SAAS0G,EAAKitC,aAGlCjzC,KAAKsxC,OAAOlxC,QAAQ,SAAC6J,GACnB,IAAMipC,GACJ3wC,KAAM0H,EAAM1C,UACZjF,KAAM2H,EAAMkpC,UACZ9mC,SAAU,oBACV+mC,QACAC,OACAC,UACAC,OACAruB,aACAhf,cACAstC,cACArqC,SACAxD,SAGFutC,EAAG9zC,UAAY/C,EAAUiD,SAAS2K,EAAMtB,gBAExCuqC,EAAGO,QAAU,WAEbP,EAAGjtC,WAAagE,EAAM8nC,gBAEtBmB,EAAGrsC,YAAcoD,EAAMypC,iBAEvBR,EAAGS,IAAM1pC,EAAM5C,QAEfurC,EAAOC,KAAK3xC,KAAK+I,EAAM5C,SACvB6rC,EAAGU,KAAO3pC,EAAM2pC,KAEZ3pC,EAAM4pC,aAAe,GACvBX,EAAGhuB,UAAUhkB,MACXqB,KAAM,KACNyjC,MAAO/7B,EAAM4pC,eAIE5pC,EAAM6pC,gBACd1zC,QAAQ,SAAC6G,GAClBisC,EAAGhtC,WAAWhF,MACZgB,WAAY+E,EAAU8sC,gBACtBC,UAAW/sC,EAAUgtC,iBACrB7xC,UAAW6E,EAAU89B,eACrB1iC,SAAU4E,EAAUitC,cACpBC,GAAIltC,EAAUmtC,aACd9xC,KAAM2E,EAAUksC,UAChB5wC,KAAM0E,EAAUM,UAChB/E,QAASyE,EAAUotC,aACnB5xC,QAASwE,EAAUqtC,aACnB3yC,WAAYsF,EAAUstC,qBAI1BxuC,EAAMkE,EAAMgoC,YAENlsC,EAAImsC,WACNgB,EAAGf,QAAU,YAEfe,EAAGd,WAAarsC,EAAIssC,UACpBa,EAAGZ,SAAWvsC,EAAIwsC,WAClBW,EAAGV,OAASzsC,EAAI0sC,SACZ1sC,EAAIyuC,sBACNtB,EAAG9tC,gBAAkBW,EAAIyuC,uBAI7BxuC,EAAOiE,EAAM6oC,aAEXI,EAAGpvC,aACDvB,KAAMyD,EAAK+sC,UACXlvC,KAAMmC,EAAKgtC,kBAGbE,EAAGxzC,MAAQ1D,EAAMsD,SAAS0G,EAAKitC,aAG7BhpC,EAAMvK,QACRwzC,EAAGxzC,MAAQ1D,EAAMsD,SAAS2K,EAAMvK,QAGlCuK,EAAMwqC,YAAYr0C,QAAQ,SAACwC,GACzBswC,EAAGG,IAAInyC,MACLwkC,QAAS9iC,EAAM2E,UACf3E,MAAOA,EAAMgB,WACbxC,KAAMwB,EAAM8xC,UACZ7xC,SAAUD,EAAM+xC,gBAGlB,IAAM7xC,EAASF,EAAMgyC,YACjB39C,OAAO+K,KAAKc,GAAQ5I,OAAS,GAC/Bg5C,EAAGE,KAAKlyC,MACNwkC,QAAS9iC,EAAM2E,UACfxK,OAAQ9F,OAAO+K,KAAKc,GACL8B,IAAI,SAAAiwC,GAAI,OAAIA,GAAQ/xC,EAAO+xC,GAAP,IAAA96C,OAAmB+I,EAAO+xC,IAAU,MACxD9vC,KAAK,OAIxBnC,EAAMkyC,cAAc10C,QAAQ,SAACkzC,GAC3BJ,EAAGI,OAAOpyC,MACRwkC,QAAS9iC,EAAM2E,UACfhF,KAAM+wC,EAAO/wC,KACbjB,QAASgyC,EAAOhyC,YAIhBsB,EAAMmF,WACRmrC,EAAGG,IAAInyC,MACLwkC,QAAS9iC,EAAMoF,SACfpF,MAAO,MACPxB,KAAMwB,EAAM8xC,UACZ7xC,SAAUD,EAAM+xC,gBAElBzB,EAAGE,KAAKlyC,MACNwkC,QAAS9iC,EAAMoF,SACfjL,OAAM,OAAAhD,OAAS6I,EAAM2E,gBAI3B,IAAMwtC,KAEN7B,EAAGG,IAAIjzC,QAAQ,SAACizC,GACd0B,EAAS7zC,KAAKmyC,EAAI3N,WAGpBwN,EAAG6B,SAAWA,EAAShwC,KAAK,KAE5BkF,EAAM+qC,gBAAgB50C,QAAQ,SAACmV,EAAK/d,GAClC07C,EAAGK,IAAIryC,MACL1J,QACA+d,UAIJtL,EAAMgrC,UAAU70C,QAAQ,SAACgH,GACvB,IAAMV,GACJpI,GAAI8I,EAAQC,QACZjI,UAAWH,EAAaK,SAAS8H,EAAQuB,gBACzC7F,OAAQ,IAENsE,EAAQ8tC,aAAah7C,SACvBwM,EAAI5D,OAAJ,MAAA/I,OAAmBqN,EAAQ8tC,aAAanwC,KAAK,OAE/CqC,EAAQwtC,YAAYx0C,QAAQ,SAAC+0C,EAAOr9C,GAClC,IAAMs9C,EAAS1uC,EAAI5D,OAAO5I,OAAS,IAAM,GACzCwM,EAAI5D,QAAJ,GAAA/I,OAAiBq7C,GAAjBr7C,OAA0BjC,EAA1B,KAAAiC,OAAiCo7C,KAGnCjC,EAAGvtC,KAAKzE,KAAKwF,KAGf,IAAMd,EAAYqE,EAAMorC,eAClBC,EAAcrrC,EAAMsrC,iBAE1B,GAAI3vC,EAAW,CACb,IAAIoY,EAAQ,EACZk1B,EAAGttC,aACH,IAAMgD,EAAOhD,EAAUsC,oBAAoBjJ,EAAaM,MAClDsJ,EAAOjD,EAAUsC,oBAAoBjJ,EAAaO,MAExD,GAAIoJ,GAAQA,EAAK1O,OAAQ,CACvB,IAAIulC,EAAO,GACX72B,EAAKxI,QAAQ,SAAC4I,GACZ,IAAIZ,EAAe,GACnBY,EAAO5I,QAAQ,SAACuK,GACdvC,IACGA,EAAalO,OAAS,IAAM,KAAOyQ,EAAM6qC,WAAa,IAAM,IAAM7qC,EAAMtD,UAE7Eo4B,IAASA,EAAKvlC,OAAS,IAAM,IAAMkO,IAErC8qC,EAAGttC,UAAH,MAAA7L,OAAmBikB,IAAW,OAC9Bk1B,EAAGttC,UAAH,OAAA7L,OAAoBikB,IAAWyhB,EAC/BzhB,GAAS,EAGX,GAAInV,GAAQA,EAAK3O,OAAQ,CACvB,IAAIulC,KACJ52B,EAAKzI,QAAQ,SAAC4I,GACZ,IAAIZ,EAAe,GACnBY,EAAO5I,QAAQ,SAACuK,GACdvC,IACGA,EAAalO,OAAS,IAAM,KAAOyQ,EAAM6qC,WAAa,IAAM,IAAM7qC,EAAMtD,UAE7Eo4B,IAASA,EAAKvlC,OAAS,IAAM,IAAMkO,IAErC8qC,EAAGttC,UAAH,MAAA7L,OAAmBikB,IAAW,OAC9Bk1B,EAAGttC,UAAH,OAAA7L,OAAoBikB,IAAWyhB,EAC/BzhB,GAAS,GAITs3B,IACFpC,EAAGrtC,cACDrO,MAAO89C,EAAYG,4BAIvBnvB,EAAIrc,MAAM/I,KAAKgyC,KAEjBN,EAAOC,KAAK6C,OACZpvB,EAAIrc,MAAMyrC,KAAK,SAACC,EAAIC,GAClB,OAAID,EAAGhC,IAAMiC,EAAGjC,KAAa,EACzBgC,EAAGhC,IAAMiC,EAAGjC,IAAY,EACrB,IAvPF,IAAAkC,GAAA,EAAAC,GAAA,EAAAC,OAAAz7C,EAAA,IA0PP,QAAA07C,EAAAC,EAAqBj2C,KAAK+I,QAAQwzB,SAAlCjlC,OAAA4U,cAAA2pC,GAAAG,EAAAC,EAAAC,QAAAniB,MAAA8hB,GAAA,EAA4C,KAAjC7sC,EAAiCgtC,EAAAx+C,MAAA2+C,GAAA,EAAAC,GAAA,EAAAC,OAAA/7C,EAAA,IAC1C,QAAAg8C,EAAAC,EAAoBvtC,EAAOwlB,YAAY+N,SAAvCjlC,OAAA4U,cAAAiqC,GAAAG,EAAAC,EAAAL,QAAAniB,MAAAoiB,GAAA,EAAiD,KAAtCpsC,EAAsCusC,EAAA9+C,MAAAg/C,GAAA,EAAAC,GAAA,EAAAC,OAAAp8C,EAAA,IAC/C,IAD+C,IAC/Cq8C,EAD+CC,EAAA,eACpC1D,EADoCyD,EAAAn/C,MAG7C,GAAIuS,EAAM8sC,cAER,GAAI9sC,EAAM8sC,eAAiB3D,EAAGS,IAkB5B,OAjBA5pC,EAAM+sC,kBAAkB12C,QAAQ,SAACqK,GAC/ByoC,EAAGM,WAAWtyC,MACZgI,UAAWuB,EAAMK,eACjB3B,MAAOsB,EAAMssC,WAAWhyC,KAAK,SAIjCgF,EAAMgtC,WAAW32C,QAAQ,SAACqL,GACxBynC,EAAG/pC,MAAMjI,MACP5C,GAAImN,EAAOrC,KACXxH,UAAW,QACXpK,MAAOiU,EAAOurC,eAGdhuC,EAAO3B,SAAW0C,EAAM1C,UAC1B6rC,EAAGxB,KAAH,GAAA33C,OAAaiP,EAAO3B,QAApB,KAAAtN,OAA+BgQ,EAAM1C,UAEvC,aAEG,GAAI6rC,EAAG3wC,KAAKmB,gBAAkBqG,EAAMG,WAAWxG,cAqCpD,OAnCAqG,EAAM+sC,kBAAkB12C,QAAQ,SAACqK,GAC/ByoC,EAAGM,WAAWtyC,MACZgI,UAAWuB,EAAMK,eACjB3B,MAAOsB,EAAMssC,WAAWhyC,KAAK,SAIjCgF,EAAMgtC,WAAW32C,QAAQ,SAACqL,GACxBynC,EAAG/pC,MAAMjI,MACP5C,GAAImN,EAAOrC,KACXxH,UAAW,QACXpK,MAAOiU,EAAOurC,aAEZvrC,EAAOwrC,eAAiBxrC,EAAOyrC,cACjChE,EAAG/pC,MAAMjI,MACP5C,GAAImN,EAAOrC,KACXxH,UAAW,OACXpK,MAAK,GAAAuC,OAAK0R,EAAOwrC,cAAZ,KAAAl9C,OAA6B0R,EAAOyrC,gBAGzCzrC,EAAO0rC,cACTjE,EAAG/pC,MAAMjI,MACP5C,GAAImN,EAAOrC,KACXxH,UAAW,UACXpK,MAAOiU,EAAO0rC,eAGd1rC,EAAO2rC,YACTlE,EAAG/pC,MAAMjI,MACP5C,GAAImN,EAAOrC,KACXxH,UAAW,QACXpK,MAAOiU,EAAO2rC,eAIpB,SA7DJC,EAAiB/wB,EAAIrc,MAArB3S,OAAA4U,cAAAsqC,GAAAG,EAAAU,EAAAnB,QAAAniB,MAAAyiB,GAAA,EAA4B,cAAAI,IA6DxB,OA9D2C,MAAAjR,GAAA8Q,GAAA,EAAAC,EAAA/Q,EAAA,YAAA6Q,GAAA,MAAAa,EAAAC,QAAAD,EAAAC,SAAA,WAAAb,EAAA,MAAAC,KADP,MAAA/Q,GAAAyQ,GAAA,EAAAC,EAAA1Q,EAAA,YAAAwQ,GAAA,MAAAI,EAAAe,QAAAf,EAAAe,SAAA,WAAAlB,EAAA,MAAAC,KA1PrC,MAAA1Q,GAAAmQ,GAAA,EAAAC,EAAApQ,EAAA,YAAAkQ,GAAA,MAAAI,EAAAqB,QAAArB,EAAAqB,SAAA,WAAAxB,EAAA,MAAAC,GAkUP,OAHAnD,EAAOC,KAAOD,EAAOC,KAAK9tC,KAAK,KAC/BuhB,EAAIlc,OAAOlJ,KAAK0xC,GAETtsB,qCAIP,IAAMA,EAAMtmB,KAAKoU,SACjB,OAAO88B,EAAax5B,MAAM4O,YAwE9B,SAASixB,EAAgBv5B,EAAOk1B,EAAIttC,GAClC,IAAM4xC,EAAetE,EAAGttC,UAAH,MAAA7L,OAAmBikB,IAClCy5B,EAAgBvE,EAAGttC,UAAH,OAAA7L,OAAoBikB,IAC1C,GAAIw5B,EAAc,CAChB,IAAMp4C,EAAYH,EAAaE,QAAQq4C,GAC1BtG,EAAawG,yBAAyBD,GAC9Cr3C,QAAQ,SAAC4I,GACZ,IAAMZ,KACNY,EAAO5I,QAAQ,SAACuK,GACdvC,EAAalH,KAAK,IAAIkwC,EAAoBzmC,EAAMgtC,KAAMhtC,EAAMitC,WAE9DhyC,EAAU0C,+BAA+BlJ,EAAWgJ,MAqI1D1M,EAAQm8C,cAAgB,SAAC5uC,GACvB,IAAMqd,EAAM4qB,EAAa3+B,MAAMtJ,GAC/B,OAAOvN,EAAQsS,QAAQsY,IAIzB5qB,EAAQsS,QAAU,SAACsY,GACjB,IAAMwxB,EAAU,IAAIp8C,EAEpBo8C,EAAQC,WAAWzxB,EAAI1W,SACvBkoC,EAAQE,UAAU1xB,EAAImrB,QACtBqG,EAAQzxC,cAAcigB,EAAIrgB,YAC1B6xC,EAAQG,UAAU3xB,EAAIkrB,QACtBsG,EAAQpF,aAAepsB,EAAIosB,aAC3BoF,EAAQhhD,KAAOwvB,EAAIxvB,KAEnB,IAAIkO,EAAQshB,EAAIgsB,SACZrtC,EAAMqhB,EAAIksB,OACVJ,EAAa9rB,EAAI8rB,YACjBptC,GAASC,GAAOmtC,IAClB0F,EAAQ/wC,OAAO,IAAIjL,EAAQkJ,EAAOC,EAAKmtC,IAGzC,IAAI8F,EAAkB5xB,EAAIxiB,YAC1B,GAAIo0C,EAAiB,CACnB,IAAMC,EAAaD,EAAgB31C,KAC7B61C,EAAoBF,EAAgBr0C,KACtCnE,EAAQ,KACR4mB,EAAI5mB,QACNA,EAAQ1D,EAAMmD,QAAQmnB,EAAI5mB,QAG5Bo4C,EAAQ9wC,QAAQ,IAAInL,EAAS6D,EAAOy4C,EAAYC,IAiFlD,OA9EA9xB,EAAIrc,MAAM7J,QAAQ,SAAC8yC,GACjB,IAAMjpC,EAAQipC,EAAG3wC,KACXoxC,EAAMT,EAAGS,IACTrxC,EAAO4wC,EAAG5wC,KACV+1C,EAAY,IAAIt8C,EAAU43C,EAAKrxC,EAAM2H,GAgB3C,GAfAouC,EAAUvxC,eAAeosC,EAAGrsC,aAC5BwxC,EAAUzE,KAAOV,EAAGU,KACpByE,EAAUhyC,cAAc6sC,EAAGjtC,YAEvBitC,EAAGhuB,WAAaguB,EAAGhuB,UAAUhrB,OAAS,GACxCg5C,EAAGhuB,UAAU9kB,QAAQ,SAAC8kB,GACG,OAAnBA,EAAU3iB,MACZ81C,EAAUjyC,WAAW8e,EAAU8gB,SAKrChhC,EAAQkuC,EAAGZ,SACXrtC,EAAMiuC,EAAGV,OACTJ,EAAac,EAAGd,WACZptC,GAASC,GAAOmtC,EAAY,CAC9B,IAAMkG,EAAU,IAAIx8C,EAAQkJ,EAAOC,EAAKmtC,GACpCc,EAAG9tC,iBACLkzC,EAAQhzC,mBAAmB,qBAE7B+yC,EAAUtxC,OAAOuxC,GAInB,GADAJ,EAAkBhF,EAAGpvC,YACA,CACnB,IAAMq0C,EAAaD,EAAgB31C,KAC7B61C,EAAoBF,EAAgBr0C,KACtCnE,EAAQ1D,EAAM6D,QACdqzC,EAAGxzC,QACLA,EAAQ1D,EAAMmD,QAAQ+zC,EAAGxzC,QAG3B24C,EAAUrxC,QAAQ,IAAInL,EAAS6D,EAAOy4C,EAAYC,IAGhDlF,EAAGxzC,OACL24C,EAAUlxC,SAASnL,EAAMmD,QAAQ+zC,EAAGxzC,QAGtC,IAAIN,EAAY/C,EAAUkE,SAEtB2yC,EAAG9zC,YACLA,EAAY/C,EAAU8C,QAAQ+zC,EAAG9zC,UAAUC,gBAG7Cg5C,EAAUlyC,aAAa/G,GAEvB,IAAM8G,EAAagtC,EAAGhtC,WAClBA,GACFA,EAAW9F,QAAQ,SAAC6G,GAClBoxC,EAAUnxC,aAAa,IAAIvL,EAAcsL,EAAU/E,WAAY+E,EAAU+sC,UACvE/sC,EAAU7E,UAAW6E,EAAU5E,SAAU4E,EAAUktC,GAAIltC,EAAU3E,KAAM2E,EAAU1E,KACjF0E,EAAUtF,WAAYsF,EAAUzE,QAASyE,EAAUxE,YAhT7D,SAAoB41C,EAAWnF,GAC7B,IAAMqF,EAAO,IAAIj1C,IAEjB4vC,EAAGG,IAAIjzC,QAAQ,SAACo4C,GACd,IAAMj2C,EAAOi2C,EAAI9S,QACX9iC,EAAQ41C,EAAI51C,MACZxB,EAAOo3C,EAAIp3C,KACXyB,EAAW21C,EAAI31C,SAEfC,KACAC,KAENmwC,EAAGE,KAAKhzC,QAAQ,SAACgzC,GACXA,EAAK1N,UAAYnjC,GACN6wC,EAAKr2C,OAAOyU,MAAM,KAC1BpR,QAAQ,SAACuK,GACZ,IAAMwqC,EAAQxqC,EAAM6G,MAAM,KAC1B1O,EAAOqyC,EAAM,GAAGsD,SAAWtD,EAAM,IAAM,IAAIsD,WAI7CvF,EAAGI,QACLJ,EAAGI,OAAOlzC,QAAQ,SAACkzC,GACbA,EAAO5N,UAAYnjC,GACrBQ,EAAS7B,MAAOqB,KAAM+wC,EAAO/wC,KAAMjB,QAASgyC,EAAOhyC,YAI7B,QAAxBsB,EAAMvD,cACRk5C,EAAK50C,IAAI0F,SAASvG,EAAO41C,IAAK,IAAKn2C,GAEnC81C,EAAU/xC,SAAS,IAAI1K,EAAUgH,EAAOL,EAAMnB,EAAMyB,EAAUC,EAAQC,MAI1Ew1C,EAAKn4C,QAAQ,SAACs4C,EAAKp6C,GACjB,IAAMgJ,EAAY+wC,EAAUM,gBAAgBr6C,GACxCgJ,GACFA,EAAUpE,OAAOw1C,KA8QnBxD,CAAWmD,EAAWnF,GAEtB,IAAM0F,EAAU1F,EAAGK,IACfqF,GACFA,EAAQx4C,QAAQ,SAACy4C,GACfR,EAAU5xC,aAAaoyC,EAAOrhD,MAAOqhD,EAAOtjC,OA9QpD,SAAiB8iC,EAAWnF,GAC1B,IAAMvtC,EAAOutC,EAAGvtC,KACXA,GAGLA,EAAKvF,QAAQ,SAACsG,GACZ,IAAMU,EAAU,IAAIiqC,EAAQ3qC,EAAIpI,GAAIW,EAAaE,QAAQuH,EAAItH,YACzD05C,KACEh2C,EAAS,IAAIQ,IACnB,GAAIoD,EAAI5D,OAAQ,CACd,IAAM28B,EAAOyR,EAAa6H,YAAYryC,EAAI5D,QAC1C7L,OAAO+K,KAAKy9B,GAAMr/B,QAAQ,SAACtI,GACb,OAARA,EACFghD,EAAUrZ,EAAK3nC,GAAK0Z,MAAM,KAE1B1O,EAAOa,IAAI7L,EAAK2nC,EAAK3nC,MAGzBsP,EAAQ4xC,WAAWF,GACnB1xC,EAAQ6xC,UAAUn2C,GAEpBu1C,EAAU1xC,OAAOS,KA6PjB6tC,CAAQoD,EAAWnF,GA9LvB,SAAmB7oC,EAAWytC,EAAS5E,GACrC,IAGMnpC,EACAf,EACAyC,EALAytC,EAAU,IAAI51C,IACd2G,EAAQipC,EAAG3wC,KA0CjB,GAzCI2wC,EAAG/pC,OAIL+pC,EAAG/pC,MAAM/I,QAAQ,SAAC+4C,GAChB,IAAM/vC,EAAO+vC,EAAS76C,GAChBxG,EAAMqhD,EAASv3C,UACfpK,EAAQ2hD,EAAS3hD,MAMvB,IALAiU,EAASytC,EAAQ9hD,IAAIgS,MAEnBqC,EAAS,IAAIvP,EAAWkN,GACxB8vC,EAAQv1C,IAAI8H,EAAO2tC,UAAW3tC,IAEN,UAAtB3T,EAAI4L,cACN+H,EAAOnC,SAAS9R,QACX,GAA0B,YAAtBM,EAAI4L,cACb+H,EAAO4tC,WAAW7hD,QACb,GAA0B,UAAtBM,EAAI4L,cACb+H,EAAO6tC,SAAS9hD,QACX,GAA0B,SAAtBM,EAAI4L,cAA0B,CACvC,IAAMif,EAAMnrB,EAAMga,MAAM,KAClB3S,EAAW8jB,EAAI,GACfjZ,EAAUiZ,EAAI,GACpBlX,EAAOjC,YAAY3K,GACnB4M,EAAOhC,WAAWC,IAClBV,EAAS8uC,EAAQp5C,UAAUG,MAEzBmK,EAAS,IAAI7M,EAAW0C,GACxBi5C,EAAQtvB,UAAUxf,KAEpBe,EAAQf,EAAOuwC,SAAS7vC,OAEtBK,EAAQ,IAAI3N,EAAU6N,EAAOP,IACvB8vC,aAAanvC,GACnBrB,EAAOgB,SAASD,IAElBA,EAAMS,QAAQiB,MAKhBynC,EAAGxB,KAAM,CACX,IAAM/uB,EAAMuwB,EAAGxB,KAAKlgC,MAAM,KACpB3S,EAAW8jB,EAAI,GACfjZ,EAAUiZ,EAAI,GAEhB3Z,EAAS8uC,EAAQp5C,UAAUG,GAC1BmK,IACHA,EAAS,IAAI7M,EAAW0C,GACxBi5C,EAAQtvB,UAAUxf,IAEpB,IAAIe,EAAQf,EAAOuwC,SAAS7vC,GACvBK,KACHA,EAAQ,IAAI3N,EAAU6N,EAAOP,IACvBa,WAAW2oC,EAAGS,KACpB5pC,EAAMyvC,aAAanvC,GACnBrB,EAAOgB,SAASD,IAGlBmvC,EAAQ94C,QAAQ,SAACtI,EAAKsR,GACpB,IAAMqC,EAASytC,EAAQ9hD,IAAIgS,GACtBqC,EAAOwrC,gBACVxrC,EAAOjC,YAAY3K,GACnB4M,EAAOhC,WAAWC,GAClBK,EAAMS,QAAQiB,MAKhBynC,EAAGM,YACLN,EAAGM,WAAWpzC,QAAQ,SAACq5C,GACrB,IAAMtwC,EAAQswC,EAActwC,MAAMqI,MAAM,KAClC/G,EAAQ,IAAIxO,EAAgBw9C,EAAcvwC,UAAWC,GACrDsC,EAASytC,EAAQ9hD,IAAIiS,SAASF,EAAM,GAAI,KAC9C2uC,EACGp5C,UAAU+M,EAAOwrC,eACjBsC,SAAS9tC,EAAOyrC,cAChBxsC,eAAeD,KAkHpB+jB,CAzOJ,SAAsB6pB,EAAWnF,GAC/B,IAAM7oC,KACN,GAAI6oC,EAAGttC,UAAW,CAChB,IAAMA,EAAY,IAAIH,EACtB8xC,EAAgB,IAAKrE,EAAIttC,GACzB2xC,EAAgB,IAAKrE,EAAIttC,GAEzBA,EAAUsC,oBAAoBjJ,EAAaM,MAAMa,QAAQ,SAAC2I,GACxD,IAAMX,KACNW,EAAQ3I,QAAQ,SAAC4I,GACf,IAAMnG,EAAW,IAAIsuC,EAAkBnoC,EAAO3B,QAAS2B,EAAOwsC,YACxDpuC,EAAUixC,EAAUqB,OAAO72C,EAASwE,SACtCD,IACcA,EAAQ8tC,aAChB90C,QAAQ,SAACU,GACf,IAAMwG,EAAY+wC,EAAUM,gBAAgB73C,GACxCwG,GACFzE,EAASyD,SAASgB,KAGtBzE,EAASo2C,UAAU7xC,EAAQwtC,aAC3BxsC,EAAalH,KAAK2B,MAGlBuF,EAAalO,QACfmQ,EAAUnJ,KAAKkH,KAInBiwC,EAAUzxC,aAAahB,GAEzB,GAAIstC,EAAGrtC,aAAc,CACnB,IAAMD,EAAY,IAAIH,GApC1B,SAA0BytC,EAAIttC,GAC5BA,EAAU+zC,wBAAwBzG,EAAGrtC,aAAarO,OAoChDoiD,CAAiB1G,EAAIttC,GACrByyC,EAAUwB,eAAej0C,GAE3B,OAAOyE,EAmMagrC,CAAagD,EAAWnF,GAErB4E,EAAS5E,GAE9B4E,EAAQvG,SAAS8G,KAEZP,GAGTxhD,EAAOD,QAAUqF,mBCh1BjB,IAAAia,EAAAxf,EAAA,IACA2jD,EAAA3jD,EAAA,IAEAE,EAAAqhB,MAAAoiC,EACAzjD,EAAAkc,MAAAoD,EAAApD,MACAlc,EAAA0jD,gBAAApkC,EAAAokC,gBACA1jD,EAAA0iD,YAAApjC,EAAAojC,YACA1iD,EAAA2jD,cAAArkC,EAAAqkC,cACA3jD,EAAA4jD,sBAAAtkC,EAAAskC,sBACA5jD,EAAA6jD,qBAAAvkC,EAAAukC,qBACA7jD,EAAAqhD,yBAAA/hC,EAAA+hC,0CCVA,IAAAyC,EAAA,SAAAx5C,GACA,OAAAgR,OAAAU,OAAA1R,QAAA0R,OAAA1R,MAgBAy5C,EAAA,SAAAn4C,EAAAwK,EAAA4tC,GACA,IAAAC,EAAAr4C,EAAAnL,MAAAmL,EAAApB,MACAoB,EAAAf,OAAAuL,EAAAxK,EAAAf,MACAuL,EAAAxK,EAAAf,SAEAo5C,IAAA7tC,EAAAxK,EAAAnL,QACA2V,EAAAxK,EAAAnL,UAEA,IAAAyjD,EAAAt4C,EAAAf,QAEAo5C,EAAA7tC,EAAAxK,EAAAnL,MAAA2V,GAvBA,SAAA7P,EAAA6P,EAAA5L,EAAA25C,GACA,GAAAA,IAAA35C,EACA4L,EAAA+tC,GAAAL,EAAAv9C,EAAA,SAGA,QAAArG,EAAA,EAAmBA,EAAAsK,EAAA3G,OAAkB3D,GAAA,EACrC,MAAAqG,EAAArG,EAAA,KACAkW,EAAA5L,EAAAtK,IAAA4jD,EAAAv9C,EAAArG,EAAA,KAkBAkkD,CAAAJ,EAAAz9C,MAAAqF,EAAArB,KAAA25C,EAAAt4C,EAAApB,MAAAoB,EAAAnL,MAEAmL,EAAAf,MACAuL,EAAAxK,EAAAf,WAAAq5C,IAIA75C,EAAAvK,EAAA,GACAukD,EAAA54C,OAAA3J,UAAAyU,KAAA7U,KAAA,iBAEA1B,EAAAkc,MAAA,SAAA+T,GACA,IAAAq0B,KACA1wC,KACAwC,EAAAkuC,EAoBA,OAjBAr0B,EAAA9U,MAAA,gBAAAopC,OAAAF,GAAAt6C,QAAA,SAAA5J,GACA,IAAA+L,EAAA/L,EAAA,GACA6jD,EAAA7jD,EAAA0J,MAAA,GACA,MAAAqC,IACA0H,EAAA/I,MAAkBmyC,OAAAD,UAClB3mC,EAAAxC,IAAA/P,OAAA,IAGA,QAAA2U,EAAA,EAAmBA,GAAAnO,EAAA6B,QAAArI,OAAkC2U,GAAA,GACrD,IAAA5M,EAAAvB,EAAA6B,GAAAsM,GACA,GAAA5M,EAAArB,IAAAgM,KAAAytC,GACA,OAAAD,EAAAn4C,EAAAwK,EAAA4tC,MAKAM,EAAA1wC,QACA0wC,GAGA,IAAAE,EAAA,SAAAC,EAAAC,GACA,IAAAziD,EAAAyiD,EAAAvpC,MAAA,WAMA,OALA,IAAAlZ,EAAA4B,OACA4gD,EAAAxiD,EAAA,IAAA6hD,EAAA7hD,EAAA,IACG,IAAAA,EAAA4B,QAAA6gD,EAAA7gD,OAAA,IACH4gD,EAAAxiD,EAAA,SAAAgC,GAEAwgD,GAGAzkD,EAAA0iD,YAAA,SAAAv3C,GACA,OAAAA,EAAAgQ,MAAA,SAAsBqO,OAAAg7B,OAItBxkD,EAAA0jD,gBAAA1jD,EAAA0iD,YAEA1iD,EAAA2jD,cAAA,SAAAx4C,GACA,OAAAA,EAAAgQ,MAAA,KAAA5M,IAAAyN,SAGAhc,EAAA4jD,sBAAA,SAAAz4C,GAGA,IAFA,IAAA0E,KACAm3B,EAAA77B,EAAAgQ,MAAA,KAAA5M,IAAAu1C,GACA5jD,EAAA,EAAiBA,EAAA8mC,EAAAnjC,OAAkB3D,GAAA,EACnC2P,EAAAhF,MACA8yC,UAAA3W,EAAA9mC,GACA49C,GAAA9W,EAAA9mC,EAAA,GACA+L,KAAA+6B,EAAA9mC,EAAA,KAGA,OAAA2P,GAGA7P,EAAA6jD,qBAAA,SAAA14C,GACA,OAAAA,EAAAgQ,MAAA,KAAA5M,IAAA,SAAAiwC,GACA,OAAAA,EAAA9nC,UAAA,EAAA8nC,EAAA36C,OAAA,GAAAsX,MAAA,KAAAqO,OAAAg7B,SAIAxkD,EAAAqhD,yBAAA,SAAAl2C,GACA,OAAAA,EAAAgQ,MAAA,KAAqB5M,IAAA,SAAAoE,GACrB,OAAAA,EAAAwI,MAAA,KAAA5M,IAAA,SAAA9D,GACA,IAAA62C,EAAAC,GAAA,EASA,MAPA,MAAA92C,EAAA,GACA62C,EAAAwC,EAAAr5C,IAEA62C,EAAAwC,EAAAr5C,EAAAiM,UAAA,EAAAjM,EAAA5G,SACA09C,GAAA,IAIAD,OACAC,gCCvHA,IAAAl3C,EAAAvK,EAAA,GAGA6kD,EAAA,WAyBAC,EAAA,SAAA14C,EAAAN,EAAAwK,GACA,IAIA/T,GAAA6J,EAAA,KAJAN,EAAAnB,kBAAAb,SACAgC,EAAAnB,OAAAmB,EAAAf,KAAAuL,IAAAxK,EAAAnL,OACAmL,EAAAnB,SAGA,GAAAmB,EAAApB,MACA,QAAAtK,EAAA,EAAmBA,EAAA0L,EAAApB,MAAA3G,OAAsB3D,GAAA,GACzC,IAAAyB,EAAAiK,EAAApB,MAAAtK,GACA0L,EAAAnL,KACA4B,EAAAwI,KAAAuL,EAAAxK,EAAAnL,MAAAkB,IAGAU,EAAAwI,KAAAuL,EAAAxK,EAAApB,MAAAtK,UAKAmC,EAAAwI,KAAAuL,EAAAxK,EAAAnL,OAEA,OA5CA,SAAAokD,GACA,IAAA3kD,EAAA,EACAmC,EAAAuB,UACAkhD,EAAAziD,EAAAwB,OACA,OAAAghD,EAAAluC,QAAAguC,EAAA,SAAAn2C,GACA,GAAAtO,GAAA4kD,EACA,OAAAt2C,EAEA,IAAAxE,EAAA3H,EAAAnC,GAEA,OADAA,GAAA,EACAsO,GACA,SACA,UACA,SACA,OAAA8M,OAAAtR,GACA,SACA,OAAAgS,OAAAhS,GACA,SACA,aA0BAvH,MAAA,KAAAJ,IAKA0iD,GACA,gBACA,gBACA,qBAEAC,GAAA,iBAGA/kD,EAAAD,QAAA,SAAAskD,EAAAz1C,GACAA,QAEA,MAAAy1C,EAAA/qC,UACA+qC,EAAA/qC,QAAA,GAEA,MAAA+qC,EAAA7jD,OACA6jD,EAAA7jD,KAAA,KAEA6jD,EAAA1wC,MAAA7J,QAAA,SAAAk7C,GACA,MAAAA,EAAAvG,WACAuG,EAAAvG,SAAA,MAIA,IAAAwG,EAAAr2C,EAAAq2C,YAAAH,EACAI,EAAAt2C,EAAAs2C,YAAAH,EACA/0B,KAkCA,OA/BAi1B,EAAAn7C,QAAA,SAAAmC,GACA7B,EAAA6B,GAAAnC,QAAA,SAAA6B,GACAA,EAAAnL,QAAA6jD,GAAA,MAAAA,EAAA14C,EAAAnL,MACAwvB,EAAAplB,KAAA+5C,EAAA14C,EAAAN,EAAA04C,IAEA14C,EAAAf,QAAAy5C,GAAA,MAAAA,EAAA14C,EAAAf,OACAy5C,EAAA14C,EAAAf,MAAAd,QAAA,SAAAk4B,GACAhS,EAAAplB,KAAA+5C,EAAA14C,EAAAN,EAAAq2B,UAOAqiB,EAAA1wC,MAAA7J,QAAA,SAAAk7C,GACAh1B,EAAAplB,KAAA+5C,EAAA,IAAAv6C,EAAA/J,EAAA,GAAA2kD,IAEAE,EAAAp7C,QAAA,SAAAmC,GACA7B,EAAA6B,GAAAnC,QAAA,SAAA6B,GACAA,EAAAnL,QAAAwkD,GAAA,MAAAA,EAAAr5C,EAAAnL,MACAwvB,EAAAplB,KAAA+5C,EAAA14C,EAAAN,EAAAq5C,IAEAr5C,EAAAf,QAAAo6C,GAAA,MAAAA,EAAAr5C,EAAAf,OACAo6C,EAAAr5C,EAAAf,MAAAd,QAAA,SAAAk4B,GACAhS,EAAAplB,KAAA+5C,EAAA14C,EAAAN,EAAAq2B,YAOAhS,EAAAvhB,KAAA,yMChHMosC,aACJ,SAAAA,EAAY7yC,EAAIs5C,gGAAQl1C,CAAA1C,KAAAmxC,GACtBnxC,KAAK1B,GAAKA,EACV0B,KAAK43C,OAASA,EACd53C,KAAKqD,OAAS,IAAIC,IAClBtD,KAAK8C,OAAS,IAAIQ,2FAIlB,IAAMN,EAAS,IAAImuC,EAAkBnxC,KAAK1B,GAAI0B,KAAK43C,QAKnD,OAJA53C,KAAKqD,OAAOjD,QAAQ,SAACwC,GACnBI,EAAOsD,SAAS1D,EAAMI,YAExBA,EAAOi2C,UAAUj5C,KAAK8C,QACfE,kCAGD,IAAAjD,EAAAC,KACA2C,GACJrE,GAAI0B,KAAK1B,GACTs5C,OAAQ53C,KAAK43C,OACbv0C,UACAP,WAQF,OANA9C,KAAKqD,OAAOrB,OAAO5B,QAAQ,SAAC9B,GAC1BqE,EAAMU,OAAO/E,GAAMyB,EAAKsD,OAAOjM,IAAIkH,GAAIqE,UAEzC3C,KAAK8C,OAAOd,OAAO5B,QAAQ,SAAC9B,GAC1BqE,EAAMG,OAAOxE,GAAMyB,EAAK+C,OAAO1L,IAAIkH,GAAI62C,QAElCxyC,kCAIP,OAAO3C,KAAK1B,uCAIZ,OAAO0B,KAAKqD,wCAGLT,GACP5C,KAAKqD,OAAOM,IAAIf,EAAM2E,UAAW3E,uCAIjC,OAAO5C,KAAK8C,yCAGJA,GACR9C,KAAK8C,OAAS,IAAIQ,IAAIR,sCAItB,OAAO9C,KAAK43C,gBAIhBthD,EAAOD,QAAU86C,2LC1DXC,aACJ,SAAAA,EAAY9yC,EAAIs5C,gGAAQl1C,CAAA1C,KAAAoxC,GACtBpxC,KAAK43C,OAASA,EACd53C,KAAK1B,GAAKA,yFAIV,OAAO,IAAI8yC,EAAoBpxC,KAAK1B,GAAI0B,KAAK43C,wCAI7C,OACEt5C,GAAI0B,KAAK1B,GACTs5C,OAAQ53C,KAAK43C,2CAKf,OAAO53C,KAAK43C,uCAIZ,OAAO53C,KAAK1B,YAIhBhI,EAAOD,QAAU+6C,yLC1BjB,IAAMnyC,EAAe9I,EAAQ,GAEvBk7C,aACJ,SAAAA,EAAY/yC,EAAIc,gGAAWsD,CAAA1C,KAAAqxC,GACzBrxC,KAAK1B,GAAKA,EACV0B,KAAKZ,UAAYA,EACjBY,KAAK84C,WACL94C,KAAK8C,OAAS,IAAIQ,2FAIlB,IAAMN,EAAS,IAAIquC,EAAQrxC,KAAK1B,GAAI0B,KAAKZ,WAGzC,OAFA4D,EAAOg2C,WAAWh5C,KAAK84C,SACvB91C,EAAOi2C,UAAUj5C,KAAK8C,QACfE,kCAIP,IAAML,GACJrE,GAAI0B,KAAK1B,GACTc,UAAWH,EAAaK,SAASU,KAAKZ,WACtC05C,QAAS94C,KAAK84C,QACdh2C,WAKF,OAHA9C,KAAK8C,OAAO1C,QAAQ,SAAC+0C,EAAO72C,GAC1BqE,EAAMG,OAAOxE,GAAM62C,IAEdxyC,kCAIP,OAAO3C,KAAK1B,0CAIZ,OAAO0B,KAAKZ,+CAGDA,GACXY,KAAKZ,UAAYA,uCAIjB,OAAOY,KAAK84C,2CAGHA,GAAS,IAAA/4C,EAAAC,KAClBA,KAAK84C,WACLA,EAAQ14C,QAAQ,SAACU,GACff,EAAK+4C,QAAQ53C,KAAKmI,SAASvI,EAAQ,2CAKrC,OAAOd,KAAK8C,yCAGJA,GACR9C,KAAK8C,OAAS,IAAIQ,IAAIR,YAI1BxM,EAAOD,QAAUg7C,mBC9DjBl7C,EAAA,GAAAA,GAAA,oBCIAG,EAAAD,QAAA,SAAA0qB,GACA,SAAAloB,EAAAyC,GACA,oBAAA1C,UACAA,QAAA0C,OAAA1C,QAAAC,KAAA,kBAAAyC,GAQA,IACA,oBAAAmgD,YAJA,oBAAAt9B,aAAA,oBAAAzK,iBAKA+nC,WAAA16B,GACG,oBAAA+gB,KACHA,KAAAprC,KAAA,KAAAqqB,GAEAloB,EAAA,yCAEE,MAAAyC,GACFzC,EAAAyC,oBCxBAhF,EAAAD,QAAA,wqcCAMqlD,GAENA,OAAoB,SAACC,GACnB,IAAIC,EAAO,mBAIX,OAHAD,EAAcv7C,QAAQ,SAACy7C,GACrBD,GAAI,IAAA7hD,OAAQ8hD,KAEd,GAAA9hD,OAAU6hD,EAAV,SAGFF,SAAsB,SAACG,EAAgBC,GAAjB,0BAAA/hD,OACA8hD,EADA,KAAA9hD,OACkB+hD,EADlB,SAGtBJ,gBAA6B,SAACnyC,EAAOmoC,EAAM9nC,EACzCD,EAAOkyC,EAAgBC,GADI,MAE3B,UAAA/hD,OAAU8hD,EAAV,WAAA9hD,OAAkCwP,EAAlC,kBAAAxP,OACU8hD,EADV,UAAA9hD,OACiC23C,EADjC,kBAAA33C,OAEU8hD,EAFV,aAAA9hD,OAEoC6P,EAFpC,kBAAA7P,OAGU8hD,EAHV,WAAA9hD,OAGkC4P,EAHlC,kBAAA5P,OAIU+hD,EAJV,WAAA/hD,OAIqCwP,EAJrC,kBAAAxP,OAKU+hD,EALV,UAAA/hD,OAKoC23C,EALpC,kBAAA33C,OAMU+hD,EANV,aAAA/hD,OAMuC6P,EANvC,kBAAA7P,OAOU+hD,EAPV,WAAA/hD,OAOqC4P,EAPrC,SASF+xC,SAAsB,SAACp1B,EAAKhC,GAC1B,GAAKA,EAAKgM,IAAV,CAGA,GAAIhM,EAAK5mB,OAAS4mB,EAAKiC,WAAY,CACjC,IAAM7oB,EAAQ4oB,EAAIpc,SAAS,SACvBxM,GACFA,EAAM0I,WAAWke,EAAKiC,YAI1B,GAAIjC,EAAKtmB,OAASsmB,EAAKkC,WAAY,CACjC,IAAMxoB,EAAQsoB,EAAIpc,SAAS,SACvBlM,GACFA,EAAMoI,WAAWke,EAAKkC,eAK5Bk1B,gBAA6B,SAACK,GAC5B,IAAIz1B,EAAMy1B,EACJx0B,EAAWjB,EAAI1pB,MAAM,2BAC3B,GAAiB,OAAb2qB,EAAmB,CACrB,IAAMC,EAAO,GAAAztB,OAAMwtB,EAAS,GAAf,cAAAxtB,OAA8BwtB,EAAS,GAAvC,YACbjB,EAAMA,EAAItZ,QAAQua,EAAS,GAAIC,GAGjC,OAAOlB,GAGTo1B,kBAA+B,SAAC5D,EAASkE,EAAW74C,EAAW3L,GAC7DsgD,EAAQxG,OAAOlxC,QAAQ,SAACi4C,GAClBA,EAAU/5C,KAAO09C,GACnB3D,EAAUh1C,OAAOjD,QAAQ,SAACwC,GACxBA,EAAMq5C,SAAS94C,EAAW3L,SAMlC0kD,EAAA,8OCzDA,IAuWAC,EAvWkB,SAACC,GACjB,IAGIj2B,EACAC,EACAi2B,EACAC,EACAC,EAPEh4B,KACAi4B,EAAWJ,EACXK,KAMFC,GAAgB,EAChBC,GAAwB,EAE5BpkD,EAAA,EAAOyC,KAAK,sBAAuBwhD,GAEnCj4B,EAAKkB,UACHC,cACAk3B,aAAc,UAGhBr4B,EAAKoB,YACuBrrB,IAAxBkiD,EAAS92B,aACXnB,EAAKkB,SAASC,WAAa82B,EAAS92B,aAEX,IAAvB82B,EAASK,YACXt4B,EAAKkB,SAASq3B,mBAAqB,SAErCv4B,EAAKvmB,MAAQw+C,EAASx+C,MACtBumB,EAAK7mB,MAAQ8+C,EAAS9+C,WACHpD,IAAfiqB,EAAKvmB,QACPumB,EAAKvmB,OAAQ,QAEI1D,IAAfiqB,EAAK7mB,QACP6mB,EAAK7mB,OAAQ,GAEf8+C,EAAS/zB,oBACT+zB,EAAS91B,mBACT81B,EAASz1B,sBAAuB,EAEhCxC,EAAKuB,kBACH+F,yBAAqCvxB,IAAfiqB,EAAK7mB,QAAsC,IAAf6mB,EAAK7mB,MACvDkuB,yBAAqCtxB,IAAfiqB,EAAKvmB,QAAsC,IAAfumB,EAAKvmB,OAGzDumB,EAAK2B,eAAiB,IAAI62B,kBAAkBx4B,EAAKkB,SAAUlB,EAAKoB,KAIhE,IAAMM,EAAgB,SAAC+2B,EAAOC,EAASjuC,GACrCzW,EAAA,EAAO+C,MAAM,WAAY0T,EAAS,kBAAmBguC,QACrC1iD,IAAZ2iD,GACFA,EAAQ,UAqCNC,EAAkB,WACtB,IAAKR,GAAiBD,EAAWviD,OAAS,EAAG,CAC3C,IAAMxB,EAAO+jD,EAAWj5B,MACR,UAAZ9qB,EAAK,GACP6rB,EAAK8D,YAAY3vB,EAAK,GAAIA,EAAK,GAAIA,EAAK,IAExC6jD,EAAa7jD,EAAK,MAsBlBykD,EAAwB,SAAC71B,GAC7BnB,EAAYmB,EACZ+0B,EAAWe,EAAAj8C,EAAYzF,QAAQm8C,cAAc1xB,EAAUG,KACvD41B,EAAW71B,SAASg2B,EAAUG,GAC9Br2B,EAAUG,IAAM+1B,EAAS/8C,WACzBilB,EAAK83B,SAAWA,EAChBG,EAASv/C,UACPsF,KAAM4jB,EAAU5jB,KAChB+jB,IAAKH,EAAUG,IACfvpB,QAAUwpB,WAAYi2B,EAASj2B,cAEjChuB,EAAA,EAAOyC,KAAK,4BAA6BmrB,GACzC5B,EAAK2B,eAAeyB,oBAAoBxB,GAAW5oB,KAAK,WACtDm/C,GAAgB,EAChBQ,IA3EoB,SAACluC,GACvBzW,EAAA,EAAOyC,KAAK,uBAAwBgU,GA2ElCquC,KACC7/C,MAAMyoB,IAGXs2B,EAAe,SAACvtC,GACd,IAAMiW,EAAMjW,EACR0tC,EACFD,EAAWv7C,MAAM,SAAU8N,KAG7B0tC,GAAgB,EAChBJ,EAAYc,EAAAj8C,EAAYzF,QAAQm8C,cAAc5yB,EAAIqB,KAClD41B,EAAW71B,SAASi2B,EAAWE,GAC/Bv3B,EAAIqB,IAAMg2B,EAAUh9C,WACpBilB,EAAK+3B,UAAYA,EACjB/3B,EAAK2B,eAAe8B,qBAAqB/C,GAAK1nB,KAAK,WACjDgnB,EAAK2B,eAAeyC,aAAapE,EAAKuB,kBACrCvoB,KAAK4/C,GACL3/C,MAAMyoB,EAAcluB,KAAK,KAAM,oBAAgBuC,IAChDkiD,EAASz1B,sBAAuB,IAC/BvpB,MAAMyoB,EAAcluB,KAAK,KAAM,qBAAiBuC,MA8MrD,OAtIAiqB,EAAK2B,eAAeS,eApKG,SAAC9B,GACtB,IAAI+B,KACE3f,EAAY4d,EAAM5d,UACnBA,GAQH2f,GACEC,cAAe5f,EAAU4f,cACzBC,OAAQ7f,EAAU6f,OAClB7f,UAAWA,EAAUA,YAEFA,UAAUrK,MAAM,QACnCgqB,EAAgB3f,UAAhB,KAAAlN,OAAiC6sB,EAAgB3f,aAbnD1O,EAAA,EAAOyC,KAAK,kDACZ4rB,GACEC,eAAgB,EAChBC,OAAQ,MACR7f,UAAW,QAaXu1C,EAASz1B,qBACXy1B,EAASv/C,UAAWsF,KAAM,YAAa0E,UAAW2f,KAElD41B,EAAS91B,gBAAgBxlB,KAAK0lB,GAC9BruB,EAAA,EAAOyC,KAAK,sBAAuBwhD,EAAS91B,gBAAgBxsB,OAAQ0sB,KA8IxErC,EAAK+4B,gBAAkB,SAACvB,GAEtB,OADAxjD,EAAA,EAAO+C,MAAM,iDACNygD,GAGTx3B,EAAKg5B,kBAAoB,SAACxB,GAExB,OADAxjD,EAAA,EAAO+C,MAAM,mDACNygD,GAGTx3B,EAAKi5B,gBAAkB,SAACzB,GAEtB,OADAxjD,EAAA,EAAO+C,MAAM,6BACNygD,GAGTx3B,EAAKnN,MAAQ,WACXmN,EAAKkC,MAAQ,SACblC,EAAK2B,eAAe9O,SAGtBmN,EAAK3d,aAAe,SAACqI,GACnBsV,EAAK3e,UAAYqJ,GAGnBsV,EAAKk5B,SAAW,SAAC//C,GACf6mB,EAAK7mB,MAAQA,GAGf6mB,EAAKm5B,SAAW,SAAC1/C,GACfumB,EAAKvmB,MAAQA,GAGfumB,EAAKqD,WAAa,SAAC+1B,EAAa9+C,GAAkC,IAAxB5B,EAAwBhD,UAAAC,OAAA,QAAAI,IAAAL,UAAA,GAAAA,UAAA,GAAb,aAC7C8C,EAAS4gD,EACTC,EAA6BpB,EAASlsB,KAAOvzB,EAAOwpB,WACpDs3B,GAAiCrB,EAASlsB,KAAOvzB,EAAOwpB,YAC1Dq3B,GAA8B7gD,EAAOypB,cACnCzpB,EAAOwpB,aACThuB,EAAA,EAAOmC,MAAM,sBAAuBqC,EAAOwpB,WACnB,SAAUi2B,EAAS30B,iBACvC9qB,EAAOwpB,WAAai2B,EAAS30B,kBAC/B9qB,EAAOwpB,WAAai2B,EAAS30B,iBAE/B20B,EAASj2B,WAAaxpB,EAAOwpB,WAC7BhuB,EAAA,EAAOmC,MAAM,SAAU8hD,EAASj2B,aAE9BxpB,EAAOypB,aACLzpB,EAAOypB,WAAag2B,EAAS10B,kBAC/B/qB,EAAOypB,WAAag2B,EAAS10B,iBAE/B00B,EAASh2B,WAAazpB,EAAOypB,YAG/B61B,EAAWe,EAAAj8C,EAAYzF,QAAQm8C,cAAc1xB,EAAUG,KACvD41B,EAAW71B,SAASg2B,EAAUG,GAC9Br2B,EAAUG,IAAM+1B,EAAS/8C,WACzBilB,EAAK83B,SAAWA,EAEZt/C,EAAOgrB,KAAOhrB,EAAOypB,YACvBjuB,EAAA,EAAOmC,MAAM,kCAAmC8hD,EAASj2B,WAAYi2B,EAASh2B,YAC9EjC,EAAK2B,eAAeyB,oBAAoBxB,GACrC5oB,KAAK,WAKJ,OAJA++C,EAAYc,EAAAj8C,EAAYzF,QAAQm8C,cAAczxB,EAAWE,KACzD41B,EAAW71B,SAASi2B,EAAWE,GAC/Bp2B,EAAWE,IAAMg2B,EAAUh9C,WAC3BilB,EAAK+3B,UAAYA,EACV/3B,EAAK2B,eAAe8B,qBAAqB,IAAIC,sBAAsB7B,MACzE7oB,KAAK,WACNi/C,EAASz1B,sBAAuB,EAChCy1B,EAASv/C,UAAWsF,KAAM,eAAgB+jB,IAAKH,EAAUG,KAAOznB,KAC/DrB,MAAMyoB,EAAcluB,KAAK,KAAM,aAAckF,MAElD1E,EAAA,EAAOmC,MAAM,kDACe8hD,EAASj2B,WACxB,cAAei2B,EAASh2B,YACrCg2B,EAASv/C,UAAWsF,KAAM,eAAgB+jB,IAAKH,EAAUG,KAAOznB,MAGhEg/C,GACA9gD,EAAOmrB,iBACmB5tB,IAAzByC,EAAOorB,oBACe7tB,IAAtByC,EAAOqrB,iBACiB9tB,IAAxByC,EAAO+gD,mBACwBxjD,IAA/ByC,EAAOghD,0BACUzjD,IAAjByC,EAAOW,SACVnF,EAAA,EAAOmC,MAAM,yBAA0BqC,EAAOwpB,YAC9ChuB,EAAA,EAAOmC,MAAM,uBAAwBqC,EAAOmrB,YAC5C3vB,EAAA,EAAOmC,MAAM,4BAA6BqC,EAAOorB,eACjD5vB,EAAA,EAAOmC,MAAM,yBAA0BqC,EAAOqrB,YAC9C7vB,EAAA,EAAOmC,MAAM,oBAAqBqC,EAAOW,OACzCnF,EAAA,EAAOmC,MAAM,2CAA4CqC,EAAOghD,qBAChEvB,EAASv/C,UAAWsF,KAAM,eAAgBxF,UAAU8B,KAIxD0lB,EAAK8D,YAAc,WAAqE,IAApEC,EAAoEruB,UAAAC,OAAA,QAAAI,IAAAL,UAAA,IAAAA,UAAA,GAA/C+jD,EAA+C/jD,UAAAC,OAAA,QAAAI,IAAAL,UAAA,IAAAA,UAAA,GAAlB4E,EAAkB5E,UAAAC,OAAA,QAAAI,IAAAL,UAAA,GAAAA,UAAA,GAAP,GAC1EquB,GAAgB01B,IACnBz5B,EAAKuB,kBACH+F,qBAAqB,EACrBD,qBAAqB,IAGrB8wB,EACFD,EAAWv7C,MAAM,QAASonB,EAAa01B,EAAqBn/C,KAG9D69C,GAAgB,EAChBnkD,EAAA,EAAOmC,MAAM,iBAAkB6pB,EAAKuB,iBAAkBjnB,GACtD0lB,EAAK2B,eAAemC,YAAY9D,EAAKuB,kBACpCvoB,KA5O0B,SAAC+qB,EAAazpB,EAAUyoB,GACnDnB,EAAYmB,EACPgB,IACHnC,EAAUG,IAAM/B,EAAKi5B,gBAAgBr3B,EAAUG,MAEjD+1B,EAAWe,EAAAj8C,EAAYzF,QAAQm8C,cAAc1xB,EAAUG,KACvD41B,EAAW71B,SAASg2B,EAAUG,GAC9Br2B,EAAUG,IAAM+1B,EAAS/8C,WACzBilB,EAAK83B,SAAWA,EAEhBG,EAASv/C,UACPsF,KAAM4jB,EAAU5jB,KAChB+jB,IAAKH,EAAUG,IACfvpB,QAAUwpB,WAAYi2B,EAASj2B,aAC9B1nB,IA8NwB9G,KAAK,KAAMuwB,EAAazpB,IAClDrB,MAAMyoB,EAAcluB,KAAK,KAAM,oBAAgBuC,MAGlDiqB,EAAKiE,UAAY,SAACxf,GAChBub,EAAK2B,eAAesC,UAAUxf,IAGhCub,EAAK2F,aAAe,SAAClhB,GACnBub,EAAK2B,eAAegE,aAAalhB,IAGnCub,EAAKmE,wBAA0B,SAACu1B,GACR,UAAlBA,EAAS17C,KACXg6C,EAAa0B,GACc,WAAlBA,EAAS17C,KApMA,SAACyM,GACrB,IAAMiW,EAAMjW,EAGN4iC,GADN0K,EAAYc,EAAAj8C,EAAYzF,QAAQm8C,cAAc5yB,EAAIqB,OACdg2B,EAAU9K,QAAU8K,EAAU9K,OAAOI,eACrE+K,GAAwB/K,IAG5Br5C,EAAA,EAAOyC,KAAK,oCACZ2hD,EAAuB/K,EAEvBsK,EAAW71B,SAASi2B,EAAWE,GAC/Bj4B,EAAK+4B,gBAAgBhB,GACrB/3B,EAAKg5B,kBAAkBjB,GAEvBr3B,EAAIqB,IAAMg2B,EAAUh9C,WACpB/G,EAAA,EAAOmC,MAAM,qBAAsBuqB,EAAIqB,KACvC/tB,EAAA,EAAOmC,MAAM,oBAAqByrB,EAAUG,KAC5C/B,EAAK+3B,UAAYA,EAEjBl2B,EAAanB,EACbV,EAAK2B,eAAeyB,oBAAoBxB,GAAW5oB,KAAK,WACtDgnB,EAAK2B,eAAe8B,qBAAqB,IAAIC,sBAAsBhD,IAAM1nB,KAAK,WAI5E,IAHAi/C,EAASz1B,sBAAuB,EAChCxuB,EAAA,EAAOyC,KAAK,2BAA4BwhD,EAAS/zB,iBAAiBvuB,OACpDsiD,EAAS/zB,kBAChB+zB,EAAS/zB,iBAAiBvuB,OAAS,GAExCqqB,EAAK2B,eAAe0C,gBAAgB4zB,EAAS/zB,iBAAiB5Q,SAGhE,IADAtf,EAAA,EAAOyC,KAAK,4BAA6BwhD,EAAS91B,gBAAgBxsB,QAC3DsiD,EAAS91B,gBAAgBxsB,OAAS,GAEvCsiD,EAASv/C,UAAWsF,KAAM,YAAa0E,UAAWu1C,EAAS91B,gBAAgB7O,UAE7E6kC,GAAgB,EAChBQ,MACC1/C,MAAMyoB,EAAcluB,KAAK,KAAM,qBAAiBuC,MAClDkD,MAAMyoB,EAAcluB,KAAK,KAAM,qBAAiBuC,KA+JjD4jD,CAAcD,GACa,cAAlBA,EAAS17C,MA7JM,SAACyM,GAC3B,IAAMiW,EAAMjW,EACZ,IACE,IAAI/M,EAMJ,GAAsB,SAJpBA,EAD6B,WAA3BmJ,EAAQ6Z,EAAIhe,WACRge,EAAIhe,UAEJ6H,KAAKyD,MAAM0S,EAAIhe,YAEfA,UAEN,OAEFhF,EAAIgF,UAAYhF,EAAIgF,UAAU+F,QAAQ,MAAO,IAC7C/K,EAAI4kB,cAAgBxd,SAASpH,EAAI4kB,cAAe,IAChD,IAAM5f,EAAY,IAAI4hB,gBAAgB5mB,GAClCu6C,EAASz1B,qBACXxC,EAAK2B,eAAe0C,gBAAgB3hB,GAEpCu1C,EAAS/zB,iBAAiBvnB,KAAK+F,GAEjC,MAAOlI,GACPxG,EAAA,EAAO+C,MAAM,0BAA2B2pB,EAAIhe,YAwI5Ck3C,CAAoBF,IAIjB15B,GCrRT65B,EAlF0B,SAAChC,GACzB7jD,EAAA,EAAOyC,KAAK,+BAAgCohD,GAC5C,IAAM93B,EAAO83B,EACP73B,EAAO43B,EAAUC,GA4EvB,OA1EA73B,EAAKuB,kBACH+F,qBAAqB,EACrBD,qBAAqB,GAGvBrH,EAAKi5B,gBAAkB,SAACzB,GACtB,IAAIv0C,EACA8e,EAAMy1B,EACV,IAAKx3B,EAAK3e,UACR,OAAO0gB,EAIT,IAAM+3B,EAAa/3B,EAAI1pB,MAAM,2CAC7B,IAAKyhD,GAAeA,EAAWnkD,QAAU,EACvC,OAAOosB,EAGT,IAAMg4B,EAAmB/5B,EAAK3e,UAAU04C,kBAnBJ,EAoB9BC,EAAWl1C,SAASg1C,EAAW,GAAI,IACnCG,EAAcn1C,SAASg1C,EAAW,GAAI,IACtC90C,EAAQ+c,EAAI1pB,MAAM,IAAIkF,OAAJ,UAAA/H,OAAqBskD,EAAW,GAAhC,sBAAuD,GACzE3M,EAAOprB,EAAI1pB,MAAM,IAAIkF,OAAJ,UAAA/H,OAAqBskD,EAAW,GAAhC,qBAAsD,GACvEz0C,EAAU0c,EAAI1pB,MAAM,IAAIkF,OAAJ,UAAA/H,OAAqBskD,EAAW,GAAhC,wBAAyD,GAC7E10C,EAAQ2c,EAAI1pB,MAAM,IAAIkF,OAAJ,UAAA/H,OAAqBskD,EAAW,GAAhC,sBAAuD,GAE/E/3B,EAAI1pB,MAAM,IAAIkF,OAAJ,UAAA/H,OAAqBskD,EAAW,GAAhC,WAA6C,MAAMj+C,QAAQ,SAACw7C,GACpEt1B,EAAMA,EAAItZ,QAAQ4uC,EAAM,MAE1Bt1B,EAAI1pB,MAAM,IAAIkF,OAAJ,UAAA/H,OAAqBskD,EAAW,GAAhC,WAA6C,MAAMj+C,QAAQ,SAACw7C,GACpEt1B,EAAMA,EAAItZ,QAAQ4uC,EAAM,MAM1B,IAHA,IASIC,EACAC,EAVEH,GAAiB4C,GACjBE,GAAoBD,GAEjBjoD,EAAI,EAAGA,EAAI+nD,EAAkB/nD,GAAK,EACzColD,EAAcz6C,KAAKq9C,EAAgB,IAAJhoD,GAC/BkoD,EAAiBv9C,KAAKs9C,EAAmB,IAAJjoD,GAGvCiR,EAAS00C,EAAWwC,OAAO/C,GAG3B,IAAK,IAAIplD,EAAI,EAAGA,EAAIolD,EAAczhD,OAAQ3D,GAAK,EAC7CslD,EAAiBF,EAAcplD,GAC/BulD,EAAoB2C,EAAiBloD,GACrCiR,GAAU00C,EAAWyC,SAAS9C,EAAgBC,GAGhD,IAAK,IAAIvlD,EAAI,EAAGA,EAAIolD,EAAczhD,OAAQ3D,GAAK,EAC7CslD,EAAiBF,EAAcplD,GAC/BulD,EAAoB2C,EAAiBloD,GACrCiR,GAAU00C,EAAW0C,gBAAgBr1C,EACnCmoC,EAAM9nC,EAASD,EAAOkyC,EAAgBC,GAG1C,OADAt0C,GAAU,iCACH8e,EAAItZ,QAAQqxC,EAAW,GAAI72C,IAGpC+c,EAAK+4B,gBAAkB,SAACxF,GAClBvzB,EAAK7mB,OAAS4mB,EAAKu6B,eACrBtmD,EAAA,EAAOmC,MAAP,2BAAAX,OAAwCuqB,EAAKu6B,eAC7C3C,EAAW4C,kBAAkBhH,EAAS,QAAS,yBAA0BxzB,EAAKu6B,gBAIlFt6B,EAAKg5B,kBAAoB,SAACzF,GACpBvzB,EAAK7mB,OAAS4mB,EAAKy6B,iBACrBxmD,EAAA,EAAOmC,MAAP,6BAAAX,OAA0CuqB,EAAKy6B,iBAC/C7C,EAAW4C,kBAAkBhH,EAAS,QAAS,uBAAwBxzB,EAAKy6B,kBAIzEx6B,GCzBTy6B,EAvDqB,SAAC5C,GACpB7jD,EAAA,EAAOyC,KAAK,0BACZ,IAAMupB,EAAO43B,EAAUC,GAGjB6C,IACFv4C,IAAK,MAAOw4C,sBAAuB,IACnCx4C,IAAK,MAAOw4C,sBAAuB,IACnCx4C,IAAK,SAiBH82C,EAAkB,WACtB,IAAKj5B,EAAK3e,UACR,SAEF,IAAMu5C,KAMN,OALA56B,EAAK2B,eAAek5B,aAAah/C,QAAQ,SAACi/C,GACd,UAAtBA,EAAOt1C,MAAMu1C,MACfH,EAASj+C,KArBgB,SAACm+C,GAC9B,IAAIf,EAAmB/5B,EAAK3e,UAAU04C,kBATF,EAU9BiB,EAAcN,EAAe/kD,OACnCokD,EAAmBA,EAAmBiB,EAChBjB,EAAmBiB,EACzC,IAAMC,EAAaH,EAAOI,oBAC1BD,EAAWn1C,aAEX,IAAK,IAAIq1C,EAAQH,EAAc,EAAGG,GAASH,EAAcjB,EAAkBoB,GAAS,EAClFF,EAAWn1C,UAAUnJ,KAAK+9C,EAAeS,IAE3C,OAAOL,EAAOM,cAAcH,GAUVI,CAAuBP,MAGlCF,GAGT56B,EAAKi5B,gBAAkB,SAAAl3B,GAAG,OAAIA,GAE9B,IAAMu5B,EAAkBt7B,EAAK8D,YAY7B,OAVA9D,EAAK8D,YAAc,SAACC,GAA4D,IAA/C01B,EAA+C/jD,UAAAC,OAAA,QAAAI,IAAAL,UAAA,IAAAA,UAAA,GAAlB4E,EAAkB5E,UAAAC,OAAA,QAAAI,IAAAL,UAAA,GAAAA,UAAA,GAAP,GACnEklD,MACgB,IAAhB72B,IACF62B,EAAW3B,KAEbsC,QAAQC,IAAIZ,GAAU5hD,KAAK,WACzBsiD,EAAgBv3B,EAAa01B,EAAqBn/C,MAI/C0lB,GCTTy7B,EA5CgB,SAAC17B,GAOf,IAAMC,GAENA,YAEAA,kBACAA,QACAA,oBAAsBjqB,EAEtBiqB,MAAa,WACXhsB,EAAA,EAAOyC,KAAK,kBAGdupB,YAAmB,WACjBhsB,EAAA,EAAOmC,MAAM,yBAGf6pB,UAAiB,SAACvb,GAChBzQ,EAAA,EAAOmC,MAAM,qBAAsBsO,IAGrCub,wBAA+B,SAACU,GAC9B1sB,EAAA,EAAOmC,MAAM,4BAA6BuqB,QACd3qB,IAAxBiqB,EAAKc,gBAAgCd,EAAKc,eAAeJ,IAG/DV,qBAA4B,SAACU,GAC3B1sB,EAAA,EAAOmC,MAAM,qCAAsCuqB,GACnDX,EAAKrnB,SAASgoB,IAGhBV,qBAA4B,WAAyB,IAAxBtnB,EAAwBhD,UAAAC,OAAA,QAAAI,IAAAL,UAAA,GAAAA,UAAA,GAAb,aACtC1B,EAAA,EAAOmC,MAAM,wCACb6pB,EAAKc,eAAiBpoB,IAExB,OAAOsnB,yKCpCT,IAAM07B,EAAkB,WACtB,IAAM17B,KAEAC,GACJC,mBA8CF,OAxCAF,EAAK7Q,iBAAmB,SAACgR,EAAWC,QACWrqB,IAAzCkqB,EAAWC,eAAeC,KAC5BF,EAAWC,eAAeC,OAE5BF,EAAWC,eAAeC,GAAWxjB,KAAKyjB,IAI5CJ,EAAK1Q,oBAAsB,SAAC6Q,EAAWC,GACrC,GAAKH,EAAWC,eAAeC,GAA/B,CAGA,IAAM1G,EAAQwG,EAAWC,eAAeC,GAAW7X,QAAQ8X,IAC5C,IAAX3G,GACFwG,EAAWC,eAAeC,GAAW9W,OAAOoQ,EAAO,KAKvDuG,EAAKpU,mBAAqB,WACxBqU,EAAWC,mBAKbF,EAAKK,cAAgB,SAACC,GACpB,IAAKA,IAAUA,EAAMtiB,KACnB,MAAM,IAAI2M,MAAM,mBAElB3W,EAAA,EAAOmC,MAAP,UAAAX,OAAuB8qB,EAAMtiB,OAE7B,IADA,IAAMgO,EAAYiU,EAAWC,eAAeI,EAAMtiB,UACzChM,EAAI,EAAGA,EAAIga,EAAUrW,OAAQ3D,GAAK,EACzCga,EAAUha,GAAGsuB,IAIjBN,EAAKzU,GAAKyU,EAAK7Q,iBACf6Q,EAAKtU,IAAMsU,EAAK1Q,oBAChB0Q,EAAKnU,KAAOmU,EAAKK,cAEVL,GAGH+a,aACJ,SAAAA,iGAAc58B,CAAA1C,KAAAs/B,GACZt/B,KAAKkgD,QAAUD,oGAEAv7B,EAAWC,GAC1B3kB,KAAKkgD,QAAQxsC,iBAAiBgR,EAAWC,+CAEvBD,EAAWC,GAC7B3kB,KAAKkgD,QAAQrsC,oBAAoB6Q,EAAWC,yCAEhC4M,GACZvxB,KAAKkgD,QAAQt7B,cAAc2M,8BAE1B7M,EAAWC,GACZ3kB,KAAK0T,iBAAiBgR,EAAWC,+BAE/BD,EAAWC,GACb3kB,KAAK6T,oBAAoB6Q,EAAWC,gCAEjC4M,GACHvxB,KAAK4kB,cAAc2M,YAcjBzM,EAAc,SAACR,GACnB,IAAMC,KAKN,OAFAA,EAAKhiB,KAAO+hB,EAAK/hB,KAEVgiB,GAaH47B,EAAkB,SAAC77B,GACvB,IAAMC,EAAOO,EAAYR,GAKzB,OAHAC,EAAKvb,OAASsb,EAAKtb,OACnBub,EAAKkC,MAAQnC,EAAKmC,MAEXlC,GAYHQ,EAAY,SAACT,GACjB,IAAMC,EAAOO,EAAYR,GAMzB,OAHAC,EAAKxb,QAAUub,EAAKvb,QACpBwb,EAAKvV,QAAUsV,EAAKtV,QAEbuV,GAWHS,EAAc,SAACV,GACnB,IAAMC,EAAOO,EAAYR,GASzB,OANAC,EAAKvb,OAASsb,EAAKtb,OAEnBub,EAAKU,IAAMX,EAAKW,IAChBV,EAAKW,UAAYZ,EAAKY,UACtBX,EAAKqJ,MAAQtJ,EAAKsJ,MAEXrJ,GCzHT67B,EApCiB,WACf,IAAM77B,KACFgY,KA+BJ,OA7BAhY,EAAKnR,IAAM,SAAC9U,EAAI9G,GACd+kC,EAAOj+B,GAAM9G,GAGf+sB,EAAKntB,IAAM,SAAAkH,GAAE,OAAIi+B,EAAOj+B,IAExBimB,EAAK1c,IAAM,SAAAvJ,GAAE,YAAmBhE,IAAfiiC,EAAOj+B,IAExBimB,EAAKhgB,KAAO,kBAAMtN,OAAO+K,KAAKu6B,GAAQriC,QAEtCqqB,EAAKnkB,QAAU,SAACigD,GAEd,IADA,IAAMr+C,EAAO/K,OAAO+K,KAAKu6B,GAChBve,EAAQ,EAAGA,EAAQhc,EAAK9H,OAAQ8jB,GAAS,EAAG,CACnD,IAAMlmB,EAAMkK,EAAKgc,GAEjBqiC,EADc9jB,EAAOzkC,GACTA,KAIhBysB,EAAKviB,KAAO,kBAAM/K,OAAO+K,KAAKu6B,IAE9BhY,EAAK0S,OAAS,SAAC34B,UACNi+B,EAAOj+B,IAGhBimB,EAAKpa,MAAQ,WACXoyB,MAGKhY,w8BC1BT,IAAM+7B,EAAoBhhB,EACtBihB,EAAiB,IAEfC,cACJ,SAAAC,EAAYrE,GAAgC,IAAAr8C,EAArB2gD,EAAqBzmD,UAAAC,OAAA,QAAAI,IAAAL,UAAA,GAAAA,UAAA,QAAXK,EAAWqmD,EAAA3gD,KAAAygD,GAC1C1gD,EAAA6gD,EAAA5gD,KAAA6gD,EAAAJ,GAAA/pD,KAAAsJ,OACAzH,EAAA,EAAOmC,MAAM,6BACbqF,EAAKsR,SAELtR,EAAK2gD,QAAUA,EACf3gD,EAAK+gD,WAAaV,IAElB,IAAM97B,EAAO83B,EAYb,GAXAmE,GAAkB,EAClBj8B,EAAKiF,UAAYg3B,EACjBxgD,EAAKwpB,UAAYg3B,EAEZj8B,EAAKy8B,wBACRz8B,EAAKy8B,sBAAwB,cAE/BhhD,EAAKghD,sBAAwBz8B,EAAKy8B,sBAGlChhD,EAAKvD,QAAUK,EAAA,EAAkBN,aACZ,SAAjBwD,EAAKvD,QACPjE,EAAA,EAAO4C,QAAQ,sEACf4E,EAAKsR,MAAQ2uC,EAAQ17B,QAChB,GAAqB,YAAjBvkB,EAAKvD,QACdjE,EAAA,EAAOmC,MAAM,iBACbqF,EAAKsR,MAAQ2tC,EAAa16B,QACrB,GAAqB,WAAjBvkB,EAAKvD,QACdjE,EAAA,EAAOmC,MAAM,oCACbqF,EAAKsR,MAAQ+sC,EAAkB95B,OAC1B,IAAqB,kBAAjBvkB,EAAKvD,SAAgD,aAAjBuD,EAAKvD,QAKlD,MADAjE,EAAA,EAAO+C,MAAM,uCACP,IAAI4T,MAAM,8BAJhB3W,EAAA,EAAOmC,MAAM,uBACbqF,EAAKsR,MAAQ+sC,EAAkB95B,GA/BS,OAoCrCvkB,EAAKsR,MAAMuW,aACd7nB,EAAKsR,MAAMuW,WAAa,SAACsE,GAAiC,IAAxBjvB,EAAwBhD,UAAAC,OAAA,QAAAI,IAAAL,UAAA,GAAAA,UAAA,GAAb,aAC3C1B,EAAA,EAAO+C,MAAM,wDACb2B,EAAS,mBAGR8C,EAAKsR,MAAM2vC,wBACdjhD,EAAKsR,MAAM2vC,sBAAwB,WACjCzoD,EAAA,EAAO+C,MAAM,4DAKbyE,EAAKsR,MAAM6U,iBACbnmB,EAAKmmB,eAAiBnmB,EAAKsR,MAAM6U,eACjCnmB,EAAKsR,MAAM6U,eAAec,YAAc,SAACuK,GACvCxxB,EAAKqQ,KAAK+vC,GAAkB59C,KAAM,aAAcyG,OAAQuoB,EAAIvoB,WAG9DjJ,EAAKsR,MAAM6U,eAAee,eAAiB,SAACsK,GAC1CxxB,EAAKqQ,KAAK+vC,GAAkB59C,KAAM,gBAAiByG,OAAQuoB,EAAIvoB,UAC/DjJ,EAAKghD,sBAAsBxvB,EAAIvoB,OAAO1K,KAGxCyB,EAAKsR,MAAM6U,eAAegB,2BAA6B,WACrD,IAAMT,EAAQ1mB,EAAKsR,MAAM6U,eAAekB,mBACxCrnB,EAAKqQ,KAAK+vC,GAAkB59C,KAAM,mBAAoBkkB,aA9DhB1mB,8OADhBugD,sCAqE1B/nD,EAAA,EAAOmC,MAAM,2BACbsF,KAAK8gD,WAAW32C,QAChBnK,KAAKqR,MAAM+F,4CAGDkR,EAAa01B,EAAqBn/C,GAC5CmB,KAAKqR,MAAMgX,YAAYC,EAAa01B,EAAqBn/C,qCAGjDmK,GACRzQ,EAAA,EAAOmC,MAAP,mDAAAX,OAAgEiP,EAAOskB,UACvEttB,KAAK8gD,WAAW1tC,IAAIpK,EAAOskB,QAAStkB,GAChCA,EAAOyF,OACTzO,KAAKqR,MAAMmX,UAAUxf,EAAOA,6CAInBA,GACX,IAAMnK,EAAWmK,EAAOskB,QACnBttB,KAAK8gD,WAAWj5C,IAAIhJ,IAIrBmK,EAAOyF,MACTzO,KAAKqR,MAAM6Y,aAAalhB,EAAOA,QACK,IAA3BhJ,KAAK8gD,WAAWv8C,QACzBvE,KAAK+gD,sBAAsB/3C,EAAOouC,YAEpCp3C,KAAK8gD,WAAW7pB,OAAOp4B,IARrBtG,EAAA,EAAO4C,QAAP,uDAAApB,OAAsE8E,oDAWlDomB,GACtBjlB,KAAKqR,MAAMqX,wBAAwBzD,gDAGhBA,GACnBjlB,KAAKqR,MAAM4vC,qBAAqBh8B,wCAGrBhW,GACXjP,KAAKqR,MAAMzK,aAAaqI,oCAGjBvR,GACPsC,KAAKqR,MAAMosC,SAAS//C,oCAGbM,GACPgC,KAAKqR,MAAMqsC,SAAS1/C,sCAGX2/C,EAAa9+C,EAAU5B,GAChC+C,KAAKqR,MAAMuW,WAAW+1B,EAAa9+C,EAAU5B,YAiEjDikD,aA5DE,SAAAC,IAAcR,EAAA3gD,KAAAmhD,GACZnhD,KAAKohD,oBAAsB,IAAI99C,gEAGP84C,GAAkD,IAAvCsE,EAAuCzmD,UAAAC,OAAA,QAAAI,IAAAL,UAAA,GAAAA,UAAA,QAA7BK,EAAW+mD,EAAkBpnD,UAAAC,OAAA,QAAAI,IAAAL,UAAA,IAAAA,UAAA,GAC1E1B,EAAA,EAAOmC,MAAP,gDAAAX,OAA6D2mD,IAC7D,IAOMY,EAPFr7C,KAEJ,QAAgB3L,IAAZomD,EAEF,OAAO,IAAIF,EAAgBpE,GAE7B,GAAIiF,EAEErhD,KAAKohD,oBAAoBv5C,IAAI64C,GAC/BY,EAAkBthD,KAAKohD,oBAAoBhqD,IAAIspD,IAE/CY,KACAthD,KAAKohD,oBAAoBz9C,IAAI+8C,EAASY,IAEnCA,EAAgB,eACnBA,EAAgB,aAAe,IAAId,EAAgBpE,EAAWsE,IAEhEz6C,EAAaq7C,EAAgB,kBAG7B,GADAr7C,EAAa,IAAIu6C,EAAgBpE,EAAWsE,GACxC1gD,KAAKohD,oBAAoBv5C,IAAI64C,GAC/B1gD,KAAKohD,oBAAoBhqD,IAAIspD,GAASz6C,EAAWsjB,WAAatjB,MACzD,CACL,IAAMq7C,KACNA,EAAgBr7C,EAAWsjB,WAAatjB,EACxCjG,KAAKohD,oBAAoBz9C,IAAI+8C,EAASY,GAa1C,OAVIlF,EAAUx2C,WACZK,EAAWW,aAAaw1C,EAAUx2C,WAEhCw2C,EAAU1+C,OACZuI,EAAWw3C,SAASrB,EAAU1+C,OAE5B0+C,EAAUp+C,OACZiI,EAAWw3C,SAASrB,EAAUp+C,OAGzBiI,+CAGYA,GACnB1N,EAAA,EAAOmC,MAAP,+BAAAX,OAA4CkM,EAAWsjB,UAAvD,0BAAAxvB,OACkBkM,EAAWy6C,UACQ,IAAjCz6C,EAAW66C,WAAWv8C,SACxB0B,EAAWmR,aAC8C9c,IAArD0F,KAAKohD,oBAAoBhqD,IAAI6O,EAAWy6C,kBACnC1gD,KAAKohD,oBAAoBhqD,IAAI6O,EAAWy6C,SAAS,oBACjD1gD,KAAKohD,oBAAoBhqD,IAAI6O,EAAWy6C,SAASz6C,EAAWsjB,4XCzL3E,IAUMg4B,EAAS,SAACC,GACd,IAAMj9B,EAAO07B,IACPwB,EAAkB,aAClBC,KAENn9B,EAAKo9B,UAAYrqD,OAAO,aACxBitB,EAAKq9B,aAAetqD,OAAO,gBAC3BitB,EAAKs9B,aAAevqD,OAAO,gBAE3B,IAII2U,EAHJsY,EAAKkC,MAAQlC,EAAKs9B,aAClBt9B,EAAKu9B,QAAexnD,IAAVknD,EAAsBO,EAAA5gD,EAAKqgD,EAIrC,IAAMpxC,EAAO,SAAC7N,GAAkB,QAAAvI,EAAAC,UAAAC,OAATxB,EAAS,IAAAyB,MAAAH,EAAA,EAAAA,EAAA,KAAAI,EAAA,EAAAA,EAAAJ,EAAAI,IAAT1B,EAAS0B,EAAA,GAAAH,UAAAG,GAC9BmqB,EAAKnU,KA1BW,SAAC7N,EAAM65C,GACzB,IAAM73B,EAAOO,GAAcviB,SAE3B,OADAgiB,EAAK7rB,KAAO0jD,EAAU1jD,KACf6rB,EAuBKy9B,CAAYz/C,GAAQ7J,WA6JhC,OA7IA6rB,EAAKjY,QAAU,SAAC8kB,EAAO6wB,GAAqE,IAAxDhlD,EAAwDhD,UAAAC,OAAA,QAAAI,IAAAL,UAAA,GAAAA,UAAA,GAA7CwnD,EAAiBnmD,EAA4BrB,UAAAC,OAAA,QAAAI,IAAAL,UAAA,GAAAA,UAAA,GAApBwnD,EAChE9pC,GACJ/C,cAAc,EACdC,qBAAsB,EACtBuD,OAAQgZ,EAAMhZ,OACdtM,UAAU,EACVgN,YAAa,aACbe,oBAAoB,GAEhBzX,EAAYgvB,EAAMhZ,OAAS,SAAW,QACtC1L,EAAO0kB,EAAM1kB,KACnBT,EAASsY,EAAKu9B,GAAGx1C,QAAQlK,EAAYsK,EAAMiL,GAG3C,IAAIuqC,EArC2B,IAsC/B,IACE,IAAMC,EAAwBl2C,EAAOwW,GAAGtM,OAAO/T,UAAUggB,GAAGpK,QAC5D/L,EAAOwW,GAAGtM,OAAO/T,UAAUggB,GAAGpK,QAAU,SAACoqC,GACvC7pD,EAAA,EAAO4C,QAAQ,0BAA2BinD,EAAWtjD,MACrDojD,EAAYE,EAAWtjD,KACvBqjD,EAAsBC,IAExB,MAAMrjD,GACNxG,EAAA,EAAOmC,MAAM,mDAAoDqE,EAAGkN,GAEtEsY,EAAKtY,OAASA,EACdA,EAAO6D,GAAG,cAAeM,EAAKrY,KAAKwsB,EAAM,gBAEzCtY,EAAO6D,GAAG,0BAA2BM,EAAKrY,KAAKwsB,EAAM,4BACrDtY,EAAO6D,GAAG,yBAA0BM,EAAKrY,KAAKwsB,EAAM,2BACpDtY,EAAO6D,GAAG,aAAcM,EAAKrY,KAAKwsB,EAAM,eACxCtY,EAAO6D,GAAG,eAAgBM,EAAKrY,KAAKwsB,EAAM,iBAC1CtY,EAAO6D,GAAG,mBAAoBM,EAAKrY,KAAKwsB,EAAM,qBAG9CtY,EAAO6D,GAAG,eAAgBM,EAAKrY,KAAKwsB,EAAM,iBAG1CtY,EAAO6D,GAAG,0BAA2BM,EAAKrY,KAAKwsB,EAAM,4BAGrDtY,EAAO6D,GAAG,iBAAkBM,EAAKrY,KAAKwsB,EAAM,mBAG5CtY,EAAO6D,GAAG,aAAc,SAACqyB,GACvB5pC,EAAA,EAAOmC,MAAM,aAAc6pB,EAAKjmB,GAAI6jC,GApEP,MAqEzB+f,GAIJ9xC,EAAK,aAAc+xB,GACnBl2B,EAAOmL,SAJLmN,EAAKkC,MAAQlC,EAAKq9B,eAOtB31C,EAAO6D,GAAG,oBAAqB,SAACyhB,GAC9Bh5B,EAAA,EAAO+C,MAAM,yBAA0BipB,EAAKjmB,IAC5C8R,EAAK,oBAAqBmhB,KAE5BtlB,EAAO6D,GAAG,QAAS,SAAC61B,GAClBptC,EAAA,EAAO4C,QAAQ,oBAAqBopB,EAAKjmB,GAAI,WAAYqnC,EAAI32B,SAC7DoB,EAAK,WAEPnE,EAAO6D,GAAG,gBAAiB,SAAC61B,GAC1BptC,EAAA,EAAO4C,QAAQ,qBAAsBopB,EAAKjmB,GAAI,WAAYqnC,EAAI32B,WAGhE/C,EAAO6D,GAAG,kBAAmB,SAAC61B,GAC5BptC,EAAA,EAAO4C,QAAQ,uBAAwBopB,EAAKjmB,GAAI,WAAYqnC,EAAI32B,WAGlE/C,EAAO6D,GAAG,eAAgB,SAACuyC,GACzB9pD,EAAA,EAAOmC,MAAM,oBAAqB6pB,EAAKjmB,GAAI,cAAe+jD,KAG5Dp2C,EAAO6D,GAAG,YAAa,SAACuyC,GACtB9pD,EAAA,EAAOmC,MAAM,mBAAoB6pB,EAAKjmB,GAAI,cAAe+jD,GACzD99B,EAAKkC,MAAQlC,EAAKo9B,UAClB11C,EAAOmE,KAAK,cAAemU,EAAKjmB,IArF9BimB,EAAKkC,QAAUlC,EAAKo9B,WAGxBD,EAActhD,QAAQ,SAAC4O,GACrBuV,EAAK9lB,YAAL3F,MAAAyrB,EAAIxrB,EAAgBiW,QAqFtB/C,EAAO6D,GAAG,oBAAqB,SAACuyC,GAC9B9pD,EAAA,EAAOmC,MAAM,yBAA0B6pB,EAAKjmB,GAAI,cAAe+jD,KAGjEp2C,EAAO6D,GAAG,kBAAmB,SAAC61B,GAC5BptC,EAAA,EAAOmC,MAAM,0BAA2B6pB,EAAKjmB,GAAI,WAAYqnC,EAAI32B,WAGnE/C,EAAO6D,GAAG,mBAAoB,WAC5BvX,EAAA,EAAO4C,QAAQ,wBAAyBopB,EAAKjmB,IAC7CimB,EAAKkC,MAAQlC,EAAKs9B,aAClBzxC,EAAK,aAAc,sBAIrB,IAAMpB,EAAUizC,EAChBjzC,EAAQoiB,MAAQA,EAChB7M,EAAK9lB,YAAY,QAASuQ,EAAS,SAACrQ,GAClC4lB,EAAKkC,MAAQlC,EAAKo9B,UAClBp9B,EAAKjmB,GAAKK,EAAS2jD,SACnBrlD,EAAS0B,IACRrD,IAGLipB,EAAKzM,WAAa,WAChByM,EAAKkC,MAAQlC,EAAKs9B,aAClB51C,EAAO6L,cAITyM,EAAK9lB,YAAc,SAAC8D,EAAM0iB,GAA6D,IAAxDhoB,EAAwDhD,UAAAC,OAAA,QAAAI,IAAAL,UAAA,GAAAA,UAAA,GAA7CwnD,EAAiBnmD,EAA4BrB,UAAAC,OAAA,QAAAI,IAAAL,UAAA,GAAAA,UAAA,GAApBwnD,EAC7Dl9B,EAAKkC,QAAUlC,EAAKs9B,cAAyB,UAATt/C,EAIpCgiB,EAAKkC,QAAUlC,EAAKq9B,aAIxB31C,EAAOmE,KAAK7N,EAAM0iB,EAAK,SAAC8M,EAAUwwB,GACf,YAAbxwB,EACF90B,EAASslD,GACa,UAAbxwB,EACTz2B,EAAMinD,GAENtlD,EAAS80B,EAAUwwB,KA3IL,SAAChgD,EAAMyM,EAAS/R,EAAU3B,GAC5ComD,EAAcxgD,MAAMqB,EAAMyM,EAAS/R,EAAU3B,IAiI3CknD,CAAYjgD,EAAM0iB,EAAKhoB,EAAU3B,GAJjC/C,EAAA,EAAO+C,MAAM,wDAmBjBipB,EAAKk+B,QAAU,SAAClgD,EAAMoV,EAAS2O,GAAoC,IAA/BrpB,EAA+BhD,UAAAC,OAAA,QAAAI,IAAAL,UAAA,GAAAA,UAAA,GAApBwnD,EACzCl9B,EAAKkC,QAAUlC,EAAKs9B,aAIxB51C,EAAOmE,KAAK7N,EAAMoV,EAAS2O,EAAK,WAC9BrpB,EAAQnE,WAAR,EAAAmB,aAJA1B,EAAA,EAAO+C,MAAM,wDAOVipB,GC5KTm+B,EAXa,WACX,IAAMn+B,EAAO07B,MAOb,OADA17B,EAAKyE,IAAM/qB,KAAOA,IAAI06B,UAAY,oBAC3BpU,GC0GTo+B,EA/GgB,SAACr+B,GACf,IAAMC,EAAOm+B,MACTnoB,EAAa,GA2DjB,GA/BAhW,EAAKsK,UAAYvK,EAAKuK,UAGtBtK,EAAKta,MAAQqa,EAAKra,MAGlBsa,EAAKjmB,GAAKgmB,EAAKhmB,GAGfimB,EAAKvb,OAASsb,EAAKtb,OAGnBub,EAAK4K,IAAMlhB,SAAS6S,cAAc,OAClCyD,EAAK4K,IAAIxN,aAAa,QAAS,sFAI/B4C,EAAKiW,KAAOvsB,SAAS6S,cAAc,OACnCyD,EAAKiW,KAAK7Y,aAAa,KAAvB,UAAA5nB,OAAuCwqB,EAAKjmB,KAC5CimB,EAAKiW,KAAK7Y,aAAa,MAAvB,GAAA5nB,OAAiCwqB,EAAKyE,IAAtC,wBACAzE,EAAKiW,KAAK7Y,aAAa,QAAS,iDAChC4C,EAAK4K,IAAI/N,YAAYmD,EAAKiW,MAE1BjW,EAAKiW,KAAKE,QAAU,WACdnW,EAAKta,MAAMwwB,OArCflW,EAAKta,MAAMwwB,OAAQ,EACnBlW,EAAKiW,KAAK7Y,aAAa,MAAvB,GAAA5nB,OAAiCwqB,EAAKyE,IAAtC,wBACIzE,EAAKvb,OAAOyF,MACd8V,EAAKvb,OAAOA,OAAO+wB,iBAAiB,GAAGnpB,SAAU,GAEjD2T,EAAKoW,OAAOnjC,MAAQ+iC,EACpBhW,EAAKta,MAAM2vB,OAASrV,EAAKoW,OAAOnjC,MAAQ,OAlB1C+sB,EAAKta,MAAMwwB,OAAQ,EACnBlW,EAAKiW,KAAK7Y,aAAa,MAAvB,GAAA5nB,OAAiCwqB,EAAKyE,IAAtC,uBACIzE,EAAKvb,OAAOyF,MACd8V,EAAKvb,OAAOA,OAAO+wB,iBAAiB,GAAGnpB,SAAU,GAEjD2pB,EAAahW,EAAKoW,OAAOnjC,MACzB+sB,EAAKoW,OAAOnjC,MAAQ,EACpB+sB,EAAKta,MAAM2vB,OAAS,MAiDnBrV,EAAKvb,OAAOyF,MAAO,CAEtB8V,EAAKoW,OAAS1sB,SAAS6S,cAAc,SACrCyD,EAAKoW,OAAOhZ,aAAa,KAAzB,UAAA5nB,OAAyCwqB,EAAKjmB,KAC9CimB,EAAKoW,OAAOp4B,KAAO,QACnBgiB,EAAKoW,OAAOzlB,IAAM,EAClBqP,EAAKoW,OAAOxlB,IAAM,IAClBoP,EAAKoW,OAAOC,KAAO,GACnBrW,EAAKoW,OAAOnjC,MAAQ+iC,EAEpBhW,EAAKoW,OAAOhZ,aAAa,SAAU,YACnC4C,EAAK4K,IAAI/N,YAAYmD,EAAKoW,QAC1BpW,EAAKta,MAAM2vB,OAASrV,EAAKoW,OAAOnjC,MAAQ,IACxC+sB,EAAKta,MAAMwwB,OAAQ,EAEnBlW,EAAKoW,OAAOE,QAAU,WAChBtW,EAAKoW,OAAOnjC,MAAQ,GACtB+sB,EAAKta,MAAMwwB,OAAQ,EACnBlW,EAAKiW,KAAK7Y,aAAa,MAAvB,GAAA5nB,OAAiCwqB,EAAKyE,IAAtC,0BAEAzE,EAAKta,MAAMwwB,OAAQ,EACnBlW,EAAKiW,KAAK7Y,aAAa,MAAvB,GAAA5nB,OAAiCwqB,EAAKyE,IAAtC,wBAEFzE,EAAKta,MAAM2vB,OAASrV,EAAKoW,OAAOnjC,MAAQ,KAI1C,IAAM03B,EAAO,SAACgL,GACZ3V,EAAKoW,OAAOhZ,aAAa,QAAzB,4RAAA5nB,OAG6CwqB,EAAK4K,IAAIiG,aAHtD,iBAAAr7B,OAGkFmgC,KAIpF3V,EAAK4K,IAAIyJ,YAAc,WACrB1J,EAAK,UAGP3K,EAAK4K,IAAI0J,WAAa,WACpB3J,EAAK,SAGPA,EAAK,QAIP,OADAjhB,SAASshB,eAAehL,EAAKsK,WAAWzN,YAAYmD,EAAK4K,KAClD5K,GC1BTq+B,EAjFY,SAACt+B,GACX,IACI2V,EADE1V,EAAOm+B,MAMbn+B,EAAKsK,UAAYvK,EAAKuK,UAGtBtK,EAAKjmB,GAAKgmB,EAAKhmB,GAGfimB,EAAK4K,IAAMlhB,SAAS6S,cAAc,OAClCyD,EAAK4K,IAAIxN,aAAa,KAAtB,OAAA5nB,OAAmCwqB,EAAKjmB,KACxCimB,EAAK4K,IAAIxN,aAAa,QAAS,cAG/B4C,EAAKuU,IAAM7qB,SAAS6S,cAAc,OAClCyD,EAAKuU,IAAInX,aAAa,QAAS,iIAG/B4C,EAAKuU,IAAInX,aAAa,KAAtB,UAAA5nB,OAAsCwqB,EAAKjmB,KAC3CimB,EAAKuU,IAAInX,aAAa,QAAS,iBAG/B4C,EAAKs+B,KAAO50C,SAAS6S,cAAc,KACnCyD,EAAKs+B,KAAKlhC,aAAa,OAAQ,2BAC/B4C,EAAKs+B,KAAKlhC,aAAa,QAAS,eAChC4C,EAAKs+B,KAAKlhC,aAAa,SAAU,UAEjC4C,EAAKu+B,KAAO70C,SAAS6S,cAAc,OACnCyD,EAAKu+B,KAAKnhC,aAAa,QAAS,sFAEhC4C,EAAKu+B,KAAKnhC,aAAa,QAAS,eAChC4C,EAAKu+B,KAAKnhC,aAAa,MAAO,WAC9B4C,EAAKu+B,KAAKnhC,aAAa,MAAvB,GAAA5nB,OAAiCwqB,EAAKyE,IAAtC,qBAGA,IAAMkG,EAAO,SAACgL,GACZ,IAAIrY,EAASqY,EACM,UAAfA,EACFrY,EAAS,OAETvS,aAAa2qB,GAGf1V,EAAK4K,IAAIxN,aAAa,QAAtB,gFAAA5nB,OACkF8nB,KA8BpF,OA1BA0C,EAAKwU,QAAU,WACb7J,EAAK,UAGP3K,EAAKgK,KAAO,WACV0L,EAAU9qB,WAAW+f,EAAM,MAG7BjhB,SAASshB,eAAehL,EAAKsK,WAAWzN,YAAYmD,EAAK4K,KACzD5K,EAAK4K,IAAI/N,YAAYmD,EAAKuU,KAC1BvU,EAAKuU,IAAI1X,YAAYmD,EAAKs+B,MAC1Bt+B,EAAKs+B,KAAKzhC,YAAYmD,EAAKu+B,MAGtBx+B,EAAKtb,OAAOvL,aAA4BnD,IAAjBgqB,EAAK3M,cACoBrd,IAAzBgqB,EAAK3M,QAAQwiB,UACY,IAAzB7V,EAAK3M,QAAQwiB,UACvC5V,EAAK4V,QAAUwoB,GAAU9zB,UAAS,UAAA90B,OAAYwqB,EAAKjmB,IACjDA,GAAIimB,EAAKjmB,GACT0K,OAAQsb,EAAKtb,OACbiB,MAAOqa,EAAKra,SAGhBsa,EAAKwU,UACLxU,EAAKgK,OAEEhK,wOC/ET,IA+IAw+B,EA/IoB,SAACz+B,GACnB,IAAMC,EAAOm+B,MAKbn+B,EAAKjmB,GAAKgmB,EAAKhmB,GAGfimB,EAAKvb,OAASsb,EAAKtb,OAAOA,OAG1Bub,EAAKsK,UAAYvK,EAAKuK,UAGtB,IAQMm0B,EAAa,SAACC,EAAOv2B,EAAOG,EAAQptB,IACrBA,EAAyCitB,GAAS,EAAIu2B,GAASp2B,EAArDH,GAAS,EAAIu2B,GAASp2B,IAEjDtI,EAAK7mB,MAAMyQ,MAAMue,MAAjB,GAAA3yB,OAA4B2yB,EAA5B,MACAnI,EAAK7mB,MAAMyQ,MAAM0e,OAAjB,GAAA9yB,OAA8B,EAAIkpD,EAASv2B,EAA3C,MAEAnI,EAAK7mB,MAAMyQ,MAAMqT,IAAjB,GAAAznB,SAA+B,EAAIkpD,EAASv2B,EAAS,EAAMG,EAAS,GAApE,MACAtI,EAAK7mB,MAAMyQ,MAAMsT,KAAO,QAExB8C,EAAK7mB,MAAMyQ,MAAM0e,OAAjB,GAAA9yB,OAA6B8yB,EAA7B,MACAtI,EAAK7mB,MAAMyQ,MAAMue,MAAjB,GAAA3yB,OAA4BkpD,EAAQp2B,EAApC,MAEAtI,EAAK7mB,MAAMyQ,MAAMsT,KAAjB,GAAA1nB,SAA+BkpD,EAAQp2B,EAAU,EAAMH,EAAQ,GAA/D,MACAnI,EAAK7mB,MAAMyQ,MAAMqT,IAAM,QAwG3B,OAjGA+C,EAAKhR,QAAU,WACbgR,EAAK7mB,MAAM4d,eACJiJ,EAAKyU,QACZzU,EAAK7D,WAAWC,YAAY4D,EAAK4K,MAGnC5K,EAAK0U,OAAS,WACZ,IAAMvM,EAAQnI,EAAK2U,UAAU/D,YACvBtI,EAAStI,EAAK2U,UAAU9D,aAE1B9Q,EAAKtb,OAAOvL,SAAgC,IAAtB6mB,EAAK3M,QAAQwhB,KACrC6pB,EAAW,GAAK,EAAGt2B,EAAOG,GAAQ,GACzBH,IAAUnI,EAAK6U,gBAAkBvM,IAAWtI,EAAK8U,iBAC1D2pB,EAAW,EAAI,EAAGt2B,EAAOG,GAAQ,GAGnCtI,EAAK6U,eAAiB1M,EACtBnI,EAAK8U,gBAAkBxM,GAQzBtI,EAAK4K,IAAMlhB,SAAS6S,cAAc,OAClCyD,EAAK4K,IAAIxN,aAAa,KAAtB,UAAA5nB,OAAsCwqB,EAAKjmB,KAC3CimB,EAAK4K,IAAIxN,aAAa,QAAS,iBAC/B4C,EAAK4K,IAAIxN,aAAa,QAAS,8FAIH,IAAxB2C,EAAK3M,QAAQgiB,SACfpV,EAAKoV,OAAS1rB,SAAS6S,cAAc,OACrCyD,EAAKoV,OAAOhY,aAAa,QAAS,2GAElC4C,EAAKoV,OAAOhY,aAAa,KAAzB,QAAA5nB,OAAuCwqB,EAAKjmB,KAC5CimB,EAAKoV,OAAOhY,aAAa,QAAS,iBAClC4C,EAAKoV,OAAOhY,aAAa,MAAzB,GAAA5nB,OAAmCwqB,EAAKyE,IAAxC,wBAIFzE,EAAK7mB,MAAQuQ,SAAS6S,cAAc,SACpCyD,EAAK7mB,MAAMikB,aAAa,KAAxB,SAAA5nB,OAAuCwqB,EAAKjmB,KAC5CimB,EAAK7mB,MAAMikB,aAAa,QAAS,iBACjC4C,EAAK7mB,MAAMikB,aAAa,QAAS,iDACjC4C,EAAK7mB,MAAMikB,aAAa,WAAY,YACpC4C,EAAK7mB,MAAMikB,aAAa,cAAe,eAEnC2C,EAAKtb,OAAOyF,QAAS8V,EAAK7mB,MAAMk8B,OAAS,QAEtBt/B,IAAnBiqB,EAAKsK,UAEuB,WAA1Bq0B,EAAO3+B,EAAKsK,YAC4B,mBAA/BtK,EAAKsK,UAAUzN,YAC1BmD,EAAK2U,UAAY3U,EAAKsK,UAEtBtK,EAAK2U,UAAYjrB,SAASshB,eAAehL,EAAKsK,WAGhDtK,EAAK2U,UAAYjrB,SAASkT,KAE5BoD,EAAK2U,UAAU9X,YAAYmD,EAAK4K,KAEhC5K,EAAK7D,WAAa6D,EAAK4K,IAAIzO,WAEvB6D,EAAKoV,QACPpV,EAAK4K,IAAI/N,YAAYmD,EAAKoV,QAE5BpV,EAAK4K,IAAI/N,YAAYmD,EAAK7mB,OAE1B6mB,EAAK6U,eAAiB,EACtB7U,EAAK8U,gBAAkB,GAEM,IAAzB/U,EAAK3M,QAAQqhB,UACfzU,EAAKyU,QAAU7U,EAAEmR,aAAa/Q,EAAK2U,UAAW3U,EAAK0U,QAEnD1U,EAAK0U,WAIkB,IAArB3U,EAAK3M,QAAQmhB,KACfvU,EAAKuU,IAAM8pB,GAAM/zB,UAAS,UAAA90B,OAAYwqB,EAAKjmB,IACzCA,GAAIimB,EAAKjmB,GACT0K,OAAQsb,EAAKtb,OACbiB,MAAOsa,EAAK7mB,MACZia,QAAS2M,EAAK3M,UAEhB4M,EAAK4K,IAAIyJ,YApHS,WAClBrU,EAAKuU,IAAIC,WAoHTxU,EAAK4K,IAAI0J,WAjHQ,WACjBtU,EAAKuU,IAAIvK,SAmHThK,EAAKta,MAAQsa,EAAK7mB,MAGpB6mB,EAAK7mB,MAAMylD,UAAY5+B,EAAKvb,OAErBub,wOC3IT,IA2FA6+B,EA3FoB,SAAC9+B,GACnB,IACIsU,EACAC,EAFEtU,EAAOm+B,MAuFb,OAhFAn+B,EAAKjmB,GAAKgmB,EAAKhmB,GAGfimB,EAAKvb,OAASsb,EAAKtb,OAAOA,OAG1Bub,EAAKsK,UAAYvK,EAAKuK,UAItBtK,EAAKvmB,MAAQiQ,SAAS6S,cAAc,SACpCyD,EAAKvmB,MAAM2jB,aAAa,KAAxB,SAAA5nB,OAAuCwqB,EAAKjmB,KAC5CimB,EAAKvmB,MAAM2jB,aAAa,QAAS,iBACjC4C,EAAKvmB,MAAM2jB,aAAa,QAAS,iDACjC4C,EAAKvmB,MAAM2jB,aAAa,WAAY,YAEhC2C,EAAKtb,OAAOyF,QAAS8V,EAAKvmB,MAAM47B,OAAS,QAEtBt/B,IAAnBiqB,EAAKsK,WAEPtK,EAAKhR,QAAU,WACbgR,EAAKvmB,MAAMsd,QACXiJ,EAAK7D,WAAWC,YAAY4D,EAAK4K,MAGnCyJ,EAAc,WACZrU,EAAKuU,IAAIC,WAGXF,EAAa,WACXtU,EAAKuU,IAAIvK,QAIXhK,EAAK4K,IAAMlhB,SAAS6S,cAAc,OAClCyD,EAAK4K,IAAIxN,aAAa,KAAtB,UAAA5nB,OAAsCwqB,EAAKjmB,KAC3CimB,EAAK4K,IAAIxN,aAAa,QAAS,iBAC/B4C,EAAK4K,IAAIxN,aAAa,QAAS,oEAID,WAA1B0hC,EAAO9+B,EAAKsK,YAC4B,mBAA/BtK,EAAKsK,UAAUzN,YAC1BmD,EAAK2U,UAAY3U,EAAKsK,UAEtBtK,EAAK2U,UAAYjrB,SAASshB,eAAehL,EAAKsK,WAEhDtK,EAAK2U,UAAU9X,YAAYmD,EAAK4K,KAEhC5K,EAAK7D,WAAa6D,EAAK4K,IAAIzO,WAE3B6D,EAAK4K,IAAI/N,YAAYmD,EAAKvmB,QAGD,IAArBsmB,EAAK3M,QAAQmhB,KACfvU,EAAKuU,IAAM8pB,GAAM/zB,UAAS,UAAA90B,OAAYwqB,EAAKjmB,IACzCA,GAAIimB,EAAKjmB,GACT0K,OAAQsb,EAAKtb,OACbiB,MAAOsa,EAAKvmB,MACZ2Z,QAAS2M,EAAK3M,UAEhB4M,EAAK4K,IAAIyJ,YAAcA,EACvBrU,EAAK4K,IAAI0J,WAAaA,GAGtBtU,EAAKta,MAAQsa,EAAKvmB,QAIpBumB,EAAKhR,QAAU,WACbgR,EAAKvmB,MAAMsd,QACXiJ,EAAK7D,WAAWC,YAAY4D,EAAKvmB,QAGnCiQ,SAASkT,KAAKC,YAAYmD,EAAKvmB,OAC/BumB,EAAK7D,WAAazS,SAASkT,MAG7BoD,EAAKvmB,MAAMmlD,UAAY5+B,EAAKvb,OAErBub,iPCtFT,IAseA++B,EAtee,SAACC,EAAsBnH,GACpC,IAAM93B,EAAO83B,EACP73B,EAAO07B,EAAgB37B,GAE7BC,EAAKvb,OAASsb,EAAKtb,OACnBub,EAAKyE,IAAM1E,EAAK0E,IAChBzE,EAAK2I,UAAY5I,EAAK4I,UACtB3I,EAAK4I,UAAO7yB,EACZiqB,EAAK6I,SAAU,EACf7I,EAAK9V,OAAQ,EACb8V,EAAK7mB,MAAQ4mB,EAAK5mB,MAClB6mB,EAAKvmB,MAAQsmB,EAAKtmB,MAClBumB,EAAK9mB,OAAS6mB,EAAK7mB,OACnB8mB,EAAK8I,UAAY/I,EAAK+I,UACtB9I,EAAKi/B,eAAiBl/B,EAAKk/B,eAC3Bj/B,EAAKhmB,YAAc+lB,EAAK/lB,YACxBgmB,EAAKzmB,gBAAkBwmB,EAAKxmB,gBAC5BymB,EAAKk/B,YAAa,EAClBl/B,EAAKm/B,YAAa,EAClBn/B,EAAK+L,KAAM,EACX/L,EAAK1nB,uBACsBvC,IAAzBipD,EAAqC1mD,EAAA,EAAoB0mD,EAE3D,IAAMI,EAAoB,SAACpyB,GACrBA,EAAIvoB,OAAO1K,KAAOimB,EAAK6yB,YACzB7yB,EAAKnU,KAAK4U,GAAcziB,KAAM,QAASyG,OAAQuoB,EAAIvoB,WAIjD46C,EAAwB,SAACryB,GACzBA,EAAIvoB,OAAO1K,KAAOimB,EAAK6yB,YACzB7yB,EAAKnU,KAAK4U,GAAcziB,KAAM,UAAWyG,OAAQub,MAI/Cs/B,EAA6B,SAAC5+B,GAClCV,EAAKnU,KAAK4U,GAAcziB,KAAM,kBAAmB0iB,UAGnD,UAAuB3qB,IAAnBiqB,EAAK8I,WACA9I,EAAK8I,qBAAqBlzB,OACA,IAA1BoqB,EAAK8I,UAAUnzB,QACtB,MAAMgV,MAAM,2BAEK5U,IAAfgqB,EAAK7V,QAAsC,IAAf6V,EAAK7V,QACnC8V,EAAK9V,OAAQ,GAIf8V,EAAK+I,MAAQ,WAQX,OALI/I,EAAK9V,QAAU6V,EAAKiJ,SACjB,QAEAjJ,EAAKiJ,UAKdhJ,EAAK6yB,SAAW,WACd,OAAI7yB,EAAKvb,QAAUub,EAAKvb,OAAO1K,GACtBimB,EAAKvb,OAAO1K,GAEdgmB,EAAK3a,OAId4a,EAAKiJ,cAAgB,kBAAMlJ,EAAKmJ,YAGhClJ,EAAKmJ,cAAgB,SAACE,GAChBrJ,EAAK9V,MACP8V,EAAKnU,KAAK4U,GAAcziB,KAAM,0BAA2ByG,OAAQub,EAAMqJ,WAGzEr1B,EAAA,EAAO+C,MAAM,8EAGfipB,EAAKoJ,sBAAwB,SAACC,GAC5BtJ,EAAKmJ,WAAaG,GAIpBrJ,EAAKsJ,SAAW,kBAAqB,IAAfvJ,EAAKtmB,YAAkC1D,IAAfgqB,EAAKtmB,OAGnDumB,EAAKuJ,SAAW,kBAAqB,IAAfxJ,EAAK5mB,YAAkCpD,IAAfgqB,EAAK5mB,OAGnD6mB,EAAKwJ,QAAU,kBAAoB,IAAdzJ,EAAKnS,WAAgC7X,IAAdgqB,EAAKnS,MAGjDoS,EAAKyJ,UAAY,kBAAM1J,EAAK7mB,QAE5B8mB,EAAKu/B,SAAW,kBAAMx/B,EAAKtmB,OAASsmB,EAAK5mB,OAAS4mB,EAAK7mB,QAEvD8mB,EAAKw/B,WAAa,uBAAmBzpD,IAAbiqB,EAAKyE,UAAwC1uB,IAAnBiqB,EAAK2I,WAEvD3I,EAAKy/B,MAAQ,SAACzzB,GAA2B,IAAvB0zB,EAAuBhqD,UAAAC,OAAA,QAAAI,IAAAL,UAAA,GAAAA,UAAA,QAAdK,EACzB,GAAI2pD,EAOF,OANA1/B,EAAK+L,KAAM,OACKh2B,IAAZiqB,EAAKgM,KACPhM,EAAKgM,GAAK6vB,KAEZ77B,EAAKgM,GAAGnd,IAAI6wC,EAAQ1zB,QACpBA,EAAGzgB,GAAG,mBAAoB+zC,GAGxBt/B,EAAKgM,KACPhM,EAAKgM,GAAGtgB,IAAI,aAAc0zC,GAC1Bp/B,EAAKgM,GAAGtgB,IAAI,gBAAiB2zC,GAC7Br/B,EAAKgM,GAAGtgB,IAAI,mBAAoB4zC,IAElCt/B,EAAKgM,GAAKA,EACVhM,EAAKgM,GAAGzgB,GAAG,aAAc6zC,GACzBp/B,EAAKgM,GAAGzgB,GAAG,gBAAiB8zC,GAC5Br/B,EAAKgM,GAAGzgB,GAAG,mBAAoB+zC,IAIjCt/B,EAAK0J,SAAW,SAAChJ,GACXV,EAAK9V,OAAS8V,EAAKwJ,UACrBxJ,EAAKnU,KAAK4U,GAAcziB,KAAM,qBAAsByG,OAAQub,EAAMU,SAGpE1sB,EAAA,EAAO+C,MAAM,oEAKfipB,EAAKnT,KAAO,WACV,IACE,IAAKkT,EAAKtmB,OAASsmB,EAAK5mB,OAAS4mB,EAAK7mB,cAAwBnD,IAAbgqB,EAAK0E,IAAmB,CACvEzwB,EAAA,EAAOyC,KAAK,mCACZ,IAAImzB,EAAW7J,EAAK5mB,OACH,IAAbywB,IAAqC,IAAhB7J,EAAK7mB,QAC5B0wB,GAAwB,IAAbA,GAAkC,OAAbA,KAAyBA,OAClC7zB,IAAnBiqB,EAAK8I,YACPc,EAASzB,OACPxX,IAAKqP,EAAK8I,UAAU,GACpBlY,IAAKoP,EAAK8I,UAAU,IAGtBc,EAAStB,QACP3X,IAAKqP,EAAK8I,UAAU,GACpBlY,IAAKoP,EAAK8I,UAAU,UAII/yB,IAAxBiqB,EAAKi/B,iBACPr1B,EAAS+1B,WACPhvC,IAAKqP,EAAKi/B,eAAe,GACzBruC,IAAKoP,EAAKi/B,eAAe,OAGJ,IAAhBl/B,EAAK7mB,aAAgCnD,IAAb6zB,IACjCA,GAAW,GAEb,IAAMC,GAAQ1wB,MAAOywB,EACnBnwB,MAAOsmB,EAAKtmB,MACZqwB,KAAM/J,EAAK+J,KACX5wB,OAAQ6mB,EAAK7mB,OACbc,YAAagmB,EAAKhmB,YAClBT,gBAAiBymB,EAAKzmB,iBAExBymB,EAAK1nB,kBAAkBC,aAAasxB,EAAK,SAACplB,GACxCzQ,EAAA,EAAOyC,KAAK,2CACZupB,EAAKvb,OAASA,EAEdub,EAAKK,cAAcI,GAAcziB,KAAM,qBAEvCgiB,EAAKvb,OAAOwlB,YAAYpuB,QAAQ,SAAC+jD,GAC/B5rD,EAAA,EAAOyC,KAAK,YAAampD,GACzB,IAAMp6C,EAAQo6C,EACdp6C,EAAMq6C,QAAU,WACd7/B,EAAKvb,OAAOwlB,YAAYpuB,QAAQ,SAACikD,GACXA,EACRD,QAAU,OAExB,IAAMl2B,EAAclJ,GAAcziB,KAAM,eACtCyG,OAAQub,EACRU,IAAKlb,EAAMu1C,OACb/6B,EAAKK,cAAcsJ,OAGtB,SAAC5yB,GACF/C,EAAA,EAAO+C,MAAP,uDAAAvB,OACiBuB,EAAMwD,KADvB,MAEA,IAAMovB,EAAclJ,GAAcziB,KAAM,gBAAiB0iB,IAAK3pB,IAC9DipB,EAAKK,cAAcsJ,SAEhB,CACL,IAAMA,EAAclJ,GAAcziB,KAAM,oBACxCgiB,EAAKK,cAAcsJ,IAErB,MAAOnvB,GACPxG,EAAA,EAAO+C,MAAP,gEAAAvB,OAA6EgF,EAA7E,MACA,IAAMmvB,EAAclJ,GAAcziB,KAAM,gBAAiB0iB,IAAKlmB,IAC9DwlB,EAAKK,cAAcsJ,KAKvB3J,EAAKnN,MAAQ,WACPmN,EAAK9V,aACWnU,IAAdiqB,EAAK4I,MACP5I,EAAK4I,KAAKmB,UAAU/J,GAGtBA,EAAKgK,YACej0B,IAAhBiqB,EAAKvb,QACPub,EAAKvb,OAAOwlB,YAAYpuB,QAAQ,SAAC+jD,GAC/B,IAAMp6C,EAAQo6C,EACdp6C,EAAMq6C,QAAU,KAChBr6C,EAAM0kB,SAGVlK,EAAKvb,YAAS1O,GAEZiqB,EAAKgM,KAAOhM,EAAK+L,KACnB/L,EAAKgM,GAAGtgB,IAAI,aAAc0zC,GAC1Bp/B,EAAKgM,GAAGtgB,IAAI,gBAAiB2zC,GAC7Br/B,EAAKgM,GAAGtgB,IAAI,mBAAoB4zC,IACvBt/B,EAAKgM,IAAMhM,EAAK+L,KACzB/L,EAAKgM,GAAGnwB,QAAQ,SAACmwB,GACfA,EAAGtgB,IAAI,aAAc0zC,GACrBpzB,EAAGtgB,IAAI,gBAAiB2zC,GACxBrzB,EAAGtgB,IAAI,mBAAoB4zC,KAG/Bt/B,EAAKpU,sBAGPoU,EAAKqK,KAAO,SAACC,EAAWy1B,GACtB,IAEI51B,EAFE/W,EAAU2sC,MAChB//B,EAAKsK,UAAYA,EAEbtK,EAAKuJ,YAAcvJ,EAAKyJ,iBAER1zB,IAAdu0B,IACFH,EAASq0B,GAAczkD,GAAIimB,EAAK+I,QAC9BtkB,OAAQub,EACRsK,YACAlX,YACF4M,EAAKmK,OAASA,EACdnK,EAAK6I,SAAU,GAER7I,EAAKsJ,aACda,EAAS00B,GAAc9kD,GAAIimB,EAAK+I,QAC9BtkB,OAAQub,EACRsK,YACAlX,YACF4M,EAAKmK,OAASA,EACdnK,EAAK6I,SAAU,IAInB7I,EAAKkK,KAAO,WACNlK,EAAK6I,cACa9yB,IAAhBiqB,EAAKmK,SACPnK,EAAKmK,OAAOnb,UACZgR,EAAK6I,SAAU,IAKrB7I,EAAKyK,UAAY,SAACC,GACZ1K,EAAKuJ,YAAcy2B,EAAKv2B,YACpBzJ,EAAKmK,OAAOhxB,MAAMsxB,WACpBzK,EAAKmK,OAAOhxB,MAAMsxB,UAAUC,GAG1B1K,EAAKmK,OAAO1wB,MAAMgxB,WACpBzK,EAAKmK,OAAO1wB,MAAMgxB,UAAUC,IAKpC1K,EAAK2K,KAAO3K,EAAKqK,KACjBrK,EAAKgK,KAAOhK,EAAKkK,KAEjB,IAAMxB,EAAW,WACf,QAAoB3yB,IAAhBiqB,EAAKmK,aAAwCp0B,IAAhBiqB,EAAKvb,OAAsB,CAC1D,IAOImmB,EAPEzxB,EAAQ6mB,EAAKmK,OAAOhxB,MACpByQ,EAAQF,SAASmhB,YAAYC,iBAAiB3xB,GAC9CgvB,EAAQrjB,SAAS8E,EAAMmhB,iBAAiB,SAAU,IAClDzC,EAASxjB,SAAS8E,EAAMmhB,iBAAiB,UAAW,IACpD7N,EAAOpY,SAAS8E,EAAMmhB,iBAAiB,QAAS,IAChD9N,EAAMnY,SAAS8E,EAAMmhB,iBAAiB,OAAQ,IAKlDH,EAF4B,WAA1Bq1B,EAAOjgC,EAAKsK,YAC8B,mBAA/BtK,EAAKsK,UAAUzN,YACtBmD,EAAKsK,UAEL5gB,SAASshB,eAAehL,EAAKsK,WAGrC,IAAMW,EAAWvhB,SAASmhB,YAAYC,iBAAiBF,GACjDM,EAAWpmB,SAASmmB,EAASF,iBAAiB,SAAU,IACxDI,EAAYrmB,SAASmmB,EAASF,iBAAiB,UAAW,IAC1DK,EAAS1hB,SAAS6S,cAAc,UAWtC,OATA6O,EAAOrxB,GAAK,UACZqxB,EAAOjD,MAAQ+C,EACfE,EAAO9C,OAAS6C,EAChBC,EAAOhO,aAAa,QAAS,iBAEbgO,EAAOC,WAAW,MAE1BC,UAAUnyB,EAAO+jB,EAAMD,EAAKkL,EAAOG,GAEpC8C,EAET,OAAO,MAGTpL,EAAKuL,iBAAmB,SAAChvB,GACvB,IAAM6uB,EAAS1C,IACf,OAAe,OAAX0C,EACE7uB,EACK6uB,EAAOI,UAAUjvB,GAEnB6uB,EAAOI,YAET,MAGTxL,EAAKyL,cAAgB,WACnB,IAAML,EAAS1C,IACf,OAAe,OAAX0C,EACKA,EAAOC,WAAW,MAAMK,aAAa,EAAG,EAAGN,EAAOjD,MAAOiD,EAAO9C,QAElE,MAGTtI,EAAK2L,aAAe,SAACytB,EAAaxtB,GAChC,IAAMpzB,EAAS4gD,GAEE,IAAbxtB,GACEpzB,EAAOiB,OAASjB,EAAOU,UACzBlF,EAAA,EAAO4C,QAAQ,sCACf4B,EAAOiB,WAAQ1D,EACfyC,EAAOU,YAASnD,IAEM,IAAfiqB,EAAK9V,SACO,IAAjB1R,EAAOW,QAAsC,IAApB6mB,EAAKuJ,aAChCv1B,EAAA,EAAO4C,QAAQ,iFAEf4B,EAAOW,OAAQ,IAEI,IAAjBX,EAAOiB,QAAsC,IAApBumB,EAAKsJ,aAChCt1B,EAAA,EAAO4C,QAAQ,iFAEf4B,EAAOiB,OAAQ,KAGA,IAAfumB,EAAK9V,QACF8V,EAAKuJ,aAAwC,IAAzB/wB,EAAOorB,gBAC9B5vB,EAAA,EAAO4C,QAAQ,+FAEf4B,EAAOorB,eAAgB,KAK7B,IAAMC,EAAa,WAAyB,IAAxBnrB,EAAwBhD,UAAAC,OAAA,QAAAI,IAAAL,UAAA,GAAAA,UAAA,GAAb,aAC7B,GAAIsqB,EAAK4I,MAAQ5I,EAAK4I,KAAKmD,IAGzB,OAFA/3B,EAAA,EAAO4C,QAAQ,+DACf8B,EAAS,SAGX,GAAIsnB,EAAKvb,OACP,IAAK,IAAIgV,EAAQ,EAAGA,EAAQuG,EAAKvb,OAAOy7C,iBAAiBvqD,OAAQ8jB,GAAS,EAC1DuG,EAAKvb,OAAOy7C,iBAAiBzmC,GACrCpN,SAAW2T,EAAKm/B,WAG1B,IAAM3mD,GAAWqrB,YAAcpqB,MAAOumB,EAAKk/B,WAAY/lD,MAAO6mB,EAAKm/B,aACnEn/B,EAAK2L,aAAanzB,GAAQ,GACtBwnB,EAAKgM,IACPhM,EAAKgM,GAAG3I,WAAW7qB,EAAQwnB,EAAK+I,QAASrwB,IAI7CsnB,EAAK6L,UAAY,SAACC,GAAiC,IAAxBpzB,EAAwBhD,UAAAC,OAAA,QAAAI,IAAAL,UAAA,GAAAA,UAAA,GAAb,aACpCsqB,EAAKk/B,WAAapzB,EAClBjI,EAAWnrB,IAGbsnB,EAAKmgC,UAAY,SAACr0B,GAAiC,IAAxBpzB,EAAwBhD,UAAAC,OAAA,QAAAI,IAAAL,UAAA,GAAAA,UAAA,GAAb,aACpCsqB,EAAKm/B,WAAarzB,EAClBjI,EAAWnrB,IAIbsnB,EAAKogC,uBAAyB,SAACC,EAAcC,GAAuC,IAAxB5nD,EAAwBhD,UAAAC,OAAA,QAAAI,IAAAL,UAAA,GAAAA,UAAA,GAAb,aACrE,GAAIsqB,EAAK4I,MAAQ5I,EAAK4I,KAAKmD,IAGzB,OAFA/3B,EAAA,EAAO4C,QAAQ,gEACf8B,EAAS,SAGX,IAAMF,GAAW+gD,cAAgB8G,eAAcC,kBAC/CtgC,EAAK2L,aAAanzB,GAAQ,GAC1BwnB,EAAKgM,GAAG3I,WAAW7qB,EAAQwnB,EAAK+I,QAASrwB,IAI3CsnB,EAAKugC,wBAA0B,SAAC7nD,GAC9B,GAAIsnB,EAAK4I,MAAQ5I,EAAK4I,KAAKmD,IAGzB,OAFA/3B,EAAA,EAAO4C,QAAQ,iEACf8B,EAAS,SAGX,IAAMF,GAAW+gD,cAAgB8G,cAAe,EAAGC,eAAgB,IACnEtgC,EAAK2L,aAAanzB,GAAQ,GAC1BwnB,EAAKgM,GAAG3I,WAAW7qB,EAAQwnB,EAAK+I,QAASrwB,IAI3CsnB,EAAKwgC,kCAAoC,SAACn0C,GAAmD,IAA1Cg0C,EAA0C3qD,UAAAC,OAAA,QAAAI,IAAAL,UAAA,GAAAA,UAAA,GAA3B,EAAGgD,EAAwBhD,UAAAC,OAAA,QAAAI,IAAAL,UAAA,GAAAA,UAAA,GAAb,aAC9E,GAAIsqB,EAAK4I,MAAQ5I,EAAK4I,KAAKmD,IAGzB,OAFA/3B,EAAA,EAAO4C,QAAQ,2EACf8B,EAAS,SAGX,IAAMF,GAAWghD,qBAAuBntC,UAASg0C,iBACjDrgC,EAAK2L,aAAanzB,GAAQ,GAC1BxE,EAAA,EAAOmC,MAAM,iCAAkCqC,GAC/CwnB,EAAKgM,GAAG3I,WAAW7qB,EAAQwnB,EAAK+I,QAASrwB,IAK3CsnB,EAAKygC,oBAAsBzgC,EAAKwgC,kCAAkChtD,KAAKwsD,GAAM,GAE7E,IAAMU,EAAiB,SAACC,EAAeC,EAAoBl2C,GACzD,IAAIm2C,EAAgBD,EAChBE,EAAWH,GACO,IAAlBE,IACFA,GAAgB,IAIlBC,GADAA,EAAgC,iBAAbA,GAA0BA,GAAYA,aACzBlrD,MAASkrD,MAE5BnrD,OAAS,GACpBqqB,EAAK4I,KAAKm4B,mBAAmB/gC,EAAM,WAAaztB,KAAM,kBACpDmY,SACAm2C,gBACAC,cAgCN,OA5BA9gC,EAAKghC,gBAAkB,SAACF,EAAUD,GAChCH,EAAeI,EAAUD,GAAe,IAG1C7gC,EAAKihC,eAAiB,SAACH,EAAUD,GAC/BH,EAAeI,EAAUD,GAAe,IAG1C7gC,EAAKiM,oBAAsB,SAACzzB,GAAgC,IAAxBE,EAAwBhD,UAAAC,OAAA,QAAAI,IAAAL,UAAA,GAAAA,UAAA,GAAb,aAC7C,QAAeK,IAAXyC,EACJ,GAAIwnB,EAAKgM,GAEP,GADAhM,EAAK2L,aAAanzB,GAAQ,GACtBwnB,EAAK9V,MACP,GAAI8V,EAAK4I,KAAKmD,IACZ,IAAK,IAAItS,EAAQ,EAAGA,EAAQuG,EAAKgM,GAAGr2B,OAAQ8jB,GAAS,EACnDuG,EAAKgM,GAAGvS,GAAO4J,WAAW7qB,EAAQwnB,EAAK+I,QAASrwB,QAGlDsnB,EAAKgM,GAAG3I,WAAW7qB,EAAQwnB,EAAK+I,QAASrwB,QAG3CsnB,EAAKgM,GAAG3I,WAAW7qB,EAAQwnB,EAAK+I,QAASrwB,QAG3CA,EAAS,yDAINsnB,GC1VTkhC,EApJgB,WAkBd,IAjBA,IAAIryB,EACAC,EAGEH,GACJ,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACnC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAG/BC,KAEG58B,EAAI,EAAGA,EAAI28B,EAAYh5B,OAAQ3D,GAAK,EAC3C48B,EAAmBD,EAAY38B,IAAMA,EAGvC,IAAM+8B,EAAe,SAAC9xB,GACpB4xB,EAAY5xB,EACZ6xB,EAAc,GAGVE,EAAa,WACjB,IAAKH,EACH,OAzBiB,EA2BnB,GAAIC,GAAeD,EAAUl5B,OAC3B,OA5BiB,EA8BnB,IAAMtD,EAAwC,IAApCw8B,EAAUliB,WAAWmiB,GAE/B,OADAA,GAAe,EACRz8B,GA+CH48B,EAAoB,WACxB,IAAKJ,EACH,OAjFiB,EAoFnB,OAAa,CACX,GAAIC,GAAeD,EAAUl5B,OAC3B,OAtFe,EAwFjB,IAAMw5B,EAAgBN,EAAUzmB,OAAO0mB,GAEvC,GADAA,GAAe,EACXF,EAAmBO,GACrB,OAAOP,EAAmBO,GAE5B,GAAsB,MAAlBA,EACF,OAAO,IAKPD,EAAO,SAACj8B,GACZ,IAAIQ,EAAIR,EAAM8H,SAAS,IAKvB,OAJiB,IAAbtH,EAAEkC,SACJlC,EAAC,IAAA+B,OAAO/B,IAEVA,EAAC,IAAA+B,OAAO/B,GACD27B,SAAS37B,IAiClB,OACE47B,aAxGmB,SAACpyB,GACpB,IAAIgG,EACAssB,EACAC,EACJT,EAAa9xB,GACbgG,EAAS,GACT,IAAMqsB,EAAW,IAAI15B,MAAM,GAG3B,IAFA25B,EAAY,EACZC,GAAO,GACCA,IA5CW,KA4CFF,EAAS,GAAKN,MAC7BM,EAAS,GAAKN,IACdM,EAAS,GAAKN,IAEd/rB,GAAW0rB,EAAYW,EAAS,IAAM,IAhDrB,IAiDbA,EAAS,IAEXrsB,GAAW0rB,EAAcW,EAAS,IAAM,EAAK,GAASA,EAAS,IAAM,IAnDtD,IAoDXA,EAAS,IAEXrsB,GAAW0rB,EAAcW,EAAS,IAAM,EAAK,GAASA,EAAS,IAAM,GAErErsB,GAAW0rB,EAA0B,GAAdW,EAAS,MAGhCrsB,GAAW0rB,EAAcW,EAAS,IAAM,EAAK,IAC7CrsB,EAAM,GAAAzN,OAAMyN,EAAN,KACNusB,GAAO,KAITvsB,GAAW0rB,EAAcW,EAAS,IAAM,EAAK,IAC7CrsB,EAAM,GAAAzN,OAAMyN,EAAN,KACNA,EAAM,GAAAzN,OAAMyN,EAAN,KACNusB,GAAO,IAETD,GAAa,IACI,KACftsB,EAAM,GAAAzN,OAAMyN,EAAN,MACNssB,EAAY,GAGhB,OAAOtsB,GAgEP0qB,aAhCmB,SAAC1wB,GACpB,IAAIgG,EACAusB,EACJT,EAAa9xB,GACbgG,EAAS,GACT,IAAMqsB,EAAW,IAAI15B,MAAM,GAE3B,IADA45B,GAAO,GACCA,IAnHW,KAoHRF,EAAS,GAAKL,OApHN,KAqHRK,EAAS,GAAKL,MACvBK,EAAS,GAAKL,IACdK,EAAS,GAAKL,IAEdhsB,GAAUisB,EAAQI,EAAS,IAAM,EAAK,IAAQA,EAAS,IAAM,IAzH5C,IA0HbA,EAAS,IAEXrsB,GAAUisB,EAAQI,EAAS,IAAM,EAAK,IAAQA,EAAS,IAAM,IA5H9C,IA6HXA,EAAS,GAEXrsB,GAAUisB,EAAQI,EAAS,IAAM,EAAK,IAAQA,EAAS,IAEvDE,GAAO,GAGTA,GAAO,EAGX,OAAOvsB,IA3IK,wVCkBhB,IAk4BAk+C,EAl4Ba,SAACC,EAAOpC,EAAsBqC,EAAsBxJ,GAC/D,IAAM93B,EAAO83B,EACP73B,EAAO07B,EAAgB7D,GAM7B73B,EAAKwM,cAAgBqvB,IACrB77B,EAAKyM,aAAeovB,IACpB77B,EAAK0M,OAAS,GACd1M,EAAKkC,MARgB,EASrBlC,EAAK+L,KAAM,EACX/L,EAAK1nB,uBACsBvC,IAAzBipD,EAAqC1mD,EAAA,EAAoB0mD,EAE3Dh/B,EAAKshC,4BACsBvrD,IAAzBsrD,EAAqC,IAAI1E,EACvC,IAAI0E,EAAqBzE,uBAE7B,IAAIl1C,EAASs1C,EAAOoE,GACpBphC,EAAKtY,OAASA,EACd,IAAI8kB,EAAgBxM,EAAKwM,cACrBC,EAAezM,EAAKyM,aAElB9G,EAAe,SAAC47B,GACpB,IAAM98C,EAAS88C,EACf98C,EAAOmH,qBAEHnH,EAAOunB,KAAOhM,EAAK+L,KACrBtnB,EAAOunB,GAAGrG,aAAalhB,GAGzBzQ,EAAA,EAAOmC,MAAM,kBACTsO,EAAOA,SAETA,EAAOulB,OAEPvlB,EAAOylB,OACPzlB,EAAOoO,eACApO,EAAOA,QAIZA,EAAOunB,KACLvnB,EAAOyF,OAAS8V,EAAK+L,IACvBtnB,EAAOunB,GAAGnwB,QAAQ,SAAC6F,EAAY3H,GAC7B2H,EAAWmR,QACXpO,EAAOunB,GAAG0G,OAAO34B,MAGnBimB,EAAKshC,uBAAuBE,qBAAqB/8C,EAAOunB,WACjDvnB,EAAOunB,MAKdy1B,EAAiB,SAACF,EAAa92C,GACnC,IAAMhG,EAAS88C,EACf,GAxDmB,IAwDfvhC,EAAKkC,OAA0Bzd,IAAWA,EAAOmoB,OAAQ,CAC3DnoB,EAAOmoB,QAAS,EAChB,IAAM80B,EAAkBjhC,GACpBziB,KAAM,gBACN0iB,IAAKjW,GAAW,iCAChBhG,WACJub,EAAKK,cAAcqhC,GACfj9C,EAAOyF,MACT8V,EAAK+J,UAAUtlB,GAEfub,EAAKuN,YAAY9oB,KAKjBk9C,EAA2B,SAACJ,EAAav0B,GAC7C,IAAMvoB,EAAS88C,EAEfvtD,EAAA,EAAOyC,KAAK,qBACZgO,EAAOA,OAASuoB,EAAIvoB,OACfub,EAAK+L,KACRtnB,EAAOunB,GAAG/H,UAAUxf,GAEtB,IAAMkoB,EAAOlM,GAAcziB,KAAM,oBAAqByG,WACtDub,EAAKK,cAAcsM,IAUfi1B,EAA0B,SAACn9C,EAAQ0oB,GAkBvC,OAhBEz0B,SADc,SACLgoB,GACPhZ,EAAOw2C,QAAQ,qBACb5jD,SAAUmK,EAAOskB,QACjBoE,aACAzM,SAEJjnB,MAAOgL,EAAO6kB,WACdnwB,MAAOsL,EAAO8kB,WACdpI,WAAYnB,EAAKmB,WACjBc,WAAYxd,EAAOwd,WACnBD,WAAYvd,EAAOud,WACnBuB,gBAAiBxD,EAAKkC,WACtBqB,gBAAiBvD,EAAKiC,WACtBs2B,UAAW7zC,EAAO6zC,UAClBvsB,KAAK,IA8CH81B,EAAgC,SAACz8C,GACrC4a,EAAKwM,cAAc3wB,QAAQ,SAAC4I,GACrBA,EAAOyF,OAASzF,EAAOouC,aAAeztC,GAvEZ,SAACm8C,GAClC,IAAM98C,EAAS88C,EACfvtD,EAAA,EAAOyC,KAAK,uBACZ,IAAMk2B,EAAOlM,GAAcziB,KAAM,sBAAuByG,WACxDub,EAAKK,cAAcsM,GAoEfm1B,CAA2Br9C,MAK3Bs9C,EAA4B,SAACt9C,EAAQ2O,EAAS4uC,GAClD,IAAMC,GACJvpD,SADqB,SACZ+R,GAAoC,IAA3BnQ,EAA2B5E,UAAAC,OAAA,QAAAI,IAAAL,UAAA,GAAAA,UAAA,GAAhB+O,EAAOskB,QAClC/0B,EAAA,EAAOyC,KAAK,kBAAmBgU,EAAShG,EAAOskB,QAASzuB,GACxDoN,EAAOw2C,QAAQ,qBACb5jD,WACAomB,IAAKjW,EACLxS,QAASwM,EAAOunB,IAAMvnB,EAAOunB,GAAG/zB,cAAWlC,EAAW,eAE1D+uB,OAAO,EACPrrB,MAAO2Z,EAAQ3Z,OAASgL,EAAO6kB,WAC/BnwB,MAAOia,EAAQja,OAASsL,EAAO8kB,WAC/BtH,WAAY7O,EAAQ6O,WACpBD,WAAY5O,EAAQ4O,WACpBuB,gBAAiBxD,EAAKkC,WACtBqB,gBAAiBvD,EAAKiC,WACtB5c,MAAOX,EAAOouC,WACd1xB,WAAYnB,EAAKmB,WACjBm3B,UAAW7zC,EAAO6zC,UAClBvsB,KAAK,EACLywB,sBAAuBqF,GAOzB,OALKG,IACHC,EAAe5gD,UAAY+R,EAAQ/R,UACnC4gD,EAAe3H,aAAelnC,EAAQknC,aACtC2H,EAAezH,eAAiBpnC,EAAQonC,gBAEnCyH,GA8KHC,EAAgC,SAACl1B,GACrC,IAAMvoB,EAASuoB,EAAIvoB,OACbic,EAAMsM,EAAItM,IACZjc,EAAOyF,MACTxC,EAAOxN,YAAY,kBAAoBH,GAAI0K,EAAOskB,QAASrI,QAE3D1sB,EAAA,EAAO+C,MAAM,kDAIXorD,EAAkC,SAACn1B,GACvC,IAAMvoB,EAASuoB,EAAIvoB,OACb4kB,EAAQ2D,EAAI3D,MACd5kB,EAAOyF,OACTzF,EAAO2kB,sBAAsBC,GAC7B3hB,EAAOxN,YAAY,0BAA4BH,GAAI0K,EAAOskB,QAASM,WAEnEr1B,EAAA,EAAO+C,MAAM,qDAIXqrD,EAAoB,SAACtG,EAAMx7B,GAC3BA,EAAMnsB,KACR2nD,EAAIvnD,WAAJ,EAAA8tD,EAAQ/hC,EAAMnsB,OAEd2nD,KAIEwG,EAAuB,SAACtkD,EAAMyG,EAAQ2O,GAAf,OAC3B8O,MAAOlkB,EACP4P,KAAMnJ,EAAO+kB,UACb/vB,MAAOgL,EAAO6kB,WACdnwB,MAAOsL,EAAO8kB,WACdnkB,MAAOX,EAAOouC,WACd35C,OAAQuL,EAAOglB,YACfP,WAAYzkB,EAAOwkB,gBACnBgF,SAAU7a,EAAQ6a,SAClBnK,YAAa1Q,EAAQ0Q,YACrBD,WAAYzQ,EAAQyQ,aAGhB0+B,EAA0B,SAACxoD,EAAIwnD,EAAaxqD,GAA+B,IAAxB2B,EAAwBhD,UAAAC,OAAA,QAAAI,IAAAL,UAAA,GAAAA,UAAA,GAAb,aAC5D+O,EAAS88C,EACf,GAAW,OAAPxnD,EAKF,OAJA/F,EAAA,EAAO+C,MAAM,mCAAoCA,QAGjD2B,OAAS3C,EAAWgB,GAGtB/C,EAAA,EAAOyC,KAAK,oBACZgO,EAAOskB,MAAQ,kBAAMhvB,GACrB0K,EAAO8G,GAAG,qBAAsB22C,GAChCz9C,EAAO8G,GAAG,0BAA2B42C,GACrC11B,EAAa5d,IAAI9U,EAAI0K,GACrBA,EAAOmkB,KAAO5I,EACdtnB,EAASqB,IAuCLyoD,EAAe,SAACjB,EAAanuC,GAAiC,IAAxB1a,EAAwBhD,UAAAC,OAAA,QAAAI,IAAAL,UAAA,GAAAA,UAAA,GAAb,aAC/C+O,EAAS88C,EACfvtD,EAAA,EAAOyC,KAAK,+CAAgD2c,EAAQ0Q,aACpE,IAAM2+B,EAAcH,EAAqB,QAAS79C,EAAQ2O,GAC1DqvC,EAAY9+B,WAAavQ,EAAQuQ,WACjC8+B,EAAYzgC,WAAa5O,EAAQ4O,WACjCygC,EAAYv0B,OAAS9a,EAAQ8a,OAE7BxmB,EAAOw2C,QAAQ,UAAWuE,OAAa1sD,EAAW,SAACgE,EAAIoiD,EAASplD,GAC9D,GAAW,OAAPgD,EAGF,OAFA/F,EAAA,EAAO+C,MAAM,0BAA2BA,QACxC2B,OAAS3C,EAAWgB,GAGtBwrD,EAAwBxoD,EAAI0K,EAAQ1N,OAAOhB,GA3QN,SAACwrD,EAAapF,EAAS/oC,GAC9D,IAAM3O,EAAS88C,EACf98C,EAAOg7C,MAAMz/B,EAAKshC,uBAAuBoB,0BACvCX,EAA0Bt9C,EAAQ2O,GAAU+oC,EAASp8B,EAAK+8B,WAE5Dr4C,EAAO8G,GAAG,kBAAmB,SAACyhB,GAC5Bh5B,EAAA,EAAOyC,KAAP,GAAAjB,OAAeiP,EAAOskB,QAAtB,2BAAAvzB,OAAuDw3B,EAAItM,IAAIwB,QACzC,WAAlB8K,EAAItM,IAAIwB,OACVu/B,EAAeh9C,KAGnBA,EAAOunB,GAAG/H,UAAUxf,GACf2O,EAAQ0Q,aAAerf,EAAOunB,GAAGlI,aAAY,EAAO/D,EAAK+8B,SAAUr4C,EAAOskB,SAgQ7E45B,CAAiCl+C,EAAQ03C,EAAS/oC,GAClD1a,EAASqB,MAeP6oD,EAAiB,SAACrB,EAAaxB,GAAsC,IAAxBrnD,EAAwBhD,UAAAC,OAAA,QAAAI,IAAAL,UAAA,GAAAA,UAAA,GAAb,aACtD+O,EAAS88C,EACTnuC,EAAU2sC,EAChB3sC,EAAQ4O,WAAa5O,EAAQ4O,YAAcjC,EAAKgO,eAC5C3a,EAAQ4O,WAAajC,EAAKiC,aAC5B5O,EAAQ4O,WAAajC,EAAKiC,YAE5B5O,EAAQ3Z,WAA2B1D,IAAlBqd,EAAQ3Z,OAA8B2Z,EAAQ3Z,MAC/D2Z,EAAQja,WAA2BpD,IAAlBqd,EAAQja,OAA8Bia,EAAQja,MAC/Dia,EAAQxF,UAAyB7X,IAAjBqd,EAAQxF,MAA6BwF,EAAQxF,KAC7DnJ,EAAOknB,aAAavY,GACpB,IAAMyvC,GAAevoD,SAAUmK,EAAOskB,QACpCtvB,MAAO2Z,EAAQ3Z,OAASgL,EAAO6kB,WAC/BnwB,MAxBwB,SAACsL,EAAQtL,GACnC,IAAMowB,EAAWpwB,GAASsL,EAAO8kB,WAC3BpB,EAAQhvB,GAASA,EAAMgvB,MACvBG,EAASnvB,GAASA,EAAMmvB,OACxBq3B,EAAYxmD,GAASA,EAAMwmD,UACjC,OAAIx3B,GAASG,GAAUq3B,GACZx3B,QAAOG,SAAQq3B,aAEnBp2B,EAgBEu5B,CAAoBr+C,EAAQ2O,EAAQja,OAC3C6oB,WAAY5O,EAAQ4O,WACpBpU,KAAMwF,EAAQxF,MAAQnJ,EAAO+kB,UAC7BvxB,QAAS+nB,EAAK1nB,kBAAkBN,aAChC8rB,YAAa1Q,EAAQ0Q,YACrBmK,SAAU7a,EAAQ6a,SAClBpK,WAAYzQ,EAAQyQ,WACpBD,cAAexQ,EAAQwQ,eACzBlc,EAAOw2C,QAAQ,YAAa2E,OAAY9sD,EAAW,SAACkN,EAAQk5C,EAASplD,GACnE,GAAe,OAAXkM,EAGF,OAFAjP,EAAA,EAAO+C,MAAM,+BAAgCA,QAC7C2B,OAAS3C,EAAWgB,GAItB/C,EAAA,EAAOyC,KAAK,oBAtU0B,SAAC8qD,EAAapF,EAAS/oC,GAC/D,IAAM3O,EAAS88C,EACf98C,EAAOg7C,MAAMz/B,EAAKshC,uBAAuBoB,0BACvCX,EAA0Bt9C,EAAQ2O,GAAS,GAAO+oC,EAASp8B,EAAK+8B,WAClEr4C,EAAO8G,GAAG,QAASo2C,EAAyBnuD,KAAK,KAAMiR,IACvDA,EAAO8G,GAAG,kBAAmB,SAACyhB,GAC5Bh5B,EAAA,EAAOyC,KAAP,GAAAjB,OAAeiP,EAAOskB,QAAtB,2BAAAvzB,OAAuDw3B,EAAItM,IAAIwB,QACzC,WAAlB8K,EAAItM,IAAIwB,OACVu/B,EAAeh9C,KAGnBA,EAAOunB,GAAGlI,aAAY,GAAM,EAAOrf,EAAOskB,SA4TxCg6B,CAAkCt+C,EAAQ03C,EAAS/oC,GAEnD1a,GAAS,MAqXb,OA3TAsnB,EAAKjY,QAAU,WAAkB,IAAjBqL,EAAiB1d,UAAAC,OAAA,QAAAI,IAAAL,UAAA,GAAAA,UAAA,MACzBm3B,EAAQq0B,EAAOvzB,aAAa5N,EAAK8M,OAlkBpB,IAokBf7M,EAAKkC,OACPluB,EAAA,EAAO4C,QAAQ,0BAIjBopB,EAAKkC,MAxkBY,EAykBjBxa,EAAOK,QAAQwC,KAAKyD,MAAM6e,GAAQzZ,EAAS,SAAChZ,GAC1C,IAAIqK,EACEqpB,KACAtpB,EAAUpK,EAASoK,YACnBopB,EAASxzB,EAASL,GAExBimB,EAAK+L,IAAM3xB,EAAS2xB,IACpB/L,EAAKmB,WAAa/mB,EAAS+mB,WAC3BnB,EAAKkC,MAhlBS,EAilBdnC,EAAK+8B,SAAW1iD,EAAS0iD,SACzB/8B,EAAKgO,eAAiB3zB,EAAS2zB,eAC/BhO,EAAKiC,WAAa5nB,EAAS4nB,WAI3B,IADA,IAAMghC,EAAgBtwD,OAAO+K,KAAK+G,GACzBiV,EAAQ,EAAGA,EAAQupC,EAAcrtD,OAAQ8jB,GAAS,EAAG,CAC5D,IAAM3d,EAAM0I,EAAQw+C,EAAcvpC,KAClChV,EAASs6C,EAAO/+B,EAAK1nB,mBAAqB0wB,SAAUltB,EAAI/B,GACtDmQ,OAAO,EACPzQ,MAAOqC,EAAIrC,MACXN,MAAO2C,EAAI3C,MACXyU,KAAM9R,EAAI8R,KACVxI,MAAOtJ,EAAIsJ,MACXlM,OAAQ4C,EAAI5C,OACZgwB,WAAYptB,EAAIotB,cACXN,KAAO5I,EACd8N,EAAWnxB,KAAK8H,GAChB+nB,EAAc3d,IAAI/S,EAAI/B,GAAI0K,GAI5Bub,EAAK0M,OAASkB,EAEd55B,EAAA,EAAOyC,KAAP,qBAAAjB,OAAiCwqB,EAAK0M,SAEtC,IAAMmB,EAAarN,GAAYxiB,KAAM,iBAAkBwG,QAASspB,IAChE9N,EAAKK,cAAcwN,IAClB,SAAC92B,GACF/C,EAAA,EAAO+C,MAAP,yBAAAvB,OAAsCuB,IACtC,IAAM82B,EAAarN,GAAYxiB,KAAM,aAAcyM,QAAS1T,IAC5DipB,EAAKK,cAAcwN,MAKvB7N,EAAKzM,WAAa,WAChBvf,EAAA,EAAOmC,MAAM,2BAEb,IAAMm3B,EAAgB9M,GAAYxiB,KAAM,oBACtCyM,QAAS,2BACXuV,EAAKK,cAAciN,IAKrBtN,EAAKgO,QAAU,SAACuzB,GAAwD,IAA3CxB,EAA2CrqD,UAAAC,OAAA,QAAAI,IAAAL,UAAA,GAAAA,UAAA,MAAxBgD,EAAwBhD,UAAAC,OAAA,QAAAI,IAAAL,UAAA,GAAAA,UAAA,GAAb,aACnD+O,EAAS88C,EACTnuC,EAAU2sC,EAEhB3sC,EAAQ4O,WAAa5O,EAAQ4O,YAAcjC,EAAKgO,eAC5C3a,EAAQ4O,WAAajC,EAAKiC,aAC5B5O,EAAQ4O,WAAajC,EAAKiC,iBAGDjsB,IAAvBqd,EAAQuQ,aACVvQ,EAAQuQ,WAAa,GAGnBvQ,EAAQuQ,WAAa5D,EAAKgO,iBAC5B3a,EAAQuQ,WAAa5D,EAAKgO,gBAG5BtpB,EAAO6zC,UAAYllC,EAAQklC,UAE3BllC,EAAQ/R,UAAY+R,EAAQ/R,YAAa,EAEzC+R,EAAQyQ,YACNpqB,MAAOgL,EAAOy6C,WACd/lD,MAAOsL,EAAO06C,YAIZ16C,GAAUA,EAAOyF,QAAUzF,EAAOmoB,SAAWH,EAAanpB,IAAImB,EAAOskB,SAEnEtkB,EAAO86C,WACL96C,EAAO+6C,aA1PO,SAAC+B,EAAanuC,GAAiC,IAEjEpV,EACAlC,EAHyCpD,EAAwBhD,UAAAC,OAAA,QAAAI,IAAAL,UAAA,GAAAA,UAAA,GAAb,aAClD+O,EAAS88C,EAGX98C,EAAOggB,KACTzmB,EAAO,MACPlC,EAAM2I,EAAOggB,MAEbzmB,EAAO,YACPlC,EAAM2I,EAAOkkB,WAEf30B,EAAA,EAAOyC,KAAK,+BAAgCgO,EAAOskB,SACnDtkB,EAAOknB,aAAavY,GACpB1L,EAAOw2C,QAAQ,UAAWoE,EAAqBtkD,EAAMyG,EAAQ2O,GAAUtX,EACrE,SAAC/B,EAAIhD,GACHwrD,EAAwBxoD,EAAI0K,EAAQ1N,EAAO2B,KA4OzCuqD,CAAgBx+C,EAAQ2O,EAAS1a,GACxBsnB,EAAK+L,IAzOH,SAACw1B,EAAanuC,GAAiC,IAAxB1a,EAAwBhD,UAAAC,OAAA,QAAAI,IAAAL,UAAA,GAAAA,UAAA,GAAb,aAC7C+O,EAAS88C,EAEf98C,EAAOwd,WAAa7O,EAAQ6O,WAC5Bxd,EAAOud,WAAa5O,EAAQ4O,WAC5Bta,EAAOw2C,QAAQ,UAAWoE,EAAqB,MAAO79C,EAAQ2O,QAAUrd,EAAW,SAACgE,EAAIhD,GACtFwrD,EAAwBxoD,EAAI0K,EAAQ1N,EAAO2B,KAoOvCwqD,CAAWz+C,EAAQ2O,EAAS1a,GAE5B8pD,EAAa/9C,EAAQ2O,EAAS1a,GAEvB+L,EAAO+kB,WApOF,SAAC+3B,EAAanuC,GAAiC,IAAxB1a,EAAwBhD,UAAAC,OAAA,QAAAI,IAAAL,UAAA,GAAAA,UAAA,GAAb,aAC9C+O,EAAS88C,EACf75C,EAAOw2C,QAAQ,UAAWoE,EAAqB,OAAQ79C,EAAQ2O,QAAUrd,EAAW,SAACgE,EAAIhD,GACvFwrD,EAAwBxoD,EAAI0K,EAAQ1N,EAAO2B,KAkOzCyqD,CAAY1+C,EAAQ2O,EAAS1a,IAG/B1E,EAAA,EAAO+C,MAAM,oCACb2B,OAAS3C,EAAW,oBAKxBiqB,EAAKmO,eAAiB,SAAC1pB,GAAgC,IAAxB/L,EAAwBhD,UAAAC,OAAA,QAAAI,IAAAL,UAAA,GAAAA,UAAA,GAAb,aACxC,QAAeK,IAAX0O,EAGF,OAFAzQ,EAAA,EAAO+C,MAAM,iDAAkD0N,QAC/D/L,OAAS3C,EAAW,kBAGtB/B,EAAA,EAAOmC,MAAP,2BAAAX,OAAwCiP,EAAOskB,UAC/CrhB,EAAOxN,YAAY,iBAAmBk0B,GAAI3pB,EAAOskB,SAAW,SAAChvB,EAAIhD,GAC/D,GAAW,OAAPgD,EAGF,OAFA/F,EAAA,EAAO+C,MAAM,2BAA4BA,QACzC2B,OAAS3C,EAAWgB,GAItB/C,EAAA,EAAOyC,KAAK,kBAAmBsD,GAC/BrB,EAASqB,MAKbimB,EAAKqO,cAAgB,SAACC,GAAqC,IAAxB51B,EAAwBhD,UAAAC,OAAA,QAAAI,IAAAL,UAAA,GAAAA,UAAA,GAAb,aAC5CgS,EAAOxN,YAAY,gBAAkBH,GAAIu0B,GAAe,SAACrrB,EAAQlM,GAC/D,GAAe,OAAXkM,EAGF,OAFAjP,EAAA,EAAO+C,MAAM,0BAA2BA,QACxC2B,OAAS3C,EAAWgB,GAGtB/C,EAAA,EAAOyC,KAAK,iBAAkB63B,GAC9B51B,GAAS,MAKbsnB,EAAK+J,UAAY,SAACw3B,GAAqC,IAAxB7oD,EAAwBhD,UAAAC,OAAA,QAAAI,IAAAL,UAAA,GAAAA,UAAA,GAAb,aAClC+O,EAAS88C,EAEf,GAAI98C,GAAUA,EAAOyF,MAAO,CAe1B,GAbAxC,EAAOxN,YAAY,YAAauK,EAAOskB,QAAS,SAAC9lB,EAAQlM,GACvD,GAAe,OAAXkM,EAGF,OAFAjP,EAAA,EAAO+C,MAAM,4BAA6BA,QAC1C2B,OAAS3C,EAAWgB,UAIf0N,EAAOmoB,OACdl0B,GAAS,KAGX1E,EAAA,EAAOyC,KAAK,sBACZgO,EAAOmkB,UAAO7yB,EACV0O,EAAO86C,aAAe96C,EAAO+6C,aAAc,CAC7C,IAAM4D,EAAc32B,EAAanpB,IAAImB,EAAOskB,SACtB0D,EAAa55B,IAAI4R,EAAOskB,SAAWtkB,EACzDkhB,EAAay9B,GAEf32B,EAAaiG,OAAOjuB,EAAOskB,SAE3BtkB,EAAOskB,MAAQ,aACftkB,EAAOiH,IAAI,qBAAsBw2C,GACjCz9C,EAAOiH,IAAI,0BAA2By2C,OACjC,CACL,IAAMprD,EAAQ,0DACd/C,EAAA,EAAO+C,MAAMA,GACb2B,OAAS3C,EAAWgB,KAIxBipB,EAAK+gC,mBAAqB,SAACt8C,EAAQzG,EAAMsf,GACvC,GAAI7Y,GAAUA,EAAOskB,QAAS,CAC5B,IAAMrI,GAAQ1iB,KAAM,UAAWsf,UAC/B5V,EAAOw2C,QAAQ,qBAAuB5jD,SAAUmK,EAAOskB,QAASrI,UAKpEV,EAAKuO,UAAY,SAACgzB,GAAwD,IAA3CxB,EAA2CrqD,UAAAC,OAAA,QAAAI,IAAAL,UAAA,GAAAA,UAAA,MAAxBgD,EAAwBhD,UAAAC,OAAA,QAAAI,IAAAL,UAAA,GAAAA,UAAA,GAAb,aACrD+O,EAAS88C,EACTnuC,EAAU2sC,EAEhB,IAAIt7C,GAAWA,EAAOyF,OAAUzF,EAAOmoB,OAmChC,CACL,IAAI71B,EAAQ,qBACP0N,EAGMA,EAAOyF,OAChBlW,EAAA,EAAO4C,QAAQ,qGAEfG,EAAQ,wBACC0N,EAAOmoB,SAChB54B,EAAA,EAAO4C,QAAQ,sCACfG,EAAQ,kBARR/C,EAAA,EAAO4C,QAAQ,sCACfG,EAAQ,+BASV2B,OAAS3C,EAAWgB,OAhDyB,CAC7C,GAAI0N,EAAO86C,WAgBT,GAdK96C,EAAO8kB,YAAe9kB,EAAOglB,cAChCrW,EAAQja,OAAQ,GAEbsL,EAAO6kB,aACVlW,EAAQ3Z,OAAQ,GAGlB2Z,EAAQyQ,YACNpqB,MAAOgL,EAAOy6C,WACd/lD,MAAOsL,EAAO06C,YAGhB16C,EAAO6zC,UAAYllC,EAAQklC,UAEvBt4B,EAAK+L,IAAK,CACZ,IAAMs3B,EAAoB72B,EAAc35B,IAAI4R,EAAOskB,SACnDs6B,EAAkBphC,WAAa7O,EAAQ6O,WACvCohC,EAAkBrhC,WAAa5O,EAAQ4O,WACvCta,EAAOw2C,QAAQ,aAAe5jD,SAAUmK,EAAOskB,QAASkF,SAAU7a,EAAQ6a,WAC1Ev1B,GAAS,QAETkqD,EAAen+C,EAAQ2O,EAAS1a,OAE7B,KAAI+L,EAAO+kB,YAA8B,IAAjBpW,EAAQxF,KAKrC,OAFA5Z,EAAA,EAAO4C,QAAQ,wCACf8B,OAAS3C,EAAW,4BAnRJ,SAACwrD,EAAanuC,GAAiC,IAAxB1a,EAAwBhD,UAAAC,OAAA,QAAAI,IAAAL,UAAA,GAAAA,UAAA,GAAb,aAChD+O,EAAS88C,EACf75C,EAAOw2C,QAAQ,aACX5jD,SAAUmK,EAAOskB,QACjBnb,KAAMwF,EAAQxF,KACdqgB,SAAU7a,EAAQ6a,eACpBl4B,EAAW,SAACkN,EAAQlM,GAClB,GAAe,OAAXkM,EAGF,OAFAjP,EAAA,EAAO+C,MAAM,+BAAgCA,QAC7C2B,OAAS3C,EAAWgB,GAGtB/C,EAAA,EAAOyC,KAAK,qBACZ,IAAMu2B,EAAMvM,GAAcziB,KAAM,oBAAqByG,WACrDub,EAAKK,cAAc2M,GACnBt0B,GAAS,KAiQT4qD,CAAc7+C,EAAQ2O,EAAS1a,GAOjC1E,EAAA,EAAOyC,KAAP,mBAAAjB,OAA+BiP,EAAOskB,YAmB1C/I,EAAKuN,YAAc,SAACg0B,GAAqC,IAAxB7oD,EAAwBhD,UAAAC,OAAA,QAAAI,IAAAL,UAAA,GAAAA,UAAA,GAAb,aACpC+O,EAAS88C,OAEAxrD,IAAX2R,IACEjD,IAAWA,EAAOyF,MACpBxC,EAAOxN,YAAY,cAAeuK,EAAOskB,QAAS,SAAC9lB,EAAQlM,GAC1C,OAAXkM,GAIJ0iB,EAAalhB,UACNA,EAAOmoB,OACdl0B,GAAS,IALPA,OAAS3C,EAAWgB,IAMrB,WACD/C,EAAA,EAAO+C,MAAM,gCAGf2B,OAAS3C,EACP,gEAKRiqB,EAAKujC,eAAiB,SAAC9+C,GAAgC,IAAxB/L,EAAwBhD,UAAAC,OAAA,QAAAI,IAAAL,UAAA,GAAAA,UAAA,GAAb,aACxC,OAAKgS,EAGAjD,OAILiD,EAAOxN,YAAY,iBAAkBuK,EAAOskB,QAAS,SAAC9lB,GAChDA,GACFvK,EAASuK,KALJ,kCAHA,mCAeX+c,EAAKwO,sBAAwB,SAACj8B,EAAMU,GAClC,IAAMuR,KAQN,OANAgoB,EAAc3wB,QAAQ,SAAC4I,QACU1O,IAA3B0O,EAAOwkB,iBAAiCxkB,EAAOwkB,gBAAgB12B,KAAUU,GAC3EuR,EAAQ7H,KAAK8H,KAIVD,GAGTwb,EAAKyO,kBAAoB,WACvB,OAAOzO,EAAKyM,aAAazsB,QAG3BggB,EAAKzU,GAAG,oBA/US,WACfyU,EAAKkC,MA/hBc,EAgiBnBxa,EAAOwa,MAAQxa,EAAO41C,aAGtB9wB,EAAc3wB,QAAQ,SAAC4I,EAAQ1K,GAG7B,GAFA4rB,EAAalhB,GACb+nB,EAAckG,OAAO34B,GACjB0K,IAAWA,EAAOmoB,OAAQ,CAC5B,IAAMD,EAAOlM,GAAcziB,KAAM,iBAAkByG,WACnDub,EAAKK,cAAcsM,MAGvBH,EAAgBqvB,IAGhBpvB,EAAa5wB,QAAQ,SAAC4I,EAAQ1K,GAC5B4rB,EAAalhB,GACbgoB,EAAaiG,OAAO34B,KAEtB0yB,EAAeovB,IAGf,IACEn0C,EAAO6L,aACP,MAAOxc,GACP/C,EAAA,EAAOmC,MAAM,+BAEfuR,OAAS3R,IAqTX2R,EAAO6D,GAAG,cAAe62C,EAAkB5uD,KAAK,KAjpBtB,SAACsI,GACzB,IAAI0wB,EAAclpB,IAAIxH,EAAI/B,IAA1B,CAGA,IAAM0K,EAASs6C,EAAO/+B,EAAK0H,YAAcsB,SAAUltB,EAAI/B,GACrDmQ,MAAOuiB,EAAanpB,IAAIxH,EAAI/B,IAC5BN,MAAOqC,EAAIrC,MACXN,MAAO2C,EAAI3C,MACXyU,KAAM9R,EAAI8R,KACVxI,MAAOtJ,EAAIsJ,MACXlM,OAAQ4C,EAAI5C,OACZgwB,WAAYptB,EAAIotB,aAClBzkB,EAAOmkB,KAAO5I,EACdwM,EAAc3d,IAAI/S,EAAI/B,GAAI0K,GAC1B,IAAMuoB,EAAMvM,GAAcziB,KAAM,eAAgByG,WAChDub,EAAKK,cAAc2M,OAmoBrBtlB,EAAO6D,GAAG,0BAA2B62C,EAAkB5uD,KAAK,KAhoB/B,SAACsI,GAC5B,IAAI2I,GAEFA,EADE3I,EAAImxB,OACGT,EAAc35B,IAAIiJ,EAAImxB,QAEtBR,EAAa55B,IAAIiJ,EAAIxB,YAGlBmK,EAAOunB,KAAOvnB,EAAOmoB,QACjCnoB,EAAOunB,GAAG7H,wBAAwBroB,EAAIoxB,SAwnB1CxlB,EAAO6D,GAAG,yBAA0B62C,EAAkB5uD,KAAK,KApnB/B,SAACsI,GAC3B,IAAI2I,EAASgoB,EAAa55B,IAAIiJ,EAAIxB,UAE9BmK,IAAWA,EAAOmoB,OACpBnoB,EAAOunB,GAAGn5B,IAAIiJ,EAAIqxB,YAAYhJ,wBAAwBroB,EAAI4kB,OAE1Djc,EAAS+nB,EAAc35B,IAAIiJ,EAAIxB,WAEnB0xB,IAtJwB,SAACu1B,EAAap0B,GACpD,IAAM1oB,EAAS88C,EACf98C,EAAOg7C,MAAMz/B,EAAKshC,uBAAuBoB,0BACvCd,EAAwBn9C,EAAQ0oB,KAClC1oB,EAAO8G,GAAG,QAASo2C,EAAyBnuD,KAAK,KAAMiR,IACvDA,EAAO8G,GAAG,kBAAmB,SAACyhB,GAC5Bh5B,EAAA,EAAOyC,KAAP,GAAAjB,OAAeiP,EAAOskB,QAAtB,2BAAAvzB,OAAuDw3B,EAAItM,IAAIwB,QACzC,WAAlB8K,EAAItM,IAAIwB,OACVu/B,EAAeh9C,KA+If++C,CAAgC/+C,EAAQ3I,EAAIqxB,YAE9C1oB,EAAOunB,GAAG7H,wBAAwBroB,EAAI4kB,SA0mB1ChZ,EAAO6D,GAAG,aAAc62C,EAAkB5uD,KAAK,KAtmBrB,SAACsI,IAhJY,SAACylD,EAAap0B,GACnD,IAAM1oB,EAAS88C,EACT7/C,EAAase,EAAKshC,uBAAuBoB,0BAC7Cd,EAAwBn9C,EAAQ0oB,IAElC1oB,EAAOg7C,MAAM/9C,EAAYyrB,GAEzB1oB,EAAO8G,GAAG,kBAAmB,SAACyhB,GAC5Bh5B,EAAA,EAAOyC,KAAP,GAAAjB,OAAeiP,EAAOskB,QAAtB,2BAAAvzB,OAAuDw3B,EAAItM,IAAIwB,QACzC,WAAlB8K,EAAItM,IAAIwB,QACVzd,EAAOunB,GAAGn5B,IAAIs6B,GAAYta,QAC1BpO,EAAOunB,GAAG0G,OAAOvF,MAGrBzrB,EAAWuiB,UAAUxf,GACrB/C,EAAWoiB,cAoIX2/B,CAFiBh3B,EAAa55B,IAAIiJ,EAAIxB,UAEGwB,EAAIqxB,eAomB/CzlB,EAAO6D,GAAG,eAAgB62C,EAAkB5uD,KAAK,KAjmBrB,SAACsI,GAC3B,IAAMuxB,EAAWZ,EAAa55B,IAAIiJ,EAAIxB,UAClC+yB,GAtIiC,SAACk0B,EAAap0B,GACnD,IAAM1oB,EAAS88C,OACGxrD,IAAd0O,EAAOunB,IAAqBvnB,EAAOunB,GAAG1oB,IAAI6pB,KAGnC1oB,EAAOunB,GAAGn5B,IAAIs6B,GACtBta,QACHpO,EAAOunB,GAAG0G,OAAOvF,IAgIfu2B,CAA+Br2B,EAAUvxB,EAAIqxB,eA+lBjDzlB,EAAO6D,GAAG,mBAAoB62C,EAAkB5uD,KAAK,KA3lBtB,SAACsI,GAG9B,GAFA9H,EAAA,EAAOyC,KAAK,qBAAsBqF,EAAIktB,SAAU,UAC5BltB,EAAI2O,QAAS,MAAO3O,EAAI6kB,WACxC7kB,EAAIktB,SAAU,CAChB,IAAMvkB,EAAS+nB,EAAc35B,IAAIiJ,EAAIktB,UACrC,GAAIvkB,IAAWA,EAAOmoB,OAAQ,CAC5B,IAAMI,EAAMvM,GAAcziB,KAAM,kBAC9ByG,SACAic,IAAK5kB,EAAI2O,QACTkW,UAAW7kB,EAAI6kB,YACjBlc,EAAO4b,cAAc2M,QAklB3BtlB,EAAO6D,GAAG,eAAgB62C,EAAkB5uD,KAAK,KA5kBtB,SAACsI,GAC1B,IAAM2I,EAAS+nB,EAAc35B,IAAIiJ,EAAI/B,IAC/BizB,EAAMvM,GAAcziB,KAAM,cAAe0iB,IAAK5kB,EAAI4kB,IAAKjc,WAC7DA,EAAO4b,cAAc2M,MA0kBvBtlB,EAAO6D,GAAG,0BAA2B62C,EAAkB5uD,KAAK,KAtkBtB,SAACsI,GACrC,IAAM2I,EAAS+nB,EAAc35B,IAAIiJ,EAAI/B,IAC/BizB,EAAMvM,GAAcziB,KAAM,2BAC9BqrB,MAAOvtB,EAAIutB,MACX5kB,WACFA,EAAO2kB,sBAAsBttB,EAAIutB,OACjC5kB,EAAO4b,cAAc2M,MAikBvBtlB,EAAO6D,GAAG,iBAAkB62C,EAAkB5uD,KAAK,KA7jBtB,SAACsI,GAC5B,IAAI2I,EAASgoB,EAAa55B,IAAIiJ,EAAI/B,IAClC,GAAI0K,EACFg9C,EAAeh9C,QAIjB,GADAA,EAAS+nB,EAAc35B,IAAIiJ,EAAI/B,IACnB,CACV4rB,EAAalhB,GACb+nB,EAAckG,OAAO52B,EAAI/B,IACzB,IAAMizB,EAAMvM,GAAcziB,KAAM,iBAAkByG,WAClDub,EAAKK,cAAc2M,OAmjBvBtlB,EAAO6D,GAAG,aAAc62C,EAAkB5uD,KAAK,KA9iBpB,WAEzB,GADAQ,EAAA,EAAOyC,KAAK,2DA3UO,IA4UfupB,EAAKkC,MAAwB,CAC/BluB,EAAA,EAAO+C,MAAM,iDACb,IAAMu2B,EAAgB9M,GAAYxiB,KAAM,oBACtCyM,QAAS,6BACXuV,EAAKK,cAAciN,OAyiBvB5lB,EAAO6D,GAAG,oBAAqB62C,EAAkB5uD,KAAK,KAriBlB,SAACsI,GACnC,IAAI2I,EACJ,GAAK3I,EAAIxB,SAAT,CAGA,IAAMmQ,EAAO,4BAAAjV,OAA+BsG,EAAIkC,KAAnC,KAAAxI,OAA2CsG,EAAIxB,SAA/C,KAAA9E,OAA2DwqB,EAAKkC,OAC7EluB,EAAA,EAAO+C,MAAM0T,GAEXhG,EADe,YAAb3I,EAAIkC,KACGyuB,EAAa55B,IAAIiJ,EAAIxB,UAErBkyB,EAAc35B,IAAIiJ,EAAIxB,UAEjCmnD,EAAeh9C,EAAQgG,OA0hBzB/C,EAAO6D,GAAG,QAAS62C,EAAkB5uD,KAAK,KAvhBpB,SAACgH,GACrBxG,EAAA,EAAO+C,MAAM,sCACb,IAAM82B,EAAarN,GAAYxiB,KAAM,aAAcyM,QAASjQ,IAC5DwlB,EAAKK,cAAcwN,MAshBd7N,WCz4BTpuB,EAAQ,IAGR,IAAM+xD,GACJz3B,KAAMi1B,EAAK3tD,KAAK,UAAMuC,OAAWA,OAAWA,GAC5CwqB,cACAC,YACAC,cACAgI,OAAQs2B,EAAOvrD,KAAK,UAAMuC,GAC1B/B,SAAA,GAaFkD,EAAA,QAVqB,WACnB,OADsCxB,UAAAC,OAAA,QAAAI,IAAAL,UAAA,GAAAA,UAAA,GAAR,KAE5B,IAAK,IACH,OAAOiuD,EACT,IAAK,IACL,QACE,OAAOC,EAAA","file":"erizo.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 33);\n","/* global console */\r\n\r\n/*\r\n * API to write logs based on traditional logging mechanisms: debug, trace, info, warning, error\r\n */\r\nconst Logger = (() => {\r\n  const DEBUG = 0;\r\n  const TRACE = 1;\r\n  const INFO = 2;\r\n  const WARNING = 3;\r\n  const ERROR = 4;\r\n  const NONE = 5;\r\n  let logPrefix = '';\r\n  let outputFunction;\r\n\r\n    // It sets the new log level. We can set it to NONE if we do not want to print logs\r\n  const setLogLevel = (level) => {\r\n    let targetLevel = level;\r\n    if (level > Logger.NONE) {\r\n      targetLevel = Logger.NONE;\r\n    } else if (level < Logger.DEBUG) {\r\n      targetLevel = Logger.DEBUG;\r\n    }\r\n    Logger.logLevel = targetLevel;\r\n  };\r\n\r\n  outputFunction = (args) => {\r\n    // eslint-disable-next-line no-console\r\n    console.log(...args);\r\n  };\r\n\r\n  const setOutputFunction = (newOutputFunction) => {\r\n    outputFunction = newOutputFunction;\r\n  };\r\n\r\n  const setLogPrefix = (newLogPrefix) => {\r\n    logPrefix = newLogPrefix;\r\n  };\r\n\r\n    // Generic function to print logs for a given level:\r\n    //  Logger.[DEBUG, TRACE, INFO, WARNING, ERROR]\r\n  const log = (level, ...args) => {\r\n    let out = logPrefix;\r\n    if (level < Logger.logLevel) {\r\n      return;\r\n    }\r\n    if (level === Logger.DEBUG) {\r\n      out = `${out}DEBUG`;\r\n    } else if (level === Logger.TRACE) {\r\n      out = `${out}TRACE`;\r\n    } else if (level === Logger.INFO) {\r\n      out = `${out}INFO`;\r\n    } else if (level === Logger.WARNING) {\r\n      out = `${out}WARNING`;\r\n    } else if (level === Logger.ERROR) {\r\n      out = `${out}ERROR`;\r\n    }\r\n    out = `${out}: `;\r\n    const tempArgs = [out].concat(args);\r\n    if (Logger.panel !== undefined) {\r\n      let tmp = '';\r\n      for (let idx = 0; idx < tempArgs.length; idx += 1) {\r\n        tmp += tempArgs[idx];\r\n      }\r\n      Logger.panel.value = `${Logger.panel.value}\\n${tmp}`;\r\n    } else {\r\n      outputFunction.apply(Logger, [tempArgs]);\r\n    }\r\n  };\r\n\r\n  const debug = (...args) => {\r\n    Logger.log(Logger.DEBUG, ...args);\r\n  };\r\n\r\n  const trace = (...args) => {\r\n    Logger.log(Logger.TRACE, ...args);\r\n  };\r\n\r\n  const info = (...args) => {\r\n    Logger.log(Logger.INFO, ...args);\r\n  };\r\n\r\n  const warning = (...args) => {\r\n    Logger.log(Logger.WARNING, ...args);\r\n  };\r\n\r\n  const error = (...args) => {\r\n    Logger.log(Logger.ERROR, ...args);\r\n  };\r\n\r\n  return {\r\n    DEBUG,\r\n    TRACE,\r\n    INFO,\r\n    WARNING,\r\n    ERROR,\r\n    NONE,\r\n    setLogLevel,\r\n    setOutputFunction,\r\n    setLogPrefix,\r\n    log,\r\n    debug,\r\n    trace,\r\n    info,\r\n    warning,\r\n    error,\r\n  };\r\n})();\r\n\r\nexport default Logger;\r\n","const SDPInfo = require('./SDPInfo');\r\nconst CandidateInfo = require('./CandidateInfo');\r\nconst CodecInfo = require('./CodecInfo');\r\nconst DTLSInfo = require('./DTLSInfo');\r\nconst ICEInfo = require('./ICEInfo');\r\nconst MediaInfo = require('./MediaInfo');\r\nconst Setup = require('./Setup');\r\nconst SourceGroupInfo = require('./SourceGroupInfo');\r\nconst SourceInfo = require('./SourceInfo');\r\nconst StreamInfo = require('./StreamInfo');\r\nconst TrackInfo = require('./TrackInfo');\r\nconst Direction = require('./Direction');\r\n\r\nmodule.exports = {\r\n  SDPInfo,\r\n  CandidateInfo,\r\n  CodecInfo,\r\n  DTLSInfo,\r\n  ICEInfo,\r\n  MediaInfo,\r\n  Setup,\r\n  SourceGroupInfo,\r\n  SourceInfo,\r\n  StreamInfo,\r\n  TrackInfo,\r\n  Direction,\r\n};\r\n","/* global navigator, window, chrome */\r\nimport Logger from './Logger';\r\n\r\nconst getBrowser = () => {\r\n  let browser = 'none';\r\n\r\n  if ((typeof module !== 'undefined' && module.exports)) {\r\n    browser = 'fake';\r\n  } else if (window.navigator.userAgent.match('Firefox') !== null) {\r\n    // Firefox\r\n    browser = 'mozilla';\r\n  } else if (window.navigator.userAgent.match('Chrome') !== null) {\r\n    browser = 'chrome-stable';\r\n    if (window.navigator.userAgent.match('Electron') !== null) {\r\n      browser = 'electron';\r\n    }\r\n  } else if (window.navigator.userAgent.match('Safari') !== null) {\r\n    browser = 'safari';\r\n  } else if (window.navigator.userAgent.match('AppleWebKit') !== null) {\r\n    browser = 'safari';\r\n  }\r\n  return browser;\r\n};\r\n\r\nconst GetUserMedia = (config, callback = () => {}, error = () => {}) => {\r\n  let screenConfig;\r\n\r\n  const getUserMedia = (userMediaConfig, cb, errorCb) => {\r\n    navigator.mediaDevices.getUserMedia(userMediaConfig).then(cb).catch(errorCb);\r\n  };\r\n\r\n  const configureScreensharing = () => {\r\n    Logger.debug('Screen access requested');\r\n    switch (getBrowser()) {\r\n      case 'electron' :\r\n        Logger.debug('Screen sharing in Electron');\r\n        screenConfig = {};\r\n        screenConfig.video = config.video || {};\r\n        screenConfig.video.mandatory = config.video.mandatory || {};\r\n        screenConfig.video.mandatory.chromeMediaSource = 'desktop';\r\n        screenConfig.video.mandatory.chromeMediaSourceId = config.desktopStreamId;\r\n        getUserMedia(screenConfig, callback, error);\r\n        break;\r\n      case 'mozilla':\r\n        Logger.debug('Screen sharing in Firefox');\r\n        screenConfig = {};\r\n        if (config.video !== undefined) {\r\n          screenConfig.video = config.video;\r\n          if (!screenConfig.video.mediaSource) {\r\n            screenConfig.video.mediaSource = 'window' || 'screen';\r\n          }\r\n        } else {\r\n          screenConfig = {\r\n            audio: config.audio,\r\n            video: { mediaSource: 'window' || 'screen' },\r\n          };\r\n        }\r\n        getUserMedia(screenConfig, callback, error);\r\n        break;\r\n\r\n      case 'chrome-stable':\r\n        Logger.debug('Screen sharing in Chrome');\r\n        screenConfig = {};\r\n        /*global App*/\r\n        if (App && App.isDesktop) {\r\n          /*global chrome*/\r\n          chrome.desktopCapture.chooseDesktopMedia(['screen', 'window'], function(id){\r\n              Logger.debug('opening desktopcapture stream with id', id);\r\n              getUserMedia({\r\n                video: {\r\n                  mandatory: {\r\n                      chromeMediaSourceId: id, \r\n                      chromeMediaSource:'desktop'\r\n                  }\r\n                }\r\n              }, callback, error);\r\n          });\r\n          /*\r\n          var gui = nw.require('nw.gui');\r\n          // if screens has not been initiated before, init it\r\n          if (gui.Screen.Init){ gui.Screen.Init(); }\r\n          gui.Screen.chooseDesktopMedia([\"screen\",\"window\"],\r\n              function(streamId) {\r\n                  var vidConstraint = {\r\n                      mandatory: {\r\n                          chromeMediaSource: 'desktop',\r\n                          chromeMediaSourceId: streamId,\r\n                          maxWidth: 1920,\r\n                          maxHeight: 1080\r\n                      },\r\n                      optional: []\r\n                  };\r\n                  getUserMedia({audio: false, video: vidConstraint}, callback, error);\r\n              });\r\n          */\r\n        } else if (config.desktopStreamId) {\r\n          screenConfig.video = config.video || { mandatory: {} };\r\n          screenConfig.video.mandatory = screenConfig.video.mandatory || {};\r\n          screenConfig.video.mandatory.chromeMediaSource = 'desktop';\r\n          screenConfig.video.mandatory.chromeMediaSourceId = config.desktopStreamId;\r\n          getUserMedia(screenConfig, callback, error);\r\n        } else {\r\n          // Default extensionId - this extension is only usable in our server,\r\n          // please make your own extension based on the code in\r\n          // erizo_controller/erizoClient/extras/chrome-extension\r\n          let extensionId = 'okeephmleflklcdebijnponpabbmmgeo';\r\n          if (config.extensionId) {\r\n            Logger.debug(`extensionId supplied, using ${config.extensionId}`);\r\n            extensionId = config.extensionId;\r\n          }\r\n          Logger.debug('Screen access on chrome stable, looking for extension');\r\n          try {\r\n            chrome.runtime.sendMessage(extensionId, { getStream: true },\r\n              (response) => {\r\n                if (response === undefined) {\r\n                  Logger.error('Access to screen denied');\r\n                  const theError = { code: 'Access to screen denied' };\r\n                  error(theError);\r\n                  return;\r\n                }\r\n                const theId = response.streamId;\r\n                if (config.video.mandatory !== undefined) {\r\n                  screenConfig.video = config.video || { mandatory: {} };\r\n                  screenConfig.video.mandatory.chromeMediaSource = 'desktop';\r\n                  screenConfig.video.mandatory.chromeMediaSourceId = theId;\r\n                } else {\r\n                  screenConfig = { video: { mandatory: { chromeMediaSource: 'desktop',\r\n                    chromeMediaSourceId: theId } } };\r\n                }\r\n                getUserMedia(screenConfig, callback, error);\r\n              });\r\n          } catch (e) {\r\n            Logger.debug('Screensharing plugin is not accessible ');\r\n            const theError = { code: 'no_plugin_present' };\r\n            error(theError);\r\n          }\r\n        }\r\n        break;\r\n      default:\r\n        Logger.error('This browser does not support ScreenSharing');\r\n    }\r\n  };\r\n\r\n  if (config.screen) {\r\n    configureScreensharing();\r\n  } else if (typeof module !== 'undefined' && module.exports) {\r\n    Logger.error('Video/audio streams not supported in erizofc yet');\r\n  } else {\r\n    Logger.debug('Calling getUserMedia with config', config);\r\n    getUserMedia(config, callback, error);\r\n  }\r\n};\r\n\r\n\r\nconst ConnectionHelpers = { GetUserMedia, getBrowser };\r\n\r\nexport default ConnectionHelpers;\r\n","const Enum = require('./Enum');\r\n\r\nconst DirectionWay = Enum('SEND', 'RECV');\r\n\r\nDirectionWay.byValue = direction => DirectionWay[direction.toUpperCase()];\r\n\r\nDirectionWay.toString = (direction) => {\r\n  switch (direction) {\r\n    case DirectionWay.SEND:\r\n      return 'send';\r\n    case DirectionWay.RECV:\r\n      return 'recv';\r\n    default:\r\n      return 'unknown';\r\n  }\r\n};\r\n\r\nDirectionWay.reverse = (direction) => {\r\n  switch (direction) {\r\n    case DirectionWay.SEND:\r\n      return DirectionWay.RECV;\r\n    case DirectionWay.RECV:\r\n      return DirectionWay.SEND;\r\n    default:\r\n      return DirectionWay.SEND;\r\n  }\r\n};\r\n\r\nmodule.exports = DirectionWay;\r\n","const Enum = require('./Enum');\r\n\r\nconst Setup = Enum('ACTIVE', 'PASSIVE', 'ACTPASS', 'INACTIVE');\r\n\r\nSetup.byValue = setup => Setup[setup.toUpperCase()];\r\n\r\nSetup.toString = (setup) => {\r\n  switch (setup) {\r\n    case Setup.ACTIVE:\r\n      return 'active';\r\n    case Setup.PASSIVE:\r\n      return 'passive';\r\n    case Setup.ACTPASS:\r\n      return 'actpass';\r\n    case Setup.INACTIVE:\r\n      return 'inactive';\r\n    default:\r\n      return null;\r\n  }\r\n};\r\n\r\nSetup.reverse = (setup) => {\r\n  switch (setup) {\r\n    case Setup.ACTIVE:\r\n      return Setup.PASSIVE;\r\n    case Setup.PASSIVE:\r\n      return Setup.ACTIVE;\r\n    case Setup.ACTPASS:\r\n      return Setup.PASSIVE;\r\n    case Setup.INACTIVE:\r\n      return Setup.INACTIVE;\r\n    default:\r\n      return Setup.ACTIVE;\r\n  }\r\n};\r\n\r\nmodule.exports = Setup;\r\n","\r\nfunction Enum(...args) {\r\n  if (!(this instanceof Enum)) {\r\n    return new (Function.prototype.bind.apply(Enum,\r\n      [null].concat(Array.prototype.slice.call(args))))();\r\n  }\r\n  Array.from(args).forEach((arg) => {\r\n    this[arg] = Symbol.for(`LICODE_SEMANTIC_SDP_${arg}`);\r\n  });\r\n}\r\n\r\nmodule.exports = Enum;\r\n","const Enum = require('./Enum');\r\n\r\nconst Direction = Enum('SENDRECV', 'SENDONLY', 'RECVONLY', 'INACTIVE');\r\n\r\nDirection.byValue = direction => Direction[direction.toUpperCase()];\r\n\r\n/**\r\n* Get Direction name\r\n* @memberOf Direction\r\n* @param {Direction} direction\r\n* @returns {String}\r\n*/\r\nDirection.toString = (direction) => {\r\n  switch (direction) {\r\n    case Direction.SENDRECV:\r\n      return 'sendrecv';\r\n    case Direction.SENDONLY:\r\n      return 'sendonly';\r\n    case Direction.RECVONLY:\r\n      return 'recvonly';\r\n    case Direction.INACTIVE:\r\n      return 'inactive';\r\n    default:\r\n      return 'unknown';\r\n  }\r\n};\r\n\r\nDirection.reverse = (direction) => {\r\n  switch (direction) {\r\n    case Direction.SENDRECV:\r\n      return Direction.SENDRECV;\r\n    case Direction.SENDONLY:\r\n      return Direction.RECVONLY;\r\n    case Direction.RECVONLY:\r\n      return Direction.SENDONLY;\r\n    case Direction.INACTIVE:\r\n      return Direction.INACTIVE;\r\n    default:\r\n      return Direction.SENDRECV;\r\n  }\r\n};\r\n\r\nmodule.exports = Direction;\r\n","var grammar = module.exports = {\n  v: [{\n    name: 'version',\n    reg: /^(\\d*)$/\n  }],\n  o: [{ //o=- 20518 0 IN IP4 203.0.113.1\n    // NB: sessionId will be a String in most cases because it is huge\n    name: 'origin',\n    reg: /^(\\S*) (\\d*) (\\d*) (\\S*) IP(\\d) (\\S*)/,\n    names: ['username', 'sessionId', 'sessionVersion', 'netType', 'ipVer', 'address'],\n    format: '%s %s %d %s IP%d %s'\n  }],\n  // default parsing of these only (though some of these feel outdated)\n  s: [{ name: 'name' }],\n  i: [{ name: 'description' }],\n  u: [{ name: 'uri' }],\n  e: [{ name: 'email' }],\n  p: [{ name: 'phone' }],\n  z: [{ name: 'timezones' }], // TODO: this one can actually be parsed properly..\n  r: [{ name: 'repeats' }],   // TODO: this one can also be parsed properly\n  //k: [{}], // outdated thing ignored\n  t: [{ //t=0 0\n    name: 'timing',\n    reg: /^(\\d*) (\\d*)/,\n    names: ['start', 'stop'],\n    format: '%d %d'\n  }],\n  c: [{ //c=IN IP4 10.47.197.26\n    name: 'connection',\n    reg: /^IN IP(\\d) (\\S*)/,\n    names: ['version', 'ip'],\n    format: 'IN IP%d %s'\n  }],\n  b: [{ //b=AS:4000\n    push: 'bandwidth',\n    reg: /^(TIAS|AS|CT|RR|RS):(\\d*)/,\n    names: ['type', 'limit'],\n    format: '%s:%s'\n  }],\n  m: [{ //m=video 51744 RTP/AVP 126 97 98 34 31\n    // NB: special - pushes to session\n    // TODO: rtp/fmtp should be filtered by the payloads found here?\n    reg: /^(\\w*) (\\d*) ([\\w\\/]*)(?: (.*))?/,\n    names: ['type', 'port', 'protocol', 'payloads'],\n    format: '%s %d %s %s'\n  }],\n  a: [\n    { //a=rtpmap:110 opus/48000/2\n      push: 'rtp',\n      reg: /^rtpmap:(\\d*) ([\\w\\-\\.]*)(?:\\s*\\/(\\d*)(?:\\s*\\/(\\S*))?)?/,\n      names: ['payload', 'codec', 'rate', 'encoding'],\n      format: function (o) {\n        return (o.encoding) ?\n          'rtpmap:%d %s/%s/%s':\n          o.rate ?\n          'rtpmap:%d %s/%s':\n          'rtpmap:%d %s';\n      }\n    },\n    { //a=fmtp:108 profile-level-id=24;object=23;bitrate=64000\n      //a=fmtp:111 minptime=10; useinbandfec=1\n      push: 'fmtp',\n      reg: /^fmtp:(\\d*) ([\\S| ]*)/,\n      names: ['payload', 'config'],\n      format: 'fmtp:%d %s'\n    },\n    { //a=control:streamid=0\n      name: 'control',\n      reg: /^control:(.*)/,\n      format: 'control:%s'\n    },\n    { //a=rtcp:65179 IN IP4 193.84.77.194\n      name: 'rtcp',\n      reg: /^rtcp:(\\d*)(?: (\\S*) IP(\\d) (\\S*))?/,\n      names: ['port', 'netType', 'ipVer', 'address'],\n      format: function (o) {\n        return (o.address != null) ?\n          'rtcp:%d %s IP%d %s':\n          'rtcp:%d';\n      }\n    },\n    { //a=rtcp-fb:98 trr-int 100\n      push: 'rtcpFbTrrInt',\n      reg: /^rtcp-fb:(\\*|\\d*) trr-int (\\d*)/,\n      names: ['payload', 'value'],\n      format: 'rtcp-fb:%d trr-int %d'\n    },\n    { //a=rtcp-fb:98 nack rpsi\n      push: 'rtcpFb',\n      reg: /^rtcp-fb:(\\*|\\d*) ([\\w-_]*)(?: ([\\w-_]*))?/,\n      names: ['payload', 'type', 'subtype'],\n      format: function (o) {\n        return (o.subtype != null) ?\n          'rtcp-fb:%s %s %s':\n          'rtcp-fb:%s %s';\n      }\n    },\n    { //a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n      //a=extmap:1/recvonly URI-gps-string\n      push: 'ext',\n      reg: /^extmap:(\\d+)(?:\\/(\\w+))? (\\S*)(?: (\\S*))?/,\n      names: ['value', 'direction', 'uri', 'config'],\n      format: function (o) {\n        return 'extmap:%d' + (o.direction ? '/%s' : '%v') + ' %s' + (o.config ? ' %s' : '');\n      }\n    },\n    { //a=crypto:1 AES_CM_128_HMAC_SHA1_80 inline:PS1uQCVeeCFCanVmcjkpPywjNWhcYD0mXXtxaVBR|2^20|1:32\n      push: 'crypto',\n      reg: /^crypto:(\\d*) ([\\w_]*) (\\S*)(?: (\\S*))?/,\n      names: ['id', 'suite', 'config', 'sessionConfig'],\n      format: function (o) {\n        return (o.sessionConfig != null) ?\n          'crypto:%d %s %s %s':\n          'crypto:%d %s %s';\n      }\n    },\n    { //a=setup:actpass\n      name: 'setup',\n      reg: /^setup:(\\w*)/,\n      format: 'setup:%s'\n    },\n    { //a=mid:1\n      name: 'mid',\n      reg: /^mid:([^\\s]*)/,\n      format: 'mid:%s'\n    },\n    { //a=msid:0c8b064d-d807-43b4-b434-f92a889d8587 98178685-d409-46e0-8e16-7ef0db0db64a\n      name: 'msid',\n      reg: /^msid:(.*)/,\n      format: 'msid:%s'\n    },\n    { //a=ptime:20\n      name: 'ptime',\n      reg: /^ptime:(\\d*)/,\n      format: 'ptime:%d'\n    },\n    { //a=maxptime:60\n      name: 'maxptime',\n      reg: /^maxptime:(\\d*)/,\n      format: 'maxptime:%d'\n    },\n    { //a=sendrecv\n      name: 'direction',\n      reg: /^(sendrecv|recvonly|sendonly|inactive)/\n    },\n    { //a=ice-lite\n      name: 'icelite',\n      reg: /^(ice-lite)/\n    },\n    { //a=ice-ufrag:F7gI\n      name: 'iceUfrag',\n      reg: /^ice-ufrag:(\\S*)/,\n      format: 'ice-ufrag:%s'\n    },\n    { //a=ice-pwd:x9cml/YzichV2+XlhiMu8g\n      name: 'icePwd',\n      reg: /^ice-pwd:(\\S*)/,\n      format: 'ice-pwd:%s'\n    },\n    { //a=fingerprint:SHA-1 00:11:22:33:44:55:66:77:88:99:AA:BB:CC:DD:EE:FF:00:11:22:33\n      name: 'fingerprint',\n      reg: /^fingerprint:(\\S*) (\\S*)/,\n      names: ['type', 'hash'],\n      format: 'fingerprint:%s %s'\n    },\n    { //a=candidate:0 1 UDP 2113667327 203.0.113.1 54400 typ host\n      //a=candidate:1162875081 1 udp 2113937151 192.168.34.75 60017 typ host generation 0 network-id 3 network-cost 10\n      //a=candidate:3289912957 2 udp 1845501695 193.84.77.194 60017 typ srflx raddr 192.168.34.75 rport 60017 generation 0 network-id 3 network-cost 10\n      //a=candidate:229815620 1 tcp 1518280447 192.168.150.19 60017 typ host tcptype active generation 0 network-id 3 network-cost 10\n      //a=candidate:3289912957 2 tcp 1845501695 193.84.77.194 60017 typ srflx raddr 192.168.34.75 rport 60017 tcptype passive generation 0 network-id 3 network-cost 10\n      push:'candidates',\n      reg: /^candidate:(\\S*) (\\d*) (\\S*) (\\d*) (\\S*) (\\d*) typ (\\S*)(?: raddr (\\S*) rport (\\d*))?(?: tcptype (\\S*))?(?: generation (\\d*))?(?: network-id (\\d*))?(?: network-cost (\\d*))?/,\n      names: ['foundation', 'component', 'transport', 'priority', 'ip', 'port', 'type', 'raddr', 'rport', 'tcptype', 'generation', 'network-id', 'network-cost'],\n      format: function (o) {\n        var str = 'candidate:%s %d %s %d %s %d typ %s';\n\n        str += (o.raddr != null) ? ' raddr %s rport %d' : '%v%v';\n\n        // NB: candidate has three optional chunks, so %void middles one if it's missing\n        str += (o.tcptype != null) ? ' tcptype %s' : '%v';\n\n        if (o.generation != null) {\n          str += ' generation %d';\n        }\n\n        str += (o['network-id'] != null) ? ' network-id %d' : '%v';\n        str += (o['network-cost'] != null) ? ' network-cost %d' : '%v';\n        return str;\n      }\n    },\n    { //a=end-of-candidates (keep after the candidates line for readability)\n      name: 'endOfCandidates',\n      reg: /^(end-of-candidates)/\n    },\n    { //a=remote-candidates:1 203.0.113.1 54400 2 203.0.113.1 54401 ...\n      name: 'remoteCandidates',\n      reg: /^remote-candidates:(.*)/,\n      format: 'remote-candidates:%s'\n    },\n    { //a=ice-options:google-ice\n      name: 'iceOptions',\n      reg: /^ice-options:(\\S*)/,\n      format: 'ice-options:%s'\n    },\n    { //a=ssrc:2566107569 cname:t9YU8M1UxTF8Y1A1\n      push: 'ssrcs',\n      reg: /^ssrc:(\\d*) ([\\w_-]*)(?::(.*))?/,\n      names: ['id', 'attribute', 'value'],\n      format: function (o) {\n        var str = 'ssrc:%d';\n        if (o.attribute != null) {\n          str += ' %s';\n          if (o.value != null) {\n            str += ':%s';\n          }\n        }\n        return str;\n      }\n    },\n    { //a=ssrc-group:FEC 1 2\n      //a=ssrc-group:FEC-FR 3004364195 1080772241\n      push: 'ssrcGroups',\n      // token-char = %x21 / %x23-27 / %x2A-2B / %x2D-2E / %x30-39 / %x41-5A / %x5E-7E\n      reg: /^ssrc-group:([\\x21\\x23\\x24\\x25\\x26\\x27\\x2A\\x2B\\x2D\\x2E\\w]*) (.*)/,\n      names: ['semantics', 'ssrcs'],\n      format: 'ssrc-group:%s %s'\n    },\n    { //a=msid-semantic: WMS Jvlam5X3SX1OP6pn20zWogvaKJz5Hjf9OnlV\n      name: 'msidSemantic',\n      reg: /^msid-semantic:\\s?(\\w*) (\\S*)/,\n      names: ['semantic', 'token'],\n      format: 'msid-semantic: %s %s' // space after ':' is not accidental\n    },\n    { //a=group:BUNDLE audio video\n      push: 'groups',\n      reg: /^group:(\\w*) (.*)/,\n      names: ['type', 'mids'],\n      format: 'group:%s %s'\n    },\n    { //a=rtcp-mux\n      name: 'rtcpMux',\n      reg: /^(rtcp-mux)/\n    },\n    { //a=rtcp-rsize\n      name: 'rtcpRsize',\n      reg: /^(rtcp-rsize)/\n    },\n    { //a=sctpmap:5000 webrtc-datachannel 1024\n      name: 'sctpmap',\n      reg: /^sctpmap:([\\w_\\/]*) (\\S*)(?: (\\S*))?/,\n      names: ['sctpmapNumber', 'app', 'maxMessageSize'],\n      format: function (o) {\n        return (o.maxMessageSize != null) ?\n          'sctpmap:%s %s %s' :\n          'sctpmap:%s %s';\n      }\n    },\n    { //a=x-google-flag:conference\n      name: 'xGoogleFlag',\n      reg: /^x-google-flag:([^\\s]*)/,\n      format: 'x-google-flag:%s'\n    },\n    { //a=rid:1 send max-width=1280;max-height=720;max-fps=30;depend=0\n      push: 'rids',\n      reg: /^rid:([\\d\\w]+) (\\w+)(?: ([\\S| ]*))?/,\n      names: ['id', 'direction', 'params'],\n      format: function (o) {\n        return (o.params) ? 'rid:%s %s %s' : 'rid:%s %s';\n      }\n    },\n    { //a=imageattr:97 send [x=800,y=640,sar=1.1,q=0.6] [x=480,y=320] recv [x=330,y=250]\n      //a=imageattr:* send [x=800,y=640] recv *\n      //a=imageattr:100 recv [x=320,y=240]\n      push: 'imageattrs',\n      reg: new RegExp(\n        //a=imageattr:97\n        '^imageattr:(\\\\d+|\\\\*)' +\n        //send [x=800,y=640,sar=1.1,q=0.6] [x=480,y=320]\n        '[\\\\s\\\\t]+(send|recv)[\\\\s\\\\t]+(\\\\*|\\\\[\\\\S+\\\\](?:[\\\\s\\\\t]+\\\\[\\\\S+\\\\])*)' +\n        //recv [x=330,y=250]\n        '(?:[\\\\s\\\\t]+(recv|send)[\\\\s\\\\t]+(\\\\*|\\\\[\\\\S+\\\\](?:[\\\\s\\\\t]+\\\\[\\\\S+\\\\])*))?'\n      ),\n      names: ['pt', 'dir1', 'attrs1', 'dir2', 'attrs2'],\n      format: function (o) {\n        return 'imageattr:%s %s %s' + (o.dir2 ? ' %s %s' : '');\n      }\n    },\n    { //a=simulcast:send 1,2,3;~4,~5 recv 6;~7,~8\n      //a=simulcast:recv 1;4,5 send 6;7\n      name: 'simulcast',\n      reg: new RegExp(\n        //a=simulcast:\n        '^simulcast:' +\n        //send 1,2,3;~4,~5\n        '(send|recv) ([a-zA-Z0-9\\\\-_~;,]+)' +\n        //space + recv 6;~7,~8\n        '(?:\\\\s?(send|recv) ([a-zA-Z0-9\\\\-_~;,]+))?' +\n        //end\n        '$'\n      ),\n      names: ['dir1', 'list1', 'dir2', 'list2'],\n      format: function (o) {\n        return 'simulcast:%s %s' + (o.dir2 ? ' %s %s' : '');\n      }\n    },\n    { //Old simulcast draft 03 (implemented by Firefox)\n      //  https://tools.ietf.org/html/draft-ietf-mmusic-sdp-simulcast-03\n      //a=simulcast: recv pt=97;98 send pt=97\n      //a=simulcast: send rid=5;6;7 paused=6,7\n      name: 'simulcast_03',\n      reg: /^simulcast:[\\s\\t]+([\\S+\\s\\t]+)$/,\n      names: ['value'],\n      format: 'simulcast: %s'\n    },\n    {\n      //a=framerate:25\n      //a=framerate:29.97\n      name: 'framerate',\n      reg: /^framerate:(\\d+(?:$|\\.\\d+))/,\n      format: 'framerate:%s'\n    },\n    { // RFC4570\n      //a=source-filter: incl IN IP4 239.5.2.31 10.1.15.5\n      name: 'sourceFilter',\n      reg: /^source-filter: *(excl|incl) (\\S*) (IP4|IP6|\\*) (\\S*) (.*)/,\n      names: ['filterMode', 'netType', 'addressTypes', 'destAddress', 'srcList'],\n      format: 'source-filter: %s %s %s %s %s'\n    },\n    { // any a= that we don't understand is kepts verbatim on media.invalid\n      push: 'invalid',\n      names: ['value']\n    }\n  ]\n};\n\n// set sensible defaults to avoid polluting the grammar with boring details\nObject.keys(grammar).forEach(function (key) {\n  var objs = grammar[key];\n  objs.forEach(function (obj) {\n    if (!obj.reg) {\n      obj.reg = /(.*)/;\n    }\n    if (!obj.format) {\n      obj.format = '%s';\n    }\n  });\n});\n","class CandidateInfo {\r\n  constructor(foundation, componentId, transport, priority, address, port,\r\n    type, generation, relAddr, relPort) {\r\n    this.foundation = foundation;\r\n    this.componentId = componentId;\r\n    this.transport = transport;\r\n    this.priority = priority;\r\n    this.address = address;\r\n    this.port = port;\r\n    this.type = type;\r\n    this.generation = generation;\r\n    this.relAddr = relAddr;\r\n    this.relPort = relPort;\r\n  }\r\n\r\n  clone() {\r\n    return new CandidateInfo(this.foundation, this.componentId, this.transport, this.priority,\r\n              this.address, this.port, this.type, this.generation, this.relAddr, this.relPort);\r\n  }\r\n\r\n  plain() {\r\n    const plain = {\r\n      foundation: this.foundation,\r\n      componentId: this.componentId,\r\n      transport: this.transport,\r\n      priority: this.priority,\r\n      address: this.address,\r\n      port: this.port,\r\n      type: this.type,\r\n      generation: this.generation,\r\n    };\r\n    if (this.relAddr) plain.relAddr = this.relAddr;\r\n    if (this.relPort) plain.relPort = this.relPort;\r\n    return plain;\r\n  }\r\n\r\n  getFoundation() {\r\n    return this.foundation;\r\n  }\r\n\r\n  getComponentId() {\r\n    return this.componentId;\r\n  }\r\n\r\n  getTransport() {\r\n    return this.transport;\r\n  }\r\n\r\n  getPriority() {\r\n    return this.priority;\r\n  }\r\n\r\n  getAddress() {\r\n    return this.address;\r\n  }\r\n\r\n  getPort() {\r\n    return this.port;\r\n  }\r\n\r\n  getType() {\r\n    return this.type;\r\n  }\r\n\r\n  getGeneration() {\r\n    return this.generation;\r\n  }\r\n\r\n  getRelAddr() {\r\n    return this.relAddr;\r\n  }\r\n\r\n  getRelPort() {\r\n    return this.relPort;\r\n  }\r\n\r\n}\r\n\r\nmodule.exports = CandidateInfo;\r\n","class CodecInfo {\r\n\r\n  constructor(codec, type, rate, encoding, params, feedback) {\r\n    this.codec = codec;\r\n    this.type = type;\r\n    this.rate = rate;\r\n    this.encoding = encoding;\r\n    this.params = params || {};\r\n    this.feedback = feedback || [];\r\n  }\r\n\r\n  clone() {\r\n    const cloned = new CodecInfo(this.codec, this.type, this.rate, this.encoding,\r\n      this.params, this.feedback);\r\n    if (this.rtx) {\r\n      cloned.setRTX(this.rtx);\r\n    }\r\n    return cloned;\r\n  }\r\n\r\n\r\n  plain() {\r\n    return {\r\n      codec: this.codec,\r\n      type: this.type,\r\n      rate: this.rate,\r\n      encoding: this.encoding,\r\n      params: this.params,\r\n      feedback: this.feedback,\r\n    };\r\n  }\r\n\r\n  setRTX(rtx) {\r\n    this.rtx = rtx;\r\n  }\r\n\r\n  getType() {\r\n    return this.type;\r\n  }\r\n\r\n  setType(type) {\r\n    this.type = type;\r\n  }\r\n\r\n  getCodec() {\r\n    return this.codec;\r\n  }\r\n\r\n  getParams() {\r\n    return this.params;\r\n  }\r\n\r\n  setParam(paramName, value) {\r\n    this.params[paramName] = value;\r\n  }\r\n\r\n  hasRTX() {\r\n    return this.rtx;\r\n  }\r\n\r\n  getRTX() {\r\n    return this.rtx;\r\n  }\r\n\r\n  getRate() {\r\n    return this.rate;\r\n  }\r\n\r\n  getEncoding() {\r\n    return this.encoding;\r\n  }\r\n\r\n  getFeedback() {\r\n    return this.feedback;\r\n  }\r\n}\r\n\r\nCodecInfo.mapFromNames = (names, rtx) => {\r\n  const codecs = new Map();\r\n\r\n  let dyn = 96;\r\n  names.forEach((nameWithUpperCases) => {\r\n    let pt;\r\n    const name = nameWithUpperCases.toLowerCase();\r\n    if (name === 'pcmu') pt = 0;\r\n    else if (name === 'pcma') pt = 8;\r\n    else {\r\n      dyn += 1;\r\n      pt = dyn;\r\n    }\r\n    const codec = new CodecInfo(name, pt);\r\n    if (rtx && name !== 'ulpfec' && name !== 'flexfec-03' && name !== 'red') {\r\n      dyn += 1;\r\n      codec.setRTX(dyn);\r\n    }\r\n    codecs.set(codec.getCodec().toLowerCase(), codec);\r\n  });\r\n  return codecs;\r\n};\r\n\r\nmodule.exports = CodecInfo;\r\n","const Setup = require('./Setup');\r\n\r\nclass DTLSInfo {\r\n  constructor(setup, hash, fingerprint) {\r\n    this.setup = setup;\r\n    this.hash = hash;\r\n    this.fingerprint = fingerprint;\r\n  }\r\n\r\n  clone() {\r\n    return new DTLSInfo(this.setup, this.hash, this.fingerprint);\r\n  }\r\n\r\n  plain() {\r\n    return {\r\n      setup: Setup.toString(this.setup),\r\n      hash: this.hash,\r\n      fingerprint: this.fingerprint,\r\n    };\r\n  }\r\n\r\n  getFingerprint() {\r\n    return this.fingerprint;\r\n  }\r\n\r\n  getHash() {\r\n    return this.hash;\r\n  }\r\n\r\n  getSetup() {\r\n    return this.setup;\r\n  }\r\n\r\n  setSetup(setup) {\r\n    this.setup = setup;\r\n  }\r\n}\r\n\r\nmodule.exports = DTLSInfo;\r\n","function randomIntInc(low, high) {\r\n  const range = (high - low) + 1;\r\n  const random = Math.random() * range;\r\n  return Math.floor(random + low);\r\n}\r\n\r\nfunction randomBytes(size) {\r\n  const numbers = new Uint8Array(size);\r\n\r\n  for (let i = 0; i < numbers.length; i += 1) {\r\n    numbers[i] = randomIntInc(0, 255);\r\n  }\r\n  return numbers;\r\n}\r\n\r\nfunction buf2hex(buffer) {\r\n  return Array.prototype.map.call(new Uint8Array(buffer), (x) => {\r\n    const hexValue = x.toString(16);\r\n    return `00${hexValue}`.slice(-2);\r\n  }).join('');\r\n}\r\n\r\nclass ICEInfo {\r\n  constructor(ufrag, pwd, opts) {\r\n    this.ufrag = ufrag;\r\n    this.pwd = pwd;\r\n    this.opts = opts;\r\n    this.lite = false;\r\n    this.endOfCandidates = false;\r\n  }\r\n\r\n  clone() {\r\n    const cloned = new ICEInfo(this.ufrag, this.pwd, this.opts);\r\n    cloned.setLite(this.lite);\r\n    cloned.setEndOfCandidates(this.endOfCandidates);\r\n    return cloned;\r\n  }\r\n\r\n  plain() {\r\n    const plain = {\r\n      ufrag: this.ufrag,\r\n      pwd: this.pwd,\r\n    };\r\n    if (this.lite) plain.lite = this.lite;\r\n    if (this.endOfCandidates) plain.endOfCandidates = this.endOfCandidates;\r\n    return plain;\r\n  }\r\n\r\n  getUfrag() {\r\n    return this.ufrag;\r\n  }\r\n\r\n  getPwd() {\r\n    return this.pwd;\r\n  }\r\n\r\n  isLite() {\r\n    return this.lite;\r\n  }\r\n\r\n  getOpts() {\r\n    return this.opts;\r\n  }\r\n\r\n  setLite(lite) {\r\n    this.lite = lite;\r\n  }\r\n\r\n  isEndOfCandidates() {\r\n    return this.endOfCandidates;\r\n  }\r\n\r\n  setEndOfCandidates(endOfCandidates) {\r\n    this.endOfCandidates = endOfCandidates;\r\n  }\r\n\r\n}\r\n\r\nICEInfo.generate = () => {\r\n  const info = new ICEInfo();\r\n  const frag = randomBytes(8);\r\n  const pwd = randomBytes(24);\r\n  info.ufrag = buf2hex(frag);\r\n  info.pwd = buf2hex(pwd);\r\n  return info;\r\n};\r\n\r\nmodule.exports = ICEInfo;\r\n","const SimulcastInfo = require('./SimulcastInfo');\r\nconst Direction = require('./Direction');\r\nconst DirectionWay = require('./DirectionWay');\r\n\r\nclass MediaInfo {\r\n  constructor(id, port, type) {\r\n    this.id = id;\r\n    this.type = type;\r\n    this.port = port;\r\n    this.direction = Direction.SENDRECV;\r\n    this.extensions = new Map();\r\n    this.codecs = new Map();\r\n    this.rids = new Map();\r\n    this.simulcast = null;\r\n    this.simulcast_03 = null;\r\n    this.bitrate = 0;\r\n    this.ice = null;\r\n    this.dtls = null;\r\n    this.connection = null;\r\n    this.candidates = [];\r\n  }\r\n\r\n  clone() {\r\n    const cloned = new MediaInfo(this.id, this.port, this.type);\r\n    cloned.setDirection(this.direction);\r\n    cloned.setBitrate(this.bitrate);\r\n    cloned.setConnection(this.connection);\r\n    this.codecs.forEach((codec) => {\r\n      cloned.addCodec(codec.clone());\r\n    });\r\n    this.extensions.forEach((extension, id) => {\r\n      cloned.addExtension(id, extension);\r\n    });\r\n    this.rids.forEach((rid, id) => {\r\n      cloned.addRID(id, rid.clone());\r\n    });\r\n    if (this.simulcast) {\r\n      cloned.setSimulcast(this.simulcast.clone());\r\n    }\r\n    if (this.xGoogleFlag) {\r\n      cloned.setXGoogleFlag(this.xGoogleFlag);\r\n    }\r\n    if (this.ice) {\r\n      cloned.setICE(this.ice.clone());\r\n    }\r\n    if (this.dtls) {\r\n      cloned.setDTLS(this.dtls.clone());\r\n    }\r\n    this.candidates.forEach((candidate) => {\r\n      cloned.addCandidate(candidate.clone());\r\n    });\r\n    if (this.setup) {\r\n      cloned.setSetup(this.setup);\r\n    }\r\n    return cloned;\r\n  }\r\n\r\n  plain() {\r\n    const plain = {\r\n      id: this.id,\r\n      port: this.port,\r\n      type: this.type,\r\n      connection: this.connection,\r\n      direction: Direction.toString(this.direction),\r\n      xGoogleFlag: this.xGoogleFlag,\r\n      extensions: {},\r\n      rids: [],\r\n      codecs: [],\r\n      candidates: [],\r\n    };\r\n    if (this.bitrate) {\r\n      plain.bitrate = this.bitrate;\r\n    }\r\n    this.codecs.forEach((codec) => {\r\n      plain.codecs.push(codec.plain());\r\n    });\r\n    this.extensions.forEach((extension) => {\r\n      plain.extensions.push(extension.plain());\r\n    });\r\n    this.rids.forEach((rid) => {\r\n      plain.rids.push(rid.plain());\r\n    });\r\n    if (this.simulcast) {\r\n      plain.simulcast = this.simulcast.plain();\r\n    }\r\n    this.candidates.forEach((candidate) => {\r\n      plain.candidates.push(candidate.plain());\r\n    });\r\n    plain.ice = this.ice && this.ice.plain();\r\n    plain.dtls = this.dtls && this.dtls.plain();\r\n    return plain;\r\n  }\r\n\r\n  getType() {\r\n    return this.type;\r\n  }\r\n\r\n  getPort() {\r\n    return this.port;\r\n  }\r\n\r\n  getId() {\r\n    return this.id;\r\n  }\r\n\r\n  addExtension(id, name) {\r\n    this.extensions.set(id, name);\r\n  }\r\n\r\n  addRID(ridInfo) {\r\n    this.rids.set(ridInfo.getId(), ridInfo);\r\n  }\r\n\r\n  addCodec(codecInfo) {\r\n    this.codecs.set(codecInfo.getType(), codecInfo);\r\n  }\r\n\r\n  getCodecForType(type) {\r\n    return this.codecs.get(type);\r\n  }\r\n\r\n  getCodec(codec) {\r\n    let result;\r\n    this.codecs.forEach((info) => {\r\n      if (info.getCodec().toLowerCase() === codec.toLowerCase()) {\r\n        result = info;\r\n      }\r\n    });\r\n    return result;\r\n  }\r\n\r\n  hasCodec(codec) {\r\n    return this.getCodec(codec) !== null;\r\n  }\r\n\r\n  getCodecs() {\r\n    return this.codecs;\r\n  }\r\n\r\n  getExtensions() {\r\n    return this.extensions;\r\n  }\r\n\r\n  getRIDs() {\r\n    return this.rids;\r\n  }\r\n\r\n  getRID(id) {\r\n    return this.rids.get(id);\r\n  }\r\n\r\n  getBitrate() {\r\n    return this.bitrate;\r\n  }\r\n\r\n  setBitrate(bitrate) {\r\n    this.bitrate = bitrate;\r\n  }\r\n\r\n  getDirection() {\r\n    return this.direction;\r\n  }\r\n\r\n  setDirection(direction) {\r\n    this.direction = direction;\r\n  }\r\n\r\n  getDTLS() {\r\n    return this.dtls;\r\n  }\r\n\r\n  setDTLS(dtlsInfo) {\r\n    this.dtls = dtlsInfo;\r\n  }\r\n\r\n  getICE() {\r\n    return this.ice;\r\n  }\r\n\r\n  setICE(iceInfo) {\r\n    this.ice = iceInfo;\r\n  }\r\n\r\n  addCandidate(candidate) {\r\n    this.candidates.push(candidate);\r\n  }\r\n\r\n  addCandidates(candidates) {\r\n    candidates.forEach((candidate) => {\r\n      this.addCandidate(candidate);\r\n    });\r\n  }\r\n\r\n  getCandidates() {\r\n    return this.candidates;\r\n  }\r\n\r\n  setXGoogleFlag(value) {\r\n    this.xGoogleFlag = value;\r\n  }\r\n\r\n  getXGoogleFlag() {\r\n    return this.xGoogleFlag;\r\n  }\r\n\r\n  getConnection() {\r\n    return this.connection;\r\n  }\r\n\r\n  setConnection(connection) {\r\n    this.connection = connection;\r\n  }\r\n\r\n  answer(supported) {\r\n    const answer = new MediaInfo(this.id, this.port, this.type);\r\n\r\n    answer.setDirection(Direction.reverse(this.direction));\r\n\r\n    if (supported.codecs) {\r\n      this.codecs.forEach((codec) => {\r\n        if (supported.codecs.has(codec.getCodec().toLowerCase())) {\r\n          const cloned = supported.codecs.get(codec.getCodec().toLowerCase()).clone();\r\n          cloned.setType(codec.getType());\r\n          if (cloned.hasRTX()) {\r\n            cloned.setRTX(codec.getRTX());\r\n          }\r\n          answer.addCodec(cloned);\r\n        }\r\n      });\r\n    }\r\n\r\n    this.extensions.forEach((extension, id) => {\r\n      if (supported.extensions.has(id)) {\r\n        answer.addExtension(id, extension);\r\n      }\r\n    });\r\n\r\n    if (supported.simulcast && this.simulcast) {\r\n      const simulcast = new SimulcastInfo();\r\n      const sendEntries = this.simulcast.getSimulcastStreams(DirectionWay.SEND);\r\n      if (sendEntries) {\r\n        sendEntries.forEach((sendStreams) => {\r\n          const alternatives = [];\r\n          sendStreams.forEach((sendStream) => {\r\n            alternatives.push(sendStream.clone());\r\n          });\r\n          simulcast.addSimulcastAlternativeStreams(DirectionWay.RECV, alternatives);\r\n        });\r\n      }\r\n\r\n      const recvEntries = this.simulcast.getSimulcastStreams(DirectionWay.RECV);\r\n      if (recvEntries) {\r\n        recvEntries.forEach((recvStreams) => {\r\n          const alternatives = [];\r\n          recvStreams.forEach((recvStream) => {\r\n            alternatives.push(recvStream.clone());\r\n          });\r\n          simulcast.addSimulcastAlternativeStreams(DirectionWay.SEND, alternatives);\r\n        });\r\n      }\r\n\r\n      this.rids.forEach((rid) => {\r\n        const reversed = rid.clone();\r\n        reversed.setDirection(DirectionWay.reverse(rid.getDirection()));\r\n        answer.addRID(reversed);\r\n      });\r\n\r\n      answer.setSimulcast(simulcast);\r\n    }\r\n    return answer;\r\n  }\r\n\r\n  getSimulcast() {\r\n    return this.simulcast;\r\n  }\r\n\r\n  setSimulcast(simulcast) {\r\n    this.simulcast = simulcast;\r\n  }\r\n\r\n  getSimulcast03() {\r\n    return this.simulcast_03;\r\n  }\r\n\r\n  setSimulcast03(simulcast) {\r\n    this.simulcast_03 = simulcast;\r\n  }\r\n\r\n  getSetup() {\r\n    return this.setup;\r\n  }\r\n\r\n  setSetup(setup) {\r\n    this.setup = setup;\r\n  }\r\n}\r\n\r\nmodule.exports = MediaInfo;\r\n","const DirectionWay = require('./DirectionWay');\r\n\r\nclass SimulcastInfo {\r\n  constructor() {\r\n    this.send = [];\r\n    this.recv = [];\r\n    this.plainString = null;\r\n  }\r\n\r\n  clone() {\r\n    const cloned = new SimulcastInfo();\r\n    this.send.forEach((sendStreams) => {\r\n      const alternatives = [];\r\n      sendStreams.forEach((sendStream) => {\r\n        alternatives.push(sendStream.clone());\r\n      });\r\n      cloned.addSimulcastAlternativeStreams(alternatives);\r\n    });\r\n    this.recv.forEach((recvStreams) => {\r\n      const alternatives = [];\r\n      recvStreams.forEach((recvStream) => {\r\n        alternatives.push(recvStream.clone());\r\n      });\r\n      cloned.addSimulcastAlternativeStreams(alternatives);\r\n    });\r\n    return cloned;\r\n  }\r\n\r\n  plain() {\r\n    const plain = {\r\n      send: [],\r\n      recv: [],\r\n    };\r\n    this.send.forEach((sendStreams) => {\r\n      const alternatives = [];\r\n      sendStreams.forEach((sendStream) => {\r\n        alternatives.push(sendStream.plain());\r\n      });\r\n      plain.send.push(alternatives);\r\n    });\r\n    this.recv.forEach((recvStreams) => {\r\n      const alternatives = [];\r\n      recvStreams.forEach((recvStream) => {\r\n        alternatives.push(recvStream.plain());\r\n      });\r\n      plain.recv.push(alternatives);\r\n    });\r\n    return plain;\r\n  }\r\n\r\n  addSimulcastAlternativeStreams(direction, streams) {\r\n    if (direction === DirectionWay.SEND) {\r\n      return this.send.push(streams);\r\n    }\r\n    return this.recv.push(streams);\r\n  }\r\n\r\n  addSimulcastStream(direction, stream) {\r\n    if (direction === DirectionWay.SEND) {\r\n      return this.send.push([stream]);\r\n    }\r\n    return this.recv.push([stream]);\r\n  }\r\n\r\n  getSimulcastStreams(direction) {\r\n    if (direction === DirectionWay.SEND) {\r\n      return this.send;\r\n    }\r\n    return this.recv;\r\n  }\r\n\r\n  setSimulcastPlainString(string) {\r\n    this.plainString = string;\r\n  }\r\n\r\n  getSimulcastPlainString() {\r\n    return this.plainString;\r\n  }\r\n}\r\n\r\nmodule.exports = SimulcastInfo;\r\n","class SourceGroupInfo {\r\n  constructor(semantics, ssrcs) {\r\n    this.semantics = semantics;\r\n    this.ssrcs = [];\r\n    ssrcs.forEach((ssrc) => {\r\n      this.ssrcs.push(parseInt(ssrc, 10));\r\n    });\r\n  }\r\n\r\n  clone() {\r\n    return new SourceGroupInfo(this.semantics, this.ssrcs);\r\n  }\r\n\r\n  plain() {\r\n    const plain = {\r\n      semantics: this.semantics,\r\n      ssrcs: [],\r\n    };\r\n    plain.ssrcs = this.ssrcs;\r\n    return plain;\r\n  }\r\n\r\n  getSemantics() {\r\n    return this.semantics;\r\n  }\r\n\r\n  getSSRCs() {\r\n    return this.ssrcs;\r\n  }\r\n}\r\n\r\nmodule.exports = SourceGroupInfo;\r\n","class SourceInfo {\r\n  constructor(ssrc) {\r\n    this.ssrc = ssrc;\r\n  }\r\n\r\n  clone() {\r\n    const clone = new SourceInfo(this.ssrc);\r\n    clone.setCName(this.cname);\r\n    clone.setStreamId(this.streamId);\r\n    this.setTrackId(this.trackId);\r\n  }\r\n\r\n\r\n  plain() {\r\n    const plain = {\r\n      ssrc: this.ssrc,\r\n    };\r\n    if (this.cname) plain.cname = this.cname;\r\n    if (this.label) plain.label = this.label;\r\n    if (this.mslabel) plain.mslabel = this.mslabel;\r\n    if (this.streamId) plain.streamId = this.streamId;\r\n    if (this.trackId) plain.trackid = this.trackId;\r\n    return plain;\r\n  }\r\n\r\n  getCName() {\r\n    return this.cname;\r\n  }\r\n\r\n  setCName(cname) {\r\n    this.cname = cname;\r\n  }\r\n\r\n  getStreamId() {\r\n    return this.streamId;\r\n  }\r\n\r\n  setStreamId(streamId) {\r\n    this.streamId = streamId;\r\n  }\r\n\r\n  getTrackId() {\r\n    return this.trackId;\r\n  }\r\n\r\n  setTrackId(trackId) {\r\n    this.trackId = trackId;\r\n  }\r\n\r\n  getMSLabel() {\r\n    return this.mslabel;\r\n  }\r\n\r\n  setMSLabel(mslabel) {\r\n    this.mslabel = mslabel;\r\n  }\r\n\r\n  getLabel() {\r\n    return this.label;\r\n  }\r\n\r\n  setLabel(label) {\r\n    this.label = label;\r\n  }\r\n\r\n  getSSRC() {\r\n    return this.ssrc;\r\n  }\r\n}\r\n\r\nmodule.exports = SourceInfo;\r\n","class StreamInfo {\r\n  constructor(id) {\r\n    this.id = id;\r\n    this.tracks = new Map();\r\n  }\r\n\r\n  clone() {\r\n    const cloned = new StreamInfo(this.id);\r\n    this.tracks.forEach((track) => {\r\n      cloned.addTrack(track.clone());\r\n    });\r\n    return cloned;\r\n  }\r\n\r\n  plain() {\r\n    const plain = {\r\n      id: this.id,\r\n      tracks: [],\r\n    };\r\n    this.tracks.forEach((track) => {\r\n      plain.tracks.push(track.plain());\r\n    });\r\n    return plain;\r\n  }\r\n\r\n  getId() {\r\n    return this.id;\r\n  }\r\n\r\n  addTrack(track) {\r\n    this.tracks.set(track.getId(), track);\r\n  }\r\n\r\n  getFirstTrack(media) {\r\n    let result;\r\n    this.tracks.forEach((track) => {\r\n      if (track.getMedia().toLowerCase() === media.toLowerCase()) {\r\n        result = track;\r\n      }\r\n    });\r\n    return result;\r\n  }\r\n\r\n  getTracks() {\r\n    return this.tracks;\r\n  }\r\n\r\n  removeAllTracks() {\r\n    this.tracks.clear();\r\n  }\r\n\r\n  getTrack(trackId) {\r\n    return this.tracks.get(trackId);\r\n  }\r\n}\r\n\r\nmodule.exports = StreamInfo;\r\n","class TrackInfo {\r\n  constructor(media, id) {\r\n    this.media = media;\r\n    this.id = id;\r\n    this.ssrcs = [];\r\n    this.groups = [];\r\n    this.encodings = [];\r\n  }\r\n\r\n  clone() {\r\n    const cloned = new TrackInfo(this.media, this.id);\r\n    if (this.mediaId) {\r\n      cloned.setMediaId(this.mediaId);\r\n    }\r\n    this.ssrcs.forEach((ssrc) => {\r\n      cloned.addSSRC(ssrc);\r\n    });\r\n    this.groups.forEach((group) => {\r\n      cloned.addSourceGroup(group.clone());\r\n    });\r\n    this.encodings.forEach((encoding) => {\r\n      const alternatives = [];\r\n      encoding.forEach((entry) => {\r\n        alternatives.push(entry.cloned());\r\n      });\r\n      cloned.addAlternativeEncoding(alternatives);\r\n    });\r\n    return cloned;\r\n  }\r\n\r\n  plain() {\r\n    const plain = {\r\n      media: this.media,\r\n      id: this.id,\r\n      ssrcs: [],\r\n      groups: [],\r\n      encodings: [],\r\n    };\r\n    if (this.mediaId) {\r\n      plain.mediaId = this.mediaId;\r\n    }\r\n    this.ssrcs.forEach((ssrc) => {\r\n      plain.ssrcs.push(ssrc);\r\n    });\r\n    this.groups.forEach((group) => {\r\n      plain.groups.push(group.plain());\r\n    });\r\n    this.encodings.forEach((encoding) => {\r\n      const alternatives = [];\r\n      encoding.forEach((entry) => {\r\n        alternatives.push(entry.plain());\r\n      });\r\n      plain.encodings.push(alternatives);\r\n    });\r\n    return plain;\r\n  }\r\n\r\n  getMedia() {\r\n    return this.media;\r\n  }\r\n\r\n  setMediaId(mediaId) {\r\n    this.mediaId = mediaId;\r\n  }\r\n\r\n  getMediaId() {\r\n    return this.mediaId;\r\n  }\r\n\r\n  getId() {\r\n    return this.id;\r\n  }\r\n\r\n  addSSRC(ssrc) {\r\n    this.ssrcs.push(ssrc);\r\n  }\r\n\r\n  getSSRCs() {\r\n    return this.ssrcs;\r\n  }\r\n\r\n  addSourceGroup(group) {\r\n    this.groups.push(group);\r\n  }\r\n\r\n  getSourceGroup(schematics) {\r\n    let result;\r\n    this.groups.forEach((group) => {\r\n      if (group.getSemantics().toLowerCase() === schematics.toLowerCase()) {\r\n        result = group;\r\n      }\r\n    });\r\n    return result;\r\n  }\r\n\r\n  getSourceGroups() {\r\n    return this.groups;\r\n  }\r\n\r\n  hasSourceGroup(schematics) {\r\n    let result = false;\r\n    this.groups.forEach((group) => {\r\n      if (group.getSemantics().toLowerCase() === schematics.toLowerCase()) {\r\n        result = true;\r\n      }\r\n    });\r\n    return result;\r\n  }\r\n\r\n  getEncodings() {\r\n    return this.encodings;\r\n  }\r\n\r\n  addAlternaticeEncodings(alternatives) {\r\n    this.encodings.push(alternatives);\r\n  }\r\n\r\n  setEncodings(encodings) {\r\n    this.encodings = encodings;\r\n  }\r\n}\r\n\r\nmodule.exports = TrackInfo;\r\n","module.exports = function(originalModule) {\n\tif (!originalModule.webpackPolyfill) {\n\t\tvar module = Object.create(originalModule);\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"exports\", {\n\t\t\tenumerable: true\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define([],e):\"object\"==typeof exports?exports.io=e():t.io=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p=\"\",e(0)}([function(t,e,n){\"use strict\";function r(t,e){\"object\"===(\"undefined\"==typeof t?\"undefined\":o(t))&&(e=t,t=void 0),e=e||{};var n,r=i(t),s=r.source,u=r.id,h=r.path,f=p[u]&&h in p[u].nsps,l=e.forceNew||e[\"force new connection\"]||!1===e.multiplex||f;return l?(c(\"ignoring socket cache for %s\",s),n=a(s,e)):(p[u]||(c(\"new io instance for %s\",s),p[u]=a(s,e)),n=p[u]),r.query&&!e.query&&(e.query=r.query),n.socket(r.path,e)}var o=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t},i=n(1),s=n(7),a=n(13),c=n(3)(\"socket.io-client\");t.exports=e=r;var p=e.managers={};e.protocol=s.protocol,e.connect=r,e.Manager=n(13),e.Socket=n(39)},function(t,e,n){(function(e){\"use strict\";function r(t,n){var r=t;n=n||e.location,null==t&&(t=n.protocol+\"//\"+n.host),\"string\"==typeof t&&(\"/\"===t.charAt(0)&&(t=\"/\"===t.charAt(1)?n.protocol+t:n.host+t),/^(https?|wss?):\\/\\//.test(t)||(i(\"protocol-less url %s\",t),t=\"undefined\"!=typeof n?n.protocol+\"//\"+t:\"https://\"+t),i(\"parse %s\",t),r=o(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port=\"80\":/^(http|ws)s$/.test(r.protocol)&&(r.port=\"443\")),r.path=r.path||\"/\";var s=r.host.indexOf(\":\")!==-1,a=s?\"[\"+r.host+\"]\":r.host;return r.id=r.protocol+\"://\"+a+\":\"+r.port,r.href=r.protocol+\"://\"+a+(n&&n.port===r.port?\"\":\":\"+r.port),r}var o=n(2),i=n(3)(\"socket.io-client:url\");t.exports=r}).call(e,function(){return this}())},function(t,e){var n=/^(?:(?![^:@]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/,r=[\"source\",\"protocol\",\"authority\",\"userInfo\",\"user\",\"password\",\"host\",\"port\",\"relative\",\"path\",\"directory\",\"file\",\"query\",\"anchor\"];t.exports=function(t){var e=t,o=t.indexOf(\"[\"),i=t.indexOf(\"]\");o!=-1&&i!=-1&&(t=t.substring(0,o)+t.substring(o,i).replace(/:/g,\";\")+t.substring(i,t.length));for(var s=n.exec(t||\"\"),a={},c=14;c--;)a[r[c]]=s[c]||\"\";return o!=-1&&i!=-1&&(a.source=e,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,\":\"),a.authority=a.authority.replace(\"[\",\"\").replace(\"]\",\"\").replace(/;/g,\":\"),a.ipv6uri=!0),a}},function(t,e,n){(function(r){function o(){return!(\"undefined\"==typeof window||!window.process||\"renderer\"!==window.process.type)||(\"undefined\"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||\"undefined\"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||\"undefined\"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/)&&parseInt(RegExp.$1,10)>=31||\"undefined\"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/))}function i(t){var n=this.useColors;if(t[0]=(n?\"%c\":\"\")+this.namespace+(n?\" %c\":\" \")+t[0]+(n?\"%c \":\" \")+\"+\"+e.humanize(this.diff),n){var r=\"color: \"+this.color;t.splice(1,0,r,\"color: inherit\");var o=0,i=0;t[0].replace(/%[a-zA-Z%]/g,function(t){\"%%\"!==t&&(o++,\"%c\"===t&&(i=o))}),t.splice(i,0,r)}}function s(){return\"object\"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function a(t){try{null==t?e.storage.removeItem(\"debug\"):e.storage.debug=t}catch(n){}}function c(){var t;try{t=e.storage.debug}catch(n){}return!t&&\"undefined\"!=typeof r&&\"env\"in r&&(t=r.env.DEBUG),t}function p(){try{return window.localStorage}catch(t){}}e=t.exports=n(5),e.log=s,e.formatArgs=i,e.save=a,e.load=c,e.useColors=o,e.storage=\"undefined\"!=typeof chrome&&\"undefined\"!=typeof chrome.storage?chrome.storage.local:p(),e.colors=[\"lightseagreen\",\"forestgreen\",\"goldenrod\",\"dodgerblue\",\"darkorchid\",\"crimson\"],e.formatters.j=function(t){try{return JSON.stringify(t)}catch(e){return\"[UnexpectedJSONParseError]: \"+e.message}},e.enable(c())}).call(e,n(4))},function(t,e){function n(){throw new Error(\"setTimeout has not been defined\")}function r(){throw new Error(\"clearTimeout has not been defined\")}function o(t){if(u===setTimeout)return setTimeout(t,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(t,0);try{return u(t,0)}catch(e){try{return u.call(null,t,0)}catch(e){return u.call(this,t,0)}}}function i(t){if(h===clearTimeout)return clearTimeout(t);if((h===r||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{return h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}function s(){y&&l&&(y=!1,l.length?d=l.concat(d):m=-1,d.length&&a())}function a(){if(!y){var t=o(s);y=!0;for(var e=d.length;e;){for(l=d,d=[];++m<e;)l&&l[m].run();m=-1,e=d.length}l=null,y=!1,i(t)}}function c(t,e){this.fun=t,this.array=e}function p(){}var u,h,f=t.exports={};!function(){try{u=\"function\"==typeof setTimeout?setTimeout:n}catch(t){u=n}try{h=\"function\"==typeof clearTimeout?clearTimeout:r}catch(t){h=r}}();var l,d=[],y=!1,m=-1;f.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];d.push(new c(t,e)),1!==d.length||y||o(a)},c.prototype.run=function(){this.fun.apply(null,this.array)},f.title=\"browser\",f.browser=!0,f.env={},f.argv=[],f.version=\"\",f.versions={},f.on=p,f.addListener=p,f.once=p,f.off=p,f.removeListener=p,f.removeAllListeners=p,f.emit=p,f.prependListener=p,f.prependOnceListener=p,f.listeners=function(t){return[]},f.binding=function(t){throw new Error(\"process.binding is not supported\")},f.cwd=function(){return\"/\"},f.chdir=function(t){throw new Error(\"process.chdir is not supported\")},f.umask=function(){return 0}},function(t,e,n){function r(t){var n,r=0;for(n in t)r=(r<<5)-r+t.charCodeAt(n),r|=0;return e.colors[Math.abs(r)%e.colors.length]}function o(t){function n(){if(n.enabled){var t=n,r=+new Date,o=r-(p||r);t.diff=o,t.prev=p,t.curr=r,p=r;for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];i[0]=e.coerce(i[0]),\"string\"!=typeof i[0]&&i.unshift(\"%O\");var a=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,function(n,r){if(\"%%\"===n)return n;a++;var o=e.formatters[r];if(\"function\"==typeof o){var s=i[a];n=o.call(t,s),i.splice(a,1),a--}return n}),e.formatArgs.call(t,i);var c=n.log||e.log||console.log.bind(console);c.apply(t,i)}}return n.namespace=t,n.enabled=e.enabled(t),n.useColors=e.useColors(),n.color=r(t),\"function\"==typeof e.init&&e.init(n),n}function i(t){e.save(t),e.names=[],e.skips=[];for(var n=(\"string\"==typeof t?t:\"\").split(/[\\s,]+/),r=n.length,o=0;o<r;o++)n[o]&&(t=n[o].replace(/\\*/g,\".*?\"),\"-\"===t[0]?e.skips.push(new RegExp(\"^\"+t.substr(1)+\"$\")):e.names.push(new RegExp(\"^\"+t+\"$\")))}function s(){e.enable(\"\")}function a(t){var n,r;for(n=0,r=e.skips.length;n<r;n++)if(e.skips[n].test(t))return!1;for(n=0,r=e.names.length;n<r;n++)if(e.names[n].test(t))return!0;return!1}function c(t){return t instanceof Error?t.stack||t.message:t}e=t.exports=o.debug=o[\"default\"]=o,e.coerce=c,e.disable=s,e.enable=i,e.enabled=a,e.humanize=n(6),e.names=[],e.skips=[],e.formatters={};var p},function(t,e){function n(t){if(t=String(t),!(t.length>100)){var e=/^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]),r=(e[2]||\"ms\").toLowerCase();switch(r){case\"years\":case\"year\":case\"yrs\":case\"yr\":case\"y\":return n*u;case\"days\":case\"day\":case\"d\":return n*p;case\"hours\":case\"hour\":case\"hrs\":case\"hr\":case\"h\":return n*c;case\"minutes\":case\"minute\":case\"mins\":case\"min\":case\"m\":return n*a;case\"seconds\":case\"second\":case\"secs\":case\"sec\":case\"s\":return n*s;case\"milliseconds\":case\"millisecond\":case\"msecs\":case\"msec\":case\"ms\":return n;default:return}}}}function r(t){return t>=p?Math.round(t/p)+\"d\":t>=c?Math.round(t/c)+\"h\":t>=a?Math.round(t/a)+\"m\":t>=s?Math.round(t/s)+\"s\":t+\"ms\"}function o(t){return i(t,p,\"day\")||i(t,c,\"hour\")||i(t,a,\"minute\")||i(t,s,\"second\")||t+\" ms\"}function i(t,e,n){if(!(t<e))return t<1.5*e?Math.floor(t/e)+\" \"+n:Math.ceil(t/e)+\" \"+n+\"s\"}var s=1e3,a=60*s,c=60*a,p=24*c,u=365.25*p;t.exports=function(t,e){e=e||{};var i=typeof t;if(\"string\"===i&&t.length>0)return n(t);if(\"number\"===i&&isNaN(t)===!1)return e[\"long\"]?o(t):r(t);throw new Error(\"val is not a non-empty string or a valid number. val=\"+JSON.stringify(t))}},function(t,e,n){function r(){}function o(t){var n=\"\"+t.type;return e.BINARY_EVENT!==t.type&&e.BINARY_ACK!==t.type||(n+=t.attachments+\"-\"),t.nsp&&\"/\"!==t.nsp&&(n+=t.nsp+\",\"),null!=t.id&&(n+=t.id),null!=t.data&&(n+=JSON.stringify(t.data)),h(\"encoded %j as %s\",t,n),n}function i(t,e){function n(t){var n=d.deconstructPacket(t),r=o(n.packet),i=n.buffers;i.unshift(r),e(i)}d.removeBlobs(t,n)}function s(){this.reconstructor=null}function a(t){var n=0,r={type:Number(t.charAt(0))};if(null==e.types[r.type])return u();if(e.BINARY_EVENT===r.type||e.BINARY_ACK===r.type){for(var o=\"\";\"-\"!==t.charAt(++n)&&(o+=t.charAt(n),n!=t.length););if(o!=Number(o)||\"-\"!==t.charAt(n))throw new Error(\"Illegal attachments\");r.attachments=Number(o)}if(\"/\"===t.charAt(n+1))for(r.nsp=\"\";++n;){var i=t.charAt(n);if(\",\"===i)break;if(r.nsp+=i,n===t.length)break}else r.nsp=\"/\";var s=t.charAt(n+1);if(\"\"!==s&&Number(s)==s){for(r.id=\"\";++n;){var i=t.charAt(n);if(null==i||Number(i)!=i){--n;break}if(r.id+=t.charAt(n),n===t.length)break}r.id=Number(r.id)}return t.charAt(++n)&&(r=c(r,t.substr(n))),h(\"decoded %s as %j\",t,r),r}function c(t,e){try{t.data=JSON.parse(e)}catch(n){return u()}return t}function p(t){this.reconPack=t,this.buffers=[]}function u(){return{type:e.ERROR,data:\"parser error\"}}var h=n(3)(\"socket.io-parser\"),f=n(8),l=n(9),d=n(11),y=n(12);e.protocol=4,e.types=[\"CONNECT\",\"DISCONNECT\",\"EVENT\",\"ACK\",\"ERROR\",\"BINARY_EVENT\",\"BINARY_ACK\"],e.CONNECT=0,e.DISCONNECT=1,e.EVENT=2,e.ACK=3,e.ERROR=4,e.BINARY_EVENT=5,e.BINARY_ACK=6,e.Encoder=r,e.Decoder=s,r.prototype.encode=function(t,n){if(t.type!==e.EVENT&&t.type!==e.ACK||!l(t.data)||(t.type=t.type===e.EVENT?e.BINARY_EVENT:e.BINARY_ACK),h(\"encoding packet %j\",t),e.BINARY_EVENT===t.type||e.BINARY_ACK===t.type)i(t,n);else{var r=o(t);n([r])}},f(s.prototype),s.prototype.add=function(t){var n;if(\"string\"==typeof t)n=a(t),e.BINARY_EVENT===n.type||e.BINARY_ACK===n.type?(this.reconstructor=new p(n),0===this.reconstructor.reconPack.attachments&&this.emit(\"decoded\",n)):this.emit(\"decoded\",n);else{if(!y(t)&&!t.base64)throw new Error(\"Unknown type: \"+t);if(!this.reconstructor)throw new Error(\"got binary data when not reconstructing a packet\");n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,this.emit(\"decoded\",n))}},s.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},p.prototype.takeBinaryData=function(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){var e=d.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null},p.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(t,e,n){function r(t){if(t)return o(t)}function o(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}t.exports=r,r.prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[\"$\"+t]=this._callbacks[\"$\"+t]||[]).push(e),this},r.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks[\"$\"+t];if(!n)return this;if(1==arguments.length)return delete this._callbacks[\"$\"+t],this;for(var r,o=0;o<n.length;o++)if(r=n[o],r===e||r.fn===e){n.splice(o,1);break}return this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks[\"$\"+t];if(n){n=n.slice(0);for(var r=0,o=n.length;r<o;++r)n[r].apply(this,e)}return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[\"$\"+t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e,n){(function(e){function r(t){if(!t||\"object\"!=typeof t)return!1;if(o(t)){for(var n=0,i=t.length;n<i;n++)if(r(t[n]))return!0;return!1}if(\"function\"==typeof e.Buffer&&e.Buffer.isBuffer&&e.Buffer.isBuffer(t)||\"function\"==typeof e.ArrayBuffer&&t instanceof ArrayBuffer||s&&t instanceof Blob||a&&t instanceof File)return!0;if(t.toJSON&&\"function\"==typeof t.toJSON&&1===arguments.length)return r(t.toJSON(),!0);for(var c in t)if(Object.prototype.hasOwnProperty.call(t,c)&&r(t[c]))return!0;return!1}var o=n(10),i=Object.prototype.toString,s=\"function\"==typeof e.Blob||\"[object BlobConstructor]\"===i.call(e.Blob),a=\"function\"==typeof e.File||\"[object FileConstructor]\"===i.call(e.File);t.exports=r}).call(e,function(){return this}())},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return\"[object Array]\"==n.call(t)}},function(t,e,n){(function(t){function r(t,e){if(!t)return t;if(s(t)){var n={_placeholder:!0,num:e.length};return e.push(t),n}if(i(t)){for(var o=new Array(t.length),a=0;a<t.length;a++)o[a]=r(t[a],e);return o}if(\"object\"==typeof t&&!(t instanceof Date)){var o={};for(var c in t)o[c]=r(t[c],e);return o}return t}function o(t,e){if(!t)return t;if(t&&t._placeholder)return e[t.num];if(i(t))for(var n=0;n<t.length;n++)t[n]=o(t[n],e);else if(\"object\"==typeof t)for(var r in t)t[r]=o(t[r],e);return t}var i=n(10),s=n(12),a=Object.prototype.toString,c=\"function\"==typeof t.Blob||\"[object BlobConstructor]\"===a.call(t.Blob),p=\"function\"==typeof t.File||\"[object FileConstructor]\"===a.call(t.File);e.deconstructPacket=function(t){var e=[],n=t.data,o=t;return o.data=r(n,e),o.attachments=e.length,{packet:o,buffers:e}},e.reconstructPacket=function(t,e){return t.data=o(t.data,e),t.attachments=void 0,t},e.removeBlobs=function(t,e){function n(t,a,u){if(!t)return t;if(c&&t instanceof Blob||p&&t instanceof File){r++;var h=new FileReader;h.onload=function(){u?u[a]=this.result:o=this.result,--r||e(o)},h.readAsArrayBuffer(t)}else if(i(t))for(var f=0;f<t.length;f++)n(t[f],f,t);else if(\"object\"==typeof t&&!s(t))for(var l in t)n(t[l],l,t)}var r=0,o=t;n(o),r||e(o)}}).call(e,function(){return this}())},function(t,e){(function(e){function n(t){return e.Buffer&&e.Buffer.isBuffer(t)||e.ArrayBuffer&&t instanceof ArrayBuffer}t.exports=n}).call(e,function(){return this}())},function(t,e,n){\"use strict\";function r(t,e){if(!(this instanceof r))return new r(t,e);t&&\"object\"===(\"undefined\"==typeof t?\"undefined\":o(t))&&(e=t,t=void 0),e=e||{},e.path=e.path||\"/socket.io\",this.nsps={},this.subs=[],this.opts=e,this.reconnection(e.reconnection!==!1),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(e.randomizationFactor||.5),this.backoff=new l({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this.readyState=\"closed\",this.uri=t,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var n=e.parser||c;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this.autoConnect=e.autoConnect!==!1,this.autoConnect&&this.open()}var o=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t},i=n(14),s=n(39),a=n(8),c=n(7),p=n(41),u=n(42),h=n(3)(\"socket.io-client:manager\"),f=n(37),l=n(43),d=Object.prototype.hasOwnProperty;t.exports=r,r.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var t in this.nsps)d.call(this.nsps,t)&&this.nsps[t].emit.apply(this.nsps[t],arguments)},r.prototype.updateSocketIds=function(){for(var t in this.nsps)d.call(this.nsps,t)&&(this.nsps[t].id=this.generateId(t))},r.prototype.generateId=function(t){return(\"/\"===t?\"\":t+\"#\")+this.engine.id},a(r.prototype),r.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection},r.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts},r.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this.backoff&&this.backoff.setMin(t),this):this._reconnectionDelay},r.prototype.randomizationFactor=function(t){return arguments.length?(this._randomizationFactor=t,this.backoff&&this.backoff.setJitter(t),this):this._randomizationFactor},r.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this.backoff&&this.backoff.setMax(t),this):this._reconnectionDelayMax},r.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout},r.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},r.prototype.open=r.prototype.connect=function(t,e){if(h(\"readyState %s\",this.readyState),~this.readyState.indexOf(\"open\"))return this;h(\"opening %s\",this.uri),this.engine=i(this.uri,this.opts);var n=this.engine,r=this;this.readyState=\"opening\",this.skipReconnect=!1;var o=p(n,\"open\",function(){r.onopen(),t&&t()}),s=p(n,\"error\",function(e){if(h(\"connect_error\"),r.cleanup(),r.readyState=\"closed\",r.emitAll(\"connect_error\",e),t){var n=new Error(\"Connection error\");n.data=e,t(n)}else r.maybeReconnectOnOpen()});if(!1!==this._timeout){var a=this._timeout;h(\"connect attempt will timeout after %d\",a);var c=setTimeout(function(){h(\"connect attempt timed out after %d\",a),o.destroy(),n.close(),n.emit(\"error\",\"timeout\"),r.emitAll(\"connect_timeout\",a)},a);this.subs.push({destroy:function(){clearTimeout(c)}})}return this.subs.push(o),this.subs.push(s),this},r.prototype.onopen=function(){h(\"open\"),this.cleanup(),this.readyState=\"open\",this.emit(\"open\");var t=this.engine;this.subs.push(p(t,\"data\",u(this,\"ondata\"))),this.subs.push(p(t,\"ping\",u(this,\"onping\"))),this.subs.push(p(t,\"pong\",u(this,\"onpong\"))),this.subs.push(p(t,\"error\",u(this,\"onerror\"))),this.subs.push(p(t,\"close\",u(this,\"onclose\"))),this.subs.push(p(this.decoder,\"decoded\",u(this,\"ondecoded\")))},r.prototype.onping=function(){this.lastPing=new Date,this.emitAll(\"ping\")},r.prototype.onpong=function(){this.emitAll(\"pong\",new Date-this.lastPing)},r.prototype.ondata=function(t){this.decoder.add(t)},r.prototype.ondecoded=function(t){this.emit(\"packet\",t)},r.prototype.onerror=function(t){h(\"error\",t),this.emitAll(\"error\",t)},r.prototype.socket=function(t,e){function n(){~f(o.connecting,r)||o.connecting.push(r)}var r=this.nsps[t];if(!r){r=new s(this,t,e),this.nsps[t]=r;var o=this;r.on(\"connecting\",n),r.on(\"connect\",function(){r.id=o.generateId(t)}),this.autoConnect&&n()}return r},r.prototype.destroy=function(t){var e=f(this.connecting,t);~e&&this.connecting.splice(e,1),this.connecting.length||this.close()},r.prototype.packet=function(t){h(\"writing packet %j\",t);var e=this;t.query&&0===t.type&&(t.nsp+=\"?\"+t.query),e.encoding?e.packetBuffer.push(t):(e.encoding=!0,this.encoder.encode(t,function(n){for(var r=0;r<n.length;r++)e.engine.write(n[r],t.options);e.encoding=!1,e.processPacketQueue()}))},r.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var t=this.packetBuffer.shift();this.packet(t)}},r.prototype.cleanup=function(){h(\"cleanup\");for(var t=this.subs.length,e=0;e<t;e++){var n=this.subs.shift();n.destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},r.prototype.close=r.prototype.disconnect=function(){h(\"disconnect\"),this.skipReconnect=!0,this.reconnecting=!1,\"opening\"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState=\"closed\",this.engine&&this.engine.close()},r.prototype.onclose=function(t){h(\"onclose\"),this.cleanup(),this.backoff.reset(),this.readyState=\"closed\",this.emit(\"close\",t),this._reconnection&&!this.skipReconnect&&this.reconnect()},r.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)h(\"reconnect failed\"),this.backoff.reset(),this.emitAll(\"reconnect_failed\"),this.reconnecting=!1;else{var e=this.backoff.duration();h(\"will wait %dms before reconnect attempt\",e),this.reconnecting=!0;var n=setTimeout(function(){t.skipReconnect||(h(\"attempting reconnect\"),t.emitAll(\"reconnect_attempt\",t.backoff.attempts),t.emitAll(\"reconnecting\",t.backoff.attempts),t.skipReconnect||t.open(function(e){e?(h(\"reconnect attempt error\"),t.reconnecting=!1,t.reconnect(),t.emitAll(\"reconnect_error\",e.data)):(h(\"reconnect success\"),t.onreconnect())}))},e);this.subs.push({destroy:function(){clearTimeout(n)}})}},r.prototype.onreconnect=function(){var t=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll(\"reconnect\",t)}},function(t,e,n){t.exports=n(15)},function(t,e,n){t.exports=n(16),t.exports.parser=n(23)},function(t,e,n){(function(e){function r(t,n){if(!(this instanceof r))return new r(t,n);n=n||{},t&&\"object\"==typeof t&&(n=t,t=null),t?(t=u(t),n.hostname=t.host,n.secure=\"https\"===t.protocol||\"wss\"===t.protocol,n.port=t.port,t.query&&(n.query=t.query)):n.host&&(n.hostname=u(n.host).host),this.secure=null!=n.secure?n.secure:e.location&&\"https:\"===location.protocol,n.hostname&&!n.port&&(n.port=this.secure?\"443\":\"80\"),this.agent=n.agent||!1,this.hostname=n.hostname||(e.location?location.hostname:\"localhost\"),this.port=n.port||(e.location&&location.port?location.port:this.secure?443:80),this.query=n.query||{},\"string\"==typeof this.query&&(this.query=f.decode(this.query)),this.upgrade=!1!==n.upgrade,this.path=(n.path||\"/engine.io\").replace(/\\/$/,\"\")+\"/\",this.forceJSONP=!!n.forceJSONP,this.jsonp=!1!==n.jsonp,this.forceBase64=!!n.forceBase64,this.enablesXDR=!!n.enablesXDR,this.timestampParam=n.timestampParam||\"t\",this.timestampRequests=n.timestampRequests,this.transports=n.transports||[\"polling\",\"websocket\"],this.transportOptions=n.transportOptions||{},this.readyState=\"\",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=n.policyPort||843,this.rememberUpgrade=n.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=n.onlyBinaryUpgrades,this.perMessageDeflate=!1!==n.perMessageDeflate&&(n.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=n.pfx||null,this.key=n.key||null,this.passphrase=n.passphrase||null,this.cert=n.cert||null,this.ca=n.ca||null,this.ciphers=n.ciphers||null,this.rejectUnauthorized=void 0===n.rejectUnauthorized||n.rejectUnauthorized,this.forceNode=!!n.forceNode;var o=\"object\"==typeof e&&e;o.global===o&&(n.extraHeaders&&Object.keys(n.extraHeaders).length>0&&(this.extraHeaders=n.extraHeaders),n.localAddress&&(this.localAddress=n.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}function o(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}var i=n(17),s=n(8),a=n(3)(\"engine.io-client:socket\"),c=n(37),p=n(23),u=n(2),h=n(38),f=n(31);t.exports=r,r.priorWebsocketSuccess=!1,s(r.prototype),r.protocol=p.protocol,r.Socket=r,r.Transport=n(22),r.transports=n(17),r.parser=n(23),r.prototype.createTransport=function(t){a('creating transport \"%s\"',t);var e=o(this.query);e.EIO=p.protocol,e.transport=t;var n=this.transportOptions[t]||{};this.id&&(e.sid=this.id);var r=new i[t]({query:e,socket:this,agent:n.agent||this.agent,hostname:n.hostname||this.hostname,port:n.port||this.port,secure:n.secure||this.secure,path:n.path||this.path,forceJSONP:n.forceJSONP||this.forceJSONP,jsonp:n.jsonp||this.jsonp,forceBase64:n.forceBase64||this.forceBase64,enablesXDR:n.enablesXDR||this.enablesXDR,timestampRequests:n.timestampRequests||this.timestampRequests,timestampParam:n.timestampParam||this.timestampParam,policyPort:n.policyPort||this.policyPort,pfx:n.pfx||this.pfx,key:n.key||this.key,passphrase:n.passphrase||this.passphrase,cert:n.cert||this.cert,ca:n.ca||this.ca,ciphers:n.ciphers||this.ciphers,rejectUnauthorized:n.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:n.perMessageDeflate||this.perMessageDeflate,extraHeaders:n.extraHeaders||this.extraHeaders,forceNode:n.forceNode||this.forceNode,localAddress:n.localAddress||this.localAddress,requestTimeout:n.requestTimeout||this.requestTimeout,protocols:n.protocols||void 0});return r},r.prototype.open=function(){var t;if(this.rememberUpgrade&&r.priorWebsocketSuccess&&this.transports.indexOf(\"websocket\")!==-1)t=\"websocket\";else{if(0===this.transports.length){var e=this;return void setTimeout(function(){e.emit(\"error\",\"No transports available\")},0)}t=this.transports[0]}this.readyState=\"opening\";try{t=this.createTransport(t)}catch(n){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)},r.prototype.setTransport=function(t){a(\"setting transport %s\",t.name);var e=this;this.transport&&(a(\"clearing existing transport %s\",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on(\"drain\",function(){e.onDrain()}).on(\"packet\",function(t){e.onPacket(t)}).on(\"error\",function(t){e.onError(t)}).on(\"close\",function(){e.onClose(\"transport close\")})},r.prototype.probe=function(t){function e(){if(f.onlyBinaryUpgrades){var e=!this.supportsBinary&&f.transport.supportsBinary;h=h||e}h||(a('probe transport \"%s\" opened',t),u.send([{type:\"ping\",data:\"probe\"}]),u.once(\"packet\",function(e){if(!h)if(\"pong\"===e.type&&\"probe\"===e.data){if(a('probe transport \"%s\" pong',t),f.upgrading=!0,f.emit(\"upgrading\",u),!u)return;r.priorWebsocketSuccess=\"websocket\"===u.name,a('pausing current transport \"%s\"',f.transport.name),f.transport.pause(function(){h||\"closed\"!==f.readyState&&(a(\"changing transport and sending upgrade packet\"),p(),f.setTransport(u),u.send([{type:\"upgrade\"}]),f.emit(\"upgrade\",u),u=null,f.upgrading=!1,f.flush())})}else{a('probe transport \"%s\" failed',t);var n=new Error(\"probe error\");n.transport=u.name,f.emit(\"upgradeError\",n)}}))}function n(){h||(h=!0,p(),u.close(),u=null)}function o(e){var r=new Error(\"probe error: \"+e);r.transport=u.name,n(),a('probe transport \"%s\" failed because of error: %s',t,e),f.emit(\"upgradeError\",r)}function i(){o(\"transport closed\")}function s(){o(\"socket closed\")}function c(t){u&&t.name!==u.name&&(a('\"%s\" works - aborting \"%s\"',t.name,u.name),n())}function p(){u.removeListener(\"open\",e),u.removeListener(\"error\",o),u.removeListener(\"close\",i),f.removeListener(\"close\",s),f.removeListener(\"upgrading\",c)}a('probing transport \"%s\"',t);var u=this.createTransport(t,{probe:1}),h=!1,f=this;r.priorWebsocketSuccess=!1,u.once(\"open\",e),u.once(\"error\",o),u.once(\"close\",i),this.once(\"close\",s),this.once(\"upgrading\",c),u.open()},r.prototype.onOpen=function(){if(a(\"socket open\"),this.readyState=\"open\",r.priorWebsocketSuccess=\"websocket\"===this.transport.name,this.emit(\"open\"),this.flush(),\"open\"===this.readyState&&this.upgrade&&this.transport.pause){a(\"starting upgrade probes\");for(var t=0,e=this.upgrades.length;t<e;t++)this.probe(this.upgrades[t])}},r.prototype.onPacket=function(t){if(\"opening\"===this.readyState||\"open\"===this.readyState||\"closing\"===this.readyState)switch(a('socket receive: type \"%s\", data \"%s\"',t.type,t.data),this.emit(\"packet\",t),this.emit(\"heartbeat\"),t.type){case\"open\":this.onHandshake(h(t.data));break;case\"pong\":this.setPing(),this.emit(\"pong\");break;case\"error\":var e=new Error(\"server error\");e.code=t.data,this.onError(e);break;case\"message\":this.emit(\"data\",t.data),this.emit(\"message\",t.data)}else a('packet received with socket readyState \"%s\"',this.readyState)},r.prototype.onHandshake=function(t){this.emit(\"handshake\",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),\"closed\"!==this.readyState&&(this.setPing(),this.removeListener(\"heartbeat\",this.onHeartbeat),this.on(\"heartbeat\",this.onHeartbeat))},r.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var e=this;e.pingTimeoutTimer=setTimeout(function(){\"closed\"!==e.readyState&&e.onClose(\"ping timeout\")},t||e.pingInterval+e.pingTimeout)},r.prototype.setPing=function(){var t=this;clearTimeout(t.pingIntervalTimer),t.pingIntervalTimer=setTimeout(function(){a(\"writing ping packet - expecting pong within %sms\",t.pingTimeout),t.ping(),t.onHeartbeat(t.pingTimeout)},t.pingInterval)},r.prototype.ping=function(){var t=this;this.sendPacket(\"ping\",function(){t.emit(\"ping\")})},r.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit(\"drain\"):this.flush()},r.prototype.flush=function(){\"closed\"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(a(\"flushing %d packets in socket\",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit(\"flush\"))},r.prototype.write=r.prototype.send=function(t,e,n){return this.sendPacket(\"message\",t,e,n),this},r.prototype.sendPacket=function(t,e,n,r){if(\"function\"==typeof e&&(r=e,e=void 0),\"function\"==typeof n&&(r=n,n=null),\"closing\"!==this.readyState&&\"closed\"!==this.readyState){n=n||{},n.compress=!1!==n.compress;var o={type:t,data:e,options:n};this.emit(\"packetCreate\",o),this.writeBuffer.push(o),r&&this.once(\"flush\",r),this.flush()}},r.prototype.close=function(){function t(){r.onClose(\"forced close\"),a(\"socket closing - telling transport to close\"),r.transport.close()}function e(){r.removeListener(\"upgrade\",e),r.removeListener(\"upgradeError\",e),t()}function n(){r.once(\"upgrade\",e),r.once(\"upgradeError\",e)}if(\"opening\"===this.readyState||\"open\"===this.readyState){this.readyState=\"closing\";var r=this;this.writeBuffer.length?this.once(\"drain\",function(){this.upgrading?n():t()}):this.upgrading?n():t()}return this},r.prototype.onError=function(t){a(\"socket error %j\",t),r.priorWebsocketSuccess=!1,this.emit(\"error\",t),this.onClose(\"transport error\",t)},r.prototype.onClose=function(t,e){if(\"opening\"===this.readyState||\"open\"===this.readyState||\"closing\"===this.readyState){a('socket close with reason: \"%s\"',t);var n=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners(\"close\"),this.transport.close(),this.transport.removeAllListeners(),this.readyState=\"closed\",this.id=null,this.emit(\"close\",t,e),n.writeBuffer=[],n.prevBufferLen=0}},r.prototype.filterUpgrades=function(t){for(var e=[],n=0,r=t.length;n<r;n++)~c(this.transports,t[n])&&e.push(t[n]);return e}}).call(e,function(){return this}())},function(t,e,n){(function(t){function r(e){var n,r=!1,a=!1,c=!1!==e.jsonp;if(t.location){var p=\"https:\"===location.protocol,u=location.port;u||(u=p?443:80),r=e.hostname!==location.hostname||u!==e.port,a=e.secure!==p}if(e.xdomain=r,e.xscheme=a,n=new o(e),\"open\"in n&&!e.forceJSONP)return new i(e);if(!c)throw new Error(\"JSONP disabled\");return new s(e)}var o=n(18),i=n(20),s=n(34),a=n(35);e.polling=r,e.websocket=a}).call(e,function(){return this}())},function(t,e,n){(function(e){var r=n(19);t.exports=function(t){var n=t.xdomain,o=t.xscheme,i=t.enablesXDR;try{if(\"undefined\"!=typeof XMLHttpRequest&&(!n||r))return new XMLHttpRequest}catch(s){}try{if(\"undefined\"!=typeof XDomainRequest&&!o&&i)return new XDomainRequest}catch(s){}if(!n)try{\r\nreturn new(e[[\"Active\"].concat(\"Object\").join(\"X\")])(\"Microsoft.XMLHTTP\")}catch(s){}}}).call(e,function(){return this}())},function(t,e){try{t.exports=\"undefined\"!=typeof XMLHttpRequest&&\"withCredentials\"in new XMLHttpRequest}catch(n){t.exports=!1}},function(t,e,n){(function(e){function r(){}function o(t){if(c.call(this,t),this.requestTimeout=t.requestTimeout,this.extraHeaders=t.extraHeaders,e.location){var n=\"https:\"===location.protocol,r=location.port;r||(r=n?443:80),this.xd=t.hostname!==e.location.hostname||r!==t.port,this.xs=t.secure!==n}}function i(t){this.method=t.method||\"GET\",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.requestTimeout=t.requestTimeout,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders,this.create()}function s(){for(var t in i.requests)i.requests.hasOwnProperty(t)&&i.requests[t].abort()}var a=n(18),c=n(21),p=n(8),u=n(32),h=n(3)(\"engine.io-client:polling-xhr\");t.exports=o,t.exports.Request=i,u(o,c),o.prototype.supportsBinary=!0,o.prototype.request=function(t){return t=t||{},t.uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,t.requestTimeout=this.requestTimeout,t.extraHeaders=this.extraHeaders,new i(t)},o.prototype.doWrite=function(t,e){var n=\"string\"!=typeof t&&void 0!==t,r=this.request({method:\"POST\",data:t,isBinary:n}),o=this;r.on(\"success\",e),r.on(\"error\",function(t){o.onError(\"xhr post error\",t)}),this.sendXhr=r},o.prototype.doPoll=function(){h(\"xhr poll\");var t=this.request(),e=this;t.on(\"data\",function(t){e.onData(t)}),t.on(\"error\",function(t){e.onError(\"xhr poll error\",t)}),this.pollXhr=t},p(i.prototype),i.prototype.create=function(){var t={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized;var n=this.xhr=new a(t),r=this;try{h(\"xhr open %s: %s\",this.method,this.uri),n.open(this.method,this.uri,this.async);try{if(this.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(var o in this.extraHeaders)this.extraHeaders.hasOwnProperty(o)&&n.setRequestHeader(o,this.extraHeaders[o])}}catch(s){}if(\"POST\"===this.method)try{this.isBinary?n.setRequestHeader(\"Content-type\",\"application/octet-stream\"):n.setRequestHeader(\"Content-type\",\"text/plain;charset=UTF-8\")}catch(s){}try{n.setRequestHeader(\"Accept\",\"*/*\")}catch(s){}\"withCredentials\"in n&&(n.withCredentials=!0),this.requestTimeout&&(n.timeout=this.requestTimeout),this.hasXDR()?(n.onload=function(){r.onLoad()},n.onerror=function(){r.onError(n.responseText)}):n.onreadystatechange=function(){if(2===n.readyState){var t;try{t=n.getResponseHeader(\"Content-Type\")}catch(e){}\"application/octet-stream\"===t&&(n.responseType=\"arraybuffer\")}4===n.readyState&&(200===n.status||1223===n.status?r.onLoad():setTimeout(function(){r.onError(n.status)},0))},h(\"xhr data %s\",this.data),n.send(this.data)}catch(s){return void setTimeout(function(){r.onError(s)},0)}e.document&&(this.index=i.requestsCount++,i.requests[this.index]=this)},i.prototype.onSuccess=function(){this.emit(\"success\"),this.cleanup()},i.prototype.onData=function(t){this.emit(\"data\",t),this.onSuccess()},i.prototype.onError=function(t){this.emit(\"error\",t),this.cleanup(!0)},i.prototype.cleanup=function(t){if(\"undefined\"!=typeof this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=r:this.xhr.onreadystatechange=r,t)try{this.xhr.abort()}catch(n){}e.document&&delete i.requests[this.index],this.xhr=null}},i.prototype.onLoad=function(){var t;try{var e;try{e=this.xhr.getResponseHeader(\"Content-Type\")}catch(n){}t=\"application/octet-stream\"===e?this.xhr.response||this.xhr.responseText:this.xhr.responseText}catch(n){this.onError(n)}null!=t&&this.onData(t)},i.prototype.hasXDR=function(){return\"undefined\"!=typeof e.XDomainRequest&&!this.xs&&this.enablesXDR},i.prototype.abort=function(){this.cleanup()},i.requestsCount=0,i.requests={},e.document&&(e.attachEvent?e.attachEvent(\"onunload\",s):e.addEventListener&&e.addEventListener(\"beforeunload\",s,!1))}).call(e,function(){return this}())},function(t,e,n){function r(t){var e=t&&t.forceBase64;u&&!e||(this.supportsBinary=!1),o.call(this,t)}var o=n(22),i=n(31),s=n(23),a=n(32),c=n(33),p=n(3)(\"engine.io-client:polling\");t.exports=r;var u=function(){var t=n(18),e=new t({xdomain:!1});return null!=e.responseType}();a(r,o),r.prototype.name=\"polling\",r.prototype.doOpen=function(){this.poll()},r.prototype.pause=function(t){function e(){p(\"paused\"),n.readyState=\"paused\",t()}var n=this;if(this.readyState=\"pausing\",this.polling||!this.writable){var r=0;this.polling&&(p(\"we are currently polling - waiting to pause\"),r++,this.once(\"pollComplete\",function(){p(\"pre-pause polling complete\"),--r||e()})),this.writable||(p(\"we are currently writing - waiting to pause\"),r++,this.once(\"drain\",function(){p(\"pre-pause writing complete\"),--r||e()}))}else e()},r.prototype.poll=function(){p(\"polling\"),this.polling=!0,this.doPoll(),this.emit(\"poll\")},r.prototype.onData=function(t){var e=this;p(\"polling got data %s\",t);var n=function(t,n,r){return\"opening\"===e.readyState&&e.onOpen(),\"close\"===t.type?(e.onClose(),!1):void e.onPacket(t)};s.decodePayload(t,this.socket.binaryType,n),\"closed\"!==this.readyState&&(this.polling=!1,this.emit(\"pollComplete\"),\"open\"===this.readyState?this.poll():p('ignoring poll - transport state \"%s\"',this.readyState))},r.prototype.doClose=function(){function t(){p(\"writing close packet\"),e.write([{type:\"close\"}])}var e=this;\"open\"===this.readyState?(p(\"transport open - closing\"),t()):(p(\"transport not open - deferring close\"),this.once(\"open\",t))},r.prototype.write=function(t){var e=this;this.writable=!1;var n=function(){e.writable=!0,e.emit(\"drain\")};s.encodePayload(t,this.supportsBinary,function(t){e.doWrite(t,n)})},r.prototype.uri=function(){var t=this.query||{},e=this.secure?\"https\":\"http\",n=\"\";!1!==this.timestampRequests&&(t[this.timestampParam]=c()),this.supportsBinary||t.sid||(t.b64=1),t=i.encode(t),this.port&&(\"https\"===e&&443!==Number(this.port)||\"http\"===e&&80!==Number(this.port))&&(n=\":\"+this.port),t.length&&(t=\"?\"+t);var r=this.hostname.indexOf(\":\")!==-1;return e+\"://\"+(r?\"[\"+this.hostname+\"]\":this.hostname)+n+this.path+t}},function(t,e,n){function r(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState=\"\",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.forceNode=t.forceNode,this.extraHeaders=t.extraHeaders,this.localAddress=t.localAddress}var o=n(23),i=n(8);t.exports=r,i(r.prototype),r.prototype.onError=function(t,e){var n=new Error(t);return n.type=\"TransportError\",n.description=e,this.emit(\"error\",n),this},r.prototype.open=function(){return\"closed\"!==this.readyState&&\"\"!==this.readyState||(this.readyState=\"opening\",this.doOpen()),this},r.prototype.close=function(){return\"opening\"!==this.readyState&&\"open\"!==this.readyState||(this.doClose(),this.onClose()),this},r.prototype.send=function(t){if(\"open\"!==this.readyState)throw new Error(\"Transport not open\");this.write(t)},r.prototype.onOpen=function(){this.readyState=\"open\",this.writable=!0,this.emit(\"open\")},r.prototype.onData=function(t){var e=o.decodePacket(t,this.socket.binaryType);this.onPacket(e)},r.prototype.onPacket=function(t){this.emit(\"packet\",t)},r.prototype.onClose=function(){this.readyState=\"closed\",this.emit(\"close\")}},function(t,e,n){(function(t){function r(t,n){var r=\"b\"+e.packets[t.type]+t.data.data;return n(r)}function o(t,n,r){if(!n)return e.encodeBase64Packet(t,r);var o=t.data,i=new Uint8Array(o),s=new Uint8Array(1+o.byteLength);s[0]=v[t.type];for(var a=0;a<i.length;a++)s[a+1]=i[a];return r(s.buffer)}function i(t,n,r){if(!n)return e.encodeBase64Packet(t,r);var o=new FileReader;return o.onload=function(){t.data=o.result,e.encodePacket(t,n,!0,r)},o.readAsArrayBuffer(t.data)}function s(t,n,r){if(!n)return e.encodeBase64Packet(t,r);if(g)return i(t,n,r);var o=new Uint8Array(1);o[0]=v[t.type];var s=new k([o.buffer,t.data]);return r(s)}function a(t){try{t=d.decode(t,{strict:!1})}catch(e){return!1}return t}function c(t,e,n){for(var r=new Array(t.length),o=l(t.length,n),i=function(t,n,o){e(n,function(e,n){r[t]=n,o(e,r)})},s=0;s<t.length;s++)i(s,t[s],o)}var p,u=n(24),h=n(9),f=n(25),l=n(26),d=n(27);t&&t.ArrayBuffer&&(p=n(29));var y=\"undefined\"!=typeof navigator&&/Android/i.test(navigator.userAgent),m=\"undefined\"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),g=y||m;e.protocol=3;var v=e.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},b=u(v),w={type:\"error\",data:\"parser error\"},k=n(30);e.encodePacket=function(e,n,i,a){\"function\"==typeof n&&(a=n,n=!1),\"function\"==typeof i&&(a=i,i=null);var c=void 0===e.data?void 0:e.data.buffer||e.data;if(t.ArrayBuffer&&c instanceof ArrayBuffer)return o(e,n,a);if(k&&c instanceof t.Blob)return s(e,n,a);if(c&&c.base64)return r(e,a);var p=v[e.type];return void 0!==e.data&&(p+=i?d.encode(String(e.data),{strict:!1}):String(e.data)),a(\"\"+p)},e.encodeBase64Packet=function(n,r){var o=\"b\"+e.packets[n.type];if(k&&n.data instanceof t.Blob){var i=new FileReader;return i.onload=function(){var t=i.result.split(\",\")[1];r(o+t)},i.readAsDataURL(n.data)}var s;try{s=String.fromCharCode.apply(null,new Uint8Array(n.data))}catch(a){for(var c=new Uint8Array(n.data),p=new Array(c.length),u=0;u<c.length;u++)p[u]=c[u];s=String.fromCharCode.apply(null,p)}return o+=t.btoa(s),r(o)},e.decodePacket=function(t,n,r){if(void 0===t)return w;if(\"string\"==typeof t){if(\"b\"===t.charAt(0))return e.decodeBase64Packet(t.substr(1),n);if(r&&(t=a(t),t===!1))return w;var o=t.charAt(0);return Number(o)==o&&b[o]?t.length>1?{type:b[o],data:t.substring(1)}:{type:b[o]}:w}var i=new Uint8Array(t),o=i[0],s=f(t,1);return k&&\"blob\"===n&&(s=new k([s])),{type:b[o],data:s}},e.decodeBase64Packet=function(t,e){var n=b[t.charAt(0)];if(!p)return{type:n,data:{base64:!0,data:t.substr(1)}};var r=p.decode(t.substr(1));return\"blob\"===e&&k&&(r=new k([r])),{type:n,data:r}},e.encodePayload=function(t,n,r){function o(t){return t.length+\":\"+t}function i(t,r){e.encodePacket(t,!!s&&n,!1,function(t){r(null,o(t))})}\"function\"==typeof n&&(r=n,n=null);var s=h(t);return n&&s?k&&!g?e.encodePayloadAsBlob(t,r):e.encodePayloadAsArrayBuffer(t,r):t.length?void c(t,i,function(t,e){return r(e.join(\"\"))}):r(\"0:\")},e.decodePayload=function(t,n,r){if(\"string\"!=typeof t)return e.decodePayloadAsBinary(t,n,r);\"function\"==typeof n&&(r=n,n=null);var o;if(\"\"===t)return r(w,0,1);for(var i,s,a=\"\",c=0,p=t.length;c<p;c++){var u=t.charAt(c);if(\":\"===u){if(\"\"===a||a!=(i=Number(a)))return r(w,0,1);if(s=t.substr(c+1,i),a!=s.length)return r(w,0,1);if(s.length){if(o=e.decodePacket(s,n,!1),w.type===o.type&&w.data===o.data)return r(w,0,1);var h=r(o,c+i,p);if(!1===h)return}c+=i,a=\"\"}else a+=u}return\"\"!==a?r(w,0,1):void 0},e.encodePayloadAsArrayBuffer=function(t,n){function r(t,n){e.encodePacket(t,!0,!0,function(t){return n(null,t)})}return t.length?void c(t,r,function(t,e){var r=e.reduce(function(t,e){var n;return n=\"string\"==typeof e?e.length:e.byteLength,t+n.toString().length+n+2},0),o=new Uint8Array(r),i=0;return e.forEach(function(t){var e=\"string\"==typeof t,n=t;if(e){for(var r=new Uint8Array(t.length),s=0;s<t.length;s++)r[s]=t.charCodeAt(s);n=r.buffer}e?o[i++]=0:o[i++]=1;for(var a=n.byteLength.toString(),s=0;s<a.length;s++)o[i++]=parseInt(a[s]);o[i++]=255;for(var r=new Uint8Array(n),s=0;s<r.length;s++)o[i++]=r[s]}),n(o.buffer)}):n(new ArrayBuffer(0))},e.encodePayloadAsBlob=function(t,n){function r(t,n){e.encodePacket(t,!0,!0,function(t){var e=new Uint8Array(1);if(e[0]=1,\"string\"==typeof t){for(var r=new Uint8Array(t.length),o=0;o<t.length;o++)r[o]=t.charCodeAt(o);t=r.buffer,e[0]=0}for(var i=t instanceof ArrayBuffer?t.byteLength:t.size,s=i.toString(),a=new Uint8Array(s.length+1),o=0;o<s.length;o++)a[o]=parseInt(s[o]);if(a[s.length]=255,k){var c=new k([e.buffer,a.buffer,t]);n(null,c)}})}c(t,r,function(t,e){return n(new k(e))})},e.decodePayloadAsBinary=function(t,n,r){\"function\"==typeof n&&(r=n,n=null);for(var o=t,i=[];o.byteLength>0;){for(var s=new Uint8Array(o),a=0===s[0],c=\"\",p=1;255!==s[p];p++){if(c.length>310)return r(w,0,1);c+=s[p]}o=f(o,2+c.length),c=parseInt(c);var u=f(o,0,c);if(a)try{u=String.fromCharCode.apply(null,new Uint8Array(u))}catch(h){var l=new Uint8Array(u);u=\"\";for(var p=0;p<l.length;p++)u+=String.fromCharCode(l[p])}i.push(u),o=f(o,c)}var d=i.length;i.forEach(function(t,o){r(e.decodePacket(t,n,!0),o,d)})}}).call(e,function(){return this}())},function(t,e){t.exports=Object.keys||function(t){var e=[],n=Object.prototype.hasOwnProperty;for(var r in t)n.call(t,r)&&e.push(r);return e}},function(t,e){t.exports=function(t,e,n){var r=t.byteLength;if(e=e||0,n=n||r,t.slice)return t.slice(e,n);if(e<0&&(e+=r),n<0&&(n+=r),n>r&&(n=r),e>=r||e>=n||0===r)return new ArrayBuffer(0);for(var o=new Uint8Array(t),i=new Uint8Array(n-e),s=e,a=0;s<n;s++,a++)i[a]=o[s];return i.buffer}},function(t,e){function n(t,e,n){function o(t,r){if(o.count<=0)throw new Error(\"after called too many times\");--o.count,t?(i=!0,e(t),e=n):0!==o.count||i||e(null,r)}var i=!1;return n=n||r,o.count=t,0===t?e():o}function r(){}t.exports=n},function(t,e,n){var r;(function(t,o){!function(i){function s(t){for(var e,n,r=[],o=0,i=t.length;o<i;)e=t.charCodeAt(o++),e>=55296&&e<=56319&&o<i?(n=t.charCodeAt(o++),56320==(64512&n)?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),o--)):r.push(e);return r}function a(t){for(var e,n=t.length,r=-1,o=\"\";++r<n;)e=t[r],e>65535&&(e-=65536,o+=w(e>>>10&1023|55296),e=56320|1023&e),o+=w(e);return o}function c(t,e){if(t>=55296&&t<=57343){if(e)throw Error(\"Lone surrogate U+\"+t.toString(16).toUpperCase()+\" is not a scalar value\");return!1}return!0}function p(t,e){return w(t>>e&63|128)}function u(t,e){if(0==(4294967168&t))return w(t);var n=\"\";return 0==(4294965248&t)?n=w(t>>6&31|192):0==(4294901760&t)?(c(t,e)||(t=65533),n=w(t>>12&15|224),n+=p(t,6)):0==(4292870144&t)&&(n=w(t>>18&7|240),n+=p(t,12),n+=p(t,6)),n+=w(63&t|128)}function h(t,e){e=e||{};for(var n,r=!1!==e.strict,o=s(t),i=o.length,a=-1,c=\"\";++a<i;)n=o[a],c+=u(n,r);return c}function f(){if(b>=v)throw Error(\"Invalid byte index\");var t=255&g[b];if(b++,128==(192&t))return 63&t;throw Error(\"Invalid continuation byte\")}function l(t){var e,n,r,o,i;if(b>v)throw Error(\"Invalid byte index\");if(b==v)return!1;if(e=255&g[b],b++,0==(128&e))return e;if(192==(224&e)){if(n=f(),i=(31&e)<<6|n,i>=128)return i;throw Error(\"Invalid continuation byte\")}if(224==(240&e)){if(n=f(),r=f(),i=(15&e)<<12|n<<6|r,i>=2048)return c(i,t)?i:65533;throw Error(\"Invalid continuation byte\")}if(240==(248&e)&&(n=f(),r=f(),o=f(),i=(7&e)<<18|n<<12|r<<6|o,i>=65536&&i<=1114111))return i;throw Error(\"Invalid UTF-8 detected\")}function d(t,e){e=e||{};var n=!1!==e.strict;g=s(t),v=g.length,b=0;for(var r,o=[];(r=l(n))!==!1;)o.push(r);return a(o)}var y=\"object\"==typeof e&&e,m=(\"object\"==typeof t&&t&&t.exports==y&&t,\"object\"==typeof o&&o);m.global!==m&&m.window!==m||(i=m);var g,v,b,w=String.fromCharCode,k={version:\"2.1.2\",encode:h,decode:d};r=function(){return k}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))}(this)}).call(e,n(28)(t),function(){return this}())},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e){!function(){\"use strict\";for(var t=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\",n=new Uint8Array(256),r=0;r<t.length;r++)n[t.charCodeAt(r)]=r;e.encode=function(e){var n,r=new Uint8Array(e),o=r.length,i=\"\";for(n=0;n<o;n+=3)i+=t[r[n]>>2],i+=t[(3&r[n])<<4|r[n+1]>>4],i+=t[(15&r[n+1])<<2|r[n+2]>>6],i+=t[63&r[n+2]];return o%3===2?i=i.substring(0,i.length-1)+\"=\":o%3===1&&(i=i.substring(0,i.length-2)+\"==\"),i},e.decode=function(t){var e,r,o,i,s,a=.75*t.length,c=t.length,p=0;\"=\"===t[t.length-1]&&(a--,\"=\"===t[t.length-2]&&a--);var u=new ArrayBuffer(a),h=new Uint8Array(u);for(e=0;e<c;e+=4)r=n[t.charCodeAt(e)],o=n[t.charCodeAt(e+1)],i=n[t.charCodeAt(e+2)],s=n[t.charCodeAt(e+3)],h[p++]=r<<2|o>>4,h[p++]=(15&o)<<4|i>>2,h[p++]=(3&i)<<6|63&s;return u}}()},function(t,e){(function(e){function n(t){for(var e=0;e<t.length;e++){var n=t[e];if(n.buffer instanceof ArrayBuffer){var r=n.buffer;if(n.byteLength!==r.byteLength){var o=new Uint8Array(n.byteLength);o.set(new Uint8Array(r,n.byteOffset,n.byteLength)),r=o.buffer}t[e]=r}}}function r(t,e){e=e||{};var r=new i;n(t);for(var o=0;o<t.length;o++)r.append(t[o]);return e.type?r.getBlob(e.type):r.getBlob()}function o(t,e){return n(t),new Blob(t,e||{})}var i=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,s=function(){try{var t=new Blob([\"hi\"]);return 2===t.size}catch(e){return!1}}(),a=s&&function(){try{var t=new Blob([new Uint8Array([1,2])]);return 2===t.size}catch(e){return!1}}(),c=i&&i.prototype.append&&i.prototype.getBlob;t.exports=function(){return s?a?e.Blob:o:c?r:void 0}()}).call(e,function(){return this}())},function(t,e){e.encode=function(t){var e=\"\";for(var n in t)t.hasOwnProperty(n)&&(e.length&&(e+=\"&\"),e+=encodeURIComponent(n)+\"=\"+encodeURIComponent(t[n]));return e},e.decode=function(t){for(var e={},n=t.split(\"&\"),r=0,o=n.length;r<o;r++){var i=n[r].split(\"=\");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}},function(t,e){t.exports=function(t,e){var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e){\"use strict\";function n(t){var e=\"\";do e=s[t%a]+e,t=Math.floor(t/a);while(t>0);return e}function r(t){var e=0;for(u=0;u<t.length;u++)e=e*a+c[t.charAt(u)];return e}function o(){var t=n(+new Date);return t!==i?(p=0,i=t):t+\".\"+n(p++)}for(var i,s=\"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_\".split(\"\"),a=64,c={},p=0,u=0;u<a;u++)c[s[u]]=u;o.encode=n,o.decode=r,t.exports=o},function(t,e,n){(function(e){function r(){}function o(t){i.call(this,t),this.query=this.query||{},a||(e.___eio||(e.___eio=[]),a=e.___eio),this.index=a.length;var n=this;a.push(function(t){n.onData(t)}),this.query.j=this.index,e.document&&e.addEventListener&&e.addEventListener(\"beforeunload\",function(){n.script&&(n.script.onerror=r)},!1)}var i=n(21),s=n(32);t.exports=o;var a,c=/\\n/g,p=/\\\\n/g;s(o,i),o.prototype.supportsBinary=!1,o.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),i.prototype.doClose.call(this)},o.prototype.doPoll=function(){var t=this,e=document.createElement(\"script\");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(e){t.onError(\"jsonp poll error\",e)};var n=document.getElementsByTagName(\"script\")[0];n?n.parentNode.insertBefore(e,n):(document.head||document.body).appendChild(e),this.script=e;var r=\"undefined\"!=typeof navigator&&/gecko/i.test(navigator.userAgent);r&&setTimeout(function(){var t=document.createElement(\"iframe\");document.body.appendChild(t),document.body.removeChild(t)},100)},o.prototype.doWrite=function(t,e){function n(){r(),e()}function r(){if(o.iframe)try{o.form.removeChild(o.iframe)}catch(t){o.onError(\"jsonp polling iframe removal error\",t)}try{var e='<iframe src=\"javascript:0\" name=\"'+o.iframeId+'\">';i=document.createElement(e)}catch(t){i=document.createElement(\"iframe\"),i.name=o.iframeId,i.src=\"javascript:0\"}i.id=o.iframeId,o.form.appendChild(i),o.iframe=i}var o=this;if(!this.form){var i,s=document.createElement(\"form\"),a=document.createElement(\"textarea\"),u=this.iframeId=\"eio_iframe_\"+this.index;s.className=\"socketio\",s.style.position=\"absolute\",s.style.top=\"-1000px\",s.style.left=\"-1000px\",s.target=u,s.method=\"POST\",s.setAttribute(\"accept-charset\",\"utf-8\"),a.name=\"d\",s.appendChild(a),document.body.appendChild(s),this.form=s,this.area=a}this.form.action=this.uri(),r(),t=t.replace(p,\"\\\\\\n\"),this.area.value=t.replace(c,\"\\\\n\");try{this.form.submit()}catch(h){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){\"complete\"===o.iframe.readyState&&n()}:this.iframe.onload=n}}).call(e,function(){return this}())},function(t,e,n){(function(e){function r(t){var e=t&&t.forceBase64;e&&(this.supportsBinary=!1),this.perMessageDeflate=t.perMessageDeflate,this.usingBrowserWebSocket=h&&!t.forceNode,this.protocols=t.protocols,this.usingBrowserWebSocket||(l=o),i.call(this,t)}var o,i=n(22),s=n(23),a=n(31),c=n(32),p=n(33),u=n(3)(\"engine.io-client:websocket\"),h=e.WebSocket||e.MozWebSocket;if(\"undefined\"==typeof window)try{o=n(36)}catch(f){}var l=h;l||\"undefined\"!=typeof window||(l=o),t.exports=r,c(r,i),r.prototype.name=\"websocket\",r.prototype.supportsBinary=!0,r.prototype.doOpen=function(){if(this.check()){var t=this.uri(),e=this.protocols,n={agent:this.agent,perMessageDeflate:this.perMessageDeflate};n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(n.headers=this.extraHeaders),this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket?e?new l(t,e):new l(t):new l(t,e,n)}catch(r){return this.emit(\"error\",r)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType=\"nodebuffer\"):this.ws.binaryType=\"arraybuffer\",this.addEventListeners()}},r.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError(\"websocket error\",e)}},r.prototype.write=function(t){function n(){r.emit(\"flush\"),setTimeout(function(){r.writable=!0,r.emit(\"drain\")},0)}var r=this;this.writable=!1;for(var o=t.length,i=0,a=o;i<a;i++)!function(t){s.encodePacket(t,r.supportsBinary,function(i){if(!r.usingBrowserWebSocket){var s={};if(t.options&&(s.compress=t.options.compress),r.perMessageDeflate){var a=\"string\"==typeof i?e.Buffer.byteLength(i):i.length;a<r.perMessageDeflate.threshold&&(s.compress=!1)}}try{r.usingBrowserWebSocket?r.ws.send(i):r.ws.send(i,s)}catch(c){u(\"websocket closed before onclose event\")}--o||n()})}(t[i])},r.prototype.onClose=function(){i.prototype.onClose.call(this)},r.prototype.doClose=function(){\"undefined\"!=typeof this.ws&&this.ws.close()},r.prototype.uri=function(){var t=this.query||{},e=this.secure?\"wss\":\"ws\",n=\"\";this.port&&(\"wss\"===e&&443!==Number(this.port)||\"ws\"===e&&80!==Number(this.port))&&(n=\":\"+this.port),this.timestampRequests&&(t[this.timestampParam]=p()),this.supportsBinary||(t.b64=1),t=a.encode(t),t.length&&(t=\"?\"+t);var r=this.hostname.indexOf(\":\")!==-1;return e+\"://\"+(r?\"[\"+this.hostname+\"]\":this.hostname)+n+this.path+t},r.prototype.check=function(){return!(!l||\"__initialize\"in l&&this.name===r.prototype.name)}}).call(e,function(){return this}())},function(t,e){},function(t,e){var n=[].indexOf;t.exports=function(t,e){if(n)return t.indexOf(e);for(var r=0;r<t.length;++r)if(t[r]===e)return r;return-1}},function(t,e){(function(e){var n=/^[\\],:{}\\s]*$/,r=/\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g,o=/\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g,i=/(?:^|:|,)(?:\\s*\\[)+/g,s=/^\\s+/,a=/\\s+$/;t.exports=function(t){return\"string\"==typeof t&&t?(t=t.replace(s,\"\").replace(a,\"\"),e.JSON&&JSON.parse?JSON.parse(t):n.test(t.replace(r,\"@\").replace(o,\"]\").replace(i,\"\"))?new Function(\"return \"+t)():void 0):null}}).call(e,function(){return this}())},function(t,e,n){\"use strict\";function r(t,e,n){this.io=t,this.nsp=e,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}var o=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t},i=n(7),s=n(8),a=n(40),c=n(41),p=n(42),u=n(3)(\"socket.io-client:socket\"),h=n(31);t.exports=e=r;var f={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},l=s.prototype.emit;s(r.prototype),r.prototype.subEvents=function(){if(!this.subs){var t=this.io;this.subs=[c(t,\"open\",p(this,\"onopen\")),c(t,\"packet\",p(this,\"onpacket\")),c(t,\"close\",p(this,\"onclose\"))]}},r.prototype.open=r.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),\"open\"===this.io.readyState&&this.onopen(),this.emit(\"connecting\"),this)},r.prototype.send=function(){var t=a(arguments);return t.unshift(\"message\"),this.emit.apply(this,t),this},r.prototype.emit=function(t){if(f.hasOwnProperty(t))return l.apply(this,arguments),this;var e=a(arguments),n={type:i.EVENT,data:e};return n.options={},n.options.compress=!this.flags||!1!==this.flags.compress,\"function\"==typeof e[e.length-1]&&(u(\"emitting packet with ack id %d\",this.ids),this.acks[this.ids]=e.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),delete this.flags,this},r.prototype.packet=function(t){t.nsp=this.nsp,this.io.packet(t)},r.prototype.onopen=function(){if(u(\"transport is open - connecting\"),\"/\"!==this.nsp)if(this.query){var t=\"object\"===o(this.query)?h.encode(this.query):this.query;u(\"sending connect packet with query %s\",t),this.packet({type:i.CONNECT,query:t})}else this.packet({type:i.CONNECT})},r.prototype.onclose=function(t){u(\"close (%s)\",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emit(\"disconnect\",t)},r.prototype.onpacket=function(t){if(t.nsp===this.nsp)switch(t.type){case i.CONNECT:this.onconnect();break;case i.EVENT:this.onevent(t);break;case i.BINARY_EVENT:this.onevent(t);break;case i.ACK:this.onack(t);break;case i.BINARY_ACK:this.onack(t);break;case i.DISCONNECT:this.ondisconnect();break;case i.ERROR:this.emit(\"error\",t.data)}},r.prototype.onevent=function(t){var e=t.data||[];u(\"emitting event %j\",e),null!=t.id&&(u(\"attaching ack callback to event\"),e.push(this.ack(t.id))),this.connected?l.apply(this,e):this.receiveBuffer.push(e)},r.prototype.ack=function(t){var e=this,n=!1;return function(){if(!n){n=!0;var r=a(arguments);u(\"sending ack %j\",r),e.packet({type:i.ACK,id:t,data:r})}}},r.prototype.onack=function(t){var e=this.acks[t.id];\"function\"==typeof e?(u(\"calling ack %s with %j\",t.id,t.data),e.apply(this,t.data),delete this.acks[t.id]):u(\"bad ack %s\",t.id)},r.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit(\"connect\"),this.emitBuffered()},r.prototype.emitBuffered=function(){var t;for(t=0;t<this.receiveBuffer.length;t++)l.apply(this,this.receiveBuffer[t]);for(this.receiveBuffer=[],t=0;t<this.sendBuffer.length;t++)this.packet(this.sendBuffer[t]);this.sendBuffer=[]},r.prototype.ondisconnect=function(){u(\"server disconnect (%s)\",this.nsp),this.destroy(),this.onclose(\"io server disconnect\")},r.prototype.destroy=function(){if(this.subs){for(var t=0;t<this.subs.length;t++)this.subs[t].destroy();this.subs=null}this.io.destroy(this)},r.prototype.close=r.prototype.disconnect=function(){return this.connected&&(u(\"performing disconnect (%s)\",this.nsp),this.packet({type:i.DISCONNECT})),this.destroy(),this.connected&&this.onclose(\"io client disconnect\"),this},r.prototype.compress=function(t){return this.flags=this.flags||{},this.flags.compress=t,this}},function(t,e){function n(t,e){var n=[];e=e||0;for(var r=e||0;r<t.length;r++)n[r-e]=t[r];return n}t.exports=n},function(t,e){\"use strict\";function n(t,e,n){return t.on(e,n),{destroy:function(){t.removeListener(e,n)}}}t.exports=n},function(t,e){var n=[].slice;t.exports=function(t,e){if(\"string\"==typeof e&&(e=t[e]),\"function\"!=typeof e)throw new Error(\"bind() requires a function\");var r=n.call(arguments,2);return function(){return e.apply(t,r.concat(n.call(arguments)))}}},function(t,e){function n(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}t.exports=n,n.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-n:t+n}return 0|Math.min(t,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(t){this.ms=t},n.prototype.setMax=function(t){this.max=t},n.prototype.setJitter=function(t){this.jitter=t}}])});\r\n","import io from '../lib/socket.io.old';\r\n\r\n/*global L*/\r\n'use strict';\r\n/*\r\n* Class EventDispatcher provides event handling to sub-classes.\r\n* It is inherited from Publisher, Room, etc.\r\n*/\r\nvar Erizo = Erizo || {};\r\nErizo.EventDispatcher = function (spec) {\r\n    var that = {};\r\n    // Private vars\r\n    spec.dispatcher = {};\r\n    spec.dispatcher.eventListeners = {};\r\n\r\n    // Public functions\r\n\r\n    // It adds an event listener attached to an event type.\r\n    that.addEventListener = function (eventType, listener) {\r\n        if (spec.dispatcher.eventListeners[eventType] === undefined) {\r\n            spec.dispatcher.eventListeners[eventType] = [];\r\n        }\r\n        spec.dispatcher.eventListeners[eventType].push(listener);\r\n    };\r\n\r\n    // It removes an available event listener.\r\n    that.removeEventListener = function (eventType, listener) {\r\n        var index;\r\n        index = spec.dispatcher.eventListeners[eventType].indexOf(listener);\r\n        if (index !== -1) {\r\n            spec.dispatcher.eventListeners[eventType].splice(index, 1);\r\n        }\r\n    };\r\n\r\n    // It dispatch a new event to the event listeners, based on the type\r\n    // of event. All events are intended to be LicodeEvents.\r\n    that.dispatchEvent = function (event) {\r\n        var listener;\r\n        L.Logger.debug('Event: ' + event.type);\r\n        for (listener in spec.dispatcher.eventListeners[event.type]) {\r\n            if (spec.dispatcher.eventListeners[event.type].hasOwnProperty(listener)) {\r\n                spec.dispatcher.eventListeners[event.type][listener](event);\r\n            }\r\n        }\r\n    };\r\n\r\n    return that;\r\n};\r\n\r\n// **** EVENTS ****\r\n\r\n/*\r\n* Class LicodeEvent represents a generic Event in the library.\r\n* It handles the type of event, that is important when adding\r\n* event listeners to EventDispatchers and dispatching new events.\r\n* A LicodeEvent can be initialized this way:\r\n* var event = LicodeEvent({type: \"room-connected\"});\r\n*/\r\nErizo.LicodeEvent = function (spec) {\r\n    var that = {};\r\n\r\n    // Event type. Examples are: 'room-connected', 'stream-added', etc.\r\n    that.type = spec.type;\r\n\r\n    return that;\r\n};\r\n\r\n/*\r\n* Class RoomEvent represents an Event that happens in a Room. It is a\r\n* LicodeEvent.\r\n* It is usually initialized as:\r\n* var roomEvent = RoomEvent({type:\"room-connected\", streams:[stream1, stream2]});\r\n* Event types:\r\n* 'room-connected' - points out that the user has been successfully connected to the room.\r\n* 'room-disconnected' - shows that the user has been already disconnected.\r\n*/\r\nErizo.RoomEvent = function (spec) {\r\n    var that = Erizo.LicodeEvent(spec);\r\n\r\n    // A list with the streams that are published in the room.\r\n    that.streams = spec.streams;\r\n    that.message = spec.message;\r\n\r\n    return that;\r\n};\r\n\r\n/*\r\n* Class StreamEvent represents an event related to a stream. It is a LicodeEvent.\r\n* It is usually initialized this way:\r\n* var streamEvent = StreamEvent({type:\"stream-added\", stream:stream1});\r\n* Event types:\r\n* 'stream-added' - indicates that there is a new stream available in the room.\r\n* 'stream-removed' - shows that a previous available stream has been removed from the room.\r\n*/\r\nErizo.StreamEvent = function (spec) {\r\n    var that = Erizo.LicodeEvent(spec);\r\n\r\n    // The stream related to this event.\r\n    that.stream = spec.stream;\r\n\r\n    that.msg = spec.msg;\r\n    that.bandwidth = spec.bandwidth;\r\n\r\n    return that;\r\n};\r\n\r\n/*\r\n* Class PublisherEvent represents an event related to a publisher. It is a LicodeEvent.\r\n* It usually initializes as:\r\n* var publisherEvent = PublisherEvent({})\r\n* Event types:\r\n* 'access-accepted' - indicates that the user has accepted to share his camera and microphone\r\n*/\r\nErizo.PublisherEvent = function (spec) {\r\n    var that = Erizo.LicodeEvent(spec);\r\n\r\n    return that;\r\n};\r\n/*global console*/\r\n'use strict';\r\nvar Erizo = Erizo || {};\r\n\r\nErizo.FcStack = function (spec) {\r\n/*\r\n        spec.callback({\r\n            type: sessionDescription.type,\r\n            sdp: sessionDescription.sdp\r\n        });\r\n*/\r\n    var that = {};\r\n\r\n    that.pcConfig = {};\r\n\r\n    that.peerConnection = {};\r\n    that.desc = {};\r\n    that.signalCallback = undefined;\r\n\r\n    that.close = function() {\r\n        console.log('Close FcStack');\r\n    };\r\n\r\n    that.createOffer = function() {\r\n        console.log('FCSTACK: CreateOffer');\r\n    };\r\n\r\n    that.addStream = function(stream) {\r\n        console.log('FCSTACK: addStream', stream);\r\n    };\r\n\r\n    that.processSignalingMessage = function(msg) {\r\n        console.log('FCSTACK: processSignaling', msg);\r\n        if(that.signalCallback !== undefined)\r\n            that.signalCallback(msg);\r\n    };\r\n\r\n    that.sendSignalingMessage = function(msg) {\r\n        console.log('FCSTACK: Sending signaling Message', msg);\r\n        spec.callback(msg);\r\n    };\r\n\r\n    that.setSignalingCallback = function(callback) {\r\n        console.log('FCSTACK: Setting signalling callback');\r\n        that.signalCallback = callback;\r\n    };\r\n    return that;\r\n};\r\n/*global L, RTCSessionDescription, webkitRTCPeerConnection, RTCIceCandidate*/\r\n'use strict';\r\n\r\nvar Erizo = Erizo || {};\r\n\r\nErizo.ChromeStableStack = function (spec) {\r\n    var that = {},\r\n        WebkitRTCPeerConnection = webkitRTCPeerConnection;\r\n\r\n    that.pcConfig = {\r\n        'iceServers': []\r\n    };\r\n\r\n\r\n    that.con = {'optional': [{'DtlsSrtpKeyAgreement': true}]};\r\n\r\n    if (spec.iceServers !== undefined) {\r\n        that.pcConfig.iceServers = spec.iceServers;\r\n    }\r\n\r\n    if (spec.audio === undefined) {\r\n        spec.audio = true;\r\n    }\r\n\r\n    if (spec.video === undefined) {\r\n        spec.video = true;\r\n    }\r\n\r\n    that.mediaConstraints = {\r\n        mandatory: {\r\n            'OfferToReceiveVideo': spec.video,\r\n            'OfferToReceiveAudio': spec.audio\r\n        }\r\n    };\r\n\r\n    var errorCallback = function (message) {\r\n        L.Logger.error('Error in Stack ', message);\r\n    };\r\n\r\n    that.peerConnection = new WebkitRTCPeerConnection(that.pcConfig, that.con);\r\n\r\n    var setMaxBW = function (sdp) {\r\n        var r, a;\r\n        if (spec.video && spec.maxVideoBW) {\r\n            sdp = sdp.replace(/b=AS:.*\\r\\n/g, '');\r\n            a = sdp.match(/m=video.*\\r\\n/);\r\n            if (a == null) {\r\n                a = sdp.match(/m=video.*\\n/);\r\n            }\r\n            if (a && (a.length > 0)) {\r\n                r = a[0] + 'b=AS:' + spec.maxVideoBW + '\\r\\n';\r\n                sdp = sdp.replace(a[0], r);\r\n            }\r\n        }\r\n\r\n        if (spec.audio && spec.maxAudioBW) {\r\n            a = sdp.match(/m=audio.*\\r\\n/);\r\n            if (a == null) {\r\n                a = sdp.match(/m=audio.*\\n/);\r\n            }\r\n            if (a && (a.length > 0)) {\r\n                r = a[0] + 'b=AS:' + spec.maxAudioBW + '\\r\\n';\r\n                sdp = sdp.replace(a[0], r);\r\n            }\r\n        }\r\n        return sdp;\r\n    };\r\n\r\n    var enableOpusNacks = function (sdp) {\r\n        var sdpMatch;\r\n        sdpMatch = sdp.match(/a=rtpmap:(.*)opus.*\\r\\n/);\r\n        if (sdpMatch !== null){\r\n            var theLine = sdpMatch[0] + 'a=rtcp-fb:' + sdpMatch[1] + 'nack' + '\\r\\n';\r\n            sdp = sdp.replace(sdpMatch[0], theLine);\r\n        }\r\n\r\n        return sdp;\r\n    };\r\n\r\n    /**\r\n     * Closes the connection.\r\n     */\r\n    that.close = function () {\r\n        that.state = 'closed';\r\n        that.peerConnection.close();\r\n    };\r\n\r\n    spec.localCandidates = [];\r\n\r\n    that.peerConnection.onicecandidate = function (event) {\r\n        var candidateObject = {};\r\n        if (!event.candidate) {\r\n            L.Logger.info('Gathered all candidates. Sending END candidate');\r\n            candidateObject = {\r\n                sdpMLineIndex: -1 ,\r\n                sdpMid: 'end',\r\n                candidate: 'end'\r\n            };\r\n        }else{\r\n\r\n            if (!event.candidate.candidate.match(/a=/)) {\r\n                event.candidate.candidate = 'a=' + event.candidate.candidate;\r\n            }\r\n\r\n            candidateObject = {\r\n                sdpMLineIndex: event.candidate.sdpMLineIndex,\r\n                sdpMid: event.candidate.sdpMid,\r\n                candidate: event.candidate.candidate\r\n            };\r\n        }\r\n\r\n        if (spec.remoteDescriptionSet) {\r\n            spec.callback({type: 'candidate', candidate: candidateObject});\r\n        } else {\r\n            spec.localCandidates.push(candidateObject);\r\n            L.Logger.info('Storing candidate: ', spec.localCandidates.length, candidateObject);\r\n        }\r\n\r\n    };\r\n\r\n    that.peerConnection.onaddstream = function (stream) {\r\n        if (that.onaddstream) {\r\n            that.onaddstream(stream);\r\n        }\r\n    };\r\n\r\n    that.peerConnection.onremovestream = function (stream) {\r\n        if (that.onremovestream) {\r\n            that.onremovestream(stream);\r\n        }\r\n    };\r\n\r\n    that.peerConnection.oniceconnectionstatechange = function (ev) {\r\n        if (that.oniceconnectionstatechange){\r\n            that.oniceconnectionstatechange(ev.target.iceConnectionState);\r\n        }\r\n    };\r\n\r\n    var localDesc;\r\n    var remoteDesc;\r\n\r\n    var setLocalDesc = function (sessionDescription) {\r\n        sessionDescription.sdp = setMaxBW(sessionDescription.sdp);\r\n        sessionDescription.sdp = enableOpusNacks(sessionDescription.sdp);\r\n        sessionDescription.sdp = sessionDescription.sdp.replace(/a=ice-options:google-ice\\r\\n/g,\r\n                                                                '');\r\n        spec.callback({\r\n            type: sessionDescription.type,\r\n            sdp: sessionDescription.sdp\r\n        });\r\n        localDesc = sessionDescription;\r\n        //that.peerConnection.setLocalDescription(sessionDescription);\r\n    };\r\n\r\n    var setLocalDescp2p = function (sessionDescription) {\r\n        sessionDescription.sdp = setMaxBW(sessionDescription.sdp);\r\n        spec.callback({\r\n            type: sessionDescription.type,\r\n            sdp: sessionDescription.sdp\r\n        });\r\n        localDesc = sessionDescription;\r\n        that.peerConnection.setLocalDescription(sessionDescription);\r\n    };\r\n\r\n    that.updateSpec = function (config, callback){\r\n        if (config.maxVideoBW || config.maxAudioBW ){\r\n            if (config.maxVideoBW){\r\n                L.Logger.debug ('Maxvideo Requested:', config.maxVideoBW,\r\n                                'limit:', spec.limitMaxVideoBW);\r\n                if (config.maxVideoBW > spec.limitMaxVideoBW) {\r\n                    config.maxVideoBW = spec.limitMaxVideoBW;\r\n                }\r\n                spec.maxVideoBW = config.maxVideoBW;\r\n                L.Logger.debug ('Result', spec.maxVideoBW);\r\n            }\r\n            if (config.maxAudioBW) {\r\n                if (config.maxAudioBW > spec.limitMaxAudioBW) {\r\n                    config.maxAudioBW = spec.limitMaxAudioBW;\r\n                }\r\n                spec.maxAudioBW = config.maxAudioBW;\r\n            }\r\n\r\n            localDesc.sdp = setMaxBW(localDesc.sdp);\r\n            if (config.Sdp || config.maxAudioBW){\r\n                L.Logger.debug ('Updating with SDP renegotiation', spec.maxVideoBW);\r\n                that.peerConnection.setLocalDescription(localDesc, function () {\r\n                    remoteDesc.sdp = setMaxBW(remoteDesc.sdp);\r\n                    that.peerConnection.setRemoteDescription(\r\n                    new RTCSessionDescription(remoteDesc), function () {\r\n                        spec.remoteDescriptionSet = true;\r\n                        spec.callback({type:'updatestream', sdp: localDesc.sdp});\r\n                    });\r\n                }, function (error){\r\n                    L.Logger.error('Error updating configuration', error);\r\n                    callback('error');\r\n                });\r\n\r\n            } else {\r\n                L.Logger.debug ('Updating without SDP renegotiation, ' +\r\n                                'newVideoBW:', spec.maxVideoBW,\r\n                                'newAudioBW:', spec.maxAudioBW);\r\n                spec.callback({type:'updatestream', sdp: localDesc.sdp});\r\n            }\r\n        }\r\n        if (config.minVideoBW || (config.slideShowMode!==undefined) ||\r\n            (config.muteStream !== undefined)){\r\n            L.Logger.debug ('MinVideo Changed to ', config.minVideoBW);\r\n            L.Logger.debug ('SlideShowMode Changed to ', config.slideShowMode);\r\n            L.Logger.debug ('muteStream changed to ', config.muteStream);\r\n            spec.callback({type: 'updatestream', config:config});\r\n        }\r\n    };\r\n\r\n    that.createOffer = function (isSubscribe) {\r\n        if (isSubscribe === true) {\r\n            that.peerConnection.createOffer(setLocalDesc, errorCallback, that.mediaConstraints);\r\n        } else {\r\n            that.peerConnection.createOffer(setLocalDesc, errorCallback, {iceRestart: true});\r\n        }\r\n\r\n    };\r\n\r\n    that.addStream = function (stream) {\r\n        that.peerConnection.addStream(stream);\r\n    };\r\n    spec.remoteCandidates = [];\r\n\r\n    spec.remoteDescriptionSet = false;\r\n\r\n    that.processSignalingMessage = function (msg) {\r\n        //L.Logger.info(\"Process Signaling Message\", msg);\r\n\r\n        if (msg.type === 'offer') {\r\n            msg.sdp = setMaxBW(msg.sdp);\r\n            that.peerConnection.setRemoteDescription(new RTCSessionDescription(msg), function () {\r\n                that.peerConnection.createAnswer(setLocalDescp2p, function (error) {\r\n                    L.Logger.error('Error: ', error);\r\n                }, that.mediaConstraints);\r\n                spec.remoteDescriptionSet = true;\r\n            }, function (error) {\r\n                L.Logger.error('Error setting Remote Description', error);\r\n            });\r\n\r\n\r\n        } else if (msg.type === 'answer') {\r\n            L.Logger.info('Set remote and local description');\r\n            L.Logger.debug('Remote Description', msg.sdp);\r\n            L.Logger.debug('Local Description', localDesc.sdp);\r\n\r\n            msg.sdp = setMaxBW(msg.sdp);\r\n\r\n            remoteDesc = msg;\r\n            that.peerConnection.setLocalDescription(localDesc, function () {\r\n                that.peerConnection.setRemoteDescription(\r\n                new RTCSessionDescription(msg), function () {\r\n                    spec.remoteDescriptionSet = true;\r\n                    L.Logger.info('Candidates to be added: ', spec.remoteCandidates.length,\r\n                                spec.remoteCandidates);\r\n                    while (spec.remoteCandidates.length > 0) {\r\n                        // IMPORTANT: preserve ordering of candidates\r\n                        that.peerConnection.addIceCandidate(spec.remoteCandidates.shift());\r\n                    }\r\n                    L.Logger.info('Local candidates to send:', spec.localCandidates.length);\r\n                    while (spec.localCandidates.length > 0) {\r\n                        // IMPORTANT: preserve ordering of candidates\r\n                        spec.callback({type: 'candidate', candidate: spec.localCandidates.shift()});\r\n                    }\r\n                });\r\n            });\r\n\r\n        } else if (msg.type === 'candidate') {\r\n            try {\r\n                var obj;\r\n                if (typeof(msg.candidate) === 'object') {\r\n                    obj = msg.candidate;\r\n                } else {\r\n                    obj = JSON.parse(msg.candidate);\r\n                }\r\n                obj.candidate = obj.candidate.replace(/a=/g, '');\r\n                obj.sdpMLineIndex = parseInt(obj.sdpMLineIndex);\r\n                var candidate = new RTCIceCandidate(obj);\r\n                if (spec.remoteDescriptionSet) {\r\n                    that.peerConnection.addIceCandidate(candidate);\r\n                } else {\r\n                    spec.remoteCandidates.push(candidate);\r\n                }\r\n            } catch (e) {\r\n                L.Logger.error('Error parsing candidate', msg.candidate);\r\n            }\r\n        }\r\n    };\r\n\r\n    return that;\r\n};\r\n/*global L, window, RTCSessionDescription, webkitRTCPeerConnection*/\r\n'use strict';\r\n\r\nvar Erizo = Erizo || {};\r\n\r\nErizo.ChromeCanaryStack = function (spec) {\r\n    var that = {},\r\n        WebkitRTCPeerConnection = webkitRTCPeerConnection;\r\n\r\n    that.pcConfig = {\r\n        'iceServers': []\r\n    };\r\n\r\n    that.con = {'optional': [{'DtlsSrtpKeyAgreement': true}]};\r\n\r\n    if (spec.stunServerUrl !== undefined) {\r\n        that.pcConfig.iceServers.push({'url': spec.stunServerUrl});\r\n    }\r\n\r\n    if ((spec.turnServer || {}).url) {\r\n        that.pcConfig.iceServers.push({'username': spec.turnServer.username,\r\n                                        'credential': spec.turnServer.password,\r\n                                        'url': spec.turnServer.url});\r\n    }\r\n\r\n    if (spec.audio === undefined || spec.nop2p) {\r\n        spec.audio = true;\r\n    }\r\n\r\n    if (spec.video === undefined || spec.nop2p) {\r\n        spec.video = true;\r\n    }\r\n\r\n    that.mediaConstraints = {\r\n        'mandatory': {\r\n            'OfferToReceiveVideo': spec.video,\r\n            'OfferToReceiveAudio': spec.audio\r\n        }\r\n    };\r\n\r\n    that.roapSessionId = 103;\r\n\r\n    that.peerConnection = new WebkitRTCPeerConnection(that.pcConfig, that.con);\r\n\r\n    that.peerConnection.onicecandidate = function (event) {\r\n        L.Logger.debug('PeerConnection: ', spec.sessionId);\r\n        if (!event.candidate) {\r\n            // At the moment, we do not renegotiate when new candidates\r\n            // show up after the more flag has been false once.\r\n            L.Logger.debug('State: ' + that.peerConnection.iceGatheringState);\r\n\r\n            if (that.ices === undefined) {\r\n                that.ices = 0;\r\n            }\r\n            that.ices = that.ices + 1;\r\n            if (that.ices >= 1 && that.moreIceComing) {\r\n                that.moreIceComing = false;\r\n                that.markActionNeeded();\r\n            }\r\n        } else {\r\n            that.iceCandidateCount += 1;\r\n        }\r\n    };\r\n\r\n    //L.Logger.debug('Created webkitRTCPeerConnnection with config \\\"' +\r\n    //                                  JSON.stringify(that.pcConfig) + '\\\".');\r\n\r\n    var setMaxBW = function (sdp) {\r\n        var r, a;\r\n        if (spec.maxVideoBW) {\r\n            a = sdp.match(/m=video.*\\r\\n/);\r\n            if (a && (a.length > 0)) {\r\n                r = a[0] + 'b=AS:' + spec.maxVideoBW + '\\r\\n';\r\n                sdp = sdp.replace(a[0], r);\r\n            }\r\n        }\r\n\r\n        if (spec.maxAudioBW) {\r\n            a = sdp.match(/m=audio.*\\r\\n/);\r\n            if (a && (a.length > 0)) {\r\n                r = a[0] + 'b=AS:' + spec.maxAudioBW + '\\r\\n';\r\n                sdp = sdp.replace(a[0], r);\r\n            }\r\n        }\r\n\r\n        return sdp;\r\n    };\r\n\r\n    /**\r\n     * This function processes signalling messages from the other side.\r\n     * @param {string} msgstring JSON-formatted string containing a ROAP message.\r\n     */\r\n    that.processSignalingMessage = function (msgstring) {\r\n        // Offer: Check for glare and resolve.\r\n        // Answer/OK: Remove retransmit for the msg this is an answer to.\r\n        // Send back \"OK\" if this was an Answer.\r\n        L.Logger.debug('Activity on conn ' + that.sessionId);\r\n        var msg = JSON.parse(msgstring), sd;\r\n        that.incomingMessage = msg;\r\n\r\n        if (that.state === 'new') {\r\n            if (msg.messageType === 'OFFER') {\r\n                // Initial offer.\r\n                sd = {\r\n                    sdp: msg.sdp,\r\n                    type: 'offer'\r\n                };\r\n                that.peerConnection.setRemoteDescription(new RTCSessionDescription(sd));\r\n\r\n                that.state = 'offer-received';\r\n                // Allow other stuff to happen, then reply.\r\n                that.markActionNeeded();\r\n            } else {\r\n                that.error('Illegal message for this state: ' + msg.messageType +\r\n                            ' in state ' + that.state);\r\n            }\r\n\r\n        } else if (that.state === 'offer-sent') {\r\n            if (msg.messageType === 'ANSWER') {\r\n\r\n                //regExp = new RegExp(/m=video[\\w\\W]*\\r\\n/g);\r\n\r\n                //exp = msg.sdp.match(regExp);\r\n                //L.Logger.debug(exp);\r\n\r\n                //msg.sdp = msg.sdp.replace(regExp, exp + \"b=AS:100\\r\\n\");\r\n\r\n                sd = {\r\n                    sdp: msg.sdp,\r\n                    type: 'answer'\r\n                };\r\n                L.Logger.debug('Received ANSWER: ', sd.sdp);\r\n\r\n                sd.sdp = setMaxBW(sd.sdp);\r\n\r\n                that.peerConnection.setRemoteDescription(new RTCSessionDescription(sd));\r\n                that.sendOK();\r\n                that.state = 'established';\r\n\r\n            } else if (msg.messageType === 'pr-answer') {\r\n                sd = {\r\n                    sdp: msg.sdp,\r\n                    type: 'pr-answer'\r\n                };\r\n                that.peerConnection.setRemoteDescription(new RTCSessionDescription(sd));\r\n\r\n                // No change to state, and no response.\r\n            } else if (msg.messageType === 'offer') {\r\n                // Glare processing.\r\n                that.error('Not written yet');\r\n            } else {\r\n                that.error('Illegal message for this state: ' + msg.messageType +\r\n                            ' in state ' + that.state);\r\n            }\r\n\r\n        } else if (that.state === 'established') {\r\n            if (msg.messageType === 'OFFER') {\r\n                // Subsequent offer.\r\n                sd = {\r\n                    sdp: msg.sdp,\r\n                    type: 'offer'\r\n                };\r\n                that.peerConnection.setRemoteDescription(new RTCSessionDescription(sd));\r\n\r\n                that.state = 'offer-received';\r\n                // Allow other stuff to happen, then reply.\r\n                that.markActionNeeded();\r\n            } else {\r\n                that.error('Illegal message for this state: ' + msg.messageType +\r\n                            ' in state ' + that.state);\r\n            }\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Adds a stream - this causes signalling to happen, if needed.\r\n     * @param {MediaStream} stream The outgoing MediaStream to add.\r\n     */\r\n    that.addStream = function (stream) {\r\n        that.peerConnection.addStream(stream);\r\n        that.markActionNeeded();\r\n    };\r\n\r\n    /**\r\n     * Removes a stream.\r\n     * @param {MediaStream} stream The MediaStream to remove.\r\n     */\r\n    that.removeStream = function () {\r\n//        var i;\r\n//        for (i = 0; i < that.peerConnection.localStreams.length; ++i) {\r\n//            if (that.localStreams[i] === stream) {\r\n//                that.localStreams[i] = null;\r\n//            }\r\n//        }\r\n        that.markActionNeeded();\r\n    };\r\n\r\n    /**\r\n     * Closes the connection.\r\n     */\r\n    that.close = function () {\r\n        that.state = 'closed';\r\n        that.peerConnection.close();\r\n    };\r\n\r\n    /**\r\n     * Internal function: Mark that something happened.\r\n     */\r\n    that.markActionNeeded = function () {\r\n        that.actionNeeded = true;\r\n        that.doLater(function () {\r\n            that.onstablestate();\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Internal function: Do something later (not on this stack).\r\n     * @param {function} what Callback to be executed later.\r\n     */\r\n    that.doLater = function (what) {\r\n        // Post an event to myself so that I get called a while later.\r\n        // (needs more JS/DOM info. Just call the processing function on a delay\r\n        // for now.)\r\n        window.setTimeout(what, 1);\r\n    };\r\n\r\n    /**\r\n     * Internal function called when a stable state\r\n     * is entered by the browser (to allow for multiple AddStream calls or\r\n     * other interesting actions).\r\n     * This function will generate an offer or answer, as needed, and send\r\n     * to the remote party using our onsignalingmessage function.\r\n     */\r\n    that.onstablestate = function () {\r\n        var mySDP;\r\n        if (that.actionNeeded) {\r\n            if (that.state === 'new' || that.state === 'established') {\r\n                // See if the current offer is the same as what we already sent.\r\n                // If not, no change is needed.\r\n\r\n                that.peerConnection.createOffer(function (sessionDescription) {\r\n\r\n                    sessionDescription.sdp = setMaxBW(sessionDescription.sdp);\r\n                    L.Logger.debug('Changed', sessionDescription.sdp);\r\n\r\n                    var newOffer = sessionDescription.sdp;\r\n\r\n                    if (newOffer !== that.prevOffer) {\r\n\r\n                        that.peerConnection.setLocalDescription(sessionDescription);\r\n\r\n                        that.state = 'preparing-offer';\r\n                        that.markActionNeeded();\r\n                        return;\r\n                    } else {\r\n                        L.Logger.debug('Not sending a new offer');\r\n                    }\r\n\r\n                }, null, that.mediaConstraints);\r\n\r\n\r\n            } else if (that.state === 'preparing-offer') {\r\n                // Don't do anything until we have the ICE candidates.\r\n                if (that.moreIceComing) {\r\n                    return;\r\n                }\r\n\r\n\r\n                // Now able to send the offer we've already prepared.\r\n                that.prevOffer = that.peerConnection.localDescription.sdp;\r\n                L.Logger.debug('Sending OFFER: ' + that.prevOffer);\r\n                //L.Logger.debug('Sent SDP is ' + that.prevOffer);\r\n                that.sendMessage('OFFER', that.prevOffer);\r\n                // Not done: Retransmission on non-response.\r\n                that.state = 'offer-sent';\r\n\r\n            } else if (that.state === 'offer-received') {\r\n\r\n                that.peerConnection.createAnswer(function (sessionDescription) {\r\n                    that.peerConnection.setLocalDescription(sessionDescription);\r\n                    that.state = 'offer-received-preparing-answer';\r\n\r\n                    if (!that.iceStarted) {\r\n                        var now = new Date();\r\n                        L.Logger.debug(now.getTime() + ': Starting ICE in responder');\r\n                        that.iceStarted = true;\r\n                    } else {\r\n                        that.markActionNeeded();\r\n                        return;\r\n                    }\r\n\r\n                }, null, that.mediaConstraints);\r\n\r\n            } else if (that.state === 'offer-received-preparing-answer') {\r\n                if (that.moreIceComing) {\r\n                    return;\r\n                }\r\n\r\n                mySDP = that.peerConnection.localDescription.sdp;\r\n\r\n                that.sendMessage('ANSWER', mySDP);\r\n                that.state = 'established';\r\n            } else {\r\n                that.error('Dazed and confused in state ' + that.state + ', stopping here');\r\n            }\r\n            that.actionNeeded = false;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Internal function to send an \"OK\" message.\r\n     */\r\n    that.sendOK = function () {\r\n        that.sendMessage('OK');\r\n    };\r\n\r\n    /**\r\n     * Internal function to send a signalling message.\r\n     * @param {string} operation What operation to signal.\r\n     * @param {string} sdp SDP message body.\r\n     */\r\n    that.sendMessage = function (operation, sdp) {\r\n        var roapMessage = {};\r\n        roapMessage.messageType = operation;\r\n        roapMessage.sdp = sdp; // may be null or undefined\r\n        if (operation === 'OFFER') {\r\n            roapMessage.offererSessionId = that.sessionId;\r\n            roapMessage.answererSessionId = that.otherSessionId; // may be null\r\n            roapMessage.seq = (that.sequenceNumber += 1);\r\n            // The tiebreaker needs to be neither 0 nor 429496725.\r\n            roapMessage.tiebreaker = Math.floor(Math.random() * 429496723 + 1);\r\n        } else {\r\n            roapMessage.offererSessionId = that.incomingMessage.offererSessionId;\r\n            roapMessage.answererSessionId = that.sessionId;\r\n            roapMessage.seq = that.incomingMessage.seq;\r\n        }\r\n        that.onsignalingmessage(JSON.stringify(roapMessage));\r\n    };\r\n\r\n    /**\r\n     * Internal something-bad-happened function.\r\n     * @param {string} text What happened - suitable for logging.\r\n     */\r\n    that.error = function (text) {\r\n        throw 'Error in RoapOnJsep: ' + text;\r\n    };\r\n\r\n    that.sessionId = (that.roapSessionId += 1);\r\n    that.sequenceNumber = 0; // Number of last ROAP message sent. Starts at 1.\r\n    that.actionNeeded = false;\r\n    that.iceStarted = false;\r\n    that.moreIceComing = true;\r\n    that.iceCandidateCount = 0;\r\n    that.onsignalingmessage = spec.callback;\r\n\r\n    that.peerConnection.onopen = function () {\r\n        if (that.onopen) {\r\n            that.onopen();\r\n        }\r\n    };\r\n\r\n    that.peerConnection.onaddstream = function (stream) {\r\n        if (that.onaddstream) {\r\n            that.onaddstream(stream);\r\n        }\r\n    };\r\n\r\n    that.peerConnection.onremovestream = function (stream) {\r\n        if (that.onremovestream) {\r\n            that.onremovestream(stream);\r\n        }\r\n    };\r\n\r\n    that.peerConnection.oniceconnectionstatechange = function (e) {\r\n        if (that.oniceconnectionstatechange) {\r\n            that.oniceconnectionstatechange(e.currentTarget.iceConnectionState);\r\n        }\r\n    };\r\n\r\n    // Variables that are part of the public interface of PeerConnection\r\n    // in the 28 January 2012 version of the webrtc specification.\r\n    that.onaddstream = null;\r\n    that.onremovestream = null;\r\n    that.state = 'new';\r\n    // Auto-fire next events.\r\n    that.markActionNeeded();\r\n    return that;\r\n};\r\n/*global L, mozRTCIceCandidate, mozRTCSessionDescription, mozRTCPeerConnection*/\r\n'use strict';\r\nvar Erizo = Erizo || {};\r\n\r\nErizo.FirefoxStack = function (spec) {\r\n    var that = {},\r\n        WebkitRTCPeerConnection = mozRTCPeerConnection,\r\n        RTCSessionDescription = mozRTCSessionDescription,\r\n        RTCIceCandidate = mozRTCIceCandidate;\r\n\r\n    that.pcConfig = {\r\n        'iceServers': []\r\n    };\r\n\r\n    if (spec.iceServers !== undefined) {\r\n        that.pcConfig.iceServers = spec.iceServers;\r\n    }\r\n\r\n    if (spec.audio === undefined) {\r\n        spec.audio = true;\r\n    }\r\n\r\n    if (spec.video === undefined) {\r\n        spec.video = true;\r\n    }\r\n\r\n    that.mediaConstraints = {\r\n        offerToReceiveAudio: spec.audio,\r\n        offerToReceiveVideo: spec.video,\r\n        mozDontOfferDataChannel: true,\r\n        iceRestart : true\r\n    };\r\n\r\n    var errorCallback = function (message) {\r\n        L.Logger.error('Error in Stack ', message);\r\n    };\r\n    var gotCandidate = false;\r\n    that.peerConnection = new WebkitRTCPeerConnection(that.pcConfig, that.con);\r\n    spec.localCandidates = [];\r\n\r\n    that.peerConnection.onicecandidate =  function (event) {\r\n        var candidateObject = {};\r\n        if (!event.candidate) {\r\n            L.Logger.info('Gathered all candidates. Sending END candidate');\r\n            candidateObject = {\r\n                sdpMLineIndex: -1 ,\r\n                sdpMid: 'end',\r\n                candidate: 'end'\r\n            };\r\n        }else{\r\n            gotCandidate = true;\r\n            if (!event.candidate.candidate.match(/a=/)) {\r\n                event.candidate.candidate ='a=' + event.candidate.candidate;\r\n            }\r\n            candidateObject = event.candidate;\r\n            if (spec.remoteDescriptionSet) {\r\n                spec.callback({type:'candidate', candidate: candidateObject});\r\n            } else {\r\n                spec.localCandidates.push(candidateObject);\r\n                L.Logger.debug('Local Candidates stored: ',\r\n                                spec.localCandidates.length, spec.localCandidates);\r\n            }\r\n\r\n        }\r\n    };\r\n\r\n\r\n    that.peerConnection.onaddstream = function (stream) {\r\n        if (that.onaddstream) {\r\n            that.onaddstream(stream);\r\n        }\r\n    };\r\n\r\n    that.peerConnection.onremovestream = function (stream) {\r\n        if (that.onremovestream) {\r\n            that.onremovestream(stream);\r\n        }\r\n    };\r\n\r\n    that.peerConnection.oniceconnectionstatechange = function (ev) {\r\n        if (that.oniceconnectionstatechange){\r\n            that.oniceconnectionstatechange(ev.target.iceConnectionState);\r\n        }\r\n    };\r\n\r\n    var setMaxBW = function (sdp) {\r\n        var r, a;\r\n        if (spec.video && spec.maxVideoBW) {\r\n            sdp = sdp.replace(/b=AS:.*\\r\\n/g, '');\r\n            a = sdp.match(/m=video.*\\r\\n/);\r\n            if (a == null) {\r\n                a = sdp.match(/m=video.*\\n/);\r\n            }\r\n            if (a && (a.length > 0)) {\r\n                r = a[0] + 'b=AS:' + spec.maxVideoBW + '\\r\\n';\r\n                sdp = sdp.replace(a[0], r);\r\n            }\r\n        }\r\n\r\n        if (spec.audio && spec.maxAudioBW) {\r\n            a = sdp.match(/m=audio.*\\r\\n/);\r\n            if (a == null) {\r\n                a = sdp.match(/m=audio.*\\n/);\r\n            }\r\n            if (a && (a.length > 0)) {\r\n                r = a[0] + 'b=AS:' + spec.maxAudioBW + '\\r\\n';\r\n                sdp = sdp.replace(a[0], r);\r\n            }\r\n        }\r\n\r\n        return sdp;\r\n    };\r\n\r\n    var localDesc;\r\n\r\n    var setLocalDesc = function (sessionDescription) {\r\n        sessionDescription.sdp = setMaxBW(sessionDescription.sdp);\r\n        sessionDescription.sdp =\r\n            sessionDescription.sdp.replace(/a=ice-options:google-ice\\r\\n/g, '');\r\n        spec.callback(sessionDescription);\r\n        localDesc = sessionDescription;\r\n    };\r\n\r\n    var setLocalDescp2p = function (sessionDescription) {\r\n        sessionDescription.sdp = setMaxBW(sessionDescription.sdp);\r\n        sessionDescription.sdp =\r\n            sessionDescription.sdp.replace(/a=ice-options:google-ice\\r\\n/g, '');\r\n        spec.callback(sessionDescription);\r\n        localDesc = sessionDescription;\r\n        that.peerConnection.setLocalDescription(localDesc);\r\n    };\r\n\r\n    that.updateSpec = function (config){\r\n        if (config.maxVideoBW || config.maxAudioBW ){\r\n            if (config.maxVideoBW){\r\n                L.Logger.debug ('Maxvideo Requested', config.maxVideoBW,\r\n                                'limit', spec.limitMaxVideoBW);\r\n                if (config.maxVideoBW > spec.limitMaxVideoBW) {\r\n                    config.maxVideoBW = spec.limitMaxVideoBW;\r\n                }\r\n                spec.maxVideoBW = config.maxVideoBW;\r\n                L.Logger.debug ('Result', spec.maxVideoBW);\r\n            }\r\n            if (config.maxAudioBW) {\r\n                if (config.maxAudioBW > spec.limitMaxAudioBW) {\r\n                    config.maxAudioBW = spec.limitMaxAudioBW;\r\n                }\r\n                spec.maxAudioBW = config.maxAudioBW;\r\n            }\r\n\r\n            localDesc.sdp = setMaxBW(localDesc.sdp);\r\n            if (config.Sdp){\r\n                L.Logger.error ('Cannot update with renegotiation in Firefox, ' +\r\n                                'try without renegotiation');\r\n            } else {\r\n                L.Logger.debug ('Updating without renegotiation, newVideoBW:', spec.maxVideoBW,\r\n                                ', newAudioBW:', spec.maxAudioBW);\r\n                spec.callback({type:'updatestream', sdp: localDesc.sdp});\r\n            }\r\n        }\r\n        if (config.minVideoBW || (config.slideShowMode!==undefined) ||\r\n            (config.muteStream !== undefined)){\r\n            L.Logger.debug ('MinVideo Changed to ', config.minVideoBW);\r\n            L.Logger.debug ('SlideShowMode Changed to ', config.slideShowMode);\r\n            L.Logger.debug ('muteStream changed to ', config.muteStream);\r\n            spec.callback({type: 'updatestream', config:config});\r\n        }\r\n    };\r\n\r\n    that.createOffer = function (isSubscribe) {\r\n        if (isSubscribe === true) {\r\n            that.peerConnection.createOffer(setLocalDesc, errorCallback, that.mediaConstraints);\r\n        } else {\r\n            that.peerConnection.createOffer(setLocalDesc, errorCallback, {iceRestart: true});\r\n        }\r\n    };\r\n\r\n    that.addStream = function (stream) {\r\n        that.peerConnection.addStream(stream);\r\n    };\r\n    spec.remoteCandidates = [];\r\n    spec.remoteDescriptionSet = false;\r\n\r\n    /**\r\n     * Closes the connection.\r\n     */\r\n    that.close = function () {\r\n        that.state = 'closed';\r\n        that.peerConnection.close();\r\n    };\r\n\r\n    that.processSignalingMessage = function (msg) {\r\n\r\n//        L.Logger.debug(\"Process Signaling Message\", msg);\r\n\r\n        if (msg.type === 'offer') {\r\n            msg.sdp = setMaxBW(msg.sdp);\r\n            that.peerConnection.setRemoteDescription(new RTCSessionDescription(msg), function(){\r\n                that.peerConnection.createAnswer(setLocalDescp2p, function(error){\r\n                L.Logger.error('Error', error);\r\n            }, that.mediaConstraints);\r\n                spec.remoteDescriptionSet = true;\r\n            }, function(error){\r\n            L.Logger.error('Error setting Remote Description', error);\r\n            });\r\n        } else if (msg.type === 'answer') {\r\n\r\n            L.Logger.info('Set remote and local description');\r\n            L.Logger.debug('Local Description to set', localDesc.sdp);\r\n            L.Logger.debug('Remote Description to set', msg.sdp);\r\n\r\n            msg.sdp = setMaxBW(msg.sdp);\r\n\r\n            that.peerConnection.setLocalDescription(localDesc, function(){\r\n                that.peerConnection.setRemoteDescription(\r\n                new RTCSessionDescription(msg), function() {\r\n                    spec.remoteDescriptionSet = true;\r\n                    L.Logger.info('Remote Description successfully set');\r\n                    while (spec.remoteCandidates.length > 0 && gotCandidate) {\r\n                        L.Logger.info('Setting stored remote candidates');\r\n                        // IMPORTANT: preserve ordering of candidates\r\n                        that.peerConnection.addIceCandidate(spec.remoteCandidates.shift());\r\n                    }\r\n                    while(spec.localCandidates.length > 0) {\r\n                        L.Logger.info('Sending Candidate from list');\r\n                        // IMPORTANT: preserve ordering of candidates\r\n                        spec.callback({type:'candidate', candidate: spec.localCandidates.shift()});\r\n                    }\r\n                }, function (error){\r\n                    L.Logger.error('Error Setting Remote Description', error);\r\n                });\r\n            },function(error){\r\n                L.Logger.error('Failure setting Local Description', error);\r\n            });\r\n\r\n        } else if (msg.type === 'candidate') {\r\n\r\n            try {\r\n                var obj;\r\n                if (typeof(msg.candidate) === 'object') {\r\n                    obj = msg.candidate;\r\n                } else {\r\n                    obj = JSON.parse(msg.candidate);\r\n                }\r\n                obj.candidate = obj.candidate.replace(/ generation 0/g, '');\r\n                obj.candidate = obj.candidate.replace(/ udp /g, ' UDP ');\r\n\r\n                obj.sdpMLineIndex = parseInt(obj.sdpMLineIndex);\r\n                var candidate = new RTCIceCandidate(obj);\r\n//                L.logger.debug(\"Remote Candidate\",candidate);\r\n\r\n                if (spec.remoteDescriptionSet && gotCandidate) {\r\n                    that.peerConnection.addIceCandidate(candidate);\r\n                    while (spec.remoteCandidates.length > 0) {\r\n                        L.Logger.info('Setting stored remote candidates');\r\n                        // IMPORTANT: preserve ordering of candidates\r\n                        that.peerConnection.addIceCandidate(spec.remoteCandidates.shift());\r\n                    }\r\n                } else {\r\n                    spec.remoteCandidates.push(candidate);\r\n                }\r\n            } catch(e) {\r\n                L.Logger.error('Error parsing candidate', msg.candidate, e);\r\n            }\r\n        }\r\n    };\r\n    return that;\r\n};\r\n/*global L, console, RTCSessionDescription, webkitRTCPeerConnection, RTCIceCandidate*/\r\n'use strict';\r\nvar Erizo = Erizo || {};\r\n\r\nErizo.BowserStack = function (spec) {\r\n    var that = {},\r\n        WebkitRTCPeerConnection = webkitRTCPeerConnection;\r\n\r\n    that.pcConfig = {\r\n        'iceServers': []\r\n    };\r\n\r\n    that.con = {'optional': [{'DtlsSrtpKeyAgreement': true}]};\r\n\r\n    if (spec.stunServerUrl !== undefined) {\r\n        that.pcConfig.iceServers.push({'url': spec.stunServerUrl});\r\n    }\r\n\r\n    if ((spec.turnServer || {}).url) {\r\n        that.pcConfig.iceServers.push({'username': spec.turnServer.username,\r\n                                        'credential': spec.turnServer.password,\r\n                                        'url': spec.turnServer.url});\r\n    }\r\n\r\n    if (spec.audio === undefined) {\r\n        spec.audio = true;\r\n    }\r\n\r\n    if (spec.video === undefined) {\r\n        spec.video = true;\r\n    }\r\n\r\n    that.mediaConstraints = {\r\n        'offerToReceiveVideo': spec.video,\r\n        'offerToReceiveAudio': spec.audio,\r\n        iceRestart : true\r\n    };\r\n\r\n    that.peerConnection = new WebkitRTCPeerConnection(that.pcConfig, that.con);\r\n\r\n    spec.remoteDescriptionSet = false;\r\n\r\n    var setMaxBW = function (sdp) {\r\n        var a, r;\r\n        if (spec.maxVideoBW) {\r\n            a = sdp.match(/m=video.*\\r\\n/);\r\n            if (a == null){\r\n            a = sdp.match(/m=video.*\\n/);\r\n            }\r\n            if (a && (a.length > 0)) {\r\n                r = a[0] + 'b=AS:' + spec.maxVideoBW + '\\r\\n';\r\n                sdp = sdp.replace(a[0], r);\r\n            }\r\n        }\r\n\r\n        if (spec.maxAudioBW) {\r\n            a = sdp.match(/m=audio.*\\r\\n/);\r\n            if (a == null){\r\n            a = sdp.match(/m=audio.*\\n/);\r\n            }\r\n            if (a && (a.length > 0)) {\r\n                r = a[0] + 'b=AS:' + spec.maxAudioBW + '\\r\\n';\r\n                sdp = sdp.replace(a[0], r);\r\n            }\r\n        }\r\n\r\n        return sdp;\r\n    };\r\n\r\n    /**\r\n     * Closes the connection.\r\n     */\r\n    that.close = function () {\r\n        that.state = 'closed';\r\n        that.peerConnection.close();\r\n    };\r\n\r\n    spec.localCandidates = [];\r\n\r\n    that.peerConnection.onicecandidate =  function (event) {\r\n        if (event.candidate) {\r\n            if (!event.candidate.candidate.match(/a=/)) {\r\n                event.candidate.candidate ='a=' + event.candidate.candidate;\r\n            }\r\n\r\n\r\n            if (spec.remoteDescriptionSet) {\r\n                spec.callback({type:'candidate', candidate: event.candidate});\r\n            } else {\r\n                spec.localCandidates.push(event.candidate);\r\n//                console.log('Local Candidates stored: ',\r\n//                             spec.localCandidates.length, spec.localCandidates);\r\n            }\r\n\r\n        } else {\r\n\r\n        //  spec.callback(that.peerConnection.localDescription);\r\n            console.log('End of candidates.' , that.peerConnection.localDescription);\r\n        }\r\n    };\r\n\r\n    that.peerConnection.onaddstream = function (stream) {\r\n        if (that.onaddstream) {\r\n            that.onaddstream(stream);\r\n        }\r\n    };\r\n\r\n    that.peerConnection.onremovestream = function (stream) {\r\n        if (that.onremovestream) {\r\n            that.onremovestream(stream);\r\n        }\r\n    };\r\n\r\n    var errorCallback = function(message){\r\n    console.log('Error in Stack ', message);\r\n    };\r\n\r\n    var localDesc;\r\n\r\n    var setLocalDesc = function (sessionDescription) {\r\n        sessionDescription.sdp = setMaxBW(sessionDescription.sdp);\r\n//      sessionDescription.sdp = sessionDescription.sdp\r\n//                                        .replace(/a=ice-options:google-ice\\r\\n/g, '');\r\n        console.log('Set local description', sessionDescription.sdp);\r\n        localDesc = sessionDescription;\r\n        that.peerConnection.setLocalDescription(localDesc, function(){\r\n        console.log('The final LocalDesc', that.peerConnection.localDescription);\r\n        spec.callback(that.peerConnection.localDescription);\r\n        }, errorCallback);\r\n        //that.peerConnection.setLocalDescription(sessionDescription);\r\n    };\r\n\r\n    var setLocalDescp2p = function (sessionDescription) {\r\n        sessionDescription.sdp = setMaxBW(sessionDescription.sdp);\r\n//        sessionDescription.sdp = sessionDescription.sdp\r\n//                                          .replace(/a=ice-options:google-ice\\r\\n/g, \"\");\r\n        spec.callback(sessionDescription);\r\n        localDesc = sessionDescription;\r\n        that.peerConnection.setLocalDescription(sessionDescription);\r\n    };\r\n\r\n    that.createOffer = function (isSubscribe) {\r\n    if (isSubscribe===true)\r\n        that.peerConnection.createOffer(setLocalDesc, errorCallback, that.mediaConstraints);\r\n    else\r\n        that.peerConnection.createOffer(setLocalDesc, errorCallback, {iceRestart: true});\r\n\r\n    };\r\n\r\n    that.addStream = function (stream) {\r\n        that.peerConnection.addStream(stream);\r\n    };\r\n    spec.remoteCandidates = [];\r\n\r\n\r\n    that.processSignalingMessage = function (msg) {\r\n        console.log('Process Signaling Message', msg);\r\n\r\n        if (msg.type === 'offer') {\r\n            msg.sdp = setMaxBW(msg.sdp);\r\n            that.peerConnection.setRemoteDescription(new RTCSessionDescription(msg));\r\n            that.peerConnection.createAnswer(setLocalDescp2p, null, that.mediaConstraints);\r\n            spec.remoteDescriptionSet = true;\r\n\r\n        } else if (msg.type === 'answer') {\r\n\r\n            console.log('Set remote description', msg.sdp);\r\n\r\n            msg.sdp = setMaxBW(msg.sdp);\r\n\r\n            that.peerConnection.setRemoteDescription(new RTCSessionDescription(msg), function() {\r\n            spec.remoteDescriptionSet = true;\r\n            console.log('Candidates to be added: ', spec.remoteCandidates.length);\r\n            while (spec.remoteCandidates.length > 0) {\r\n                console.log('Candidate :', spec.remoteCandidates[spec.remoteCandidates.length-1]);\r\n                that.peerConnection.addIceCandidate(spec.remoteCandidates.shift(),\r\n                                                    function(){},\r\n                                                    errorCallback);\r\n\r\n            }\r\n//              console.log('Local candidates to send:' , spec.localCandidates.length);\r\n            while(spec.localCandidates.length > 0) {\r\n                spec.callback({type:'candidate', candidate: spec.localCandidates.shift()});\r\n            }\r\n\r\n            }, function(){console.log('Error Setting Remote Description');});\r\n\r\n        } else if (msg.type === 'candidate') {\r\n        console.log('Message with candidate');\r\n            try {\r\n                var obj;\r\n                if (typeof(msg.candidate) === 'object') {\r\n                    obj = msg.candidate;\r\n                } else {\r\n                    obj = JSON.parse(msg.candidate);\r\n                }\r\n//                obj.candidate = obj.candidate.replace(/ generation 0/g, \"\");\r\n//                obj.candidate = obj.candidate.replace(/ udp /g, \" UDP \");\r\n                obj.candidate = obj.candidate.replace(/a=/g, '');\r\n                obj.sdpMLineIndex = parseInt(obj.sdpMLineIndex);\r\n                obj.sdpMLineIndex = obj.sdpMid === 'audio' ? 0 : 1;\r\n                var candidate = new RTCIceCandidate(obj);\r\n                console.log('Remote Candidate', candidate);\r\n                if (spec.remoteDescriptionSet) {\r\n                    that.peerConnection.addIceCandidate(candidate, function(){}, errorCallback);\r\n                } else {\r\n                    spec.remoteCandidates.push(candidate);\r\n                }\r\n            } catch(e) {\r\n                L.Logger.error('Error parsing candidate', msg.candidate);\r\n            }\r\n        }\r\n    };\r\n\r\n    return that;\r\n};\r\n/*global L, window, chrome, navigator*/\r\n'use strict';\r\nvar Erizo = Erizo || {};\r\n\r\nErizo.sessionId = 103;\r\n\r\nErizo.Connection = function (spec) {\r\n    var that = {};\r\n\r\n    spec.sessionId = (Erizo.sessionId += 1);\r\n\r\n    // Check which WebRTC Stack is installed.\r\n    that.browser = Erizo.getBrowser();\r\n    if (that.browser === 'fake') {\r\n        L.Logger.warning('Publish/subscribe video/audio streams not supported in erizofc yet');\r\n        that = Erizo.FcStack(spec);\r\n    } else if (that.browser === 'mozilla') {\r\n        L.Logger.debug('Firefox Stack');\r\n        that = Erizo.FirefoxStack(spec);\r\n    } else if (that.browser === 'bowser'){\r\n        L.Logger.debug('Bowser Stack');\r\n        that = Erizo.BowserStack(spec);\r\n    } else if (that.browser === 'chrome-stable') {\r\n        L.Logger.debug('Chrome Stable Stack');\r\n        that = Erizo.ChromeStableStack(spec);\r\n    } else {\r\n        L.Logger.error('No stack available for this browser');\r\n        throw 'WebRTC stack not available';\r\n    }\r\n    if (!that.updateSpec){\r\n        that.updateSpec = function(newSpec, callback){\r\n            L.Logger.error('Update Configuration not implemented in this browser');\r\n            if (callback)\r\n                callback ('unimplemented');\r\n        };\r\n    }\r\n\r\n    return that;\r\n};\r\n\r\nErizo.getBrowser = function () {\r\n    var browser = 'none';\r\n\r\n    if (typeof module!=='undefined' && module.exports){\r\n        browser = 'fake';\r\n    }else if (window.navigator.userAgent.match('Firefox') !== null) {\r\n        // Firefox\r\n        browser = 'mozilla';\r\n    } else if (window.navigator.userAgent.match('Bowser') !== null){\r\n        browser = 'bowser';\r\n    } else if (window.navigator.userAgent.match('Chrome') !== null) {\r\n        if (window.navigator.appVersion.match(/Chrome\\/([\\w\\W]*?)\\./)[1] >= 26) {\r\n            browser = 'chrome-stable';\r\n        }\r\n    } else if (window.navigator.userAgent.match('Safari') !== null) {\r\n        browser = 'bowser';\r\n    } else if (window.navigator.userAgent.match('AppleWebKit') !== null) {\r\n        browser = 'bowser';\r\n    }\r\n    return browser;\r\n};\r\n\r\n\r\nErizo.GetUserMedia = function (config, callback, error) {\r\n    var promise;\r\n    navigator.getMedia = ( navigator.getUserMedia ||\r\n                        navigator.webkitGetUserMedia ||\r\n                        navigator.mozGetUserMedia ||\r\n                        navigator.msGetUserMedia);\r\n\r\n    if (config.screen) {\r\n        L.Logger.debug('Screen access requested');\r\n        if (App.isDesktop) {\r\n        chrome.desktopCapture.chooseDesktopMedia(['screen', 'window'], function(id){\r\n            console.log('opening stream with id', id);\r\n            getUserMedia({\r\n                video: {\r\n                mandatory: {\r\n                    chromeMediaSourceId: id, \r\n                    chromeMediaSource:'desktop'\r\n                }\r\n                }\r\n            }, callback, error);\r\n        });\r\n        /*\r\n        var gui = require('nw.gui');\r\n        // if screens has not been initiated before, init it\r\n        if (gui.Screen.Init){ gui.Screen.Init(); }\r\n        gui.Screen.chooseDesktopMedia([\"screen\",\"window\"],\r\n            function(streamId) {\r\n            var vid_constraint = {\r\n                mandatory: {\r\n                chromeMediaSource: 'desktop',\r\n                chromeMediaSourceId: streamId,\r\n                maxWidth: 1920,\r\n                maxHeight: 1080\r\n                },\r\n                optional: []\r\n            };\r\n            navigator.getMedia({audio: false, video: vid_constraint}, callback, error);\r\n            }\r\n        );\r\n        */\r\n        } else {\r\n        switch (Erizo.getBrowser()) {\r\n            case 'mozilla':\r\n            L.Logger.debug('Screen sharing in Firefox');\r\n            var screenCfg = {};\r\n            if (config.video.mandatory !== undefined) {\r\n                screenCfg.video = config.video;\r\n                screenCfg.video.mediaSource = 'screen' || 'window';\r\n            } else {\r\n                screenCfg = {\r\n                    audio: config.audio,\r\n                    video: {mediaSource: 'screen' || 'window'}\r\n                };\r\n            }\r\n            if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\r\n                promise = navigator.mediaDevices.getUserMedia(screenCfg).then(callback);\r\n                // Google compressor complains about a func called catch\r\n                promise['catch'](error);\r\n            } else {\r\n                navigator.getMedia(screenCfg, callback, error);\r\n            }\r\n            break;\r\n\r\n            case 'chrome-stable':\r\n            L.Logger.debug('Screen sharing in Chrome');\r\n            // Default extensionId - this extension is only usable in our server,\r\n            // please make your own extension based on the code in\r\n            // erizo_controller/erizoClient/extras/chrome-extension\r\n            var extensionId = 'okeephmleflklcdebijnponpabbmmgeo';\r\n            if (config.extensionId){\r\n                L.Logger.debug('extensionId supplied, using ' + config.extensionId);\r\n                extensionId = config.extensionId;\r\n            }\r\n            L.Logger.debug('Screen access on chrome stable, looking for extension');\r\n            try {\r\n                chrome.runtime.sendMessage(extensionId, {getStream: true}, function (response){\r\n                    var theConfig = {};\r\n                    if (response === undefined){\r\n                        L.Logger.error('Access to screen denied');\r\n                        var theError = {code:'Access to screen denied'};\r\n                        error(theError);\r\n                        return;\r\n                    }\r\n                    var theId = response.streamId;\r\n                    if(config.video.mandatory !== undefined){\r\n                        theConfig.video = config.video;\r\n                        theConfig.video.mandatory.chromeMediaSource = 'desktop';\r\n                        theConfig.video.mandatory.chromeMediaSourceId = theId;\r\n\r\n                    }else{\r\n                        theConfig = {video: {mandatory: {chromeMediaSource: 'desktop',\r\n                                                        chromeMediaSourceId: theId }}};\r\n                    }\r\n                    navigator.getMedia(theConfig, callback, error);\r\n                });\r\n            } catch(e) {\r\n                L.Logger.debug('Screensharing plugin is not accessible ');\r\n                var theError = {code:'no_plugin_present'};\r\n                error(theError);\r\n                return;\r\n            }\r\n            break;\r\n\r\n            default:\r\n            L.Logger.error('This browser does not support ScreenSharing');\r\n        }\r\n        }\r\n    } else {\r\n        if (typeof module !== 'undefined' && module.exports) {\r\n            L.Logger.error('Video/audio streams not supported in erizofc yet');\r\n        } else {\r\n            if (config.video && Erizo.getBrowser() === 'mozilla') {\r\n                if (config.video.mandatory !== undefined) {\r\n                    var videoCfg = config.video.mandatory;\r\n                    config.video = {\r\n                        width: {min: videoCfg.minWidth, max: videoCfg.maxWidth},\r\n                        height: {min: videoCfg.minHeight, max: videoCfg.maxHeight}\r\n                    };\r\n                }\r\n                if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\r\n                    promise = navigator.mediaDevices.getUserMedia(config).then(callback);\r\n                    // Google compressor complains about a func called catch\r\n                    promise['catch'](error);\r\n                    return;\r\n                }\r\n            }\r\n            navigator.getMedia(config, callback, error);\r\n        }\r\n    }\r\n};\r\n/*global L, document*/\r\n'use strict';\r\n/*\r\n* Class Stream represents a local or a remote Stream in the Room. It will handle the WebRTC stream\r\n* and identify the stream and where it should be drawn.\r\n*/\r\nvar Erizo = Erizo || {};\r\nErizo.Stream = function (spec) {\r\n    var that = Erizo.EventDispatcher(spec),\r\n        getFrame;\r\n\r\n    that.stream = spec.stream;\r\n    that.url = spec.url;\r\n    that.recording = spec.recording;\r\n    that.room = undefined;\r\n    that.showing = false;\r\n    that.local = false;\r\n    that.video = spec.video;\r\n    that.audio = spec.audio;\r\n    that.screen = spec.screen;\r\n    that.videoSize = spec.videoSize;\r\n    that.extensionId = spec.extensionId;\r\n\r\n    if (that.videoSize !== undefined &&\r\n        (!(that.videoSize instanceof Array) ||\r\n            that.videoSize.length !== 4)) {\r\n        throw Error('Invalid Video Size');\r\n    }\r\n    if (spec.local === undefined || spec.local === true) {\r\n        that.local = true;\r\n    }\r\n\r\n    // Public functions\r\n\r\n    that.getID = function () {\r\n        var id;\r\n        // Unpublished local streams don't yet have an ID.\r\n        if (that.local && !spec.streamID) {\r\n            id = 'local';\r\n        }\r\n        else {\r\n            id = spec.streamID;\r\n        }\r\n        return id;\r\n    };\r\n\r\n    // Get attributes of this stream.\r\n    that.getAttributes = function () {\r\n        return spec.attributes;\r\n    };\r\n\r\n    // Changes the attributes of this stream in the room.\r\n    that.setAttributes = function() {\r\n        L.Logger.error('Failed to set attributes data. This Stream object has not been published.');\r\n    };\r\n\r\n    that.updateLocalAttributes = function(attrs) {\r\n        spec.attributes = attrs;\r\n    };\r\n\r\n    // Indicates if the stream has audio activated\r\n    that.hasAudio = function () {\r\n        return spec.audio;\r\n    };\r\n\r\n    // Indicates if the stream has video activated\r\n    that.hasVideo = function () {\r\n        return spec.video;\r\n    };\r\n\r\n    // Indicates if the stream has data activated\r\n    that.hasData = function () {\r\n        return spec.data;\r\n    };\r\n\r\n    // Indicates if the stream has screen activated\r\n    that.hasScreen = function () {\r\n        return spec.screen;\r\n    };\r\n\r\n    // Sends data through this stream.\r\n    that.sendData = function () {\r\n        L.Logger.error('Failed to send data. This Stream object has not that channel enabled.');\r\n    };\r\n\r\n    // Initializes the stream and tries to retrieve a stream from local video and audio\r\n    // We need to call this method before we can publish it in the room.\r\n    that.init = function () {\r\n    var streamEvent;\r\n    try {\r\n        if ((spec.audio || spec.video || spec.screen) && spec.url === undefined) {\r\n        L.Logger.info('Requested access to local media');\r\n        var videoOpt = spec.video;\r\n        if ((videoOpt === true || spec.screen === true) &&\r\n            that.videoSize !== undefined) {\r\n            videoOpt = {mandatory: {minWidth: that.videoSize[0],\r\n                                    minHeight: that.videoSize[1],\r\n                                    maxWidth: that.videoSize[2],\r\n                                    maxHeight: that.videoSize[3]}};\r\n        } else if (spec.screen === true && videoOpt === undefined) {\r\n            videoOpt = true;\r\n        }\r\n        var opt = {video: videoOpt,\r\n                    audio: spec.audio,\r\n                    fake: spec.fake,\r\n                    screen: spec.screen,\r\n                    extensionId:that.extensionId};\r\n        L.Logger.debug(opt);\r\n        Erizo.GetUserMedia(opt, function (stream) {\r\n            //navigator.webkitGetUserMedia(\"audio, video\", function (stream) {\r\n\r\n            L.Logger.info('User has granted access to local media.');\r\n            that.stream = stream;\r\n\r\n            streamEvent = Erizo.StreamEvent({type: 'access-accepted'});\r\n            that.dispatchEvent(streamEvent);\r\n\r\n        }, function (error) {\r\n            L.Logger.error('Failed to get access to local media. Error code was ' +\r\n                            error.code + '.');\r\n            var streamEvent = Erizo.StreamEvent({type: 'access-denied', msg:error});\r\n            that.dispatchEvent(streamEvent);\r\n        });\r\n        } else {\r\n            streamEvent = Erizo.StreamEvent({type: 'access-accepted'});\r\n            that.dispatchEvent(streamEvent);\r\n        }\r\n        } catch(e) {\r\n            L.Logger.error('Failed to get access to local media. Error was ' + e + '.');\r\n            streamEvent = Erizo.StreamEvent({type: 'access-denied', msg: e});\r\n            that.dispatchEvent(streamEvent);\r\n        }\r\n    };\r\n\r\n\r\n    that.close = function () {\r\n        if (that.local) {\r\n            if (that.room !== undefined) {\r\n                that.room.unpublish(that);\r\n            }\r\n            // Remove HTML element\r\n            that.hide();\r\n            if (that.stream !== undefined) {\r\n                that.stream.getTracks().forEach(function (track) {\r\n                    track.stop();\r\n                });\r\n            }\r\n\r\n            if (that.player && that.player.SoundMeter && that.player.SoundMeter.stop) {\r\n            that.player.SoundMeter.stop();\r\n            }\r\n\r\n            that.stream = undefined;\r\n        }\r\n    };\r\n\r\n    that.play = function (elementID, options) {\r\n        options = options || {};\r\n        that.elementID = elementID;\r\n        var player;\r\n        if (that.hasVideo() || this.hasScreen()) {\r\n            // Draw on HTML\r\n            if (elementID !== undefined) {\r\n                player = new Erizo.VideoPlayer({id: that.getID(),\r\n                                                    stream: that,\r\n                                                    elementID: elementID,\r\n                                                    options: options});\r\n                that.player = player;\r\n                that.showing = true;\r\n            }\r\n        } else if (that.hasAudio) {\r\n            player = new Erizo.AudioPlayer({id: that.getID(),\r\n                                                stream: that,\r\n                                                elementID: elementID,\r\n                                                options: options});\r\n            that.player = player;\r\n            that.showing = true;\r\n        }\r\n    };\r\n\r\n    that.setSinkId = function(sinkId) {\r\n    if (that.hasVideo() || this.hasScreen()) {\r\n        if (that.player.video.setSinkId) {\r\n            that.player.video.setSinkId(sinkId);\r\n        }\r\n    } else {\r\n        if (that.player.audio.setSinkId) {\r\n            that.player.audio.setSinkId(sinkId);\r\n        }\r\n    }\r\n    };\r\n\r\n    that.stop = function () {\r\n        if (that.showing) {\r\n            if (that.player !== undefined) {\r\n                that.player.destroy();\r\n                that.showing = false;\r\n            }\r\n        }\r\n\r\n        if (that.player && that.player.SoundMeter && that.player.SoundMeter.stop) {\r\n        that.player.SoundMeter.stop();\r\n        }\r\n    };\r\n\r\n    that.show = that.play;\r\n    that.hide = that.stop;\r\n\r\n    getFrame = function () {\r\n        if (that.player !== undefined && that.stream !== undefined) {\r\n            var video = that.player.video,\r\n\r\n                style = document.defaultView.getComputedStyle(video),\r\n                width = parseInt(style.getPropertyValue('width'), 10),\r\n                height = parseInt(style.getPropertyValue('height'), 10),\r\n                left = parseInt(style.getPropertyValue('left'), 10),\r\n                top = parseInt(style.getPropertyValue('top'), 10);\r\n\r\n            var div;\r\n            if (typeof that.elementID === 'object' &&\r\n            typeof that.elementID.appendChild === 'function') {\r\n                div = that.elementID;\r\n            }\r\n            else {\r\n                div = document.getElementById(that.elementID);\r\n            }\r\n\r\n            var divStyle = document.defaultView.getComputedStyle(div),\r\n                divWidth = parseInt(divStyle.getPropertyValue('width'), 10),\r\n                divHeight = parseInt(divStyle.getPropertyValue('height'), 10),\r\n\r\n                canvas = document.createElement('canvas'),\r\n                context;\r\n\r\n            canvas.id = 'testing';\r\n            canvas.width = divWidth;\r\n            canvas.height = divHeight;\r\n            canvas.setAttribute('style', 'display: none');\r\n            //document.body.appendChild(canvas);\r\n            context = canvas.getContext('2d');\r\n\r\n            context.drawImage(video, left, top, width, height);\r\n\r\n            return canvas;\r\n        } else {\r\n            return null;\r\n        }\r\n    };\r\n\r\n    that.getVideoFrameURL = function (format) {\r\n        var canvas = getFrame();\r\n        if (canvas !== null) {\r\n            if (format) {\r\n                return canvas.toDataURL(format);\r\n            } else {\r\n                return canvas.toDataURL();\r\n            }\r\n        } else {\r\n            return null;\r\n        }\r\n    };\r\n\r\n    that.getVideoFrame = function () {\r\n        var canvas = getFrame();\r\n        if (canvas !== null) {\r\n            return canvas.getContext('2d').getImageData(0, 0, canvas.width, canvas.height);\r\n        } else {\r\n            return null;\r\n        }\r\n    };\r\n\r\n    that.checkOptions = function (config, isUpdate){\r\n        //TODO: Check for any incompatible options\r\n        if (isUpdate === true){  // We are updating the stream\r\n            if (config.video || config.audio || config.screen){\r\n                L.Logger.warning('Cannot update type of subscription');\r\n                config.video = undefined;\r\n                config.audio = undefined;\r\n                config.screen = undefined;\r\n            }\r\n        }else{  // on publish or subscribe\r\n            if(that.local === false){ // check what we can subscribe to\r\n                if (config.video === true && that.hasVideo() === false){\r\n                    L.Logger.warning('Trying to subscribe to video when there is no ' +\r\n                                    'video, won\\'t subscribe to video');\r\n                }\r\n                if (config.audio === true && that.hasAudio() === false){\r\n                    L.Logger.warning('Trying to subscribe to audio when there is no ' +\r\n                                    'audio, won\\'t subscribe to audio');\r\n                    config.audio = false;\r\n                }\r\n            }\r\n        }\r\n        if(that.local === false){\r\n            if (!that.hasVideo() && (config.slideShowMode === true)){\r\n                L.Logger.warning('Cannot enable slideShowMode if it is not a video ' +\r\n                                'subscription, please check your parameters');\r\n                config.slideShowMode = false;\r\n            }\r\n        }\r\n    };\r\n\r\n    that.muteAudio = function (isMuted, callback) {\r\n        if (that.room && that.room.p2p){\r\n            L.Logger.warning('muteAudio is not implemented in p2p streams');\r\n            callback ('error');\r\n            return;\r\n        }\r\n        if (that.local) {\r\n            L.Logger.warning('muteAudio can only be used in remote streams');\r\n            callback('Error');\r\n            return;\r\n        }\r\n        var config = {muteStream : {audio : isMuted}};\r\n        that.checkOptions(config, true);\r\n        that.pc.updateSpec(config, callback);\r\n    };\r\n\r\n    that.updateConfiguration = function (config, callback) {\r\n        if (config === undefined)\r\n            return;\r\n        if (that.pc) {\r\n            that.checkOptions(config, true);\r\n            if (that.local) {\r\n                if(that.room.p2p) {\r\n                    for (var index in that.pc){\r\n                        that.pc[index].updateSpec(config, callback);\r\n                    }\r\n                } else {\r\n                    that.pc.updateSpec(config, callback);\r\n                }\r\n\r\n            } else {\r\n                that.pc.updateSpec(config, callback);\r\n            }\r\n        } else {\r\n            callback('This stream has no peerConnection attached, ignoring');\r\n        }\r\n    };\r\n\r\n    return that;\r\n};\r\n/*global L, io*/\r\n'use strict';\r\n/*\r\n* Class Room represents a Licode Room. It will handle the connection, local stream publication and\r\n* remote stream subscription.\r\n* Typical Room initialization would be:\r\n* var room = Erizo.Room({token:'213h8012hwduahd-321ueiwqewq'});\r\n* It also handles RoomEvents and StreamEvents. For example:\r\n* Event 'room-connected' points out that the user has been successfully connected to the room.\r\n* Event 'room-disconnected' shows that the user has been already disconnected.\r\n* Event 'stream-added' indicates that there is a new stream available in the room.\r\n* Event 'stream-removed' shows that a previous available stream has been removed from the room.\r\n*/\r\nvar Erizo = Erizo || {};\r\n\r\nErizo.Room = function (spec) {\r\n    var that = Erizo.EventDispatcher(spec),\r\n        connectSocket,\r\n        sendMessageSocket,\r\n        sendSDPSocket,\r\n        sendDataSocket,\r\n        updateAttributes,\r\n        removeStream,\r\n        DISCONNECTED = 0,\r\n        CONNECTING = 1,\r\n        CONNECTED = 2;\r\n\r\n    that.iceServers = spec.iceServers || [];\r\n    that.remoteStreams = {};\r\n    that.localStreams = {};\r\n    that.roomID = '';\r\n    that.socket = {};\r\n    that.state = DISCONNECTED;\r\n    that.p2p = false;\r\n\r\n    that.addEventListener('room-disconnected', function () {\r\n        var index, stream, evt2;\r\n        that.state = DISCONNECTED;\r\n\r\n        // Remove all streams\r\n        for (index in that.remoteStreams) {\r\n            if (that.remoteStreams.hasOwnProperty(index)) {\r\n                stream = that.remoteStreams[index];\r\n                removeStream(stream);\r\n                delete that.remoteStreams[index];\r\n                if (stream && !stream.failed){\r\n                    evt2 = Erizo.StreamEvent({type: 'stream-removed', stream: stream});\r\n                    that.dispatchEvent(evt2);\r\n                }\r\n            }\r\n        }\r\n        that.remoteStreams = {};\r\n\r\n        // Close Peer Connections\r\n        for (index in that.localStreams) {\r\n            if (that.localStreams.hasOwnProperty(index)) {\r\n                stream = that.localStreams[index];\r\n                if(that.p2p){\r\n                    for(var i in stream.pc){\r\n                        stream.pc[i].close();\r\n                    }\r\n                }else{\r\n                    stream.pc.close();\r\n                }\r\n                delete that.localStreams[index];\r\n            }\r\n        }\r\n\r\n        // Close socket\r\n        try {\r\n            that.socket.disconnect();\r\n        } catch (error) {\r\n            L.Logger.debug('Socket already disconnected');\r\n        }\r\n        that.socket = undefined;\r\n    });\r\n\r\n    // Private functions\r\n\r\n    // It removes the stream from HTML and close the PeerConnection associated\r\n    removeStream = function (stream) {\r\n        if (stream.stream !== undefined) {\r\n\r\n            // Remove HTML element\r\n            stream.hide();\r\n\r\n            // Close PC stream\r\n            if (stream.pc) stream.pc.close();\r\n            if (stream.local) {\r\n                stream.stream.stop();\r\n            }\r\n            delete stream.stream;\r\n        }\r\n    };\r\n\r\n    sendDataSocket = function (stream, msg) {\r\n        if (stream.local) {\r\n            sendMessageSocket('sendDataStream', {id: stream.getID(), msg: msg});\r\n        } else {\r\n            L.Logger.error('You can not send data through a remote stream');\r\n        }\r\n    };\r\n\r\n    updateAttributes = function(stream, attrs) {\r\n        if (stream.local) {\r\n            stream.updateLocalAttributes(attrs);\r\n            sendMessageSocket('updateStreamAttributes', {id: stream.getID(), attrs: attrs});\r\n        } else {\r\n            L.Logger.error('You can not update attributes in a remote stream');\r\n        }\r\n    };\r\n\r\n    // It connects to the server through socket.io\r\n    connectSocket = function (token, callback, error) {\r\n\r\n        var createRemotePc = function (stream, peerSocket) {\r\n\r\n            stream.pc = Erizo.Connection({callback: function (msg) {\r\n                sendSDPSocket('signaling_message', {streamId: stream.getID(),\r\n                                                    peerSocket: peerSocket,\r\n                                                    msg: msg});\r\n            },\r\n            iceServers: that.iceServers,\r\n            maxAudioBW: spec.maxAudioBW,\r\n            maxVideoBW: spec.maxVideoBW,\r\n            limitMaxAudioBW:spec.maxAudioBW,\r\n            limitMaxVideoBW: spec.maxVideoBW});\r\n\r\n            stream.pc.onaddstream = function (evt) {\r\n                // Draw on html\r\n                L.Logger.info('Stream subscribed');\r\n                stream.stream = evt.stream;\r\n                var evt2 = Erizo.StreamEvent({type: 'stream-subscribed', stream: stream});\r\n                that.dispatchEvent(evt2);\r\n            };\r\n        };\r\n\r\n        // Once we have connected\r\n        that.socket = io.connect(token.host, {reconnect: false,\r\n                                            secure: token.secure,\r\n                                            'force new connection': true,\r\n                                            transports: ['websocket']});\r\n\r\n        // We receive an event with a new stream in the room.\r\n        // type can be \"media\" or \"data\"\r\n        that.socket.on('onAddStream', function (arg) {\r\n            var stream = Erizo.Stream({streamID: arg.id,\r\n                                        local: false,\r\n                                        audio: arg.audio,\r\n                                        video: arg.video,\r\n                                        data: arg.data,\r\n                                        screen: arg.screen,\r\n                                        attributes: arg.attributes}),\r\n                evt;\r\n            that.remoteStreams[arg.id] = stream;\r\n            evt = Erizo.StreamEvent({type: 'stream-added', stream: stream});\r\n            that.dispatchEvent(evt);\r\n        });\r\n\r\n        that.socket.on('signaling_message_erizo', function (arg) {\r\n            var stream;\r\n            if (arg.peerId) {\r\n                stream = that.remoteStreams[arg.peerId];\r\n            } else {\r\n                stream = that.localStreams[arg.streamId];\r\n            }\r\n\r\n            if (stream && !stream.failed) {\r\n                stream.pc.processSignalingMessage(arg.mess);\r\n            }\r\n        });\r\n\r\n        that.socket.on('signaling_message_peer', function (arg) {\r\n\r\n            var stream = that.localStreams[arg.streamId];\r\n\r\n            if (stream && !stream.failed) {\r\n                stream.pc[arg.peerSocket].processSignalingMessage(arg.msg);\r\n            } else {\r\n                stream = that.remoteStreams[arg.streamId];\r\n\r\n                if (!stream.pc) {\r\n                    createRemotePc(stream, arg.peerSocket);\r\n                }\r\n                stream.pc.processSignalingMessage(arg.msg);\r\n            }\r\n        });\r\n\r\n        that.socket.on('publish_me', function (arg) {\r\n            var myStream = that.localStreams[arg.streamId];\r\n\r\n            if (myStream.pc === undefined) {\r\n                myStream.pc = {};\r\n            }\r\n\r\n            myStream.pc[arg.peerSocket] = Erizo.Connection({callback: function (msg) {\r\n                sendSDPSocket('signaling_message', {streamId: arg.streamId,\r\n                                                    peerSocket: arg.peerSocket, msg: msg});\r\n            }, audio: myStream.hasAudio(), video: myStream.hasVideo(),\r\n            iceServers: that.iceServers});\r\n\r\n\r\n            myStream.pc[arg.peerSocket].oniceconnectionstatechange = function (state) {\r\n                if (state === 'failed') {\r\n                    myStream.pc[arg.peerSocket].close();\r\n                    delete myStream.pc[arg.peerSocket];\r\n                }\r\n            };\r\n\r\n            myStream.pc[arg.peerSocket].addStream(myStream.stream);\r\n            myStream.pc[arg.peerSocket].createOffer();\r\n        });\r\n\r\n        that.socket.on('onBandwidthAlert', function (arg){\r\n            L.Logger.info('Bandwidth Alert on', arg.streamID, 'message',\r\n                        arg.message,'BW:', arg.bandwidth);\r\n            if(arg.streamID){\r\n                var stream = that.remoteStreams[arg.streamID];\r\n                if (stream && !stream.failed) {\r\n                    var evt = Erizo.StreamEvent({type:'bandwidth-alert',\r\n                                                stream:stream,\r\n                                                msg:arg.message,\r\n                                                bandwidth: arg.bandwidth});\r\n                    stream.dispatchEvent(evt);\r\n                }\r\n\r\n            }\r\n        });\r\n\r\n        // We receive an event of new data in one of the streams\r\n        that.socket.on('onDataStream', function (arg) {\r\n            var stream = that.remoteStreams[arg.id],\r\n                evt = Erizo.StreamEvent({type: 'stream-data', msg: arg.msg, stream: stream});\r\n            stream.dispatchEvent(evt);\r\n        });\r\n\r\n        // We receive an event of new data in one of the streams\r\n        that.socket.on('onUpdateAttributeStream', function (arg) {\r\n            var stream = that.remoteStreams[arg.id],\r\n                evt = Erizo.StreamEvent({type: 'stream-attributes-update',\r\n                                        attrs: arg.attrs,\r\n                                        stream: stream});\r\n            stream.updateLocalAttributes(arg.attrs);\r\n            stream.dispatchEvent(evt);\r\n        });\r\n\r\n        // We receive an event of a stream removed from the room\r\n        that.socket.on('onRemoveStream', function (arg) {\r\n            var stream = that.localStreams[arg.id];\r\n            if (stream && !stream.failed){\r\n                stream.failed = true;\r\n                L.Logger.warning('We received a removeStream from our own stream --' +\r\n                                ' probably erizoJS timed out');\r\n\r\n                that.unpublish(stream);\r\n\r\n                var disconnectEvt = Erizo.StreamEvent({type: 'stream-failed',\r\n                        msg:'Publishing local stream failed because of an Erizo Error',\r\n                        stream: stream});\r\n                that.dispatchEvent(disconnectEvt);\r\n\r\n                return;\r\n            }\r\n            stream = that.remoteStreams[arg.id];\r\n\r\n            if (stream && stream.failed){\r\n                L.Logger.debug('Received onRemoveStream for a stream ' +\r\n                'that we already marked as failed ', arg.id);\r\n                return;\r\n            }else if (!stream){\r\n                L.Logger.debug('Received a removeStream for', arg.id,\r\n                                'and it has not been registered here, ignoring.');\r\n                return;\r\n            }\r\n            delete that.remoteStreams[arg.id];\r\n            if (stream) {\r\n                removeStream(stream);\r\n                var evt = Erizo.StreamEvent({type: 'stream-removed', stream: stream});\r\n                that.dispatchEvent(evt);\r\n            }\r\n        });\r\n\r\n        // The socket has disconnected\r\n        that.socket.on('disconnect', function () {\r\n            L.Logger.info('Socket disconnected, lost connection to ErizoController');\r\n            if (that.state !== DISCONNECTED) {\r\n                L.Logger.error('Unexpected disconnection from ErizoController');\r\n                var disconnectEvt = Erizo.RoomEvent({type: 'room-disconnected',\r\n                                                    message: 'unexpected-disconnection'});\r\n                that.dispatchEvent(disconnectEvt);\r\n            }\r\n        });\r\n\r\n        that.socket.on('connection_failed', function(arg){\r\n            var stream,\r\n                disconnectEvt;\r\n            if (arg.type === 'publish'){\r\n                L.Logger.error('ICE Connection Failed on publishing stream',\r\n                                arg.streamId, that.state);\r\n                if (that.state !== DISCONNECTED ) {\r\n                    if(arg.streamId){\r\n                        stream = that.localStreams[arg.streamId];\r\n                        if (stream && !stream.failed) {\r\n                            stream.failed = true;\r\n\r\n                            that.unpublish(stream);\r\n\r\n                            disconnectEvt = Erizo.StreamEvent({type: 'stream-failed',\r\n                                    msg: 'Publishing local stream failed ICE Checks',\r\n                                    stream: stream});\r\n                            that.dispatchEvent(disconnectEvt);\r\n                        }\r\n                    }\r\n                }\r\n            } else {\r\n                L.Logger.error('ICE Connection Failed on subscribe stream', arg.streamId);\r\n                if (that.state !== DISCONNECTED) {\r\n                    if(arg.streamId){\r\n                        stream = that.remoteStreams[arg.streamId];\r\n                        if (stream && !stream.failed) {\r\n                            stream.failed = true;\r\n                            disconnectEvt = Erizo.StreamEvent({type: 'stream-failed',\r\n                                msg: 'Subscriber failed ICE, cannot reach Licode for media',\r\n                                stream: stream});\r\n                            that.dispatchEvent(disconnectEvt);\r\n                            that.unsubscribe(stream);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\n        that.socket.on('error', function(e){\r\n            L.Logger.error ('Cannot connect to erizo Controller');\r\n            if (error) error('Cannot connect to ErizoController (socket.io error)',e);\r\n        });\r\n\r\n        // First message with the token\r\n        sendMessageSocket('token', token, callback, error);\r\n    };\r\n\r\n    // Function to send a message to the server using socket.io\r\n    sendMessageSocket = function (type, msg, callback, error) {\r\n        that.socket.emit(type, msg, function (respType, msg) {\r\n            if (respType === 'success') {\r\n                    if (callback) callback(msg);\r\n            } else if (respType === 'error'){\r\n                if (error) error(msg);\r\n            } else {\r\n                if (callback) callback(respType, msg);\r\n            }\r\n\r\n        });\r\n    };\r\n\r\n    // It sends a SDP message to the server using socket.io\r\n    sendSDPSocket = function (type, options, sdp, callback) {\r\n        if (that.state !== DISCONNECTED){\r\n            that.socket.emit(type, options, sdp, function (response, respCallback) {\r\n                if (callback) callback(response, respCallback);\r\n            });\r\n        }else{\r\n            L.Logger.warning('Trying to send a message over a disconnected Socket');\r\n        }\r\n    };\r\n\r\n    // Public functions\r\n\r\n    // It stablishes a connection to the room.\r\n    // Once it is done it throws a RoomEvent(\"room-connected\")\r\n    that.connect = function () {\r\n        var token = L.Base64.decodeBase64(spec.token);\r\n\r\n        if (that.state !== DISCONNECTED) {\r\n            L.Logger.warning('Room already connected');\r\n        }\r\n\r\n        // 1- Connect to Erizo-Controller\r\n        that.state = CONNECTING;\r\n        connectSocket(JSON.parse(token), function (response) {\r\n            var index = 0, stream, streamList = [], streams, roomId, arg, connectEvt;\r\n            streams = response.streams || [];\r\n            that.p2p = response.p2p;\r\n            roomId = response.id;\r\n            that.iceServers = that.iceServers.concat(response.iceServers);\r\n            that.state = CONNECTED;\r\n            spec.defaultVideoBW = response.defaultVideoBW;\r\n            spec.maxVideoBW = response.maxVideoBW;\r\n\r\n            // 2- Retrieve list of streams\r\n            for (index in streams) {\r\n                if (streams.hasOwnProperty(index)) {\r\n                    arg = streams[index];\r\n                    stream = Erizo.Stream({streamID: arg.id,\r\n                                            local: false,\r\n                                            audio: arg.audio,\r\n                                            video: arg.video,\r\n                                            data: arg.data,\r\n                                            screen: arg.screen,\r\n                                            attributes: arg.attributes});\r\n                    streamList.push(stream);\r\n                    that.remoteStreams[arg.id] = stream;\r\n                }\r\n            }\r\n\r\n            // 3 - Update RoomID\r\n            that.roomID = roomId;\r\n\r\n            L.Logger.info('Connected to room ' + that.roomID);\r\n\r\n            connectEvt = Erizo.RoomEvent({type: 'room-connected', streams: streamList});\r\n            that.dispatchEvent(connectEvt);\r\n        }, function (error) {\r\n            L.Logger.error('Not Connected! Error: ' + error);\r\n            var connectEvt = Erizo.RoomEvent({type: 'room-error', message:error});\r\n            that.dispatchEvent(connectEvt);\r\n        });\r\n    };\r\n\r\n    // It disconnects from the room, dispatching a new RoomEvent(\"room-disconnected\")\r\n    that.disconnect = function () {\r\n        L.Logger.debug('Disconnection requested');\r\n        // 1- Disconnect from room\r\n        var disconnectEvt = Erizo.RoomEvent({type: 'room-disconnected',\r\n                                            message: 'expected-disconnection'});\r\n        that.dispatchEvent(disconnectEvt);\r\n    };\r\n\r\n    // It publishes the stream provided as argument. Once it is added it throws a\r\n    // StreamEvent(\"stream-added\").\r\n    that.publish = function (stream, options, callback) {\r\n        options = options || {};\r\n\r\n        options.maxVideoBW = options.maxVideoBW || spec.defaultVideoBW;\r\n        if (options.maxVideoBW > spec.maxVideoBW) {\r\n            options.maxVideoBW = spec.maxVideoBW;\r\n        }\r\n\r\n        if (options.minVideoBW === undefined){\r\n            options.minVideoBW = 0;\r\n        }\r\n\r\n        if (options.minVideoBW > spec.defaultVideoBW){\r\n            options.minVideoBW = spec.defaultVideoBW;\r\n        }\r\n\r\n        // 1- If the stream is not local we do nothing.\r\n        if (stream && stream.local && that.localStreams[stream.getID()] === undefined) {\r\n\r\n            // 2- Publish Media Stream to Erizo-Controller\r\n            if (stream.hasAudio() || stream.hasVideo() || stream.hasScreen()) {\r\n                if (stream.url !== undefined || stream.recording !== undefined) {\r\n                    var type;\r\n                    var arg;\r\n                    if (stream.url) {\r\n                        type = 'url';\r\n                        arg = stream.url;\r\n                    } else {\r\n                        type = 'recording';\r\n                        arg = stream.recording;\r\n                    }\r\n                    L.Logger.info('Checking publish options for', stream.getID());\r\n                    stream.checkOptions(options);\r\n                    sendSDPSocket('publish', {state: type,\r\n                                            data: stream.hasData(),\r\n                                            audio: stream.hasAudio(),\r\n                                            video: stream.hasVideo(),\r\n                                            attributes: stream.getAttributes(),\r\n                                            metadata: options.metadata,\r\n                                            createOffer: options.createOffer},\r\n                                arg, function (id, error) {\r\n\r\n                            if (id !== null) {\r\n                                L.Logger.info('Stream published');\r\n                                stream.getID = function () {\r\n                                    return id;\r\n                                };\r\n                                stream.sendData = function (msg) {\r\n                                    sendDataSocket(stream, msg);\r\n                                };\r\n                                stream.setAttributes = function (attrs) {\r\n                                    updateAttributes(stream, attrs);\r\n                                };\r\n                                that.localStreams[id] = stream;\r\n                                stream.room = that;\r\n                                if (callback)\r\n                                    callback(id);\r\n                            } else {\r\n                                L.Logger.error('Error when publishing stream', error);\r\n                                // Unauth -1052488119\r\n                                // Network -5\r\n                                if (callback)\r\n                                    callback(undefined, error);\r\n                            }\r\n                        });\r\n\r\n                } else if (that.p2p) {\r\n                    // We save them now to be used when actually publishing in P2P mode.\r\n                    spec.maxAudioBW = options.maxAudioBW;\r\n                    spec.maxVideoBW = options.maxVideoBW;\r\n                    sendSDPSocket('publish', {state: 'p2p',\r\n                                            data: stream.hasData(),\r\n                                            audio: stream.hasAudio(),\r\n                                            video: stream.hasVideo(),\r\n                                            screen: stream.hasScreen(),\r\n                                            metadata: options.metadata,\r\n                                            attributes: stream.getAttributes()},\r\n                                undefined, function (id, error) {\r\n                        if (id === null) {\r\n                            L.Logger.error('Error when publishing the stream', error);\r\n                            if (callback)\r\n                                callback(undefined, error);\r\n                        }\r\n                        L.Logger.info('Stream published');\r\n                        stream.getID = function () {\r\n                            return id;\r\n                        };\r\n                        if (stream.hasData()) {\r\n                            stream.sendData = function (msg) {\r\n                                sendDataSocket(stream, msg);\r\n                            };\r\n                        }\r\n                        stream.setAttributes = function (attrs) {\r\n                            updateAttributes(stream, attrs);\r\n                        };\r\n\r\n                        that.localStreams[id] = stream;\r\n                        stream.room = that;\r\n                    });\r\n\r\n                } else {\r\n                    L.Logger.info('Publishing to Erizo Normally, is createOffer',\r\n                                options.createOffer);\r\n                    sendSDPSocket('publish', {state: 'erizo',\r\n                                            data: stream.hasData(),\r\n                                            audio: stream.hasAudio(),\r\n                                            video: stream.hasVideo(),\r\n                                            screen: stream.hasScreen(),\r\n                                            minVideoBW: options.minVideoBW,\r\n                                            attributes: stream.getAttributes(),\r\n                                            createOffer: options.createOffer,\r\n                                            metadata: options.metadata,\r\n                                            scheme: options.scheme},\r\n                                undefined, function (id, error) {\r\n\r\n                            if (id === null) {\r\n                                L.Logger.error('Error when publishing the stream: ', error);\r\n                                if (callback) callback(undefined, error);\r\n                                return;\r\n                            }\r\n\r\n                            L.Logger.info('Stream assigned an Id, starting the publish process');\r\n                            stream.getID = function () {\r\n                                return id;\r\n                            };\r\n                            if (stream.hasData()) {\r\n                                stream.sendData = function (msg) {\r\n                                    sendDataSocket(stream, msg);\r\n                                };\r\n                            }\r\n                            stream.setAttributes = function (attrs) {\r\n                                updateAttributes(stream, attrs);\r\n                            };\r\n                            that.localStreams[id] = stream;\r\n                            stream.room = that;\r\n\r\n                            stream.pc = Erizo.Connection({callback: function (message) {\r\n                                L.Logger.debug('Sending message', message);\r\n                                sendSDPSocket('signaling_message', {streamId: stream.getID(),\r\n                                                                    msg: message},\r\n                                            undefined, function () {});\r\n                            }, iceServers: that.iceServers,\r\n                                maxAudioBW: options.maxAudioBW,\r\n                                maxVideoBW: options.maxVideoBW,\r\n                                limitMaxAudioBW: spec.maxAudioBW,\r\n                                limitMaxVideoBW: spec.maxVideoBW,\r\n                                audio: stream.hasAudio(),\r\n                                video: stream.hasVideo()});\r\n\r\n                            stream.pc.addStream(stream.stream);\r\n                            stream.pc.oniceconnectionstatechange = function (state) {\r\n                                // No one is notifying the other subscribers that this is a failure\r\n                                // they will only receive onRemoveStream\r\n                                if (state === 'failed') {\r\n                                    if (that.state !== DISCONNECTED && stream && !stream.failed) {\r\n                                        stream.failed=true;\r\n                                        L.Logger.warning('Publishing Stream',\r\n                                                        stream.getID(),\r\n                                                        'has failed after successful ICE checks');\r\n                                        that.unpublish(stream);\r\n\r\n                                        var disconnectEvt = Erizo.StreamEvent({\r\n                                            type: 'stream-failed',\r\n                                            msg:'Publishing stream failed after connection',\r\n                                            stream:stream});\r\n                                        that.dispatchEvent(disconnectEvt);\r\n                                    }\r\n                                }\r\n                            };\r\n                            if(!options.createOffer)\r\n                                stream.pc.createOffer();\r\n                            if(callback) callback(id);\r\n                        });\r\n                }\r\n            } else if (stream.hasData()) {\r\n                // 3- Publish Data Stream\r\n                sendSDPSocket('publish', {state: 'data',\r\n                                        data: stream.hasData(),\r\n                                        audio: false,\r\n                                        video: false,\r\n                                        screen: false,\r\n                                        metadata: options.metadata,\r\n                                        attributes: stream.getAttributes()},\r\n                            undefined,\r\n                            function (id, error) {\r\n                    if (id === null) {\r\n                        L.Logger.error('Error publishing stream ', error);\r\n                        if (callback)\r\n                            callback(undefined, error);\r\n                        return;\r\n                    }\r\n                    L.Logger.info('Stream published');\r\n                    stream.getID = function () {\r\n                        return id;\r\n                    };\r\n                    stream.sendData = function (msg) {\r\n                        sendDataSocket(stream, msg);\r\n                    };\r\n                    stream.setAttributes = function (attrs) {\r\n                        updateAttributes(stream, attrs);\r\n                    };\r\n                    that.localStreams[id] = stream;\r\n                    stream.room = that;\r\n                    if(callback) callback(id);\r\n                });\r\n            }\r\n        } else {\r\n            L.Logger.error('Trying to publish invalid stream');\r\n            if(callback) callback(undefined, 'Invalid Stream');\r\n        }\r\n    };\r\n\r\n    // Returns callback(id, error)\r\n    that.startRecording = function (stream, callback) {\r\n        if (stream){\r\n            L.Logger.debug('Start Recording stream: ' + stream.getID());\r\n            sendMessageSocket('startRecorder', {to: stream.getID()}, function(id, error){\r\n                if (id === null){\r\n                    L.Logger.error('Error on start recording', error);\r\n                    if (callback) callback(undefined, error);\r\n                    return;\r\n                }\r\n\r\n                L.Logger.info('Start recording', id);\r\n                if (callback) callback(id);\r\n            });\r\n        }else{\r\n            L.Logger.error('Trying to start recording on an invalid stream', stream);\r\n            if(callback) callback(undefined, 'Invalid Stream');\r\n        }\r\n    };\r\n\r\n    // Returns callback(id, error)\r\n    that.stopRecording = function (recordingId, callback) {\r\n        sendMessageSocket('stopRecorder', {id: recordingId}, function(result, error){\r\n            if (result === null){\r\n                L.Logger.error('Error on stop recording', error);\r\n                if (callback) callback(undefined, error);\r\n                return;\r\n            }\r\n            L.Logger.info('Stop recording', recordingId);\r\n            if (callback) callback(true);\r\n        });\r\n    };\r\n\r\n    // It unpublishes the local stream in the room, dispatching a StreamEvent(\"stream-removed\")\r\n    that.unpublish = function (stream, callback) {\r\n\r\n        // Unpublish stream from Erizo-Controller\r\n        if (stream && stream.local) {\r\n            // Media stream\r\n            sendMessageSocket('unpublish', stream.getID(), function(result, error){\r\n                if (result === null){\r\n                    L.Logger.error('Error unpublishing stream', error);\r\n                    if (callback) callback(undefined, error);\r\n                    return;\r\n                }\r\n\r\n                L.Logger.info('Stream unpublished');\r\n                if (callback) callback(true);\r\n\r\n\r\n            });\r\n            var p2p = stream.room && stream.room.p2p;\r\n            stream.room = undefined;\r\n            if ((stream.hasAudio() ||\r\n                stream.hasVideo() ||\r\n                stream.hasScreen()) &&\r\n                stream.url === undefined) {\r\n                if(!p2p){\r\n                    if (stream.pc) stream.pc.close();\r\n                    stream.pc = undefined;\r\n                }else{\r\n                    for (var index in stream.pc){\r\n                        stream.pc[index].close();\r\n                        stream.pc[index] = undefined;\r\n                    }\r\n                }\r\n            }\r\n            delete that.localStreams[stream.getID()];\r\n\r\n            stream.getID = function () {};\r\n            stream.sendData = function () {};\r\n            stream.setAttributes = function () {};\r\n\r\n        } else {\r\n            var error = 'Cannot unpublish, stream does not exist or is not local';\r\n            L.Logger.error();\r\n            if (callback) callback(undefined, error);\r\n            return;\r\n        }\r\n    };\r\n\r\n    // It subscribe to a remote stream and draws it inside the HTML tag given by the ID='elementID'\r\n    that.subscribe = function (stream, options, callback) {\r\n\r\n        options = options || {};\r\n\r\n        if (stream && !stream.local) {\r\n\r\n            if (stream.hasVideo() || stream.hasAudio() || stream.hasScreen()) {\r\n                // 1- Subscribe to Stream\r\n\r\n                if (that.p2p) {\r\n                    sendSDPSocket('subscribe', {streamId: stream.getID(),\r\n                                                metadata: options.metadata});\r\n                    if(callback) callback(true);\r\n                } else {\r\n                    L.Logger.info('Checking subscribe options for', stream.getID());\r\n                    stream.checkOptions(options);\r\n                    sendSDPSocket('subscribe', {streamId: stream.getID(),\r\n                                                audio: options.audio,\r\n                                                video: options.video,\r\n                                                data: options.data,\r\n                                                browser: Erizo.getBrowser(),\r\n                                                createOffer: options.createOffer,\r\n                                                metadata: options.metadata,\r\n                                                slideShowMode: options.slideShowMode},\r\n                                undefined, function (result, error) {\r\n                            if (result === null) {\r\n                                L.Logger.error('Error subscribing to stream ', error);\r\n                                if (callback)\r\n                                    callback(undefined, error);\r\n                                return;\r\n                            }\r\n\r\n                            L.Logger.info('Subscriber added');\r\n\r\n                            stream.pc = Erizo.Connection({callback: function (message) {\r\n                                L.Logger.info('Sending message', message);\r\n                                sendSDPSocket('signaling_message', {streamId: stream.getID(),\r\n                                                                    msg: message,\r\n                                                                    browser: stream.pc.browser},\r\n                                            undefined, function () {});\r\n                            },\r\n                            nop2p: true,\r\n                            audio: options.audio,\r\n                            video: options.video,\r\n                            iceServers: that.iceServers});\r\n\r\n                            stream.pc.onaddstream = function (evt) {\r\n                                // Draw on html\r\n                                L.Logger.info('Stream subscribed');\r\n                                stream.stream = evt.stream;\r\n                                var evt2 = Erizo.StreamEvent({type: 'stream-subscribed',\r\n                                                            stream: stream});\r\n                                that.dispatchEvent(evt2);\r\n                            };\r\n\r\n                            stream.pc.oniceconnectionstatechange = function (state) {\r\n                                if (state === 'failed') {\r\n                                    if (that.state !== DISCONNECTED && stream &&!stream.failed) {\r\n                                        stream.failed = true;\r\n                                        L.Logger.warning('Subscribing stream',\r\n                                                        stream.getID(),\r\n                                                        'has failed after successful ICE checks');\r\n                                        var disconnectEvt = Erizo.StreamEvent(\r\n                                            {type: 'stream-failed',\r\n                                                msg: 'Subscribing stream failed after connection',\r\n                                                stream:stream });\r\n                                        that.dispatchEvent(disconnectEvt);\r\n                                        that.unsubscribe(stream);\r\n                                    }\r\n                                }\r\n                            };\r\n\r\n                            stream.pc.createOffer(true);\r\n                            if(callback) callback(true);\r\n                        });\r\n\r\n                }\r\n            } else if (stream.hasData() && options.data !== false) {\r\n                sendSDPSocket('subscribe',\r\n                            {streamId: stream.getID(),\r\n                                data: options.data,\r\n                                metadata: options.metadata},\r\n                            undefined, function (result, error) {\r\n                    if (result === null) {\r\n                        L.Logger.error('Error subscribing to stream ', error);\r\n                        if (callback)\r\n                            callback(undefined, error);\r\n                        return;\r\n                    }\r\n                    L.Logger.info('Stream subscribed');\r\n                    var evt = Erizo.StreamEvent({type: 'stream-subscribed', stream: stream});\r\n                    that.dispatchEvent(evt);\r\n                    if(callback) callback(true);\r\n                });\r\n            } else {\r\n                L.Logger.warning ('There\\'s nothing to subscribe to');\r\n                if (callback) callback(undefined, 'Nothing to subscribe to');\r\n                return;\r\n            }\r\n            // Subscribe to stream stream\r\n            L.Logger.info('Subscribing to: ' + stream.getID());\r\n        }else{\r\n            var error = 'Error on subscribe';\r\n            if (!stream){\r\n                L.Logger.warning('Cannot subscribe to invalid stream', stream);\r\n                error = 'Invalid or undefined stream';\r\n            }\r\n            else if (stream.local){\r\n                L.Logger.warning('Cannot subscribe to local stream, you should ' +\r\n                                'subscribe to the remote version of your local stream');\r\n                error = 'Local copy of stream';\r\n            }\r\n            if (callback)\r\n                callback(undefined, error);\r\n            return;\r\n        }\r\n    };\r\n\r\n    // It unsubscribes from the stream, removing the HTML element.\r\n    that.unsubscribe = function (stream, callback) {\r\n        // Unsubscribe from stream stream\r\n        if (that.socket !== undefined) {\r\n            if (stream && !stream.local) {\r\n                sendMessageSocket('unsubscribe', stream.getID(), function (result, error) {\r\n                    if (result === null) {\r\n                        if (callback)\r\n                            callback(undefined, error);\r\n                        return;\r\n                    }\r\n                    removeStream(stream);\r\n                    if (callback) callback(true);\r\n                }, function () {\r\n                    L.Logger.error('Error calling unsubscribe.');\r\n                });\r\n            }\r\n        }\r\n    };\r\n\r\n    //It searchs the streams that have \"name\" attribute with \"value\" value\r\n    that.getStreamsByAttribute = function (name, value) {\r\n        var streams = [], index, stream;\r\n\r\n        for (index in that.remoteStreams) {\r\n            if (that.remoteStreams.hasOwnProperty(index)) {\r\n                stream = that.remoteStreams[index];\r\n\r\n                if (stream.getAttributes() !== undefined &&\r\n                    stream.getAttributes()[name] !== undefined) {\r\n\r\n                    if (stream.getAttributes()[name] === value) {\r\n                        streams.push(stream);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return streams;\r\n    };\r\n\r\n    that.localStreamsCount = function() {\r\n        return Object.keys(that.localStreams).length;\r\n    };\r\n\r\n    return that;\r\n};\r\n/*global document, console*/\r\n'use strict';\r\nvar L = L || {};\r\n\r\n/*\r\n* API to write logs based on traditional logging mechanisms: debug, trace, info, warning, error\r\n*/\r\nL.Logger = (function (L) {\r\n    var DEBUG = 0,\r\n        TRACE = 1,\r\n        INFO = 2,\r\n        WARNING = 3,\r\n        ERROR = 4,\r\n        NONE = 5,\r\n        enableLogPanel,\r\n        setLogLevel,\r\n        log,\r\n        debug,\r\n        trace,\r\n        info,\r\n        warning,\r\n        error;\r\n\r\n    // By calling this method we will not use console.log to print the logs anymore.\r\n    // Instead we will use a <textarea/> element to write down future logs\r\n    enableLogPanel = function () {\r\n        L.Logger.panel = document.createElement('textarea');\r\n        L.Logger.panel.setAttribute('id', 'licode-logs');\r\n        L.Logger.panel.setAttribute('style', 'width: 100%; height: 100%; display: none');\r\n        L.Logger.panel.setAttribute('rows', 20);\r\n        L.Logger.panel.setAttribute('cols', 20);\r\n        L.Logger.panel.setAttribute('readOnly', true);\r\n        document.body.appendChild(L.Logger.panel);\r\n    };\r\n\r\n    // It sets the new log level. We can set it to NONE if we do not want to print logs\r\n    setLogLevel = function (level) {\r\n        if (level > L.Logger.NONE) {\r\n            level = L.Logger.NONE;\r\n        } else if (level < L.Logger.DEBUG) {\r\n            level = L.Logger.DEBUG;\r\n        }\r\n        L.Logger.logLevel = level;\r\n    };\r\n\r\n    // Generic function to print logs for a given level:\r\n    //  L.Logger.[DEBUG, TRACE, INFO, WARNING, ERROR]\r\n    log = function (level) {\r\n        var out = '';\r\n        if (level < L.Logger.logLevel) {\r\n            return;\r\n        }\r\n        if (level === L.Logger.DEBUG) {\r\n            out = out + 'DEBUG';\r\n        } else if (level === L.Logger.TRACE) {\r\n            out = out + 'TRACE';\r\n        } else if (level === L.Logger.INFO) {\r\n            out = out + 'INFO';\r\n        } else if (level === L.Logger.WARNING) {\r\n            out = out + 'WARNING';\r\n        } else if (level === L.Logger.ERROR) {\r\n            out = out + 'ERROR';\r\n        }\r\n        out = out + ': ';\r\n        var args = [];\r\n        for (var i = 0; i < arguments.length; i++) {\r\n            args[i] = arguments[i];\r\n        }\r\n        var tempArgs = args.slice(1);\r\n        args = [out].concat(tempArgs);\r\n        if (L.Logger.panel !== undefined) {\r\n            var tmp = '';\r\n            for (var idx = 0; idx < args.length; idx++) {\r\n                tmp = tmp + args[idx];\r\n            }\r\n            L.Logger.panel.value = L.Logger.panel.value + '\\n' + tmp;\r\n        } else {\r\n            console.log.apply(console, args);\r\n        }\r\n    };\r\n\r\n    // It prints debug logs\r\n    debug = function () {\r\n        var args = [];\r\n        for (var i = 0; i < arguments.length; i++) {\r\n            args[i] = arguments[i];\r\n        }\r\n        L.Logger.log.apply(L.Logger,[L.Logger.DEBUG].concat(args));\r\n    };\r\n\r\n    // It prints trace logs\r\n    trace = function () {\r\n        var args = [];\r\n        for (var i = 0; i < arguments.length; i++) {\r\n            args[i] = arguments[i];\r\n        }\r\n        L.Logger.log.apply(L.Logger,[L.Logger.TRACE].concat(args));\r\n    };\r\n\r\n    // It prints info logs\r\n    info = function () {\r\n        var args = [];\r\n        for (var i = 0; i < arguments.length; i++) {\r\n            args[i] = arguments[i];\r\n        }\r\n        L.Logger.log.apply(L.Logger,[L.Logger.INFO].concat(args));\r\n    };\r\n\r\n    // It prints warning logs\r\n    warning = function () {\r\n        var args = [];\r\n        for (var i = 0; i < arguments.length; i++) {\r\n            args[i] = arguments[i];\r\n        }\r\n        L.Logger.log.apply(L.Logger,[L.Logger.WARNING].concat(args));\r\n    };\r\n\r\n    // It prints error logs\r\n    error = function () {\r\n        var args = [];\r\n        for (var i = 0; i < arguments.length; i++) {\r\n            args[i] = arguments[i];\r\n        }\r\n        L.Logger.log.apply(L.Logger,[L.Logger.ERROR].concat(args));\r\n    };\r\n\r\n    return {\r\n        DEBUG: DEBUG,\r\n        TRACE: TRACE,\r\n        INFO: INFO,\r\n        WARNING: WARNING,\r\n        ERROR: ERROR,\r\n        NONE: NONE,\r\n        enableLogPanel: enableLogPanel,\r\n        setLogLevel: setLogLevel,\r\n        log: log,\r\n        debug: debug,\r\n        trace: trace,\r\n        info: info,\r\n        warning: warning,\r\n        error: error\r\n    };\r\n}(L));\r\n/* global unescape */\r\n'use strict';\r\nvar L = L || {};\r\nL.Base64 = (function () {\r\n    var END_OF_INPUT,\r\n        base64Chars,\r\n        reverseBase64Chars,\r\n        base64Str,\r\n        base64Count,\r\n        i,\r\n        setBase64Str,\r\n        readBase64,\r\n        encodeBase64,\r\n        readReverseBase64,\r\n        ntos,\r\n        decodeBase64;\r\n\r\n    END_OF_INPUT = -1;\r\n\r\n    base64Chars = [\r\n        'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H',\r\n        'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P',\r\n        'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X',\r\n        'Y', 'Z', 'a', 'b', 'c', 'd', 'e', 'f',\r\n        'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n',\r\n        'o', 'p', 'q', 'r', 's', 't', 'u', 'v',\r\n        'w', 'x', 'y', 'z', '0', '1', '2', '3',\r\n        '4', '5', '6', '7', '8', '9', '+', '/'\r\n    ];\r\n\r\n    reverseBase64Chars = [];\r\n\r\n    for (i = 0; i < base64Chars.length; i = i + 1) {\r\n        reverseBase64Chars[base64Chars[i]] = i;\r\n    }\r\n\r\n    setBase64Str = function (str) {\r\n        base64Str = str;\r\n        base64Count = 0;\r\n    };\r\n\r\n    readBase64 = function () {\r\n        var c;\r\n        if (!base64Str) {\r\n            return END_OF_INPUT;\r\n        }\r\n        if (base64Count >= base64Str.length) {\r\n            return END_OF_INPUT;\r\n        }\r\n        c = base64Str.charCodeAt(base64Count) & 0xff;\r\n        base64Count = base64Count + 1;\r\n        return c;\r\n    };\r\n\r\n    encodeBase64 = function (str) {\r\n        var result, inBuffer, lineCount, done;\r\n        setBase64Str(str);\r\n        result = '';\r\n        inBuffer = new Array(3);\r\n        lineCount = 0;\r\n        done = false;\r\n        while (!done && (inBuffer[0] = readBase64()) !== END_OF_INPUT) {\r\n            inBuffer[1] = readBase64();\r\n            inBuffer[2] = readBase64();\r\n            result = result + (base64Chars[inBuffer[0] >> 2]);\r\n            if (inBuffer[1] !== END_OF_INPUT) {\r\n                result = result + (base64Chars [((inBuffer[0] << 4) & 0x30) | (inBuffer[1] >> 4)]);\r\n                if (inBuffer[2] !== END_OF_INPUT) {\r\n                    result = result +\r\n                            (base64Chars [((inBuffer[1] << 2) & 0x3c) | (inBuffer[2] >> 6)]);\r\n                    result = result + (base64Chars[inBuffer[2] & 0x3F]);\r\n                } else {\r\n                    result = result + (base64Chars[((inBuffer[1] << 2) & 0x3c)]);\r\n                    result = result + ('=');\r\n                    done = true;\r\n                }\r\n            } else {\r\n                result = result + (base64Chars[((inBuffer[0] << 4) & 0x30)]);\r\n                result = result + ('=');\r\n                result = result + ('=');\r\n                done = true;\r\n            }\r\n            lineCount = lineCount + 4;\r\n            if (lineCount >= 76) {\r\n                result = result + ('\\n');\r\n                lineCount = 0;\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n\r\n    readReverseBase64 = function () {\r\n        if (!base64Str) {\r\n            return END_OF_INPUT;\r\n        }\r\n        while (true) {\r\n            if (base64Count >= base64Str.length) {\r\n                return END_OF_INPUT;\r\n            }\r\n            var nextCharacter = base64Str.charAt(base64Count);\r\n            base64Count = base64Count + 1;\r\n            if (reverseBase64Chars[nextCharacter]) {\r\n                return reverseBase64Chars[nextCharacter];\r\n            }\r\n            if (nextCharacter === 'A') {\r\n                return 0;\r\n            }\r\n        }\r\n    };\r\n\r\n    ntos = function (n) {\r\n        n = n.toString(16);\r\n        if (n.length === 1) {\r\n            n = '0' + n;\r\n        }\r\n        n = '%' + n;\r\n        return unescape(n);\r\n    };\r\n\r\n    decodeBase64 = function (str) {\r\n        var result, inBuffer, done;\r\n        setBase64Str(str);\r\n        result = '';\r\n        inBuffer = new Array(4);\r\n        done = false;\r\n        while (!done &&\r\n            (inBuffer[0] = readReverseBase64()) !== END_OF_INPUT &&\r\n            (inBuffer[1] = readReverseBase64()) !== END_OF_INPUT) {\r\n            inBuffer[2] = readReverseBase64();\r\n            inBuffer[3] = readReverseBase64();\r\n            result = result + ntos((((inBuffer[0] << 2) & 0xff)| inBuffer[1] >> 4));\r\n            if (inBuffer[2] !== END_OF_INPUT) {\r\n                result +=  ntos((((inBuffer[1] << 4) & 0xff) | inBuffer[2] >> 2));\r\n                if (inBuffer[3] !== END_OF_INPUT) {\r\n                    result = result +  ntos((((inBuffer[2] << 6)  & 0xff) | inBuffer[3]));\r\n                } else {\r\n                    done = true;\r\n                }\r\n            } else {\r\n                done = true;\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n\r\n    return {\r\n        encodeBase64: encodeBase64,\r\n        decodeBase64: decodeBase64\r\n    };\r\n}(L));\r\n/* globals $$, Elements */\r\n'use strict';\r\n/**\r\n * Copyright 2013 Marc J. Schmidt. See the LICENSE file at the top-level\r\n * directory of this distribution and at\r\n * https://github.com/marcj/css-element-queries/blob/master/LICENSE.\r\n */\r\n(function() {\r\n\r\n    //this.L = this.L || {};\r\n    //var L = L || {};\r\n\r\n    /**\r\n     *\r\n     * @type {Function}\r\n     * @constructor\r\n     */\r\n    L.ElementQueries = function() {\r\n        /**\r\n         *\r\n         * @param element\r\n         * @returns {Number}\r\n         */\r\n        function getEmSize(element) {\r\n            if (!element) {\r\n                element = document.documentElement;\r\n            }\r\n            var fontSize = getComputedStyle(element, 'fontSize');\r\n            return parseFloat(fontSize) || 16;\r\n        }\r\n\r\n        /**\r\n         *\r\n         * @copyright https://github.com/Mr0grog/element-query/blob/master/LICENSE\r\n         *\r\n         * @param element\r\n         * @param value\r\n         * @param units\r\n         * @returns {*}\r\n         */\r\n        function convertToPx(element, value) {\r\n            var units = value.replace(/[0-9]*/, '');\r\n            value = parseFloat(value);\r\n            switch (units) {\r\n                case 'px':\r\n                    return value;\r\n                case 'em':\r\n                    return value * getEmSize(element);\r\n                case 'rem':\r\n                    return value * getEmSize();\r\n                // Viewport units!\r\n                // According to http://quirksmode.org/mobile/tableViewport.html\r\n                // documentElement.clientWidth/Height gets us the most reliable info\r\n                case 'vw':\r\n                    return value * document.documentElement.clientWidth / 100;\r\n                case 'vh':\r\n                    return value * document.documentElement.clientHeight / 100;\r\n                case 'vmin':\r\n                case 'vmax':\r\n                    var vw = document.documentElement.clientWidth / 100;\r\n                    var vh = document.documentElement.clientHeight / 100;\r\n                    var chooser = Math[units === 'vmin' ? 'min' : 'max'];\r\n                    return value * chooser(vw, vh);\r\n                default:\r\n                    return value;\r\n                // for now, not supporting physical units (since they are just a set number of px)\r\n                // or ex/ch (getting accurate measurements is hard)\r\n            }\r\n        }\r\n\r\n        /**\r\n         *\r\n         * @param {HTMLElement} element\r\n         * @constructor\r\n         */\r\n        function SetupInformation(element) {\r\n            this.element = element;\r\n            this.options = [];\r\n            var i,\r\n                j,\r\n                option,\r\n                width = 0,\r\n                height = 0,\r\n                value,\r\n                actualValue,\r\n                attrValues,\r\n                attrValue,\r\n                attrName;\r\n\r\n            /**\r\n             * @param option {mode: 'min|max', property: 'width|height', value: '123px'}\r\n             */\r\n            this.addOption = function(option) {\r\n                this.options.push(option);\r\n            };\r\n\r\n            var attributes = ['min-width', 'min-height', 'max-width', 'max-height'];\r\n\r\n            /**\r\n             * Extracts the computed width/height and sets to min/max- attribute.\r\n             */\r\n            this.call = function() {\r\n                // extract current dimensions\r\n                width = this.element.offsetWidth;\r\n                height = this.element.offsetHeight;\r\n\r\n                attrValues = {};\r\n\r\n                for (i = 0, j = this.options.length; i < j; i++) {\r\n                    option = this.options[i];\r\n                    value = convertToPx(this.element, option.value);\r\n\r\n                    actualValue = option.property === 'width' ? width : height;\r\n                    attrName = option.mode + '-' + option.property;\r\n                    attrValue = '';\r\n\r\n                    if (option.mode === 'min' && actualValue >= value) {\r\n                        attrValue += option.value;\r\n                    }\r\n\r\n                    if (option.mode === 'max' && actualValue <= value) {\r\n                        attrValue += option.value;\r\n                    }\r\n\r\n                    if (!attrValues[attrName]) attrValues[attrName] = '';\r\n                    if (attrValue && -1 === (' '+attrValues[attrName]+' ')\r\n                                            .indexOf(' ' + attrValue + ' ')) {\r\n                        attrValues[attrName] += ' ' + attrValue;\r\n                    }\r\n                }\r\n\r\n                for (var k in attributes) {\r\n                    if (attrValues[attributes[k]]) {\r\n                        this.element.setAttribute(attributes[k],\r\n                                                attrValues[attributes[k]].substr(1));\r\n                    } else {\r\n                        this.element.removeAttribute(attributes[k]);\r\n                    }\r\n                }\r\n            };\r\n        }\r\n\r\n        /**\r\n         * @param {HTMLElement} element\r\n         * @param {Object}      options\r\n         */\r\n        function setupElement(element, options) {\r\n            if (element.elementQueriesSetupInformation) {\r\n                element.elementQueriesSetupInformation.addOption(options);\r\n            } else {\r\n                element.elementQueriesSetupInformation = new SetupInformation(element);\r\n                element.elementQueriesSetupInformation.addOption(options);\r\n                new L.ResizeSensor(element, function() {\r\n                    element.elementQueriesSetupInformation.call();\r\n                });\r\n            }\r\n            element.elementQueriesSetupInformation.call();\r\n        }\r\n\r\n        /**\r\n         * @param {String} selector\r\n         * @param {String} mode min|max\r\n         * @param {String} property width|height\r\n         * @param {String} value\r\n         */\r\n        function queueQuery(selector, mode, property, value) {\r\n            var query;\r\n            if (document.querySelectorAll) query = document.querySelectorAll.bind(document);\r\n            if (!query && 'undefined' !== typeof $$) query = $$;\r\n            if (!query && 'undefined' !== typeof jQuery) query = jQuery;\r\n\r\n            if (!query) {\r\n                throw 'No document.querySelectorAll, jQuery or Mootools\\'s $$ found.';\r\n            }\r\n\r\n            var elements = query(selector);\r\n            for (var i = 0, j = elements.length; i < j; i++) {\r\n                setupElement(elements[i], {\r\n                    mode: mode,\r\n                    property: property,\r\n                    value: value\r\n                });\r\n            }\r\n        }\r\n\r\n        var regex = /,?([^,\\n]*)\\[[\\s\\t]*(min|max)-(width|height)[\\s\\t]*[~$\\^]?=[\\s\\t]*\"([^\"]*)\"[\\s\\t]*]([^\\n\\s\\{]*)/mgi;  // jshint ignore:line\r\n\r\n        /**\r\n         * @param {String} css\r\n         */\r\n        function extractQuery(css) {\r\n            var match;\r\n            css = css.replace(/'/g, '\"');\r\n            while (null !== (match = regex.exec(css))) {\r\n                if (5 < match.length) {\r\n                    queueQuery(match[1] || match[5], match[2], match[3], match[4]);\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * @param {CssRule[]|String} rules\r\n         */\r\n        function readRules(rules) {\r\n            var selector = '';\r\n            if (!rules) {\r\n                return;\r\n            }\r\n            if ('string' === typeof rules) {\r\n                rules = rules.toLowerCase();\r\n                if (-1 !== rules.indexOf('min-width') || -1 !== rules.indexOf('max-width')) {\r\n                    extractQuery(rules);\r\n                }\r\n            } else {\r\n                for (var i = 0, j = rules.length; i < j; i++) {\r\n                    if (1 === rules[i].type) {\r\n                        selector = rules[i].selectorText || rules[i].cssText;\r\n                        if (-1 !== selector.indexOf('min-height') ||\r\n                            -1 !== selector.indexOf('max-height')) {\r\n                            extractQuery(selector);\r\n                        } else if (-1 !== selector.indexOf('min-width') ||\r\n                                    -1 !== selector.indexOf('max-width')) {\r\n                            extractQuery(selector);\r\n                        }\r\n                    } else if (4 === rules[i].type) {\r\n                        readRules(rules[i].cssRules || rules[i].rules);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Searches all css rules and setups the event listener\r\n         * to all elements with element query rules..\r\n         */\r\n        this.init = function() {\r\n            for (var i = 0, j = document.styleSheets.length; i < j; i++) {\r\n                readRules(document.styleSheets[i].cssText ||\r\n                        document.styleSheets[i].cssRules ||\r\n                        document.styleSheets[i].rules);\r\n            }\r\n        };\r\n    };\r\n\r\n    function init() {\r\n        (new L.ElementQueries()).init();\r\n    }\r\n\r\n    if (window.addEventListener) {\r\n        window.addEventListener('load', init, false);\r\n    } else {\r\n        window.attachEvent('onload', init);\r\n    }\r\n\r\n    // Only used for the dirty checking, so the event callback count is limted\r\n    //  to max 1 call per fps per sensor.\r\n    // In combination with the event based resize sensor this saves cpu time,\r\n    // because the sensor is too fast and\r\n    // would generate too many unnecessary events.\r\n    var requestAnimationFrame = window.requestAnimationFrame ||\r\n        window.mozRequestAnimationFrame ||\r\n        window.webkitRequestAnimationFrame ||\r\n        function (fn) {\r\n            return window.setTimeout(fn, 20);\r\n        };\r\n\r\n    /**\r\n     * Iterate over each of the provided element(s).\r\n     *\r\n     * @param {HTMLElement|HTMLElement[]} elements\r\n     * @param {Function}                  callback\r\n     */\r\n    function forEachElement(elements, callback){\r\n        var elementsType = Object.prototype.toString.call(elements);\r\n        var isCollectionTyped = ('[object Array]' === elementsType ||\r\n            ('[object NodeList]' === elementsType) ||\r\n            ('[object HTMLCollection]' === elementsType) ||\r\n            ('undefined' !== typeof jQuery && elements instanceof jQuery) || //jquery\r\n            ('undefined' !== typeof Elements && elements instanceof Elements) //mootools\r\n        );\r\n        var i = 0, j = elements.length;\r\n        if (isCollectionTyped) {\r\n            for (; i < j; i++) {\r\n                callback(elements[i]);\r\n            }\r\n        } else {\r\n            callback(elements);\r\n        }\r\n    }\r\n    /**\r\n     * Class for dimension change detection.\r\n     *\r\n     * @param {Element|Element[]|Elements|jQuery} element\r\n     * @param {Function} callback\r\n     *\r\n     * @constructor\r\n     */\r\n    L.ResizeSensor = function(element, callback) {\r\n        /**\r\n         *\r\n         * @constructor\r\n         */\r\n        function EventQueue() {\r\n            var q = [];\r\n            this.add = function(ev) {\r\n                q.push(ev);\r\n            };\r\n\r\n            var i, j;\r\n            this.call = function() {\r\n                for (i = 0, j = q.length; i < j; i++) {\r\n                    q[i].call();\r\n                }\r\n            };\r\n\r\n            this.remove = function(ev) {\r\n                var newQueue = [];\r\n                for(i = 0, j = q.length; i < j; i++) {\r\n                    if(q[i] !== ev) newQueue.push(q[i]);\r\n                }\r\n                q = newQueue;\r\n            };\r\n\r\n            this.length = function() {\r\n                return q.length;\r\n            };\r\n        }\r\n\r\n        /**\r\n         * @param {HTMLElement} element\r\n         * @param {String}      prop\r\n         * @returns {String|Number}\r\n         */\r\n        function getComputedStyle(element, prop) {\r\n            if (element.currentStyle) {\r\n                return element.currentStyle[prop];\r\n            } else if (window.getComputedStyle) {\r\n                return window.getComputedStyle(element, null).getPropertyValue(prop);\r\n            } else {\r\n                return element.style[prop];\r\n            }\r\n        }\r\n\r\n        /**\r\n         *\r\n         * @param {HTMLElement} element\r\n         * @param {Function}    resized\r\n         */\r\n        function attachResizeEvent(element, resized) {\r\n            if (!element.resizedAttached) {\r\n                element.resizedAttached = new EventQueue();\r\n                element.resizedAttached.add(resized);\r\n            } else if (element.resizedAttached) {\r\n                element.resizedAttached.add(resized);\r\n                return;\r\n            }\r\n\r\n            element.resizeSensor = document.createElement('div');\r\n            element.resizeSensor.className = 'resize-sensor';\r\n            var style = 'position: absolute; left: 0; top: 0; right: 0; bottom: 0; ' +\r\n                        'overflow: hidden; z-index: -1; visibility: hidden;';\r\n            var styleChild = 'position: absolute; left: 0; top: 0; transition: 0s;';\r\n\r\n            element.resizeSensor.style.cssText = style;\r\n            element.resizeSensor.innerHTML =\r\n                '<div class=\"resize-sensor-expand\" style=\"' + style + '\">' +\r\n                    '<div style=\"' + styleChild + '\"></div>' +\r\n                '</div>' +\r\n                '<div class=\"resize-sensor-shrink\" style=\"' + style + '\">' +\r\n                    '<div style=\"' + styleChild + ' width: 200%; height: 200%\"></div>' +\r\n                '</div>';\r\n            element.appendChild(element.resizeSensor);\r\n\r\n            if (getComputedStyle(element, 'position') === 'static') {\r\n                element.style.position = 'relative';\r\n            }\r\n\r\n            var expand = element.resizeSensor.childNodes[0];\r\n            var expandChild = expand.childNodes[0];\r\n            var shrink = element.resizeSensor.childNodes[1];\r\n\r\n            var reset = function() {\r\n                expandChild.style.width  = 100000 + 'px';\r\n                expandChild.style.height = 100000 + 'px';\r\n\r\n                expand.scrollLeft = 100000;\r\n                expand.scrollTop = 100000;\r\n\r\n                shrink.scrollLeft = 100000;\r\n                shrink.scrollTop = 100000;\r\n            };\r\n\r\n            reset();\r\n            var dirty = false;\r\n\r\n            var dirtyChecking = function() {\r\n                if (!element.resizedAttached) return;\r\n\r\n                if (dirty) {\r\n                    element.resizedAttached.call();\r\n                    dirty = false;\r\n                }\r\n\r\n                requestAnimationFrame(dirtyChecking);\r\n            };\r\n\r\n            requestAnimationFrame(dirtyChecking);\r\n            var lastWidth, lastHeight;\r\n            var cachedWidth, cachedHeight; //useful to not query offsetWidth twice\r\n\r\n            var onScroll = function() {\r\n            if ((cachedWidth = element.offsetWidth) !== lastWidth ||\r\n                (cachedHeight = element.offsetHeight) !== lastHeight) {\r\n                dirty = true;\r\n\r\n                lastWidth = cachedWidth;\r\n                lastHeight = cachedHeight;\r\n            }\r\n            reset();\r\n            };\r\n\r\n            var addEvent = function(el, name, cb) {\r\n                if (el.attachEvent) {\r\n                    el.attachEvent('on' + name, cb);\r\n                } else {\r\n                    el.addEventListener(name, cb);\r\n                }\r\n            };\r\n\r\n            addEvent(expand, 'scroll', onScroll);\r\n            addEvent(shrink, 'scroll', onScroll);\r\n        }\r\n\r\n        forEachElement(element, function(elem){\r\n            attachResizeEvent(elem, callback);\r\n        });\r\n\r\n        this.detach = function(ev) {\r\n            L.ResizeSensor.detach(element, ev);\r\n        };\r\n    };\r\n\r\n    L.ResizeSensor.detach = function(element, ev) {\r\n        forEachElement(element, function(elem){\r\n            if(elem.resizedAttached && typeof ev === 'function'){\r\n                elem.resizedAttached.remove(ev);\r\n                if(elem.resizedAttached.length()) return;\r\n            }\r\n            if (elem.resizeSensor) {\r\n                if (elem.contains(elem.resizeSensor)) {\r\n                    elem.removeChild(elem.resizeSensor);\r\n                }\r\n                delete elem.resizeSensor;\r\n                delete elem.resizedAttached;\r\n            }\r\n        });\r\n    };\r\n\r\n\r\n})();\r\n'use strict';\r\n/*\r\n* View class represents a HTML component\r\n* Every view is an EventDispatcher.\r\n*/\r\nvar Erizo = Erizo || {};\r\nErizo.View = function () {\r\n    var that = Erizo.EventDispatcher({});\r\n\r\n    // Variables\r\n\r\n    // URL where it will look for icons and assets\r\n    that.url = App.staticUrl + \"assets/img/weedeo\";\r\n    return that;\r\n};\r\n/*global window, document, L, webkitURL*/\r\n'use strict';\r\n/*\r\n* VideoPlayer represents a Licode video component that shows either a local or a remote video.\r\n* Ex.: var player = VideoPlayer({id: id, stream: stream, elementID: elementID});\r\n* A VideoPlayer is also a View component.\r\n*/\r\nvar Erizo = Erizo || {};\r\nErizo.VideoPlayer = function (spec) {\r\n    var that = Erizo.View({}),\r\n        onmouseover,\r\n        onmouseout;\r\n\r\n    // Variables\r\n\r\n    // VideoPlayer ID\r\n    that.id = spec.id;\r\n\r\n    // Stream that the VideoPlayer will play\r\n    that.stream = spec.stream.stream;\r\n\r\n    // DOM element in which the VideoPlayer will be appended\r\n    that.elementID = spec.elementID;\r\n\r\n    // Private functions\r\n    onmouseover = function () {\r\n        that.bar.display();\r\n    };\r\n\r\n    onmouseout = function () {\r\n        that.bar.hide();\r\n    };\r\n\r\n    // Public functions\r\n\r\n    // It will stop the VideoPlayer and remove it from the HTML\r\n    that.destroy = function () {\r\n        that.video.pause();\r\n        delete that.resizer;\r\n        that.parentNode.removeChild(that.div);\r\n    };\r\n\r\n    that.resize = function () {\r\n\r\n        var width = that.container.offsetWidth,\r\n            height = that.container.offsetHeight;\r\n\r\n        if (spec.stream.screen || spec.options.crop === false) {\r\n\r\n            if (width * (9 / 16) < height) {\r\n\r\n                that.video.style.width = width + 'px';\r\n                that.video.style.height = (9 / 16) * width + 'px';\r\n\r\n                that.video.style.top = -((9 / 16) * width / 2 - height / 2) + 'px';\r\n                that.video.style.left = '0px';\r\n\r\n            } else {\r\n\r\n                that.video.style.height = height + 'px';\r\n                that.video.style.width = (16 / 9) * height + 'px';\r\n\r\n                that.video.style.left = -((16 / 9) * height / 2 - width / 2) + 'px';\r\n                that.video.style.top = '0px';\r\n\r\n            }\r\n        } else {\r\n            if (width !== that.containerWidth || height !== that.containerHeight) {\r\n\r\n                if (width * (3 / 4) > height) {\r\n\r\n                    that.video.style.width = width + 'px';\r\n                    that.video.style.height = (3 / 4) * width + 'px';\r\n\r\n                    that.video.style.top = -((3 / 4) * width / 2 - height / 2) + 'px';\r\n                    that.video.style.left = '0px';\r\n\r\n                } else {\r\n\r\n                    that.video.style.height = height + 'px';\r\n                    that.video.style.width = (4 / 3) * height + 'px';\r\n\r\n                    that.video.style.left = -((4 / 3) * height / 2 - width / 2) + 'px';\r\n                    that.video.style.top = '0px';\r\n\r\n                }\r\n            }\r\n        }\r\n\r\n        that.containerWidth = width;\r\n        that.containerHeight = height;\r\n\r\n    };\r\n\r\n    /*window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function (m, key, value) {\r\n        document.getElementById(key).value = unescape(value);\r\n    });*/\r\n\r\n    L.Logger.debug('Creating URL from stream ' + that.stream);\r\n    var myURL = window.URL || webkitURL;\r\n    that.streamUrl = myURL.createObjectURL(that.stream);\r\n\r\n    // Container\r\n    that.div = document.createElement('div');\r\n    that.div.setAttribute('id', 'player_' + that.id);\r\n    that.div.setAttribute('class', 'player video_player');\r\n    that.div.setAttribute('style', 'width: 100%; height: 100%; position: relative; ' +\r\n                                    'background-color: black; overflow: hidden;');\r\n\r\n    // Loader icon\r\n    if (spec.options.loader !== false) {\r\n    that.loader = document.createElement('img');\r\n    that.loader.setAttribute('style', 'width: 16px; height: 16px; position: absolute; ' +\r\n                                        'top: 50%; left: 50%; margin-top: -8px; margin-left: -8px');\r\n    that.loader.setAttribute('id', 'back_' + that.id);\r\n    that.loader.setAttribute('class', 'loader');\r\n    that.loader.setAttribute('src', that.url + '/assets/loader.gif');\r\n    }\r\n\r\n    // Video tag\r\n    that.video = document.createElement('video');\r\n    that.video.setAttribute('id', 'stream' + that.id);\r\n    that.video.setAttribute('class', 'stream');\r\n    that.video.setAttribute('style', 'width: 100%; height: 100%; position: absolute');\r\n    that.video.setAttribute('autoplay', 'autoplay');\r\n\r\n    if(spec.stream.local)\r\n        that.video.volume = 0;\r\n\r\n    if (that.elementID !== undefined) {\r\n        // Check for a passed DOM node.\r\n        if (typeof that.elementID === 'object' &&\r\n        typeof that.elementID.appendChild === 'function') {\r\n            that.container = that.elementID;\r\n        }\r\n        else {\r\n            that.container = document.getElementById(that.elementID);\r\n        }\r\n    } else {\r\n        that.container = document.body;\r\n    }\r\n    that.container.appendChild(that.div);\r\n\r\n    that.parentNode = that.div.parentNode;\r\n\r\n    if (that.loader) {\r\n    that.div.appendChild(that.loader);\r\n    }\r\n    that.div.appendChild(that.video);\r\n\r\n    that.containerWidth = 0;\r\n    that.containerHeight = 0;\r\n\r\n    if (spec.options.resizer !== false) {\r\n    that.resizer = new L.ResizeSensor(that.container, that.resize);\r\n\r\n    that.resize();\r\n    }\r\n\r\n    // Bottom Bar\r\n    if (spec.options.bar !== false) {\r\n        that.bar = new Erizo.Bar({elementID: 'player_' + that.id,\r\n                                id: that.id,\r\n                                stream: spec.stream,\r\n                                media: that.video,\r\n                                options: spec.options});\r\n\r\n        that.div.onmouseover = onmouseover;\r\n        that.div.onmouseout = onmouseout;\r\n    }\r\n    else {\r\n        // Expose a consistent object to manipulate the media.\r\n        that.media = that.video;\r\n    }\r\n\r\n    // added by Pooya\r\n    if (spec.options.soundMeter !== false && spec.stream.stream.getAudioTracks().length > 0) {\r\n    that.SoundMeter = new Erizo.SoundMeter({elementID: 'player_' + that.id,\r\n                                            stream: spec.stream,\r\n                                            options: spec.options});\r\n    }\r\n    // --------------\r\n\r\n    that.video.src = that.streamUrl;\r\n\r\n    return that;\r\n};\r\n/*global window, document, L, webkitURL*/\r\n'use strict';\r\n/*\r\n* AudioPlayer represents a Licode Audio component that shows either a local or a remote Audio.\r\n* Ex.: var player = AudioPlayer({id: id, stream: stream, elementID: elementID});\r\n* A AudioPlayer is also a View component.\r\n*/\r\nvar Erizo = Erizo || {};\r\nErizo.AudioPlayer = function (spec) {\r\n    var that = Erizo.View({}),\r\n        onmouseover,\r\n        onmouseout;\r\n\r\n    // Variables\r\n\r\n    // AudioPlayer ID\r\n    that.id = spec.id;\r\n\r\n    // Stream that the AudioPlayer will play\r\n    that.stream = spec.stream.stream;\r\n\r\n    // DOM element in which the AudioPlayer will be appended\r\n    that.elementID = spec.elementID;\r\n\r\n\r\n    L.Logger.debug('Creating URL from stream ' + that.stream);\r\n    var myURL = window.URL || webkitURL;\r\n    that.streamUrl = myURL.createObjectURL(that.stream);\r\n\r\n    // Audio tag\r\n    that.audio = document.createElement('audio');\r\n    that.audio.setAttribute('id', 'stream' + that.id);\r\n    that.audio.setAttribute('class', 'stream');\r\n    that.audio.setAttribute('style', 'width: 100%; height: 100%; position: absolute');\r\n    that.audio.setAttribute('autoplay', 'autoplay');\r\n\r\n    if(spec.stream.local)\r\n        that.audio.volume = 0;\r\n\r\n    if(spec.stream.local)\r\n        that.audio.volume = 0;\r\n\r\n\r\n    if (that.elementID !== undefined) {\r\n\r\n        // It will stop the AudioPlayer and remove it from the HTML\r\n        that.destroy = function () {\r\n            that.audio.pause();\r\n            that.parentNode.removeChild(that.div);\r\n        };\r\n\r\n        onmouseover = function () {\r\n            that.bar.display();\r\n        };\r\n\r\n        onmouseout = function () {\r\n            that.bar.hide();\r\n        };\r\n\r\n        // Container\r\n        that.div = document.createElement('div');\r\n        that.div.setAttribute('id', 'player_' + that.id);\r\n        that.div.setAttribute('class', 'player audio_player');\r\n        that.div.setAttribute('style', 'width: 100%; height: 100%; position: relative; ' +\r\n                            'overflow: hidden;');\r\n\r\n        // Check for a passed DOM node.\r\n        if (typeof that.elementID === 'object' &&\r\n        typeof that.elementID.appendChild === 'function') {\r\n            that.container = that.elementID;\r\n        }\r\n        else {\r\n            that.container = document.getElementById(that.elementID);\r\n        }\r\n        that.container.appendChild(that.div);\r\n\r\n        that.parentNode = that.div.parentNode;\r\n\r\n        that.div.appendChild(that.audio);\r\n\r\n        // Bottom Bar\r\n        if (spec.options.bar !== false) {\r\n            that.bar = new Erizo.Bar({elementID: 'player_' + that.id,\r\n                                    id: that.id,\r\n                                    stream: spec.stream,\r\n                                    media: that.audio,\r\n                                    options: spec.options});\r\n\r\n            that.div.onmouseover = onmouseover;\r\n            that.div.onmouseout = onmouseout;\r\n        }\r\n        else {\r\n            // Expose a consistent object to manipulate the media.\r\n            that.media = that.audio;\r\n        }\r\n\r\n    } else {\r\n        // It will stop the AudioPlayer and remove it from the HTML\r\n        that.destroy = function () {\r\n            that.audio.pause();\r\n            that.parentNode.removeChild(that.audio);\r\n        };\r\n\r\n        document.body.appendChild(that.audio);\r\n        that.parentNode = document.body;\r\n    }\r\n\r\n    // added by Pooya\r\n    if (spec.options.soundMeter !== false && spec.stream.stream.getAudioTracks().length > 0) {\r\n    if (!spec.options.soundMeterAnimation) {\r\n        spec.options.soundMeterAnimation = 'scale'; \r\n    }\r\n    that.SoundMeter = new Erizo.SoundMeter({elementID: 'player_' + that.id,\r\n                                            stream: spec.stream,\r\n                                            options: spec.options});\r\n    }\r\n    // --------------\r\n\r\n    that.audio.src = that.streamUrl;\r\n\r\n    return that;\r\n};\r\n/*global document, clearTimeout, setTimeout */\r\n'use strict';\r\n/*\r\n* Bar represents the bottom menu bar of every mediaPlayer.\r\n* It contains a Speaker and an icon.\r\n* Every Bar is a View.\r\n* Ex.: var bar = Bar({elementID: element, id: id});\r\n*/\r\nvar Erizo = Erizo || {};\r\nErizo.Bar = function (spec) {\r\n    var that = Erizo.View({}),\r\n        waiting,\r\n        show;\r\n\r\n    // Variables\r\n\r\n    // DOM element in which the Bar will be appended\r\n    that.elementID = spec.elementID;\r\n\r\n    // Bar ID\r\n    that.id = spec.id;\r\n\r\n    // Container\r\n    that.div = document.createElement('div');\r\n    that.div.setAttribute('id', 'bar_' + that.id);\r\n\r\n    // Bottom bar\r\n    that.bar = document.createElement('div');\r\n    that.bar.setAttribute('style', 'width: 100%; height: 15%; max-height: 30px; position: absolute; bottom: 0; right: 0; background-color: rgba(255,255,255,0.62)');\r\n    that.bar.setAttribute('id', 'subbar_' + that.id);\r\n\r\n    // Private functions\r\n    show = function (displaying) {\r\n        if (displaying !== 'block') {\r\n            displaying = 'none';\r\n        } else {\r\n            clearTimeout(waiting);\r\n        }\r\n\r\n        that.div.setAttribute('style', 'width: 100%; height: 100%; position: relative; ' +\r\n                                        'bottom: 0; right: 0; display:' + displaying);\r\n    };\r\n\r\n    // Public functions\r\n\r\n    that.display = function () {\r\n        show('block');\r\n    };\r\n\r\n    that.hide = function () {\r\n        waiting = setTimeout(show, 1000);\r\n    };\r\n\r\n    document.getElementById(that.elementID).appendChild(that.div);\r\n    that.div.appendChild(that.bar);\r\n\r\n    // Speaker component\r\n    if (!spec.stream.screen && (spec.options === undefined ||\r\n                                spec.options.speaker === undefined ||\r\n                                spec.options.speaker === true)) {\r\n        that.speaker = new Erizo.Speaker({elementID: 'subbar_' + that.id,\r\n                                        id: that.id,\r\n                                        stream: spec.stream,\r\n                                        media: spec.media});\r\n    }\r\n\r\n    that.display();\r\n    that.hide();\r\n\r\n    return that;\r\n};\r\n/*global document */\r\n'use strict';\r\n/*\r\n* Speaker represents the volume icon that will be shown in the mediaPlayer, for example.\r\n* It manages the volume level of the media tag given in the constructor.\r\n* Every Speaker is a View.\r\n* Ex.: var speaker = Speaker({elementID: element, media: mediaTag, id: id});\r\n*/\r\nvar Erizo = Erizo || {};\r\nErizo.Speaker = function (spec) {\r\n    var that = Erizo.View({}),\r\n        show,\r\n        mute,\r\n        unmute,\r\n        lastVolume = 100;\r\n\r\n    // Variables\r\n\r\n    // DOM element in which the Speaker will be appended\r\n    that.elementID = spec.elementID;\r\n\r\n    // media tag\r\n    that.media = spec.media;\r\n\r\n    // Speaker id\r\n    that.id = spec.id;\r\n\r\n    // MediaStream\r\n    that.stream = spec.stream;\r\n\r\n    // Container\r\n    that.div = document.createElement('div');\r\n    that.div.setAttribute('style', 'width: 40%; height: 100%; max-width: 32px; ' +\r\n                                    'position: absolute; right: 0;z-index:0;');\r\n\r\n    // Volume icon\r\n    that.icon = document.createElement('img');\r\n    that.icon.setAttribute('id', 'volume_' + that.id);\r\n    that.icon.setAttribute('src', that.url + '/assets/sound48.png');\r\n    that.icon.setAttribute('style', 'width: 80%; height: 100%; position: absolute;');\r\n    that.div.appendChild(that.icon);\r\n\r\n\r\n    if (!that.stream.local) {\r\n\r\n        // Volume bar\r\n        that.picker = document.createElement('input');\r\n        that.picker.setAttribute('id', 'picker_' + that.id);\r\n        that.picker.type = 'range';\r\n        that.picker.min = 0;\r\n        that.picker.max = 100;\r\n        that.picker.step = 10;\r\n        that.picker.value = lastVolume;\r\n        //  FireFox supports range sliders as of version 23\r\n        that.picker.setAttribute('orient', 'vertical');\r\n        that.div.appendChild(that.picker);\r\n        that.media.volume = that.picker.value / 100;\r\n        that.media.muted = false;\r\n\r\n        that.picker.oninput = function () {\r\n            if (that.picker.value > 0) {\r\n                that.media.muted = false;\r\n                that.icon.setAttribute('src', that.url + '/assets/sound48.png');\r\n            } else {\r\n                that.media.muted = true;\r\n                that.icon.setAttribute('src', that.url + '/assets/mute48.png');\r\n            }\r\n            that.media.volume = that.picker.value / 100;\r\n        };\r\n\r\n        // Private functions\r\n        show = function (displaying) {\r\n            that.picker.setAttribute('style', 'background: transparent; width: 32px; ' +\r\n                                            'height: 100px; position: absolute; bottom: 90%; ' +\r\n                                            'z-index: 1;' + that.div.offsetHeight + 'px; ' +\r\n                                            'right: 0px; -webkit-appearance: slider-vertical; ' +\r\n                                            'display: ' + displaying);\r\n        };\r\n\r\n        mute = function () {\r\n            that.icon.setAttribute('src', that.url + '/assets/mute48.png');\r\n            lastVolume = that.picker.value;\r\n            that.picker.value = 0;\r\n            that.media.volume = 0;\r\n            that.media.muted = true;\r\n        };\r\n\r\n        unmute = function () {\r\n            that.icon.setAttribute('src', that.url + '/assets/sound48.png');\r\n            that.picker.value = lastVolume;\r\n            that.media.volume = that.picker.value / 100;\r\n            that.media.muted = false;\r\n        };\r\n\r\n        that.icon.onclick = function () {\r\n            if (that.media.muted) {\r\n                unmute();\r\n            } else {\r\n                mute();\r\n            }\r\n        };\r\n\r\n        // Public functions\r\n        that.div.onmouseover = function () {\r\n            show('block');\r\n        };\r\n\r\n        that.div.onmouseout = function () {\r\n            show('none');\r\n        };\r\n\r\n        show('none');\r\n\r\n    } else {\r\n\r\n        mute = function () {\r\n            that.media.muted = true;\r\n            that.icon.setAttribute('src', that.url + '/assets/mute48.png');\r\n            that.stream.stream.getAudioTracks()[0].enabled = false;\r\n        };\r\n\r\n        unmute = function () {\r\n            that.media.muted = false;\r\n            that.icon.setAttribute('src', that.url + '/assets/sound48.png');\r\n            that.stream.stream.getAudioTracks()[0].enabled = true;\r\n        };\r\n\r\n        that.icon.onclick = function () {\r\n            if (that.media.muted) {\r\n                unmute();\r\n            } else {\r\n                mute();\r\n            }\r\n        };\r\n    }\r\n\r\n    document.getElementById(that.elementID).appendChild(that.div);\r\n    return that;\r\n};\r\n\r\n\r\n// added by Pooya\r\nwindow.AudioContext = window.AudioContext || window.webkitAudioContext || false;\r\nErizo.SoundMeter = function(spec) {\r\nif (!window.audioContext) return false;\r\nvar that = this;\r\nthis.$target = spec.options.soundMeterTarget || $('#' + spec.elementID);\r\nthis.$holder = $(\"<div class='soundmeter'></div>\");\r\nthis.$bar = $(\"<span></span>\");\r\nthis.$bar.appendTo(this.$holder);\r\n\r\nthis.soundMeter = new Erizo.SoundMeterClass({\r\n    stream: spec.stream\r\n});\r\nthis.soundMeter.connectToSource(spec.stream.stream, function(e) {\r\n    if (e) {\r\n    alert(e);\r\n    return;\r\n    }\r\n    spec.stream.addEventListener('audioLevelUpdated', function(e) {\r\n    if (spec.options.soundMeterAnimation == 'width') {\r\n        that.$bar.stop().animate({\r\n        width: e.audioLevel.toFixed(0) + '%'\r\n        }, 100);\r\n    } else if (spec.options.soundMeterAnimation == 'scale') {\r\n        var s  = 1 + e.audioLevel.toFixed(0) / 200;\r\n        that.$bar.css({\r\n        'transform': 'scale(' + s + ')'\r\n        });\r\n    } else {\r\n        that.$bar.stop().animate({\r\n        height: e.audioLevel.toFixed(0) + '%'\r\n        }, 100);\r\n    }\r\n    });\r\n});\r\n\r\nthis.$holder.appendTo(this.$target);\r\n};\r\nErizo.SoundMeter.prototype.stop = function() {\r\nthis.soundMeter && this.soundMeter.stop();\r\nthis.$holder && this.$holder.remove();\r\n};\r\n\r\nErizo.SoundMeterClass = function(spec) {\r\nif (!window.audioContext) return false;\r\n\r\nthis.context = window.audioContext;\r\nthis.audioLevel = 0.0;\r\nthis.script = this.context.createScriptProcessor(2048, 1, 1);\r\n\r\nthis.analyser = this.context.createAnalyser();\r\nthis.analyser.smoothingTimeConstant = 0.8;\r\nthis.analyser.fftSize = 1024;\r\n\r\nvar that = this;\r\nthis.script.onaudioprocess = function(event) {\r\n    var array = new Uint8Array(that.analyser.frequencyBinCount);\r\n    that.analyser.getByteFrequencyData(array);\r\n    var values = 0;\r\n\r\n    var length = array.length;\r\n    for (var i = 0; i < length; i++) {\r\n    values += (array[i]);\r\n    }\r\n\r\n    that.audioLevel = values / length;\r\n    spec.stream.dispatchEvent({type: 'audioLevelUpdated', audioLevel: that.audioLevel});\r\n};\r\n}\r\nErizo.SoundMeterClass.prototype.connectToSource = function(stream, callback) {\r\nconsole.log('SoundMeter connecting');\r\ntry {\r\n    this.mic = this.context.createMediaStreamSource(stream);\r\n    this.mic.connect(this.analyser);\r\n    this.analyser.connect(this.script);\r\n    this.script.connect(this.context.destination);\r\n    if (typeof callback !== 'undefined') {\r\n    callback(null);\r\n    }\r\n} catch (e) {\r\n    console.error(e);\r\n    if (typeof callback !== 'undefined') {\r\n    callback(e);\r\n    }\r\n}\r\n};\r\nErizo.SoundMeterClass.prototype.stop = function() {\r\nthis.mic.disconnect();\r\nthis.script.disconnect();\r\n};\r\n\r\n\r\nexport default Erizo;","/*! Socket.IO.js build:0.9.17, development. Copyright(c) 2011 LearnBoost <dev@learnboost.com> MIT Licensed */\r\n\r\nvar io = ('undefined' === typeof module ? {} : module.exports);\r\n(function() {\r\n\r\n/**\r\n * socket.io\r\n * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\r\n * MIT Licensed\r\n */\r\n\r\n(function (exports, global) {\r\n\r\n  /**\r\n   * IO namespace.\r\n   *\r\n   * @namespace\r\n   */\r\n\r\n  var io = exports;\r\n\r\n  /**\r\n   * Socket.IO version\r\n   *\r\n   * @api public\r\n   */\r\n\r\n  io.version = '0.9.17';\r\n\r\n  /**\r\n   * Protocol implemented.\r\n   *\r\n   * @api public\r\n   */\r\n\r\n  io.protocol = 1;\r\n\r\n  /**\r\n   * Available transports, these will be populated with the available transports\r\n   *\r\n   * @api public\r\n   */\r\n\r\n  io.transports = [];\r\n\r\n  /**\r\n   * Keep track of jsonp callbacks.\r\n   *\r\n   * @api private\r\n   */\r\n\r\n  io.j = [];\r\n\r\n  /**\r\n   * Keep track of our io.Sockets\r\n   *\r\n   * @api private\r\n   */\r\n  io.sockets = {};\r\n\r\n\r\n  /**\r\n   * Manages connections to hosts.\r\n   *\r\n   * @param {String} uri\r\n   * @Param {Boolean} force creation of new socket (defaults to false)\r\n   * @api public\r\n   */\r\n\r\n  io.connect = function (host, details) {\r\n    var uri = io.util.parseUri(host)\r\n      , uuri\r\n      , socket;\r\n\r\n    if (global && global.location) {\r\n      uri.protocol = uri.protocol || global.location.protocol.slice(0, -1);\r\n      uri.host = uri.host || (global.document\r\n        ? global.document.domain : global.location.hostname);\r\n      uri.port = uri.port || global.location.port;\r\n    }\r\n\r\n    uuri = io.util.uniqueUri(uri);\r\n\r\n    var options = {\r\n        host: uri.host\r\n      , secure: 'https' == uri.protocol\r\n      , port: uri.port || ('https' == uri.protocol ? 443 : 80)\r\n      , query: uri.query || ''\r\n    };\r\n\r\n    io.util.merge(options, details);\r\n\r\n    if (options['force new connection'] || !io.sockets[uuri]) {\r\n      socket = new io.Socket(options);\r\n    }\r\n\r\n    if (!options['force new connection'] && socket) {\r\n      io.sockets[uuri] = socket;\r\n    }\r\n\r\n    socket = socket || io.sockets[uuri];\r\n\r\n    // if path is different from '' or /\r\n    return socket.of(uri.path.length > 1 ? uri.path : '');\r\n  };\r\n\r\n})('object' === typeof module ? module.exports : (this.io = {}), this);\r\n/**\r\n * socket.io\r\n * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\r\n * MIT Licensed\r\n */\r\n\r\n(function (exports, global) {\r\n\r\n  /**\r\n   * Utilities namespace.\r\n   *\r\n   * @namespace\r\n   */\r\n\r\n  var util = exports.util = {};\r\n\r\n  /**\r\n   * Parses an URI\r\n   *\r\n   * @author Steven Levithan <stevenlevithan.com> (MIT license)\r\n   * @api public\r\n   */\r\n\r\n  var re = /^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\r\n\r\n  var parts = ['source', 'protocol', 'authority', 'userInfo', 'user', 'password',\r\n               'host', 'port', 'relative', 'path', 'directory', 'file', 'query',\r\n               'anchor'];\r\n\r\n  util.parseUri = function (str) {\r\n    var m = re.exec(str || '')\r\n      , uri = {}\r\n      , i = 14;\r\n\r\n    while (i--) {\r\n      uri[parts[i]] = m[i] || '';\r\n    }\r\n\r\n    return uri;\r\n  };\r\n\r\n  /**\r\n   * Produces a unique url that identifies a Socket.IO connection.\r\n   *\r\n   * @param {Object} uri\r\n   * @api public\r\n   */\r\n\r\n  util.uniqueUri = function (uri) {\r\n    var protocol = uri.protocol\r\n      , host = uri.host\r\n      , port = uri.port;\r\n\r\n    if ('document' in global) {\r\n      host = host || document.domain;\r\n      port = port || (protocol == 'https'\r\n        && document.location.protocol !== 'https:' ? 443 : document.location.port);\r\n    } else {\r\n      host = host || 'localhost';\r\n\r\n      if (!port && protocol == 'https') {\r\n        port = 443;\r\n      }\r\n    }\r\n\r\n    return (protocol || 'http') + '://' + host + ':' + (port || 80);\r\n  };\r\n\r\n  /**\r\n   * Mergest 2 query strings in to once unique query string\r\n   *\r\n   * @param {String} base\r\n   * @param {String} addition\r\n   * @api public\r\n   */\r\n\r\n  util.query = function (base, addition) {\r\n    var query = util.chunkQuery(base || '')\r\n      , components = [];\r\n\r\n    util.merge(query, util.chunkQuery(addition || ''));\r\n    for (var part in query) {\r\n      if (query.hasOwnProperty(part)) {\r\n        components.push(part + '=' + query[part]);\r\n      }\r\n    }\r\n\r\n    return components.length ? '?' + components.join('&') : '';\r\n  };\r\n\r\n  /**\r\n   * Transforms a querystring in to an object\r\n   *\r\n   * @param {String} qs\r\n   * @api public\r\n   */\r\n\r\n  util.chunkQuery = function (qs) {\r\n    var query = {}\r\n      , params = qs.split('&')\r\n      , i = 0\r\n      , l = params.length\r\n      , kv;\r\n\r\n    for (; i < l; ++i) {\r\n      kv = params[i].split('=');\r\n      if (kv[0]) {\r\n        query[kv[0]] = kv[1];\r\n      }\r\n    }\r\n\r\n    return query;\r\n  };\r\n\r\n  /**\r\n   * Executes the given function when the page is loaded.\r\n   *\r\n   *     io.util.load(function () { console.log('page loaded'); });\r\n   *\r\n   * @param {Function} fn\r\n   * @api public\r\n   */\r\n\r\n  var pageLoaded = false;\r\n\r\n  util.load = function (fn) {\r\n    if ('document' in global && document.readyState === 'complete' || pageLoaded) {\r\n      return fn();\r\n    }\r\n\r\n    util.on(global, 'load', fn, false);\r\n  };\r\n\r\n  /**\r\n   * Adds an event.\r\n   *\r\n   * @api private\r\n   */\r\n\r\n  util.on = function (element, event, fn, capture) {\r\n    if (element.attachEvent) {\r\n      element.attachEvent('on' + event, fn);\r\n    } else if (element.addEventListener) {\r\n      element.addEventListener(event, fn, capture);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Generates the correct `XMLHttpRequest` for regular and cross domain requests.\r\n   *\r\n   * @param {Boolean} [xdomain] Create a request that can be used cross domain.\r\n   * @returns {XMLHttpRequest|false} If we can create a XMLHttpRequest.\r\n   * @api private\r\n   */\r\n\r\n  util.request = function (xdomain) {\r\n\r\n    if (xdomain && 'undefined' != typeof XDomainRequest && !util.ua.hasCORS) {\r\n      return new XDomainRequest();\r\n    }\r\n\r\n    if ('undefined' != typeof XMLHttpRequest && (!xdomain || util.ua.hasCORS)) {\r\n      return new XMLHttpRequest();\r\n    }\r\n\r\n    if (!xdomain) {\r\n      try {\r\n        return new window[(['Active'].concat('Object').join('X'))]('Microsoft.XMLHTTP');\r\n      } catch(e) { }\r\n    }\r\n\r\n    return null;\r\n  };\r\n\r\n  /**\r\n   * XHR based transport constructor.\r\n   *\r\n   * @constructor\r\n   * @api public\r\n   */\r\n\r\n  /**\r\n   * Change the internal pageLoaded value.\r\n   */\r\n\r\n  if ('undefined' != typeof window) {\r\n    util.load(function () {\r\n      pageLoaded = true;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Defers a function to ensure a spinner is not displayed by the browser\r\n   *\r\n   * @param {Function} fn\r\n   * @api public\r\n   */\r\n\r\n  util.defer = function (fn) {\r\n    if (!util.ua.webkit || 'undefined' != typeof importScripts) {\r\n      return fn();\r\n    }\r\n\r\n    util.load(function () {\r\n      setTimeout(fn, 100);\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Merges two objects.\r\n   *\r\n   * @api public\r\n   */\r\n\r\n  util.merge = function merge (target, additional, deep, lastseen) {\r\n    var seen = lastseen || []\r\n      , depth = typeof deep == 'undefined' ? 2 : deep\r\n      , prop;\r\n\r\n    for (prop in additional) {\r\n      if (additional.hasOwnProperty(prop) && util.indexOf(seen, prop) < 0) {\r\n        if (typeof target[prop] !== 'object' || !depth) {\r\n          target[prop] = additional[prop];\r\n          seen.push(additional[prop]);\r\n        } else {\r\n          util.merge(target[prop], additional[prop], depth - 1, seen);\r\n        }\r\n      }\r\n    }\r\n\r\n    return target;\r\n  };\r\n\r\n  /**\r\n   * Merges prototypes from objects\r\n   *\r\n   * @api public\r\n   */\r\n\r\n  util.mixin = function (ctor, ctor2) {\r\n    util.merge(ctor.prototype, ctor2.prototype);\r\n  };\r\n\r\n  /**\r\n   * Shortcut for prototypical and static inheritance.\r\n   *\r\n   * @api private\r\n   */\r\n\r\n  util.inherit = function (ctor, ctor2) {\r\n    function f() {};\r\n    f.prototype = ctor2.prototype;\r\n    ctor.prototype = new f;\r\n  };\r\n\r\n  /**\r\n   * Checks if the given object is an Array.\r\n   *\r\n   *     io.util.isArray([]); // true\r\n   *     io.util.isArray({}); // false\r\n   *\r\n   * @param Object obj\r\n   * @api public\r\n   */\r\n\r\n  util.isArray = Array.isArray || function (obj) {\r\n    return Object.prototype.toString.call(obj) === '[object Array]';\r\n  };\r\n\r\n  /**\r\n   * Intersects values of two arrays into a third\r\n   *\r\n   * @api public\r\n   */\r\n\r\n  util.intersect = function (arr, arr2) {\r\n    var ret = []\r\n      , longest = arr.length > arr2.length ? arr : arr2\r\n      , shortest = arr.length > arr2.length ? arr2 : arr;\r\n\r\n    for (var i = 0, l = shortest.length; i < l; i++) {\r\n      if (~util.indexOf(longest, shortest[i]))\r\n        ret.push(shortest[i]);\r\n    }\r\n\r\n    return ret;\r\n  };\r\n\r\n  /**\r\n   * Array indexOf compatibility.\r\n   *\r\n   * @see bit.ly/a5Dxa2\r\n   * @api public\r\n   */\r\n\r\n  util.indexOf = function (arr, o, i) {\r\n\r\n    for (var j = arr.length, i = i < 0 ? i + j < 0 ? 0 : i + j : i || 0;\r\n         i < j && arr[i] !== o; i++) {}\r\n\r\n    return j <= i ? -1 : i;\r\n  };\r\n\r\n  /**\r\n   * Converts enumerables to array.\r\n   *\r\n   * @api public\r\n   */\r\n\r\n  util.toArray = function (enu) {\r\n    var arr = [];\r\n\r\n    for (var i = 0, l = enu.length; i < l; i++)\r\n      arr.push(enu[i]);\r\n\r\n    return arr;\r\n  };\r\n\r\n  /**\r\n   * UA / engines detection namespace.\r\n   *\r\n   * @namespace\r\n   */\r\n\r\n  util.ua = {};\r\n\r\n  /**\r\n   * Whether the UA supports CORS for XHR.\r\n   *\r\n   * @api public\r\n   */\r\n\r\n  util.ua.hasCORS = 'undefined' != typeof XMLHttpRequest && (function () {\r\n    try {\r\n      var a = new XMLHttpRequest();\r\n    } catch (e) {\r\n      return false;\r\n    }\r\n\r\n    return a.withCredentials != undefined;\r\n  })();\r\n\r\n  /**\r\n   * Detect webkit.\r\n   *\r\n   * @api public\r\n   */\r\n\r\n  util.ua.webkit = 'undefined' != typeof navigator\r\n    && /webkit/i.test(navigator.userAgent);\r\n\r\n   /**\r\n   * Detect iPad/iPhone/iPod.\r\n   *\r\n   * @api public\r\n   */\r\n\r\n  util.ua.iDevice = 'undefined' != typeof navigator\r\n      && /iPad|iPhone|iPod/i.test(navigator.userAgent);\r\n\r\n})('undefined' != typeof io ? io : module.exports, this);\r\n/**\r\n * socket.io\r\n * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\r\n * MIT Licensed\r\n */\r\n\r\n(function (exports, io) {\r\n\r\n  /**\r\n   * Expose constructor.\r\n   */\r\n\r\n  exports.EventEmitter = EventEmitter;\r\n\r\n  /**\r\n   * Event emitter constructor.\r\n   *\r\n   * @api public.\r\n   */\r\n\r\n  function EventEmitter () {};\r\n\r\n  /**\r\n   * Adds a listener\r\n   *\r\n   * @api public\r\n   */\r\n\r\n  EventEmitter.prototype.on = function (name, fn) {\r\n    if (!this.$events) {\r\n      this.$events = {};\r\n    }\r\n\r\n    if (!this.$events[name]) {\r\n      this.$events[name] = fn;\r\n    } else if (io.util.isArray(this.$events[name])) {\r\n      this.$events[name].push(fn);\r\n    } else {\r\n      this.$events[name] = [this.$events[name], fn];\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\n  EventEmitter.prototype.addListener = EventEmitter.prototype.on;\r\n\r\n  /**\r\n   * Adds a volatile listener.\r\n   *\r\n   * @api public\r\n   */\r\n\r\n  EventEmitter.prototype.once = function (name, fn) {\r\n    var self = this;\r\n\r\n    function on () {\r\n      self.removeListener(name, on);\r\n      fn.apply(this, arguments);\r\n    };\r\n\r\n    on.listener = fn;\r\n    this.on(name, on);\r\n\r\n    return this;\r\n  };\r\n\r\n  /**\r\n   * Removes a listener.\r\n   *\r\n   * @api public\r\n   */\r\n\r\n  EventEmitter.prototype.removeListener = function (name, fn) {\r\n    if (this.$events && this.$events[name]) {\r\n      var list = this.$events[name];\r\n\r\n      if (io.util.isArray(list)) {\r\n        var pos = -1;\r\n\r\n        for (var i = 0, l = list.length; i < l; i++) {\r\n          if (list[i] === fn || (list[i].listener && list[i].listener === fn)) {\r\n            pos = i;\r\n            break;\r\n          }\r\n        }\r\n\r\n        if (pos < 0) {\r\n          return this;\r\n        }\r\n\r\n        list.splice(pos, 1);\r\n\r\n        if (!list.length) {\r\n          delete this.$events[name];\r\n        }\r\n      } else if (list === fn || (list.listener && list.listener === fn)) {\r\n        delete this.$events[name];\r\n      }\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\n  /**\r\n   * Removes all listeners for an event.\r\n   *\r\n   * @api public\r\n   */\r\n\r\n  EventEmitter.prototype.removeAllListeners = function (name) {\r\n    if (name === undefined) {\r\n      this.$events = {};\r\n      return this;\r\n    }\r\n\r\n    if (this.$events && this.$events[name]) {\r\n      this.$events[name] = null;\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\n  /**\r\n   * Gets all listeners for a certain event.\r\n   *\r\n   * @api publci\r\n   */\r\n\r\n  EventEmitter.prototype.listeners = function (name) {\r\n    if (!this.$events) {\r\n      this.$events = {};\r\n    }\r\n\r\n    if (!this.$events[name]) {\r\n      this.$events[name] = [];\r\n    }\r\n\r\n    if (!io.util.isArray(this.$events[name])) {\r\n      this.$events[name] = [this.$events[name]];\r\n    }\r\n\r\n    return this.$events[name];\r\n  };\r\n\r\n  /**\r\n   * Emits an event.\r\n   *\r\n   * @api public\r\n   */\r\n\r\n  EventEmitter.prototype.emit = function (name) {\r\n    if (!this.$events) {\r\n      return false;\r\n    }\r\n\r\n    var handler = this.$events[name];\r\n\r\n    if (!handler) {\r\n      return false;\r\n    }\r\n\r\n    var args = Array.prototype.slice.call(arguments, 1);\r\n\r\n    if ('function' == typeof handler) {\r\n      handler.apply(this, args);\r\n    } else if (io.util.isArray(handler)) {\r\n      var listeners = handler.slice();\r\n\r\n      for (var i = 0, l = listeners.length; i < l; i++) {\r\n        listeners[i].apply(this, args);\r\n      }\r\n    } else {\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  };\r\n\r\n})(\r\n    'undefined' != typeof io ? io : module.exports\r\n  , 'undefined' != typeof io ? io : module.parent.exports\r\n);\r\n\r\n/**\r\n * socket.io\r\n * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\r\n * MIT Licensed\r\n */\r\n\r\n/**\r\n * Based on JSON2 (http://www.JSON.org/js.html).\r\n */\r\n\r\n(function (exports, nativeJSON) {\r\n  \"use strict\";\r\n\r\n  // use native JSON if it's available\r\n  if (nativeJSON && nativeJSON.parse){\r\n    return exports.JSON = {\r\n      parse: nativeJSON.parse\r\n    , stringify: nativeJSON.stringify\r\n    };\r\n  }\r\n\r\n  var JSON = exports.JSON = {};\r\n\r\n  function f(n) {\r\n      // Format integers to have at least two digits.\r\n      return n < 10 ? '0' + n : n;\r\n  }\r\n\r\n  function date(d, key) {\r\n    return isFinite(d.valueOf()) ?\r\n        d.getUTCFullYear()     + '-' +\r\n        f(d.getUTCMonth() + 1) + '-' +\r\n        f(d.getUTCDate())      + 'T' +\r\n        f(d.getUTCHours())     + ':' +\r\n        f(d.getUTCMinutes())   + ':' +\r\n        f(d.getUTCSeconds())   + 'Z' : null;\r\n  };\r\n\r\n  var cx = /[\\u0000\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g,\r\n      escapable = /[\\\\\\\"\\x00-\\x1f\\x7f-\\x9f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g,\r\n      gap,\r\n      indent,\r\n      meta = {    // table of character substitutions\r\n          '\\b': '\\\\b',\r\n          '\\t': '\\\\t',\r\n          '\\n': '\\\\n',\r\n          '\\f': '\\\\f',\r\n          '\\r': '\\\\r',\r\n          '\"' : '\\\\\"',\r\n          '\\\\': '\\\\\\\\'\r\n      },\r\n      rep;\r\n\r\n\r\n  function quote(string) {\r\n\r\n// If the string contains no control characters, no quote characters, and no\r\n// backslash characters, then we can safely slap some quotes around it.\r\n// Otherwise we must also replace the offending characters with safe escape\r\n// sequences.\r\n\r\n      escapable.lastIndex = 0;\r\n      return escapable.test(string) ? '\"' + string.replace(escapable, function (a) {\r\n          var c = meta[a];\r\n          return typeof c === 'string' ? c :\r\n              '\\\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\r\n      }) + '\"' : '\"' + string + '\"';\r\n  }\r\n\r\n\r\n  function str(key, holder) {\r\n\r\n// Produce a string from holder[key].\r\n\r\n      var i,          // The loop counter.\r\n          k,          // The member key.\r\n          v,          // The member value.\r\n          length,\r\n          mind = gap,\r\n          partial,\r\n          value = holder[key];\r\n\r\n// If the value has a toJSON method, call it to obtain a replacement value.\r\n\r\n      if (value instanceof Date) {\r\n          value = date(key);\r\n      }\r\n\r\n// If we were called with a replacer function, then call the replacer to\r\n// obtain a replacement value.\r\n\r\n      if (typeof rep === 'function') {\r\n          value = rep.call(holder, key, value);\r\n      }\r\n\r\n// What happens next depends on the value's type.\r\n\r\n      switch (typeof value) {\r\n      case 'string':\r\n          return quote(value);\r\n\r\n      case 'number':\r\n\r\n// JSON numbers must be finite. Encode non-finite numbers as null.\r\n\r\n          return isFinite(value) ? String(value) : 'null';\r\n\r\n      case 'boolean':\r\n      case 'null':\r\n\r\n// If the value is a boolean or null, convert it to a string. Note:\r\n// typeof null does not produce 'null'. The case is included here in\r\n// the remote chance that this gets fixed someday.\r\n\r\n          return String(value);\r\n\r\n// If the type is 'object', we might be dealing with an object or an array or\r\n// null.\r\n\r\n      case 'object':\r\n\r\n// Due to a specification blunder in ECMAScript, typeof null is 'object',\r\n// so watch out for that case.\r\n\r\n          if (!value) {\r\n              return 'null';\r\n          }\r\n\r\n// Make an array to hold the partial results of stringifying this object value.\r\n\r\n          gap += indent;\r\n          partial = [];\r\n\r\n// Is the value an array?\r\n\r\n          if (Object.prototype.toString.apply(value) === '[object Array]') {\r\n\r\n// The value is an array. Stringify every element. Use null as a placeholder\r\n// for non-JSON values.\r\n\r\n              length = value.length;\r\n              for (i = 0; i < length; i += 1) {\r\n                  partial[i] = str(i, value) || 'null';\r\n              }\r\n\r\n// Join all of the elements together, separated with commas, and wrap them in\r\n// brackets.\r\n\r\n              v = partial.length === 0 ? '[]' : gap ?\r\n                  '[\\n' + gap + partial.join(',\\n' + gap) + '\\n' + mind + ']' :\r\n                  '[' + partial.join(',') + ']';\r\n              gap = mind;\r\n              return v;\r\n          }\r\n\r\n// If the replacer is an array, use it to select the members to be stringified.\r\n\r\n          if (rep && typeof rep === 'object') {\r\n              length = rep.length;\r\n              for (i = 0; i < length; i += 1) {\r\n                  if (typeof rep[i] === 'string') {\r\n                      k = rep[i];\r\n                      v = str(k, value);\r\n                      if (v) {\r\n                          partial.push(quote(k) + (gap ? ': ' : ':') + v);\r\n                      }\r\n                  }\r\n              }\r\n          } else {\r\n\r\n// Otherwise, iterate through all of the keys in the object.\r\n\r\n              for (k in value) {\r\n                  if (Object.prototype.hasOwnProperty.call(value, k)) {\r\n                      v = str(k, value);\r\n                      if (v) {\r\n                          partial.push(quote(k) + (gap ? ': ' : ':') + v);\r\n                      }\r\n                  }\r\n              }\r\n          }\r\n\r\n// Join all of the member texts together, separated with commas,\r\n// and wrap them in braces.\r\n\r\n          v = partial.length === 0 ? '{}' : gap ?\r\n              '{\\n' + gap + partial.join(',\\n' + gap) + '\\n' + mind + '}' :\r\n              '{' + partial.join(',') + '}';\r\n          gap = mind;\r\n          return v;\r\n      }\r\n  }\r\n\r\n// If the JSON object does not yet have a stringify method, give it one.\r\n\r\n  JSON.stringify = function (value, replacer, space) {\r\n\r\n// The stringify method takes a value and an optional replacer, and an optional\r\n// space parameter, and returns a JSON text. The replacer can be a function\r\n// that can replace values, or an array of strings that will select the keys.\r\n// A default replacer method can be provided. Use of the space parameter can\r\n// produce text that is more easily readable.\r\n\r\n      var i;\r\n      gap = '';\r\n      indent = '';\r\n\r\n// If the space parameter is a number, make an indent string containing that\r\n// many spaces.\r\n\r\n      if (typeof space === 'number') {\r\n          for (i = 0; i < space; i += 1) {\r\n              indent += ' ';\r\n          }\r\n\r\n// If the space parameter is a string, it will be used as the indent string.\r\n\r\n      } else if (typeof space === 'string') {\r\n          indent = space;\r\n      }\r\n\r\n// If there is a replacer, it must be a function or an array.\r\n// Otherwise, throw an error.\r\n\r\n      rep = replacer;\r\n      if (replacer && typeof replacer !== 'function' &&\r\n              (typeof replacer !== 'object' ||\r\n              typeof replacer.length !== 'number')) {\r\n          throw new Error('JSON.stringify');\r\n      }\r\n\r\n// Make a fake root object containing our value under the key of ''.\r\n// Return the result of stringifying the value.\r\n\r\n      return str('', {'': value});\r\n  };\r\n\r\n// If the JSON object does not yet have a parse method, give it one.\r\n\r\n  JSON.parse = function (text, reviver) {\r\n  // The parse method takes a text and an optional reviver function, and returns\r\n  // a JavaScript value if the text is a valid JSON text.\r\n\r\n      var j;\r\n\r\n      function walk(holder, key) {\r\n\r\n  // The walk method is used to recursively walk the resulting structure so\r\n  // that modifications can be made.\r\n\r\n          var k, v, value = holder[key];\r\n          if (value && typeof value === 'object') {\r\n              for (k in value) {\r\n                  if (Object.prototype.hasOwnProperty.call(value, k)) {\r\n                      v = walk(value, k);\r\n                      if (v !== undefined) {\r\n                          value[k] = v;\r\n                      } else {\r\n                          delete value[k];\r\n                      }\r\n                  }\r\n              }\r\n          }\r\n          return reviver.call(holder, key, value);\r\n      }\r\n\r\n\r\n  // Parsing happens in four stages. In the first stage, we replace certain\r\n  // Unicode characters with escape sequences. JavaScript handles many characters\r\n  // incorrectly, either silently deleting them, or treating them as line endings.\r\n\r\n      text = String(text);\r\n      cx.lastIndex = 0;\r\n      if (cx.test(text)) {\r\n          text = text.replace(cx, function (a) {\r\n              return '\\\\u' +\r\n                  ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\r\n          });\r\n      }\r\n\r\n  // In the second stage, we run the text against regular expressions that look\r\n  // for non-JSON patterns. We are especially concerned with '()' and 'new'\r\n  // because they can cause invocation, and '=' because it can cause mutation.\r\n  // But just to be safe, we want to reject all unexpected forms.\r\n\r\n  // We split the second stage into 4 regexp operations in order to work around\r\n  // crippling inefficiencies in IE's and Safari's regexp engines. First we\r\n  // replace the JSON backslash pairs with '@' (a non-JSON character). Second, we\r\n  // replace all simple value tokens with ']' characters. Third, we delete all\r\n  // open brackets that follow a colon or comma or that begin the text. Finally,\r\n  // we look to see that the remaining characters are only whitespace or ']' or\r\n  // ',' or ':' or '{' or '}'. If that is so, then the text is safe for eval.\r\n\r\n      if (/^[\\],:{}\\s]*$/\r\n              .test(text.replace(/\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g, '@')\r\n                  .replace(/\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g, ']')\r\n                  .replace(/(?:^|:|,)(?:\\s*\\[)+/g, ''))) {\r\n\r\n  // In the third stage we use the eval function to compile the text into a\r\n  // JavaScript structure. The '{' operator is subject to a syntactic ambiguity\r\n  // in JavaScript: it can begin a block or an object literal. We wrap the text\r\n  // in parens to eliminate the ambiguity.\r\n\r\n          j = eval('(' + text + ')');\r\n\r\n  // In the optional fourth stage, we recursively walk the new structure, passing\r\n  // each name/value pair to a reviver function for possible transformation.\r\n\r\n          return typeof reviver === 'function' ?\r\n              walk({'': j}, '') : j;\r\n      }\r\n\r\n  // If the text is not JSON parseable, then a SyntaxError is thrown.\r\n\r\n      throw new SyntaxError('JSON.parse');\r\n  };\r\n\r\n})(\r\n    'undefined' != typeof io ? io : module.exports\r\n  , typeof JSON !== 'undefined' ? JSON : undefined\r\n);\r\n\r\n/**\r\n * socket.io\r\n * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\r\n * MIT Licensed\r\n */\r\n\r\n(function (exports, io) {\r\n\r\n  /**\r\n   * Parser namespace.\r\n   *\r\n   * @namespace\r\n   */\r\n\r\n  var parser = exports.parser = {};\r\n\r\n  /**\r\n   * Packet types.\r\n   */\r\n\r\n  var packets = parser.packets = [\r\n      'disconnect'\r\n    , 'connect'\r\n    , 'heartbeat'\r\n    , 'message'\r\n    , 'json'\r\n    , 'event'\r\n    , 'ack'\r\n    , 'error'\r\n    , 'noop'\r\n  ];\r\n\r\n  /**\r\n   * Errors reasons.\r\n   */\r\n\r\n  var reasons = parser.reasons = [\r\n      'transport not supported'\r\n    , 'client not handshaken'\r\n    , 'unauthorized'\r\n  ];\r\n\r\n  /**\r\n   * Errors advice.\r\n   */\r\n\r\n  var advice = parser.advice = [\r\n      'reconnect'\r\n  ];\r\n\r\n  /**\r\n   * Shortcuts.\r\n   */\r\n\r\n  var JSON = io.JSON\r\n    , indexOf = io.util.indexOf;\r\n\r\n  /**\r\n   * Encodes a packet.\r\n   *\r\n   * @api private\r\n   */\r\n\r\n  parser.encodePacket = function (packet) {\r\n    var type = indexOf(packets, packet.type)\r\n      , id = packet.id || ''\r\n      , endpoint = packet.endpoint || ''\r\n      , ack = packet.ack\r\n      , data = null;\r\n\r\n    switch (packet.type) {\r\n      case 'error':\r\n        var reason = packet.reason ? indexOf(reasons, packet.reason) : ''\r\n          , adv = packet.advice ? indexOf(advice, packet.advice) : '';\r\n\r\n        if (reason !== '' || adv !== '')\r\n          data = reason + (adv !== '' ? ('+' + adv) : '');\r\n\r\n        break;\r\n\r\n      case 'message':\r\n        if (packet.data !== '')\r\n          data = packet.data;\r\n        break;\r\n\r\n      case 'event':\r\n        var ev = { name: packet.name };\r\n\r\n        if (packet.args && packet.args.length) {\r\n          ev.args = packet.args;\r\n        }\r\n\r\n        data = JSON.stringify(ev);\r\n        break;\r\n\r\n      case 'json':\r\n        data = JSON.stringify(packet.data);\r\n        break;\r\n\r\n      case 'connect':\r\n        if (packet.qs)\r\n          data = packet.qs;\r\n        break;\r\n\r\n      case 'ack':\r\n        data = packet.ackId\r\n          + (packet.args && packet.args.length\r\n              ? '+' + JSON.stringify(packet.args) : '');\r\n        break;\r\n    }\r\n\r\n    // construct packet with required fragments\r\n    var encoded = [\r\n        type\r\n      , id + (ack == 'data' ? '+' : '')\r\n      , endpoint\r\n    ];\r\n\r\n    // data fragment is optional\r\n    if (data !== null && data !== undefined)\r\n      encoded.push(data);\r\n\r\n    return encoded.join(':');\r\n  };\r\n\r\n  /**\r\n   * Encodes multiple messages (payload).\r\n   *\r\n   * @param {Array} messages\r\n   * @api private\r\n   */\r\n\r\n  parser.encodePayload = function (packets) {\r\n    var decoded = '';\r\n\r\n    if (packets.length == 1)\r\n      return packets[0];\r\n\r\n    for (var i = 0, l = packets.length; i < l; i++) {\r\n      var packet = packets[i];\r\n      decoded += '\\ufffd' + packet.length + '\\ufffd' + packets[i];\r\n    }\r\n\r\n    return decoded;\r\n  };\r\n\r\n  /**\r\n   * Decodes a packet\r\n   *\r\n   * @api private\r\n   */\r\n\r\n  var regexp = /([^:]+):([0-9]+)?(\\+)?:([^:]+)?:?([\\s\\S]*)?/;\r\n\r\n  parser.decodePacket = function (data) {\r\n    var pieces = data.match(regexp);\r\n\r\n    if (!pieces) return {};\r\n\r\n    var id = pieces[2] || ''\r\n      , data = pieces[5] || ''\r\n      , packet = {\r\n            type: packets[pieces[1]]\r\n          , endpoint: pieces[4] || ''\r\n        };\r\n\r\n    // whether we need to acknowledge the packet\r\n    if (id) {\r\n      packet.id = id;\r\n      if (pieces[3])\r\n        packet.ack = 'data';\r\n      else\r\n        packet.ack = true;\r\n    }\r\n\r\n    // handle different packet types\r\n    switch (packet.type) {\r\n      case 'error':\r\n        var pieces = data.split('+');\r\n        packet.reason = reasons[pieces[0]] || '';\r\n        packet.advice = advice[pieces[1]] || '';\r\n        break;\r\n\r\n      case 'message':\r\n        packet.data = data || '';\r\n        break;\r\n\r\n      case 'event':\r\n        try {\r\n          var opts = JSON.parse(data);\r\n          packet.name = opts.name;\r\n          packet.args = opts.args;\r\n        } catch (e) { }\r\n\r\n        packet.args = packet.args || [];\r\n        break;\r\n\r\n      case 'json':\r\n        try {\r\n          packet.data = JSON.parse(data);\r\n        } catch (e) { }\r\n        break;\r\n\r\n      case 'connect':\r\n        packet.qs = data || '';\r\n        break;\r\n\r\n      case 'ack':\r\n        var pieces = data.match(/^([0-9]+)(\\+)?(.*)/);\r\n        if (pieces) {\r\n          packet.ackId = pieces[1];\r\n          packet.args = [];\r\n\r\n          if (pieces[3]) {\r\n            try {\r\n              packet.args = pieces[3] ? JSON.parse(pieces[3]) : [];\r\n            } catch (e) { }\r\n          }\r\n        }\r\n        break;\r\n\r\n      case 'disconnect':\r\n      case 'heartbeat':\r\n        break;\r\n    };\r\n\r\n    return packet;\r\n  };\r\n\r\n  /**\r\n   * Decodes data payload. Detects multiple messages\r\n   *\r\n   * @return {Array} messages\r\n   * @api public\r\n   */\r\n\r\n  parser.decodePayload = function (data) {\r\n    // IE doesn't like data[i] for unicode chars, charAt works fine\r\n    if (data.charAt(0) == '\\ufffd') {\r\n      var ret = [];\r\n\r\n      for (var i = 1, length = ''; i < data.length; i++) {\r\n        if (data.charAt(i) == '\\ufffd') {\r\n          ret.push(parser.decodePacket(data.substr(i + 1).substr(0, length)));\r\n          i += Number(length) + 1;\r\n          length = '';\r\n        } else {\r\n          length += data.charAt(i);\r\n        }\r\n      }\r\n\r\n      return ret;\r\n    } else {\r\n      return [parser.decodePacket(data)];\r\n    }\r\n  };\r\n\r\n})(\r\n    'undefined' != typeof io ? io : module.exports\r\n  , 'undefined' != typeof io ? io : module.parent.exports\r\n);\r\n/**\r\n * socket.io\r\n * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\r\n * MIT Licensed\r\n */\r\n\r\n(function (exports, io) {\r\n\r\n  /**\r\n   * Expose constructor.\r\n   */\r\n\r\n  exports.Transport = Transport;\r\n\r\n  /**\r\n   * This is the transport template for all supported transport methods.\r\n   *\r\n   * @constructor\r\n   * @api public\r\n   */\r\n\r\n  function Transport (socket, sessid) {\r\n    this.socket = socket;\r\n    this.sessid = sessid;\r\n  };\r\n\r\n  /**\r\n   * Apply EventEmitter mixin.\r\n   */\r\n\r\n  io.util.mixin(Transport, io.EventEmitter);\r\n\r\n\r\n  /**\r\n   * Indicates whether heartbeats is enabled for this transport\r\n   *\r\n   * @api private\r\n   */\r\n\r\n  Transport.prototype.heartbeats = function () {\r\n    return true;\r\n  };\r\n\r\n  /**\r\n   * Handles the response from the server. When a new response is received\r\n   * it will automatically update the timeout, decode the message and\r\n   * forwards the response to the onMessage function for further processing.\r\n   *\r\n   * @param {String} data Response from the server.\r\n   * @api private\r\n   */\r\n\r\n  Transport.prototype.onData = function (data) {\r\n    this.clearCloseTimeout();\r\n\r\n    // If the connection in currently open (or in a reopening state) reset the close\r\n    // timeout since we have just received data. This check is necessary so\r\n    // that we don't reset the timeout on an explicitly disconnected connection.\r\n    if (this.socket.connected || this.socket.connecting || this.socket.reconnecting) {\r\n      this.setCloseTimeout();\r\n    }\r\n\r\n    if (data !== '') {\r\n      // todo: we should only do decodePayload for xhr transports\r\n      var msgs = io.parser.decodePayload(data);\r\n\r\n      if (msgs && msgs.length) {\r\n        for (var i = 0, l = msgs.length; i < l; i++) {\r\n          this.onPacket(msgs[i]);\r\n        }\r\n      }\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\n  /**\r\n   * Handles packets.\r\n   *\r\n   * @api private\r\n   */\r\n\r\n  Transport.prototype.onPacket = function (packet) {\r\n    this.socket.setHeartbeatTimeout();\r\n\r\n    if (packet.type == 'heartbeat') {\r\n      return this.onHeartbeat();\r\n    }\r\n\r\n    if (packet.type == 'connect' && packet.endpoint == '') {\r\n      this.onConnect();\r\n    }\r\n\r\n    if (packet.type == 'error' && packet.advice == 'reconnect') {\r\n      this.isOpen = false;\r\n    }\r\n\r\n    this.socket.onPacket(packet);\r\n\r\n    return this;\r\n  };\r\n\r\n  /**\r\n   * Sets close timeout\r\n   *\r\n   * @api private\r\n   */\r\n\r\n  Transport.prototype.setCloseTimeout = function () {\r\n    if (!this.closeTimeout) {\r\n      var self = this;\r\n\r\n      this.closeTimeout = setTimeout(function () {\r\n        self.onDisconnect();\r\n      }, this.socket.closeTimeout);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Called when transport disconnects.\r\n   *\r\n   * @api private\r\n   */\r\n\r\n  Transport.prototype.onDisconnect = function () {\r\n    if (this.isOpen) this.close();\r\n    this.clearTimeouts();\r\n    this.socket.onDisconnect();\r\n    return this;\r\n  };\r\n\r\n  /**\r\n   * Called when transport connects\r\n   *\r\n   * @api private\r\n   */\r\n\r\n  Transport.prototype.onConnect = function () {\r\n    this.socket.onConnect();\r\n    return this;\r\n  };\r\n\r\n  /**\r\n   * Clears close timeout\r\n   *\r\n   * @api private\r\n   */\r\n\r\n  Transport.prototype.clearCloseTimeout = function () {\r\n    if (this.closeTimeout) {\r\n      clearTimeout(this.closeTimeout);\r\n      this.closeTimeout = null;\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Clear timeouts\r\n   *\r\n   * @api private\r\n   */\r\n\r\n  Transport.prototype.clearTimeouts = function () {\r\n    this.clearCloseTimeout();\r\n\r\n    if (this.reopenTimeout) {\r\n      clearTimeout(this.reopenTimeout);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Sends a packet\r\n   *\r\n   * @param {Object} packet object.\r\n   * @api private\r\n   */\r\n\r\n  Transport.prototype.packet = function (packet) {\r\n    this.send(io.parser.encodePacket(packet));\r\n  };\r\n\r\n  /**\r\n   * Send the received heartbeat message back to server. So the server\r\n   * knows we are still connected.\r\n   *\r\n   * @param {String} heartbeat Heartbeat response from the server.\r\n   * @api private\r\n   */\r\n\r\n  Transport.prototype.onHeartbeat = function (heartbeat) {\r\n    this.packet({ type: 'heartbeat' });\r\n  };\r\n\r\n  /**\r\n   * Called when the transport opens.\r\n   *\r\n   * @api private\r\n   */\r\n\r\n  Transport.prototype.onOpen = function () {\r\n    this.isOpen = true;\r\n    this.clearCloseTimeout();\r\n    this.socket.onOpen();\r\n  };\r\n\r\n  /**\r\n   * Notifies the base when the connection with the Socket.IO server\r\n   * has been disconnected.\r\n   *\r\n   * @api private\r\n   */\r\n\r\n  Transport.prototype.onClose = function () {\r\n    var self = this;\r\n\r\n    /* FIXME: reopen delay causing a infinit loop\r\n    this.reopenTimeout = setTimeout(function () {\r\n      self.open();\r\n    }, this.socket.options['reopen delay']);*/\r\n\r\n    this.isOpen = false;\r\n    this.socket.onClose();\r\n    this.onDisconnect();\r\n  };\r\n\r\n  /**\r\n   * Generates a connection url based on the Socket.IO URL Protocol.\r\n   * See <https://github.com/learnboost/socket.io-node/> for more details.\r\n   *\r\n   * @returns {String} Connection url\r\n   * @api private\r\n   */\r\n\r\n  Transport.prototype.prepareUrl = function () {\r\n    var options = this.socket.options;\r\n\r\n    return this.scheme() + '://'\r\n      + options.host + ':' + options.port + '/'\r\n      + options.resource + '/' + io.protocol\r\n      + '/' + this.name + '/' + this.sessid;\r\n  };\r\n\r\n  /**\r\n   * Checks if the transport is ready to start a connection.\r\n   *\r\n   * @param {Socket} socket The socket instance that needs a transport\r\n   * @param {Function} fn The callback\r\n   * @api private\r\n   */\r\n\r\n  Transport.prototype.ready = function (socket, fn) {\r\n    fn.call(this);\r\n  };\r\n})(\r\n    'undefined' != typeof io ? io : module.exports\r\n  , 'undefined' != typeof io ? io : module.parent.exports\r\n);\r\n/**\r\n * socket.io\r\n * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\r\n * MIT Licensed\r\n */\r\n\r\n(function (exports, io, global) {\r\n\r\n  /**\r\n   * Expose constructor.\r\n   */\r\n\r\n  exports.Socket = Socket;\r\n\r\n  /**\r\n   * Create a new `Socket.IO client` which can establish a persistent\r\n   * connection with a Socket.IO enabled server.\r\n   *\r\n   * @api public\r\n   */\r\n\r\n  function Socket (options) {\r\n    this.options = {\r\n        port: 80\r\n      , secure: false\r\n      , document: 'document' in global ? document : false\r\n      , resource: 'socket.io'\r\n      , transports: io.transports\r\n      , 'connect timeout': 10000\r\n      , 'try multiple transports': true\r\n      , 'reconnect': true\r\n      , 'reconnection delay': 500\r\n      , 'reconnection limit': Infinity\r\n      , 'reopen delay': 3000\r\n      , 'max reconnection attempts': 10\r\n      , 'sync disconnect on unload': false\r\n      , 'auto connect': true\r\n      , 'flash policy port': 10843\r\n      , 'manualFlush': false\r\n    };\r\n\r\n    io.util.merge(this.options, options);\r\n\r\n    this.connected = false;\r\n    this.open = false;\r\n    this.connecting = false;\r\n    this.reconnecting = false;\r\n    this.namespaces = {};\r\n    this.buffer = [];\r\n    this.doBuffer = false;\r\n\r\n    if (this.options['sync disconnect on unload'] &&\r\n        (!this.isXDomain() || io.util.ua.hasCORS)) {\r\n      var self = this;\r\n      io.util.on(global, 'beforeunload', function () {\r\n        self.disconnectSync();\r\n      }, false);\r\n    }\r\n\r\n    if (this.options['auto connect']) {\r\n      this.connect();\r\n    }\r\n};\r\n\r\n  /**\r\n   * Apply EventEmitter mixin.\r\n   */\r\n\r\n  io.util.mixin(Socket, io.EventEmitter);\r\n\r\n  /**\r\n   * Returns a namespace listener/emitter for this socket\r\n   *\r\n   * @api public\r\n   */\r\n\r\n  Socket.prototype.of = function (name) {\r\n    if (!this.namespaces[name]) {\r\n      this.namespaces[name] = new io.SocketNamespace(this, name);\r\n\r\n      if (name !== '') {\r\n        this.namespaces[name].packet({ type: 'connect' });\r\n      }\r\n    }\r\n\r\n    return this.namespaces[name];\r\n  };\r\n\r\n  /**\r\n   * Emits the given event to the Socket and all namespaces\r\n   *\r\n   * @api private\r\n   */\r\n\r\n  Socket.prototype.publish = function () {\r\n    this.emit.apply(this, arguments);\r\n\r\n    var nsp;\r\n\r\n    for (var i in this.namespaces) {\r\n      if (this.namespaces.hasOwnProperty(i)) {\r\n        nsp = this.of(i);\r\n        nsp.$emit.apply(nsp, arguments);\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Performs the handshake\r\n   *\r\n   * @api private\r\n   */\r\n\r\n  function empty () { };\r\n\r\n  Socket.prototype.handshake = function (fn) {\r\n    var self = this\r\n      , options = this.options;\r\n\r\n    function complete (data) {\r\n      if (data instanceof Error) {\r\n        self.connecting = false;\r\n        self.onError(data.message);\r\n      } else {\r\n        fn.apply(null, data.split(':'));\r\n      }\r\n    };\r\n\r\n    var url = [\r\n          'http' + (options.secure ? 's' : '') + ':/'\r\n        , options.host + ':' + options.port\r\n        , options.resource\r\n        , io.protocol\r\n        , io.util.query(this.options.query, 't=' + +new Date)\r\n      ].join('/');\r\n\r\n    if (this.isXDomain() && !io.util.ua.hasCORS) {\r\n      var insertAt = document.getElementsByTagName('script')[0]\r\n        , script = document.createElement('script');\r\n\r\n      script.src = url + '&jsonp=' + io.j.length;\r\n      insertAt.parentNode.insertBefore(script, insertAt);\r\n\r\n      io.j.push(function (data) {\r\n        complete(data);\r\n        script.parentNode.removeChild(script);\r\n      });\r\n    } else {\r\n      var xhr = io.util.request();\r\n\r\n      xhr.open('GET', url, true);\r\n      if (this.isXDomain()) {\r\n        xhr.withCredentials = true;\r\n      }\r\n      xhr.onreadystatechange = function () {\r\n        if (xhr.readyState == 4) {\r\n          xhr.onreadystatechange = empty;\r\n\r\n          if (xhr.status == 200) {\r\n            complete(xhr.responseText);\r\n          } else if (xhr.status == 403) {\r\n            self.onError(xhr.responseText);\r\n          } else {\r\n            self.connecting = false;            \r\n            !self.reconnecting && self.onError(xhr.responseText);\r\n          }\r\n        }\r\n      };\r\n      xhr.send(null);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Find an available transport based on the options supplied in the constructor.\r\n   *\r\n   * @api private\r\n   */\r\n\r\n  Socket.prototype.getTransport = function (override) {\r\n    var transports = override || this.transports, match;\r\n\r\n    for (var i = 0, transport; transport = transports[i]; i++) {\r\n      if (io.Transport[transport]\r\n        && io.Transport[transport].check(this)\r\n        && (!this.isXDomain() || io.Transport[transport].xdomainCheck(this))) {\r\n        return new io.Transport[transport](this, this.sessionid);\r\n      }\r\n    }\r\n\r\n    return null;\r\n  };\r\n\r\n  /**\r\n   * Connects to the server.\r\n   *\r\n   * @param {Function} [fn] Callback.\r\n   * @returns {io.Socket}\r\n   * @api public\r\n   */\r\n\r\n  Socket.prototype.connect = function (fn) {\r\n    if (this.connecting) {\r\n      return this;\r\n    }\r\n\r\n    var self = this;\r\n    self.connecting = true;\r\n    \r\n    this.handshake(function (sid, heartbeat, close, transports) {\r\n      self.sessionid = sid;\r\n      self.closeTimeout = close * 1000;\r\n      self.heartbeatTimeout = heartbeat * 1000;\r\n      if(!self.transports)\r\n          self.transports = self.origTransports = (transports ? io.util.intersect(\r\n              transports.split(',')\r\n            , self.options.transports\r\n          ) : self.options.transports);\r\n\r\n      self.setHeartbeatTimeout();\r\n\r\n      function connect (transports){\r\n        if (self.transport) self.transport.clearTimeouts();\r\n\r\n        self.transport = self.getTransport(transports);\r\n        if (!self.transport) return self.publish('connect_failed');\r\n\r\n        // once the transport is ready\r\n        self.transport.ready(self, function () {\r\n          self.connecting = true;\r\n          self.publish('connecting', self.transport.name);\r\n          self.transport.open();\r\n\r\n          if (self.options['connect timeout']) {\r\n            self.connectTimeoutTimer = setTimeout(function () {\r\n              if (!self.connected) {\r\n                self.connecting = false;\r\n\r\n                if (self.options['try multiple transports']) {\r\n                  var remaining = self.transports;\r\n\r\n                  while (remaining.length > 0 && remaining.splice(0,1)[0] !=\r\n                         self.transport.name) {}\r\n\r\n                    if (remaining.length){\r\n                      connect(remaining);\r\n                    } else {\r\n                      self.publish('connect_failed');\r\n                    }\r\n                }\r\n              }\r\n            }, self.options['connect timeout']);\r\n          }\r\n        });\r\n      }\r\n\r\n      connect(self.transports);\r\n\r\n      self.once('connect', function (){\r\n        clearTimeout(self.connectTimeoutTimer);\r\n\r\n        fn && typeof fn == 'function' && fn();\r\n      });\r\n    });\r\n\r\n    return this;\r\n  };\r\n\r\n  /**\r\n   * Clears and sets a new heartbeat timeout using the value given by the\r\n   * server during the handshake.\r\n   *\r\n   * @api private\r\n   */\r\n\r\n  Socket.prototype.setHeartbeatTimeout = function () {\r\n    clearTimeout(this.heartbeatTimeoutTimer);\r\n    if(this.transport && !this.transport.heartbeats()) return;\r\n\r\n    var self = this;\r\n    this.heartbeatTimeoutTimer = setTimeout(function () {\r\n      self.transport.onClose();\r\n    }, this.heartbeatTimeout);\r\n  };\r\n\r\n  /**\r\n   * Sends a message.\r\n   *\r\n   * @param {Object} data packet.\r\n   * @returns {io.Socket}\r\n   * @api public\r\n   */\r\n\r\n  Socket.prototype.packet = function (data) {\r\n    if (this.connected && !this.doBuffer) {\r\n      this.transport.packet(data);\r\n    } else {\r\n      this.buffer.push(data);\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\n  /**\r\n   * Sets buffer state\r\n   *\r\n   * @api private\r\n   */\r\n\r\n  Socket.prototype.setBuffer = function (v) {\r\n    this.doBuffer = v;\r\n\r\n    if (!v && this.connected && this.buffer.length) {\r\n      if (!this.options['manualFlush']) {\r\n        this.flushBuffer();\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Flushes the buffer data over the wire.\r\n   * To be invoked manually when 'manualFlush' is set to true.\r\n   *\r\n   * @api public\r\n   */\r\n\r\n  Socket.prototype.flushBuffer = function() {\r\n    this.transport.payload(this.buffer);\r\n    this.buffer = [];\r\n  };\r\n  \r\n\r\n  /**\r\n   * Disconnect the established connect.\r\n   *\r\n   * @returns {io.Socket}\r\n   * @api public\r\n   */\r\n\r\n  Socket.prototype.disconnect = function () {\r\n    if (this.connected || this.connecting) {\r\n      if (this.open) {\r\n        this.of('').packet({ type: 'disconnect' });\r\n      }\r\n\r\n      // handle disconnection immediately\r\n      this.onDisconnect('booted');\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\n  /**\r\n   * Disconnects the socket with a sync XHR.\r\n   *\r\n   * @api private\r\n   */\r\n\r\n  Socket.prototype.disconnectSync = function () {\r\n    // ensure disconnection\r\n    var xhr = io.util.request();\r\n    var uri = [\r\n        'http' + (this.options.secure ? 's' : '') + ':/'\r\n      , this.options.host + ':' + this.options.port\r\n      , this.options.resource\r\n      , io.protocol\r\n      , ''\r\n      , this.sessionid\r\n    ].join('/') + '/?disconnect=1';\r\n\r\n    xhr.open('GET', uri, false);\r\n    xhr.send(null);\r\n\r\n    // handle disconnection immediately\r\n    this.onDisconnect('booted');\r\n  };\r\n\r\n  /**\r\n   * Check if we need to use cross domain enabled transports. Cross domain would\r\n   * be a different port or different domain name.\r\n   *\r\n   * @returns {Boolean}\r\n   * @api private\r\n   */\r\n\r\n  Socket.prototype.isXDomain = function () {\r\n\r\n    var port = global.location.port ||\r\n      ('https:' == global.location.protocol ? 443 : 80);\r\n\r\n    return this.options.host !== global.location.hostname \r\n      || this.options.port != port;\r\n  };\r\n\r\n  /**\r\n   * Called upon handshake.\r\n   *\r\n   * @api private\r\n   */\r\n\r\n  Socket.prototype.onConnect = function () {\r\n    if (!this.connected) {\r\n      this.connected = true;\r\n      this.connecting = false;\r\n      if (!this.doBuffer) {\r\n        // make sure to flush the buffer\r\n        this.setBuffer(false);\r\n      }\r\n      this.emit('connect');\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Called when the transport opens\r\n   *\r\n   * @api private\r\n   */\r\n\r\n  Socket.prototype.onOpen = function () {\r\n    this.open = true;\r\n  };\r\n\r\n  /**\r\n   * Called when the transport closes.\r\n   *\r\n   * @api private\r\n   */\r\n\r\n  Socket.prototype.onClose = function () {\r\n    this.open = false;\r\n    clearTimeout(this.heartbeatTimeoutTimer);\r\n  };\r\n\r\n  /**\r\n   * Called when the transport first opens a connection\r\n   *\r\n   * @param text\r\n   */\r\n\r\n  Socket.prototype.onPacket = function (packet) {\r\n    this.of(packet.endpoint).onPacket(packet);\r\n  };\r\n\r\n  /**\r\n   * Handles an error.\r\n   *\r\n   * @api private\r\n   */\r\n\r\n  Socket.prototype.onError = function (err) {\r\n    if (err && err.advice) {\r\n      if (err.advice === 'reconnect' && (this.connected || this.connecting)) {\r\n        this.disconnect();\r\n        if (this.options.reconnect) {\r\n          this.reconnect();\r\n        }\r\n      }\r\n    }\r\n\r\n    this.publish('error', err && err.reason ? err.reason : err);\r\n  };\r\n\r\n  /**\r\n   * Called when the transport disconnects.\r\n   *\r\n   * @api private\r\n   */\r\n\r\n  Socket.prototype.onDisconnect = function (reason) {\r\n    var wasConnected = this.connected\r\n      , wasConnecting = this.connecting;\r\n\r\n    this.connected = false;\r\n    this.connecting = false;\r\n    this.open = false;\r\n\r\n    if (wasConnected || wasConnecting) {\r\n      this.transport.close();\r\n      this.transport.clearTimeouts();\r\n      if (wasConnected) {\r\n        this.publish('disconnect', reason);\r\n\r\n        if ('booted' != reason && this.options.reconnect && !this.reconnecting) {\r\n          this.reconnect();\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Called upon reconnection.\r\n   *\r\n   * @api private\r\n   */\r\n\r\n  Socket.prototype.reconnect = function () {\r\n    this.reconnecting = true;\r\n    this.reconnectionAttempts = 0;\r\n    this.reconnectionDelay = this.options['reconnection delay'];\r\n\r\n    var self = this\r\n      , maxAttempts = this.options['max reconnection attempts']\r\n      , tryMultiple = this.options['try multiple transports']\r\n      , limit = this.options['reconnection limit'];\r\n\r\n    function reset () {\r\n      if (self.connected) {\r\n        for (var i in self.namespaces) {\r\n          if (self.namespaces.hasOwnProperty(i) && '' !== i) {\r\n              self.namespaces[i].packet({ type: 'connect' });\r\n          }\r\n        }\r\n        self.publish('reconnect', self.transport.name, self.reconnectionAttempts);\r\n      }\r\n\r\n      clearTimeout(self.reconnectionTimer);\r\n\r\n      self.removeListener('connect_failed', maybeReconnect);\r\n      self.removeListener('connect', maybeReconnect);\r\n\r\n      self.reconnecting = false;\r\n\r\n      delete self.reconnectionAttempts;\r\n      delete self.reconnectionDelay;\r\n      delete self.reconnectionTimer;\r\n      delete self.redoTransports;\r\n\r\n      self.options['try multiple transports'] = tryMultiple;\r\n    };\r\n\r\n    function maybeReconnect () {\r\n      if (!self.reconnecting) {\r\n        return;\r\n      }\r\n\r\n      if (self.connected) {\r\n        return reset();\r\n      };\r\n\r\n      if (self.connecting && self.reconnecting) {\r\n        return self.reconnectionTimer = setTimeout(maybeReconnect, 1000);\r\n      }\r\n\r\n      if (self.reconnectionAttempts++ >= maxAttempts) {\r\n        if (!self.redoTransports) {\r\n          self.on('connect_failed', maybeReconnect);\r\n          self.options['try multiple transports'] = true;\r\n          self.transports = self.origTransports;\r\n          self.transport = self.getTransport();\r\n          self.redoTransports = true;\r\n          self.connect();\r\n        } else {\r\n          self.publish('reconnect_failed');\r\n          reset();\r\n        }\r\n      } else {\r\n        if (self.reconnectionDelay < limit) {\r\n          self.reconnectionDelay *= 2; // exponential back off\r\n        }\r\n\r\n        self.connect();\r\n        self.publish('reconnecting', self.reconnectionDelay, self.reconnectionAttempts);\r\n        self.reconnectionTimer = setTimeout(maybeReconnect, self.reconnectionDelay);\r\n      }\r\n    };\r\n\r\n    this.options['try multiple transports'] = false;\r\n    this.reconnectionTimer = setTimeout(maybeReconnect, this.reconnectionDelay);\r\n\r\n    this.on('connect', maybeReconnect);\r\n  };\r\n\r\n})(\r\n    'undefined' != typeof io ? io : module.exports\r\n  , 'undefined' != typeof io ? io : module.parent.exports\r\n  , this\r\n);\r\n/**\r\n * socket.io\r\n * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\r\n * MIT Licensed\r\n */\r\n\r\n(function (exports, io) {\r\n\r\n  /**\r\n   * Expose constructor.\r\n   */\r\n\r\n  exports.SocketNamespace = SocketNamespace;\r\n\r\n  /**\r\n   * Socket namespace constructor.\r\n   *\r\n   * @constructor\r\n   * @api public\r\n   */\r\n\r\n  function SocketNamespace (socket, name) {\r\n    this.socket = socket;\r\n    this.name = name || '';\r\n    this.flags = {};\r\n    this.json = new Flag(this, 'json');\r\n    this.ackPackets = 0;\r\n    this.acks = {};\r\n  };\r\n\r\n  /**\r\n   * Apply EventEmitter mixin.\r\n   */\r\n\r\n  io.util.mixin(SocketNamespace, io.EventEmitter);\r\n\r\n  /**\r\n   * Copies emit since we override it\r\n   *\r\n   * @api private\r\n   */\r\n\r\n  SocketNamespace.prototype.$emit = io.EventEmitter.prototype.emit;\r\n\r\n  /**\r\n   * Creates a new namespace, by proxying the request to the socket. This\r\n   * allows us to use the synax as we do on the server.\r\n   *\r\n   * @api public\r\n   */\r\n\r\n  SocketNamespace.prototype.of = function () {\r\n    return this.socket.of.apply(this.socket, arguments);\r\n  };\r\n\r\n  /**\r\n   * Sends a packet.\r\n   *\r\n   * @api private\r\n   */\r\n\r\n  SocketNamespace.prototype.packet = function (packet) {\r\n    packet.endpoint = this.name;\r\n    this.socket.packet(packet);\r\n    this.flags = {};\r\n    return this;\r\n  };\r\n\r\n  /**\r\n   * Sends a message\r\n   *\r\n   * @api public\r\n   */\r\n\r\n  SocketNamespace.prototype.send = function (data, fn) {\r\n    var packet = {\r\n        type: this.flags.json ? 'json' : 'message'\r\n      , data: data\r\n    };\r\n\r\n    if ('function' == typeof fn) {\r\n      packet.id = ++this.ackPackets;\r\n      packet.ack = true;\r\n      this.acks[packet.id] = fn;\r\n    }\r\n\r\n    return this.packet(packet);\r\n  };\r\n\r\n  /**\r\n   * Emits an event\r\n   *\r\n   * @api public\r\n   */\r\n  \r\n  SocketNamespace.prototype.emit = function (name) {\r\n    var args = Array.prototype.slice.call(arguments, 1)\r\n      , lastArg = args[args.length - 1]\r\n      , packet = {\r\n            type: 'event'\r\n          , name: name\r\n        };\r\n\r\n    if ('function' == typeof lastArg) {\r\n      packet.id = ++this.ackPackets;\r\n      packet.ack = 'data';\r\n      this.acks[packet.id] = lastArg;\r\n      args = args.slice(0, args.length - 1);\r\n    }\r\n\r\n    packet.args = args;\r\n\r\n    return this.packet(packet);\r\n  };\r\n\r\n  /**\r\n   * Disconnects the namespace\r\n   *\r\n   * @api private\r\n   */\r\n\r\n  SocketNamespace.prototype.disconnect = function () {\r\n    if (this.name === '') {\r\n      this.socket.disconnect();\r\n    } else {\r\n      this.packet({ type: 'disconnect' });\r\n      this.$emit('disconnect');\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\n  /**\r\n   * Handles a packet\r\n   *\r\n   * @api private\r\n   */\r\n\r\n  SocketNamespace.prototype.onPacket = function (packet) {\r\n    var self = this;\r\n\r\n    function ack () {\r\n      self.packet({\r\n          type: 'ack'\r\n        , args: io.util.toArray(arguments)\r\n        , ackId: packet.id\r\n      });\r\n    };\r\n\r\n    switch (packet.type) {\r\n      case 'connect':\r\n        this.$emit('connect');\r\n        break;\r\n\r\n      case 'disconnect':\r\n        if (this.name === '') {\r\n          this.socket.onDisconnect(packet.reason || 'booted');\r\n        } else {\r\n          this.$emit('disconnect', packet.reason);\r\n        }\r\n        break;\r\n\r\n      case 'message':\r\n      case 'json':\r\n        var params = ['message', packet.data];\r\n\r\n        if (packet.ack == 'data') {\r\n          params.push(ack);\r\n        } else if (packet.ack) {\r\n          this.packet({ type: 'ack', ackId: packet.id });\r\n        }\r\n\r\n        this.$emit.apply(this, params);\r\n        break;\r\n\r\n      case 'event':\r\n        var params = [packet.name].concat(packet.args);\r\n\r\n        if (packet.ack == 'data')\r\n          params.push(ack);\r\n\r\n        this.$emit.apply(this, params);\r\n        break;\r\n\r\n      case 'ack':\r\n        if (this.acks[packet.ackId]) {\r\n          this.acks[packet.ackId].apply(this, packet.args);\r\n          delete this.acks[packet.ackId];\r\n        }\r\n        break;\r\n\r\n      case 'error':\r\n        if (packet.advice){\r\n          this.socket.onError(packet);\r\n        } else {\r\n          if (packet.reason == 'unauthorized') {\r\n            this.$emit('connect_failed', packet.reason);\r\n          } else {\r\n            this.$emit('error', packet.reason);\r\n          }\r\n        }\r\n        break;\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Flag interface.\r\n   *\r\n   * @api private\r\n   */\r\n\r\n  function Flag (nsp, name) {\r\n    this.namespace = nsp;\r\n    this.name = name;\r\n  };\r\n\r\n  /**\r\n   * Send a message\r\n   *\r\n   * @api public\r\n   */\r\n\r\n  Flag.prototype.send = function () {\r\n    this.namespace.flags[this.name] = true;\r\n    this.namespace.send.apply(this.namespace, arguments);\r\n  };\r\n\r\n  /**\r\n   * Emit an event\r\n   *\r\n   * @api public\r\n   */\r\n\r\n  Flag.prototype.emit = function () {\r\n    this.namespace.flags[this.name] = true;\r\n    this.namespace.emit.apply(this.namespace, arguments);\r\n  };\r\n\r\n})(\r\n    'undefined' != typeof io ? io : module.exports\r\n  , 'undefined' != typeof io ? io : module.parent.exports\r\n);\r\n\r\n/**\r\n * socket.io\r\n * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\r\n * MIT Licensed\r\n */\r\n\r\n(function (exports, io, global) {\r\n\r\n  /**\r\n   * Expose constructor.\r\n   */\r\n\r\n  exports.websocket = WS;\r\n\r\n  /**\r\n   * The WebSocket transport uses the HTML5 WebSocket API to establish an\r\n   * persistent connection with the Socket.IO server. This transport will also\r\n   * be inherited by the FlashSocket fallback as it provides a API compatible\r\n   * polyfill for the WebSockets.\r\n   *\r\n   * @constructor\r\n   * @extends {io.Transport}\r\n   * @api public\r\n   */\r\n\r\n  function WS (socket) {\r\n    io.Transport.apply(this, arguments);\r\n  };\r\n\r\n  /**\r\n   * Inherits from Transport.\r\n   */\r\n\r\n  io.util.inherit(WS, io.Transport);\r\n\r\n  /**\r\n   * Transport name\r\n   *\r\n   * @api public\r\n   */\r\n\r\n  WS.prototype.name = 'websocket';\r\n\r\n  /**\r\n   * Initializes a new `WebSocket` connection with the Socket.IO server. We attach\r\n   * all the appropriate listeners to handle the responses from the server.\r\n   *\r\n   * @returns {Transport}\r\n   * @api public\r\n   */\r\n\r\n  WS.prototype.open = function () {\r\n    var query = io.util.query(this.socket.options.query)\r\n      , self = this\r\n      , Socket\r\n\r\n\r\n    if (!Socket) {\r\n      Socket = global.MozWebSocket || global.WebSocket;\r\n    }\r\n\r\n    this.websocket = new Socket(this.prepareUrl() + query);\r\n\r\n    this.websocket.onopen = function () {\r\n      self.onOpen();\r\n      self.socket.setBuffer(false);\r\n    };\r\n    this.websocket.onmessage = function (ev) {\r\n      self.onData(ev.data);\r\n    };\r\n    this.websocket.onclose = function () {\r\n      self.onClose();\r\n      self.socket.setBuffer(true);\r\n    };\r\n    this.websocket.onerror = function (e) {\r\n      self.onError(e);\r\n    };\r\n\r\n    return this;\r\n  };\r\n\r\n  /**\r\n   * Send a message to the Socket.IO server. The message will automatically be\r\n   * encoded in the correct message format.\r\n   *\r\n   * @returns {Transport}\r\n   * @api public\r\n   */\r\n\r\n  // Do to a bug in the current IDevices browser, we need to wrap the send in a \r\n  // setTimeout, when they resume from sleeping the browser will crash if \r\n  // we don't allow the browser time to detect the socket has been closed\r\n  if (io.util.ua.iDevice) {\r\n    WS.prototype.send = function (data) {\r\n      var self = this;\r\n      setTimeout(function() {\r\n         self.websocket.send(data);\r\n      },0);\r\n      return this;\r\n    };\r\n  } else {\r\n    WS.prototype.send = function (data) {\r\n      this.websocket.send(data);\r\n      return this;\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Payload\r\n   *\r\n   * @api private\r\n   */\r\n\r\n  WS.prototype.payload = function (arr) {\r\n    for (var i = 0, l = arr.length; i < l; i++) {\r\n      this.packet(arr[i]);\r\n    }\r\n    return this;\r\n  };\r\n\r\n  /**\r\n   * Disconnect the established `WebSocket` connection.\r\n   *\r\n   * @returns {Transport}\r\n   * @api public\r\n   */\r\n\r\n  WS.prototype.close = function () {\r\n    this.websocket.close();\r\n    return this;\r\n  };\r\n\r\n  /**\r\n   * Handle the errors that `WebSocket` might be giving when we\r\n   * are attempting to connect or send messages.\r\n   *\r\n   * @param {Error} e The error.\r\n   * @api private\r\n   */\r\n\r\n  WS.prototype.onError = function (e) {\r\n    this.socket.onError(e);\r\n  };\r\n\r\n  /**\r\n   * Returns the appropriate scheme for the URI generation.\r\n   *\r\n   * @api private\r\n   */\r\n  WS.prototype.scheme = function () {\r\n    return this.socket.options.secure ? 'wss' : 'ws';\r\n  };\r\n\r\n  /**\r\n   * Checks if the browser has support for native `WebSockets` and that\r\n   * it's not the polyfill created for the FlashSocket transport.\r\n   *\r\n   * @return {Boolean}\r\n   * @api public\r\n   */\r\n\r\n  WS.check = function () {\r\n    return ('WebSocket' in global && !('__addTask' in WebSocket))\r\n          || 'MozWebSocket' in global;\r\n  };\r\n\r\n  /**\r\n   * Check if the `WebSocket` transport support cross domain communications.\r\n   *\r\n   * @returns {Boolean}\r\n   * @api public\r\n   */\r\n\r\n  WS.xdomainCheck = function () {\r\n    return true;\r\n  };\r\n\r\n  /**\r\n   * Add the transport to your public io.transports array.\r\n   *\r\n   * @api private\r\n   */\r\n\r\n  io.transports.push('websocket');\r\n\r\n})(\r\n    'undefined' != typeof io ? io.Transport : module.exports\r\n  , 'undefined' != typeof io ? io : module.parent.exports\r\n  , this\r\n);\r\n\r\n/**\r\n * socket.io\r\n * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\r\n * MIT Licensed\r\n */\r\n\r\n(function (exports, io) {\r\n\r\n  /**\r\n   * Expose constructor.\r\n   */\r\n\r\n  exports.flashsocket = Flashsocket;\r\n\r\n  /**\r\n   * The FlashSocket transport. This is a API wrapper for the HTML5 WebSocket\r\n   * specification. It uses a .swf file to communicate with the server. If you want\r\n   * to serve the .swf file from a other server than where the Socket.IO script is\r\n   * coming from you need to use the insecure version of the .swf. More information\r\n   * about this can be found on the github page.\r\n   *\r\n   * @constructor\r\n   * @extends {io.Transport.websocket}\r\n   * @api public\r\n   */\r\n\r\n  function Flashsocket () {\r\n    io.Transport.websocket.apply(this, arguments);\r\n  };\r\n\r\n  /**\r\n   * Inherits from Transport.\r\n   */\r\n\r\n  io.util.inherit(Flashsocket, io.Transport.websocket);\r\n\r\n  /**\r\n   * Transport name\r\n   *\r\n   * @api public\r\n   */\r\n\r\n  Flashsocket.prototype.name = 'flashsocket';\r\n\r\n  /**\r\n   * Disconnect the established `FlashSocket` connection. This is done by adding a \r\n   * new task to the FlashSocket. The rest will be handled off by the `WebSocket` \r\n   * transport.\r\n   *\r\n   * @returns {Transport}\r\n   * @api public\r\n   */\r\n\r\n  Flashsocket.prototype.open = function () {\r\n    var self = this\r\n      , args = arguments;\r\n\r\n    WebSocket.__addTask(function () {\r\n      io.Transport.websocket.prototype.open.apply(self, args);\r\n    });\r\n    return this;\r\n  };\r\n  \r\n  /**\r\n   * Sends a message to the Socket.IO server. This is done by adding a new\r\n   * task to the FlashSocket. The rest will be handled off by the `WebSocket` \r\n   * transport.\r\n   *\r\n   * @returns {Transport}\r\n   * @api public\r\n   */\r\n\r\n  Flashsocket.prototype.send = function () {\r\n    var self = this, args = arguments;\r\n    WebSocket.__addTask(function () {\r\n      io.Transport.websocket.prototype.send.apply(self, args);\r\n    });\r\n    return this;\r\n  };\r\n\r\n  /**\r\n   * Disconnects the established `FlashSocket` connection.\r\n   *\r\n   * @returns {Transport}\r\n   * @api public\r\n   */\r\n\r\n  Flashsocket.prototype.close = function () {\r\n    WebSocket.__tasks.length = 0;\r\n    io.Transport.websocket.prototype.close.call(this);\r\n    return this;\r\n  };\r\n\r\n  /**\r\n   * The WebSocket fall back needs to append the flash container to the body\r\n   * element, so we need to make sure we have access to it. Or defer the call\r\n   * until we are sure there is a body element.\r\n   *\r\n   * @param {Socket} socket The socket instance that needs a transport\r\n   * @param {Function} fn The callback\r\n   * @api private\r\n   */\r\n\r\n  Flashsocket.prototype.ready = function (socket, fn) {\r\n    function init () {\r\n      var options = socket.options\r\n        , port = options['flash policy port']\r\n        , path = [\r\n              'http' + (options.secure ? 's' : '') + ':/'\r\n            , options.host + ':' + options.port\r\n            , options.resource\r\n            , 'static/flashsocket'\r\n            , 'WebSocketMain' + (socket.isXDomain() ? 'Insecure' : '') + '.swf'\r\n          ];\r\n\r\n      // Only start downloading the swf file when the checked that this browser\r\n      // actually supports it\r\n      if (!Flashsocket.loaded) {\r\n        if (typeof WEB_SOCKET_SWF_LOCATION === 'undefined') {\r\n          // Set the correct file based on the XDomain settings\r\n          WEB_SOCKET_SWF_LOCATION = path.join('/');\r\n        }\r\n\r\n        if (port !== 843) {\r\n          WebSocket.loadFlashPolicyFile('xmlsocket://' + options.host + ':' + port);\r\n        }\r\n\r\n        WebSocket.__initialize();\r\n        Flashsocket.loaded = true;\r\n      }\r\n\r\n      fn.call(self);\r\n    }\r\n\r\n    var self = this;\r\n    if (document.body) return init();\r\n\r\n    io.util.load(init);\r\n  };\r\n\r\n  /**\r\n   * Check if the FlashSocket transport is supported as it requires that the Adobe\r\n   * Flash Player plug-in version `10.0.0` or greater is installed. And also check if\r\n   * the polyfill is correctly loaded.\r\n   *\r\n   * @returns {Boolean}\r\n   * @api public\r\n   */\r\n\r\n  Flashsocket.check = function () {\r\n    if (\r\n        typeof WebSocket == 'undefined'\r\n      || !('__initialize' in WebSocket) || !swfobject\r\n    ) return false;\r\n\r\n    return swfobject.getFlashPlayerVersion().major >= 10;\r\n  };\r\n\r\n  /**\r\n   * Check if the FlashSocket transport can be used as cross domain / cross origin \r\n   * transport. Because we can't see which type (secure or insecure) of .swf is used\r\n   * we will just return true.\r\n   *\r\n   * @returns {Boolean}\r\n   * @api public\r\n   */\r\n\r\n  Flashsocket.xdomainCheck = function () {\r\n    return true;\r\n  };\r\n\r\n  /**\r\n   * Disable AUTO_INITIALIZATION\r\n   */\r\n\r\n  if (typeof window != 'undefined') {\r\n    WEB_SOCKET_DISABLE_AUTO_INITIALIZATION = true;\r\n  }\r\n\r\n  /**\r\n   * Add the transport to your public io.transports array.\r\n   *\r\n   * @api private\r\n   */\r\n\r\n  io.transports.push('flashsocket');\r\n})(\r\n    'undefined' != typeof io ? io.Transport : module.exports\r\n  , 'undefined' != typeof io ? io : module.parent.exports\r\n);\r\n/*\tSWFObject v2.2 <http://code.google.com/p/swfobject/> \r\n\tis released under the MIT License <http://www.opensource.org/licenses/mit-license.php> \r\n*/\r\nif ('undefined' != typeof window) {\r\nvar swfobject=function(){var D=\"undefined\",r=\"object\",S=\"Shockwave Flash\",W=\"ShockwaveFlash.ShockwaveFlash\",q=\"application/x-shockwave-flash\",R=\"SWFObjectExprInst\",x=\"onreadystatechange\",O=window,j=document,t=navigator,T=false,U=[h],o=[],N=[],I=[],l,Q,E,B,J=false,a=false,n,G,m=true,M=function(){var aa=typeof j.getElementById!=D&&typeof j.getElementsByTagName!=D&&typeof j.createElement!=D,ah=t.userAgent.toLowerCase(),Y=t.platform.toLowerCase(),ae=Y?/win/.test(Y):/win/.test(ah),ac=Y?/mac/.test(Y):/mac/.test(ah),af=/webkit/.test(ah)?parseFloat(ah.replace(/^.*webkit\\/(\\d+(\\.\\d+)?).*$/,\"$1\")):false,X=!+\"\\v1\",ag=[0,0,0],ab=null;if(typeof t.plugins!=D&&typeof t.plugins[S]==r){ab=t.plugins[S].description;if(ab&&!(typeof t.mimeTypes!=D&&t.mimeTypes[q]&&!t.mimeTypes[q].enabledPlugin)){T=true;X=false;ab=ab.replace(/^.*\\s+(\\S+\\s+\\S+$)/,\"$1\");ag[0]=parseInt(ab.replace(/^(.*)\\..*$/,\"$1\"),10);ag[1]=parseInt(ab.replace(/^.*\\.(.*)\\s.*$/,\"$1\"),10);ag[2]=/[a-zA-Z]/.test(ab)?parseInt(ab.replace(/^.*[a-zA-Z]+(.*)$/,\"$1\"),10):0}}else{if(typeof O[(['Active'].concat('Object').join('X'))]!=D){try{var ad=new window[(['Active'].concat('Object').join('X'))](W);if(ad){ab=ad.GetVariable(\"$version\");if(ab){X=true;ab=ab.split(\" \")[1].split(\",\");ag=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}}catch(Z){}}}return{w3:aa,pv:ag,wk:af,ie:X,win:ae,mac:ac}}(),k=function(){if(!M.w3){return}if((typeof j.readyState!=D&&j.readyState==\"complete\")||(typeof j.readyState==D&&(j.getElementsByTagName(\"body\")[0]||j.body))){f()}if(!J){if(typeof j.addEventListener!=D){j.addEventListener(\"DOMContentLoaded\",f,false)}if(M.ie&&M.win){j.attachEvent(x,function(){if(j.readyState==\"complete\"){j.detachEvent(x,arguments.callee);f()}});if(O==top){(function(){if(J){return}try{j.documentElement.doScroll(\"left\")}catch(X){setTimeout(arguments.callee,0);return}f()})()}}if(M.wk){(function(){if(J){return}if(!/loaded|complete/.test(j.readyState)){setTimeout(arguments.callee,0);return}f()})()}s(f)}}();function f(){if(J){return}try{var Z=j.getElementsByTagName(\"body\")[0].appendChild(C(\"span\"));Z.parentNode.removeChild(Z)}catch(aa){return}J=true;var X=U.length;for(var Y=0;Y<X;Y++){U[Y]()}}function K(X){if(J){X()}else{U[U.length]=X}}function s(Y){if(typeof O.addEventListener!=D){O.addEventListener(\"load\",Y,false)}else{if(typeof j.addEventListener!=D){j.addEventListener(\"load\",Y,false)}else{if(typeof O.attachEvent!=D){i(O,\"onload\",Y)}else{if(typeof O.onload==\"function\"){var X=O.onload;O.onload=function(){X();Y()}}else{O.onload=Y}}}}}function h(){if(T){V()}else{H()}}function V(){var X=j.getElementsByTagName(\"body\")[0];var aa=C(r);aa.setAttribute(\"type\",q);var Z=X.appendChild(aa);if(Z){var Y=0;(function(){if(typeof Z.GetVariable!=D){var ab=Z.GetVariable(\"$version\");if(ab){ab=ab.split(\" \")[1].split(\",\");M.pv=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}else{if(Y<10){Y++;setTimeout(arguments.callee,10);return}}X.removeChild(aa);Z=null;H()})()}else{H()}}function H(){var ag=o.length;if(ag>0){for(var af=0;af<ag;af++){var Y=o[af].id;var ab=o[af].callbackFn;var aa={success:false,id:Y};if(M.pv[0]>0){var ae=c(Y);if(ae){if(F(o[af].swfVersion)&&!(M.wk&&M.wk<312)){w(Y,true);if(ab){aa.success=true;aa.ref=z(Y);ab(aa)}}else{if(o[af].expressInstall&&A()){var ai={};ai.data=o[af].expressInstall;ai.width=ae.getAttribute(\"width\")||\"0\";ai.height=ae.getAttribute(\"height\")||\"0\";if(ae.getAttribute(\"class\")){ai.styleclass=ae.getAttribute(\"class\")}if(ae.getAttribute(\"align\")){ai.align=ae.getAttribute(\"align\")}var ah={};var X=ae.getElementsByTagName(\"param\");var ac=X.length;for(var ad=0;ad<ac;ad++){if(X[ad].getAttribute(\"name\").toLowerCase()!=\"movie\"){ah[X[ad].getAttribute(\"name\")]=X[ad].getAttribute(\"value\")}}P(ai,ah,Y,ab)}else{p(ae);if(ab){ab(aa)}}}}}else{w(Y,true);if(ab){var Z=z(Y);if(Z&&typeof Z.SetVariable!=D){aa.success=true;aa.ref=Z}ab(aa)}}}}}function z(aa){var X=null;var Y=c(aa);if(Y&&Y.nodeName==\"OBJECT\"){if(typeof Y.SetVariable!=D){X=Y}else{var Z=Y.getElementsByTagName(r)[0];if(Z){X=Z}}}return X}function A(){return !a&&F(\"6.0.65\")&&(M.win||M.mac)&&!(M.wk&&M.wk<312)}function P(aa,ab,X,Z){a=true;E=Z||null;B={success:false,id:X};var ae=c(X);if(ae){if(ae.nodeName==\"OBJECT\"){l=g(ae);Q=null}else{l=ae;Q=X}aa.id=R;if(typeof aa.width==D||(!/%$/.test(aa.width)&&parseInt(aa.width,10)<310)){aa.width=\"310\"}if(typeof aa.height==D||(!/%$/.test(aa.height)&&parseInt(aa.height,10)<137)){aa.height=\"137\"}j.title=j.title.slice(0,47)+\" - Flash Player Installation\";var ad=M.ie&&M.win?(['Active'].concat('').join('X')):\"PlugIn\",ac=\"MMredirectURL=\"+O.location.toString().replace(/&/g,\"%26\")+\"&MMplayerType=\"+ad+\"&MMdoctitle=\"+j.title;if(typeof ab.flashvars!=D){ab.flashvars+=\"&\"+ac}else{ab.flashvars=ac}if(M.ie&&M.win&&ae.readyState!=4){var Y=C(\"div\");X+=\"SWFObjectNew\";Y.setAttribute(\"id\",X);ae.parentNode.insertBefore(Y,ae);ae.style.display=\"none\";(function(){if(ae.readyState==4){ae.parentNode.removeChild(ae)}else{setTimeout(arguments.callee,10)}})()}u(aa,ab,X)}}function p(Y){if(M.ie&&M.win&&Y.readyState!=4){var X=C(\"div\");Y.parentNode.insertBefore(X,Y);X.parentNode.replaceChild(g(Y),X);Y.style.display=\"none\";(function(){if(Y.readyState==4){Y.parentNode.removeChild(Y)}else{setTimeout(arguments.callee,10)}})()}else{Y.parentNode.replaceChild(g(Y),Y)}}function g(ab){var aa=C(\"div\");if(M.win&&M.ie){aa.innerHTML=ab.innerHTML}else{var Y=ab.getElementsByTagName(r)[0];if(Y){var ad=Y.childNodes;if(ad){var X=ad.length;for(var Z=0;Z<X;Z++){if(!(ad[Z].nodeType==1&&ad[Z].nodeName==\"PARAM\")&&!(ad[Z].nodeType==8)){aa.appendChild(ad[Z].cloneNode(true))}}}}}return aa}function u(ai,ag,Y){var X,aa=c(Y);if(M.wk&&M.wk<312){return X}if(aa){if(typeof ai.id==D){ai.id=Y}if(M.ie&&M.win){var ah=\"\";for(var ae in ai){if(ai[ae]!=Object.prototype[ae]){if(ae.toLowerCase()==\"data\"){ag.movie=ai[ae]}else{if(ae.toLowerCase()==\"styleclass\"){ah+=' class=\"'+ai[ae]+'\"'}else{if(ae.toLowerCase()!=\"classid\"){ah+=\" \"+ae+'=\"'+ai[ae]+'\"'}}}}}var af=\"\";for(var ad in ag){if(ag[ad]!=Object.prototype[ad]){af+='<param name=\"'+ad+'\" value=\"'+ag[ad]+'\" />'}}aa.outerHTML='<object classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\"'+ah+\">\"+af+\"</object>\";N[N.length]=ai.id;X=c(ai.id)}else{var Z=C(r);Z.setAttribute(\"type\",q);for(var ac in ai){if(ai[ac]!=Object.prototype[ac]){if(ac.toLowerCase()==\"styleclass\"){Z.setAttribute(\"class\",ai[ac])}else{if(ac.toLowerCase()!=\"classid\"){Z.setAttribute(ac,ai[ac])}}}}for(var ab in ag){if(ag[ab]!=Object.prototype[ab]&&ab.toLowerCase()!=\"movie\"){e(Z,ab,ag[ab])}}aa.parentNode.replaceChild(Z,aa);X=Z}}return X}function e(Z,X,Y){var aa=C(\"param\");aa.setAttribute(\"name\",X);aa.setAttribute(\"value\",Y);Z.appendChild(aa)}function y(Y){var X=c(Y);if(X&&X.nodeName==\"OBJECT\"){if(M.ie&&M.win){X.style.display=\"none\";(function(){if(X.readyState==4){b(Y)}else{setTimeout(arguments.callee,10)}})()}else{X.parentNode.removeChild(X)}}}function b(Z){var Y=c(Z);if(Y){for(var X in Y){if(typeof Y[X]==\"function\"){Y[X]=null}}Y.parentNode.removeChild(Y)}}function c(Z){var X=null;try{X=j.getElementById(Z)}catch(Y){}return X}function C(X){return j.createElement(X)}function i(Z,X,Y){Z.attachEvent(X,Y);I[I.length]=[Z,X,Y]}function F(Z){var Y=M.pv,X=Z.split(\".\");X[0]=parseInt(X[0],10);X[1]=parseInt(X[1],10)||0;X[2]=parseInt(X[2],10)||0;return(Y[0]>X[0]||(Y[0]==X[0]&&Y[1]>X[1])||(Y[0]==X[0]&&Y[1]==X[1]&&Y[2]>=X[2]))?true:false}function v(ac,Y,ad,ab){if(M.ie&&M.mac){return}var aa=j.getElementsByTagName(\"head\")[0];if(!aa){return}var X=(ad&&typeof ad==\"string\")?ad:\"screen\";if(ab){n=null;G=null}if(!n||G!=X){var Z=C(\"style\");Z.setAttribute(\"type\",\"text/css\");Z.setAttribute(\"media\",X);n=aa.appendChild(Z);if(M.ie&&M.win&&typeof j.styleSheets!=D&&j.styleSheets.length>0){n=j.styleSheets[j.styleSheets.length-1]}G=X}if(M.ie&&M.win){if(n&&typeof n.addRule==r){n.addRule(ac,Y)}}else{if(n&&typeof j.createTextNode!=D){n.appendChild(j.createTextNode(ac+\" {\"+Y+\"}\"))}}}function w(Z,X){if(!m){return}var Y=X?\"visible\":\"hidden\";if(J&&c(Z)){c(Z).style.visibility=Y}else{v(\"#\"+Z,\"visibility:\"+Y)}}function L(Y){var Z=/[\\\\\\\"<>\\.;]/;var X=Z.exec(Y)!=null;return X&&typeof encodeURIComponent!=D?encodeURIComponent(Y):Y}var d=function(){if(M.ie&&M.win){window.attachEvent(\"onunload\",function(){var ac=I.length;for(var ab=0;ab<ac;ab++){I[ab][0].detachEvent(I[ab][1],I[ab][2])}var Z=N.length;for(var aa=0;aa<Z;aa++){y(N[aa])}for(var Y in M){M[Y]=null}M=null;for(var X in swfobject){swfobject[X]=null}swfobject=null})}}();return{registerObject:function(ab,X,aa,Z){if(M.w3&&ab&&X){var Y={};Y.id=ab;Y.swfVersion=X;Y.expressInstall=aa;Y.callbackFn=Z;o[o.length]=Y;w(ab,false)}else{if(Z){Z({success:false,id:ab})}}},getObjectById:function(X){if(M.w3){return z(X)}},embedSWF:function(ab,ah,ae,ag,Y,aa,Z,ad,af,ac){var X={success:false,id:ah};if(M.w3&&!(M.wk&&M.wk<312)&&ab&&ah&&ae&&ag&&Y){w(ah,false);K(function(){ae+=\"\";ag+=\"\";var aj={};if(af&&typeof af===r){for(var al in af){aj[al]=af[al]}}aj.data=ab;aj.width=ae;aj.height=ag;var am={};if(ad&&typeof ad===r){for(var ak in ad){am[ak]=ad[ak]}}if(Z&&typeof Z===r){for(var ai in Z){if(typeof am.flashvars!=D){am.flashvars+=\"&\"+ai+\"=\"+Z[ai]}else{am.flashvars=ai+\"=\"+Z[ai]}}}if(F(Y)){var an=u(aj,am,ah);if(aj.id==ah){w(ah,true)}X.success=true;X.ref=an}else{if(aa&&A()){aj.data=aa;P(aj,am,ah,ac);return}else{w(ah,true)}}if(ac){ac(X)}})}else{if(ac){ac(X)}}},switchOffAutoHideShow:function(){m=false},ua:M,getFlashPlayerVersion:function(){return{major:M.pv[0],minor:M.pv[1],release:M.pv[2]}},hasFlashPlayerVersion:F,createSWF:function(Z,Y,X){if(M.w3){return u(Z,Y,X)}else{return undefined}},showExpressInstall:function(Z,aa,X,Y){if(M.w3&&A()){P(Z,aa,X,Y)}},removeSWF:function(X){if(M.w3){y(X)}},createCSS:function(aa,Z,Y,X){if(M.w3){v(aa,Z,Y,X)}},addDomLoadEvent:K,addLoadEvent:s,getQueryParamValue:function(aa){var Z=j.location.search||j.location.hash;if(Z){if(/\\?/.test(Z)){Z=Z.split(\"?\")[1]}if(aa==null){return L(Z)}var Y=Z.split(\"&\");for(var X=0;X<Y.length;X++){if(Y[X].substring(0,Y[X].indexOf(\"=\"))==aa){return L(Y[X].substring((Y[X].indexOf(\"=\")+1)))}}}return\"\"},expressInstallCallback:function(){if(a){var X=c(R);if(X&&l){X.parentNode.replaceChild(l,X);if(Q){w(Q,true);if(M.ie&&M.win){l.style.display=\"block\"}}if(E){E(B)}}a=false}}}}();\r\n}\r\n// Copyright: Hiroshi Ichikawa <http://gimite.net/en/>\r\n// License: New BSD License\r\n// Reference: http://dev.w3.org/html5/websockets/\r\n// Reference: http://tools.ietf.org/html/draft-hixie-thewebsocketprotocol\r\n\r\n(function() {\r\n  \r\n  if ('undefined' == typeof window || window.WebSocket) return;\r\n\r\n  var console = window.console;\r\n  if (!console || !console.log || !console.error) {\r\n    console = {log: function(){ }, error: function(){ }};\r\n  }\r\n  \r\n  if (!swfobject.hasFlashPlayerVersion(\"10.0.0\")) {\r\n    console.error(\"Flash Player >= 10.0.0 is required.\");\r\n    return;\r\n  }\r\n  if (location.protocol == \"file:\") {\r\n    console.error(\r\n      \"WARNING: web-socket-js doesn't work in file:///... URL \" +\r\n      \"unless you set Flash Security Settings properly. \" +\r\n      \"Open the page via Web server i.e. http://...\");\r\n  }\r\n\r\n  /**\r\n   * This class represents a faux web socket.\r\n   * @param {string} url\r\n   * @param {array or string} protocols\r\n   * @param {string} proxyHost\r\n   * @param {int} proxyPort\r\n   * @param {string} headers\r\n   */\r\n  WebSocket = function(url, protocols, proxyHost, proxyPort, headers) {\r\n    var self = this;\r\n    self.__id = WebSocket.__nextId++;\r\n    WebSocket.__instances[self.__id] = self;\r\n    self.readyState = WebSocket.CONNECTING;\r\n    self.bufferedAmount = 0;\r\n    self.__events = {};\r\n    if (!protocols) {\r\n      protocols = [];\r\n    } else if (typeof protocols == \"string\") {\r\n      protocols = [protocols];\r\n    }\r\n    // Uses setTimeout() to make sure __createFlash() runs after the caller sets ws.onopen etc.\r\n    // Otherwise, when onopen fires immediately, onopen is called before it is set.\r\n    setTimeout(function() {\r\n      WebSocket.__addTask(function() {\r\n        WebSocket.__flash.create(\r\n            self.__id, url, protocols, proxyHost || null, proxyPort || 0, headers || null);\r\n      });\r\n    }, 0);\r\n  };\r\n\r\n  /**\r\n   * Send data to the web socket.\r\n   * @param {string} data  The data to send to the socket.\r\n   * @return {boolean}  True for success, false for failure.\r\n   */\r\n  WebSocket.prototype.send = function(data) {\r\n    if (this.readyState == WebSocket.CONNECTING) {\r\n      throw \"INVALID_STATE_ERR: Web Socket connection has not been established\";\r\n    }\r\n    // We use encodeURIComponent() here, because FABridge doesn't work if\r\n    // the argument includes some characters. We don't use escape() here\r\n    // because of this:\r\n    // https://developer.mozilla.org/en/Core_JavaScript_1.5_Guide/Functions#escape_and_unescape_Functions\r\n    // But it looks decodeURIComponent(encodeURIComponent(s)) doesn't\r\n    // preserve all Unicode characters either e.g. \"\\uffff\" in Firefox.\r\n    // Note by wtritch: Hopefully this will not be necessary using ExternalInterface.  Will require\r\n    // additional testing.\r\n    var result = WebSocket.__flash.send(this.__id, encodeURIComponent(data));\r\n    if (result < 0) { // success\r\n      return true;\r\n    } else {\r\n      this.bufferedAmount += result;\r\n      return false;\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Close this web socket gracefully.\r\n   */\r\n  WebSocket.prototype.close = function() {\r\n    if (this.readyState == WebSocket.CLOSED || this.readyState == WebSocket.CLOSING) {\r\n      return;\r\n    }\r\n    this.readyState = WebSocket.CLOSING;\r\n    WebSocket.__flash.close(this.__id);\r\n  };\r\n\r\n  /**\r\n   * Implementation of {@link <a href=\"http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-registration\">DOM 2 EventTarget Interface</a>}\r\n   *\r\n   * @param {string} type\r\n   * @param {function} listener\r\n   * @param {boolean} useCapture\r\n   * @return void\r\n   */\r\n  WebSocket.prototype.addEventListener = function(type, listener, useCapture) {\r\n    if (!(type in this.__events)) {\r\n      this.__events[type] = [];\r\n    }\r\n    this.__events[type].push(listener);\r\n  };\r\n\r\n  /**\r\n   * Implementation of {@link <a href=\"http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-registration\">DOM 2 EventTarget Interface</a>}\r\n   *\r\n   * @param {string} type\r\n   * @param {function} listener\r\n   * @param {boolean} useCapture\r\n   * @return void\r\n   */\r\n  WebSocket.prototype.removeEventListener = function(type, listener, useCapture) {\r\n    if (!(type in this.__events)) return;\r\n    var events = this.__events[type];\r\n    for (var i = events.length - 1; i >= 0; --i) {\r\n      if (events[i] === listener) {\r\n        events.splice(i, 1);\r\n        break;\r\n      }\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Implementation of {@link <a href=\"http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-registration\">DOM 2 EventTarget Interface</a>}\r\n   *\r\n   * @param {Event} event\r\n   * @return void\r\n   */\r\n  WebSocket.prototype.dispatchEvent = function(event) {\r\n    var events = this.__events[event.type] || [];\r\n    for (var i = 0; i < events.length; ++i) {\r\n      events[i](event);\r\n    }\r\n    var handler = this[\"on\" + event.type];\r\n    if (handler) handler(event);\r\n  };\r\n\r\n  /**\r\n   * Handles an event from Flash.\r\n   * @param {Object} flashEvent\r\n   */\r\n  WebSocket.prototype.__handleEvent = function(flashEvent) {\r\n    if (\"readyState\" in flashEvent) {\r\n      this.readyState = flashEvent.readyState;\r\n    }\r\n    if (\"protocol\" in flashEvent) {\r\n      this.protocol = flashEvent.protocol;\r\n    }\r\n    \r\n    var jsEvent;\r\n    if (flashEvent.type == \"open\" || flashEvent.type == \"error\") {\r\n      jsEvent = this.__createSimpleEvent(flashEvent.type);\r\n    } else if (flashEvent.type == \"close\") {\r\n      // TODO implement jsEvent.wasClean\r\n      jsEvent = this.__createSimpleEvent(\"close\");\r\n    } else if (flashEvent.type == \"message\") {\r\n      var data = decodeURIComponent(flashEvent.message);\r\n      jsEvent = this.__createMessageEvent(\"message\", data);\r\n    } else {\r\n      throw \"unknown event type: \" + flashEvent.type;\r\n    }\r\n    \r\n    this.dispatchEvent(jsEvent);\r\n  };\r\n  \r\n  WebSocket.prototype.__createSimpleEvent = function(type) {\r\n    if (document.createEvent && window.Event) {\r\n      var event = document.createEvent(\"Event\");\r\n      event.initEvent(type, false, false);\r\n      return event;\r\n    } else {\r\n      return {type: type, bubbles: false, cancelable: false};\r\n    }\r\n  };\r\n  \r\n  WebSocket.prototype.__createMessageEvent = function(type, data) {\r\n    if (document.createEvent && window.MessageEvent && !window.opera) {\r\n      var event = document.createEvent(\"MessageEvent\");\r\n      event.initMessageEvent(\"message\", false, false, data, null, null, window, null);\r\n      return event;\r\n    } else {\r\n      // IE and Opera, the latter one truncates the data parameter after any 0x00 bytes.\r\n      return {type: type, data: data, bubbles: false, cancelable: false};\r\n    }\r\n  };\r\n  \r\n  /**\r\n   * Define the WebSocket readyState enumeration.\r\n   */\r\n  WebSocket.CONNECTING = 0;\r\n  WebSocket.OPEN = 1;\r\n  WebSocket.CLOSING = 2;\r\n  WebSocket.CLOSED = 3;\r\n\r\n  WebSocket.__flash = null;\r\n  WebSocket.__instances = {};\r\n  WebSocket.__tasks = [];\r\n  WebSocket.__nextId = 0;\r\n  \r\n  /**\r\n   * Load a new flash security policy file.\r\n   * @param {string} url\r\n   */\r\n  WebSocket.loadFlashPolicyFile = function(url){\r\n    WebSocket.__addTask(function() {\r\n      WebSocket.__flash.loadManualPolicyFile(url);\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Loads WebSocketMain.swf and creates WebSocketMain object in Flash.\r\n   */\r\n  WebSocket.__initialize = function() {\r\n    if (WebSocket.__flash) return;\r\n    \r\n    if (WebSocket.__swfLocation) {\r\n      // For backword compatibility.\r\n      window.WEB_SOCKET_SWF_LOCATION = WebSocket.__swfLocation;\r\n    }\r\n    if (!window.WEB_SOCKET_SWF_LOCATION) {\r\n      console.error(\"[WebSocket] set WEB_SOCKET_SWF_LOCATION to location of WebSocketMain.swf\");\r\n      return;\r\n    }\r\n    var container = document.createElement(\"div\");\r\n    container.id = \"webSocketContainer\";\r\n    // Hides Flash box. We cannot use display: none or visibility: hidden because it prevents\r\n    // Flash from loading at least in IE. So we move it out of the screen at (-100, -100).\r\n    // But this even doesn't work with Flash Lite (e.g. in Droid Incredible). So with Flash\r\n    // Lite, we put it at (0, 0). This shows 1x1 box visible at left-top corner but this is\r\n    // the best we can do as far as we know now.\r\n    container.style.position = \"absolute\";\r\n    if (WebSocket.__isFlashLite()) {\r\n      container.style.left = \"0px\";\r\n      container.style.top = \"0px\";\r\n    } else {\r\n      container.style.left = \"-100px\";\r\n      container.style.top = \"-100px\";\r\n    }\r\n    var holder = document.createElement(\"div\");\r\n    holder.id = \"webSocketFlash\";\r\n    container.appendChild(holder);\r\n    document.body.appendChild(container);\r\n    // See this article for hasPriority:\r\n    // http://help.adobe.com/en_US/as3/mobile/WS4bebcd66a74275c36cfb8137124318eebc6-7ffd.html\r\n    swfobject.embedSWF(\r\n      WEB_SOCKET_SWF_LOCATION,\r\n      \"webSocketFlash\",\r\n      \"1\" /* width */,\r\n      \"1\" /* height */,\r\n      \"10.0.0\" /* SWF version */,\r\n      null,\r\n      null,\r\n      {hasPriority: true, swliveconnect : true, allowScriptAccess: \"always\"},\r\n      null,\r\n      function(e) {\r\n        if (!e.success) {\r\n          console.error(\"[WebSocket] swfobject.embedSWF failed\");\r\n        }\r\n      });\r\n  };\r\n  \r\n  /**\r\n   * Called by Flash to notify JS that it's fully loaded and ready\r\n   * for communication.\r\n   */\r\n  WebSocket.__onFlashInitialized = function() {\r\n    // We need to set a timeout here to avoid round-trip calls\r\n    // to flash during the initialization process.\r\n    setTimeout(function() {\r\n      WebSocket.__flash = document.getElementById(\"webSocketFlash\");\r\n      WebSocket.__flash.setCallerUrl(location.href);\r\n      WebSocket.__flash.setDebug(!!window.WEB_SOCKET_DEBUG);\r\n      for (var i = 0; i < WebSocket.__tasks.length; ++i) {\r\n        WebSocket.__tasks[i]();\r\n      }\r\n      WebSocket.__tasks = [];\r\n    }, 0);\r\n  };\r\n  \r\n  /**\r\n   * Called by Flash to notify WebSockets events are fired.\r\n   */\r\n  WebSocket.__onFlashEvent = function() {\r\n    setTimeout(function() {\r\n      try {\r\n        // Gets events using receiveEvents() instead of getting it from event object\r\n        // of Flash event. This is to make sure to keep message order.\r\n        // It seems sometimes Flash events don't arrive in the same order as they are sent.\r\n        var events = WebSocket.__flash.receiveEvents();\r\n        for (var i = 0; i < events.length; ++i) {\r\n          WebSocket.__instances[events[i].webSocketId].__handleEvent(events[i]);\r\n        }\r\n      } catch (e) {\r\n        console.error(e);\r\n      }\r\n    }, 0);\r\n    return true;\r\n  };\r\n  \r\n  // Called by Flash.\r\n  WebSocket.__log = function(message) {\r\n    console.log(decodeURIComponent(message));\r\n  };\r\n  \r\n  // Called by Flash.\r\n  WebSocket.__error = function(message) {\r\n    console.error(decodeURIComponent(message));\r\n  };\r\n  \r\n  WebSocket.__addTask = function(task) {\r\n    if (WebSocket.__flash) {\r\n      task();\r\n    } else {\r\n      WebSocket.__tasks.push(task);\r\n    }\r\n  };\r\n  \r\n  /**\r\n   * Test if the browser is running flash lite.\r\n   * @return {boolean} True if flash lite is running, false otherwise.\r\n   */\r\n  WebSocket.__isFlashLite = function() {\r\n    if (!window.navigator || !window.navigator.mimeTypes) {\r\n      return false;\r\n    }\r\n    var mimeType = window.navigator.mimeTypes[\"application/x-shockwave-flash\"];\r\n    if (!mimeType || !mimeType.enabledPlugin || !mimeType.enabledPlugin.filename) {\r\n      return false;\r\n    }\r\n    return mimeType.enabledPlugin.filename.match(/flashlite/i) ? true : false;\r\n  };\r\n  \r\n  if (!window.WEB_SOCKET_DISABLE_AUTO_INITIALIZATION) {\r\n    if (window.addEventListener) {\r\n      window.addEventListener(\"load\", function(){\r\n        WebSocket.__initialize();\r\n      }, false);\r\n    } else {\r\n      window.attachEvent(\"onload\", function(){\r\n        WebSocket.__initialize();\r\n      });\r\n    }\r\n  }\r\n  \r\n})();\r\n\r\n/**\r\n * socket.io\r\n * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\r\n * MIT Licensed\r\n */\r\n\r\n(function (exports, io, global) {\r\n\r\n  /**\r\n   * Expose constructor.\r\n   *\r\n   * @api public\r\n   */\r\n\r\n  exports.XHR = XHR;\r\n\r\n  /**\r\n   * XHR constructor\r\n   *\r\n   * @costructor\r\n   * @api public\r\n   */\r\n\r\n  function XHR (socket) {\r\n    if (!socket) return;\r\n\r\n    io.Transport.apply(this, arguments);\r\n    this.sendBuffer = [];\r\n  };\r\n\r\n  /**\r\n   * Inherits from Transport.\r\n   */\r\n\r\n  io.util.inherit(XHR, io.Transport);\r\n\r\n  /**\r\n   * Establish a connection\r\n   *\r\n   * @returns {Transport}\r\n   * @api public\r\n   */\r\n\r\n  XHR.prototype.open = function () {\r\n    this.socket.setBuffer(false);\r\n    this.onOpen();\r\n    this.get();\r\n\r\n    // we need to make sure the request succeeds since we have no indication\r\n    // whether the request opened or not until it succeeded.\r\n    this.setCloseTimeout();\r\n\r\n    return this;\r\n  };\r\n\r\n  /**\r\n   * Check if we need to send data to the Socket.IO server, if we have data in our\r\n   * buffer we encode it and forward it to the `post` method.\r\n   *\r\n   * @api private\r\n   */\r\n\r\n  XHR.prototype.payload = function (payload) {\r\n    var msgs = [];\r\n\r\n    for (var i = 0, l = payload.length; i < l; i++) {\r\n      msgs.push(io.parser.encodePacket(payload[i]));\r\n    }\r\n\r\n    this.send(io.parser.encodePayload(msgs));\r\n  };\r\n\r\n  /**\r\n   * Send data to the Socket.IO server.\r\n   *\r\n   * @param data The message\r\n   * @returns {Transport}\r\n   * @api public\r\n   */\r\n\r\n  XHR.prototype.send = function (data) {\r\n    this.post(data);\r\n    return this;\r\n  };\r\n\r\n  /**\r\n   * Posts a encoded message to the Socket.IO server.\r\n   *\r\n   * @param {String} data A encoded message.\r\n   * @api private\r\n   */\r\n\r\n  function empty () { };\r\n\r\n  XHR.prototype.post = function (data) {\r\n    var self = this;\r\n    this.socket.setBuffer(true);\r\n\r\n    function stateChange () {\r\n      if (this.readyState == 4) {\r\n        this.onreadystatechange = empty;\r\n        self.posting = false;\r\n\r\n        if (this.status == 200){\r\n          self.socket.setBuffer(false);\r\n        } else {\r\n          self.onClose();\r\n        }\r\n      }\r\n    }\r\n\r\n    function onload () {\r\n      this.onload = empty;\r\n      self.socket.setBuffer(false);\r\n    };\r\n\r\n    this.sendXHR = this.request('POST');\r\n\r\n    if (global.XDomainRequest && this.sendXHR instanceof XDomainRequest) {\r\n      this.sendXHR.onload = this.sendXHR.onerror = onload;\r\n    } else {\r\n      this.sendXHR.onreadystatechange = stateChange;\r\n    }\r\n\r\n    this.sendXHR.send(data);\r\n  };\r\n\r\n  /**\r\n   * Disconnects the established `XHR` connection.\r\n   *\r\n   * @returns {Transport}\r\n   * @api public\r\n   */\r\n\r\n  XHR.prototype.close = function () {\r\n    this.onClose();\r\n    return this;\r\n  };\r\n\r\n  /**\r\n   * Generates a configured XHR request\r\n   *\r\n   * @param {String} url The url that needs to be requested.\r\n   * @param {String} method The method the request should use.\r\n   * @returns {XMLHttpRequest}\r\n   * @api private\r\n   */\r\n\r\n  XHR.prototype.request = function (method) {\r\n    var req = io.util.request(this.socket.isXDomain())\r\n      , query = io.util.query(this.socket.options.query, 't=' + +new Date);\r\n\r\n    req.open(method || 'GET', this.prepareUrl() + query, true);\r\n\r\n    if (method == 'POST') {\r\n      try {\r\n        if (req.setRequestHeader) {\r\n          req.setRequestHeader('Content-type', 'text/plain;charset=UTF-8');\r\n        } else {\r\n          // XDomainRequest\r\n          req.contentType = 'text/plain';\r\n        }\r\n      } catch (e) {}\r\n    }\r\n\r\n    return req;\r\n  };\r\n\r\n  /**\r\n   * Returns the scheme to use for the transport URLs.\r\n   *\r\n   * @api private\r\n   */\r\n\r\n  XHR.prototype.scheme = function () {\r\n    return this.socket.options.secure ? 'https' : 'http';\r\n  };\r\n\r\n  /**\r\n   * Check if the XHR transports are supported\r\n   *\r\n   * @param {Boolean} xdomain Check if we support cross domain requests.\r\n   * @returns {Boolean}\r\n   * @api public\r\n   */\r\n\r\n  XHR.check = function (socket, xdomain) {\r\n    try {\r\n      var request = io.util.request(xdomain),\r\n          usesXDomReq = (global.XDomainRequest && request instanceof XDomainRequest),\r\n          socketProtocol = (socket && socket.options && socket.options.secure ? 'https:' : 'http:'),\r\n          isXProtocol = (global.location && socketProtocol != global.location.protocol);\r\n      if (request && !(usesXDomReq && isXProtocol)) {\r\n        return true;\r\n      }\r\n    } catch(e) {}\r\n\r\n    return false;\r\n  };\r\n\r\n  /**\r\n   * Check if the XHR transport supports cross domain requests.\r\n   *\r\n   * @returns {Boolean}\r\n   * @api public\r\n   */\r\n\r\n  XHR.xdomainCheck = function (socket) {\r\n    return XHR.check(socket, true);\r\n  };\r\n\r\n})(\r\n    'undefined' != typeof io ? io.Transport : module.exports\r\n  , 'undefined' != typeof io ? io : module.parent.exports\r\n  , this\r\n);\r\n/**\r\n * socket.io\r\n * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\r\n * MIT Licensed\r\n */\r\n\r\n(function (exports, io) {\r\n\r\n  /**\r\n   * Expose constructor.\r\n   */\r\n\r\n  exports.htmlfile = HTMLFile;\r\n\r\n  /**\r\n   * The HTMLFile transport creates a `forever iframe` based transport\r\n   * for Internet Explorer. Regular forever iframe implementations will \r\n   * continuously trigger the browsers buzy indicators. If the forever iframe\r\n   * is created inside a `htmlfile` these indicators will not be trigged.\r\n   *\r\n   * @constructor\r\n   * @extends {io.Transport.XHR}\r\n   * @api public\r\n   */\r\n\r\n  function HTMLFile (socket) {\r\n    io.Transport.XHR.apply(this, arguments);\r\n  };\r\n\r\n  /**\r\n   * Inherits from XHR transport.\r\n   */\r\n\r\n  io.util.inherit(HTMLFile, io.Transport.XHR);\r\n\r\n  /**\r\n   * Transport name\r\n   *\r\n   * @api public\r\n   */\r\n\r\n  HTMLFile.prototype.name = 'htmlfile';\r\n\r\n  /**\r\n   * Creates a new Ac...eX `htmlfile` with a forever loading iframe\r\n   * that can be used to listen to messages. Inside the generated\r\n   * `htmlfile` a reference will be made to the HTMLFile transport.\r\n   *\r\n   * @api private\r\n   */\r\n\r\n  HTMLFile.prototype.get = function () {\r\n    this.doc = new window[(['Active'].concat('Object').join('X'))]('htmlfile');\r\n    this.doc.open();\r\n    this.doc.write('<html></html>');\r\n    this.doc.close();\r\n    this.doc.parentWindow.s = this;\r\n\r\n    var iframeC = this.doc.createElement('div');\r\n    iframeC.className = 'socketio';\r\n\r\n    this.doc.body.appendChild(iframeC);\r\n    this.iframe = this.doc.createElement('iframe');\r\n\r\n    iframeC.appendChild(this.iframe);\r\n\r\n    var self = this\r\n      , query = io.util.query(this.socket.options.query, 't='+ +new Date);\r\n\r\n    this.iframe.src = this.prepareUrl() + query;\r\n\r\n    io.util.on(window, 'unload', function () {\r\n      self.destroy();\r\n    });\r\n  };\r\n\r\n  /**\r\n   * The Socket.IO server will write script tags inside the forever\r\n   * iframe, this function will be used as callback for the incoming\r\n   * information.\r\n   *\r\n   * @param {String} data The message\r\n   * @param {document} doc Reference to the context\r\n   * @api private\r\n   */\r\n\r\n  HTMLFile.prototype._ = function (data, doc) {\r\n    // unescape all forward slashes. see GH-1251\r\n    data = data.replace(/\\\\\\//g, '/');\r\n    this.onData(data);\r\n    try {\r\n      var script = doc.getElementsByTagName('script')[0];\r\n      script.parentNode.removeChild(script);\r\n    } catch (e) { }\r\n  };\r\n\r\n  /**\r\n   * Destroy the established connection, iframe and `htmlfile`.\r\n   * And calls the `CollectGarbage` function of Internet Explorer\r\n   * to release the memory.\r\n   *\r\n   * @api private\r\n   */\r\n\r\n  HTMLFile.prototype.destroy = function () {\r\n    if (this.iframe){\r\n      try {\r\n        this.iframe.src = 'about:blank';\r\n      } catch(e){}\r\n\r\n      this.doc = null;\r\n      this.iframe.parentNode.removeChild(this.iframe);\r\n      this.iframe = null;\r\n\r\n      CollectGarbage();\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Disconnects the established connection.\r\n   *\r\n   * @returns {Transport} Chaining.\r\n   * @api public\r\n   */\r\n\r\n  HTMLFile.prototype.close = function () {\r\n    this.destroy();\r\n    return io.Transport.XHR.prototype.close.call(this);\r\n  };\r\n\r\n  /**\r\n   * Checks if the browser supports this transport. The browser\r\n   * must have an `Ac...eXObject` implementation.\r\n   *\r\n   * @return {Boolean}\r\n   * @api public\r\n   */\r\n\r\n  HTMLFile.check = function (socket) {\r\n    if (typeof window != \"undefined\" && (['Active'].concat('Object').join('X')) in window){\r\n      try {\r\n        var a = new window[(['Active'].concat('Object').join('X'))]('htmlfile');\r\n        return a && io.Transport.XHR.check(socket);\r\n      } catch(e){}\r\n    }\r\n    return false;\r\n  };\r\n\r\n  /**\r\n   * Check if cross domain requests are supported.\r\n   *\r\n   * @returns {Boolean}\r\n   * @api public\r\n   */\r\n\r\n  HTMLFile.xdomainCheck = function () {\r\n    // we can probably do handling for sub-domains, we should\r\n    // test that it's cross domain but a subdomain here\r\n    return false;\r\n  };\r\n\r\n  /**\r\n   * Add the transport to your public io.transports array.\r\n   *\r\n   * @api private\r\n   */\r\n\r\n  io.transports.push('htmlfile');\r\n\r\n})(\r\n    'undefined' != typeof io ? io.Transport : module.exports\r\n  , 'undefined' != typeof io ? io : module.parent.exports\r\n);\r\n\r\n/**\r\n * socket.io\r\n * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\r\n * MIT Licensed\r\n */\r\n\r\n(function (exports, io, global) {\r\n\r\n  /**\r\n   * Expose constructor.\r\n   */\r\n\r\n  exports['xhr-polling'] = XHRPolling;\r\n\r\n  /**\r\n   * The XHR-polling transport uses long polling XHR requests to create a\r\n   * \"persistent\" connection with the server.\r\n   *\r\n   * @constructor\r\n   * @api public\r\n   */\r\n\r\n  function XHRPolling () {\r\n    io.Transport.XHR.apply(this, arguments);\r\n  };\r\n\r\n  /**\r\n   * Inherits from XHR transport.\r\n   */\r\n\r\n  io.util.inherit(XHRPolling, io.Transport.XHR);\r\n\r\n  /**\r\n   * Merge the properties from XHR transport\r\n   */\r\n\r\n  io.util.merge(XHRPolling, io.Transport.XHR);\r\n\r\n  /**\r\n   * Transport name\r\n   *\r\n   * @api public\r\n   */\r\n\r\n  XHRPolling.prototype.name = 'xhr-polling';\r\n\r\n  /**\r\n   * Indicates whether heartbeats is enabled for this transport\r\n   *\r\n   * @api private\r\n   */\r\n\r\n  XHRPolling.prototype.heartbeats = function () {\r\n    return false;\r\n  };\r\n\r\n  /** \r\n   * Establish a connection, for iPhone and Android this will be done once the page\r\n   * is loaded.\r\n   *\r\n   * @returns {Transport} Chaining.\r\n   * @api public\r\n   */\r\n\r\n  XHRPolling.prototype.open = function () {\r\n    var self = this;\r\n\r\n    io.Transport.XHR.prototype.open.call(self);\r\n    return false;\r\n  };\r\n\r\n  /**\r\n   * Starts a XHR request to wait for incoming messages.\r\n   *\r\n   * @api private\r\n   */\r\n\r\n  function empty () {};\r\n\r\n  XHRPolling.prototype.get = function () {\r\n    if (!this.isOpen) return;\r\n\r\n    var self = this;\r\n\r\n    function stateChange () {\r\n      if (this.readyState == 4) {\r\n        this.onreadystatechange = empty;\r\n\r\n        if (this.status == 200) {\r\n          self.onData(this.responseText);\r\n          self.get();\r\n        } else {\r\n          self.onClose();\r\n        }\r\n      }\r\n    };\r\n\r\n    function onload () {\r\n      this.onload = empty;\r\n      this.onerror = empty;\r\n      self.retryCounter = 1;\r\n      self.onData(this.responseText);\r\n      self.get();\r\n    };\r\n\r\n    function onerror () {\r\n      self.retryCounter ++;\r\n      if(!self.retryCounter || self.retryCounter > 3) {\r\n        self.onClose();  \r\n      } else {\r\n        self.get();\r\n      }\r\n    };\r\n\r\n    this.xhr = this.request();\r\n\r\n    if (global.XDomainRequest && this.xhr instanceof XDomainRequest) {\r\n      this.xhr.onload = onload;\r\n      this.xhr.onerror = onerror;\r\n    } else {\r\n      this.xhr.onreadystatechange = stateChange;\r\n    }\r\n\r\n    this.xhr.send(null);\r\n  };\r\n\r\n  /**\r\n   * Handle the unclean close behavior.\r\n   *\r\n   * @api private\r\n   */\r\n\r\n  XHRPolling.prototype.onClose = function () {\r\n    io.Transport.XHR.prototype.onClose.call(this);\r\n\r\n    if (this.xhr) {\r\n      this.xhr.onreadystatechange = this.xhr.onload = this.xhr.onerror = empty;\r\n      try {\r\n        this.xhr.abort();\r\n      } catch(e){}\r\n      this.xhr = null;\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Webkit based browsers show a infinit spinner when you start a XHR request\r\n   * before the browsers onload event is called so we need to defer opening of\r\n   * the transport until the onload event is called. Wrapping the cb in our\r\n   * defer method solve this.\r\n   *\r\n   * @param {Socket} socket The socket instance that needs a transport\r\n   * @param {Function} fn The callback\r\n   * @api private\r\n   */\r\n\r\n  XHRPolling.prototype.ready = function (socket, fn) {\r\n    var self = this;\r\n\r\n    io.util.defer(function () {\r\n      fn.call(self);\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Add the transport to your public io.transports array.\r\n   *\r\n   * @api private\r\n   */\r\n\r\n  io.transports.push('xhr-polling');\r\n\r\n})(\r\n    'undefined' != typeof io ? io.Transport : module.exports\r\n  , 'undefined' != typeof io ? io : module.parent.exports\r\n  , this\r\n);\r\n\r\n/**\r\n * socket.io\r\n * Copyright(c) 2011 LearnBoost <dev@learnboost.com>\r\n * MIT Licensed\r\n */\r\n\r\n(function (exports, io, global) {\r\n  /**\r\n   * There is a way to hide the loading indicator in Firefox. If you create and\r\n   * remove a iframe it will stop showing the current loading indicator.\r\n   * Unfortunately we can't feature detect that and UA sniffing is evil.\r\n   *\r\n   * @api private\r\n   */\r\n\r\n  var indicator = global.document && \"MozAppearance\" in\r\n    global.document.documentElement.style;\r\n\r\n  /**\r\n   * Expose constructor.\r\n   */\r\n\r\n  exports['jsonp-polling'] = JSONPPolling;\r\n\r\n  /**\r\n   * The JSONP transport creates an persistent connection by dynamically\r\n   * inserting a script tag in the page. This script tag will receive the\r\n   * information of the Socket.IO server. When new information is received\r\n   * it creates a new script tag for the new data stream.\r\n   *\r\n   * @constructor\r\n   * @extends {io.Transport.xhr-polling}\r\n   * @api public\r\n   */\r\n\r\n  function JSONPPolling (socket) {\r\n    io.Transport['xhr-polling'].apply(this, arguments);\r\n\r\n    this.index = io.j.length;\r\n\r\n    var self = this;\r\n\r\n    io.j.push(function (msg) {\r\n      self._(msg);\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Inherits from XHR polling transport.\r\n   */\r\n\r\n  io.util.inherit(JSONPPolling, io.Transport['xhr-polling']);\r\n\r\n  /**\r\n   * Transport name\r\n   *\r\n   * @api public\r\n   */\r\n\r\n  JSONPPolling.prototype.name = 'jsonp-polling';\r\n\r\n  /**\r\n   * Posts a encoded message to the Socket.IO server using an iframe.\r\n   * The iframe is used because script tags can create POST based requests.\r\n   * The iframe is positioned outside of the view so the user does not\r\n   * notice it's existence.\r\n   *\r\n   * @param {String} data A encoded message.\r\n   * @api private\r\n   */\r\n\r\n  JSONPPolling.prototype.post = function (data) {\r\n    var self = this\r\n      , query = io.util.query(\r\n             this.socket.options.query\r\n          , 't='+ (+new Date) + '&i=' + this.index\r\n        );\r\n\r\n    if (!this.form) {\r\n      var form = document.createElement('form')\r\n        , area = document.createElement('textarea')\r\n        , id = this.iframeId = 'socketio_iframe_' + this.index\r\n        , iframe;\r\n\r\n      form.className = 'socketio';\r\n      form.style.position = 'absolute';\r\n      form.style.top = '0px';\r\n      form.style.left = '0px';\r\n      form.style.display = 'none';\r\n      form.target = id;\r\n      form.method = 'POST';\r\n      form.setAttribute('accept-charset', 'utf-8');\r\n      area.name = 'd';\r\n      form.appendChild(area);\r\n      document.body.appendChild(form);\r\n\r\n      this.form = form;\r\n      this.area = area;\r\n    }\r\n\r\n    this.form.action = this.prepareUrl() + query;\r\n\r\n    function complete () {\r\n      initIframe();\r\n      self.socket.setBuffer(false);\r\n    };\r\n\r\n    function initIframe () {\r\n      if (self.iframe) {\r\n        self.form.removeChild(self.iframe);\r\n      }\r\n\r\n      try {\r\n        // ie6 dynamic iframes with target=\"\" support (thanks Chris Lambacher)\r\n        iframe = document.createElement('<iframe name=\"'+ self.iframeId +'\">');\r\n      } catch (e) {\r\n        iframe = document.createElement('iframe');\r\n        iframe.name = self.iframeId;\r\n      }\r\n\r\n      iframe.id = self.iframeId;\r\n\r\n      self.form.appendChild(iframe);\r\n      self.iframe = iframe;\r\n    };\r\n\r\n    initIframe();\r\n\r\n    // we temporarily stringify until we figure out how to prevent\r\n    // browsers from turning `\\n` into `\\r\\n` in form inputs\r\n    this.area.value = io.JSON.stringify(data);\r\n\r\n    try {\r\n      this.form.submit();\r\n    } catch(e) {}\r\n\r\n    if (this.iframe.attachEvent) {\r\n      iframe.onreadystatechange = function () {\r\n        if (self.iframe.readyState == 'complete') {\r\n          complete();\r\n        }\r\n      };\r\n    } else {\r\n      this.iframe.onload = complete;\r\n    }\r\n\r\n    this.socket.setBuffer(true);\r\n  };\r\n\r\n  /**\r\n   * Creates a new JSONP poll that can be used to listen\r\n   * for messages from the Socket.IO server.\r\n   *\r\n   * @api private\r\n   */\r\n\r\n  JSONPPolling.prototype.get = function () {\r\n    var self = this\r\n      , script = document.createElement('script')\r\n      , query = io.util.query(\r\n             this.socket.options.query\r\n          , 't='+ (+new Date) + '&i=' + this.index\r\n        );\r\n\r\n    if (this.script) {\r\n      this.script.parentNode.removeChild(this.script);\r\n      this.script = null;\r\n    }\r\n\r\n    script.async = true;\r\n    script.src = this.prepareUrl() + query;\r\n    script.onerror = function () {\r\n      self.onClose();\r\n    };\r\n\r\n    var insertAt = document.getElementsByTagName('script')[0];\r\n    insertAt.parentNode.insertBefore(script, insertAt);\r\n    this.script = script;\r\n\r\n    if (indicator) {\r\n      setTimeout(function () {\r\n        var iframe = document.createElement('iframe');\r\n        document.body.appendChild(iframe);\r\n        document.body.removeChild(iframe);\r\n      }, 100);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * Callback function for the incoming message stream from the Socket.IO server.\r\n   *\r\n   * @param {String} data The message\r\n   * @api private\r\n   */\r\n\r\n  JSONPPolling.prototype._ = function (msg) {\r\n    this.onData(msg);\r\n    if (this.isOpen) {\r\n      this.get();\r\n    }\r\n    return this;\r\n  };\r\n\r\n  /**\r\n   * The indicator hack only works after onload\r\n   *\r\n   * @param {Socket} socket The socket instance that needs a transport\r\n   * @param {Function} fn The callback\r\n   * @api private\r\n   */\r\n\r\n  JSONPPolling.prototype.ready = function (socket, fn) {\r\n    var self = this;\r\n    if (!indicator) return fn.call(this);\r\n\r\n    io.util.load(function () {\r\n      fn.call(self);\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Checks if browser supports this transport.\r\n   *\r\n   * @return {Boolean}\r\n   * @api public\r\n   */\r\n\r\n  JSONPPolling.check = function () {\r\n    return 'document' in global;\r\n  };\r\n\r\n  /**\r\n   * Check if cross domain requests are supported\r\n   *\r\n   * @returns {Boolean}\r\n   * @api public\r\n   */\r\n\r\n  JSONPPolling.xdomainCheck = function () {\r\n    return true;\r\n  };\r\n\r\n  /**\r\n   * Add the transport to your public io.transports array.\r\n   *\r\n   * @api private\r\n   */\r\n\r\n  io.transports.push('jsonp-polling');\r\n\r\n})(\r\n    'undefined' != typeof io ? io.Transport : module.exports\r\n  , 'undefined' != typeof io ? io : module.parent.exports\r\n  , this\r\n);\r\n\r\nif (typeof define === \"function\" && define.amd) {\r\n  define([], function () { return io; });\r\n}\r\n})();","const SDPTransform = require('sdp-transform');  // eslint-disable-line\r\nconst CandidateInfo = require('./CandidateInfo');\r\nconst CodecInfo = require('./CodecInfo');\r\nconst DTLSInfo = require('./DTLSInfo');\r\nconst ICEInfo = require('./ICEInfo');\r\nconst MediaInfo = require('./MediaInfo');\r\nconst Setup = require('./Setup');\r\nconst Direction = require('./Direction');\r\nconst DirectionWay = require('./DirectionWay');\r\nconst SourceGroupInfo = require('./SourceGroupInfo');\r\nconst SourceInfo = require('./SourceInfo');\r\nconst StreamInfo = require('./StreamInfo');\r\nconst TrackInfo = require('./TrackInfo');\r\nconst TrackEncodingInfo = require('./TrackEncodingInfo');\r\nconst SimulcastInfo = require('./SimulcastInfo');\r\nconst SimulcastStreamInfo = require('./SimulcastStreamInfo');\r\nconst RIDInfo = require('./RIDInfo');\r\n\r\nclass SDPInfo {\r\n  constructor(version) {\r\n    this.version = version || 1;\r\n    this.name = 'sdp-semantic';\r\n    this.streams = new Map();\r\n    this.medias = [];\r\n    this.candidates = [];\r\n    this.connection = null;\r\n    this.ice = null;\r\n    this.dtls = null;\r\n  }\r\n\r\n  clone() {\r\n    const cloned = new SDPInfo(this.version);\r\n    cloned.name = this.name;\r\n    cloned.setConnection(this.connection);\r\n    this.medias.forEach((media) => {\r\n      cloned.addMedia(media.clone());\r\n    });\r\n    this.streams.forEach((stream) => {\r\n      cloned.addStream(stream.clone());\r\n    });\r\n    this.candidates.forEach((candidate) => {\r\n      cloned.addCandidate(candidate.clone());\r\n    });\r\n    cloned.setICE(this.ice.clone());\r\n    cloned.setDTLS(this.dtls.clone());\r\n    return cloned;\r\n  }\r\n\r\n  plain() {\r\n    const plain = {\r\n      version: this.version,\r\n      name: this.name,\r\n      streams: [],\r\n      medias: [],\r\n      candidates: [],\r\n      connection: this.connection,\r\n    };\r\n    this.medias.forEach((media) => {\r\n      plain.medias.push(media.plain());\r\n    });\r\n    this.streams.forEach((stream) => {\r\n      plain.streams.push(stream.plain());\r\n    });\r\n    this.candidates.forEach((candidate) => {\r\n      plain.candidates.push(candidate.plain());\r\n    });\r\n    plain.ice = this.ice && this.ice.plain();\r\n    plain.dtls = this.dtls && this.dtls.plain();\r\n    return plain;\r\n  }\r\n\r\n  setVersion(version) {\r\n    this.version = version;\r\n  }\r\n\r\n  setOrigin(origin) {\r\n    this.origin = origin;\r\n  }\r\n\r\n  setName(name) {\r\n    this.name = name;\r\n  }\r\n\r\n  getConnection() {\r\n    return this.connection;\r\n  }\r\n\r\n  setConnection(connection) {\r\n    this.connection = connection;\r\n  }\r\n\r\n  setTiming(timing) {\r\n    this.timing = timing;\r\n  }\r\n\r\n  addMedia(media) {\r\n    this.medias.push(media);\r\n  }\r\n\r\n  getMedia(type) {\r\n    let result;\r\n    this.medias.forEach((media) => {\r\n      if (media.getType().toLowerCase() === type.toLowerCase()) {\r\n        result = media;\r\n      }\r\n    });\r\n    return result;\r\n  }\r\n\r\n  getMedias(type) {\r\n    if (!type) {\r\n      return this.medias;\r\n    }\r\n    const medias = [];\r\n    this.medias.forEach((media) => {\r\n      if (media.getType().toLowerCase() === type.toLowerCase()) {\r\n        medias.push(media);\r\n      }\r\n    });\r\n    return medias;\r\n  }\r\n\r\n  getMediaById(msid) {\r\n    let result;\r\n    this.medias.forEach((media) => {\r\n      if (media.getId().toLowerCase() === msid.toLowerCase()) {\r\n        result = media;\r\n      }\r\n    });\r\n    return result;\r\n  }\r\n\r\n  getVersion() {\r\n    return this.version;\r\n  }\r\n\r\n  getDTLS() {\r\n    return this.dtls;\r\n  }\r\n\r\n  setDTLS(dtlsInfo) {\r\n    this.dtls = dtlsInfo;\r\n  }\r\n\r\n  getICE() {\r\n    return this.ice;\r\n  }\r\n\r\n  setICE(iceInfo) {\r\n    this.ice = iceInfo;\r\n  }\r\n\r\n  addCandidate(candidate) {\r\n    this.candidates.push(candidate);\r\n  }\r\n\r\n  addCandidates(candidates) {\r\n    candidates.forEach((candidate) => {\r\n      this.addCandidate(candidate);\r\n    });\r\n  }\r\n\r\n  getCandidates() {\r\n    return this.candidates;\r\n  }\r\n\r\n  getStream(id) {\r\n    return this.streams.get(id);\r\n  }\r\n\r\n  getStreams() {\r\n    return this.streams;\r\n  }\r\n\r\n  getFirstStream() {\r\n    if (this.streams.values().length > 0) {\r\n      return this.streams.values()[0];\r\n    }\r\n    return null;\r\n  }\r\n\r\n  addStream(stream) {\r\n    this.streams.set(stream.getId(), stream);\r\n  }\r\n\r\n  removeStream(stream) {\r\n    this.streams.delete(stream.getId());\r\n  }\r\n\r\n  toJSON() {\r\n    const sdp = {\r\n      version: 0,\r\n      media: [],\r\n    };\r\n\r\n    sdp.version = this.version || 0;\r\n    sdp.origin = this.origin || {\r\n      username: '-',\r\n      sessionId: (new Date()).getTime(),\r\n      sessionVersion: this.version,\r\n      netType: 'IN',\r\n      ipVer: 4,\r\n      address: '127.0.0.1',\r\n    };\r\n\r\n    sdp.name = this.name || 'semantic-sdp';\r\n\r\n    sdp.connection = this.getConnection();\r\n    sdp.timing = this.timing || { start: 0, stop: 0 };\r\n\r\n    let ice = this.getICE();\r\n    if (ice) {\r\n      if (ice.isLite()) {\r\n        sdp.icelite = 'ice-lite';\r\n      }\r\n      sdp.iceOptions = ice.getOpts();\r\n      sdp.iceUfrag = ice.getUfrag();\r\n      sdp.icePwd = ice.getPwd();\r\n    }\r\n\r\n    sdp.msidSemantic = this.msidSemantic || { semantic: 'WMS', token: '*' };\r\n    sdp.groups = [];\r\n\r\n    const bundle = { type: 'BUNDLE', mids: [] };\r\n    let dtls = this.getDTLS();\r\n    if (dtls) {\r\n      sdp.fingerprint = {\r\n        type: dtls.getHash(),\r\n        hash: dtls.getFingerprint(),\r\n      };\r\n\r\n      sdp.setup = Setup.toString(dtls.getSetup());\r\n    }\r\n\r\n    this.medias.forEach((media) => {\r\n      const md = {\r\n        type: media.getType(),\r\n        port: media.getPort(),\r\n        protocol: 'UDP/TLS/RTP/SAVPF',\r\n        fmtp: [],\r\n        rtp: [],\r\n        rtcpFb: [],\r\n        ext: [],\r\n        bandwidth: [],\r\n        candidates: [],\r\n        ssrcGroups: [],\r\n        ssrcs: [],\r\n        rids: [],\r\n      };\r\n\r\n      md.direction = Direction.toString(media.getDirection());\r\n\r\n      md.rtcpMux = 'rtcp-mux';\r\n\r\n      md.connection = media.getConnection();\r\n\r\n      md.xGoogleFlag = media.getXGoogleFlag();\r\n\r\n      md.mid = media.getId();\r\n\r\n      bundle.mids.push(media.getId());\r\n      md.rtcp = media.rtcp;\r\n\r\n      if (media.getBitrate() > 0) {\r\n        md.bandwidth.push({\r\n          type: 'AS',\r\n          limit: media.getBitrate(),\r\n        });\r\n      }\r\n\r\n      const candidates = media.getCandidates();\r\n      candidates.forEach((candidate) => {\r\n        md.candidates.push({\r\n          foundation: candidate.getFoundation(),\r\n          component: candidate.getComponentId(),\r\n          transport: candidate.getTransport(),\r\n          priority: candidate.getPriority(),\r\n          ip: candidate.getAddress(),\r\n          port: candidate.getPort(),\r\n          type: candidate.getType(),\r\n          relAddr: candidate.getRelAddr(),\r\n          relPort: candidate.getRelPort(),\r\n          generation: candidate.getGeneration(),\r\n        });\r\n      });\r\n\r\n      ice = media.getICE();\r\n      if (ice) {\r\n        if (ice.isLite()) {\r\n          md.icelite = 'ice-lite';\r\n        }\r\n        md.iceOptions = ice.getOpts();\r\n        md.iceUfrag = ice.getUfrag();\r\n        md.icePwd = ice.getPwd();\r\n        if (ice.isEndOfCandidates()) {\r\n          md.endOfCandidates = ice.isEndOfCandidates();\r\n        }\r\n      }\r\n\r\n      dtls = media.getDTLS();\r\n      if (dtls) {\r\n        md.fingerprint = {\r\n          type: dtls.getHash(),\r\n          hash: dtls.getFingerprint(),\r\n        };\r\n\r\n        md.setup = Setup.toString(dtls.getSetup());\r\n      }\r\n\r\n      if (media.setup) {\r\n        md.setup = Setup.toString(media.setup);\r\n      }\r\n\r\n      media.getCodecs().forEach((codec) => {\r\n        md.rtp.push({\r\n          payload: codec.getType(),\r\n          codec: codec.getCodec(),\r\n          rate: codec.getRate(),\r\n          encoding: codec.getEncoding(),\r\n        });\r\n\r\n        const params = codec.getParams();\r\n        if (Object.keys(params).length > 0) {\r\n          md.fmtp.push({\r\n            payload: codec.getType(),\r\n            config: Object.keys(params)\r\n                          .map(item => item + (params[item] ? `=${params[item]}` : ''))\r\n                          .join(';'),\r\n          });\r\n        }\r\n\r\n        codec.getFeedback().forEach((rtcpFb) => {\r\n          md.rtcpFb.push({\r\n            payload: codec.getType(),\r\n            type: rtcpFb.type,\r\n            subtype: rtcpFb.subtype,\r\n          });\r\n        });\r\n\r\n        if (codec.hasRTX()) {\r\n          md.rtp.push({\r\n            payload: codec.getRTX(),\r\n            codec: 'rtx',\r\n            rate: codec.getRate(),\r\n            encoding: codec.getEncoding(),\r\n          });\r\n          md.fmtp.push({\r\n            payload: codec.getRTX(),\r\n            config: `apt=${codec.getType()}`,\r\n          });\r\n        }\r\n      });\r\n      const payloads = [];\r\n\r\n      md.rtp.forEach((rtp) => {\r\n        payloads.push(rtp.payload);\r\n      });\r\n\r\n      md.payloads = payloads.join(' ');\r\n\r\n      media.getExtensions().forEach((uri, value) => {\r\n        md.ext.push({\r\n          value,\r\n          uri,\r\n        });\r\n      });\r\n\r\n      media.getRIDs().forEach((ridInfo) => {\r\n        const rid = {\r\n          id: ridInfo.getId(),\r\n          direction: DirectionWay.toString(ridInfo.getDirection()),\r\n          params: '',\r\n        };\r\n        if (ridInfo.getFormats().length) {\r\n          rid.params = `pt=${ridInfo.getFormats().join(',')}`;\r\n        }\r\n        ridInfo.getParams().forEach((param, key) => {\r\n          const prefix = rid.params.length ? ';' : '';\r\n          rid.params += `${prefix}${key}=${param}`;\r\n        });\r\n\r\n        md.rids.push(rid);\r\n      });\r\n\r\n      const simulcast = media.getSimulcast();\r\n      const simulcast03 = media.getSimulcast03();\r\n\r\n      if (simulcast) {\r\n        let index = 1;\r\n        md.simulcast = {};\r\n        const send = simulcast.getSimulcastStreams(DirectionWay.SEND);\r\n        const recv = simulcast.getSimulcastStreams(DirectionWay.RECV);\r\n\r\n        if (send && send.length) {\r\n          let list = '';\r\n          send.forEach((stream) => {\r\n            let alternatives = '';\r\n            stream.forEach((entry) => {\r\n              alternatives +=\r\n                (alternatives.length ? ',' : '') + (entry.isPaused() ? '~' : '') + entry.getId();\r\n            });\r\n            list += (list.length ? ';' : '') + alternatives;\r\n          });\r\n          md.simulcast[`dir${index}`] = 'send';\r\n          md.simulcast[`list${index}`] = list;\r\n          index += 1;\r\n        }\r\n\r\n        if (recv && recv.length) {\r\n          let list = [];\r\n          recv.forEach((stream) => {\r\n            let alternatives = '';\r\n            stream.forEach((entry) => {\r\n              alternatives +=\r\n                (alternatives.length ? ',' : '') + (entry.isPaused() ? '~' : '') + entry.getId();\r\n            });\r\n            list += (list.length ? ';' : '') + alternatives;\r\n          });\r\n          md.simulcast[`dir${index}`] = 'recv';\r\n          md.simulcast[`list${index}`] = list;\r\n          index += 1;\r\n        }\r\n      }\r\n\r\n      if (simulcast03) {\r\n        md.simulcast_03 = {\r\n          value: simulcast03.getSimulcastPlainString(),\r\n        };\r\n      }\r\n\r\n      sdp.media.push(md);\r\n    });\r\n    bundle.mids.sort();\r\n    sdp.media.sort((m1, m2) => {\r\n      if (m1.mid < m2.mid) return -1;\r\n      if (m1.mid > m2.mid) return 1;\r\n      return 0;\r\n    });\r\n\r\n    for (const stream of this.streams.values()) { // eslint-disable-line no-restricted-syntax\r\n      for (const track of stream.getTracks().values()) { // eslint-disable-line no-restricted-syntax\r\n        for (const md of sdp.media) { // eslint-disable-line no-restricted-syntax\r\n          // Check if it is unified or plan B\r\n          if (track.getMediaId()) {\r\n            // Unified, check if it is bounded to an specific line\r\n            if (track.getMediaId() === md.mid) {\r\n              track.getSourceGroups().forEach((group) => {\r\n                md.ssrcGroups.push({\r\n                  semantics: group.getSemantics(),\r\n                  ssrcs: group.getSSRCs().join(' '),\r\n                });\r\n              });\r\n\r\n              track.getSSRCs().forEach((source) => {\r\n                md.ssrcs.push({\r\n                  id: source.ssrc,\r\n                  attribute: 'cname',\r\n                  value: source.getCName(),\r\n                });\r\n              });\r\n              if (stream.getId() && track.getId()) {\r\n                md.msid = `${stream.getId()} ${track.getId()}`;\r\n              }\r\n              break;\r\n            }\r\n          } else if (md.type.toLowerCase() === track.getMedia().toLowerCase()) {\r\n            // Plan B\r\n            track.getSourceGroups().forEach((group) => {\r\n              md.ssrcGroups.push({\r\n                semantics: group.getSemantics(),\r\n                ssrcs: group.getSSRCs().join(' '),\r\n              });\r\n            });\r\n\r\n            track.getSSRCs().forEach((source) => {\r\n              md.ssrcs.push({\r\n                id: source.ssrc,\r\n                attribute: 'cname',\r\n                value: source.getCName(),\r\n              });\r\n              if (source.getStreamId() && source.getTrackId()) {\r\n                md.ssrcs.push({\r\n                  id: source.ssrc,\r\n                  attribute: 'msid',\r\n                  value: `${source.getStreamId()} ${source.getTrackId()}`,\r\n                });\r\n              }\r\n              if (source.getMSLabel()) {\r\n                md.ssrcs.push({\r\n                  id: source.ssrc,\r\n                  attribute: 'mslabel',\r\n                  value: source.getMSLabel(),\r\n                });\r\n              }\r\n              if (source.getLabel()) {\r\n                md.ssrcs.push({\r\n                  id: source.ssrc,\r\n                  attribute: 'label',\r\n                  value: source.getLabel(),\r\n                });\r\n              }\r\n            });\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    bundle.mids = bundle.mids.join(' ');\r\n    sdp.groups.push(bundle);\r\n\r\n    return sdp;\r\n  }\r\n\r\n  toString() {\r\n    const sdp = this.toJSON();\r\n    return SDPTransform.write(sdp);\r\n  }\r\n}\r\n\r\nfunction getFormats(mediaInfo, md) {\r\n  const apts = new Map();\r\n\r\n  md.rtp.forEach((fmt) => {\r\n    const type = fmt.payload;\r\n    const codec = fmt.codec;\r\n    const rate = fmt.rate;\r\n    const encoding = fmt.encoding;\r\n\r\n    const params = {};\r\n    const feedback = [];\r\n\r\n    md.fmtp.forEach((fmtp) => {\r\n      if (fmtp.payload === type) {\r\n        const list = fmtp.config.split(';');\r\n        list.forEach((entry) => {\r\n          const param = entry.split('=');\r\n          params[param[0].trim()] = (param[1] || '').trim();\r\n        });\r\n      }\r\n    });\r\n    if (md.rtcpFb) {\r\n      md.rtcpFb.forEach((rtcpFb) => {\r\n        if (rtcpFb.payload === type) {\r\n          feedback.push({ type: rtcpFb.type, subtype: rtcpFb.subtype });\r\n        }\r\n      });\r\n    }\r\n    if (codec.toUpperCase() === 'RTX') {\r\n      apts.set(parseInt(params.apt, 10), type);\r\n    } else {\r\n      mediaInfo.addCodec(new CodecInfo(codec, type, rate, encoding, params, feedback));\r\n    }\r\n  });\r\n\r\n  apts.forEach((apt, id) => {\r\n    const codecInfo = mediaInfo.getCodecForType(id);\r\n    if (codecInfo) {\r\n      codecInfo.setRTX(apt);\r\n    }\r\n  });\r\n}\r\n\r\nfunction getRIDs(mediaInfo, md) {\r\n  const rids = md.rids;\r\n  if (!rids) {\r\n    return;\r\n  }\r\n  rids.forEach((rid) => {\r\n    const ridInfo = new RIDInfo(rid.id, DirectionWay.byValue(rid.direction));\r\n    let formats = [];\r\n    const params = new Map();\r\n    if (rid.params) {\r\n      const list = SDPTransform.parseParams(rid.params);\r\n      Object.keys(list).forEach((key) => {\r\n        if (key === 'pt') {\r\n          formats = list[key].split(',');\r\n        } else {\r\n          params.set(key, list[key]);\r\n        }\r\n      });\r\n      ridInfo.setFormats(formats);\r\n      ridInfo.setParams(params);\r\n    }\r\n    mediaInfo.addRID(ridInfo);\r\n  });\r\n}\r\n\r\nfunction getSimulcastDir(index, md, simulcast) {\r\n  const simulcastDir = md.simulcast[`dir${index}`];\r\n  const simulcastList = md.simulcast[`list${index}`];\r\n  if (simulcastDir) {\r\n    const direction = DirectionWay.byValue(simulcastDir);\r\n    const list = SDPTransform.parseSimulcastStreamList(simulcastList);\r\n    list.forEach((stream) => {\r\n      const alternatives = [];\r\n      stream.forEach((entry) => {\r\n        alternatives.push(new SimulcastStreamInfo(entry.scid, entry.paused));\r\n      });\r\n      simulcast.addSimulcastAlternativeStreams(direction, alternatives);\r\n    });\r\n  }\r\n}\r\n\r\nfunction getSimulcast3Dir(md, simulcast) {\r\n  simulcast.setSimulcastPlainString(md.simulcast_03.value);\r\n}\r\n\r\nfunction getSimulcast(mediaInfo, md) {\r\n  const encodings = [];\r\n  if (md.simulcast) {\r\n    const simulcast = new SimulcastInfo();\r\n    getSimulcastDir('1', md, simulcast);\r\n    getSimulcastDir('2', md, simulcast);\r\n\r\n    simulcast.getSimulcastStreams(DirectionWay.SEND).forEach((streams) => {\r\n      const alternatives = [];\r\n      streams.forEach((stream) => {\r\n        const encoding = new TrackEncodingInfo(stream.getId(), stream.isPaused());\r\n        const ridInfo = mediaInfo.getRID(encoding.getId());\r\n        if (ridInfo) {\r\n          const formats = ridInfo.getFormats();\r\n          formats.forEach((format) => {\r\n            const codecInfo = mediaInfo.getCodecForType(format);\r\n            if (codecInfo) {\r\n              encoding.addCodec(codecInfo);\r\n            }\r\n          });\r\n          encoding.setParams(ridInfo.getParams());\r\n          alternatives.push(encoding);\r\n        }\r\n      });\r\n      if (alternatives.length) {\r\n        encodings.push(alternatives);\r\n      }\r\n    });\r\n\r\n    mediaInfo.setSimulcast(simulcast);\r\n  }\r\n  if (md.simulcast_03) {\r\n    const simulcast = new SimulcastInfo();\r\n    getSimulcast3Dir(md, simulcast);\r\n    mediaInfo.setSimulcast03(simulcast);\r\n  }\r\n  return encodings;\r\n}\r\n\r\nfunction getTracks(encodings, sdpInfo, md) {\r\n  const sources = new Map();\r\n  const media = md.type;\r\n  if (md.ssrcs) {\r\n    let track;\r\n    let stream;\r\n    let source;\r\n    md.ssrcs.forEach((ssrcAttr) => {\r\n      const ssrc = ssrcAttr.id;\r\n      const key = ssrcAttr.attribute;\r\n      const value = ssrcAttr.value;\r\n      source = sources.get(ssrc);\r\n      if (!source) {\r\n        source = new SourceInfo(ssrc);\r\n        sources.set(source.getSSRC(), source);\r\n      }\r\n      if (key.toLowerCase() === 'cname') {\r\n        source.setCName(value);\r\n      } else if (key.toLowerCase() === 'mslabel') {\r\n        source.setMSLabel(value);\r\n      } else if (key.toLowerCase() === 'label') {\r\n        source.setLabel(value);\r\n      } else if (key.toLowerCase() === 'msid') {\r\n        const ids = value.split(' ');\r\n        const streamId = ids[0];\r\n        const trackId = ids[1];\r\n        source.setStreamId(streamId);\r\n        source.setTrackId(trackId);\r\n        stream = sdpInfo.getStream(streamId);\r\n        if (!stream) {\r\n          stream = new StreamInfo(streamId);\r\n          sdpInfo.addStream(stream);\r\n        }\r\n        track = stream.getTrack(trackId);\r\n        if (!track) {\r\n          track = new TrackInfo(media, trackId);\r\n          track.setEncodings(encodings);\r\n          stream.addTrack(track);\r\n        }\r\n        track.addSSRC(source);\r\n      }\r\n    });\r\n  }\r\n\r\n  if (md.msid) {\r\n    const ids = md.msid.split(' ');\r\n    const streamId = ids[0];\r\n    const trackId = ids[1];\r\n\r\n    let stream = sdpInfo.getStream(streamId);\r\n    if (!stream) {\r\n      stream = new StreamInfo(streamId);\r\n      sdpInfo.addStream(stream);\r\n    }\r\n    let track = stream.getTrack(trackId);\r\n    if (!track) {\r\n      track = new TrackInfo(media, trackId);\r\n      track.setMediaId(md.mid);\r\n      track.setEncodings(encodings);\r\n      stream.addTrack(track);\r\n    }\r\n\r\n    sources.forEach((key, ssrc) => {\r\n      const source = sources.get(ssrc);\r\n      if (!source.getStreamId()) {\r\n        source.setStreamId(streamId);\r\n        source.setTrackId(trackId);\r\n        track.addSSRC(source);\r\n      }\r\n    });\r\n  }\r\n\r\n  if (md.ssrcGroups) {\r\n    md.ssrcGroups.forEach((ssrcGroupAttr) => {\r\n      const ssrcs = ssrcGroupAttr.ssrcs.split(' ');\r\n      const group = new SourceGroupInfo(ssrcGroupAttr.semantics, ssrcs);\r\n      const source = sources.get(parseInt(ssrcs[0], 10));\r\n      sdpInfo\r\n        .getStream(source.getStreamId())\r\n        .getTrack(source.getTrackId())\r\n        .addSourceGroup(group);\r\n    });\r\n  }\r\n}\r\n\r\nSDPInfo.processString = (string) => {\r\n  const sdp = SDPTransform.parse(string);\r\n  return SDPInfo.process(sdp);\r\n};\r\n\r\n\r\nSDPInfo.process = (sdp) => {\r\n  const sdpInfo = new SDPInfo();\r\n\r\n  sdpInfo.setVersion(sdp.version);\r\n  sdpInfo.setTiming(sdp.timing);\r\n  sdpInfo.setConnection(sdp.connection);\r\n  sdpInfo.setOrigin(sdp.origin);\r\n  sdpInfo.msidSemantic = sdp.msidSemantic;\r\n  sdpInfo.name = sdp.name;\r\n\r\n  let ufrag = sdp.iceUfrag;\r\n  let pwd = sdp.icePwd;\r\n  let iceOptions = sdp.iceOptions;\r\n  if (ufrag || pwd || iceOptions) {\r\n    sdpInfo.setICE(new ICEInfo(ufrag, pwd, iceOptions));\r\n  }\r\n\r\n  let fingerprintAttr = sdp.fingerprint;\r\n  if (fingerprintAttr) {\r\n    const remoteHash = fingerprintAttr.type;\r\n    const remoteFingerprint = fingerprintAttr.hash;\r\n    let setup = null;\r\n    if (sdp.setup) {\r\n      setup = Setup.byValue(sdp.setup);\r\n    }\r\n\r\n    sdpInfo.setDTLS(new DTLSInfo(setup, remoteHash, remoteFingerprint));\r\n  }\r\n\r\n  sdp.media.forEach((md) => {\r\n    const media = md.type;\r\n    const mid = md.mid;\r\n    const port = md.port;\r\n    const mediaInfo = new MediaInfo(mid, port, media);\r\n    mediaInfo.setXGoogleFlag(md.xGoogleFlag);\r\n    mediaInfo.rtcp = md.rtcp;\r\n    mediaInfo.setConnection(md.connection);\r\n\r\n    if (md.bandwidth && md.bandwidth.length > 0) {\r\n      md.bandwidth.forEach((bandwidth) => {\r\n        if (bandwidth.type === 'AS') {\r\n          mediaInfo.setBitrate(bandwidth.limit);\r\n        }\r\n      });\r\n    }\r\n\r\n    ufrag = md.iceUfrag;\r\n    pwd = md.icePwd;\r\n    iceOptions = md.iceOptions;\r\n    if (ufrag || pwd || iceOptions) {\r\n      const thisIce = new ICEInfo(ufrag, pwd, iceOptions);\r\n      if (md.endOfCandidates) {\r\n        thisIce.setEndOfCandidates('end-of-candidates');\r\n      }\r\n      mediaInfo.setICE(thisIce);\r\n    }\r\n\r\n    fingerprintAttr = md.fingerprint;\r\n    if (fingerprintAttr) {\r\n      const remoteHash = fingerprintAttr.type;\r\n      const remoteFingerprint = fingerprintAttr.hash;\r\n      let setup = Setup.ACTPASS;\r\n      if (md.setup) {\r\n        setup = Setup.byValue(md.setup);\r\n      }\r\n\r\n      mediaInfo.setDTLS(new DTLSInfo(setup, remoteHash, remoteFingerprint));\r\n    }\r\n\r\n    if (md.setup) {\r\n      mediaInfo.setSetup(Setup.byValue(md.setup));\r\n    }\r\n\r\n    let direction = Direction.SENDRECV;\r\n\r\n    if (md.direction) {\r\n      direction = Direction.byValue(md.direction.toUpperCase());\r\n    }\r\n\r\n    mediaInfo.setDirection(direction);\r\n\r\n    const candidates = md.candidates;\r\n    if (candidates) {\r\n      candidates.forEach((candidate) => {\r\n        mediaInfo.addCandidate(new CandidateInfo(candidate.foundation, candidate.component,\r\n          candidate.transport, candidate.priority, candidate.ip, candidate.port, candidate.type,\r\n          candidate.generation, candidate.relAddr, candidate.relPort));\r\n      });\r\n    }\r\n\r\n    getFormats(mediaInfo, md);\r\n\r\n    const extmaps = md.ext;\r\n    if (extmaps) {\r\n      extmaps.forEach((extmap) => {\r\n        mediaInfo.addExtension(extmap.value, extmap.uri);\r\n      });\r\n    }\r\n\r\n    getRIDs(mediaInfo, md);\r\n\r\n    const encodings = getSimulcast(mediaInfo, md);\r\n\r\n    getTracks(encodings, sdpInfo, md);\r\n\r\n    sdpInfo.addMedia(mediaInfo);\r\n  });\r\n  return sdpInfo;\r\n};\r\n\r\nmodule.exports = SDPInfo;\r\n","var parser = require('./parser');\nvar writer = require('./writer');\n\nexports.write = writer;\nexports.parse = parser.parse;\nexports.parseFmtpConfig = parser.parseFmtpConfig;\nexports.parseParams = parser.parseParams;\nexports.parsePayloads = parser.parsePayloads;\nexports.parseRemoteCandidates = parser.parseRemoteCandidates;\nexports.parseImageAttributes = parser.parseImageAttributes;\nexports.parseSimulcastStreamList = parser.parseSimulcastStreamList;\n","var toIntIfInt = function (v) {\n  return String(Number(v)) === v ? Number(v) : v;\n};\n\nvar attachProperties = function (match, location, names, rawName) {\n  if (rawName && !names) {\n    location[rawName] = toIntIfInt(match[1]);\n  }\n  else {\n    for (var i = 0; i < names.length; i += 1) {\n      if (match[i+1] != null) {\n        location[names[i]] = toIntIfInt(match[i+1]);\n      }\n    }\n  }\n};\n\nvar parseReg = function (obj, location, content) {\n  var needsBlank = obj.name && obj.names;\n  if (obj.push && !location[obj.push]) {\n    location[obj.push] = [];\n  }\n  else if (needsBlank && !location[obj.name]) {\n    location[obj.name] = {};\n  }\n  var keyLocation = obj.push ?\n    {} :  // blank object that will be pushed\n    needsBlank ? location[obj.name] : location; // otherwise, named location or root\n\n  attachProperties(content.match(obj.reg), keyLocation, obj.names, obj.name);\n\n  if (obj.push) {\n    location[obj.push].push(keyLocation);\n  }\n};\n\nvar grammar = require('./grammar');\nvar validLine = RegExp.prototype.test.bind(/^([a-z])=(.*)/);\n\nexports.parse = function (sdp) {\n  var session = {}\n    , media = []\n    , location = session; // points at where properties go under (one of the above)\n\n  // parse lines we understand\n  sdp.split(/(\\r\\n|\\r|\\n)/).filter(validLine).forEach(function (l) {\n    var type = l[0];\n    var content = l.slice(2);\n    if (type === 'm') {\n      media.push({rtp: [], fmtp: []});\n      location = media[media.length-1]; // point at latest media line\n    }\n\n    for (var j = 0; j < (grammar[type] || []).length; j += 1) {\n      var obj = grammar[type][j];\n      if (obj.reg.test(content)) {\n        return parseReg(obj, location, content);\n      }\n    }\n  });\n\n  session.media = media; // link it up\n  return session;\n};\n\nvar paramReducer = function (acc, expr) {\n  var s = expr.split(/=(.+)/, 2);\n  if (s.length === 2) {\n    acc[s[0]] = toIntIfInt(s[1]);\n  } else if (s.length === 1 && expr.length > 1) {\n    acc[s[0]] = undefined;\n  }\n  return acc;\n};\n\nexports.parseParams = function (str) {\n  return str.split(/\\;\\s?/).reduce(paramReducer, {});\n};\n\n// For backward compatibility - alias will be removed in 3.0.0\nexports.parseFmtpConfig = exports.parseParams;\n\nexports.parsePayloads = function (str) {\n  return str.split(' ').map(Number);\n};\n\nexports.parseRemoteCandidates = function (str) {\n  var candidates = [];\n  var parts = str.split(' ').map(toIntIfInt);\n  for (var i = 0; i < parts.length; i += 3) {\n    candidates.push({\n      component: parts[i],\n      ip: parts[i + 1],\n      port: parts[i + 2]\n    });\n  }\n  return candidates;\n};\n\nexports.parseImageAttributes = function (str) {\n  return str.split(' ').map(function (item) {\n    return item.substring(1, item.length-1).split(',').reduce(paramReducer, {});\n  });\n};\n\nexports.parseSimulcastStreamList = function (str) {\n  return str.split(';').map(function (stream) {\n    return stream.split(',').map(function (format) {\n      var scid, paused = false;\n\n      if (format[0] !== '~') {\n        scid = toIntIfInt(format);\n      } else {\n        scid = toIntIfInt(format.substring(1, format.length));\n        paused = true;\n      }\n\n      return {\n        scid: scid,\n        paused: paused\n      };\n    });\n  });\n};\n","var grammar = require('./grammar');\n\n// customized util.format - discards excess arguments and can void middle ones\nvar formatRegExp = /%[sdv%]/g;\nvar format = function (formatStr) {\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  return formatStr.replace(formatRegExp, function (x) {\n    if (i >= len) {\n      return x; // missing argument\n    }\n    var arg = args[i];\n    i += 1;\n    switch (x) {\n    case '%%':\n      return '%';\n    case '%s':\n      return String(arg);\n    case '%d':\n      return Number(arg);\n    case '%v':\n      return '';\n    }\n  });\n  // NB: we discard excess arguments - they are typically undefined from makeLine\n};\n\nvar makeLine = function (type, obj, location) {\n  var str = obj.format instanceof Function ?\n    (obj.format(obj.push ? location : location[obj.name])) :\n    obj.format;\n\n  var args = [type + '=' + str];\n  if (obj.names) {\n    for (var i = 0; i < obj.names.length; i += 1) {\n      var n = obj.names[i];\n      if (obj.name) {\n        args.push(location[obj.name][n]);\n      }\n      else { // for mLine and push attributes\n        args.push(location[obj.names[i]]);\n      }\n    }\n  }\n  else {\n    args.push(location[obj.name]);\n  }\n  return format.apply(null, args);\n};\n\n// RFC specified order\n// TODO: extend this with all the rest\nvar defaultOuterOrder = [\n  'v', 'o', 's', 'i',\n  'u', 'e', 'p', 'c',\n  'b', 't', 'r', 'z', 'a'\n];\nvar defaultInnerOrder = ['i', 'c', 'b', 'a'];\n\n\nmodule.exports = function (session, opts) {\n  opts = opts || {};\n  // ensure certain properties exist\n  if (session.version == null) {\n    session.version = 0; // 'v=0' must be there (only defined version atm)\n  }\n  if (session.name == null) {\n    session.name = ' '; // 's= ' must be there if no meaningful name set\n  }\n  session.media.forEach(function (mLine) {\n    if (mLine.payloads == null) {\n      mLine.payloads = '';\n    }\n  });\n\n  var outerOrder = opts.outerOrder || defaultOuterOrder;\n  var innerOrder = opts.innerOrder || defaultInnerOrder;\n  var sdp = [];\n\n  // loop through outerOrder for matching properties on session\n  outerOrder.forEach(function (type) {\n    grammar[type].forEach(function (obj) {\n      if (obj.name in session && session[obj.name] != null) {\n        sdp.push(makeLine(type, obj, session));\n      }\n      else if (obj.push in session && session[obj.push] != null) {\n        session[obj.push].forEach(function (el) {\n          sdp.push(makeLine(type, obj, el));\n        });\n      }\n    });\n  });\n\n  // then for each media line, follow the innerOrder\n  session.media.forEach(function (mLine) {\n    sdp.push(makeLine('m', grammar.m[0], mLine));\n\n    innerOrder.forEach(function (type) {\n      grammar[type].forEach(function (obj) {\n        if (obj.name in mLine && mLine[obj.name] != null) {\n          sdp.push(makeLine(type, obj, mLine));\n        }\n        else if (obj.push in mLine && mLine[obj.push] != null) {\n          mLine[obj.push].forEach(function (el) {\n            sdp.push(makeLine(type, obj, el));\n          });\n        }\n      });\n    });\n  });\n\n  return sdp.join('\\r\\n') + '\\r\\n';\n};\n","class TrackEncodingInfo {\r\n  constructor(id, paused) {\r\n    this.id = id;\r\n    this.paused = paused;\r\n    this.codecs = new Map();\r\n    this.params = new Map();\r\n  }\r\n\r\n  clone() {\r\n    const cloned = new TrackEncodingInfo(this.id, this.paused);\r\n    this.codecs.forEach((codec) => {\r\n      cloned.addCodec(codec.cloned());\r\n    });\r\n    cloned.setParams(this.params);\r\n    return cloned;\r\n  }\r\n\r\n  plain() {\r\n    const plain = {\r\n      id: this.id,\r\n      paused: this.paused,\r\n      codecs: {},\r\n      params: {},\r\n    };\r\n    this.codecs.keys().forEach((id) => {\r\n      plain.codecs[id] = this.codecs.get(id).plain();\r\n    });\r\n    this.params.keys().forEach((id) => {\r\n      plain.params[id] = this.params.get(id).param;\r\n    });\r\n    return plain;\r\n  }\r\n\r\n  getId() {\r\n    return this.id;\r\n  }\r\n\r\n  getCodecs() {\r\n    return this.codecs;\r\n  }\r\n\r\n  addCodec(codec) {\r\n    this.codecs.set(codec.getType(), codec);\r\n  }\r\n\r\n  getParams() {\r\n    return this.params;\r\n  }\r\n\r\n  setParams(params) {\r\n    this.params = new Map(params);\r\n  }\r\n\r\n  isPaused() {\r\n    return this.paused;\r\n  }\r\n}\r\n\r\nmodule.exports = TrackEncodingInfo;\r\n","class SimulcastStreamInfo {\r\n  constructor(id, paused) {\r\n    this.paused = paused;\r\n    this.id = id;\r\n  }\r\n\r\n  clone() {\r\n    return new SimulcastStreamInfo(this.id, this.paused);\r\n  }\r\n\r\n  plain() {\r\n    return {\r\n      id: this.id,\r\n      paused: this.paused,\r\n    };\r\n  }\r\n\r\n  isPaused() {\r\n    return this.paused;\r\n  }\r\n\r\n  getId() {\r\n    return this.id;\r\n  }\r\n}\r\n\r\nmodule.exports = SimulcastStreamInfo;\r\n","const DirectionWay = require('./DirectionWay');\r\n\r\nclass RIDInfo {\r\n  constructor(id, direction) {\r\n    this.id = id;\r\n    this.direction = direction;\r\n    this.formats = [];\r\n    this.params = new Map();\r\n  }\r\n\r\n  clone() {\r\n    const cloned = new RIDInfo(this.id, this.direction);\r\n    cloned.setFormats(this.formats);\r\n    cloned.setParams(this.params);\r\n    return cloned;\r\n  }\r\n\r\n  plain() {\r\n    const plain = {\r\n      id: this.id,\r\n      direction: DirectionWay.toString(this.direction),\r\n      formats: this.formats,\r\n      params: {},\r\n    };\r\n    this.params.forEach((param, id) => {\r\n      plain.params[id] = param;\r\n    });\r\n    return plain;\r\n  }\r\n\r\n  getId() {\r\n    return this.id;\r\n  }\r\n\r\n  getDirection() {\r\n    return this.direction;\r\n  }\r\n\r\n  setDirection(direction) {\r\n    this.direction = direction;\r\n  }\r\n\r\n  getFormats() {\r\n    return this.formats;\r\n  }\r\n\r\n  setFormats(formats) {\r\n    this.formats = [];\r\n    formats.forEach((format) => {\r\n      this.formats.push(parseInt(format, 10));\r\n    });\r\n  }\r\n\r\n  getParams() {\r\n    return this.params;\r\n  }\r\n\r\n  setParams(params) {\r\n    this.params = new Map(params);\r\n  }\r\n}\r\n\r\nmodule.exports = RIDInfo;\r\n","require(\"!!C:\\\\workspace\\\\www\\\\licode\\\\node_modules\\\\script-loader\\\\addScript.js\")(require(\"!!C:\\\\workspace\\\\www\\\\licode\\\\node_modules\\\\raw-loader\\\\index.js!C:\\\\workspace\\\\www\\\\licode\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js??ref--4!C:\\\\workspace\\\\www\\\\licode\\\\erizo_controller\\\\erizoClient\\\\src\\\\utils\\\\L.Resizer.js\"))","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\nmodule.exports = function(src) {\n\tfunction log(error) {\n\t\t(typeof console !== \"undefined\")\n\t\t&& (console.error || console.log)(\"[Script Loader]\", error);\n\t}\n\n\t// Check for IE =< 8\n\tfunction isIE() {\n\t\treturn typeof attachEvent !== \"undefined\" && typeof addEventListener === \"undefined\";\n\t}\n\n\ttry {\n\t\tif (typeof execScript !== \"undefined\" && isIE()) {\n\t\t\texecScript(src);\n\t\t} else if (typeof eval !== \"undefined\") {\n\t\t\teval.call(null, src);\n\t\t} else {\n\t\t\tlog(\"EvalError: No eval function available\");\n\t\t}\n\t} catch (error) {\n\t\tlog(error);\n\t}\n}\n","module.exports = \"/* globals $$, jQuery, Elements, document, window, L */\\n\\n/**\\r\\n* Copyright 2013 Marc J. Schmidt. See the LICENSE file at the top-level\\r\\n* directory of this distribution and at\\r\\n* https://github.com/marcj/css-element-queries/blob/master/LICENSE.\\r\\n*/\\nthis.L = this.L || {};\\n/**\\r\\n * @param {HTMLElement} element\\r\\n * @param {String}      prop\\r\\n * @returns {String|Number}\\r\\n */\\n\\nL.GetComputedStyle = function (computedElement, prop) {\\n  if (computedElement.currentStyle) {\\n    return computedElement.currentStyle[prop];\\n  } else if (window.getComputedStyle) {\\n    return window.getComputedStyle(computedElement, null).getPropertyValue(prop);\\n  }\\n\\n  return computedElement.style[prop];\\n};\\n/**\\r\\n *\\r\\n * @type {Function}\\r\\n * @constructor\\r\\n */\\n\\n\\nL.ElementQueries = function ElementQueries() {\\n  /**\\r\\n   *\\r\\n   * @param element\\r\\n   * @returns {Number}\\r\\n   */\\n  function getEmSize() {\\n    var element = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : document.documentElement;\\n    var fontSize = L.GetComputedStyle(element, 'fontSize');\\n    return parseFloat(fontSize) || 16;\\n  }\\n  /**\\r\\n   *\\r\\n   * @copyright https://github.com/Mr0grog/element-query/blob/master/LICENSE\\r\\n   *\\r\\n   * @param element\\r\\n   * @param value\\r\\n   * @param units\\r\\n   * @returns {*}\\r\\n   */\\n\\n\\n  function convertToPx(element, originalValue) {\\n    var vh;\\n    var vw;\\n    var chooser;\\n    var units = originalValue.replace(/[0-9]*/, '');\\n    var value = parseFloat(originalValue);\\n\\n    switch (units) {\\n      case 'px':\\n        return value;\\n\\n      case 'em':\\n        return value * getEmSize(element);\\n\\n      case 'rem':\\n        return value * getEmSize();\\n      // Viewport units!\\n      // According to http://quirksmode.org/mobile/tableViewport.html\\n      // documentElement.clientWidth/Height gets us the most reliable info\\n\\n      case 'vw':\\n        return value * document.documentElement.clientWidth / 100;\\n\\n      case 'vh':\\n        return value * document.documentElement.clientHeight / 100;\\n\\n      case 'vmin':\\n      case 'vmax':\\n        vw = document.documentElement.clientWidth / 100;\\n        vh = document.documentElement.clientHeight / 100;\\n        chooser = Math[units === 'vmin' ? 'min' : 'max'];\\n        return value * chooser(vw, vh);\\n\\n      default:\\n        return value;\\n      // for now, not supporting physical units (since they are just a set number of px)\\n      // or ex/ch (getting accurate measurements is hard)\\n    }\\n  }\\n  /**\\r\\n   *\\r\\n   * @param {HTMLElement} element\\r\\n   * @constructor\\r\\n   */\\n\\n\\n  function SetupInformation(element) {\\n    var _this = this;\\n\\n    this.element = element;\\n    this.options = [];\\n    var i;\\n    var j;\\n    var option;\\n    var width = 0;\\n    var height = 0;\\n    var value;\\n    var actualValue;\\n    var attrValues;\\n    var attrValue;\\n    var attrName;\\n    /**\\r\\n     * @param option {mode: 'min|max', property: 'width|height', value: '123px'}\\r\\n     */\\n\\n    this.addOption = function (newOption) {\\n      _this.options.push(newOption);\\n    };\\n\\n    var attributes = ['min-width', 'min-height', 'max-width', 'max-height'];\\n    /**\\r\\n     * Extracts the computed width/height and sets to min/max- attribute.\\r\\n     */\\n\\n    this.call = function () {\\n      // extract current dimensions\\n      width = _this.element.offsetWidth;\\n      height = _this.element.offsetHeight;\\n      attrValues = {};\\n\\n      for (i = 0, j = _this.options.length; i < j; i += 1) {\\n        option = _this.options[i];\\n        value = convertToPx(_this.element, option.value);\\n        actualValue = option.property === 'width' ? width : height;\\n        attrName = \\\"\\\".concat(option.mode, \\\"-\\\").concat(option.property);\\n        attrValue = '';\\n\\n        if (option.mode === 'min' && actualValue >= value) {\\n          attrValue += option.value;\\n        }\\n\\n        if (option.mode === 'max' && actualValue <= value) {\\n          attrValue += option.value;\\n        }\\n\\n        if (!attrValues[attrName]) attrValues[attrName] = '';\\n\\n        if (attrValue && \\\" \\\".concat(attrValues[attrName], \\\" \\\").indexOf(\\\" \\\".concat(attrValue, \\\" \\\")) === -1) {\\n          attrValues[attrName] += \\\" \\\".concat(attrValue);\\n        }\\n      }\\n\\n      for (var k = 0; k < attributes.length; k += 1) {\\n        if (attrValues[attributes[k]]) {\\n          _this.element.setAttribute(attributes[k], attrValues[attributes[k]].substr(1));\\n        } else {\\n          _this.element.removeAttribute(attributes[k]);\\n        }\\n      }\\n    };\\n  }\\n  /**\\r\\n   * @param {HTMLElement} element\\r\\n   * @param {Object}      options\\r\\n   */\\n\\n\\n  function setupElement(originalElement, options) {\\n    var element = originalElement;\\n\\n    if (element.elementQueriesSetupInformation) {\\n      element.elementQueriesSetupInformation.addOption(options);\\n    } else {\\n      element.elementQueriesSetupInformation = new SetupInformation(element);\\n      element.elementQueriesSetupInformation.addOption(options);\\n      element.sensor = new L.ResizeSensor(element, function () {\\n        element.elementQueriesSetupInformation.call();\\n      });\\n    }\\n\\n    element.elementQueriesSetupInformation.call();\\n    return element;\\n  }\\n  /**\\r\\n   * @param {String} selector\\r\\n   * @param {String} mode min|max\\r\\n   * @param {String} property width|height\\r\\n   * @param {String} value\\r\\n   */\\n\\n\\n  function queueQuery(selector, mode, property, value) {\\n    var query;\\n    if (document.querySelectorAll) query = document.querySelectorAll.bind(document);\\n    if (!query && typeof $$ !== 'undefined') query = $$;\\n    if (!query && typeof jQuery !== 'undefined') query = jQuery;\\n\\n    if (!query) {\\n      throw new Error('No document.querySelectorAll, jQuery or Mootools\\\\'s $$ found.');\\n    }\\n\\n    var elements = query(selector) || [];\\n\\n    for (var i = 0, j = elements.length; i < j; i += 1) {\\n      elements[i] = setupElement(elements[i], {\\n        mode: mode,\\n        property: property,\\n        value: value\\n      });\\n    }\\n  }\\n\\n  var regex = /,?([^,\\\\n]*)\\\\[[\\\\s\\\\t]*(min|max)-(width|height)[\\\\s\\\\t]*[~$^]?=[\\\\s\\\\t]*\\\"([^\\\"]*)\\\"[\\\\s\\\\t]*]([^\\\\n\\\\s{]*)/mgi; // jshint ignore:line\\n\\n  /**\\r\\n   * @param {String} css\\r\\n   */\\n\\n  function extractQuery(originalCss) {\\n    var match;\\n    var css = originalCss.replace(/'/g, '\\\"');\\n\\n    while ((match = regex.exec(css)) !== null) {\\n      if (match.length > 5) {\\n        queueQuery(match[1] || match[5], match[2], match[3], match[4]);\\n      }\\n    }\\n  }\\n  /**\\r\\n   * @param {CssRule[]|String} rules\\r\\n   */\\n\\n\\n  function readRules(originalRules) {\\n    if (!originalRules) {\\n      return;\\n    }\\n\\n    var selector = '';\\n    var rules = originalRules;\\n\\n    if (typeof originalRules === 'string') {\\n      rules = originalRules.toLowerCase();\\n\\n      if (rules.indexOf('min-width') !== -1 || rules.indexOf('max-width') !== -1) {\\n        extractQuery(rules);\\n      }\\n    } else {\\n      for (var i = 0, j = rules.length; i < j; i += 1) {\\n        if (rules[i].type === 1) {\\n          selector = rules[i].selectorText || rules[i].cssText;\\n\\n          if (selector.indexOf('min-height') !== -1 || selector.indexOf('max-height') !== -1) {\\n            extractQuery(selector);\\n          } else if (selector.indexOf('min-width') !== -1 || selector.indexOf('max-width') !== -1) {\\n            extractQuery(selector);\\n          }\\n        } else if (rules[i].type === 4) {\\n          readRules(rules[i].cssRules || rules[i].rules);\\n        }\\n      }\\n    }\\n  }\\n  /**\\r\\n   * Searches all css rules and setups the event listener\\r\\n   * to all elements with element query rules..\\r\\n   */\\n\\n\\n  this.init = function () {\\n    var styleSheets = document.styleSheets || [];\\n\\n    for (var i = 0, j = styleSheets.length; i < j; i += 1) {\\n      if (Object.prototype.hasOwnProperty.call(styleSheets[i], 'cssText')) {\\n        readRules(styleSheets[i].cssText);\\n      } else if (Object.prototype.hasOwnProperty.call(styleSheets[i], 'cssRules')) {\\n        readRules(styleSheets[i].cssRules);\\n      } else if (Object.prototype.hasOwnProperty.call(styleSheets[i], 'rules')) {\\n        readRules(styleSheets[i].rules);\\n      }\\n    }\\n  };\\n};\\n\\nfunction init() {\\n  new L.ElementQueries().init();\\n}\\n\\nif (window.addEventListener) {\\n  window.addEventListener('load', init, false);\\n} else {\\n  window.attachEvent('onload', init);\\n}\\n/**\\r\\n * Iterate over each of the provided element(s).\\r\\n *\\r\\n * @param {HTMLElement|HTMLElement[]} elements\\r\\n * @param {Function}                  callback\\r\\n */\\n\\n\\nfunction forEachElement(elements) {\\n  var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {};\\n  var elementsType = Object.prototype.toString.call(elements);\\n  var isCollectionTyped = elementsType === '[object Array]' || elementsType === '[object NodeList]' || elementsType === '[object HTMLCollection]' || typeof jQuery !== 'undefined' && elements instanceof jQuery || // jquery\\n  typeof Elements !== 'undefined' && elements instanceof Elements // mootools\\n  ;\\n  var i = 0;\\n  var j = elements.length;\\n\\n  if (isCollectionTyped) {\\n    for (; i < j; i += 1) {\\n      callback(elements[i]);\\n    }\\n  } else {\\n    callback(elements);\\n  }\\n}\\n/**\\r\\n * Class for dimension change detection.\\r\\n *\\r\\n * @param {Element|Element[]|Elements|jQuery} element\\r\\n * @param {Function} callback\\r\\n *\\r\\n * @constructor\\r\\n */\\n\\n\\nL.ResizeSensor = function ResizeSensor(element) {\\n  var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {};\\n\\n  /**\\r\\n   *\\r\\n   * @constructor\\r\\n   */\\n  function EventQueue() {\\n    var q = [];\\n\\n    this.add = function (ev) {\\n      q.push(ev);\\n    };\\n\\n    var i;\\n    var j;\\n\\n    this.call = function () {\\n      for (i = 0, j = q.length; i < j; i += 1) {\\n        q[i].call();\\n      }\\n    };\\n\\n    this.remove = function (ev) {\\n      var newQueue = [];\\n\\n      for (i = 0, j = q.length; i < j; i += 1) {\\n        if (q[i] !== ev) newQueue.push(q[i]);\\n      }\\n\\n      q = newQueue;\\n    };\\n\\n    this.length = function () {\\n      return q.length;\\n    };\\n  }\\n  /**\\r\\n   *\\r\\n   * @param {HTMLElement} element\\r\\n   * @param {Function}    resized\\r\\n   */\\n\\n\\n  function attachResizeEvent(htmlElement, resized) {\\n    // Only used for the dirty checking, so the event callback count is limted\\n    //  to max 1 call per fps per sensor.\\n    // In combination with the event based resize sensor this saves cpu time,\\n    // because the sensor is too fast and\\n    // would generate too many unnecessary events.\\n    var customRequestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || function delay(fn) {\\n      return window.setTimeout(fn, 20);\\n    };\\n\\n    var newElement = htmlElement;\\n\\n    if (!newElement.resizedAttached) {\\n      newElement.resizedAttached = new EventQueue();\\n      newElement.resizedAttached.add(resized);\\n    } else if (newElement.resizedAttached) {\\n      newElement.resizedAttached.add(resized);\\n      return;\\n    }\\n\\n    newElement.resizeSensor = document.createElement('div');\\n    newElement.resizeSensor.className = 'resize-sensor';\\n    var style = 'position: absolute; left: 0; top: 0; right: 0; bottom: 0; ' + 'overflow: hidden; z-index: -1; visibility: hidden;';\\n    var styleChild = 'position: absolute; left: 0; top: 0; transition: 0s;';\\n    newElement.resizeSensor.style.cssText = style;\\n    newElement.resizeSensor.innerHTML = \\\"<div class=\\\\\\\"resize-sensor-expand\\\\\\\" style=\\\\\\\"\\\".concat(style, \\\"\\\\\\\">\\\") + \\\"<div style=\\\\\\\"\\\".concat(styleChild, \\\"\\\\\\\"></div>\\\") + '</div>' + \\\"<div class=\\\\\\\"resize-sensor-shrink\\\\\\\" style=\\\\\\\"\\\".concat(style, \\\"\\\\\\\">\\\") + \\\"<div style=\\\\\\\"\\\".concat(styleChild, \\\" width: 200%; height: 200%\\\\\\\"></div>\\\") + '</div>';\\n    newElement.appendChild(newElement.resizeSensor);\\n\\n    if (L.GetComputedStyle(newElement, 'position') === 'static') {\\n      newElement.style.position = 'relative';\\n    }\\n\\n    var expand = newElement.resizeSensor.childNodes[0];\\n    var expandChild = expand.childNodes[0];\\n    var shrink = newElement.resizeSensor.childNodes[1];\\n\\n    var reset = function reset() {\\n      expandChild.style.width = \\\"\\\".concat(100000, \\\"px\\\");\\n      expandChild.style.height = \\\"\\\".concat(100000, \\\"px\\\");\\n      expand.scrollLeft = 100000;\\n      expand.scrollTop = 100000;\\n      shrink.scrollLeft = 100000;\\n      shrink.scrollTop = 100000;\\n    };\\n\\n    reset();\\n    var dirty = false;\\n\\n    var dirtyChecking = function dirtyChecking() {\\n      if (!newElement.resizedAttached) return;\\n\\n      if (dirty) {\\n        newElement.resizedAttached.call();\\n        dirty = false;\\n      }\\n\\n      customRequestAnimationFrame(dirtyChecking);\\n    };\\n\\n    customRequestAnimationFrame(dirtyChecking);\\n    var lastWidth;\\n    var lastHeight;\\n    var cachedWidth;\\n    var cachedHeight; // useful to not query offsetWidth twice\\n\\n    var onScroll = function onScroll() {\\n      if ((cachedWidth = newElement.offsetWidth) !== lastWidth || (cachedHeight = newElement.offsetHeight) !== lastHeight) {\\n        dirty = true;\\n        lastWidth = cachedWidth;\\n        lastHeight = cachedHeight;\\n      }\\n\\n      reset();\\n    };\\n\\n    var addEvent = function addEvent(el, name, cb) {\\n      if (el.attachEvent) {\\n        el.attachEvent(\\\"on\\\".concat(name), cb);\\n      } else {\\n        el.addEventListener(name, cb);\\n      }\\n    };\\n\\n    addEvent(expand, 'scroll', onScroll);\\n    addEvent(shrink, 'scroll', onScroll);\\n  }\\n\\n  forEachElement(element, function (elem) {\\n    attachResizeEvent(elem, callback);\\n  });\\n\\n  this.detach = function (ev) {\\n    L.ResizeSensor.detach(element, ev);\\n  };\\n};\\n\\nL.ResizeSensor.detach = function (element, ev) {\\n  forEachElement(element, function (elem) {\\n    var elementItem = elem;\\n\\n    if (elementItem.resizedAttached && typeof ev === 'function') {\\n      elementItem.resizedAttached.remove(ev);\\n      if (elementItem.resizedAttached.length()) return;\\n    }\\n\\n    if (elementItem.resizeSensor) {\\n      if (elementItem.contains(elementItem.resizeSensor)) {\\n        elementItem.removeChild(elementItem.resizeSensor);\\n      }\\n\\n      delete elementItem.resizeSensor;\\n      delete elementItem.resizedAttached;\\n    }\\n  });\\n};\"","const SdpHelpers = {};\r\n\r\nSdpHelpers.addSim = (spatialLayers) => {\r\n  let line = 'a=ssrc-group:SIM';\r\n  spatialLayers.forEach((spatialLayerId) => {\r\n    line += ` ${spatialLayerId}`;\r\n  });\r\n  return `${line}\\r\\n`;\r\n};\r\n\r\nSdpHelpers.addGroup = (spatialLayerId, spatialLayerIdRtx) =>\r\n  `a=ssrc-group:FID ${spatialLayerId} ${spatialLayerIdRtx}\\r\\n`;\r\n\r\nSdpHelpers.addSpatialLayer = (cname, msid, mslabel,\r\n  label, spatialLayerId, spatialLayerIdRtx) =>\r\n  `a=ssrc:${spatialLayerId} cname:${cname}\\r\\n` +\r\n  `a=ssrc:${spatialLayerId} msid:${msid}\\r\\n` +\r\n  `a=ssrc:${spatialLayerId} mslabel:${mslabel}\\r\\n` +\r\n  `a=ssrc:${spatialLayerId} label:${label}\\r\\n` +\r\n  `a=ssrc:${spatialLayerIdRtx} cname:${cname}\\r\\n` +\r\n  `a=ssrc:${spatialLayerIdRtx} msid:${msid}\\r\\n` +\r\n  `a=ssrc:${spatialLayerIdRtx} mslabel:${mslabel}\\r\\n` +\r\n  `a=ssrc:${spatialLayerIdRtx} label:${label}\\r\\n`;\r\n\r\nSdpHelpers.setMaxBW = (sdp, spec) => {\r\n  if (!spec.p2p) {\r\n    return;\r\n  }\r\n  if (spec.video && spec.maxVideoBW) {\r\n    const video = sdp.getMedia('video');\r\n    if (video) {\r\n      video.setBitrate(spec.maxVideoBW);\r\n    }\r\n  }\r\n\r\n  if (spec.audio && spec.maxAudioBW) {\r\n    const audio = sdp.getMedia('audio');\r\n    if (audio) {\r\n      audio.setBitrate(spec.maxAudioBW);\r\n    }\r\n  }\r\n};\r\n\r\nSdpHelpers.enableOpusNacks = (sdpInput) => {\r\n  let sdp = sdpInput;\r\n  const sdpMatch = sdp.match(/a=rtpmap:(.*)opus.*\\r\\n/);\r\n  if (sdpMatch !== null) {\r\n    const theLine = `${sdpMatch[0]}a=rtcp-fb:${sdpMatch[1]}nack\\r\\n`;\r\n    sdp = sdp.replace(sdpMatch[0], theLine);\r\n  }\r\n\r\n  return sdp;\r\n};\r\n\r\nSdpHelpers.setParamForCodecs = (sdpInfo, mediaType, paramName, value) => {\r\n  sdpInfo.medias.forEach((mediaInfo) => {\r\n    if (mediaInfo.id === mediaType) {\r\n      mediaInfo.codecs.forEach((codec) => {\r\n        codec.setParam(paramName, value);\r\n      });\r\n    }\r\n  });\r\n};\r\n\r\nexport default SdpHelpers;\r\n","/* global RTCSessionDescription, RTCIceCandidate, RTCPeerConnection */\r\n// eslint-disable-next-line\r\nimport SemanticSdp from '../../../common/semanticSdp/SemanticSdp';\r\n\r\nimport SdpHelpers from '../utils/SdpHelpers';\r\nimport Logger from '../utils/Logger';\r\n\r\nconst BaseStack = (specInput) => {\r\n  const that = {};\r\n  const specBase = specInput;\r\n  const offerQueue = [];\r\n  let localDesc;\r\n  let remoteDesc;\r\n  let localSdp;\r\n  let remoteSdp;\r\n  let processOffer;\r\n  let isNegotiating = false;\r\n  let latestSessionVersion = -1;\r\n\r\n  Logger.info('Starting Base stack', specBase);\r\n\r\n  that.pcConfig = {\r\n    iceServers: [],\r\n    sdpSemantics: 'plan-b',  // WARN: Chrome 72+ will by default use unified-plan\r\n  };\r\n\r\n  that.con = {};\r\n  if (specBase.iceServers !== undefined) {\r\n    that.pcConfig.iceServers = specBase.iceServers;\r\n  }\r\n  if (specBase.forceTurn === true) {\r\n    that.pcConfig.iceTransportPolicy = 'relay';\r\n  }\r\n  that.audio = specBase.audio;\r\n  that.video = specBase.video;\r\n  if (that.audio === undefined) {\r\n    that.audio = true;\r\n  }\r\n  if (that.video === undefined) {\r\n    that.video = true;\r\n  }\r\n  specBase.remoteCandidates = [];\r\n  specBase.localCandidates = [];\r\n  specBase.remoteDescriptionSet = false;\r\n\r\n  that.mediaConstraints = {\r\n    offerToReceiveVideo: (that.video !== undefined && that.video !== false),\r\n    offerToReceiveAudio: (that.audio !== undefined && that.audio !== false),\r\n  };\r\n\r\n  that.peerConnection = new RTCPeerConnection(that.pcConfig, that.con);\r\n\r\n  // Aux functions\r\n\r\n  const errorCallback = (where, errorcb, message) => {\r\n    Logger.error('message:', message, 'in baseStack at', where);\r\n    if (errorcb !== undefined) {\r\n      errorcb('error');\r\n    }\r\n  };\r\n\r\n  const successCallback = (message) => {\r\n    Logger.info('Success in BaseStack', message);\r\n  };\r\n\r\n  const onIceCandidate = (event) => {\r\n    let candidateObject = {};\r\n    const candidate = event.candidate;\r\n    if (!candidate) {\r\n      Logger.info('Gathered all candidates. Sending END candidate');\r\n      candidateObject = {\r\n        sdpMLineIndex: -1,\r\n        sdpMid: 'end',\r\n        candidate: 'end',\r\n      };\r\n    } else {\r\n      candidateObject = {\r\n        sdpMLineIndex: candidate.sdpMLineIndex,\r\n        sdpMid: candidate.sdpMid,\r\n        candidate: candidate.candidate,\r\n      };\r\n      if (!candidateObject.candidate.match(/a=/)) {\r\n        candidateObject.candidate = `a=${candidateObject.candidate}`;\r\n      }\r\n    }\r\n\r\n    if (specBase.remoteDescriptionSet) {\r\n      specBase.callback({ type: 'candidate', candidate: candidateObject });\r\n    } else {\r\n      specBase.localCandidates.push(candidateObject);\r\n      Logger.info('Storing candidate: ', specBase.localCandidates.length, candidateObject);\r\n    }\r\n  };\r\n\r\n  const checkOfferQueue = () => {\r\n    if (!isNegotiating && offerQueue.length > 0) {\r\n      const args = offerQueue.pop();\r\n      if (args[0] === 'local') {\r\n        that.createOffer(args[1], args[2], args[3]);\r\n      } else {\r\n        processOffer(args[1]);\r\n      }\r\n    }\r\n  };\r\n\r\n  const setLocalDescForOffer = (isSubscribe, streamId, sessionDescription) => {\r\n    localDesc = sessionDescription;\r\n    if (!isSubscribe) {\r\n      localDesc.sdp = that.enableSimulcast(localDesc.sdp);\r\n    }\r\n    localSdp = SemanticSdp.SDPInfo.processString(localDesc.sdp);\r\n    SdpHelpers.setMaxBW(localSdp, specBase);\r\n    localDesc.sdp = localSdp.toString();\r\n    that.localSdp = localSdp;\r\n\r\n    specBase.callback({\r\n      type: localDesc.type,\r\n      sdp: localDesc.sdp,\r\n      config: { maxVideoBW: specBase.maxVideoBW },\r\n    }, streamId);\r\n  };\r\n\r\n  const setLocalDescForAnswer = (sessionDescription) => {\r\n    localDesc = sessionDescription;\r\n    localSdp = SemanticSdp.SDPInfo.processString(localDesc.sdp);\r\n    SdpHelpers.setMaxBW(localSdp, specBase);\r\n    localDesc.sdp = localSdp.toString();\r\n    that.localSdp = localSdp;\r\n    specBase.callback({\r\n      type: localDesc.type,\r\n      sdp: localDesc.sdp,\r\n      config: { maxVideoBW: specBase.maxVideoBW },\r\n    });\r\n    Logger.info('Setting local description', localDesc);\r\n    that.peerConnection.setLocalDescription(localDesc).then(() => {\r\n      isNegotiating = false;\r\n      checkOfferQueue();\r\n      successCallback();\r\n    }).catch(errorCallback);\r\n  };\r\n\r\n  processOffer = (message) => {\r\n    const msg = message;\r\n    if (isNegotiating) {\r\n      offerQueue.push(['remote', message]);\r\n      return;\r\n    }\r\n    isNegotiating = true;\r\n    remoteSdp = SemanticSdp.SDPInfo.processString(msg.sdp);\r\n    SdpHelpers.setMaxBW(remoteSdp, specBase);\r\n    msg.sdp = remoteSdp.toString();\r\n    that.remoteSdp = remoteSdp;\r\n    that.peerConnection.setRemoteDescription(msg).then(() => {\r\n      that.peerConnection.createAnswer(that.mediaConstraints)\r\n      .then(setLocalDescForAnswer)\r\n      .catch(errorCallback.bind(null, 'createAnswer', undefined));\r\n      specBase.remoteDescriptionSet = true;\r\n    }).catch(errorCallback.bind(null, 'process Offer', undefined));\r\n  };\r\n\r\n  const processAnswer = (message) => {\r\n    const msg = message;\r\n\r\n    remoteSdp = SemanticSdp.SDPInfo.processString(msg.sdp);\r\n    const sessionVersion = remoteSdp && remoteSdp.origin && remoteSdp.origin.sessionVersion;\r\n    if (latestSessionVersion >= sessionVersion) {\r\n      return;\r\n    }\r\n    Logger.info('Set remote and local description');\r\n    latestSessionVersion = sessionVersion;\r\n\r\n    SdpHelpers.setMaxBW(remoteSdp, specBase);\r\n    that.setStartVideoBW(remoteSdp);\r\n    that.setHardMinVideoBW(remoteSdp);\r\n\r\n    msg.sdp = remoteSdp.toString();\r\n    Logger.debug('Remote Description', msg.sdp);\r\n    Logger.debug('Local Description', localDesc.sdp);\r\n    that.remoteSdp = remoteSdp;\r\n\r\n    remoteDesc = msg;\r\n    that.peerConnection.setLocalDescription(localDesc).then(() => {\r\n      that.peerConnection.setRemoteDescription(new RTCSessionDescription(msg)).then(() => {\r\n        specBase.remoteDescriptionSet = true;\r\n        Logger.info('Candidates to be added: ', specBase.remoteCandidates.length,\r\n                      specBase.remoteCandidates);\r\n        while (specBase.remoteCandidates.length > 0) {\r\n          // IMPORTANT: preserve ordering of candidates\r\n          that.peerConnection.addIceCandidate(specBase.remoteCandidates.shift());\r\n        }\r\n        Logger.info('Local candidates to send:', specBase.localCandidates.length);\r\n        while (specBase.localCandidates.length > 0) {\r\n          // IMPORTANT: preserve ordering of candidates\r\n          specBase.callback({ type: 'candidate', candidate: specBase.localCandidates.shift() });\r\n        }\r\n        isNegotiating = false;\r\n        checkOfferQueue();\r\n      }).catch(errorCallback.bind(null, 'processAnswer', undefined));\r\n    }).catch(errorCallback.bind(null, 'processAnswer', undefined));\r\n  };\r\n\r\n  const processNewCandidate = (message) => {\r\n    const msg = message;\r\n    try {\r\n      let obj;\r\n      if (typeof (msg.candidate) === 'object') {\r\n        obj = msg.candidate;\r\n      } else {\r\n        obj = JSON.parse(msg.candidate);\r\n      }\r\n      if (obj.candidate === 'end') {\r\n        // ignore the end candidate for chrome\r\n        return;\r\n      }\r\n      obj.candidate = obj.candidate.replace(/a=/g, '');\r\n      obj.sdpMLineIndex = parseInt(obj.sdpMLineIndex, 10);\r\n      const candidate = new RTCIceCandidate(obj);\r\n      if (specBase.remoteDescriptionSet) {\r\n        that.peerConnection.addIceCandidate(candidate);\r\n      } else {\r\n        specBase.remoteCandidates.push(candidate);\r\n      }\r\n    } catch (e) {\r\n      Logger.error('Error parsing candidate', msg.candidate);\r\n    }\r\n  };\r\n\r\n  // Peerconnection events\r\n\r\n  that.peerConnection.onicecandidate = onIceCandidate;\r\n  // public functions\r\n\r\n  that.setStartVideoBW = (sdpInput) => {\r\n    Logger.error('startVideoBW not implemented for this browser');\r\n    return sdpInput;\r\n  };\r\n\r\n  that.setHardMinVideoBW = (sdpInput) => {\r\n    Logger.error('hardMinVideoBw not implemented for this browser');\r\n    return sdpInput;\r\n  };\r\n\r\n  that.enableSimulcast = (sdpInput) => {\r\n    Logger.error('Simulcast not implemented');\r\n    return sdpInput;\r\n  };\r\n\r\n  that.close = () => {\r\n    that.state = 'closed';\r\n    that.peerConnection.close();\r\n  };\r\n\r\n  that.setSimulcast = (enable) => {\r\n    that.simulcast = enable;\r\n  };\r\n\r\n  that.setVideo = (video) => {\r\n    that.video = video;\r\n  };\r\n\r\n  that.setAudio = (audio) => {\r\n    that.audio = audio;\r\n  };\r\n\r\n  that.updateSpec = (configInput, streamId, callback = () => {}) => {\r\n    const config = configInput;\r\n    const shouldApplyMaxVideoBWToSdp = specBase.p2p && config.maxVideoBW;\r\n    const shouldSendMaxVideoBWInOptions = !specBase.p2p && config.maxVideoBW;\r\n    if (shouldApplyMaxVideoBWToSdp || config.maxAudioBW) {\r\n      if (config.maxVideoBW) {\r\n        Logger.debug('Maxvideo Requested:', config.maxVideoBW,\r\n                                'limit:', specBase.limitMaxVideoBW);\r\n        if (config.maxVideoBW > specBase.limitMaxVideoBW) {\r\n          config.maxVideoBW = specBase.limitMaxVideoBW;\r\n        }\r\n        specBase.maxVideoBW = config.maxVideoBW;\r\n        Logger.debug('Result', specBase.maxVideoBW);\r\n      }\r\n      if (config.maxAudioBW) {\r\n        if (config.maxAudioBW > specBase.limitMaxAudioBW) {\r\n          config.maxAudioBW = specBase.limitMaxAudioBW;\r\n        }\r\n        specBase.maxAudioBW = config.maxAudioBW;\r\n      }\r\n\r\n      localSdp = SemanticSdp.SDPInfo.processString(localDesc.sdp);\r\n      SdpHelpers.setMaxBW(localSdp, specBase);\r\n      localDesc.sdp = localSdp.toString();\r\n      that.localSdp = localSdp;\r\n\r\n      if (config.Sdp || config.maxAudioBW) {\r\n        Logger.debug('Updating with SDP renegotiation', specBase.maxVideoBW, specBase.maxAudioBW);\r\n        that.peerConnection.setLocalDescription(localDesc)\r\n          .then(() => {\r\n            remoteSdp = SemanticSdp.SDPInfo.processString(remoteDesc.sdp);\r\n            SdpHelpers.setMaxBW(remoteSdp, specBase);\r\n            remoteDesc.sdp = remoteSdp.toString();\r\n            that.remoteSdp = remoteSdp;\r\n            return that.peerConnection.setRemoteDescription(new RTCSessionDescription(remoteDesc));\r\n          }).then(() => {\r\n            specBase.remoteDescriptionSet = true;\r\n            specBase.callback({ type: 'updatestream', sdp: localDesc.sdp }, streamId);\r\n          }).catch(errorCallback.bind(null, 'updateSpec', callback));\r\n      } else {\r\n        Logger.debug('Updating without SDP renegotiation, ' +\r\n                     'newVideoBW:', specBase.maxVideoBW,\r\n                     'newAudioBW:', specBase.maxAudioBW);\r\n        specBase.callback({ type: 'updatestream', sdp: localDesc.sdp }, streamId);\r\n      }\r\n    }\r\n    if (shouldSendMaxVideoBWInOptions ||\r\n        config.minVideoBW ||\r\n        (config.slideShowMode !== undefined) ||\r\n        (config.muteStream !== undefined) ||\r\n        (config.qualityLayer !== undefined) ||\r\n        (config.slideShowBelowLayer !== undefined) ||\r\n        (config.video !== undefined)) {\r\n      Logger.debug('MaxVideoBW Changed to ', config.maxVideoBW);\r\n      Logger.debug('MinVideo Changed to ', config.minVideoBW);\r\n      Logger.debug('SlideShowMode Changed to ', config.slideShowMode);\r\n      Logger.debug('muteStream changed to ', config.muteStream);\r\n      Logger.debug('Video Constraints', config.video);\r\n      Logger.debug('Will activate slideshow when below layer', config.slideShowBelowLayer);\r\n      specBase.callback({ type: 'updatestream', config }, streamId);\r\n    }\r\n  };\r\n\r\n  that.createOffer = (isSubscribe = false, forceOfferToReceive = false, streamId = '') => {\r\n    if (!isSubscribe && !forceOfferToReceive) {\r\n      that.mediaConstraints = {\r\n        offerToReceiveVideo: false,\r\n        offerToReceiveAudio: false,\r\n      };\r\n    }\r\n    if (isNegotiating) {\r\n      offerQueue.push(['local', isSubscribe, forceOfferToReceive, streamId]);\r\n      return;\r\n    }\r\n    isNegotiating = true;\r\n    Logger.debug('Creating offer', that.mediaConstraints, streamId);\r\n    that.peerConnection.createOffer(that.mediaConstraints)\r\n    .then(setLocalDescForOffer.bind(null, isSubscribe, streamId))\r\n    .catch(errorCallback.bind(null, 'Create Offer', undefined));\r\n  };\r\n\r\n  that.addStream = (stream) => {\r\n    that.peerConnection.addStream(stream);\r\n  };\r\n\r\n  that.removeStream = (stream) => {\r\n    that.peerConnection.removeStream(stream);\r\n  };\r\n\r\n  that.processSignalingMessage = (msgInput) => {\r\n    if (msgInput.type === 'offer') {\r\n      processOffer(msgInput);\r\n    } else if (msgInput.type === 'answer') {\r\n      processAnswer(msgInput);\r\n    } else if (msgInput.type === 'candidate') {\r\n      processNewCandidate(msgInput);\r\n    }\r\n  };\r\n\r\n  return that;\r\n};\r\n\r\nexport default BaseStack;\r\n","import BaseStack from './BaseStack';\r\nimport SdpHelpers from './../utils/SdpHelpers';\r\nimport Logger from '../utils/Logger';\r\n\r\nconst ChromeStableStack = (specInput) => {\r\n  Logger.info('Starting Chrome stable stack', specInput);\r\n  const spec = specInput;\r\n  const that = BaseStack(specInput);\r\n  const defaultSimulcastSpatialLayers = 2;\r\n  that.mediaConstraints = {\r\n    offerToReceiveVideo: true,\r\n    offerToReceiveAudio: true,\r\n  };\r\n\r\n  that.enableSimulcast = (sdpInput) => {\r\n    let result;\r\n    let sdp = sdpInput;\r\n    if (!that.simulcast) {\r\n      return sdp;\r\n    }\r\n\r\n    // TODO(javier): Improve the way we check for current video ssrcs\r\n    const matchGroup = sdp.match(/a=ssrc-group:FID ([0-9]*) ([0-9]*)\\r?\\n/);\r\n    if (!matchGroup || (matchGroup.length <= 0)) {\r\n      return sdp;\r\n    }\r\n    // TODO (pedro): Consider adding these to SdpHelpers\r\n    const numSpatialLayers = that.simulcast.numSpatialLayers || defaultSimulcastSpatialLayers;\r\n    const baseSsrc = parseInt(matchGroup[1], 10);\r\n    const baseSsrcRtx = parseInt(matchGroup[2], 10);\r\n    const cname = sdp.match(new RegExp(`a=ssrc:${matchGroup[1]} cname:(.*)\\r?\\n`))[1];\r\n    const msid = sdp.match(new RegExp(`a=ssrc:${matchGroup[1]} msid:(.*)\\r?\\n`))[1];\r\n    const mslabel = sdp.match(new RegExp(`a=ssrc:${matchGroup[1]} mslabel:(.*)\\r?\\n`))[1];\r\n    const label = sdp.match(new RegExp(`a=ssrc:${matchGroup[1]} label:(.*)\\r?\\n`))[1];\r\n\r\n    sdp.match(new RegExp(`a=ssrc:${matchGroup[1]}.*\\r?\\n`, 'g')).forEach((line) => {\r\n      sdp = sdp.replace(line, '');\r\n    });\r\n    sdp.match(new RegExp(`a=ssrc:${matchGroup[2]}.*\\r?\\n`, 'g')).forEach((line) => {\r\n      sdp = sdp.replace(line, '');\r\n    });\r\n\r\n    const spatialLayers = [baseSsrc];\r\n    const spatialLayersRtx = [baseSsrcRtx];\r\n\r\n    for (let i = 1; i < numSpatialLayers; i += 1) {\r\n      spatialLayers.push(baseSsrc + (i * 1000));\r\n      spatialLayersRtx.push(baseSsrcRtx + (i * 1000));\r\n    }\r\n\r\n    result = SdpHelpers.addSim(spatialLayers);\r\n    let spatialLayerId;\r\n    let spatialLayerIdRtx;\r\n    for (let i = 0; i < spatialLayers.length; i += 1) {\r\n      spatialLayerId = spatialLayers[i];\r\n      spatialLayerIdRtx = spatialLayersRtx[i];\r\n      result += SdpHelpers.addGroup(spatialLayerId, spatialLayerIdRtx);\r\n    }\r\n\r\n    for (let i = 0; i < spatialLayers.length; i += 1) {\r\n      spatialLayerId = spatialLayers[i];\r\n      spatialLayerIdRtx = spatialLayersRtx[i];\r\n      result += SdpHelpers.addSpatialLayer(cname,\r\n        msid, mslabel, label, spatialLayerId, spatialLayerIdRtx);\r\n    }\r\n    result += 'a=x-google-flag:conference\\r\\n';\r\n    return sdp.replace(matchGroup[0], result);\r\n  };\r\n\r\n  that.setStartVideoBW = (sdpInfo) => {\r\n    if (that.video && spec.startVideoBW) {\r\n      Logger.debug(`startVideoBW requested: ${spec.startVideoBW}`);\r\n      SdpHelpers.setParamForCodecs(sdpInfo, 'video', 'x-google-start-bitrate', spec.startVideoBW);\r\n    }\r\n  };\r\n\r\n  that.setHardMinVideoBW = (sdpInfo) => {\r\n    if (that.video && spec.hardMinVideoBW) {\r\n      Logger.debug(`hardMinVideoBW requested: ${spec.hardMinVideoBW}`);\r\n      SdpHelpers.setParamForCodecs(sdpInfo, 'video', 'x-google-min-bitrate', spec.hardMinVideoBW);\r\n    }\r\n  };\r\n\r\n  return that;\r\n};\r\n\r\nexport default ChromeStableStack;\r\n","import Logger from '../utils/Logger';\r\nimport BaseStack from './BaseStack';\r\n\r\nconst FirefoxStack = (specInput) => {\r\n  Logger.info('Starting Firefox stack');\r\n  const that = BaseStack(specInput);\r\n  const defaultSimulcastSpatialLayers = 2;\r\n\r\n  const possibleLayers = [\r\n    { rid: 'low', scaleResolutionDownBy: 3 },\r\n    { rid: 'med', scaleResolutionDownBy: 2 },\r\n    { rid: 'high' },\r\n  ];\r\n\r\n  const getSimulcastParameters = (sender) => {\r\n    let numSpatialLayers = that.simulcast.numSpatialLayers || defaultSimulcastSpatialLayers;\r\n    const totalLayers = possibleLayers.length;\r\n    numSpatialLayers = numSpatialLayers < totalLayers ?\r\n                          numSpatialLayers : totalLayers;\r\n    const parameters = sender.getParameters() || {};\r\n    parameters.encodings = [];\r\n\r\n    for (let layer = totalLayers - 1; layer >= totalLayers - numSpatialLayers; layer -= 1) {\r\n      parameters.encodings.push(possibleLayers[layer]);\r\n    }\r\n    return sender.setParameters(parameters);\r\n  };\r\n\r\n  const enableSimulcast = () => {\r\n    if (!that.simulcast) {\r\n      return [];\r\n    }\r\n    const promises = [];\r\n    that.peerConnection.getSenders().forEach((sender) => {\r\n      if (sender.track.kind === 'video') {\r\n        promises.push(getSimulcastParameters(sender));\r\n      }\r\n    });\r\n    return promises;\r\n  };\r\n\r\n  that.enableSimulcast = sdp => sdp;\r\n\r\n  const baseCreateOffer = that.createOffer;\r\n\r\n  that.createOffer = (isSubscribe, forceOfferToReceive = false, streamId = '') => {\r\n    let promises = [];\r\n    if (isSubscribe !== true) {\r\n      promises = enableSimulcast();\r\n    }\r\n    Promise.all(promises).then(() => {\r\n      baseCreateOffer(isSubscribe, forceOfferToReceive, streamId);\r\n    });\r\n  };\r\n\r\n  return that;\r\n};\r\n\r\nexport default FirefoxStack;\r\n","import Logger from '../utils/Logger';\r\n\r\nconst FcStack = (spec) => {\r\n  /*\r\n  spec.callback({\r\n      type: sessionDescription.type,\r\n      sdp: sessionDescription.sdp\r\n  });\r\n  */\r\n  const that = {};\r\n\r\n  that.pcConfig = {};\r\n\r\n  that.peerConnection = {};\r\n  that.desc = {};\r\n  that.signalCallback = undefined;\r\n\r\n  that.close = () => {\r\n    Logger.info('Close FcStack');\r\n  };\r\n\r\n  that.createOffer = () => {\r\n    Logger.debug('FCSTACK: CreateOffer');\r\n  };\r\n\r\n  that.addStream = (stream) => {\r\n    Logger.debug('FCSTACK: addStream', stream);\r\n  };\r\n\r\n  that.processSignalingMessage = (msg) => {\r\n    Logger.debug('FCSTACK: processSignaling', msg);\r\n    if (that.signalCallback !== undefined) { that.signalCallback(msg); }\r\n  };\r\n\r\n  that.sendSignalingMessage = (msg) => {\r\n    Logger.debug('FCSTACK: Sending signaling Message', msg);\r\n    spec.callback(msg);\r\n  };\r\n\r\n  that.setSignalingCallback = (callback = () => {}) => {\r\n    Logger.debug('FCSTACK: Setting signalling callback');\r\n    that.signalCallback = callback;\r\n  };\r\n  return that;\r\n};\r\n\r\nexport default FcStack;\r\n","/* global */\r\nimport Logger from './utils/Logger';\r\n\r\n/*\r\n * Class EventDispatcher provides event handling to sub-classes.\r\n * It is inherited from Publisher, Room, etc.\r\n */\r\nconst EventDispatcher = () => {\r\n  const that = {};\r\n  // Private vars\r\n  const dispatcher = {\r\n    eventListeners: {},\r\n  };\r\n\r\n  // Public functions\r\n\r\n  // It adds an event listener attached to an event type.\r\n  that.addEventListener = (eventType, listener) => {\r\n    if (dispatcher.eventListeners[eventType] === undefined) {\r\n      dispatcher.eventListeners[eventType] = [];\r\n    }\r\n    dispatcher.eventListeners[eventType].push(listener);\r\n  };\r\n\r\n  // It removes an available event listener.\r\n  that.removeEventListener = (eventType, listener) => {\r\n    if (!dispatcher.eventListeners[eventType]) {\r\n      return;\r\n    }\r\n    const index = dispatcher.eventListeners[eventType].indexOf(listener);\r\n    if (index !== -1) {\r\n      dispatcher.eventListeners[eventType].splice(index, 1);\r\n    }\r\n  };\r\n\r\n  // It removes all listeners\r\n  that.removeAllListeners = () => {\r\n    dispatcher.eventListeners = {};\r\n  };\r\n\r\n  // It dispatch a new event to the event listeners, based on the type\r\n  // of event. All events are intended to be LicodeEvents.\r\n  that.dispatchEvent = (event) => {\r\n    if (!event || !event.type) {\r\n      throw new Error('Undefined event');\r\n    }\r\n    Logger.debug(`Event: ${event.type}`);\r\n    const listeners = dispatcher.eventListeners[event.type] || [];\r\n    for (let i = 0; i < listeners.length; i += 1) {\r\n      listeners[i](event);\r\n    }\r\n  };\r\n\r\n  that.on = that.addEventListener;\r\n  that.off = that.removeEventListener;\r\n  that.emit = that.dispatchEvent;\r\n\r\n  return that;\r\n};\r\n\r\nclass EventEmitter {\r\n  constructor() {\r\n    this.emitter = EventDispatcher();\r\n  }\r\n  addEventListener(eventType, listener) {\r\n    this.emitter.addEventListener(eventType, listener);\r\n  }\r\n  removeEventListener(eventType, listener) {\r\n    this.emitter.removeEventListener(eventType, listener);\r\n  }\r\n  dispatchEvent(evt) {\r\n    this.emitter.dispatchEvent(evt);\r\n  }\r\n  on(eventType, listener) {\r\n    this.addEventListener(eventType, listener);\r\n  }\r\n  off(eventType, listener) {\r\n    this.removeEventListener(eventType, listener);\r\n  }\r\n  emit(evt) {\r\n    this.dispatchEvent(evt);\r\n  }\r\n}\r\n\r\n\r\n// **** EVENTS ****\r\n\r\n/*\r\n * Class LicodeEvent represents a generic Event in the library.\r\n * It handles the type of event, that is important when adding\r\n * event listeners to EventDispatchers and dispatching new events.\r\n * A LicodeEvent can be initialized this way:\r\n * var event = LicodeEvent({type: \"room-connected\"});\r\n */\r\nconst LicodeEvent = (spec) => {\r\n  const that = {};\r\n\r\n  // Event type. Examples are: 'room-connected', 'stream-added', etc.\r\n  that.type = spec.type;\r\n\r\n  return that;\r\n};\r\n\r\n/*\r\n * Class ConnectionEvent represents an Event that happens in a Room. It is a\r\n * LicodeEvent.\r\n * It is usually initialized as:\r\n * var roomEvent = RoomEvent({type:\"stream-added\", streams:[stream1, stream2]});\r\n * Event types:\r\n * 'stream-added' - a stream has been added to the connection.\r\n * 'stream-removed' - a stream has been removed from the connection.\r\n * 'ice-state-change' - ICE state changed\r\n */\r\nconst ConnectionEvent = (spec) => {\r\n  const that = LicodeEvent(spec);\r\n\r\n  that.stream = spec.stream;\r\n  that.state = spec.state;\r\n\r\n  return that;\r\n};\r\n\r\n/*\r\n * Class RoomEvent represents an Event that happens in a Room. It is a\r\n * LicodeEvent.\r\n * It is usually initialized as:\r\n * var roomEvent = RoomEvent({type:\"room-connected\", streams:[stream1, stream2]});\r\n * Event types:\r\n * 'room-connected' - points out that the user has been successfully connected to the room.\r\n * 'room-disconnected' - shows that the user has been already disconnected.\r\n */\r\nconst RoomEvent = (spec) => {\r\n  const that = LicodeEvent(spec);\r\n\r\n  // A list with the streams that are published in the room.\r\n  that.streams = spec.streams;\r\n  that.message = spec.message;\r\n\r\n  return that;\r\n};\r\n\r\n/*\r\n * Class StreamEvent represents an event related to a stream. It is a LicodeEvent.\r\n * It is usually initialized this way:\r\n * var streamEvent = StreamEvent({type:\"stream-added\", stream:stream1});\r\n * Event types:\r\n * 'stream-added' - indicates that there is a new stream available in the room.\r\n * 'stream-removed' - shows that a previous available stream has been removed from the room.\r\n */\r\nconst StreamEvent = (spec) => {\r\n  const that = LicodeEvent(spec);\r\n\r\n  // The stream related to this event.\r\n  that.stream = spec.stream;\r\n\r\n  that.msg = spec.msg;\r\n  that.bandwidth = spec.bandwidth;\r\n  that.attrs = spec.attrs;\r\n\r\n  return that;\r\n};\r\n\r\n/*\r\n * Class PublisherEvent represents an event related to a publisher. It is a LicodeEvent.\r\n * It usually initializes as:\r\n * var publisherEvent = PublisherEvent({})\r\n * Event types:\r\n * 'access-accepted' - indicates that the user has accepted to share his camera and microphone\r\n */\r\nconst PublisherEvent = (spec) => {\r\n  const that = LicodeEvent(spec);\r\n\r\n  return that;\r\n};\r\n\r\nexport { EventDispatcher, EventEmitter, LicodeEvent, RoomEvent, StreamEvent, PublisherEvent,\r\n  ConnectionEvent };\r\n","/* global unescape */\r\n\r\nconst ErizoMap = () => {\r\n  const that = {};\r\n  let values = {};\r\n\r\n  that.add = (id, value) => {\r\n    values[id] = value;\r\n  };\r\n\r\n  that.get = id => values[id];\r\n\r\n  that.has = id => values[id] !== undefined;\r\n\r\n  that.size = () => Object.keys(values).length;\r\n\r\n  that.forEach = (func) => {\r\n    const keys = Object.keys(values);\r\n    for (let index = 0; index < keys.length; index += 1) {\r\n      const key = keys[index];\r\n      const value = values[key];\r\n      func(value, key);\r\n    }\r\n  };\r\n\r\n  that.keys = () => Object.keys(values);\r\n\r\n  that.remove = (id) => {\r\n    delete values[id];\r\n  };\r\n\r\n  that.clear = () => {\r\n    values = {};\r\n  };\r\n\r\n  return that;\r\n};\r\n\r\nexport default ErizoMap;\r\n","/* global */\r\nimport ChromeStableStack from './webrtc-stacks/ChromeStableStack';\r\nimport FirefoxStack from './webrtc-stacks/FirefoxStack';\r\nimport FcStack from './webrtc-stacks/FcStack';\r\nimport Logger from './utils/Logger';\r\nimport { EventEmitter, ConnectionEvent } from './Events';\r\nimport ErizoMap from './utils/ErizoMap';\r\nimport ConnectionHelpers from './utils/ConnectionHelpers';\r\n\r\nconst EventEmitterConst = EventEmitter; // makes google-closure-compiler happy\r\nlet ErizoSessionId = 103;\r\n\r\nclass ErizoConnection extends EventEmitterConst {\r\n  constructor(specInput, erizoId = undefined) {\r\n    super();\r\n    Logger.debug('Building a new Connection');\r\n    this.stack = {};\r\n\r\n    this.erizoId = erizoId;\r\n    this.streamsMap = ErizoMap(); // key:streamId, value: stream\r\n\r\n    const spec = specInput;\r\n    ErizoSessionId += 1;\r\n    spec.sessionId = ErizoSessionId;\r\n    this.sessionId = ErizoSessionId;\r\n\r\n    if (!spec.streamRemovedListener) {\r\n      spec.streamRemovedListener = () => {};\r\n    }\r\n    this.streamRemovedListener = spec.streamRemovedListener;\r\n\r\n    // Check which WebRTC Stack is installed.\r\n    this.browser = ConnectionHelpers.getBrowser();\r\n    if (this.browser === 'fake') {\r\n      Logger.warning('Publish/subscribe video/audio streams not supported in erizofc yet');\r\n      this.stack = FcStack(spec);\r\n    } else if (this.browser === 'mozilla') {\r\n      Logger.debug('Firefox Stack');\r\n      this.stack = FirefoxStack(spec);\r\n    } else if (this.browser === 'safari') {\r\n      Logger.debug('Safari using Chrome Stable Stack');\r\n      this.stack = ChromeStableStack(spec);\r\n    } else if (this.browser === 'chrome-stable' || this.browser === 'electron') {\r\n      Logger.debug('Chrome Stable Stack');\r\n      this.stack = ChromeStableStack(spec);\r\n    } else {\r\n      Logger.error('No stack available for this browser');\r\n      throw new Error('WebRTC stack not available');\r\n    }\r\n    if (!this.stack.updateSpec) {\r\n      this.stack.updateSpec = (newSpec, callback = () => {}) => {\r\n        Logger.error('Update Configuration not implemented in this browser');\r\n        callback('unimplemented');\r\n      };\r\n    }\r\n    if (!this.stack.setSignallingCallback) {\r\n      this.stack.setSignallingCallback = () => {\r\n        Logger.error('setSignallingCallback is not implemented in this stack');\r\n      };\r\n    }\r\n\r\n    // PeerConnection Events\r\n    if (this.stack.peerConnection) {\r\n      this.peerConnection = this.stack.peerConnection; // For backwards compatibility\r\n      this.stack.peerConnection.onaddstream = (evt) => {\r\n        this.emit(ConnectionEvent({ type: 'add-stream', stream: evt.stream }));\r\n      };\r\n\r\n      this.stack.peerConnection.onremovestream = (evt) => {\r\n        this.emit(ConnectionEvent({ type: 'remove-stream', stream: evt.stream }));\r\n        this.streamRemovedListener(evt.stream.id);\r\n      };\r\n\r\n      this.stack.peerConnection.oniceconnectionstatechange = () => {\r\n        const state = this.stack.peerConnection.iceConnectionState;\r\n        this.emit(ConnectionEvent({ type: 'ice-state-change', state }));\r\n      };\r\n    }\r\n  }\r\n\r\n  close() {\r\n    Logger.debug('Closing ErizoConnection');\r\n    this.streamsMap.clear();\r\n    this.stack.close();\r\n  }\r\n\r\n  createOffer(isSubscribe, forceOfferToReceive, streamId) {\r\n    this.stack.createOffer(isSubscribe, forceOfferToReceive, streamId);\r\n  }\r\n\r\n  addStream(stream) {\r\n    Logger.debug(`message: Adding stream to Connection, streamId: ${stream.getID()}`);\r\n    this.streamsMap.add(stream.getID(), stream);\r\n    if (stream.local) {\r\n      this.stack.addStream(stream.stream);\r\n    }\r\n  }\r\n\r\n  removeStream(stream) {\r\n    const streamId = stream.getID();\r\n    if (!this.streamsMap.has(streamId)) {\r\n      Logger.warning(`message: Cannot remove stream not in map, streamId: ${streamId}`);\r\n      return;\r\n    }\r\n    if (stream.local) {\r\n      this.stack.removeStream(stream.stream);\r\n    } else if (this.streamsMap.size() === 1) {\r\n      this.streamRemovedListener(stream.getLabel());\r\n    }\r\n    this.streamsMap.remove(streamId);\r\n  }\r\n\r\n  processSignalingMessage(msg) {\r\n    this.stack.processSignalingMessage(msg);\r\n  }\r\n\r\n  sendSignalingMessage(msg) {\r\n    this.stack.sendSignalingMessage(msg);\r\n  }\r\n\r\n  setSimulcast(enable) {\r\n    this.stack.setSimulcast(enable);\r\n  }\r\n\r\n  setVideo(video) {\r\n    this.stack.setVideo(video);\r\n  }\r\n\r\n  setAudio(audio) {\r\n    this.stack.setAudio(audio);\r\n  }\r\n\r\n  updateSpec(configInput, streamId, callback) {\r\n    this.stack.updateSpec(configInput, streamId, callback);\r\n  }\r\n}\r\n\r\nclass ErizoConnectionManager {\r\n  constructor() {\r\n    this.ErizoConnectionsMap = new Map(); // key: erizoId, value: {connectionId: connection}\r\n  }\r\n\r\n  getOrBuildErizoConnection(specInput, erizoId = undefined, singlePC = false) {\r\n    Logger.debug(`message: getOrBuildErizoConnection, erizoId: ${erizoId}`);\r\n    let connection = {};\r\n\r\n    if (erizoId === undefined) {\r\n      // we have no erizoJS id - p2p\r\n      return new ErizoConnection(specInput);\r\n    }\r\n    if (singlePC) {\r\n      let connectionEntry;\r\n      if (this.ErizoConnectionsMap.has(erizoId)) {\r\n        connectionEntry = this.ErizoConnectionsMap.get(erizoId);\r\n      } else {\r\n        connectionEntry = {};\r\n        this.ErizoConnectionsMap.set(erizoId, connectionEntry);\r\n      }\r\n      if (!connectionEntry['single-pc']) {\r\n        connectionEntry['single-pc'] = new ErizoConnection(specInput, erizoId);\r\n      }\r\n      connection = connectionEntry['single-pc'];\r\n    } else {\r\n      connection = new ErizoConnection(specInput, erizoId);\r\n      if (this.ErizoConnectionsMap.has(erizoId)) {\r\n        this.ErizoConnectionsMap.get(erizoId)[connection.sessionId] = connection;\r\n      } else {\r\n        const connectionEntry = {};\r\n        connectionEntry[connection.sessionId] = connection;\r\n        this.ErizoConnectionsMap.set(erizoId, connectionEntry);\r\n      }\r\n    }\r\n    if (specInput.simulcast) {\r\n      connection.setSimulcast(specInput.simulcast);\r\n    }\r\n    if (specInput.video) {\r\n      connection.setVideo(specInput.video);\r\n    }\r\n    if (specInput.audio) {\r\n      connection.setVideo(specInput.audio);\r\n    }\r\n\r\n    return connection;\r\n  }\r\n\r\n  maybeCloseConnection(connection) {\r\n    Logger.debug(`Trying to remove connection ${connection.sessionId}\r\n       with erizoId ${connection.erizoId}`);\r\n    if (connection.streamsMap.size() === 0) {\r\n      connection.close();\r\n      if (this.ErizoConnectionsMap.get(connection.erizoId) !== undefined) {\r\n        delete this.ErizoConnectionsMap.get(connection.erizoId)['single-pc'];\r\n        delete this.ErizoConnectionsMap.get(connection.erizoId)[connection.sessionId];\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default ErizoConnectionManager;\r\n","/* global */\r\n\r\nimport io from '../lib/socket.io';\r\nimport Logger from './utils/Logger';\r\n\r\nimport { EventDispatcher, LicodeEvent } from './Events';\r\n\r\nconst SocketEvent = (type, specInput) => {\r\n  const that = LicodeEvent({ type });\r\n  that.args = specInput.args;\r\n  return that;\r\n};\r\n\r\n/*\r\n * Class Stream represents a local or a remote Stream in the Room. It will handle the WebRTC\r\n * stream and identify the stream and where it should be drawn.\r\n */\r\nconst Socket = (newIo) => {\r\n  const that = EventDispatcher();\r\n  const defaultCallback = () => {};\r\n  const messageBuffer = [];\r\n\r\n  that.CONNECTED = Symbol('connected');\r\n  that.RECONNECTING = Symbol('reconnecting');\r\n  that.DISCONNECTED = Symbol('disconnected');\r\n\r\n  const WEBSOCKET_NORMAL_CLOSURE = 1000;\r\n  that.state = that.DISCONNECTED;\r\n  that.IO = newIo === undefined ? io : newIo;\r\n\r\n  let socket;\r\n\r\n  const emit = (type, ...args) => {\r\n    that.emit(SocketEvent(type, { args }));\r\n  };\r\n\r\n  const addToBuffer = (type, message, callback, error) => {\r\n    messageBuffer.push([type, message, callback, error]);\r\n  };\r\n\r\n  const flushBuffer = () => {\r\n    if (that.state !== that.CONNECTED) {\r\n      return;\r\n    }\r\n    messageBuffer.forEach((message) => {\r\n      that.sendMessage(...message);\r\n    });\r\n  };\r\n\r\n  that.connect = (token, userOptions, callback = defaultCallback, error = defaultCallback) => {\r\n    const options = {\r\n      reconnection: true,\r\n      reconnectionAttempts: 3,\r\n      secure: token.secure,\r\n      forceNew: true,\r\n      transports: ['websocket'],\r\n      rejectUnauthorized: false,\r\n    };\r\n    const transport = token.secure ? 'wss://' : 'ws://';\r\n    const host = token.host;\r\n    socket = that.IO.connect(transport + host, options);\r\n\r\n    // Hack to know the exact reason of the WS closure (socket.io does not publish it)\r\n    let closeCode = WEBSOCKET_NORMAL_CLOSURE;\r\n    try {\r\n      const socketOnCloseFunction = socket.io.engine.transport.ws.onclose;\r\n      socket.io.engine.transport.ws.onclose = (closeEvent) => {\r\n        Logger.warning('WebSocket closed, code:', closeEvent.code);\r\n        closeCode = closeEvent.code;\r\n        socketOnCloseFunction(closeEvent);\r\n      };\r\n    } catch(e) {\r\n      Logger.debug('Error during overriding socket ws onclose method', e, socket);\r\n    }\r\n    that.socket = socket;\r\n    socket.on('onAddStream', emit.bind(that, 'onAddStream'));\r\n\r\n    socket.on('signaling_message_erizo', emit.bind(that, 'signaling_message_erizo'));\r\n    socket.on('signaling_message_peer', emit.bind(that, 'signaling_message_peer'));\r\n    socket.on('publish_me', emit.bind(that, 'publish_me'));\r\n    socket.on('unpublish_me', emit.bind(that, 'unpublish_me'));\r\n    socket.on('onBandwidthAlert', emit.bind(that, 'onBandwidthAlert'));\r\n\r\n    // We receive an event of new data in one of the streams\r\n    socket.on('onDataStream', emit.bind(that, 'onDataStream'));\r\n\r\n    // We receive an event of new data in one of the streams\r\n    socket.on('onUpdateAttributeStream', emit.bind(that, 'onUpdateAttributeStream'));\r\n\r\n    // We receive an event of a stream removed from the room\r\n    socket.on('onRemoveStream', emit.bind(that, 'onRemoveStream'));\r\n\r\n    // The socket has disconnected\r\n    socket.on('disconnect', (reason) => {\r\n      Logger.debug('disconnect', that.id, reason);\r\n      if (closeCode !== WEBSOCKET_NORMAL_CLOSURE) {\r\n        that.state = that.RECONNECTING;\r\n        return;\r\n      }\r\n      emit('disconnect', reason);\r\n      socket.close();\r\n    });\r\n\r\n    socket.on('connection_failed', (evt) => {\r\n      Logger.error('connection failed, id:', that.id);\r\n      emit('connection_failed', evt);\r\n    });\r\n    socket.on('error', (err) => {\r\n      Logger.warning('socket error, id:', that.id, ', error:', err.message);\r\n      emit('error');\r\n    });\r\n    socket.on('connect_error', (err) => {\r\n      Logger.warning('connect error, id:', that.id, ', error:', err.message);\r\n    });\r\n\r\n    socket.on('connect_timeout', (err) => {\r\n      Logger.warning('connect timeout, id:', that.id, ', error:', err.message);\r\n    });\r\n\r\n    socket.on('reconnecting', (attemptNumber) => {\r\n      Logger.debug('reconnecting, id:', that.id, ', attempet:', attemptNumber);\r\n    });\r\n\r\n    socket.on('reconnect', (attemptNumber) => {\r\n      Logger.debug('reconnected, id:', that.id, ', attempet:', attemptNumber);\r\n      that.state = that.CONNECTED;\r\n      socket.emit('reconnected', that.id);\r\n      flushBuffer();\r\n    });\r\n\r\n    socket.on('reconnect_attempt', (attemptNumber) => {\r\n      Logger.debug('reconnect attempt, id:', that.id, ', attempet:', attemptNumber);\r\n    });\r\n\r\n    socket.on('reconnect_error', (err) => {\r\n      Logger.debug('error reconnecting, id:', that.id, ', error:', err.message);\r\n    });\r\n\r\n    socket.on('reconnect_failed', () => {\r\n      Logger.warning('reconnect failed, id:', that.id);\r\n      that.state = that.DISCONNECTED;\r\n      emit('disconnect', 'reconnect failed');\r\n    });\r\n\r\n    // First message with the token\r\n    const message = userOptions;\r\n    message.token = token;\r\n    that.sendMessage('token', message, (response) => {\r\n      that.state = that.CONNECTED;\r\n      that.id = response.clientId;\r\n      callback(response);\r\n    }, error);\r\n  };\r\n\r\n  that.disconnect = () => {\r\n    that.state = that.DISCONNECTED;\r\n    socket.disconnect();\r\n  };\r\n\r\n  // Function to send a message to the server using socket.io\r\n  that.sendMessage = (type, msg, callback = defaultCallback, error = defaultCallback) => {\r\n    if (that.state === that.DISCONNECTED && type !== 'token') {\r\n      Logger.error('Trying to send a message over a disconnected Socket');\r\n      return;\r\n    }\r\n    if (that.state === that.RECONNECTING) {\r\n      addToBuffer(type, msg, callback, error);\r\n      return;\r\n    }\r\n    socket.emit(type, msg, (respType, resp) => {\r\n      if (respType === 'success') {\r\n        callback(resp);\r\n      } else if (respType === 'error') {\r\n        error(resp);\r\n      } else {\r\n        callback(respType, resp);\r\n      }\r\n    });\r\n  };\r\n\r\n  // It sends a SDP message to the server using socket.io\r\n  that.sendSDP = (type, options, sdp, callback = defaultCallback) => {\r\n    if (that.state === that.DISCONNECTED) {\r\n      Logger.error('Trying to send a message over a disconnected Socket');\r\n      return;\r\n    }\r\n    socket.emit(type, options, sdp, (...args) => {\r\n      callback(...args);\r\n    });\r\n  };\r\n  return that;\r\n};\r\n\r\nexport { SocketEvent, Socket };\r\n","/*\r\n * View class represents a HTML component\r\n * Every view is an EventDispatcher.\r\n */\r\n\r\nimport { EventDispatcher } from '../Events';\r\n\r\nconst View = () => {\r\n  const that = EventDispatcher({});\r\n\r\n  // Variables\r\n\r\n  // URL where it will look for icons and assets\r\n  /*global App*/\r\n  that.url = App && App.staticUrl + \"assets/img/weedeo\";\r\n  return that;\r\n};\r\n\r\nexport default View;\r\n","/* global document */\r\n\r\nimport View from './View';\r\n\r\n/*\r\n * Speaker represents the volume icon that will be shown in the mediaPlayer, for example.\r\n * It manages the volume level of the media tag given in the constructor.\r\n * Every Speaker is a View.\r\n * Ex.: var speaker = Speaker({elementID: element, media: mediaTag, id: id});\r\n */\r\nconst Speaker = (spec) => {\r\n  const that = View({});\r\n  let lastVolume = 50;\r\n\r\n  const mute = () => {\r\n    that.media.muted = true;\r\n    that.icon.setAttribute('src', `${that.url}/assets/mute48.png`);\r\n    if (that.stream.local) {\r\n      that.stream.stream.getAudioTracks()[0].enabled = false;\r\n    } else {\r\n      lastVolume = that.picker.value;\r\n      that.picker.value = 0;\r\n      that.media.volume = 0;\r\n    }\r\n  };\r\n\r\n  const unmute = () => {\r\n    that.media.muted = false;\r\n    that.icon.setAttribute('src', `${that.url}/assets/sound48.png`);\r\n    if (that.stream.local) {\r\n      that.stream.stream.getAudioTracks()[0].enabled = true;\r\n    } else {\r\n      that.picker.value = lastVolume;\r\n      that.media.volume = that.picker.value / 100;\r\n    }\r\n  };\r\n\r\n  // Variables\r\n\r\n  // DOM element in which the Speaker will be appended\r\n  that.elementID = spec.elementID;\r\n\r\n  // media tag\r\n  that.media = spec.media;\r\n\r\n  // Speaker id\r\n  that.id = spec.id;\r\n\r\n  // MediaStream\r\n  that.stream = spec.stream;\r\n\r\n  // Container\r\n  that.div = document.createElement('div');\r\n  that.div.setAttribute('style', 'width: 40%; height: 100%; max-width: 32px; ' +\r\n                                   'position: absolute; right: 0;z-index:0;');\r\n\r\n  // Volume icon\r\n  that.icon = document.createElement('img');\r\n  that.icon.setAttribute('id', `volume_${that.id}`);\r\n  that.icon.setAttribute('src', `${that.url}/assets/sound48.png`);\r\n  that.icon.setAttribute('style', 'width: 80%; height: 100%; position: absolute;');\r\n  that.div.appendChild(that.icon);\r\n\r\n  that.icon.onclick = () => {\r\n    if (that.media.muted) {\r\n      unmute();\r\n    } else {\r\n      mute();\r\n    }\r\n  };\r\n\r\n  if (!that.stream.local) {\r\n    // Volume bar\r\n    that.picker = document.createElement('input');\r\n    that.picker.setAttribute('id', `picker_${that.id}`);\r\n    that.picker.type = 'range';\r\n    that.picker.min = 0;\r\n    that.picker.max = 100;\r\n    that.picker.step = 10;\r\n    that.picker.value = lastVolume;\r\n    //  FireFox supports range sliders as of version 23\r\n    that.picker.setAttribute('orient', 'vertical');\r\n    that.div.appendChild(that.picker);\r\n    that.media.volume = that.picker.value / 100;\r\n    that.media.muted = false;\r\n\r\n    that.picker.oninput = () => {\r\n      if (that.picker.value > 0) {\r\n        that.media.muted = false;\r\n        that.icon.setAttribute('src', `${that.url}/assets/sound48.png`);\r\n      } else {\r\n        that.media.muted = true;\r\n        that.icon.setAttribute('src', `${that.url}/assets/mute48.png`);\r\n      }\r\n      that.media.volume = that.picker.value / 100;\r\n    };\r\n\r\n    // Private functions\r\n    const show = (displaying) => {\r\n      that.picker.setAttribute('style', `background: transparent; width: 32px;\r\n                                         height: 100px; position: absolute; bottom: 90%;\r\n                                         z-index: 1; right: 0px; -webkit-appearance: slider-vertical;\r\n                                         bottom: ${that.div.offsetHeight}px; display: ${displaying}`);\r\n    };\r\n\r\n    // Public functions\r\n    that.div.onmouseover = () => {\r\n      show('block');\r\n    };\r\n\r\n    that.div.onmouseout = () => {\r\n      show('none');\r\n    };\r\n\r\n    show('none');\r\n  }\r\n\r\n  document.getElementById(that.elementID).appendChild(that.div);\r\n  return that;\r\n};\r\n\r\nexport default Speaker;\r\n","/* global document, clearTimeout, setTimeout */\r\n\r\nimport View from './View';\r\nimport Speaker from './Speaker';\r\n\r\n/*\r\n * Bar represents the bottom menu bar of every mediaPlayer.\r\n * It contains a Speaker and an icon.\r\n * Every Bar is a View.\r\n * Ex.: var bar = Bar({elementID: element, id: id});\r\n */\r\nconst Bar = (spec) => {\r\n  const that = View({});\r\n  let waiting;\r\n\r\n  // Variables\r\n\r\n  // DOM element in which the Bar will be appended\r\n  that.elementID = spec.elementID;\r\n\r\n  // Bar ID\r\n  that.id = spec.id;\r\n\r\n  // Container\r\n  that.div = document.createElement('div');\r\n  that.div.setAttribute('id', `bar_${that.id}`);\r\n  that.div.setAttribute('class', 'licode_bar');\r\n\r\n  // Bottom bar\r\n  that.bar = document.createElement('div');\r\n  that.bar.setAttribute('style', 'width: 100%; height: 15%; max-height: 30px; ' +\r\n                                 'position: absolute; bottom: 0; right: 0; ' +\r\n                                 'background-color: rgba(255,255,255,0.62)');\r\n  that.bar.setAttribute('id', `subbar_${that.id}`);\r\n  that.bar.setAttribute('class', 'licode_subbar');\r\n\r\n  // Lynckia icon\r\n  that.link = document.createElement('a');\r\n  that.link.setAttribute('href', 'http://www.lynckia.com/');\r\n  that.link.setAttribute('class', 'licode_link');\r\n  that.link.setAttribute('target', '_blank');\r\n\r\n  that.logo = document.createElement('img');\r\n  that.logo.setAttribute('style', 'width: 100%; height: 100%; max-width: 30px; ' +\r\n                                  'position: absolute; top: 0; left: 2px;');\r\n  that.logo.setAttribute('class', 'licode_logo');\r\n  that.logo.setAttribute('alt', 'Lynckia');\r\n  that.logo.setAttribute('src', `${that.url}/assets/star.svg`);\r\n\r\n  // Private functions\r\n  const show = (displaying) => {\r\n    let action = displaying;\r\n    if (displaying !== 'block') {\r\n      action = 'none';\r\n    } else {\r\n      clearTimeout(waiting);\r\n    }\r\n\r\n    that.div.setAttribute('style',\r\n      `width: 100%; height: 100%; position: relative; bottom: 0; right: 0; display: ${action}`);\r\n  };\r\n\r\n  // Public functions\r\n  that.display = () => {\r\n    show('block');\r\n  };\r\n\r\n  that.hide = () => {\r\n    waiting = setTimeout(show, 1000);\r\n  };\r\n\r\n  document.getElementById(that.elementID).appendChild(that.div);\r\n  that.div.appendChild(that.bar);\r\n  that.bar.appendChild(that.link);\r\n  that.link.appendChild(that.logo);\r\n\r\n  // Speaker component\r\n  if (!spec.stream.screen && (spec.options === undefined ||\r\n                              spec.options.speaker === undefined ||\r\n                              spec.options.speaker === true)) {\r\n    that.speaker = Speaker({ elementID: `subbar_${that.id}`,\r\n      id: that.id,\r\n      stream: spec.stream,\r\n      media: spec.media });\r\n  }\r\n\r\n  that.display();\r\n  that.hide();\r\n\r\n  return that;\r\n};\r\n\r\nexport default Bar;\r\n","/* global document, L */\r\n\r\nimport View from './View';\r\nimport Bar from './Bar';\r\n\r\n/*\r\n * VideoPlayer represents a Licode video component that shows either a local or a remote video.\r\n * Ex.: var player = VideoPlayer({id: id, stream: stream, elementID: elementID});\r\n * A VideoPlayer is also a View component.\r\n */\r\nconst VideoPlayer = (spec) => {\r\n  const that = View({});\r\n\r\n  // Variables\r\n\r\n  // VideoPlayer ID\r\n  that.id = spec.id;\r\n\r\n  // Stream that the VideoPlayer will play\r\n  that.stream = spec.stream.stream;\r\n\r\n  // DOM element in which the VideoPlayer will be appended\r\n  that.elementID = spec.elementID;\r\n\r\n  // Private functions\r\n  const onmouseover = () => {\r\n    that.bar.display();\r\n  };\r\n\r\n  const onmouseout = () => {\r\n    that.bar.hide();\r\n  };\r\n\r\n  const applyRatio = (ratio, width, height, reverse) => {\r\n    const condition = !reverse ? width * (1 / ratio) < height : width * (1 / ratio) > height;\r\n    if (condition) {\r\n      that.video.style.width = `${width}px`;\r\n      that.video.style.height = `${(1 / ratio) * width}px`;\r\n\r\n      that.video.style.top = `${-((((1 / ratio) * width) / 2) - (height / 2))}px`;\r\n      that.video.style.left = '0px';\r\n    } else {\r\n      that.video.style.height = `${height}px`;\r\n      that.video.style.width = `${ratio * height}px`;\r\n\r\n      that.video.style.left = `${-(((ratio * height) / 2) - (width / 2))}px`;\r\n      that.video.style.top = '0px';\r\n    }\r\n  };\r\n\r\n  // Public functions\r\n\r\n  // It will stop the VideoPlayer and remove it from the HTML\r\n  that.destroy = () => {\r\n    that.video.pause();\r\n    delete that.resizer;\r\n    that.parentNode.removeChild(that.div);\r\n  };\r\n\r\n  that.resize = () => {\r\n    const width = that.container.offsetWidth;\r\n    const height = that.container.offsetHeight;\r\n\r\n    if (spec.stream.screen || spec.options.crop === false) {\r\n      applyRatio(16 / 9, width, height, false);\r\n    } else if (width !== that.containerWidth || height !== that.containerHeight) {\r\n      applyRatio(4 / 3, width, height, true);\r\n    }\r\n\r\n    that.containerWidth = width;\r\n    that.containerHeight = height;\r\n  };\r\n\r\n  /* window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function (m, key, value) {\r\n      document.getElementById(key).value = unescape(value);\r\n  }); */\r\n\r\n  // Container\r\n  that.div = document.createElement('div');\r\n  that.div.setAttribute('id', `player_${that.id}`);\r\n  that.div.setAttribute('class', 'licode_player');\r\n  that.div.setAttribute('style', 'width: 100%; height: 100%; position: relative; ' +\r\n                                   'background-color: black; overflow: hidden;');\r\n\r\n  // Loader icon\r\n  if (spec.options.loader !== false) {\r\n    that.loader = document.createElement('img');\r\n    that.loader.setAttribute('style', 'width: 16px; height: 16px; position: absolute; ' +\r\n                                        'top: 50%; left: 50%; margin-top: -8px; margin-left: -8px');\r\n    that.loader.setAttribute('id', `back_${that.id}`);\r\n    that.loader.setAttribute('class', 'licode_loader');\r\n    that.loader.setAttribute('src', `${that.url}/assets/loader.gif`);\r\n  }\r\n\r\n  // Video tag\r\n  that.video = document.createElement('video');\r\n  that.video.setAttribute('id', `stream${that.id}`);\r\n  that.video.setAttribute('class', 'licode_stream');\r\n  that.video.setAttribute('style', 'width: 100%; height: 100%; position: absolute');\r\n  that.video.setAttribute('autoplay', 'autoplay');\r\n  that.video.setAttribute('playsinline', 'playsinline');\r\n\r\n  if (spec.stream.local) { that.video.volume = 0; }\r\n\r\n  if (that.elementID !== undefined) {\r\n    // Check for a passed DOM node.\r\n    if (typeof that.elementID === 'object' &&\r\n          typeof that.elementID.appendChild === 'function') {\r\n      that.container = that.elementID;\r\n    } else {\r\n      that.container = document.getElementById(that.elementID);\r\n    }\r\n  } else {\r\n    that.container = document.body;\r\n  }\r\n  that.container.appendChild(that.div);\r\n\r\n  that.parentNode = that.div.parentNode;\r\n\r\n  if (that.loader) {\r\n    that.div.appendChild(that.loader);\r\n  }\r\n  that.div.appendChild(that.video);\r\n\r\n  that.containerWidth = 0;\r\n  that.containerHeight = 0;\r\n\r\n  if (spec.options.resizer !== false) {\r\n    that.resizer = L.ResizeSensor(that.container, that.resize);\r\n\r\n    that.resize();\r\n  }\r\n\r\n  // Bottom Bar\r\n  if (spec.options.bar !== false) {\r\n    that.bar = Bar({ elementID: `player_${that.id}`,\r\n      id: that.id,\r\n      stream: spec.stream,\r\n      media: that.video,\r\n      options: spec.options });\r\n\r\n    that.div.onmouseover = onmouseover;\r\n    that.div.onmouseout = onmouseout;\r\n  } else {\r\n    // Expose a consistent object to manipulate the media.\r\n    that.media = that.video;\r\n  }\r\n\r\n  that.video.srcObject = that.stream;\r\n\r\n  return that;\r\n};\r\n\r\nexport default VideoPlayer;\r\n","/* global document */\r\n\r\nimport View from './View';\r\nimport Bar from './Bar';\r\n\r\n/*\r\n * AudioPlayer represents a Licode Audio component that shows either a local or a remote Audio.\r\n * Ex.: var player = AudioPlayer({id: id, stream: stream, elementID: elementID});\r\n * A AudioPlayer is also a View component.\r\n */\r\n\r\nconst AudioPlayer = (spec) => {\r\n  const that = View({});\r\n  let onmouseover;\r\n  let onmouseout;\r\n\r\n  // Variables\r\n\r\n  // AudioPlayer ID\r\n  that.id = spec.id;\r\n\r\n  // Stream that the AudioPlayer will play\r\n  that.stream = spec.stream.stream;\r\n\r\n  // DOM element in which the AudioPlayer will be appended\r\n  that.elementID = spec.elementID;\r\n\r\n\r\n    // Audio tag\r\n  that.audio = document.createElement('audio');\r\n  that.audio.setAttribute('id', `stream${that.id}`);\r\n  that.audio.setAttribute('class', 'licode_stream');\r\n  that.audio.setAttribute('style', 'width: 100%; height: 100%; position: absolute');\r\n  that.audio.setAttribute('autoplay', 'autoplay');\r\n\r\n  if (spec.stream.local) { that.audio.volume = 0; }\r\n\r\n  if (that.elementID !== undefined) {\r\n    // It will stop the AudioPlayer and remove it from the HTML\r\n    that.destroy = () => {\r\n      that.audio.pause();\r\n      that.parentNode.removeChild(that.div);\r\n    };\r\n\r\n    onmouseover = () => {\r\n      that.bar.display();\r\n    };\r\n\r\n    onmouseout = () => {\r\n      that.bar.hide();\r\n    };\r\n\r\n    // Container\r\n    that.div = document.createElement('div');\r\n    that.div.setAttribute('id', `player_${that.id}`);\r\n    that.div.setAttribute('class', 'licode_player');\r\n    that.div.setAttribute('style', 'width: 100%; height: 100%; position: relative; ' +\r\n                              'overflow: hidden;');\r\n\r\n    // Check for a passed DOM node.\r\n    if (typeof that.elementID === 'object' &&\r\n          typeof that.elementID.appendChild === 'function') {\r\n      that.container = that.elementID;\r\n    } else {\r\n      that.container = document.getElementById(that.elementID);\r\n    }\r\n    that.container.appendChild(that.div);\r\n\r\n    that.parentNode = that.div.parentNode;\r\n\r\n    that.div.appendChild(that.audio);\r\n\r\n    // Bottom Bar\r\n    if (spec.options.bar !== false) {\r\n      that.bar = Bar({ elementID: `player_${that.id}`,\r\n        id: that.id,\r\n        stream: spec.stream,\r\n        media: that.audio,\r\n        options: spec.options });\r\n\r\n      that.div.onmouseover = onmouseover;\r\n      that.div.onmouseout = onmouseout;\r\n    } else {\r\n      // Expose a consistent object to manipulate the media.\r\n      that.media = that.audio;\r\n    }\r\n  } else {\r\n    // It will stop the AudioPlayer and remove it from the HTML\r\n    that.destroy = () => {\r\n      that.audio.pause();\r\n      that.parentNode.removeChild(that.audio);\r\n    };\r\n\r\n    document.body.appendChild(that.audio);\r\n    that.parentNode = document.body;\r\n  }\r\n\r\n  that.audio.srcObject = that.stream;\r\n\r\n  return that;\r\n};\r\n\r\nexport default AudioPlayer;\r\n","/* global document */\r\n\r\nimport { EventDispatcher, StreamEvent } from './Events';\r\nimport ConnectionHelpers from './utils/ConnectionHelpers';\r\nimport ErizoMap from './utils/ErizoMap';\r\nimport VideoPlayer from './views/VideoPlayer';\r\nimport AudioPlayer from './views/AudioPlayer';\r\nimport Logger from './utils/Logger';\r\n\r\n/*\r\n * Class Stream represents a local or a remote Stream in the Room. It will handle the WebRTC\r\n * stream and identify the stream and where it should be drawn.\r\n */\r\nconst Stream = (altConnectionHelpers, specInput) => {\r\n  const spec = specInput;\r\n  const that = EventDispatcher(spec);\r\n\r\n  that.stream = spec.stream;\r\n  that.url = spec.url;\r\n  that.recording = spec.recording;\r\n  that.room = undefined;\r\n  that.showing = false;\r\n  that.local = false;\r\n  that.video = spec.video;\r\n  that.audio = spec.audio;\r\n  that.screen = spec.screen;\r\n  that.videoSize = spec.videoSize;\r\n  that.videoFrameRate = spec.videoFrameRate;\r\n  that.extensionId = spec.extensionId;\r\n  that.desktopStreamId = spec.desktopStreamId;\r\n  that.audioMuted = false;\r\n  that.videoMuted = false;\r\n  that.p2p = false;\r\n  that.ConnectionHelpers =\r\n    altConnectionHelpers === undefined ? ConnectionHelpers : altConnectionHelpers;\r\n\r\n  const onStreamAddedToPC = (evt) => {\r\n    if (evt.stream.id === that.getLabel()) {\r\n      that.emit(StreamEvent({ type: 'added', stream: evt.stream }));\r\n    }\r\n  };\r\n\r\n  const onStreamRemovedFromPC = (evt) => {\r\n    if (evt.stream.id === that.getLabel()) {\r\n      that.emit(StreamEvent({ type: 'removed', stream: that }));\r\n    }\r\n  };\r\n\r\n  const onICEConnectionStateChange = (msg) => {\r\n    that.emit(StreamEvent({ type: 'icestatechanged', msg }));\r\n  };\r\n\r\n  if (that.videoSize !== undefined &&\r\n        (!(that.videoSize instanceof Array) ||\r\n           that.videoSize.length !== 4)) {\r\n    throw Error('Invalid Video Size');\r\n  }\r\n  if (spec.local === undefined || spec.local === true) {\r\n    that.local = true;\r\n  }\r\n\r\n  // Public functions\r\n  that.getID = () => {\r\n    let id;\r\n    // Unpublished local streams don't yet have an ID.\r\n    if (that.local && !spec.streamID) {\r\n      id = 'local';\r\n    } else {\r\n      id = spec.streamID;\r\n    }\r\n    return id;\r\n  };\r\n\r\n  that.getLabel = () => {\r\n    if (that.stream && that.stream.id) {\r\n      return that.stream.id;\r\n    }\r\n    return spec.label;\r\n  };\r\n\r\n  // Get attributes of this stream.\r\n  that.getAttributes = () => spec.attributes;\r\n\r\n  // Changes the attributes of this stream in the room.\r\n  that.setAttributes = (attrs) => {\r\n    if (that.local) {\r\n      that.emit(StreamEvent({ type: 'internal-set-attributes', stream: that, attrs }));\r\n      return;\r\n    }\r\n    Logger.error('Failed to set attributes data. This Stream object has not been published.');\r\n  };\r\n\r\n  that.updateLocalAttributes = (attrs) => {\r\n    spec.attributes = attrs;\r\n  };\r\n\r\n  // Indicates if the stream has audio activated\r\n  that.hasAudio = () => spec.audio !== false && spec.audio !== undefined;\r\n\r\n  // Indicates if the stream has video activated\r\n  that.hasVideo = () => spec.video !== false && spec.video !== undefined;\r\n\r\n  // Indicates if the stream has data activated\r\n  that.hasData = () => spec.data !== false && spec.data !== undefined;\r\n\r\n  // Indicates if the stream has screen activated\r\n  that.hasScreen = () => spec.screen;\r\n\r\n  that.hasMedia = () => spec.audio || spec.video || spec.screen;\r\n\r\n  that.isExternal = () => that.url !== undefined || that.recording !== undefined;\r\n\r\n  that.addPC = (pc, p2pKey = undefined) => {\r\n    if (p2pKey) {\r\n      that.p2p = true;\r\n      if (that.pc === undefined) {\r\n        that.pc = ErizoMap();\r\n      }\r\n      that.pc.add(p2pKey, pc);\r\n      pc.on('ice-state-change', onICEConnectionStateChange);\r\n      return;\r\n    }\r\n    if (that.pc) {\r\n      that.pc.off('add-stream', onStreamAddedToPC);\r\n      that.pc.off('remove-stream', onStreamRemovedFromPC);\r\n      that.pc.off('ice-state-change', onICEConnectionStateChange);\r\n    }\r\n    that.pc = pc;\r\n    that.pc.on('add-stream', onStreamAddedToPC);\r\n    that.pc.on('remove-stream', onStreamRemovedFromPC);\r\n    that.pc.on('ice-state-change', onICEConnectionStateChange);\r\n  };\r\n\r\n  // Sends data through this stream.\r\n  that.sendData = (msg) => {\r\n    if (that.local && that.hasData()) {\r\n      that.emit(StreamEvent({ type: 'internal-send-data', stream: that, msg }));\r\n      return;\r\n    }\r\n    Logger.error('Failed to send data. This Stream object has not been published.');\r\n  };\r\n\r\n  // Initializes the stream and tries to retrieve a stream from local video and audio\r\n  // We need to call this method before we can publish it in the room.\r\n  that.init = () => {\r\n    try {\r\n      if ((spec.audio || spec.video || spec.screen) && spec.url === undefined) {\r\n        Logger.info('Requested access to local media');\r\n        let videoOpt = spec.video;\r\n        if (videoOpt === true || spec.screen === true) {\r\n          videoOpt = videoOpt === true || videoOpt === null ? {} : videoOpt;\r\n          if (that.videoSize !== undefined) {\r\n            videoOpt.width = {\r\n              min: that.videoSize[0],\r\n              max: that.videoSize[2],\r\n            };\r\n\r\n            videoOpt.height = {\r\n              min: that.videoSize[1],\r\n              max: that.videoSize[3],\r\n            };\r\n          }\r\n\r\n          if (that.videoFrameRate !== undefined) {\r\n            videoOpt.frameRate = {\r\n              min: that.videoFrameRate[0],\r\n              max: that.videoFrameRate[1],\r\n            };\r\n          }\r\n        } else if (spec.screen === true && videoOpt === undefined) {\r\n          videoOpt = true;\r\n        }\r\n        const opt = { video: videoOpt,\r\n          audio: spec.audio,\r\n          fake: spec.fake,\r\n          screen: spec.screen,\r\n          extensionId: that.extensionId,\r\n          desktopStreamId: that.desktopStreamId };\r\n\r\n        that.ConnectionHelpers.GetUserMedia(opt, (stream) => {\r\n          Logger.info('User has granted access to local media.');\r\n          that.stream = stream;\r\n\r\n          that.dispatchEvent(StreamEvent({ type: 'access-accepted' }));\r\n\r\n          that.stream.getTracks().forEach((trackInput) => {\r\n            Logger.info('getTracks', trackInput);\r\n            const track = trackInput;\r\n            track.onended = () => {\r\n              that.stream.getTracks().forEach((secondTrackInput) => {\r\n                const secondTrack = secondTrackInput;\r\n                secondTrack.onended = null;\r\n              });\r\n              const streamEvent = StreamEvent({ type: 'stream-ended',\r\n                stream: that,\r\n                msg: track.kind });\r\n              that.dispatchEvent(streamEvent);\r\n            };\r\n          });\r\n        }, (error) => {\r\n          Logger.error(`Failed to get access to local media. Error code was ${\r\n                           error.code}.`);\r\n          const streamEvent = StreamEvent({ type: 'access-denied', msg: error });\r\n          that.dispatchEvent(streamEvent);\r\n        });\r\n      } else {\r\n        const streamEvent = StreamEvent({ type: 'access-accepted' });\r\n        that.dispatchEvent(streamEvent);\r\n      }\r\n    } catch (e) {\r\n      Logger.error(`Catched an error during get access to local media. Error was ${e}.`);\r\n      const streamEvent = StreamEvent({ type: 'access-denied', msg: e });\r\n      that.dispatchEvent(streamEvent);\r\n    }\r\n  };\r\n\r\n\r\n  that.close = () => {\r\n    if (that.local) {\r\n      if (that.room !== undefined) {\r\n        that.room.unpublish(that);\r\n      }\r\n      // Remove HTML element\r\n      that.hide();\r\n      if (that.stream !== undefined) {\r\n        that.stream.getTracks().forEach((trackInput) => {\r\n          const track = trackInput;\r\n          track.onended = null;\r\n          track.stop();\r\n        });\r\n      }\r\n      that.stream = undefined;\r\n    }\r\n    if (that.pc && !that.p2p) {\r\n      that.pc.off('add-stream', onStreamAddedToPC);\r\n      that.pc.off('remove-stream', onStreamRemovedFromPC);\r\n      that.pc.off('ice-state-change', onICEConnectionStateChange);\r\n    } else if (that.pc && that.p2p) {\r\n      that.pc.forEach((pc) => {\r\n        pc.off('add-stream', onStreamAddedToPC);\r\n        pc.off('remove-stream', onStreamRemovedFromPC);\r\n        pc.off('ice-state-change', onICEConnectionStateChange);\r\n      });\r\n    }\r\n    that.removeAllListeners();\r\n  };\r\n\r\n  that.play = (elementID, optionsInput) => {\r\n    const options = optionsInput || {};\r\n    that.elementID = elementID;\r\n    let player;\r\n    if (that.hasVideo() || that.hasScreen()) {\r\n      // Draw on HTML\r\n      if (elementID !== undefined) {\r\n        player = VideoPlayer({ id: that.getID(),\r\n          stream: that,\r\n          elementID,\r\n          options });\r\n        that.player = player;\r\n        that.showing = true;\r\n      }\r\n    } else if (that.hasAudio()) {\r\n      player = AudioPlayer({ id: that.getID(),\r\n        stream: that,\r\n        elementID,\r\n        options });\r\n      that.player = player;\r\n      that.showing = true;\r\n    }\r\n  };\r\n\r\n  that.stop = () => {\r\n    if (that.showing) {\r\n      if (that.player !== undefined) {\r\n        that.player.destroy();\r\n        that.showing = false;\r\n      }\r\n    }\r\n  };\r\n\r\n  that.setSinkId = (sinkId) => {\r\n    if (that.hasVideo() || this.hasScreen()) {\r\n        if (that.player.video.setSinkId) {\r\n          that.player.video.setSinkId(sinkId);\r\n        }\r\n    } else {\r\n        if (that.player.audio.setSinkId) {\r\n          that.player.audio.setSinkId(sinkId);\r\n        }\r\n    }\r\n  };\r\n\r\n  that.show = that.play;\r\n  that.hide = that.stop;\r\n\r\n  const getFrame = () => {\r\n    if (that.player !== undefined && that.stream !== undefined) {\r\n      const video = that.player.video;\r\n      const style = document.defaultView.getComputedStyle(video);\r\n      const width = parseInt(style.getPropertyValue('width'), 10);\r\n      const height = parseInt(style.getPropertyValue('height'), 10);\r\n      const left = parseInt(style.getPropertyValue('left'), 10);\r\n      const top = parseInt(style.getPropertyValue('top'), 10);\r\n\r\n      let div;\r\n      if (typeof that.elementID === 'object' &&\r\n              typeof that.elementID.appendChild === 'function') {\r\n        div = that.elementID;\r\n      } else {\r\n        div = document.getElementById(that.elementID);\r\n      }\r\n\r\n      const divStyle = document.defaultView.getComputedStyle(div);\r\n      const divWidth = parseInt(divStyle.getPropertyValue('width'), 10);\r\n      const divHeight = parseInt(divStyle.getPropertyValue('height'), 10);\r\n      const canvas = document.createElement('canvas');\r\n\r\n      canvas.id = 'testing';\r\n      canvas.width = divWidth;\r\n      canvas.height = divHeight;\r\n      canvas.setAttribute('style', 'display: none');\r\n      // document.body.appendChild(canvas);\r\n      const context = canvas.getContext('2d');\r\n\r\n      context.drawImage(video, left, top, width, height);\r\n\r\n      return canvas;\r\n    }\r\n    return null;\r\n  };\r\n\r\n  that.getVideoFrameURL = (format) => {\r\n    const canvas = getFrame();\r\n    if (canvas !== null) {\r\n      if (format) {\r\n        return canvas.toDataURL(format);\r\n      }\r\n      return canvas.toDataURL();\r\n    }\r\n    return null;\r\n  };\r\n\r\n  that.getVideoFrame = () => {\r\n    const canvas = getFrame();\r\n    if (canvas !== null) {\r\n      return canvas.getContext('2d').getImageData(0, 0, canvas.width, canvas.height);\r\n    }\r\n    return null;\r\n  };\r\n\r\n  that.checkOptions = (configInput, isUpdate) => {\r\n    const config = configInput;\r\n    // TODO: Check for any incompatible options\r\n    if (isUpdate === true) {  // We are updating the stream\r\n      if (config.audio || config.screen) {\r\n        Logger.warning('Cannot update type of subscription');\r\n        config.audio = undefined;\r\n        config.screen = undefined;\r\n      }\r\n    } else if (that.local === false) { // check what we can subscribe to\r\n      if (config.video === true && that.hasVideo() === false) {\r\n        Logger.warning('Trying to subscribe to video when there is no ' +\r\n                                   'video, won\\'t subscribe to video');\r\n        config.video = false;\r\n      }\r\n      if (config.audio === true && that.hasAudio() === false) {\r\n        Logger.warning('Trying to subscribe to audio when there is no ' +\r\n                                   'audio, won\\'t subscribe to audio');\r\n        config.audio = false;\r\n      }\r\n    }\r\n    if (that.local === false) {\r\n      if (!that.hasVideo() && (config.slideShowMode === true)) {\r\n        Logger.warning('Cannot enable slideShowMode if it is not a video ' +\r\n                                 'subscription, please check your parameters');\r\n        config.slideShowMode = false;\r\n      }\r\n    }\r\n  };\r\n\r\n  const muteStream = (callback = () => {}) => {\r\n    if (that.room && that.room.p2p) {\r\n      Logger.warning('muteAudio/muteVideo are not implemented in p2p streams');\r\n      callback('error');\r\n      return;\r\n    }\r\n    if (that.stream) {\r\n      for (let index = 0; index < that.stream.getVideoTracks().length; index += 1) {\r\n        const track = that.stream.getVideoTracks()[index];\r\n        track.enabled = !that.videoMuted;\r\n      }\r\n    }\r\n    const config = { muteStream: { audio: that.audioMuted, video: that.videoMuted } };\r\n    that.checkOptions(config, true);\r\n    if (that.pc) {\r\n      that.pc.updateSpec(config, that.getID(), callback);\r\n    }\r\n  };\r\n\r\n  that.muteAudio = (isMuted, callback = () => {}) => {\r\n    that.audioMuted = isMuted;\r\n    muteStream(callback);\r\n  };\r\n\r\n  that.muteVideo = (isMuted, callback = () => {}) => {\r\n    that.videoMuted = isMuted;\r\n    muteStream(callback);\r\n  };\r\n\r\n  // eslint-disable-next-line no-underscore-dangle\r\n  that._setStaticQualityLayer = (spatialLayer, temporalLayer, callback = () => {}) => {\r\n    if (that.room && that.room.p2p) {\r\n      Logger.warning('setStaticQualityLayer is not implemented in p2p streams');\r\n      callback('error');\r\n      return;\r\n    }\r\n    const config = { qualityLayer: { spatialLayer, temporalLayer } };\r\n    that.checkOptions(config, true);\r\n    that.pc.updateSpec(config, that.getID(), callback);\r\n  };\r\n\r\n  // eslint-disable-next-line no-underscore-dangle\r\n  that._setDynamicQualityLayer = (callback) => {\r\n    if (that.room && that.room.p2p) {\r\n      Logger.warning('setDynamicQualityLayer is not implemented in p2p streams');\r\n      callback('error');\r\n      return;\r\n    }\r\n    const config = { qualityLayer: { spatialLayer: -1, temporalLayer: -1 } };\r\n    that.checkOptions(config, true);\r\n    that.pc.updateSpec(config, that.getID(), callback);\r\n  };\r\n\r\n  // eslint-disable-next-line no-underscore-dangle\r\n  that._enableSlideShowBelowSpatialLayer = (enabled, spatialLayer = 0, callback = () => {}) => {\r\n    if (that.room && that.room.p2p) {\r\n      Logger.warning('enableSlideShowBelowSpatialLayer is not implemented in p2p streams');\r\n      callback('error');\r\n      return;\r\n    }\r\n    const config = { slideShowBelowLayer: { enabled, spatialLayer } };\r\n    that.checkOptions(config, true);\r\n    Logger.debug('Calling updateSpec with config', config);\r\n    that.pc.updateSpec(config, that.getID(), callback);\r\n  };\r\n\r\n  // This is an alias to keep backwards compatibility\r\n  // eslint-disable-next-line no-underscore-dangle\r\n  that._setMinSpatialLayer = that._enableSlideShowBelowSpatialLayer.bind(this, true);\r\n\r\n  const controlHandler = (handlersInput, publisherSideInput, enable) => {\r\n    let publisherSide = publisherSideInput;\r\n    let handlers = handlersInput;\r\n    if (publisherSide !== true) {\r\n      publisherSide = false;\r\n    }\r\n\r\n    handlers = (typeof handlers === 'string') ? [handlers] : handlers;\r\n    handlers = (handlers instanceof Array) ? handlers : [];\r\n\r\n    if (handlers.length > 0) {\r\n      that.room.sendControlMessage(that, 'control', { name: 'controlhandlers',\r\n        enable,\r\n        publisherSide,\r\n        handlers });\r\n    }\r\n  };\r\n\r\n  that.disableHandlers = (handlers, publisherSide) => {\r\n    controlHandler(handlers, publisherSide, false);\r\n  };\r\n\r\n  that.enableHandlers = (handlers, publisherSide) => {\r\n    controlHandler(handlers, publisherSide, true);\r\n  };\r\n\r\n  that.updateConfiguration = (config, callback = () => {}) => {\r\n    if (config === undefined) { return; }\r\n    if (that.pc) {\r\n      that.checkOptions(config, true);\r\n      if (that.local) {\r\n        if (that.room.p2p) {\r\n          for (let index = 0; index < that.pc.length; index += 1) {\r\n            that.pc[index].updateSpec(config, that.getID(), callback);\r\n          }\r\n        } else {\r\n          that.pc.updateSpec(config, that.getID(), callback);\r\n        }\r\n      } else {\r\n        that.pc.updateSpec(config, that.getID(), callback);\r\n      }\r\n    } else {\r\n      callback('This stream has no peerConnection attached, ignoring');\r\n    }\r\n  };\r\n\r\n  return that;\r\n};\r\n\r\nexport default Stream;\r\n","/* global unescape */\r\n\r\nconst Base64 = (() => {\r\n  let base64Str;\r\n  let base64Count;\r\n\r\n  const END_OF_INPUT = -1;\r\n  const base64Chars = [\r\n    'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H',\r\n    'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P',\r\n    'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X',\r\n    'Y', 'Z', 'a', 'b', 'c', 'd', 'e', 'f',\r\n    'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n',\r\n    'o', 'p', 'q', 'r', 's', 't', 'u', 'v',\r\n    'w', 'x', 'y', 'z', '0', '1', '2', '3',\r\n    '4', '5', '6', '7', '8', '9', '+', '/',\r\n  ];\r\n\r\n  const reverseBase64Chars = [];\r\n\r\n  for (let i = 0; i < base64Chars.length; i += 1) {\r\n    reverseBase64Chars[base64Chars[i]] = i;\r\n  }\r\n\r\n  const setBase64Str = (str) => {\r\n    base64Str = str;\r\n    base64Count = 0;\r\n  };\r\n\r\n  const readBase64 = () => {\r\n    if (!base64Str) {\r\n      return END_OF_INPUT;\r\n    }\r\n    if (base64Count >= base64Str.length) {\r\n      return END_OF_INPUT;\r\n    }\r\n    const c = base64Str.charCodeAt(base64Count) & 0xff;  // eslint-disable-line no-bitwise\r\n    base64Count += 1;\r\n    return c;\r\n  };\r\n\r\n  const encodeBase64 = (str) => {\r\n    let result;\r\n    let lineCount;\r\n    let done;\r\n    setBase64Str(str);\r\n    result = '';\r\n    const inBuffer = new Array(3);\r\n    lineCount = 0;\r\n    done = false;\r\n    while (!done && (inBuffer[0] = readBase64()) !== END_OF_INPUT) {\r\n      inBuffer[1] = readBase64();\r\n      inBuffer[2] = readBase64();\r\n      // eslint-disable-next-line no-bitwise\r\n      result += (base64Chars[inBuffer[0] >> 2]);\r\n      if (inBuffer[1] !== END_OF_INPUT) {\r\n        // eslint-disable-next-line no-bitwise\r\n        result += (base64Chars[((inBuffer[0] << 4) & 0x30) | (inBuffer[1] >> 4)]);\r\n        if (inBuffer[2] !== END_OF_INPUT) {\r\n          // eslint-disable-next-line no-bitwise\r\n          result += (base64Chars[((inBuffer[1] << 2) & 0x3c) | (inBuffer[2] >> 6)]);\r\n          // eslint-disable-next-line no-bitwise\r\n          result += (base64Chars[inBuffer[2] & 0x3F]);\r\n        } else {\r\n          // eslint-disable-next-line no-bitwise\r\n          result += (base64Chars[((inBuffer[1] << 2) & 0x3c)]);\r\n          result = `${result}=`;\r\n          done = true;\r\n        }\r\n      } else {\r\n        // eslint-disable-next-line no-bitwise\r\n        result += (base64Chars[((inBuffer[0] << 4) & 0x30)]);\r\n        result = `${result}=`;\r\n        result = `${result}=`;\r\n        done = true;\r\n      }\r\n      lineCount += 4;\r\n      if (lineCount >= 76) {\r\n        result = `${result}\\n`;\r\n        lineCount = 0;\r\n      }\r\n    }\r\n    return result;\r\n  };\r\n\r\n  const readReverseBase64 = () => {\r\n    if (!base64Str) {\r\n      return END_OF_INPUT;\r\n    }\r\n    // eslint-disable-next-line no-constant-condition\r\n    while (true) {\r\n      if (base64Count >= base64Str.length) {\r\n        return END_OF_INPUT;\r\n      }\r\n      const nextCharacter = base64Str.charAt(base64Count);\r\n      base64Count += 1;\r\n      if (reverseBase64Chars[nextCharacter]) {\r\n        return reverseBase64Chars[nextCharacter];\r\n      }\r\n      if (nextCharacter === 'A') {\r\n        return 0;\r\n      }\r\n    }\r\n  };\r\n\r\n  const ntos = (value) => {\r\n    let n = value.toString(16);\r\n    if (n.length === 1) {\r\n      n = `0${n}`;\r\n    }\r\n    n = `%${n}`;\r\n    return unescape(n);\r\n  };\r\n\r\n  const decodeBase64 = (str) => {\r\n    let result;\r\n    let done;\r\n    setBase64Str(str);\r\n    result = '';\r\n    const inBuffer = new Array(4);\r\n    done = false;\r\n    while (!done &&\r\n              (inBuffer[0] = readReverseBase64()) !== END_OF_INPUT &&\r\n              (inBuffer[1] = readReverseBase64()) !== END_OF_INPUT) {\r\n      inBuffer[2] = readReverseBase64();\r\n      inBuffer[3] = readReverseBase64();\r\n      // eslint-disable-next-line no-bitwise,no-mixed-operators\r\n      result += ntos((((inBuffer[0] << 2) & 0xff) | inBuffer[1] >> 4));\r\n      if (inBuffer[2] !== END_OF_INPUT) {\r\n        // eslint-disable-next-line no-bitwise,no-mixed-operators\r\n        result += ntos((((inBuffer[1] << 4) & 0xff) | inBuffer[2] >> 2));\r\n        if (inBuffer[3] !== END_OF_INPUT) {\r\n          // eslint-disable-next-line no-bitwise\r\n          result += ntos((((inBuffer[2] << 6) & 0xff) | inBuffer[3]));\r\n        } else {\r\n          done = true;\r\n        }\r\n      } else {\r\n        done = true;\r\n      }\r\n    }\r\n    return result;\r\n  };\r\n\r\n  return {\r\n    encodeBase64,\r\n    decodeBase64,\r\n  };\r\n})();\r\n\r\nexport default Base64;\r\n","import ErizoConnectionManager from './ErizoConnectionManager';\r\nimport ConnectionHelpers from './utils/ConnectionHelpers';\r\nimport { EventDispatcher, StreamEvent, RoomEvent } from './Events';\r\nimport { Socket } from './Socket';\r\nimport Stream from './Stream';\r\nimport ErizoMap from './utils/ErizoMap';\r\nimport Base64 from './utils/Base64';\r\nimport Logger from './utils/Logger';\r\n\r\n/*\r\n * Class Room represents a Licode Room. It will handle the connection, local stream publication and\r\n * remote stream subscription.\r\n * Typical Room initialization would be:\r\n * var room = Erizo.Room({token:'213h8012hwduahd-321ueiwqewq'});\r\n * It also handles RoomEvents and StreamEvents. For example:\r\n * Event 'room-connected' points out that the user has been successfully connected to the room.\r\n * Event 'room-disconnected' shows that the user has been already disconnected.\r\n * Event 'stream-added' indicates that there is a new stream available in the room.\r\n * Event 'stream-removed' shows that a previous available stream has been removed from the room.\r\n */\r\nconst Room = (altIo, altConnectionHelpers, altConnectionManager, specInput) => {\r\n  const spec = specInput;\r\n  const that = EventDispatcher(specInput);\r\n  const DISCONNECTED = 0;\r\n  const CONNECTING = 1;\r\n  const CONNECTED = 2;\r\n\r\n\r\n  that.remoteStreams = ErizoMap();\r\n  that.localStreams = ErizoMap();\r\n  that.roomID = '';\r\n  that.state = DISCONNECTED;\r\n  that.p2p = false;\r\n  that.ConnectionHelpers =\r\n    altConnectionHelpers === undefined ? ConnectionHelpers : altConnectionHelpers;\r\n\r\n  that.erizoConnectionManager =\r\n    altConnectionManager === undefined ? new ErizoConnectionManager()\r\n    : new altConnectionManager.ErizoConnectionManager();\r\n\r\n  let socket = Socket(altIo);\r\n  that.socket = socket;\r\n  let remoteStreams = that.remoteStreams;\r\n  let localStreams = that.localStreams;\r\n  // Private functions\r\n  const removeStream = (streamInput) => {\r\n    const stream = streamInput;\r\n    stream.removeAllListeners();\r\n\r\n    if (stream.pc && !that.p2p) {\r\n      stream.pc.removeStream(stream);\r\n    }\r\n\r\n    Logger.debug('Removed stream');\r\n    if (stream.stream) {\r\n      // Remove HTML element\r\n      stream.hide();\r\n\r\n      stream.stop();\r\n      stream.close();\r\n      delete stream.stream;\r\n    }\r\n\r\n    // Close PC stream\r\n    if (stream.pc) {\r\n      if (stream.local && that.p2p) {\r\n        stream.pc.forEach((connection, id) => {\r\n          connection.close();\r\n          stream.pc.remove(id);\r\n        });\r\n      } else {\r\n        that.erizoConnectionManager.maybeCloseConnection(stream.pc);\r\n        delete stream.pc;\r\n      }\r\n    }\r\n  };\r\n\r\n  const onStreamFailed = (streamInput, message) => {\r\n    const stream = streamInput;\r\n    if (that.state !== DISCONNECTED && stream && !stream.failed) {\r\n      stream.failed = true;\r\n      const streamFailedEvt = StreamEvent(\r\n        { type: 'stream-failed',\r\n          msg: message || 'Stream failed after connection',\r\n          stream });\r\n      that.dispatchEvent(streamFailedEvt);\r\n      if (stream.local) {\r\n        that.unpublish(stream);\r\n      } else {\r\n        that.unsubscribe(stream);\r\n      }\r\n    }\r\n  };\r\n\r\n  const dispatchStreamSubscribed = (streamInput, evt) => {\r\n    const stream = streamInput;\r\n    // Draw on html\r\n    Logger.info('Stream subscribed');\r\n    stream.stream = evt.stream;\r\n    if (!that.p2p) {\r\n      stream.pc.addStream(stream);\r\n    }\r\n    const evt2 = StreamEvent({ type: 'stream-subscribed', stream });\r\n    that.dispatchEvent(evt2);\r\n  };\r\n\r\n  const dispatchStreamUnsubscribed = (streamInput) => {\r\n    const stream = streamInput;\r\n    Logger.info('Stream unsubscribed');\r\n    const evt2 = StreamEvent({ type: 'stream-unsubscribed', stream });\r\n    that.dispatchEvent(evt2);\r\n  };\r\n\r\n  const getP2PConnectionOptions = (stream, peerSocket) => {\r\n    const options = {\r\n      callback(msg) {\r\n        socket.sendSDP('signaling_message', {\r\n          streamId: stream.getID(),\r\n          peerSocket,\r\n          msg });\r\n      },\r\n      audio: stream.hasAudio(),\r\n      video: stream.hasVideo(),\r\n      iceServers: that.iceServers,\r\n      maxAudioBW: stream.maxAudioBW,\r\n      maxVideoBW: stream.maxVideoBW,\r\n      limitMaxAudioBW: spec.maxAudioBW,\r\n      limitMaxVideoBW: spec.maxVideoBW,\r\n      forceTurn: stream.forceTurn,\r\n      p2p: true,\r\n    };\r\n    return options;\r\n  };\r\n\r\n  const createRemoteStreamP2PConnection = (streamInput, peerSocket) => {\r\n    const stream = streamInput;\r\n    stream.addPC(that.erizoConnectionManager.getOrBuildErizoConnection(\r\n      getP2PConnectionOptions(stream, peerSocket)));\r\n    stream.on('added', dispatchStreamSubscribed.bind(null, stream));\r\n    stream.on('icestatechanged', (evt) => {\r\n      Logger.info(`${stream.getID()} - iceConnectionState: ${evt.msg.state}`);\r\n      if (evt.msg.state === 'failed') {\r\n        onStreamFailed(stream);\r\n      }\r\n    });\r\n  };\r\n\r\n  const createLocalStreamP2PConnection = (streamInput, peerSocket) => {\r\n    const stream = streamInput;\r\n    const connection = that.erizoConnectionManager.getOrBuildErizoConnection(\r\n      getP2PConnectionOptions(stream, peerSocket));\r\n\r\n    stream.addPC(connection, peerSocket);\r\n\r\n    stream.on('icestatechanged', (evt) => {\r\n      Logger.info(`${stream.getID()} - iceConnectionState: ${evt.msg.state}`);\r\n      if (evt.msg.state === 'failed') {\r\n        stream.pc.get(peerSocket).close();\r\n        stream.pc.remove(peerSocket);\r\n      }\r\n    });\r\n    connection.addStream(stream);\r\n    connection.createOffer();\r\n  };\r\n\r\n  const removeLocalStreamP2PConnection = (streamInput, peerSocket) => {\r\n    const stream = streamInput;\r\n    if (stream.pc === undefined || !stream.pc.has(peerSocket)) {\r\n      return;\r\n    }\r\n    const pc = stream.pc.get(peerSocket);\r\n    pc.close();\r\n    stream.pc.remove(peerSocket);\r\n  };\r\n\r\n  const onRemoteStreamRemovedListener = (label) => {\r\n    that.remoteStreams.forEach((stream) => {\r\n      if (!stream.local && stream.getLabel() === label) {\r\n        dispatchStreamUnsubscribed(stream);\r\n      }\r\n    });\r\n  };\r\n\r\n  const getErizoConnectionOptions = (stream, options, isRemote) => {\r\n    const connectionOpts = {\r\n      callback(message, streamId = stream.getID()) {\r\n        Logger.info('Sending message', message, stream.getID(), streamId);\r\n        socket.sendSDP('signaling_message', {\r\n          streamId,\r\n          msg: message,\r\n          browser: stream.pc && stream.pc.browser }, undefined, () => {});\r\n      },\r\n      nop2p: true,\r\n      audio: options.audio && stream.hasAudio(),\r\n      video: options.video && stream.hasVideo(),\r\n      maxAudioBW: options.maxAudioBW,\r\n      maxVideoBW: options.maxVideoBW,\r\n      limitMaxAudioBW: spec.maxAudioBW,\r\n      limitMaxVideoBW: spec.maxVideoBW,\r\n      label: stream.getLabel(),\r\n      iceServers: that.iceServers,\r\n      forceTurn: stream.forceTurn,\r\n      p2p: false,\r\n      streamRemovedListener: onRemoteStreamRemovedListener,\r\n    };\r\n    if (!isRemote) {\r\n      connectionOpts.simulcast = options.simulcast;\r\n      connectionOpts.startVideoBW = options.startVideoBW;\r\n      connectionOpts.hardMinVideoBW = options.hardMinVideoBW;\r\n    }\r\n    return connectionOpts;\r\n  };\r\n\r\n  const createRemoteStreamErizoConnection = (streamInput, erizoId, options) => {\r\n    const stream = streamInput;\r\n    stream.addPC(that.erizoConnectionManager.getOrBuildErizoConnection(\r\n      getErizoConnectionOptions(stream, options, true), erizoId, spec.singlePC));\r\n    stream.on('added', dispatchStreamSubscribed.bind(null, stream));\r\n    stream.on('icestatechanged', (evt) => {\r\n      Logger.info(`${stream.getID()} - iceConnectionState: ${evt.msg.state}`);\r\n      if (evt.msg.state === 'failed') {\r\n        onStreamFailed(stream);\r\n      }\r\n    });\r\n    stream.pc.createOffer(true, false, stream.getID());\r\n  };\r\n\r\n  const createLocalStreamErizoConnection = (streamInput, erizoId, options) => {\r\n    const stream = streamInput;\r\n    stream.addPC(that.erizoConnectionManager.getOrBuildErizoConnection(\r\n      getErizoConnectionOptions(stream, options), erizoId, spec.singlePC));\r\n\r\n    stream.on('icestatechanged', (evt) => {\r\n      Logger.info(`${stream.getID()} - iceConnectionState: ${evt.msg.state}`);\r\n      if (evt.msg.state === 'failed') {\r\n        onStreamFailed(stream);\r\n      }\r\n    });\r\n    stream.pc.addStream(stream);\r\n    if (!options.createOffer) { stream.pc.createOffer(false, spec.singlePC, stream.getID()); }\r\n  };\r\n\r\n  // We receive an event with a new stream in the room.\r\n  // type can be \"media\" or \"data\"\r\n\r\n  const socketOnAddStream = (arg) => {\r\n    if (remoteStreams.has(arg.id)) {\r\n      return;\r\n    }\r\n    const stream = Stream(that.Connection, { streamID: arg.id,\r\n      local: localStreams.has(arg.id),\r\n      audio: arg.audio,\r\n      video: arg.video,\r\n      data: arg.data,\r\n      label: arg.label,\r\n      screen: arg.screen,\r\n      attributes: arg.attributes });\r\n    stream.room = that;\r\n    remoteStreams.add(arg.id, stream);\r\n    const evt = StreamEvent({ type: 'stream-added', stream });\r\n    that.dispatchEvent(evt);\r\n  };\r\n\r\n  const socketOnErizoMessage = (arg) => {\r\n    let stream;\r\n    if (arg.peerId) {\r\n      stream = remoteStreams.get(arg.peerId);\r\n    } else {\r\n      stream = localStreams.get(arg.streamId);\r\n    }\r\n\r\n    if (stream && stream.pc && !stream.failed) {\r\n      stream.pc.processSignalingMessage(arg.mess);\r\n    }\r\n  };\r\n\r\n  const socketOnPeerMessage = (arg) => {\r\n    let stream = localStreams.get(arg.streamId);\r\n\r\n    if (stream && !stream.failed) {\r\n      stream.pc.get(arg.peerSocket).processSignalingMessage(arg.msg);\r\n    } else {\r\n      stream = remoteStreams.get(arg.streamId);\r\n\r\n      if (!stream.pc) {\r\n        createRemoteStreamP2PConnection(stream, arg.peerSocket);\r\n      }\r\n      stream.pc.processSignalingMessage(arg.msg);\r\n    }\r\n  };\r\n\r\n  const socketOnPublishMe = (arg) => {\r\n    const myStream = localStreams.get(arg.streamId);\r\n\r\n    createLocalStreamP2PConnection(myStream, arg.peerSocket);\r\n  };\r\n\r\n  const socketOnUnpublishMe = (arg) => {\r\n    const myStream = localStreams.get(arg.streamId);\r\n    if (myStream) {\r\n      removeLocalStreamP2PConnection(myStream, arg.peerSocket);\r\n    }\r\n  };\r\n\r\n  const socketOnBandwidthAlert = (arg) => {\r\n    Logger.info('Bandwidth Alert on', arg.streamID, 'message',\r\n                        arg.message, 'BW:', arg.bandwidth);\r\n    if (arg.streamID) {\r\n      const stream = remoteStreams.get(arg.streamID);\r\n      if (stream && !stream.failed) {\r\n        const evt = StreamEvent({ type: 'bandwidth-alert',\r\n          stream,\r\n          msg: arg.message,\r\n          bandwidth: arg.bandwidth });\r\n        stream.dispatchEvent(evt);\r\n      }\r\n    }\r\n  };\r\n\r\n  // We receive an event of new data in one of the streams\r\n  const socketOnDataStream = (arg) => {\r\n    const stream = remoteStreams.get(arg.id);\r\n    const evt = StreamEvent({ type: 'stream-data', msg: arg.msg, stream });\r\n    stream.dispatchEvent(evt);\r\n  };\r\n\r\n  // We receive an event of new data in one of the streams\r\n  const socketOnUpdateAttributeStream = (arg) => {\r\n    const stream = remoteStreams.get(arg.id);\r\n    const evt = StreamEvent({ type: 'stream-attributes-update',\r\n      attrs: arg.attrs,\r\n      stream });\r\n    stream.updateLocalAttributes(arg.attrs);\r\n    stream.dispatchEvent(evt);\r\n  };\r\n\r\n  // We receive an event of a stream removed from the room\r\n  const socketOnRemoveStream = (arg) => {\r\n    let stream = localStreams.get(arg.id);\r\n    if (stream) {\r\n      onStreamFailed(stream);\r\n      return;\r\n    }\r\n    stream = remoteStreams.get(arg.id);\r\n    if (stream) {\r\n      removeStream(stream);\r\n      remoteStreams.remove(arg.id);\r\n      const evt = StreamEvent({ type: 'stream-removed', stream });\r\n      that.dispatchEvent(evt);\r\n    }\r\n  };\r\n\r\n  // The socket has disconnected\r\n  const socketOnDisconnect = () => {\r\n    Logger.info('Socket disconnected, lost connection to ErizoController');\r\n    if (that.state !== DISCONNECTED) {\r\n      Logger.error('Unexpected disconnection from ErizoController');\r\n      const disconnectEvt = RoomEvent({ type: 'room-disconnected',\r\n        message: 'unexpected-disconnection' });\r\n      that.dispatchEvent(disconnectEvt);\r\n    }\r\n  };\r\n\r\n  const socketOnICEConnectionFailed = (arg) => {\r\n    let stream;\r\n    if (!arg.streamId) {\r\n      return;\r\n    }\r\n    const message = `ICE Connection Failed on ${arg.type} ${arg.streamId} ${that.state}`;\r\n    Logger.error(message);\r\n    if (arg.type === 'publish') {\r\n      stream = localStreams.get(arg.streamId);\r\n    } else {\r\n      stream = remoteStreams.get(arg.streamId);\r\n    }\r\n    onStreamFailed(stream, message);\r\n  };\r\n\r\n  const socketOnError = (e) => {\r\n    Logger.error('Cannot connect to erizo Controller');\r\n    const connectEvt = RoomEvent({ type: 'room-error', message: e });\r\n    that.dispatchEvent(connectEvt);\r\n  };\r\n\r\n  const sendDataSocketFromStreamEvent = (evt) => {\r\n    const stream = evt.stream;\r\n    const msg = evt.msg;\r\n    if (stream.local) {\r\n      socket.sendMessage('sendDataStream', { id: stream.getID(), msg });\r\n    } else {\r\n      Logger.error('You can not send data through a remote stream');\r\n    }\r\n  };\r\n\r\n  const updateAttributesFromStreamEvent = (evt) => {\r\n    const stream = evt.stream;\r\n    const attrs = evt.attrs;\r\n    if (stream.local) {\r\n      stream.updateLocalAttributes(attrs);\r\n      socket.sendMessage('updateStreamAttributes', { id: stream.getID(), attrs });\r\n    } else {\r\n      Logger.error('You can not update attributes in a remote stream');\r\n    }\r\n  };\r\n\r\n  const socketEventToArgs = (func, event) => {\r\n    if (event.args) {\r\n      func(...event.args);\r\n    } else {\r\n      func();\r\n    }\r\n  };\r\n\r\n  const createSdpConstraints = (type, stream, options) => ({\r\n    state: type,\r\n    data: stream.hasData(),\r\n    audio: stream.hasAudio(),\r\n    video: stream.hasVideo(),\r\n    label: stream.getLabel(),\r\n    screen: stream.hasScreen(),\r\n    attributes: stream.getAttributes(),\r\n    metadata: options.metadata,\r\n    createOffer: options.createOffer,\r\n    muteStream: options.muteStream,\r\n  });\r\n\r\n  const populateStreamFunctions = (id, streamInput, error, callback = () => {}) => {\r\n    const stream = streamInput;\r\n    if (id === null) {\r\n      Logger.error('Error when publishing the stream', error);\r\n      // Unauth -1052488119\r\n      // Network -5\r\n      callback(undefined, error);\r\n      return;\r\n    }\r\n    Logger.info('Stream published');\r\n    stream.getID = () => id;\r\n    stream.on('internal-send-data', sendDataSocketFromStreamEvent);\r\n    stream.on('internal-set-attributes', updateAttributesFromStreamEvent);\r\n    localStreams.add(id, stream);\r\n    stream.room = that;\r\n    callback(id);\r\n  };\r\n\r\n  const publishExternal = (streamInput, options, callback = () => {}) => {\r\n    const stream = streamInput;\r\n    let type;\r\n    let arg;\r\n    if (stream.url) {\r\n      type = 'url';\r\n      arg = stream.url;\r\n    } else {\r\n      type = 'recording';\r\n      arg = stream.recording;\r\n    }\r\n    Logger.info('Checking publish options for', stream.getID());\r\n    stream.checkOptions(options);\r\n    socket.sendSDP('publish', createSdpConstraints(type, stream, options), arg,\r\n      (id, error) => {\r\n        populateStreamFunctions(id, stream, error, callback);\r\n      });\r\n  };\r\n\r\n  const publishP2P = (streamInput, options, callback = () => {}) => {\r\n    const stream = streamInput;\r\n    // We save them now to be used when actually publishing in P2P mode.\r\n    stream.maxAudioBW = options.maxAudioBW;\r\n    stream.maxVideoBW = options.maxVideoBW;\r\n    socket.sendSDP('publish', createSdpConstraints('p2p', stream, options), undefined, (id, error) => {\r\n      populateStreamFunctions(id, stream, error, callback);\r\n    });\r\n  };\r\n\r\n  const publishData = (streamInput, options, callback = () => {}) => {\r\n    const stream = streamInput;\r\n    socket.sendSDP('publish', createSdpConstraints('data', stream, options), undefined, (id, error) => {\r\n      populateStreamFunctions(id, stream, error, callback);\r\n    });\r\n  };\r\n\r\n  const publishErizo = (streamInput, options, callback = () => {}) => {\r\n    const stream = streamInput;\r\n    Logger.info('Publishing to Erizo Normally, is createOffer', options.createOffer);\r\n    const constraints = createSdpConstraints('erizo', stream, options);\r\n    constraints.minVideoBW = options.minVideoBW;\r\n    constraints.maxVideoBW = options.maxVideoBW;\r\n    constraints.scheme = options.scheme;\r\n\r\n    socket.sendSDP('publish', constraints, undefined, (id, erizoId, error) => {\r\n      if (id === null) {\r\n        Logger.error('Error publishing stream', error);\r\n        callback(undefined, error);\r\n        return;\r\n      }\r\n      populateStreamFunctions(id, stream, error, undefined);\r\n      createLocalStreamErizoConnection(stream, erizoId, options);\r\n      callback(id);\r\n    });\r\n  };\r\n\r\n  const getVideoConstraints = (stream, video) => {\r\n    const hasVideo = video && stream.hasVideo();\r\n    const width = video && video.width;\r\n    const height = video && video.height;\r\n    const frameRate = video && video.frameRate;\r\n    if (width || height || frameRate) {\r\n      return { width, height, frameRate };\r\n    }\r\n    return hasVideo;\r\n  };\r\n\r\n  const subscribeErizo = (streamInput, optionsInput, callback = () => {}) => {\r\n    const stream = streamInput;\r\n    const options = optionsInput;\r\n    options.maxVideoBW = options.maxVideoBW || spec.defaultVideoBW;\r\n    if (options.maxVideoBW > spec.maxVideoBW) {\r\n      options.maxVideoBW = spec.maxVideoBW;\r\n    }\r\n    options.audio = (options.audio === undefined) ? true : options.audio;\r\n    options.video = (options.video === undefined) ? true : options.video;\r\n    options.data = (options.data === undefined) ? true : options.data;\r\n    stream.checkOptions(options);\r\n    const constraint = { streamId: stream.getID(),\r\n      audio: options.audio && stream.hasAudio(),\r\n      video: getVideoConstraints(stream, options.video),\r\n      maxVideoBW: options.maxVideoBW,\r\n      data: options.data && stream.hasData(),\r\n      browser: that.ConnectionHelpers.getBrowser(),\r\n      createOffer: options.createOffer,\r\n      metadata: options.metadata,\r\n      muteStream: options.muteStream,\r\n      slideShowMode: options.slideShowMode };\r\n    socket.sendSDP('subscribe', constraint, undefined, (result, erizoId, error) => {\r\n      if (result === null) {\r\n        Logger.error('Error subscribing to stream ', error);\r\n        callback(undefined, error);\r\n        return;\r\n      }\r\n\r\n      Logger.info('Subscriber added');\r\n      createRemoteStreamErizoConnection(stream, erizoId, options);\r\n\r\n      callback(true);\r\n    });\r\n  };\r\n\r\n  const subscribeData = (streamInput, options, callback = () => {}) => {\r\n    const stream = streamInput;\r\n    socket.sendSDP('subscribe',\r\n      { streamId: stream.getID(),\r\n        data: options.data,\r\n        metadata: options.metadata },\r\n      undefined, (result, error) => {\r\n        if (result === null) {\r\n          Logger.error('Error subscribing to stream ', error);\r\n          callback(undefined, error);\r\n          return;\r\n        }\r\n        Logger.info('Stream subscribed');\r\n        const evt = StreamEvent({ type: 'stream-subscribed', stream });\r\n        that.dispatchEvent(evt);\r\n        callback(true);\r\n      });\r\n  };\r\n\r\n  const clearAll = () => {\r\n    that.state = DISCONNECTED;\r\n    socket.state = socket.DISCONNECTED;\r\n\r\n    // Remove all streams\r\n    remoteStreams.forEach((stream, id) => {\r\n      removeStream(stream);\r\n      remoteStreams.remove(id);\r\n      if (stream && !stream.failed) {\r\n        const evt2 = StreamEvent({ type: 'stream-removed', stream });\r\n        that.dispatchEvent(evt2);\r\n      }\r\n    });\r\n    remoteStreams = ErizoMap();\r\n\r\n    // Close Peer Connections\r\n    localStreams.forEach((stream, id) => {\r\n      removeStream(stream);\r\n      localStreams.remove(id);\r\n    });\r\n    localStreams = ErizoMap();\r\n\r\n    // Close socket\r\n    try {\r\n      socket.disconnect();\r\n    } catch (error) {\r\n      Logger.debug('Socket already disconnected');\r\n    }\r\n    socket = undefined;\r\n  };\r\n\r\n  // Public functions\r\n\r\n  // It stablishes a connection to the room.\r\n  // Once it is done it throws a RoomEvent(\"room-connected\")\r\n  that.connect = (options = {}) => {\r\n    const token = Base64.decodeBase64(spec.token);\r\n\r\n    if (that.state !== DISCONNECTED) {\r\n      Logger.warning('Room already connected');\r\n    }\r\n\r\n    // 1- Connect to Erizo-Controller\r\n    that.state = CONNECTING;\r\n    socket.connect(JSON.parse(token), options, (response) => {\r\n      let stream;\r\n      const streamList = [];\r\n      const streams = response.streams || [];\r\n      const roomId = response.id;\r\n\r\n      that.p2p = response.p2p;\r\n      that.iceServers = response.iceServers;\r\n      that.state = CONNECTED;\r\n      spec.singlePC = response.singlePC;\r\n      spec.defaultVideoBW = response.defaultVideoBW;\r\n      spec.maxVideoBW = response.maxVideoBW;\r\n\r\n      // 2- Retrieve list of streams\r\n      const streamIndices = Object.keys(streams);\r\n      for (let index = 0; index < streamIndices.length; index += 1) {\r\n        const arg = streams[streamIndices[index]];\r\n        stream = Stream(that.ConnectionHelpers, { streamID: arg.id,\r\n          local: false,\r\n          audio: arg.audio,\r\n          video: arg.video,\r\n          data: arg.data,\r\n          label: arg.label,\r\n          screen: arg.screen,\r\n          attributes: arg.attributes });\r\n        stream.room = that;\r\n        streamList.push(stream);\r\n        remoteStreams.add(arg.id, stream);\r\n      }\r\n\r\n      // 3 - Update RoomID\r\n      that.roomID = roomId;\r\n\r\n      Logger.info(`Connected to room ${that.roomID}`);\r\n\r\n      const connectEvt = RoomEvent({ type: 'room-connected', streams: streamList });\r\n      that.dispatchEvent(connectEvt);\r\n    }, (error) => {\r\n      Logger.error(`Not Connected! Error: ${error}`);\r\n      const connectEvt = RoomEvent({ type: 'room-error', message: error });\r\n      that.dispatchEvent(connectEvt);\r\n    });\r\n  };\r\n\r\n  // It disconnects from the room, dispatching a new RoomEvent(\"room-disconnected\")\r\n  that.disconnect = () => {\r\n    Logger.debug('Disconnection requested');\r\n    // 1- Disconnect from room\r\n    const disconnectEvt = RoomEvent({ type: 'room-disconnected',\r\n      message: 'expected-disconnection' });\r\n    that.dispatchEvent(disconnectEvt);\r\n  };\r\n\r\n  // It publishes the stream provided as argument. Once it is added it throws a\r\n  // StreamEvent(\"stream-added\").\r\n  that.publish = (streamInput, optionsInput = {}, callback = () => {}) => {\r\n    const stream = streamInput;\r\n    const options = optionsInput;\r\n\r\n    options.maxVideoBW = options.maxVideoBW || spec.defaultVideoBW;\r\n    if (options.maxVideoBW > spec.maxVideoBW) {\r\n      options.maxVideoBW = spec.maxVideoBW;\r\n    }\r\n\r\n    if (options.minVideoBW === undefined) {\r\n      options.minVideoBW = 0;\r\n    }\r\n\r\n    if (options.minVideoBW > spec.defaultVideoBW) {\r\n      options.minVideoBW = spec.defaultVideoBW;\r\n    }\r\n\r\n    stream.forceTurn = options.forceTurn;\r\n\r\n    options.simulcast = options.simulcast || false;\r\n\r\n    options.muteStream = {\r\n      audio: stream.audioMuted,\r\n      video: stream.videoMuted,\r\n    };\r\n\r\n    // 1- If the stream is not local or it is a failed stream we do nothing.\r\n    if (stream && stream.local && !stream.failed && !localStreams.has(stream.getID())) {\r\n      // 2- Publish Media Stream to Erizo-Controller\r\n      if (stream.hasMedia()) {\r\n        if (stream.isExternal()) {\r\n          publishExternal(stream, options, callback);\r\n        } else if (that.p2p) {\r\n          publishP2P(stream, options, callback);\r\n        } else {\r\n          publishErizo(stream, options, callback);\r\n        }\r\n      } else if (stream.hasData()) {\r\n        publishData(stream, options, callback);\r\n      }\r\n    } else {\r\n      Logger.error('Trying to publish invalid stream');\r\n      callback(undefined, 'Invalid Stream');\r\n    }\r\n  };\r\n\r\n  // Returns callback(id, error)\r\n  that.startRecording = (stream, callback = () => {}) => {\r\n    if (stream === undefined) {\r\n      Logger.error('Trying to start recording on an invalid stream', stream);\r\n      callback(undefined, 'Invalid Stream');\r\n      return;\r\n    }\r\n    Logger.debug(`Start Recording stream: ${stream.getID()}`);\r\n    socket.sendMessage('startRecorder', { to: stream.getID() }, (id, error) => {\r\n      if (id === null) {\r\n        Logger.error('Error on start recording', error);\r\n        callback(undefined, error);\r\n        return;\r\n      }\r\n\r\n      Logger.info('Start recording', id);\r\n      callback(id);\r\n    });\r\n  };\r\n\r\n  // Returns callback(id, error)\r\n  that.stopRecording = (recordingId, callback = () => {}) => {\r\n    socket.sendMessage('stopRecorder', { id: recordingId }, (result, error) => {\r\n      if (result === null) {\r\n        Logger.error('Error on stop recording', error);\r\n        callback(undefined, error);\r\n        return;\r\n      }\r\n      Logger.info('Stop recording', recordingId);\r\n      callback(true);\r\n    });\r\n  };\r\n\r\n  // It unpublishes the local stream in the room, dispatching a StreamEvent(\"stream-removed\")\r\n  that.unpublish = (streamInput, callback = () => {}) => {\r\n    const stream = streamInput;\r\n    // Unpublish stream from Erizo-Controller\r\n    if (stream && stream.local) {\r\n      // Media stream\r\n      socket.sendMessage('unpublish', stream.getID(), (result, error) => {\r\n        if (result === null) {\r\n          Logger.error('Error unpublishing stream', error);\r\n          callback(undefined, error);\r\n          return;\r\n        }\r\n\r\n        delete stream.failed;\r\n        callback(true);\r\n      });\r\n\r\n      Logger.info('Stream unpublished');\r\n      stream.room = undefined;\r\n      if (stream.hasMedia() && !stream.isExternal()) {\r\n        const localStream = localStreams.has(stream.getID()) ?\r\n                              localStreams.get(stream.getID()) : stream;\r\n        removeStream(localStream);\r\n      }\r\n      localStreams.remove(stream.getID());\r\n\r\n      stream.getID = () => {};\r\n      stream.off('internal-send-data', sendDataSocketFromStreamEvent);\r\n      stream.off('internal-set-attributes', updateAttributesFromStreamEvent);\r\n    } else {\r\n      const error = 'Cannot unpublish, stream does not exist or is not local';\r\n      Logger.error(error);\r\n      callback(undefined, error);\r\n    }\r\n  };\r\n\r\n  that.sendControlMessage = (stream, type, action) => {\r\n    if (stream && stream.getID()) {\r\n      const msg = { type: 'control', action };\r\n      socket.sendSDP('signaling_message', { streamId: stream.getID(), msg });\r\n    }\r\n  };\r\n\r\n  // It subscribe to a remote stream and draws it inside the HTML tag given by the ID='elementID'\r\n  that.subscribe = (streamInput, optionsInput = {}, callback = () => {}) => {\r\n    const stream = streamInput;\r\n    const options = optionsInput;\r\n\r\n    if (stream && !stream.local && !stream.failed) {\r\n      if (stream.hasMedia()) {\r\n        // 1- Subscribe to Stream\r\n        if (!stream.hasVideo() && !stream.hasScreen()) {\r\n          options.video = false;\r\n        }\r\n        if (!stream.hasAudio()) {\r\n          options.audio = false;\r\n        }\r\n\r\n        options.muteStream = {\r\n          audio: stream.audioMuted,\r\n          video: stream.videoMuted,\r\n        };\r\n\r\n        stream.forceTurn = options.forceTurn;\r\n\r\n        if (that.p2p) {\r\n          const streamToSubscribe = remoteStreams.get(stream.getID());\r\n          streamToSubscribe.maxAudioBW = options.maxAudioBW;\r\n          streamToSubscribe.maxVideoBW = options.maxVideoBW;\r\n          socket.sendSDP('subscribe', { streamId: stream.getID(), metadata: options.metadata });\r\n          callback(true);\r\n        } else {\r\n          subscribeErizo(stream, options, callback);\r\n        }\r\n      } else if (stream.hasData() && options.data !== false) {\r\n        subscribeData(stream, options, callback);\r\n      } else {\r\n        Logger.warning('There\\'s nothing to subscribe to');\r\n        callback(undefined, 'Nothing to subscribe to');\r\n        return;\r\n      }\r\n      // Subscribe to stream stream\r\n      Logger.info(`Subscribing to: ${stream.getID()}`);\r\n    } else {\r\n      let error = 'Error on subscribe';\r\n      if (!stream) {\r\n        Logger.warning('Cannot subscribe to invalid stream');\r\n        error = 'Invalid or undefined stream';\r\n      } else if (stream.local) {\r\n        Logger.warning('Cannot subscribe to local stream, you should ' +\r\n                         'subscribe to the remote version of your local stream');\r\n        error = 'Local copy of stream';\r\n      } else if (stream.failed) {\r\n        Logger.warning('Cannot subscribe to failed stream.');\r\n        error = 'Failed stream';\r\n      }\r\n      callback(undefined, error);\r\n    }\r\n  };\r\n\r\n  // It unsubscribes from the stream, removing the HTML element.\r\n  that.unsubscribe = (streamInput, callback = () => {}) => {\r\n    const stream = streamInput;\r\n    // Unsubscribe from stream\r\n    if (socket !== undefined) {\r\n      if (stream && !stream.local) {\r\n        socket.sendMessage('unsubscribe', stream.getID(), (result, error) => {\r\n          if (result === null) {\r\n            callback(undefined, error);\r\n            return;\r\n          }\r\n          removeStream(stream);\r\n          delete stream.failed;\r\n          callback(true);\r\n        }, () => {\r\n          Logger.error('Error calling unsubscribe.');\r\n        });\r\n      } else {\r\n        callback(undefined,\r\n          'Error unsubscribing, stream does not exist or is not local');\r\n      }\r\n    }\r\n  };\r\n\r\n  that.getStreamStats = (stream, callback = () => {}) => {\r\n    if (!socket) {\r\n      return 'Error getting stats - no socket';\r\n    }\r\n    if (!stream) {\r\n      return 'Error getting stats - no stream';\r\n    }\r\n\r\n    socket.sendMessage('getStreamStats', stream.getID(), (result) => {\r\n      if (result) {\r\n        callback(result);\r\n      }\r\n    });\r\n    return undefined;\r\n  };\r\n\r\n  // It searchs the streams that have \"name\" attribute with \"value\" value\r\n  that.getStreamsByAttribute = (name, value) => {\r\n    const streams = [];\r\n\r\n    remoteStreams.forEach((stream) => {\r\n      if (stream.getAttributes() !== undefined && stream.getAttributes()[name] === value) {\r\n        streams.push(stream);\r\n      }\r\n    });\r\n\r\n    return streams;\r\n  };\r\n\r\n  that.localStreamsCount = () => {\r\n    return that.localStreams.size();\r\n  };\r\n\r\n  that.on('room-disconnected', clearAll);\r\n\r\n  socket.on('onAddStream', socketEventToArgs.bind(null, socketOnAddStream));\r\n  socket.on('signaling_message_erizo', socketEventToArgs.bind(null, socketOnErizoMessage));\r\n  socket.on('signaling_message_peer', socketEventToArgs.bind(null, socketOnPeerMessage));\r\n  socket.on('publish_me', socketEventToArgs.bind(null, socketOnPublishMe));\r\n  socket.on('unpublish_me', socketEventToArgs.bind(null, socketOnUnpublishMe));\r\n  socket.on('onBandwidthAlert', socketEventToArgs.bind(null, socketOnBandwidthAlert));\r\n  socket.on('onDataStream', socketEventToArgs.bind(null, socketOnDataStream));\r\n  socket.on('onUpdateAttributeStream', socketEventToArgs.bind(null, socketOnUpdateAttributeStream));\r\n  socket.on('onRemoveStream', socketEventToArgs.bind(null, socketOnRemoveStream));\r\n  socket.on('disconnect', socketEventToArgs.bind(null, socketOnDisconnect));\r\n  socket.on('connection_failed', socketEventToArgs.bind(null, socketOnICEConnectionFailed));\r\n  socket.on('error', socketEventToArgs.bind(null, socketOnError));\r\n\r\n  return that;\r\n};\r\n\r\nexport default Room;\r\n","import Room from './Room';\r\nimport { LicodeEvent, RoomEvent, StreamEvent } from './Events';\r\nimport Stream from './Stream';\r\nimport Logger from './utils/Logger';\r\n\r\nimport OldErizo from './OldErizo';\r\n\r\n// eslint-disable-next-line \r\n//require('expose-loader?adapter!../lib/adapter.js');\r\n// eslint-disable-next-line\r\nrequire('script-loader!./utils/L.Resizer.js');\r\n\r\n\r\nconst NewErizo = {\r\n  Room: Room.bind(null, undefined, undefined, undefined),\r\n  LicodeEvent,\r\n  RoomEvent,\r\n  StreamEvent,\r\n  Stream: Stream.bind(null, undefined),\r\n  Logger,\r\n};\r\n\r\nconst ErizoFactory = (version = '1') => {\r\n  switch(version) {\r\n    case '2':\r\n      return NewErizo;\r\n    case '1':\r\n    default:\r\n      return OldErizo;\r\n  }\r\n}\r\n\r\nexport default ErizoFactory;\r\n"],"sourceRoot":""}