{"version":3,"sources":["webpack://Erizo/webpack/bootstrap","webpack://Erizo/./src/utils/Logger.js","webpack://Erizo/./../common/semanticSdp/SemanticSdp.js","webpack://Erizo/./src/utils/ConnectionHelpers.js","webpack://Erizo/./../common/semanticSdp/DirectionWay.js","webpack://Erizo/./../common/semanticSdp/Setup.js","webpack://Erizo/./../common/semanticSdp/Enum.js","webpack://Erizo/./../common/semanticSdp/Direction.js","webpack://Erizo/C:/workspace/www/licode/node_modules/sdp-transform/lib/grammar.js","webpack://Erizo/./../common/semanticSdp/CandidateInfo.js","webpack://Erizo/./../common/semanticSdp/CodecInfo.js","webpack://Erizo/./../common/semanticSdp/DTLSInfo.js","webpack://Erizo/./../common/semanticSdp/ICEInfo.js","webpack://Erizo/./../common/semanticSdp/MediaInfo.js","webpack://Erizo/./../common/semanticSdp/SimulcastInfo.js","webpack://Erizo/./../common/semanticSdp/SourceGroupInfo.js","webpack://Erizo/./../common/semanticSdp/SourceInfo.js","webpack://Erizo/./../common/semanticSdp/StreamInfo.js","webpack://Erizo/./../common/semanticSdp/TrackInfo.js","webpack://Erizo/(webpack)/buildin/global.js","webpack://Erizo/./lib/socket.io.js","webpack://Erizo/./../common/semanticSdp/SDPInfo.js","webpack://Erizo/C:/workspace/www/licode/node_modules/sdp-transform/lib/index.js","webpack://Erizo/C:/workspace/www/licode/node_modules/sdp-transform/lib/parser.js","webpack://Erizo/C:/workspace/www/licode/node_modules/sdp-transform/lib/writer.js","webpack://Erizo/./../common/semanticSdp/TrackEncodingInfo.js","webpack://Erizo/./../common/semanticSdp/SimulcastStreamInfo.js","webpack://Erizo/./../common/semanticSdp/RIDInfo.js","webpack://Erizo/(webpack)/buildin/harmony-module.js","webpack://Erizo/(webpack)/buildin/module.js","webpack://Erizo/./lib/adapter.js-exposed","webpack://Erizo/./lib/adapter.js","webpack://Erizo/./src/utils/L.Resizer.js?a91e","webpack://Erizo/C:/workspace/www/licode/node_modules/script-loader/addScript.js","webpack://Erizo/./src/utils/L.Resizer.js","webpack://Erizo/./src/utils/SdpHelpers.js","webpack://Erizo/./src/webrtc-stacks/BaseStack.js","webpack://Erizo/./src/webrtc-stacks/ChromeStableStack.js","webpack://Erizo/./src/webrtc-stacks/FirefoxStack.js","webpack://Erizo/./src/webrtc-stacks/FcStack.js","webpack://Erizo/./src/Events.js","webpack://Erizo/./src/utils/ErizoMap.js","webpack://Erizo/./src/ErizoConnectionManager.js","webpack://Erizo/./src/Socket.js","webpack://Erizo/./src/views/View.js","webpack://Erizo/./src/views/Speaker.js","webpack://Erizo/./src/views/Bar.js","webpack://Erizo/./src/views/VideoPlayer.js","webpack://Erizo/./src/views/AudioPlayer.js","webpack://Erizo/./src/Stream.js","webpack://Erizo/./src/utils/Base64.js","webpack://Erizo/./src/Room.js","webpack://Erizo/./src/Erizo.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Logger","outputFunction","logPrefix","args","_console","console","log","apply","_toConsumableArray","DEBUG","TRACE","INFO","WARNING","ERROR","NONE","setLogLevel","level","targetLevel","logLevel","setOutputFunction","newOutputFunction","setLogPrefix","newLogPrefix","out","concat","_len","arguments","length","Array","_key","tempArgs","undefined","panel","tmp","idx","debug","_len2","_key2","trace","_len3","_key3","info","_len4","_key4","warning","_len5","_key5","error","_len6","_key6","__webpack_exports__","SDPInfo","CandidateInfo","CodecInfo","DTLSInfo","ICEInfo","MediaInfo","Setup","SourceGroupInfo","SourceInfo","StreamInfo","TrackInfo","Direction","_Logger__WEBPACK_IMPORTED_MODULE_0__","getBrowser","browser","window","navigator","userAgent","match","ConnectionHelpers","GetUserMedia","config","screenConfig","callback","getUserMedia","userMediaConfig","cb","errorCb","mediaDevices","then","catch","screen","video","mandatory","chromeMediaSource","chromeMediaSourceId","desktopStreamId","mediaSource","audio","App","isDesktop","chrome","desktopCapture","chooseDesktopMedia","id","extensionId","runtime","sendMessage","getStream","response","theId","streamId","code","e","configureScreensharing","DirectionWay","Enum","byValue","direction","toUpperCase","toString","SEND","RECV","reverse","setup","ACTIVE","PASSIVE","ACTPASS","INACTIVE","_this","this","Function","slice","from","forEach","arg","for","SENDRECV","SENDONLY","RECVONLY","grammar","v","reg","names","format","u","z","b","push","a","rate","address","subtype","sessionConfig","str","raddr","tcptype","generation","attribute","maxMessageSize","RegExp","dir2","keys","obj","foundation","componentId","transport","priority","port","type","relAddr","relPort","_classCallCheck","plain","codec","encoding","params","feedback","cloned","rtx","setRTX","paramName","mapFromNames","codecs","Map","dyn","nameWithUpperCases","pt","toLowerCase","set","getCodec","hash","fingerprint","randomIntInc","low","high","range","random","Math","floor","randomBytes","size","numbers","Uint8Array","buf2hex","buffer","map","x","hexValue","join","ufrag","pwd","opts","lite","endOfCandidates","setLite","setEndOfCandidates","generate","frag","SimulcastInfo","extensions","rids","simulcast","simulcast_03","bitrate","ice","dtls","connection","candidates","setDirection","setBitrate","setConnection","addCodec","clone","extension","addExtension","rid","addRID","setSimulcast","xGoogleFlag","setXGoogleFlag","setICE","setDTLS","candidate","addCandidate","setSetup","ridInfo","getId","codecInfo","getType","result","dtlsInfo","iceInfo","supported","answer","has","setType","hasRTX","getRTX","sendEntries","getSimulcastStreams","sendStreams","alternatives","sendStream","addSimulcastAlternativeStreams","recvEntries","recvStreams","recvStream","reversed","getDirection","send","recv","plainString","streams","stream","string","semantics","ssrcs","ssrc","parseInt","setCName","cname","setStreamId","setTrackId","trackId","label","mslabel","trackid","tracks","track","addTrack","media","getMedia","clear","groups","encodings","mediaId","setMediaId","addSSRC","group","addSourceGroup","entry","addAlternativeEncoding","schematics","getSemantics","g","eval","_typeof","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","__WEBPACK_AMD_DEFINE_FACTORY__","loaded","source","h","path","f","nsps","forceNew","multiplex","query","socket","iterator","constructor","managers","protocol","connect","Manager","Socket","location","host","charAt","test","indexOf","href","substring","replace","exec","authority","ipv6uri","storage","env","formatArgs","useColors","namespace","humanize","diff","color","splice","save","removeItem","load","process","document","documentElement","style","WebkitAppearance","firebug","exception","table","$1","local","localStorage","colors","formatters","j","JSON","stringify","message","enable","Error","setTimeout","y","run","clearTimeout","fun","array","nextTick","title","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","umask","enabled","Date","prev","curr","coerce","unshift","charCodeAt","abs","init","stack","disable","skips","split","substr","ceil","String","parseFloat","isNaN","round","BINARY_EVENT","BINARY_ACK","attachments","nsp","data","reconstructor","Number","types","parse","reconPack","buffers","CONNECT","DISCONNECT","EVENT","ACK","Encoder","Decoder","encode","removeBlobs","deconstructPacket","packet","add","base64","takeBinaryData","destroy","finishedReconstruction","reconstructPacket","addEventListener","_callbacks","fn","removeEventListener","hasListeners","Blob","File","Buffer","isBuffer","ArrayBuffer","toJSON","isArray","_placeholder","num","FileReader","onload","readAsArrayBuffer","subs","reconnection","reconnectionAttempts","reconnectionDelay","reconnectionDelayMax","randomizationFactor","backoff","min","max","jitter","timeout","readyState","uri","connecting","lastPing","packetBuffer","parser","encoder","decoder","autoConnect","open","emitAll","updateSocketIds","generateId","engine","_reconnection","_reconnectionAttempts","_reconnectionDelay","setMin","_randomizationFactor","setJitter","_reconnectionDelayMax","setMax","_timeout","maybeReconnectOnOpen","reconnecting","attempts","reconnect","skipReconnect","onopen","cleanup","close","onping","onpong","ondata","ondecoded","onerror","write","options","processPacketQueue","shift","disconnect","reset","onclose","duration","onreconnect","hostname","secure","agent","decode","upgrade","forceJSONP","jsonp","forceBase64","enablesXDR","timestampParam","timestampRequests","transports","transportOptions","writeBuffer","prevBufferLen","policyPort","rememberUpgrade","binaryType","onlyBinaryUpgrades","perMessageDeflate","threshold","pfx","passphrase","cert","ca","ciphers","rejectUnauthorized","forceNode","global","extraHeaders","localAddress","upgrades","pingInterval","pingTimeout","pingIntervalTimer","pingTimeoutTimer","priorWebsocketSuccess","Transport","createTransport","EIO","sid","requestTimeout","protocols","setTransport","onDrain","onPacket","onError","onClose","probe","supportsBinary","upgrading","pause","flush","onOpen","onHandshake","setPing","filterUpgrades","onHeartbeat","ping","sendPacket","writable","compress","polling","xdomain","xscheme","websocket","XMLHttpRequest","XDomainRequest","xd","xs","method","async","isBinary","requests","abort","Request","request","doWrite","sendXhr","doPoll","onData","pollXhr","xhr","setDisableHeaderCheck","setRequestHeader","withCredentials","hasXDR","onLoad","responseText","onreadystatechange","getResponseHeader","responseType","status","index","requestsCount","onSuccess","attachEvent","doOpen","poll","decodePayload","doClose","encodePayload","b64","description","decodePacket","packets","encodeBase64Packet","byteLength","encodePacket","k","pong","noop","w","strict","readAsDataURL","fromCharCode","btoa","decodeBase64Packet","encodePayloadAsBlob","encodePayloadAsArrayBuffer","decodePayloadAsBinary","reduce","count","webpackPolyfill","deprecate","paths","children","byteOffset","append","getBlob","BlobBuilder","WebKitBlobBuilder","MSBlobBuilder","MozBlobBuilder","encodeURIComponent","decodeURIComponent","___eio","script","parentNode","removeChild","form","iframe","createElement","src","getElementsByTagName","insertBefore","head","body","appendChild","iframeId","className","position","top","left","target","setAttribute","area","action","submit","usingBrowserWebSocket","WebSocket","MozWebSocket","check","headers","ws","supports","binary","addEventListeners","onmessage","io","json","ids","acks","receiveBuffer","sendBuffer","connected","disconnected","connect_error","connect_timeout","reconnect_attempt","reconnect_failed","reconnect_error","subEvents","flags","pop","onpacket","onconnect","onevent","onack","ondisconnect","ack","emitBuffered","ms","factor","pow","SDPTransform","TrackEncodingInfo","SimulcastStreamInfo","RIDInfo","medias","addMedia","addStream","origin","timing","msid","values","delete","sdp","username","sessionId","getTime","sessionVersion","netType","ipVer","getConnection","start","stop","getICE","isLite","icelite","iceOptions","getOpts","iceUfrag","getUfrag","icePwd","getPwd","msidSemantic","semantic","token","bundle","mids","getDTLS","getHash","getFingerprint","getSetup","md","getPort","fmtp","rtp","rtcpFb","ext","bandwidth","ssrcGroups","rtcpMux","getXGoogleFlag","mid","rtcp","getBitrate","limit","getCandidates","getFoundation","component","getComponentId","getTransport","getPriority","ip","getAddress","getRelAddr","getRelPort","getGeneration","isEndOfCandidates","getCodecs","payload","getRate","getEncoding","getParams","item","getFeedback","payloads","getExtensions","getRIDs","getFormats","param","prefix","getSimulcast","simulcast03","getSimulcast03","list","isPaused","getSimulcastPlainString","sort","m1","m2","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","next","done","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","getTracks","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_loop","getMediaId","getSourceGroups","getSSRCs","getCName","getStreamId","getTrackId","getMSLabel","getLabel","_iterator3","err","return","getSimulcastDir","simulcastDir","simulcastList","parseSimulcastStreamList","scid","paused","processString","sdpInfo","setVersion","setTiming","setOrigin","fingerprintAttr","remoteHash","remoteFingerprint","mediaInfo","thisIce","apts","fmt","trim","apt","getCodecForType","extmaps","extmap","formats","parseParams","setFormats","setParams","sources","ssrcAttr","getSSRC","setMSLabel","setLabel","getTrack","setEncodings","ssrcGroupAttr","getRID","setSimulcastPlainString","getSimulcast3Dir","setSimulcast03","writer","parseFmtpConfig","parsePayloads","parseRemoteCandidates","parseImageAttributes","toIntIfInt","parseReg","content","needsBlank","keyLocation","rawName","attachProperties","validLine","session","filter","paramReducer","acc","expr","parts","formatRegExp","makeLine","formatStr","len","defaultOuterOrder","defaultInnerOrder","mLine","outerOrder","innerOrder","el","originalModule","require","1","SDPUtils","writeMediaSection","transceiver","caps","dtlsRole","writeRtpDescription","kind","writeIceParameters","iceGatherer","getLocalParameters","writeDtlsParameters","dtlsTransport","rtpSender","rtpReceiver","sendEncodingParameters","localCName","getCommonCapabilities","localCapabilities","remoteCapabilities","commonCapabilities","headerExtensions","fecMechanisms","findCodecByPayloadType","payloadType","preferredPayloadType","rtxCapabilityMatches","lRtx","rRtx","lCodecs","rCodecs","lCodec","parameters","rCodec","clockRate","numChannels","rtcpFeedback","fb","parameter","lHeaderExtension","rHeaderExtension","isActionAllowedInSignalingState","signalingState","offer","setLocalDescription","setRemoteDescription","maybeAddCandidate","iceTransport","alreadyAdded","getRemoteCandidates","find","remoteCandidate","addRemoteCandidate","edgeVersion","RTCPeerConnection","self","_eventTarget","createDocumentFragment","onicecandidate","onaddstream","ontrack","onremovestream","onsignalingstatechange","oniceconnectionstatechange","onicegatheringstatechange","onnegotiationneeded","ondatachannel","canTrickleIceCandidates","needNegotiation","localStreams","remoteStreams","localDescription","remoteDescription","iceConnectionState","iceGatheringState","usingBundle","bundlePolicy","rtcpMuxPolicy","iceTransportPolicy","iceServers","hasTurn","server","urls","url","warn","isString","filterIceServers","_iceGatherers","iceCandidatePoolSize","RTCIceGatherer","gatherPolicy","_config","transceivers","_sdpSessionId","generateSessionId","_sdpSessionVersion","_dtlsRole","_emitGatheringStateChange","event","Event","dispatchEvent","getConfiguration","getLocalStreams","getRemoteStreams","_createTransceiver","hasBundleTransport","recvEncodingParameters","wantReceive","_createIceAndDtlsTransports","_maybeFireNegotiationNeeded","RTCRtpSender","clonedStream","clonedTrack","removeStream","getSenders","getReceivers","_createIceGatherer","sdpMLineIndex","bufferCandidates","end","state","_gather","onlocalcandidate","evt","sdpMid","cand","writeCandidate","sections","splitSections","complete","every","RTCIceTransport","onicestatechange","_updateConnectionState","RTCDtlsTransport","ondtlsstatechange","_disposeIceAndDtlsTransports","_transceive","compound","rtcpParameters","receive","sessionpart","Promise","resolve","reject","mediaSection","parseRtpParameters","isIceLite","matchPrefix","isRejected","isDatachannel","remoteIceParameters","getIceParameters","remoteDtlsParameters","getDtlsParameters","role","_updateSignalingState","TypeError","receiverList","lines","splitLines","getKind","rejected","remoteMsid","parseMsid","getMid","generateIdentifier","parseRtpEncodingParameters","parseRtcpParameters","isComplete","cands","parseCandidate","setRemoteCandidates","MediaStream","default","RTCRtpReceiver","getCapabilities","isNewTrack","receiver","trackEvent","newState","states","new","closed","checking","completed","failed","createOffer","offerOptions","numAudioTracks","numVideoTracks","optional","offerToReceiveAudio","offerToReceiveVideo","writeSessionBoilerplate","getLocalCandidates","desc","RTCSessionDescription","createAnswer","mediaSectionsInOffer","localTrack","getAudioTracks","getVideoTracks","reducedSize","addIceCandidate","candidateString","getStats","promises","results","all","res","stat","inboundrtp","outboundrtp","candidatepair","localcandidate","remotecandidate","fixStatsType","2","blob","line","part","relatedAddress","relatedPort","tcpType","usernameFragment","parseIceOptions","parseRtpMap","parsed","writeRtpMap","parseExtmap","writeExtmap","headerExtension","preferredId","parseFmtp","kv","writeFmtp","parseRtcpFb","writeRtcpFb","parseSsrcMedia","sp","colon","parseFingerprint","algorithm","fingerprints","setupType","fp","password","mline","rtpmapline","fmtps","maxptime","secondarySsrc","encodingParameters","hasRed","hasUlpfec","primarySsrc","flows","encParam","codecPayloadType","fec","mechanism","maxBitrate","remoteSsrc","rsize","mux","spec","planB","sessId","sessVer","parseMLine","3","adapterFactory","./adapter_factory.js","4","utils","dependencies","shimChrome","shimFirefox","shimEdge","shimSafari","logging","browserDetails","detectBrowser","adapter","extractVersion","disableLog","disableWarnings","chromeShim","edgeShim","firefoxShim","safariShim","commonShim","shimPeerConnection","browserShim","shimCreateObjectURL","shimGetUserMedia","shimMediaStream","shimSourceObject","shimOnTrack","shimAddTrackRemoveTrack","shimGetSendersWithDtmf","shimRTCIceCandidate","shimReplaceTrack","shimRTCIceServerUrls","shimCallbacksAPI","shimLocalStreamsAPI","shimRemoteStreamsAPI","shimTrackEventTransceiver","shimCreateOfferLegacy","./chrome/chrome_shim","./common_shim","./edge/edge_shim","./firefox/firefox_shim","./safari/safari_shim","./utils","5","webkitMediaStream","_ontrack","origSetRemoteDescription","pc","_ontrackpoly","te","shimSenderWithDtmf","dtmf","_dtmf","createDTMFSender","_pc","_senders","origAddTrack","sender","origRemoveTrack","removeTrack","origAddStream","origRemoveStream","origGetSenders","senders","URL","HTMLMediaElement","_srcObject","revokeObjectURL","createObjectURL","origGetLocalStreams","nativeStreams","_reverseStreams","_streams","DOMException","newStream","oldStream","nativeMethod","replaceInternalStreamId","origSetLocalDescription","internalId","externalStream","internalStream","replaceExternalStreamId","origLocalDescription","getOwnPropertyDescriptor","streamid","OrigPeerConnection","pcConfig","pcConstraints","newIceServers","deprecated","generateCertificate","iceTransports","webkitRTCPeerConnection","origGetStats","selector","successCallback","errorCallback","fixChromeStats_","standardReport","report","standardStats","timestamp","makeMapStats","stats","promise","RTCIceCandidate","nativeAddIceCandidate","../utils.js","./getusermedia","6","constraintsToChrome_","cc","ideal","exact","oldname_","oc","mix","advanced","shimConstraints_","constraints","func","remap","face","facingMode","matches","getSupportedFacingModeLies","getSupportedConstraints","enumerateDevices","devices","dev","some","deviceId","shimError_","PermissionDeniedError","InvalidStateError","DevicesNotFoundError","ConstraintNotSatisfiedError","TrackStartError","MediaDeviceFailedDueToShutdown","MediaDeviceKillSwitchOn","constraint","constraintName","webkitGetUserMedia","getUserMediaPromise_","kinds","MediaStreamTrack","getSources","device","groupId","echoCancellation","frameRate","height","width","origGetUserMedia","cs","7","NativeRTCIceCandidate","nativeCandidate","parsedCandidate","augmentedCandidate","assign","eventNameToWrap","wrapper","proto","nativeAddEventListener","nativeEventName","wrappedCallback","_eventMap","nativeRemoveEventListener","unwrappedCb","wrapPeerConnectionEvent","nativeCreateObjectURL","nativeRevokeObjectURL","newId","dsc","srcObject","nativeSetAttribute","8","shimRTCPeerConnection","origMSTEnabled","ev","RTCDtmfSender","replaceTrack","setTrack","../utils","rtcpeerconnection-shim","9","10","RTCTrackEvent","mozSrcObject","mozRTCPeerConnection","newServer","credential","mozRTCSessionDescription","mozRTCIceCandidate","modernStatsTypes","nativeGetStats","onSucc","onErr","11","InternalError","NotSupportedError","SecurityError","The operation is insecure.","getUserMedia_","constraintsToFF37_","mozGetUserMedia","orgEnumerateDevices","nativeGetUserMedia","getSettings","nativeGetSettings","applyConstraints","nativeApplyConstraints","12","_localStreams","getStreamById","_remoteStreams","_addTrack","_onaddstream","_onaddstreampoly","failureCallback","withCallback","errcb","RTCTransceiver","origCreateOffer","audioTransceiver","getTransceivers","addTransceiver","videoTransceiver","13","logDisabled_","deprecationWarnings_","bool","oldMethod","newMethod","uastring","pos","execScript","SdpHelpers","spatialLayers","spatialLayerId","spatialLayerIdRtx","p2p","maxVideoBW","maxAudioBW","sdpInput","sdpMatch","theLine","mediaType","setParam","utils_SdpHelpers","webrtc_stacks_BaseStack","specInput","localDesc","remoteDesc","localSdp","remoteSdp","processOffer","that","specBase","offerQueue","isNegotiating","latestSessionVersion","con","forceTurn","remoteCandidates","localCandidates","remoteDescriptionSet","mediaConstraints","peerConnection","where","errorcb","checkOfferQueue","setLocalDescForAnswer","sessionDescription","SemanticSdp_default","setMaxBW","msg","candidateObject","setStartVideoBW","setHardMinVideoBW","enableSimulcast","setVideo","setAudio","updateSpec","configInput","shouldApplyMaxVideoBWToSdp","shouldSendMaxVideoBWInOptions","limitMaxVideoBW","limitMaxAudioBW","Sdp","minVideoBW","slideShowMode","muteStream","qualityLayer","minLayer","isSubscribe","forceOfferToReceive","processSignalingMessage","msgInput","processAnswer","processNewCandidate","webrtc_stacks_ChromeStableStack","matchGroup","numSpatialLayers","baseSsrc","baseSsrcRtx","spatialLayersRtx","addSim","addGroup","addSpatialLayer","startVideoBW","setParamForCodecs","hardMinVideoBW","webrtc_stacks_FirefoxStack","possibleLayers","scaleResolutionDownBy","totalLayers","getParameters","layer","setParameters","getSimulcastParameters","baseCreateOffer","webrtc_stacks_FcStack","signalCallback","Events_EventDispatcher","dispatcher","eventListeners","eventType","listener","EventEmitter","emitter","LicodeEvent","ConnectionEvent","RoomEvent","StreamEvent","attrs","utils_ErizoMap","remove","EventEmitterConst","ErizoSessionId","ErizoConnectionManager_ErizoConnection","ErizoConnection","erizoId","ErizoConnectionManager_classCallCheck","_possibleConstructorReturn","_getPrototypeOf","streamsMap","newSpec","setSignallingCallback","getID","sendSignalingMessage","src_ErizoConnectionManager","ErizoConnectionManager","ErizoConnectionsMap","singlePC","connectionEntry","Socket_Socket","newIo","defaultCallback","messageBuffer","CONNECTED","RECONNECTING","DISCONNECTED","IO","socket_io_default","Socket_SocketEvent","userOptions","closeCode","socketOnCloseFunction","closeEvent","reason","attemptNumber","clientId","respType","resp","addToBuffer","sendSDP","views_View","staticUrl","views_Speaker","lastVolume","elementID","div","icon","onclick","muted","picker","volume","step","oninput","show","displaying","offsetHeight","onmouseover","onmouseout","getElementById","views_Bar","waiting","bar","link","logo","display","hide","speaker","views_VideoPlayer","applyRatio","ratio","resizer","resize","container","offsetWidth","crop","containerWidth","containerHeight","loader","VideoPlayer_typeof","L","ResizeSensor","views_AudioPlayer","AudioPlayer_typeof","src_Stream","altConnectionHelpers","recording","room","showing","videoSize","videoFrameRate","audioMuted","videoMuted","onStreamAddedToPC","onStreamRemovedFroPC","onICEConnectionStateChange","streamID","getAttributes","attributes","setAttributes","updateLocalAttributes","hasAudio","hasVideo","hasData","hasScreen","hasMedia","isExternal","addPC","p2pKey","sendData","videoOpt","opt","fake","trackInput","onended","secondTrackInput","streamEvent","unpublish","play","optionsInput","player","getFrame","defaultView","getComputedStyle","getPropertyValue","Stream_typeof","divStyle","divWidth","divHeight","canvas","getContext","drawImage","getVideoFrameURL","toDataURL","getVideoFrame","getImageData","checkOptions","isUpdate","muteAudio","isMuted","muteVideo","_setStaticQualityLayer","spatialLayer","temporalLayer","_setDynamicQualityLayer","_setMinSpatialLayer","controlHandler","handlersInput","publisherSideInput","publisherSide","handlers","sendControlMessage","disableHandlers","enableHandlers","updateConfiguration","utils_Base64","base64Str","base64Count","base64Chars","reverseBase64Chars","setBase64Str","readBase64","readReverseBase64","nextCharacter","ntos","unescape","encodeBase64","lineCount","inBuffer","decodeBase64","src_Room","altIo","altConnectionManager","roomID","erizoConnectionManager","streamInput","maybeCloseConnection","onStreamFailed","streamFailedEvt","unsubscribe","dispatchStreamSubscribed","evt2","getP2PConnectionOptions","peerSocket","getErizoConnectionOptions","isRemote","connectionOpts","nop2p","sendDataSocketFromStreamEvent","updateAttributesFromStreamEvent","socketEventToArgs","Room_toConsumableArray","createSdpConstraints","metadata","populateStreamFunctions","publishErizo","scheme","getOrBuildErizoConnection","createLocalStreamErizoConnection","subscribeErizo","defaultVideoBW","getVideoConstraints","createRemoteStreamErizoConnection","streamList","roomId","streamIndices","connectEvt","disconnectEvt","publish","publishExternal","publishP2P","publishData","startRecording","to","stopRecording","recordingId","localStream","subscribe","subscribeData","getStreamStats","getStreamsByAttribute","Connection","peerId","mess","createRemoteStreamP2PConnection","createLocalStreamP2PConnection","myStream","removeLocalStreamP2PConnection","Erizo","Room","Stream"],"mappings":"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","file":"erizo.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 34);\n","/* global console */\r\n\r\n/*\r\n * API to write logs based on traditional logging mechanisms: debug, trace, info, warning, error\r\n */\r\nconst Logger = (() => {\r\n  const DEBUG = 0;\r\n  const TRACE = 1;\r\n  const INFO = 2;\r\n  const WARNING = 3;\r\n  const ERROR = 4;\r\n  const NONE = 5;\r\n  let logPrefix = '';\r\n  let outputFunction;\r\n\r\n    // It sets the new log level. We can set it to NONE if we do not want to print logs\r\n  const setLogLevel = (level) => {\r\n    let targetLevel = level;\r\n    if (level > Logger.NONE) {\r\n      targetLevel = Logger.NONE;\r\n    } else if (level < Logger.DEBUG) {\r\n      targetLevel = Logger.DEBUG;\r\n    }\r\n    Logger.logLevel = targetLevel;\r\n  };\r\n\r\n  outputFunction = (args) => {\r\n    // eslint-disable-next-line no-console\r\n    console.log(...args);\r\n  };\r\n\r\n  const setOutputFunction = (newOutputFunction) => {\r\n    outputFunction = newOutputFunction;\r\n  };\r\n\r\n  const setLogPrefix = (newLogPrefix) => {\r\n    logPrefix = newLogPrefix;\r\n  };\r\n\r\n    // Generic function to print logs for a given level:\r\n    //  Logger.[DEBUG, TRACE, INFO, WARNING, ERROR]\r\n  const log = (level, ...args) => {\r\n    let out = logPrefix;\r\n    if (level < Logger.logLevel) {\r\n      return;\r\n    }\r\n    if (level === Logger.DEBUG) {\r\n      out = `${out}DEBUG`;\r\n    } else if (level === Logger.TRACE) {\r\n      out = `${out}TRACE`;\r\n    } else if (level === Logger.INFO) {\r\n      out = `${out}INFO`;\r\n    } else if (level === Logger.WARNING) {\r\n      out = `${out}WARNING`;\r\n    } else if (level === Logger.ERROR) {\r\n      out = `${out}ERROR`;\r\n    }\r\n    out = `${out}: `;\r\n    const tempArgs = [out].concat(args);\r\n    if (Logger.panel !== undefined) {\r\n      let tmp = '';\r\n      for (let idx = 0; idx < tempArgs.length; idx += 1) {\r\n        tmp += tempArgs[idx];\r\n      }\r\n      Logger.panel.value = `${Logger.panel.value}\\n${tmp}`;\r\n    } else {\r\n      outputFunction.apply(Logger, [tempArgs]);\r\n    }\r\n  };\r\n\r\n  const debug = (...args) => {\r\n    Logger.log(Logger.DEBUG, ...args);\r\n  };\r\n\r\n  const trace = (...args) => {\r\n    Logger.log(Logger.TRACE, ...args);\r\n  };\r\n\r\n  const info = (...args) => {\r\n    Logger.log(Logger.INFO, ...args);\r\n  };\r\n\r\n  const warning = (...args) => {\r\n    Logger.log(Logger.WARNING, ...args);\r\n  };\r\n\r\n  const error = (...args) => {\r\n    Logger.log(Logger.ERROR, ...args);\r\n  };\r\n\r\n  return {\r\n    DEBUG,\r\n    TRACE,\r\n    INFO,\r\n    WARNING,\r\n    ERROR,\r\n    NONE,\r\n    setLogLevel,\r\n    setOutputFunction,\r\n    setLogPrefix,\r\n    log,\r\n    debug,\r\n    trace,\r\n    info,\r\n    warning,\r\n    error,\r\n  };\r\n})();\r\n\r\nexport default Logger;\r\n","const SDPInfo = require('./SDPInfo');\r\nconst CandidateInfo = require('./CandidateInfo');\r\nconst CodecInfo = require('./CodecInfo');\r\nconst DTLSInfo = require('./DTLSInfo');\r\nconst ICEInfo = require('./ICEInfo');\r\nconst MediaInfo = require('./MediaInfo');\r\nconst Setup = require('./Setup');\r\nconst SourceGroupInfo = require('./SourceGroupInfo');\r\nconst SourceInfo = require('./SourceInfo');\r\nconst StreamInfo = require('./StreamInfo');\r\nconst TrackInfo = require('./TrackInfo');\r\nconst Direction = require('./Direction');\r\n\r\nmodule.exports = {\r\n  SDPInfo,\r\n  CandidateInfo,\r\n  CodecInfo,\r\n  DTLSInfo,\r\n  ICEInfo,\r\n  MediaInfo,\r\n  Setup,\r\n  SourceGroupInfo,\r\n  SourceInfo,\r\n  StreamInfo,\r\n  TrackInfo,\r\n  Direction,\r\n};\r\n","/* global navigator, window, chrome */\r\nimport Logger from './Logger';\r\n\r\nconst getBrowser = () => {\r\n  let browser = 'none';\r\n\r\n  if ((typeof module !== 'undefined' && module.exports)) {\r\n    browser = 'fake';\r\n  } else if (window.navigator.userAgent.match('Firefox') !== null) {\r\n    // Firefox\r\n    browser = 'mozilla';\r\n  } else if (window.navigator.userAgent.match('Chrome') !== null) {\r\n    browser = 'chrome-stable';\r\n    if (window.navigator.userAgent.match('Electron') !== null) {\r\n      browser = 'electron';\r\n    }\r\n  } else if (window.navigator.userAgent.match('Safari') !== null) {\r\n    browser = 'safari';\r\n  } else if (window.navigator.userAgent.match('AppleWebKit') !== null) {\r\n    browser = 'safari';\r\n  }\r\n  return browser;\r\n};\r\n\r\nconst GetUserMedia = (config, callback = () => {}, error = () => {}) => {\r\n  let screenConfig;\r\n\r\n  const getUserMedia = (userMediaConfig, cb, errorCb) => {\r\n    navigator.mediaDevices.getUserMedia(userMediaConfig).then(cb).catch(errorCb);\r\n  };\r\n\r\n  const configureScreensharing = () => {\r\n    Logger.debug('Screen access requested');\r\n    switch (getBrowser()) {\r\n      case 'electron' :\r\n        Logger.debug('Screen sharing in Electron');\r\n        screenConfig = {};\r\n        screenConfig.video = config.video || {};\r\n        screenConfig.video.mandatory = config.video.mandatory || {};\r\n        screenConfig.video.mandatory.chromeMediaSource = 'desktop';\r\n        screenConfig.video.mandatory.chromeMediaSourceId = config.desktopStreamId;\r\n        getUserMedia(screenConfig, callback, error);\r\n        break;\r\n      case 'mozilla':\r\n        Logger.debug('Screen sharing in Firefox');\r\n        screenConfig = {};\r\n        if (config.video !== undefined) {\r\n          screenConfig.video = config.video;\r\n          if (!screenConfig.video.mediaSource) {\r\n            screenConfig.video.mediaSource = 'window' || 'screen';\r\n          }\r\n        } else {\r\n          screenConfig = {\r\n            audio: config.audio,\r\n            video: { mediaSource: 'window' || 'screen' },\r\n          };\r\n        }\r\n        getUserMedia(screenConfig, callback, error);\r\n        break;\r\n\r\n      case 'chrome-stable':\r\n        Logger.debug('Screen sharing in Chrome');\r\n        screenConfig = {};\r\n        /*global App*/\r\n        if (App && App.isDesktop) {\r\n          /*global chrome*/\r\n          chrome.desktopCapture.chooseDesktopMedia(['screen', 'window'], function(id){\r\n              console.log('opening stream with id', id);\r\n              getUserMedia({\r\n                video: {\r\n                  mandatory: {\r\n                      chromeMediaSourceId: id, \r\n                      chromeMediaSource:'desktop'\r\n                  }\r\n                }\r\n              }, callback, error);\r\n          });\r\n          /*\r\n          var gui = nw.require('nw.gui');\r\n          // if screens has not been initiated before, init it\r\n          if (gui.Screen.Init){ gui.Screen.Init(); }\r\n          gui.Screen.chooseDesktopMedia([\"screen\",\"window\"],\r\n              function(streamId) {\r\n                  var vidConstraint = {\r\n                      mandatory: {\r\n                          chromeMediaSource: 'desktop',\r\n                          chromeMediaSourceId: streamId,\r\n                          maxWidth: 1920,\r\n                          maxHeight: 1080\r\n                      },\r\n                      optional: []\r\n                  };\r\n                  getUserMedia({audio: false, video: vidConstraint}, callback, error);\r\n              });\r\n          */\r\n        } else if (config.desktopStreamId) {\r\n          screenConfig.video = config.video || { mandatory: {} };\r\n          screenConfig.video.mandatory = screenConfig.video.mandatory || {};\r\n          screenConfig.video.mandatory.chromeMediaSource = 'desktop';\r\n          screenConfig.video.mandatory.chromeMediaSourceId = config.desktopStreamId;\r\n          getUserMedia(screenConfig, callback, error);\r\n        } else {\r\n          // Default extensionId - this extension is only usable in our server,\r\n          // please make your own extension based on the code in\r\n          // erizo_controller/erizoClient/extras/chrome-extension\r\n          let extensionId = 'okeephmleflklcdebijnponpabbmmgeo';\r\n          if (config.extensionId) {\r\n            Logger.debug(`extensionId supplied, using ${config.extensionId}`);\r\n            extensionId = config.extensionId;\r\n          }\r\n          Logger.debug('Screen access on chrome stable, looking for extension');\r\n          try {\r\n            chrome.runtime.sendMessage(extensionId, { getStream: true },\r\n              (response) => {\r\n                if (response === undefined) {\r\n                  Logger.error('Access to screen denied');\r\n                  const theError = { code: 'Access to screen denied' };\r\n                  error(theError);\r\n                  return;\r\n                }\r\n                const theId = response.streamId;\r\n                if (config.video.mandatory !== undefined) {\r\n                  screenConfig.video = config.video || { mandatory: {} };\r\n                  screenConfig.video.mandatory.chromeMediaSource = 'desktop';\r\n                  screenConfig.video.mandatory.chromeMediaSourceId = theId;\r\n                } else {\r\n                  screenConfig = { video: { mandatory: { chromeMediaSource: 'desktop',\r\n                    chromeMediaSourceId: theId } } };\r\n                }\r\n                getUserMedia(screenConfig, callback, error);\r\n              });\r\n          } catch (e) {\r\n            Logger.debug('Screensharing plugin is not accessible ');\r\n            const theError = { code: 'no_plugin_present' };\r\n            error(theError);\r\n          }\r\n        }\r\n        break;\r\n      default:\r\n        Logger.error('This browser does not support ScreenSharing');\r\n    }\r\n  };\r\n\r\n  if (config.screen) {\r\n    configureScreensharing();\r\n  } else if (typeof module !== 'undefined' && module.exports) {\r\n    Logger.error('Video/audio streams not supported in erizofc yet');\r\n  } else {\r\n    Logger.debug('Calling getUserMedia with config', config);\r\n    getUserMedia(config, callback, error);\r\n  }\r\n};\r\n\r\n\r\nconst ConnectionHelpers = { GetUserMedia, getBrowser };\r\n\r\nexport default ConnectionHelpers;\r\n","const Enum = require('./Enum');\r\n\r\nconst DirectionWay = Enum('SEND', 'RECV');\r\n\r\nDirectionWay.byValue = direction => DirectionWay[direction.toUpperCase()];\r\n\r\nDirectionWay.toString = (direction) => {\r\n  switch (direction) {\r\n    case DirectionWay.SEND:\r\n      return 'send';\r\n    case DirectionWay.RECV:\r\n      return 'recv';\r\n    default:\r\n      return 'unknown';\r\n  }\r\n};\r\n\r\nDirectionWay.reverse = (direction) => {\r\n  switch (direction) {\r\n    case DirectionWay.SEND:\r\n      return DirectionWay.RECV;\r\n    case DirectionWay.RECV:\r\n      return DirectionWay.SEND;\r\n    default:\r\n      return DirectionWay.SEND;\r\n  }\r\n};\r\n\r\nmodule.exports = DirectionWay;\r\n","const Enum = require('./Enum');\r\n\r\nconst Setup = Enum('ACTIVE', 'PASSIVE', 'ACTPASS', 'INACTIVE');\r\n\r\nSetup.byValue = setup => Setup[setup.toUpperCase()];\r\n\r\nSetup.toString = (setup) => {\r\n  switch (setup) {\r\n    case Setup.ACTIVE:\r\n      return 'active';\r\n    case Setup.PASSIVE:\r\n      return 'passive';\r\n    case Setup.ACTPASS:\r\n      return 'actpass';\r\n    case Setup.INACTIVE:\r\n      return 'inactive';\r\n    default:\r\n      return null;\r\n  }\r\n};\r\n\r\nSetup.reverse = (setup) => {\r\n  switch (setup) {\r\n    case Setup.ACTIVE:\r\n      return Setup.PASSIVE;\r\n    case Setup.PASSIVE:\r\n      return Setup.ACTIVE;\r\n    case Setup.ACTPASS:\r\n      return Setup.PASSIVE;\r\n    case Setup.INACTIVE:\r\n      return Setup.INACTIVE;\r\n    default:\r\n      return Setup.ACTIVE;\r\n  }\r\n};\r\n\r\nmodule.exports = Setup;\r\n","\r\nfunction Enum(...args) {\r\n  if (!(this instanceof Enum)) {\r\n    return new (Function.prototype.bind.apply(Enum,\r\n      [null].concat(Array.prototype.slice.call(args))))();\r\n  }\r\n  Array.from(args).forEach((arg) => {\r\n    this[arg] = Symbol.for(`LICODE_SEMANTIC_SDP_${arg}`);\r\n  });\r\n}\r\n\r\nmodule.exports = Enum;\r\n","const Enum = require('./Enum');\r\n\r\nconst Direction = Enum('SENDRECV', 'SENDONLY', 'RECVONLY', 'INACTIVE');\r\n\r\nDirection.byValue = direction => Direction[direction.toUpperCase()];\r\n\r\n/**\r\n* Get Direction name\r\n* @memberOf Direction\r\n* @param {Direction} direction\r\n* @returns {String}\r\n*/\r\nDirection.toString = (direction) => {\r\n  switch (direction) {\r\n    case Direction.SENDRECV:\r\n      return 'sendrecv';\r\n    case Direction.SENDONLY:\r\n      return 'sendonly';\r\n    case Direction.RECVONLY:\r\n      return 'recvonly';\r\n    case Direction.INACTIVE:\r\n      return 'inactive';\r\n    default:\r\n      return 'unknown';\r\n  }\r\n};\r\n\r\nDirection.reverse = (direction) => {\r\n  switch (direction) {\r\n    case Direction.SENDRECV:\r\n      return Direction.SENDRECV;\r\n    case Direction.SENDONLY:\r\n      return Direction.RECVONLY;\r\n    case Direction.RECVONLY:\r\n      return Direction.SENDONLY;\r\n    case Direction.INACTIVE:\r\n      return Direction.INACTIVE;\r\n    default:\r\n      return Direction.SENDRECV;\r\n  }\r\n};\r\n\r\nmodule.exports = Direction;\r\n","var grammar = module.exports = {\n  v: [{\n    name: 'version',\n    reg: /^(\\d*)$/\n  }],\n  o: [{ //o=- 20518 0 IN IP4 203.0.113.1\n    // NB: sessionId will be a String in most cases because it is huge\n    name: 'origin',\n    reg: /^(\\S*) (\\d*) (\\d*) (\\S*) IP(\\d) (\\S*)/,\n    names: ['username', 'sessionId', 'sessionVersion', 'netType', 'ipVer', 'address'],\n    format: '%s %s %d %s IP%d %s'\n  }],\n  // default parsing of these only (though some of these feel outdated)\n  s: [{ name: 'name' }],\n  i: [{ name: 'description' }],\n  u: [{ name: 'uri' }],\n  e: [{ name: 'email' }],\n  p: [{ name: 'phone' }],\n  z: [{ name: 'timezones' }], // TODO: this one can actually be parsed properly..\n  r: [{ name: 'repeats' }],   // TODO: this one can also be parsed properly\n  //k: [{}], // outdated thing ignored\n  t: [{ //t=0 0\n    name: 'timing',\n    reg: /^(\\d*) (\\d*)/,\n    names: ['start', 'stop'],\n    format: '%d %d'\n  }],\n  c: [{ //c=IN IP4 10.47.197.26\n    name: 'connection',\n    reg: /^IN IP(\\d) (\\S*)/,\n    names: ['version', 'ip'],\n    format: 'IN IP%d %s'\n  }],\n  b: [{ //b=AS:4000\n    push: 'bandwidth',\n    reg: /^(TIAS|AS|CT|RR|RS):(\\d*)/,\n    names: ['type', 'limit'],\n    format: '%s:%s'\n  }],\n  m: [{ //m=video 51744 RTP/AVP 126 97 98 34 31\n    // NB: special - pushes to session\n    // TODO: rtp/fmtp should be filtered by the payloads found here?\n    reg: /^(\\w*) (\\d*) ([\\w\\/]*)(?: (.*))?/,\n    names: ['type', 'port', 'protocol', 'payloads'],\n    format: '%s %d %s %s'\n  }],\n  a: [\n    { //a=rtpmap:110 opus/48000/2\n      push: 'rtp',\n      reg: /^rtpmap:(\\d*) ([\\w\\-\\.]*)(?:\\s*\\/(\\d*)(?:\\s*\\/(\\S*))?)?/,\n      names: ['payload', 'codec', 'rate', 'encoding'],\n      format: function (o) {\n        return (o.encoding) ?\n          'rtpmap:%d %s/%s/%s':\n          o.rate ?\n          'rtpmap:%d %s/%s':\n          'rtpmap:%d %s';\n      }\n    },\n    { //a=fmtp:108 profile-level-id=24;object=23;bitrate=64000\n      //a=fmtp:111 minptime=10; useinbandfec=1\n      push: 'fmtp',\n      reg: /^fmtp:(\\d*) ([\\S| ]*)/,\n      names: ['payload', 'config'],\n      format: 'fmtp:%d %s'\n    },\n    { //a=control:streamid=0\n      name: 'control',\n      reg: /^control:(.*)/,\n      format: 'control:%s'\n    },\n    { //a=rtcp:65179 IN IP4 193.84.77.194\n      name: 'rtcp',\n      reg: /^rtcp:(\\d*)(?: (\\S*) IP(\\d) (\\S*))?/,\n      names: ['port', 'netType', 'ipVer', 'address'],\n      format: function (o) {\n        return (o.address != null) ?\n          'rtcp:%d %s IP%d %s':\n          'rtcp:%d';\n      }\n    },\n    { //a=rtcp-fb:98 trr-int 100\n      push: 'rtcpFbTrrInt',\n      reg: /^rtcp-fb:(\\*|\\d*) trr-int (\\d*)/,\n      names: ['payload', 'value'],\n      format: 'rtcp-fb:%d trr-int %d'\n    },\n    { //a=rtcp-fb:98 nack rpsi\n      push: 'rtcpFb',\n      reg: /^rtcp-fb:(\\*|\\d*) ([\\w-_]*)(?: ([\\w-_]*))?/,\n      names: ['payload', 'type', 'subtype'],\n      format: function (o) {\n        return (o.subtype != null) ?\n          'rtcp-fb:%s %s %s':\n          'rtcp-fb:%s %s';\n      }\n    },\n    { //a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n      //a=extmap:1/recvonly URI-gps-string\n      push: 'ext',\n      reg: /^extmap:(\\d+)(?:\\/(\\w+))? (\\S*)(?: (\\S*))?/,\n      names: ['value', 'direction', 'uri', 'config'],\n      format: function (o) {\n        return 'extmap:%d' + (o.direction ? '/%s' : '%v') + ' %s' + (o.config ? ' %s' : '');\n      }\n    },\n    { //a=crypto:1 AES_CM_128_HMAC_SHA1_80 inline:PS1uQCVeeCFCanVmcjkpPywjNWhcYD0mXXtxaVBR|2^20|1:32\n      push: 'crypto',\n      reg: /^crypto:(\\d*) ([\\w_]*) (\\S*)(?: (\\S*))?/,\n      names: ['id', 'suite', 'config', 'sessionConfig'],\n      format: function (o) {\n        return (o.sessionConfig != null) ?\n          'crypto:%d %s %s %s':\n          'crypto:%d %s %s';\n      }\n    },\n    { //a=setup:actpass\n      name: 'setup',\n      reg: /^setup:(\\w*)/,\n      format: 'setup:%s'\n    },\n    { //a=mid:1\n      name: 'mid',\n      reg: /^mid:([^\\s]*)/,\n      format: 'mid:%s'\n    },\n    { //a=msid:0c8b064d-d807-43b4-b434-f92a889d8587 98178685-d409-46e0-8e16-7ef0db0db64a\n      name: 'msid',\n      reg: /^msid:(.*)/,\n      format: 'msid:%s'\n    },\n    { //a=ptime:20\n      name: 'ptime',\n      reg: /^ptime:(\\d*)/,\n      format: 'ptime:%d'\n    },\n    { //a=maxptime:60\n      name: 'maxptime',\n      reg: /^maxptime:(\\d*)/,\n      format: 'maxptime:%d'\n    },\n    { //a=sendrecv\n      name: 'direction',\n      reg: /^(sendrecv|recvonly|sendonly|inactive)/\n    },\n    { //a=ice-lite\n      name: 'icelite',\n      reg: /^(ice-lite)/\n    },\n    { //a=ice-ufrag:F7gI\n      name: 'iceUfrag',\n      reg: /^ice-ufrag:(\\S*)/,\n      format: 'ice-ufrag:%s'\n    },\n    { //a=ice-pwd:x9cml/YzichV2+XlhiMu8g\n      name: 'icePwd',\n      reg: /^ice-pwd:(\\S*)/,\n      format: 'ice-pwd:%s'\n    },\n    { //a=fingerprint:SHA-1 00:11:22:33:44:55:66:77:88:99:AA:BB:CC:DD:EE:FF:00:11:22:33\n      name: 'fingerprint',\n      reg: /^fingerprint:(\\S*) (\\S*)/,\n      names: ['type', 'hash'],\n      format: 'fingerprint:%s %s'\n    },\n    { //a=candidate:0 1 UDP 2113667327 203.0.113.1 54400 typ host\n      //a=candidate:1162875081 1 udp 2113937151 192.168.34.75 60017 typ host generation 0 network-id 3 network-cost 10\n      //a=candidate:3289912957 2 udp 1845501695 193.84.77.194 60017 typ srflx raddr 192.168.34.75 rport 60017 generation 0 network-id 3 network-cost 10\n      //a=candidate:229815620 1 tcp 1518280447 192.168.150.19 60017 typ host tcptype active generation 0 network-id 3 network-cost 10\n      //a=candidate:3289912957 2 tcp 1845501695 193.84.77.194 60017 typ srflx raddr 192.168.34.75 rport 60017 tcptype passive generation 0 network-id 3 network-cost 10\n      push:'candidates',\n      reg: /^candidate:(\\S*) (\\d*) (\\S*) (\\d*) (\\S*) (\\d*) typ (\\S*)(?: raddr (\\S*) rport (\\d*))?(?: tcptype (\\S*))?(?: generation (\\d*))?(?: network-id (\\d*))?(?: network-cost (\\d*))?/,\n      names: ['foundation', 'component', 'transport', 'priority', 'ip', 'port', 'type', 'raddr', 'rport', 'tcptype', 'generation', 'network-id', 'network-cost'],\n      format: function (o) {\n        var str = 'candidate:%s %d %s %d %s %d typ %s';\n\n        str += (o.raddr != null) ? ' raddr %s rport %d' : '%v%v';\n\n        // NB: candidate has three optional chunks, so %void middles one if it's missing\n        str += (o.tcptype != null) ? ' tcptype %s' : '%v';\n\n        if (o.generation != null) {\n          str += ' generation %d';\n        }\n\n        str += (o['network-id'] != null) ? ' network-id %d' : '%v';\n        str += (o['network-cost'] != null) ? ' network-cost %d' : '%v';\n        return str;\n      }\n    },\n    { //a=end-of-candidates (keep after the candidates line for readability)\n      name: 'endOfCandidates',\n      reg: /^(end-of-candidates)/\n    },\n    { //a=remote-candidates:1 203.0.113.1 54400 2 203.0.113.1 54401 ...\n      name: 'remoteCandidates',\n      reg: /^remote-candidates:(.*)/,\n      format: 'remote-candidates:%s'\n    },\n    { //a=ice-options:google-ice\n      name: 'iceOptions',\n      reg: /^ice-options:(\\S*)/,\n      format: 'ice-options:%s'\n    },\n    { //a=ssrc:2566107569 cname:t9YU8M1UxTF8Y1A1\n      push: 'ssrcs',\n      reg: /^ssrc:(\\d*) ([\\w_-]*)(?::(.*))?/,\n      names: ['id', 'attribute', 'value'],\n      format: function (o) {\n        var str = 'ssrc:%d';\n        if (o.attribute != null) {\n          str += ' %s';\n          if (o.value != null) {\n            str += ':%s';\n          }\n        }\n        return str;\n      }\n    },\n    { //a=ssrc-group:FEC 1 2\n      //a=ssrc-group:FEC-FR 3004364195 1080772241\n      push: 'ssrcGroups',\n      // token-char = %x21 / %x23-27 / %x2A-2B / %x2D-2E / %x30-39 / %x41-5A / %x5E-7E\n      reg: /^ssrc-group:([\\x21\\x23\\x24\\x25\\x26\\x27\\x2A\\x2B\\x2D\\x2E\\w]*) (.*)/,\n      names: ['semantics', 'ssrcs'],\n      format: 'ssrc-group:%s %s'\n    },\n    { //a=msid-semantic: WMS Jvlam5X3SX1OP6pn20zWogvaKJz5Hjf9OnlV\n      name: 'msidSemantic',\n      reg: /^msid-semantic:\\s?(\\w*) (\\S*)/,\n      names: ['semantic', 'token'],\n      format: 'msid-semantic: %s %s' // space after ':' is not accidental\n    },\n    { //a=group:BUNDLE audio video\n      push: 'groups',\n      reg: /^group:(\\w*) (.*)/,\n      names: ['type', 'mids'],\n      format: 'group:%s %s'\n    },\n    { //a=rtcp-mux\n      name: 'rtcpMux',\n      reg: /^(rtcp-mux)/\n    },\n    { //a=rtcp-rsize\n      name: 'rtcpRsize',\n      reg: /^(rtcp-rsize)/\n    },\n    { //a=sctpmap:5000 webrtc-datachannel 1024\n      name: 'sctpmap',\n      reg: /^sctpmap:([\\w_\\/]*) (\\S*)(?: (\\S*))?/,\n      names: ['sctpmapNumber', 'app', 'maxMessageSize'],\n      format: function (o) {\n        return (o.maxMessageSize != null) ?\n          'sctpmap:%s %s %s' :\n          'sctpmap:%s %s';\n      }\n    },\n    { //a=x-google-flag:conference\n      name: 'xGoogleFlag',\n      reg: /^x-google-flag:([^\\s]*)/,\n      format: 'x-google-flag:%s'\n    },\n    { //a=rid:1 send max-width=1280;max-height=720;max-fps=30;depend=0\n      push: 'rids',\n      reg: /^rid:([\\d\\w]+) (\\w+)(?: ([\\S| ]*))?/,\n      names: ['id', 'direction', 'params'],\n      format: function (o) {\n        return (o.params) ? 'rid:%s %s %s' : 'rid:%s %s';\n      }\n    },\n    { //a=imageattr:97 send [x=800,y=640,sar=1.1,q=0.6] [x=480,y=320] recv [x=330,y=250]\n      //a=imageattr:* send [x=800,y=640] recv *\n      //a=imageattr:100 recv [x=320,y=240]\n      push: 'imageattrs',\n      reg: new RegExp(\n        //a=imageattr:97\n        '^imageattr:(\\\\d+|\\\\*)' +\n        //send [x=800,y=640,sar=1.1,q=0.6] [x=480,y=320]\n        '[\\\\s\\\\t]+(send|recv)[\\\\s\\\\t]+(\\\\*|\\\\[\\\\S+\\\\](?:[\\\\s\\\\t]+\\\\[\\\\S+\\\\])*)' +\n        //recv [x=330,y=250]\n        '(?:[\\\\s\\\\t]+(recv|send)[\\\\s\\\\t]+(\\\\*|\\\\[\\\\S+\\\\](?:[\\\\s\\\\t]+\\\\[\\\\S+\\\\])*))?'\n      ),\n      names: ['pt', 'dir1', 'attrs1', 'dir2', 'attrs2'],\n      format: function (o) {\n        return 'imageattr:%s %s %s' + (o.dir2 ? ' %s %s' : '');\n      }\n    },\n    { //a=simulcast:send 1,2,3;~4,~5 recv 6;~7,~8\n      //a=simulcast:recv 1;4,5 send 6;7\n      name: 'simulcast',\n      reg: new RegExp(\n        //a=simulcast:\n        '^simulcast:' +\n        //send 1,2,3;~4,~5\n        '(send|recv) ([a-zA-Z0-9\\\\-_~;,]+)' +\n        //space + recv 6;~7,~8\n        '(?:\\\\s?(send|recv) ([a-zA-Z0-9\\\\-_~;,]+))?' +\n        //end\n        '$'\n      ),\n      names: ['dir1', 'list1', 'dir2', 'list2'],\n      format: function (o) {\n        return 'simulcast:%s %s' + (o.dir2 ? ' %s %s' : '');\n      }\n    },\n    { //Old simulcast draft 03 (implemented by Firefox)\n      //  https://tools.ietf.org/html/draft-ietf-mmusic-sdp-simulcast-03\n      //a=simulcast: recv pt=97;98 send pt=97\n      //a=simulcast: send rid=5;6;7 paused=6,7\n      name: 'simulcast_03',\n      reg: /^simulcast:[\\s\\t]+([\\S+\\s\\t]+)$/,\n      names: ['value'],\n      format: 'simulcast: %s'\n    },\n    {\n      //a=framerate:25\n      //a=framerate:29.97\n      name: 'framerate',\n      reg: /^framerate:(\\d+(?:$|\\.\\d+))/,\n      format: 'framerate:%s'\n    },\n    { // RFC4570\n      //a=source-filter: incl IN IP4 239.5.2.31 10.1.15.5\n      name: 'sourceFilter',\n      reg: /^source-filter: *(excl|incl) (\\S*) (IP4|IP6|\\*) (\\S*) (.*)/,\n      names: ['filterMode', 'netType', 'addressTypes', 'destAddress', 'srcList'],\n      format: 'source-filter: %s %s %s %s %s'\n    },\n    { // any a= that we don't understand is kepts verbatim on media.invalid\n      push: 'invalid',\n      names: ['value']\n    }\n  ]\n};\n\n// set sensible defaults to avoid polluting the grammar with boring details\nObject.keys(grammar).forEach(function (key) {\n  var objs = grammar[key];\n  objs.forEach(function (obj) {\n    if (!obj.reg) {\n      obj.reg = /(.*)/;\n    }\n    if (!obj.format) {\n      obj.format = '%s';\n    }\n  });\n});\n","class CandidateInfo {\r\n  constructor(foundation, componentId, transport, priority, address, port,\r\n    type, generation, relAddr, relPort) {\r\n    this.foundation = foundation;\r\n    this.componentId = componentId;\r\n    this.transport = transport;\r\n    this.priority = priority;\r\n    this.address = address;\r\n    this.port = port;\r\n    this.type = type;\r\n    this.generation = generation;\r\n    this.relAddr = relAddr;\r\n    this.relPort = relPort;\r\n  }\r\n\r\n  clone() {\r\n    return new CandidateInfo(this.foundation, this.componentId, this.transport, this.priority,\r\n              this.address, this.port, this.type, this.generation, this.relAddr, this.relPort);\r\n  }\r\n\r\n  plain() {\r\n    const plain = {\r\n      foundation: this.foundation,\r\n      componentId: this.componentId,\r\n      transport: this.transport,\r\n      priority: this.priority,\r\n      address: this.address,\r\n      port: this.port,\r\n      type: this.type,\r\n      generation: this.generation,\r\n    };\r\n    if (this.relAddr) plain.relAddr = this.relAddr;\r\n    if (this.relPort) plain.relPort = this.relPort;\r\n    return plain;\r\n  }\r\n\r\n  getFoundation() {\r\n    return this.foundation;\r\n  }\r\n\r\n  getComponentId() {\r\n    return this.componentId;\r\n  }\r\n\r\n  getTransport() {\r\n    return this.transport;\r\n  }\r\n\r\n  getPriority() {\r\n    return this.priority;\r\n  }\r\n\r\n  getAddress() {\r\n    return this.address;\r\n  }\r\n\r\n  getPort() {\r\n    return this.port;\r\n  }\r\n\r\n  getType() {\r\n    return this.type;\r\n  }\r\n\r\n  getGeneration() {\r\n    return this.generation;\r\n  }\r\n\r\n  getRelAddr() {\r\n    return this.relAddr;\r\n  }\r\n\r\n  getRelPort() {\r\n    return this.relPort;\r\n  }\r\n\r\n}\r\n\r\nmodule.exports = CandidateInfo;\r\n","class CodecInfo {\r\n\r\n  constructor(codec, type, rate, encoding, params, feedback) {\r\n    this.codec = codec;\r\n    this.type = type;\r\n    this.rate = rate;\r\n    this.encoding = encoding;\r\n    this.params = params || {};\r\n    this.feedback = feedback || [];\r\n  }\r\n\r\n  clone() {\r\n    const cloned = new CodecInfo(this.codec, this.type, this.rate, this.encoding,\r\n      this.params, this.feedback);\r\n    if (this.rtx) {\r\n      cloned.setRTX(this.rtx);\r\n    }\r\n    return cloned;\r\n  }\r\n\r\n\r\n  plain() {\r\n    return {\r\n      codec: this.codec,\r\n      type: this.type,\r\n      rate: this.rate,\r\n      encoding: this.encoding,\r\n      params: this.params,\r\n      feedback: this.feedback,\r\n    };\r\n  }\r\n\r\n  setRTX(rtx) {\r\n    this.rtx = rtx;\r\n  }\r\n\r\n  getType() {\r\n    return this.type;\r\n  }\r\n\r\n  setType(type) {\r\n    this.type = type;\r\n  }\r\n\r\n  getCodec() {\r\n    return this.codec;\r\n  }\r\n\r\n  getParams() {\r\n    return this.params;\r\n  }\r\n\r\n  setParam(paramName, value) {\r\n    this.params[paramName] = value;\r\n  }\r\n\r\n  hasRTX() {\r\n    return this.rtx;\r\n  }\r\n\r\n  getRTX() {\r\n    return this.rtx;\r\n  }\r\n\r\n  getRate() {\r\n    return this.rate;\r\n  }\r\n\r\n  getEncoding() {\r\n    return this.encoding;\r\n  }\r\n\r\n  getFeedback() {\r\n    return this.feedback;\r\n  }\r\n}\r\n\r\nCodecInfo.mapFromNames = (names, rtx) => {\r\n  const codecs = new Map();\r\n\r\n  let dyn = 96;\r\n  names.forEach((nameWithUpperCases) => {\r\n    let pt;\r\n    const name = nameWithUpperCases.toLowerCase();\r\n    if (name === 'pcmu') pt = 0;\r\n    else if (name === 'pcma') pt = 8;\r\n    else {\r\n      dyn += 1;\r\n      pt = dyn;\r\n    }\r\n    const codec = new CodecInfo(name, pt);\r\n    if (rtx && name !== 'ulpfec' && name !== 'flexfec-03' && name !== 'red') {\r\n      dyn += 1;\r\n      codec.setRTX(dyn);\r\n    }\r\n    codecs.set(codec.getCodec().toLowerCase(), codec);\r\n  });\r\n  return codecs;\r\n};\r\n\r\nmodule.exports = CodecInfo;\r\n","const Setup = require('./Setup');\r\n\r\nclass DTLSInfo {\r\n  constructor(setup, hash, fingerprint) {\r\n    this.setup = setup;\r\n    this.hash = hash;\r\n    this.fingerprint = fingerprint;\r\n  }\r\n\r\n  clone() {\r\n    return new DTLSInfo(this.setup, this.hash, this.fingerprint);\r\n  }\r\n\r\n  plain() {\r\n    return {\r\n      setup: Setup.toString(this.setup),\r\n      hash: this.hash,\r\n      fingerprint: this.fingerprint,\r\n    };\r\n  }\r\n\r\n  getFingerprint() {\r\n    return this.fingerprint;\r\n  }\r\n\r\n  getHash() {\r\n    return this.hash;\r\n  }\r\n\r\n  getSetup() {\r\n    return this.setup;\r\n  }\r\n\r\n  setSetup(setup) {\r\n    this.setup = setup;\r\n  }\r\n}\r\n\r\nmodule.exports = DTLSInfo;\r\n","function randomIntInc(low, high) {\r\n  const range = (high - low) + 1;\r\n  const random = Math.random() * range;\r\n  return Math.floor(random + low);\r\n}\r\n\r\nfunction randomBytes(size) {\r\n  const numbers = new Uint8Array(size);\r\n\r\n  for (let i = 0; i < numbers.length; i += 1) {\r\n    numbers[i] = randomIntInc(0, 255);\r\n  }\r\n  return numbers;\r\n}\r\n\r\nfunction buf2hex(buffer) {\r\n  return Array.prototype.map.call(new Uint8Array(buffer), (x) => {\r\n    const hexValue = x.toString(16);\r\n    return `00${hexValue}`.slice(-2);\r\n  }).join('');\r\n}\r\n\r\nclass ICEInfo {\r\n  constructor(ufrag, pwd, opts) {\r\n    this.ufrag = ufrag;\r\n    this.pwd = pwd;\r\n    this.opts = opts;\r\n    this.lite = false;\r\n    this.endOfCandidates = false;\r\n  }\r\n\r\n  clone() {\r\n    const cloned = new ICEInfo(this.ufrag, this.pwd, this.opts);\r\n    cloned.setLite(this.lite);\r\n    cloned.setEndOfCandidates(this.endOfCandidates);\r\n    return cloned;\r\n  }\r\n\r\n  plain() {\r\n    const plain = {\r\n      ufrag: this.ufrag,\r\n      pwd: this.pwd,\r\n    };\r\n    if (this.lite) plain.lite = this.lite;\r\n    if (this.endOfCandidates) plain.endOfCandidates = this.endOfCandidates;\r\n    return plain;\r\n  }\r\n\r\n  getUfrag() {\r\n    return this.ufrag;\r\n  }\r\n\r\n  getPwd() {\r\n    return this.pwd;\r\n  }\r\n\r\n  isLite() {\r\n    return this.lite;\r\n  }\r\n\r\n  getOpts() {\r\n    return this.opts;\r\n  }\r\n\r\n  setLite(lite) {\r\n    this.lite = lite;\r\n  }\r\n\r\n  isEndOfCandidates() {\r\n    return this.endOfCandidates;\r\n  }\r\n\r\n  setEndOfCandidates(endOfCandidates) {\r\n    this.endOfCandidates = endOfCandidates;\r\n  }\r\n\r\n}\r\n\r\nICEInfo.generate = () => {\r\n  const info = new ICEInfo();\r\n  const frag = randomBytes(8);\r\n  const pwd = randomBytes(24);\r\n  info.ufrag = buf2hex(frag);\r\n  info.pwd = buf2hex(pwd);\r\n  return info;\r\n};\r\n\r\nmodule.exports = ICEInfo;\r\n","const SimulcastInfo = require('./SimulcastInfo');\r\nconst Direction = require('./Direction');\r\nconst DirectionWay = require('./DirectionWay');\r\n\r\nclass MediaInfo {\r\n  constructor(id, port, type) {\r\n    this.id = id;\r\n    this.type = type;\r\n    this.port = port;\r\n    this.direction = Direction.SENDRECV;\r\n    this.extensions = new Map();\r\n    this.codecs = new Map();\r\n    this.rids = new Map();\r\n    this.simulcast = null;\r\n    this.simulcast_03 = null;\r\n    this.bitrate = 0;\r\n    this.ice = null;\r\n    this.dtls = null;\r\n    this.connection = null;\r\n    this.candidates = [];\r\n  }\r\n\r\n  clone() {\r\n    const cloned = new MediaInfo(this.id, this.port, this.type);\r\n    cloned.setDirection(this.direction);\r\n    cloned.setBitrate(this.bitrate);\r\n    cloned.setConnection(this.connection);\r\n    this.codecs.forEach((codec) => {\r\n      cloned.addCodec(codec.clone());\r\n    });\r\n    this.extensions.forEach((extension, id) => {\r\n      cloned.addExtension(id, extension);\r\n    });\r\n    this.rids.forEach((rid, id) => {\r\n      cloned.addRID(id, rid.clone());\r\n    });\r\n    if (this.simulcast) {\r\n      cloned.setSimulcast(this.simulcast.clone());\r\n    }\r\n    if (this.xGoogleFlag) {\r\n      cloned.setXGoogleFlag(this.xGoogleFlag);\r\n    }\r\n    if (this.ice) {\r\n      cloned.setICE(this.ice.clone());\r\n    }\r\n    if (this.dtls) {\r\n      cloned.setDTLS(this.dtls.clone());\r\n    }\r\n    this.candidates.forEach((candidate) => {\r\n      cloned.addCandidate(candidate.clone());\r\n    });\r\n    if (this.setup) {\r\n      cloned.setSetup(this.setup);\r\n    }\r\n    return cloned;\r\n  }\r\n\r\n  plain() {\r\n    const plain = {\r\n      id: this.id,\r\n      port: this.port,\r\n      type: this.type,\r\n      connection: this.connection,\r\n      direction: Direction.toString(this.direction),\r\n      xGoogleFlag: this.xGoogleFlag,\r\n      extensions: {},\r\n      rids: [],\r\n      codecs: [],\r\n      candidates: [],\r\n    };\r\n    if (this.bitrate) {\r\n      plain.bitrate = this.bitrate;\r\n    }\r\n    this.codecs.forEach((codec) => {\r\n      plain.codecs.push(codec.plain());\r\n    });\r\n    this.extensions.forEach((extension) => {\r\n      plain.extensions.push(extension.plain());\r\n    });\r\n    this.rids.forEach((rid) => {\r\n      plain.rids.push(rid.plain());\r\n    });\r\n    if (this.simulcast) {\r\n      plain.simulcast = this.simulcast.plain();\r\n    }\r\n    this.candidates.forEach((candidate) => {\r\n      plain.candidates.push(candidate.plain());\r\n    });\r\n    plain.ice = this.ice && this.ice.plain();\r\n    plain.dtls = this.dtls && this.dtls.plain();\r\n    return plain;\r\n  }\r\n\r\n  getType() {\r\n    return this.type;\r\n  }\r\n\r\n  getPort() {\r\n    return this.port;\r\n  }\r\n\r\n  getId() {\r\n    return this.id;\r\n  }\r\n\r\n  addExtension(id, name) {\r\n    this.extensions.set(id, name);\r\n  }\r\n\r\n  addRID(ridInfo) {\r\n    this.rids.set(ridInfo.getId(), ridInfo);\r\n  }\r\n\r\n  addCodec(codecInfo) {\r\n    this.codecs.set(codecInfo.getType(), codecInfo);\r\n  }\r\n\r\n  getCodecForType(type) {\r\n    return this.codecs.get(type);\r\n  }\r\n\r\n  getCodec(codec) {\r\n    let result;\r\n    this.codecs.forEach((info) => {\r\n      if (info.getCodec().toLowerCase() === codec.toLowerCase()) {\r\n        result = info;\r\n      }\r\n    });\r\n    return result;\r\n  }\r\n\r\n  hasCodec(codec) {\r\n    return this.getCodec(codec) !== null;\r\n  }\r\n\r\n  getCodecs() {\r\n    return this.codecs;\r\n  }\r\n\r\n  getExtensions() {\r\n    return this.extensions;\r\n  }\r\n\r\n  getRIDs() {\r\n    return this.rids;\r\n  }\r\n\r\n  getRID(id) {\r\n    return this.rids.get(id);\r\n  }\r\n\r\n  getBitrate() {\r\n    return this.bitrate;\r\n  }\r\n\r\n  setBitrate(bitrate) {\r\n    this.bitrate = bitrate;\r\n  }\r\n\r\n  getDirection() {\r\n    return this.direction;\r\n  }\r\n\r\n  setDirection(direction) {\r\n    this.direction = direction;\r\n  }\r\n\r\n  getDTLS() {\r\n    return this.dtls;\r\n  }\r\n\r\n  setDTLS(dtlsInfo) {\r\n    this.dtls = dtlsInfo;\r\n  }\r\n\r\n  getICE() {\r\n    return this.ice;\r\n  }\r\n\r\n  setICE(iceInfo) {\r\n    this.ice = iceInfo;\r\n  }\r\n\r\n  addCandidate(candidate) {\r\n    this.candidates.push(candidate);\r\n  }\r\n\r\n  addCandidates(candidates) {\r\n    candidates.forEach((candidate) => {\r\n      this.addCandidate(candidate);\r\n    });\r\n  }\r\n\r\n  getCandidates() {\r\n    return this.candidates;\r\n  }\r\n\r\n  setXGoogleFlag(value) {\r\n    this.xGoogleFlag = value;\r\n  }\r\n\r\n  getXGoogleFlag() {\r\n    return this.xGoogleFlag;\r\n  }\r\n\r\n  getConnection() {\r\n    return this.connection;\r\n  }\r\n\r\n  setConnection(connection) {\r\n    this.connection = connection;\r\n  }\r\n\r\n  answer(supported) {\r\n    const answer = new MediaInfo(this.id, this.port, this.type);\r\n\r\n    answer.setDirection(Direction.reverse(this.direction));\r\n\r\n    if (supported.codecs) {\r\n      this.codecs.forEach((codec) => {\r\n        if (supported.codecs.has(codec.getCodec().toLowerCase())) {\r\n          const cloned = supported.codecs.get(codec.getCodec().toLowerCase()).clone();\r\n          cloned.setType(codec.getType());\r\n          if (cloned.hasRTX()) {\r\n            cloned.setRTX(codec.getRTX());\r\n          }\r\n          answer.addCodec(cloned);\r\n        }\r\n      });\r\n    }\r\n\r\n    this.extensions.forEach((extension, id) => {\r\n      if (supported.extensions.has(id)) {\r\n        answer.addExtension(id, extension);\r\n      }\r\n    });\r\n\r\n    if (supported.simulcast && this.simulcast) {\r\n      const simulcast = new SimulcastInfo();\r\n      const sendEntries = this.simulcast.getSimulcastStreams(DirectionWay.SEND);\r\n      if (sendEntries) {\r\n        sendEntries.forEach((sendStreams) => {\r\n          const alternatives = [];\r\n          sendStreams.forEach((sendStream) => {\r\n            alternatives.push(sendStream.clone());\r\n          });\r\n          simulcast.addSimulcastAlternativeStreams(DirectionWay.RECV, alternatives);\r\n        });\r\n      }\r\n\r\n      const recvEntries = this.simulcast.getSimulcastStreams(DirectionWay.RECV);\r\n      if (recvEntries) {\r\n        recvEntries.forEach((recvStreams) => {\r\n          const alternatives = [];\r\n          recvStreams.forEach((recvStream) => {\r\n            alternatives.push(recvStream.clone());\r\n          });\r\n          simulcast.addSimulcastAlternativeStreams(DirectionWay.SEND, alternatives);\r\n        });\r\n      }\r\n\r\n      this.rids.forEach((rid) => {\r\n        const reversed = rid.clone();\r\n        reversed.setDirection(DirectionWay.reverse(rid.getDirection()));\r\n        answer.addRID(reversed);\r\n      });\r\n\r\n      answer.setSimulcast(simulcast);\r\n    }\r\n    return answer;\r\n  }\r\n\r\n  getSimulcast() {\r\n    return this.simulcast;\r\n  }\r\n\r\n  setSimulcast(simulcast) {\r\n    this.simulcast = simulcast;\r\n  }\r\n\r\n  getSimulcast03() {\r\n    return this.simulcast_03;\r\n  }\r\n\r\n  setSimulcast03(simulcast) {\r\n    this.simulcast_03 = simulcast;\r\n  }\r\n\r\n  getSetup() {\r\n    return this.setup;\r\n  }\r\n\r\n  setSetup(setup) {\r\n    this.setup = setup;\r\n  }\r\n}\r\n\r\nmodule.exports = MediaInfo;\r\n","const DirectionWay = require('./DirectionWay');\r\n\r\nclass SimulcastInfo {\r\n  constructor() {\r\n    this.send = [];\r\n    this.recv = [];\r\n    this.plainString = null;\r\n  }\r\n\r\n  clone() {\r\n    const cloned = new SimulcastInfo();\r\n    this.send.forEach((sendStreams) => {\r\n      const alternatives = [];\r\n      sendStreams.forEach((sendStream) => {\r\n        alternatives.push(sendStream.clone());\r\n      });\r\n      cloned.addSimulcastAlternativeStreams(alternatives);\r\n    });\r\n    this.recv.forEach((recvStreams) => {\r\n      const alternatives = [];\r\n      recvStreams.forEach((recvStream) => {\r\n        alternatives.push(recvStream.clone());\r\n      });\r\n      cloned.addSimulcastAlternativeStreams(alternatives);\r\n    });\r\n    return cloned;\r\n  }\r\n\r\n  plain() {\r\n    const plain = {\r\n      send: [],\r\n      recv: [],\r\n    };\r\n    this.send.forEach((sendStreams) => {\r\n      const alternatives = [];\r\n      sendStreams.forEach((sendStream) => {\r\n        alternatives.push(sendStream.plain());\r\n      });\r\n      plain.send.push(alternatives);\r\n    });\r\n    this.recv.forEach((recvStreams) => {\r\n      const alternatives = [];\r\n      recvStreams.forEach((recvStream) => {\r\n        alternatives.push(recvStream.plain());\r\n      });\r\n      plain.recv.push(alternatives);\r\n    });\r\n    return plain;\r\n  }\r\n\r\n  addSimulcastAlternativeStreams(direction, streams) {\r\n    if (direction === DirectionWay.SEND) {\r\n      return this.send.push(streams);\r\n    }\r\n    return this.recv.push(streams);\r\n  }\r\n\r\n  addSimulcastStream(direction, stream) {\r\n    if (direction === DirectionWay.SEND) {\r\n      return this.send.push([stream]);\r\n    }\r\n    return this.recv.push([stream]);\r\n  }\r\n\r\n  getSimulcastStreams(direction) {\r\n    if (direction === DirectionWay.SEND) {\r\n      return this.send;\r\n    }\r\n    return this.recv;\r\n  }\r\n\r\n  setSimulcastPlainString(string) {\r\n    this.plainString = string;\r\n  }\r\n\r\n  getSimulcastPlainString() {\r\n    return this.plainString;\r\n  }\r\n}\r\n\r\nmodule.exports = SimulcastInfo;\r\n","class SourceGroupInfo {\r\n  constructor(semantics, ssrcs) {\r\n    this.semantics = semantics;\r\n    this.ssrcs = [];\r\n    ssrcs.forEach((ssrc) => {\r\n      this.ssrcs.push(parseInt(ssrc, 10));\r\n    });\r\n  }\r\n\r\n  clone() {\r\n    return new SourceGroupInfo(this.semantics, this.ssrcs);\r\n  }\r\n\r\n  plain() {\r\n    const plain = {\r\n      semantics: this.semantics,\r\n      ssrcs: [],\r\n    };\r\n    plain.ssrcs = this.ssrcs;\r\n    return plain;\r\n  }\r\n\r\n  getSemantics() {\r\n    return this.semantics;\r\n  }\r\n\r\n  getSSRCs() {\r\n    return this.ssrcs;\r\n  }\r\n}\r\n\r\nmodule.exports = SourceGroupInfo;\r\n","class SourceInfo {\r\n  constructor(ssrc) {\r\n    this.ssrc = ssrc;\r\n  }\r\n\r\n  clone() {\r\n    const clone = new SourceInfo(this.ssrc);\r\n    clone.setCName(this.cname);\r\n    clone.setStreamId(this.streamId);\r\n    this.setTrackId(this.trackId);\r\n  }\r\n\r\n\r\n  plain() {\r\n    const plain = {\r\n      ssrc: this.ssrc,\r\n    };\r\n    if (this.cname) plain.cname = this.cname;\r\n    if (this.label) plain.label = this.label;\r\n    if (this.mslabel) plain.mslabel = this.mslabel;\r\n    if (this.streamId) plain.streamId = this.streamId;\r\n    if (this.trackId) plain.trackid = this.trackId;\r\n    return plain;\r\n  }\r\n\r\n  getCName() {\r\n    return this.cname;\r\n  }\r\n\r\n  setCName(cname) {\r\n    this.cname = cname;\r\n  }\r\n\r\n  getStreamId() {\r\n    return this.streamId;\r\n  }\r\n\r\n  setStreamId(streamId) {\r\n    this.streamId = streamId;\r\n  }\r\n\r\n  getTrackId() {\r\n    return this.trackId;\r\n  }\r\n\r\n  setTrackId(trackId) {\r\n    this.trackId = trackId;\r\n  }\r\n\r\n  getMSLabel() {\r\n    return this.mslabel;\r\n  }\r\n\r\n  setMSLabel(mslabel) {\r\n    this.mslabel = mslabel;\r\n  }\r\n\r\n  getLabel() {\r\n    return this.label;\r\n  }\r\n\r\n  setLabel(label) {\r\n    this.label = label;\r\n  }\r\n\r\n  getSSRC() {\r\n    return this.ssrc;\r\n  }\r\n}\r\n\r\nmodule.exports = SourceInfo;\r\n","class StreamInfo {\r\n  constructor(id) {\r\n    this.id = id;\r\n    this.tracks = new Map();\r\n  }\r\n\r\n  clone() {\r\n    const cloned = new StreamInfo(this.id);\r\n    this.tracks.forEach((track) => {\r\n      cloned.addTrack(track.clone());\r\n    });\r\n    return cloned;\r\n  }\r\n\r\n  plain() {\r\n    const plain = {\r\n      id: this.id,\r\n      tracks: [],\r\n    };\r\n    this.tracks.forEach((track) => {\r\n      plain.tracks.push(track.plain());\r\n    });\r\n    return plain;\r\n  }\r\n\r\n  getId() {\r\n    return this.id;\r\n  }\r\n\r\n  addTrack(track) {\r\n    this.tracks.set(track.getId(), track);\r\n  }\r\n\r\n  getFirstTrack(media) {\r\n    let result;\r\n    this.tracks.forEach((track) => {\r\n      if (track.getMedia().toLowerCase() === media.toLowerCase()) {\r\n        result = track;\r\n      }\r\n    });\r\n    return result;\r\n  }\r\n\r\n  getTracks() {\r\n    return this.tracks;\r\n  }\r\n\r\n  removeAllTracks() {\r\n    this.tracks.clear();\r\n  }\r\n\r\n  getTrack(trackId) {\r\n    return this.tracks.get(trackId);\r\n  }\r\n}\r\n\r\nmodule.exports = StreamInfo;\r\n","class TrackInfo {\r\n  constructor(media, id) {\r\n    this.media = media;\r\n    this.id = id;\r\n    this.ssrcs = [];\r\n    this.groups = [];\r\n    this.encodings = [];\r\n  }\r\n\r\n  clone() {\r\n    const cloned = new TrackInfo(this.media, this.id);\r\n    if (this.mediaId) {\r\n      cloned.setMediaId(this.mediaId);\r\n    }\r\n    this.ssrcs.forEach((ssrc) => {\r\n      cloned.addSSRC(ssrc);\r\n    });\r\n    this.groups.forEach((group) => {\r\n      cloned.addSourceGroup(group.clone());\r\n    });\r\n    this.encodings.forEach((encoding) => {\r\n      const alternatives = [];\r\n      encoding.forEach((entry) => {\r\n        alternatives.push(entry.cloned());\r\n      });\r\n      cloned.addAlternativeEncoding(alternatives);\r\n    });\r\n    return cloned;\r\n  }\r\n\r\n  plain() {\r\n    const plain = {\r\n      media: this.media,\r\n      id: this.id,\r\n      ssrcs: [],\r\n      groups: [],\r\n      encodings: [],\r\n    };\r\n    if (this.mediaId) {\r\n      plain.mediaId = this.mediaId;\r\n    }\r\n    this.ssrcs.forEach((ssrc) => {\r\n      plain.ssrcs.push(ssrc);\r\n    });\r\n    this.groups.forEach((group) => {\r\n      plain.groups.push(group.plain());\r\n    });\r\n    this.encodings.forEach((encoding) => {\r\n      const alternatives = [];\r\n      encoding.forEach((entry) => {\r\n        alternatives.push(entry.plain());\r\n      });\r\n      plain.encodings.push(alternatives);\r\n    });\r\n    return plain;\r\n  }\r\n\r\n  getMedia() {\r\n    return this.media;\r\n  }\r\n\r\n  setMediaId(mediaId) {\r\n    this.mediaId = mediaId;\r\n  }\r\n\r\n  getMediaId() {\r\n    return this.mediaId;\r\n  }\r\n\r\n  getId() {\r\n    return this.id;\r\n  }\r\n\r\n  addSSRC(ssrc) {\r\n    this.ssrcs.push(ssrc);\r\n  }\r\n\r\n  getSSRCs() {\r\n    return this.ssrcs;\r\n  }\r\n\r\n  addSourceGroup(group) {\r\n    this.groups.push(group);\r\n  }\r\n\r\n  getSourceGroup(schematics) {\r\n    let result;\r\n    this.groups.forEach((group) => {\r\n      if (group.getSemantics().toLowerCase() === schematics.toLowerCase()) {\r\n        result = group;\r\n      }\r\n    });\r\n    return result;\r\n  }\r\n\r\n  getSourceGroups() {\r\n    return this.groups;\r\n  }\r\n\r\n  hasSourceGroup(schematics) {\r\n    let result = false;\r\n    this.groups.forEach((group) => {\r\n      if (group.getSemantics().toLowerCase() === schematics.toLowerCase()) {\r\n        result = true;\r\n      }\r\n    });\r\n    return result;\r\n  }\r\n\r\n  getEncodings() {\r\n    return this.encodings;\r\n  }\r\n\r\n  addAlternaticeEncodings(alternatives) {\r\n    this.encodings.push(alternatives);\r\n  }\r\n\r\n  setEncodings(encodings) {\r\n    this.encodings = encodings;\r\n  }\r\n}\r\n\r\nmodule.exports = TrackInfo;\r\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define([],e):\"object\"==typeof exports?exports.io=e():t.io=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p=\"\",e(0)}([function(t,e,n){\"use strict\";function r(t,e){\"object\"===(\"undefined\"==typeof t?\"undefined\":o(t))&&(e=t,t=void 0),e=e||{};var n,r=i(t),s=r.source,u=r.id,h=r.path,f=p[u]&&h in p[u].nsps,l=e.forceNew||e[\"force new connection\"]||!1===e.multiplex||f;return l?(c(\"ignoring socket cache for %s\",s),n=a(s,e)):(p[u]||(c(\"new io instance for %s\",s),p[u]=a(s,e)),n=p[u]),r.query&&!e.query&&(e.query=r.query),n.socket(r.path,e)}var o=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t},i=n(1),s=n(7),a=n(13),c=n(3)(\"socket.io-client\");t.exports=e=r;var p=e.managers={};e.protocol=s.protocol,e.connect=r,e.Manager=n(13),e.Socket=n(39)},function(t,e,n){(function(e){\"use strict\";function r(t,n){var r=t;n=n||e.location,null==t&&(t=n.protocol+\"//\"+n.host),\"string\"==typeof t&&(\"/\"===t.charAt(0)&&(t=\"/\"===t.charAt(1)?n.protocol+t:n.host+t),/^(https?|wss?):\\/\\//.test(t)||(i(\"protocol-less url %s\",t),t=\"undefined\"!=typeof n?n.protocol+\"//\"+t:\"https://\"+t),i(\"parse %s\",t),r=o(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port=\"80\":/^(http|ws)s$/.test(r.protocol)&&(r.port=\"443\")),r.path=r.path||\"/\";var s=r.host.indexOf(\":\")!==-1,a=s?\"[\"+r.host+\"]\":r.host;return r.id=r.protocol+\"://\"+a+\":\"+r.port,r.href=r.protocol+\"://\"+a+(n&&n.port===r.port?\"\":\":\"+r.port),r}var o=n(2),i=n(3)(\"socket.io-client:url\");t.exports=r}).call(e,function(){return this}())},function(t,e){var n=/^(?:(?![^:@]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/,r=[\"source\",\"protocol\",\"authority\",\"userInfo\",\"user\",\"password\",\"host\",\"port\",\"relative\",\"path\",\"directory\",\"file\",\"query\",\"anchor\"];t.exports=function(t){var e=t,o=t.indexOf(\"[\"),i=t.indexOf(\"]\");o!=-1&&i!=-1&&(t=t.substring(0,o)+t.substring(o,i).replace(/:/g,\";\")+t.substring(i,t.length));for(var s=n.exec(t||\"\"),a={},c=14;c--;)a[r[c]]=s[c]||\"\";return o!=-1&&i!=-1&&(a.source=e,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,\":\"),a.authority=a.authority.replace(\"[\",\"\").replace(\"]\",\"\").replace(/;/g,\":\"),a.ipv6uri=!0),a}},function(t,e,n){(function(r){function o(){return!(\"undefined\"==typeof window||!window.process||\"renderer\"!==window.process.type)||(\"undefined\"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||\"undefined\"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||\"undefined\"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/)&&parseInt(RegExp.$1,10)>=31||\"undefined\"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/))}function i(t){var n=this.useColors;if(t[0]=(n?\"%c\":\"\")+this.namespace+(n?\" %c\":\" \")+t[0]+(n?\"%c \":\" \")+\"+\"+e.humanize(this.diff),n){var r=\"color: \"+this.color;t.splice(1,0,r,\"color: inherit\");var o=0,i=0;t[0].replace(/%[a-zA-Z%]/g,function(t){\"%%\"!==t&&(o++,\"%c\"===t&&(i=o))}),t.splice(i,0,r)}}function s(){return\"object\"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function a(t){try{null==t?e.storage.removeItem(\"debug\"):e.storage.debug=t}catch(n){}}function c(){var t;try{t=e.storage.debug}catch(n){}return!t&&\"undefined\"!=typeof r&&\"env\"in r&&(t=r.env.DEBUG),t}function p(){try{return window.localStorage}catch(t){}}e=t.exports=n(5),e.log=s,e.formatArgs=i,e.save=a,e.load=c,e.useColors=o,e.storage=\"undefined\"!=typeof chrome&&\"undefined\"!=typeof chrome.storage?chrome.storage.local:p(),e.colors=[\"lightseagreen\",\"forestgreen\",\"goldenrod\",\"dodgerblue\",\"darkorchid\",\"crimson\"],e.formatters.j=function(t){try{return JSON.stringify(t)}catch(e){return\"[UnexpectedJSONParseError]: \"+e.message}},e.enable(c())}).call(e,n(4))},function(t,e){function n(){throw new Error(\"setTimeout has not been defined\")}function r(){throw new Error(\"clearTimeout has not been defined\")}function o(t){if(u===setTimeout)return setTimeout(t,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(t,0);try{return u(t,0)}catch(e){try{return u.call(null,t,0)}catch(e){return u.call(this,t,0)}}}function i(t){if(h===clearTimeout)return clearTimeout(t);if((h===r||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{return h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}function s(){y&&l&&(y=!1,l.length?d=l.concat(d):m=-1,d.length&&a())}function a(){if(!y){var t=o(s);y=!0;for(var e=d.length;e;){for(l=d,d=[];++m<e;)l&&l[m].run();m=-1,e=d.length}l=null,y=!1,i(t)}}function c(t,e){this.fun=t,this.array=e}function p(){}var u,h,f=t.exports={};!function(){try{u=\"function\"==typeof setTimeout?setTimeout:n}catch(t){u=n}try{h=\"function\"==typeof clearTimeout?clearTimeout:r}catch(t){h=r}}();var l,d=[],y=!1,m=-1;f.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];d.push(new c(t,e)),1!==d.length||y||o(a)},c.prototype.run=function(){this.fun.apply(null,this.array)},f.title=\"browser\",f.browser=!0,f.env={},f.argv=[],f.version=\"\",f.versions={},f.on=p,f.addListener=p,f.once=p,f.off=p,f.removeListener=p,f.removeAllListeners=p,f.emit=p,f.prependListener=p,f.prependOnceListener=p,f.listeners=function(t){return[]},f.binding=function(t){throw new Error(\"process.binding is not supported\")},f.cwd=function(){return\"/\"},f.chdir=function(t){throw new Error(\"process.chdir is not supported\")},f.umask=function(){return 0}},function(t,e,n){function r(t){var n,r=0;for(n in t)r=(r<<5)-r+t.charCodeAt(n),r|=0;return e.colors[Math.abs(r)%e.colors.length]}function o(t){function n(){if(n.enabled){var t=n,r=+new Date,o=r-(p||r);t.diff=o,t.prev=p,t.curr=r,p=r;for(var i=new Array(arguments.length),s=0;s<i.length;s++)i[s]=arguments[s];i[0]=e.coerce(i[0]),\"string\"!=typeof i[0]&&i.unshift(\"%O\");var a=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,function(n,r){if(\"%%\"===n)return n;a++;var o=e.formatters[r];if(\"function\"==typeof o){var s=i[a];n=o.call(t,s),i.splice(a,1),a--}return n}),e.formatArgs.call(t,i);var c=n.log||e.log||console.log.bind(console);c.apply(t,i)}}return n.namespace=t,n.enabled=e.enabled(t),n.useColors=e.useColors(),n.color=r(t),\"function\"==typeof e.init&&e.init(n),n}function i(t){e.save(t),e.names=[],e.skips=[];for(var n=(\"string\"==typeof t?t:\"\").split(/[\\s,]+/),r=n.length,o=0;o<r;o++)n[o]&&(t=n[o].replace(/\\*/g,\".*?\"),\"-\"===t[0]?e.skips.push(new RegExp(\"^\"+t.substr(1)+\"$\")):e.names.push(new RegExp(\"^\"+t+\"$\")))}function s(){e.enable(\"\")}function a(t){var n,r;for(n=0,r=e.skips.length;n<r;n++)if(e.skips[n].test(t))return!1;for(n=0,r=e.names.length;n<r;n++)if(e.names[n].test(t))return!0;return!1}function c(t){return t instanceof Error?t.stack||t.message:t}e=t.exports=o.debug=o[\"default\"]=o,e.coerce=c,e.disable=s,e.enable=i,e.enabled=a,e.humanize=n(6),e.names=[],e.skips=[],e.formatters={};var p},function(t,e){function n(t){if(t=String(t),!(t.length>100)){var e=/^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]),r=(e[2]||\"ms\").toLowerCase();switch(r){case\"years\":case\"year\":case\"yrs\":case\"yr\":case\"y\":return n*u;case\"days\":case\"day\":case\"d\":return n*p;case\"hours\":case\"hour\":case\"hrs\":case\"hr\":case\"h\":return n*c;case\"minutes\":case\"minute\":case\"mins\":case\"min\":case\"m\":return n*a;case\"seconds\":case\"second\":case\"secs\":case\"sec\":case\"s\":return n*s;case\"milliseconds\":case\"millisecond\":case\"msecs\":case\"msec\":case\"ms\":return n;default:return}}}}function r(t){return t>=p?Math.round(t/p)+\"d\":t>=c?Math.round(t/c)+\"h\":t>=a?Math.round(t/a)+\"m\":t>=s?Math.round(t/s)+\"s\":t+\"ms\"}function o(t){return i(t,p,\"day\")||i(t,c,\"hour\")||i(t,a,\"minute\")||i(t,s,\"second\")||t+\" ms\"}function i(t,e,n){if(!(t<e))return t<1.5*e?Math.floor(t/e)+\" \"+n:Math.ceil(t/e)+\" \"+n+\"s\"}var s=1e3,a=60*s,c=60*a,p=24*c,u=365.25*p;t.exports=function(t,e){e=e||{};var i=typeof t;if(\"string\"===i&&t.length>0)return n(t);if(\"number\"===i&&isNaN(t)===!1)return e[\"long\"]?o(t):r(t);throw new Error(\"val is not a non-empty string or a valid number. val=\"+JSON.stringify(t))}},function(t,e,n){function r(){}function o(t){var n=\"\"+t.type;return e.BINARY_EVENT!==t.type&&e.BINARY_ACK!==t.type||(n+=t.attachments+\"-\"),t.nsp&&\"/\"!==t.nsp&&(n+=t.nsp+\",\"),null!=t.id&&(n+=t.id),null!=t.data&&(n+=JSON.stringify(t.data)),h(\"encoded %j as %s\",t,n),n}function i(t,e){function n(t){var n=d.deconstructPacket(t),r=o(n.packet),i=n.buffers;i.unshift(r),e(i)}d.removeBlobs(t,n)}function s(){this.reconstructor=null}function a(t){var n=0,r={type:Number(t.charAt(0))};if(null==e.types[r.type])return u();if(e.BINARY_EVENT===r.type||e.BINARY_ACK===r.type){for(var o=\"\";\"-\"!==t.charAt(++n)&&(o+=t.charAt(n),n!=t.length););if(o!=Number(o)||\"-\"!==t.charAt(n))throw new Error(\"Illegal attachments\");r.attachments=Number(o)}if(\"/\"===t.charAt(n+1))for(r.nsp=\"\";++n;){var i=t.charAt(n);if(\",\"===i)break;if(r.nsp+=i,n===t.length)break}else r.nsp=\"/\";var s=t.charAt(n+1);if(\"\"!==s&&Number(s)==s){for(r.id=\"\";++n;){var i=t.charAt(n);if(null==i||Number(i)!=i){--n;break}if(r.id+=t.charAt(n),n===t.length)break}r.id=Number(r.id)}return t.charAt(++n)&&(r=c(r,t.substr(n))),h(\"decoded %s as %j\",t,r),r}function c(t,e){try{t.data=JSON.parse(e)}catch(n){return u()}return t}function p(t){this.reconPack=t,this.buffers=[]}function u(){return{type:e.ERROR,data:\"parser error\"}}var h=n(3)(\"socket.io-parser\"),f=n(8),l=n(9),d=n(11),y=n(12);e.protocol=4,e.types=[\"CONNECT\",\"DISCONNECT\",\"EVENT\",\"ACK\",\"ERROR\",\"BINARY_EVENT\",\"BINARY_ACK\"],e.CONNECT=0,e.DISCONNECT=1,e.EVENT=2,e.ACK=3,e.ERROR=4,e.BINARY_EVENT=5,e.BINARY_ACK=6,e.Encoder=r,e.Decoder=s,r.prototype.encode=function(t,n){if(t.type!==e.EVENT&&t.type!==e.ACK||!l(t.data)||(t.type=t.type===e.EVENT?e.BINARY_EVENT:e.BINARY_ACK),h(\"encoding packet %j\",t),e.BINARY_EVENT===t.type||e.BINARY_ACK===t.type)i(t,n);else{var r=o(t);n([r])}},f(s.prototype),s.prototype.add=function(t){var n;if(\"string\"==typeof t)n=a(t),e.BINARY_EVENT===n.type||e.BINARY_ACK===n.type?(this.reconstructor=new p(n),0===this.reconstructor.reconPack.attachments&&this.emit(\"decoded\",n)):this.emit(\"decoded\",n);else{if(!y(t)&&!t.base64)throw new Error(\"Unknown type: \"+t);if(!this.reconstructor)throw new Error(\"got binary data when not reconstructing a packet\");n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,this.emit(\"decoded\",n))}},s.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},p.prototype.takeBinaryData=function(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){var e=d.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null},p.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(t,e,n){function r(t){if(t)return o(t)}function o(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}t.exports=r,r.prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[\"$\"+t]=this._callbacks[\"$\"+t]||[]).push(e),this},r.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks[\"$\"+t];if(!n)return this;if(1==arguments.length)return delete this._callbacks[\"$\"+t],this;for(var r,o=0;o<n.length;o++)if(r=n[o],r===e||r.fn===e){n.splice(o,1);break}return this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks[\"$\"+t];if(n){n=n.slice(0);for(var r=0,o=n.length;r<o;++r)n[r].apply(this,e)}return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[\"$\"+t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e,n){(function(e){function r(t){if(!t||\"object\"!=typeof t)return!1;if(o(t)){for(var n=0,i=t.length;n<i;n++)if(r(t[n]))return!0;return!1}if(\"function\"==typeof e.Buffer&&e.Buffer.isBuffer&&e.Buffer.isBuffer(t)||\"function\"==typeof e.ArrayBuffer&&t instanceof ArrayBuffer||s&&t instanceof Blob||a&&t instanceof File)return!0;if(t.toJSON&&\"function\"==typeof t.toJSON&&1===arguments.length)return r(t.toJSON(),!0);for(var c in t)if(Object.prototype.hasOwnProperty.call(t,c)&&r(t[c]))return!0;return!1}var o=n(10),i=Object.prototype.toString,s=\"function\"==typeof e.Blob||\"[object BlobConstructor]\"===i.call(e.Blob),a=\"function\"==typeof e.File||\"[object FileConstructor]\"===i.call(e.File);t.exports=r}).call(e,function(){return this}())},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return\"[object Array]\"==n.call(t)}},function(t,e,n){(function(t){function r(t,e){if(!t)return t;if(s(t)){var n={_placeholder:!0,num:e.length};return e.push(t),n}if(i(t)){for(var o=new Array(t.length),a=0;a<t.length;a++)o[a]=r(t[a],e);return o}if(\"object\"==typeof t&&!(t instanceof Date)){var o={};for(var c in t)o[c]=r(t[c],e);return o}return t}function o(t,e){if(!t)return t;if(t&&t._placeholder)return e[t.num];if(i(t))for(var n=0;n<t.length;n++)t[n]=o(t[n],e);else if(\"object\"==typeof t)for(var r in t)t[r]=o(t[r],e);return t}var i=n(10),s=n(12),a=Object.prototype.toString,c=\"function\"==typeof t.Blob||\"[object BlobConstructor]\"===a.call(t.Blob),p=\"function\"==typeof t.File||\"[object FileConstructor]\"===a.call(t.File);e.deconstructPacket=function(t){var e=[],n=t.data,o=t;return o.data=r(n,e),o.attachments=e.length,{packet:o,buffers:e}},e.reconstructPacket=function(t,e){return t.data=o(t.data,e),t.attachments=void 0,t},e.removeBlobs=function(t,e){function n(t,a,u){if(!t)return t;if(c&&t instanceof Blob||p&&t instanceof File){r++;var h=new FileReader;h.onload=function(){u?u[a]=this.result:o=this.result,--r||e(o)},h.readAsArrayBuffer(t)}else if(i(t))for(var f=0;f<t.length;f++)n(t[f],f,t);else if(\"object\"==typeof t&&!s(t))for(var l in t)n(t[l],l,t)}var r=0,o=t;n(o),r||e(o)}}).call(e,function(){return this}())},function(t,e){(function(e){function n(t){return e.Buffer&&e.Buffer.isBuffer(t)||e.ArrayBuffer&&t instanceof ArrayBuffer}t.exports=n}).call(e,function(){return this}())},function(t,e,n){\"use strict\";function r(t,e){if(!(this instanceof r))return new r(t,e);t&&\"object\"===(\"undefined\"==typeof t?\"undefined\":o(t))&&(e=t,t=void 0),e=e||{},e.path=e.path||\"/socket.io\",this.nsps={},this.subs=[],this.opts=e,this.reconnection(e.reconnection!==!1),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(e.randomizationFactor||.5),this.backoff=new l({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this.readyState=\"closed\",this.uri=t,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var n=e.parser||c;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this.autoConnect=e.autoConnect!==!1,this.autoConnect&&this.open()}var o=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t},i=n(14),s=n(39),a=n(8),c=n(7),p=n(41),u=n(42),h=n(3)(\"socket.io-client:manager\"),f=n(37),l=n(43),d=Object.prototype.hasOwnProperty;t.exports=r,r.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var t in this.nsps)d.call(this.nsps,t)&&this.nsps[t].emit.apply(this.nsps[t],arguments)},r.prototype.updateSocketIds=function(){for(var t in this.nsps)d.call(this.nsps,t)&&(this.nsps[t].id=this.generateId(t))},r.prototype.generateId=function(t){return(\"/\"===t?\"\":t+\"#\")+this.engine.id},a(r.prototype),r.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection},r.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts},r.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this.backoff&&this.backoff.setMin(t),this):this._reconnectionDelay},r.prototype.randomizationFactor=function(t){return arguments.length?(this._randomizationFactor=t,this.backoff&&this.backoff.setJitter(t),this):this._randomizationFactor},r.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this.backoff&&this.backoff.setMax(t),this):this._reconnectionDelayMax},r.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout},r.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},r.prototype.open=r.prototype.connect=function(t,e){if(h(\"readyState %s\",this.readyState),~this.readyState.indexOf(\"open\"))return this;h(\"opening %s\",this.uri),this.engine=i(this.uri,this.opts);var n=this.engine,r=this;this.readyState=\"opening\",this.skipReconnect=!1;var o=p(n,\"open\",function(){r.onopen(),t&&t()}),s=p(n,\"error\",function(e){if(h(\"connect_error\"),r.cleanup(),r.readyState=\"closed\",r.emitAll(\"connect_error\",e),t){var n=new Error(\"Connection error\");n.data=e,t(n)}else r.maybeReconnectOnOpen()});if(!1!==this._timeout){var a=this._timeout;h(\"connect attempt will timeout after %d\",a);var c=setTimeout(function(){h(\"connect attempt timed out after %d\",a),o.destroy(),n.close(),n.emit(\"error\",\"timeout\"),r.emitAll(\"connect_timeout\",a)},a);this.subs.push({destroy:function(){clearTimeout(c)}})}return this.subs.push(o),this.subs.push(s),this},r.prototype.onopen=function(){h(\"open\"),this.cleanup(),this.readyState=\"open\",this.emit(\"open\");var t=this.engine;this.subs.push(p(t,\"data\",u(this,\"ondata\"))),this.subs.push(p(t,\"ping\",u(this,\"onping\"))),this.subs.push(p(t,\"pong\",u(this,\"onpong\"))),this.subs.push(p(t,\"error\",u(this,\"onerror\"))),this.subs.push(p(t,\"close\",u(this,\"onclose\"))),this.subs.push(p(this.decoder,\"decoded\",u(this,\"ondecoded\")))},r.prototype.onping=function(){this.lastPing=new Date,this.emitAll(\"ping\")},r.prototype.onpong=function(){this.emitAll(\"pong\",new Date-this.lastPing)},r.prototype.ondata=function(t){this.decoder.add(t)},r.prototype.ondecoded=function(t){this.emit(\"packet\",t)},r.prototype.onerror=function(t){h(\"error\",t),this.emitAll(\"error\",t)},r.prototype.socket=function(t,e){function n(){~f(o.connecting,r)||o.connecting.push(r)}var r=this.nsps[t];if(!r){r=new s(this,t,e),this.nsps[t]=r;var o=this;r.on(\"connecting\",n),r.on(\"connect\",function(){r.id=o.generateId(t)}),this.autoConnect&&n()}return r},r.prototype.destroy=function(t){var e=f(this.connecting,t);~e&&this.connecting.splice(e,1),this.connecting.length||this.close()},r.prototype.packet=function(t){h(\"writing packet %j\",t);var e=this;t.query&&0===t.type&&(t.nsp+=\"?\"+t.query),e.encoding?e.packetBuffer.push(t):(e.encoding=!0,this.encoder.encode(t,function(n){for(var r=0;r<n.length;r++)e.engine.write(n[r],t.options);e.encoding=!1,e.processPacketQueue()}))},r.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var t=this.packetBuffer.shift();this.packet(t)}},r.prototype.cleanup=function(){h(\"cleanup\");for(var t=this.subs.length,e=0;e<t;e++){var n=this.subs.shift();n.destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},r.prototype.close=r.prototype.disconnect=function(){h(\"disconnect\"),this.skipReconnect=!0,this.reconnecting=!1,\"opening\"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState=\"closed\",this.engine&&this.engine.close()},r.prototype.onclose=function(t){h(\"onclose\"),this.cleanup(),this.backoff.reset(),this.readyState=\"closed\",this.emit(\"close\",t),this._reconnection&&!this.skipReconnect&&this.reconnect()},r.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)h(\"reconnect failed\"),this.backoff.reset(),this.emitAll(\"reconnect_failed\"),this.reconnecting=!1;else{var e=this.backoff.duration();h(\"will wait %dms before reconnect attempt\",e),this.reconnecting=!0;var n=setTimeout(function(){t.skipReconnect||(h(\"attempting reconnect\"),t.emitAll(\"reconnect_attempt\",t.backoff.attempts),t.emitAll(\"reconnecting\",t.backoff.attempts),t.skipReconnect||t.open(function(e){e?(h(\"reconnect attempt error\"),t.reconnecting=!1,t.reconnect(),t.emitAll(\"reconnect_error\",e.data)):(h(\"reconnect success\"),t.onreconnect())}))},e);this.subs.push({destroy:function(){clearTimeout(n)}})}},r.prototype.onreconnect=function(){var t=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll(\"reconnect\",t)}},function(t,e,n){t.exports=n(15)},function(t,e,n){t.exports=n(16),t.exports.parser=n(23)},function(t,e,n){(function(e){function r(t,n){if(!(this instanceof r))return new r(t,n);n=n||{},t&&\"object\"==typeof t&&(n=t,t=null),t?(t=u(t),n.hostname=t.host,n.secure=\"https\"===t.protocol||\"wss\"===t.protocol,n.port=t.port,t.query&&(n.query=t.query)):n.host&&(n.hostname=u(n.host).host),this.secure=null!=n.secure?n.secure:e.location&&\"https:\"===location.protocol,n.hostname&&!n.port&&(n.port=this.secure?\"443\":\"80\"),this.agent=n.agent||!1,this.hostname=n.hostname||(e.location?location.hostname:\"localhost\"),this.port=n.port||(e.location&&location.port?location.port:this.secure?443:80),this.query=n.query||{},\"string\"==typeof this.query&&(this.query=f.decode(this.query)),this.upgrade=!1!==n.upgrade,this.path=(n.path||\"/engine.io\").replace(/\\/$/,\"\")+\"/\",this.forceJSONP=!!n.forceJSONP,this.jsonp=!1!==n.jsonp,this.forceBase64=!!n.forceBase64,this.enablesXDR=!!n.enablesXDR,this.timestampParam=n.timestampParam||\"t\",this.timestampRequests=n.timestampRequests,this.transports=n.transports||[\"polling\",\"websocket\"],this.transportOptions=n.transportOptions||{},this.readyState=\"\",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=n.policyPort||843,this.rememberUpgrade=n.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=n.onlyBinaryUpgrades,this.perMessageDeflate=!1!==n.perMessageDeflate&&(n.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=n.pfx||null,this.key=n.key||null,this.passphrase=n.passphrase||null,this.cert=n.cert||null,this.ca=n.ca||null,this.ciphers=n.ciphers||null,this.rejectUnauthorized=void 0===n.rejectUnauthorized||n.rejectUnauthorized,this.forceNode=!!n.forceNode;var o=\"object\"==typeof e&&e;o.global===o&&(n.extraHeaders&&Object.keys(n.extraHeaders).length>0&&(this.extraHeaders=n.extraHeaders),n.localAddress&&(this.localAddress=n.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}function o(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}var i=n(17),s=n(8),a=n(3)(\"engine.io-client:socket\"),c=n(37),p=n(23),u=n(2),h=n(38),f=n(31);t.exports=r,r.priorWebsocketSuccess=!1,s(r.prototype),r.protocol=p.protocol,r.Socket=r,r.Transport=n(22),r.transports=n(17),r.parser=n(23),r.prototype.createTransport=function(t){a('creating transport \"%s\"',t);var e=o(this.query);e.EIO=p.protocol,e.transport=t;var n=this.transportOptions[t]||{};this.id&&(e.sid=this.id);var r=new i[t]({query:e,socket:this,agent:n.agent||this.agent,hostname:n.hostname||this.hostname,port:n.port||this.port,secure:n.secure||this.secure,path:n.path||this.path,forceJSONP:n.forceJSONP||this.forceJSONP,jsonp:n.jsonp||this.jsonp,forceBase64:n.forceBase64||this.forceBase64,enablesXDR:n.enablesXDR||this.enablesXDR,timestampRequests:n.timestampRequests||this.timestampRequests,timestampParam:n.timestampParam||this.timestampParam,policyPort:n.policyPort||this.policyPort,pfx:n.pfx||this.pfx,key:n.key||this.key,passphrase:n.passphrase||this.passphrase,cert:n.cert||this.cert,ca:n.ca||this.ca,ciphers:n.ciphers||this.ciphers,rejectUnauthorized:n.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:n.perMessageDeflate||this.perMessageDeflate,extraHeaders:n.extraHeaders||this.extraHeaders,forceNode:n.forceNode||this.forceNode,localAddress:n.localAddress||this.localAddress,requestTimeout:n.requestTimeout||this.requestTimeout,protocols:n.protocols||void 0});return r},r.prototype.open=function(){var t;if(this.rememberUpgrade&&r.priorWebsocketSuccess&&this.transports.indexOf(\"websocket\")!==-1)t=\"websocket\";else{if(0===this.transports.length){var e=this;return void setTimeout(function(){e.emit(\"error\",\"No transports available\")},0)}t=this.transports[0]}this.readyState=\"opening\";try{t=this.createTransport(t)}catch(n){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)},r.prototype.setTransport=function(t){a(\"setting transport %s\",t.name);var e=this;this.transport&&(a(\"clearing existing transport %s\",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on(\"drain\",function(){e.onDrain()}).on(\"packet\",function(t){e.onPacket(t)}).on(\"error\",function(t){e.onError(t)}).on(\"close\",function(){e.onClose(\"transport close\")})},r.prototype.probe=function(t){function e(){if(f.onlyBinaryUpgrades){var e=!this.supportsBinary&&f.transport.supportsBinary;h=h||e}h||(a('probe transport \"%s\" opened',t),u.send([{type:\"ping\",data:\"probe\"}]),u.once(\"packet\",function(e){if(!h)if(\"pong\"===e.type&&\"probe\"===e.data){if(a('probe transport \"%s\" pong',t),f.upgrading=!0,f.emit(\"upgrading\",u),!u)return;r.priorWebsocketSuccess=\"websocket\"===u.name,a('pausing current transport \"%s\"',f.transport.name),f.transport.pause(function(){h||\"closed\"!==f.readyState&&(a(\"changing transport and sending upgrade packet\"),p(),f.setTransport(u),u.send([{type:\"upgrade\"}]),f.emit(\"upgrade\",u),u=null,f.upgrading=!1,f.flush())})}else{a('probe transport \"%s\" failed',t);var n=new Error(\"probe error\");n.transport=u.name,f.emit(\"upgradeError\",n)}}))}function n(){h||(h=!0,p(),u.close(),u=null)}function o(e){var r=new Error(\"probe error: \"+e);r.transport=u.name,n(),a('probe transport \"%s\" failed because of error: %s',t,e),f.emit(\"upgradeError\",r)}function i(){o(\"transport closed\")}function s(){o(\"socket closed\")}function c(t){u&&t.name!==u.name&&(a('\"%s\" works - aborting \"%s\"',t.name,u.name),n())}function p(){u.removeListener(\"open\",e),u.removeListener(\"error\",o),u.removeListener(\"close\",i),f.removeListener(\"close\",s),f.removeListener(\"upgrading\",c)}a('probing transport \"%s\"',t);var u=this.createTransport(t,{probe:1}),h=!1,f=this;r.priorWebsocketSuccess=!1,u.once(\"open\",e),u.once(\"error\",o),u.once(\"close\",i),this.once(\"close\",s),this.once(\"upgrading\",c),u.open()},r.prototype.onOpen=function(){if(a(\"socket open\"),this.readyState=\"open\",r.priorWebsocketSuccess=\"websocket\"===this.transport.name,this.emit(\"open\"),this.flush(),\"open\"===this.readyState&&this.upgrade&&this.transport.pause){a(\"starting upgrade probes\");for(var t=0,e=this.upgrades.length;t<e;t++)this.probe(this.upgrades[t])}},r.prototype.onPacket=function(t){if(\"opening\"===this.readyState||\"open\"===this.readyState||\"closing\"===this.readyState)switch(a('socket receive: type \"%s\", data \"%s\"',t.type,t.data),this.emit(\"packet\",t),this.emit(\"heartbeat\"),t.type){case\"open\":this.onHandshake(h(t.data));break;case\"pong\":this.setPing(),this.emit(\"pong\");break;case\"error\":var e=new Error(\"server error\");e.code=t.data,this.onError(e);break;case\"message\":this.emit(\"data\",t.data),this.emit(\"message\",t.data)}else a('packet received with socket readyState \"%s\"',this.readyState)},r.prototype.onHandshake=function(t){this.emit(\"handshake\",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),\"closed\"!==this.readyState&&(this.setPing(),this.removeListener(\"heartbeat\",this.onHeartbeat),this.on(\"heartbeat\",this.onHeartbeat))},r.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var e=this;e.pingTimeoutTimer=setTimeout(function(){\"closed\"!==e.readyState&&e.onClose(\"ping timeout\")},t||e.pingInterval+e.pingTimeout)},r.prototype.setPing=function(){var t=this;clearTimeout(t.pingIntervalTimer),t.pingIntervalTimer=setTimeout(function(){a(\"writing ping packet - expecting pong within %sms\",t.pingTimeout),t.ping(),t.onHeartbeat(t.pingTimeout)},t.pingInterval)},r.prototype.ping=function(){var t=this;this.sendPacket(\"ping\",function(){t.emit(\"ping\")})},r.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit(\"drain\"):this.flush()},r.prototype.flush=function(){\"closed\"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(a(\"flushing %d packets in socket\",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit(\"flush\"))},r.prototype.write=r.prototype.send=function(t,e,n){return this.sendPacket(\"message\",t,e,n),this},r.prototype.sendPacket=function(t,e,n,r){if(\"function\"==typeof e&&(r=e,e=void 0),\"function\"==typeof n&&(r=n,n=null),\"closing\"!==this.readyState&&\"closed\"!==this.readyState){n=n||{},n.compress=!1!==n.compress;var o={type:t,data:e,options:n};this.emit(\"packetCreate\",o),this.writeBuffer.push(o),r&&this.once(\"flush\",r),this.flush()}},r.prototype.close=function(){function t(){r.onClose(\"forced close\"),a(\"socket closing - telling transport to close\"),r.transport.close()}function e(){r.removeListener(\"upgrade\",e),r.removeListener(\"upgradeError\",e),t()}function n(){r.once(\"upgrade\",e),r.once(\"upgradeError\",e)}if(\"opening\"===this.readyState||\"open\"===this.readyState){this.readyState=\"closing\";var r=this;this.writeBuffer.length?this.once(\"drain\",function(){this.upgrading?n():t()}):this.upgrading?n():t()}return this},r.prototype.onError=function(t){a(\"socket error %j\",t),r.priorWebsocketSuccess=!1,this.emit(\"error\",t),this.onClose(\"transport error\",t)},r.prototype.onClose=function(t,e){if(\"opening\"===this.readyState||\"open\"===this.readyState||\"closing\"===this.readyState){a('socket close with reason: \"%s\"',t);var n=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners(\"close\"),this.transport.close(),this.transport.removeAllListeners(),this.readyState=\"closed\",this.id=null,this.emit(\"close\",t,e),n.writeBuffer=[],n.prevBufferLen=0}},r.prototype.filterUpgrades=function(t){for(var e=[],n=0,r=t.length;n<r;n++)~c(this.transports,t[n])&&e.push(t[n]);return e}}).call(e,function(){return this}())},function(t,e,n){(function(t){function r(e){var n,r=!1,a=!1,c=!1!==e.jsonp;if(t.location){var p=\"https:\"===location.protocol,u=location.port;u||(u=p?443:80),r=e.hostname!==location.hostname||u!==e.port,a=e.secure!==p}if(e.xdomain=r,e.xscheme=a,n=new o(e),\"open\"in n&&!e.forceJSONP)return new i(e);if(!c)throw new Error(\"JSONP disabled\");return new s(e)}var o=n(18),i=n(20),s=n(34),a=n(35);e.polling=r,e.websocket=a}).call(e,function(){return this}())},function(t,e,n){(function(e){var r=n(19);t.exports=function(t){var n=t.xdomain,o=t.xscheme,i=t.enablesXDR;try{if(\"undefined\"!=typeof XMLHttpRequest&&(!n||r))return new XMLHttpRequest}catch(s){}try{if(\"undefined\"!=typeof XDomainRequest&&!o&&i)return new XDomainRequest}catch(s){}if(!n)try{\r\nreturn new(e[[\"Active\"].concat(\"Object\").join(\"X\")])(\"Microsoft.XMLHTTP\")}catch(s){}}}).call(e,function(){return this}())},function(t,e){try{t.exports=\"undefined\"!=typeof XMLHttpRequest&&\"withCredentials\"in new XMLHttpRequest}catch(n){t.exports=!1}},function(t,e,n){(function(e){function r(){}function o(t){if(c.call(this,t),this.requestTimeout=t.requestTimeout,this.extraHeaders=t.extraHeaders,e.location){var n=\"https:\"===location.protocol,r=location.port;r||(r=n?443:80),this.xd=t.hostname!==e.location.hostname||r!==t.port,this.xs=t.secure!==n}}function i(t){this.method=t.method||\"GET\",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.requestTimeout=t.requestTimeout,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders,this.create()}function s(){for(var t in i.requests)i.requests.hasOwnProperty(t)&&i.requests[t].abort()}var a=n(18),c=n(21),p=n(8),u=n(32),h=n(3)(\"engine.io-client:polling-xhr\");t.exports=o,t.exports.Request=i,u(o,c),o.prototype.supportsBinary=!0,o.prototype.request=function(t){return t=t||{},t.uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,t.requestTimeout=this.requestTimeout,t.extraHeaders=this.extraHeaders,new i(t)},o.prototype.doWrite=function(t,e){var n=\"string\"!=typeof t&&void 0!==t,r=this.request({method:\"POST\",data:t,isBinary:n}),o=this;r.on(\"success\",e),r.on(\"error\",function(t){o.onError(\"xhr post error\",t)}),this.sendXhr=r},o.prototype.doPoll=function(){h(\"xhr poll\");var t=this.request(),e=this;t.on(\"data\",function(t){e.onData(t)}),t.on(\"error\",function(t){e.onError(\"xhr poll error\",t)}),this.pollXhr=t},p(i.prototype),i.prototype.create=function(){var t={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized;var n=this.xhr=new a(t),r=this;try{h(\"xhr open %s: %s\",this.method,this.uri),n.open(this.method,this.uri,this.async);try{if(this.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(var o in this.extraHeaders)this.extraHeaders.hasOwnProperty(o)&&n.setRequestHeader(o,this.extraHeaders[o])}}catch(s){}if(\"POST\"===this.method)try{this.isBinary?n.setRequestHeader(\"Content-type\",\"application/octet-stream\"):n.setRequestHeader(\"Content-type\",\"text/plain;charset=UTF-8\")}catch(s){}try{n.setRequestHeader(\"Accept\",\"*/*\")}catch(s){}\"withCredentials\"in n&&(n.withCredentials=!0),this.requestTimeout&&(n.timeout=this.requestTimeout),this.hasXDR()?(n.onload=function(){r.onLoad()},n.onerror=function(){r.onError(n.responseText)}):n.onreadystatechange=function(){if(2===n.readyState){var t;try{t=n.getResponseHeader(\"Content-Type\")}catch(e){}\"application/octet-stream\"===t&&(n.responseType=\"arraybuffer\")}4===n.readyState&&(200===n.status||1223===n.status?r.onLoad():setTimeout(function(){r.onError(n.status)},0))},h(\"xhr data %s\",this.data),n.send(this.data)}catch(s){return void setTimeout(function(){r.onError(s)},0)}e.document&&(this.index=i.requestsCount++,i.requests[this.index]=this)},i.prototype.onSuccess=function(){this.emit(\"success\"),this.cleanup()},i.prototype.onData=function(t){this.emit(\"data\",t),this.onSuccess()},i.prototype.onError=function(t){this.emit(\"error\",t),this.cleanup(!0)},i.prototype.cleanup=function(t){if(\"undefined\"!=typeof this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=r:this.xhr.onreadystatechange=r,t)try{this.xhr.abort()}catch(n){}e.document&&delete i.requests[this.index],this.xhr=null}},i.prototype.onLoad=function(){var t;try{var e;try{e=this.xhr.getResponseHeader(\"Content-Type\")}catch(n){}t=\"application/octet-stream\"===e?this.xhr.response||this.xhr.responseText:this.xhr.responseText}catch(n){this.onError(n)}null!=t&&this.onData(t)},i.prototype.hasXDR=function(){return\"undefined\"!=typeof e.XDomainRequest&&!this.xs&&this.enablesXDR},i.prototype.abort=function(){this.cleanup()},i.requestsCount=0,i.requests={},e.document&&(e.attachEvent?e.attachEvent(\"onunload\",s):e.addEventListener&&e.addEventListener(\"beforeunload\",s,!1))}).call(e,function(){return this}())},function(t,e,n){function r(t){var e=t&&t.forceBase64;u&&!e||(this.supportsBinary=!1),o.call(this,t)}var o=n(22),i=n(31),s=n(23),a=n(32),c=n(33),p=n(3)(\"engine.io-client:polling\");t.exports=r;var u=function(){var t=n(18),e=new t({xdomain:!1});return null!=e.responseType}();a(r,o),r.prototype.name=\"polling\",r.prototype.doOpen=function(){this.poll()},r.prototype.pause=function(t){function e(){p(\"paused\"),n.readyState=\"paused\",t()}var n=this;if(this.readyState=\"pausing\",this.polling||!this.writable){var r=0;this.polling&&(p(\"we are currently polling - waiting to pause\"),r++,this.once(\"pollComplete\",function(){p(\"pre-pause polling complete\"),--r||e()})),this.writable||(p(\"we are currently writing - waiting to pause\"),r++,this.once(\"drain\",function(){p(\"pre-pause writing complete\"),--r||e()}))}else e()},r.prototype.poll=function(){p(\"polling\"),this.polling=!0,this.doPoll(),this.emit(\"poll\")},r.prototype.onData=function(t){var e=this;p(\"polling got data %s\",t);var n=function(t,n,r){return\"opening\"===e.readyState&&e.onOpen(),\"close\"===t.type?(e.onClose(),!1):void e.onPacket(t)};s.decodePayload(t,this.socket.binaryType,n),\"closed\"!==this.readyState&&(this.polling=!1,this.emit(\"pollComplete\"),\"open\"===this.readyState?this.poll():p('ignoring poll - transport state \"%s\"',this.readyState))},r.prototype.doClose=function(){function t(){p(\"writing close packet\"),e.write([{type:\"close\"}])}var e=this;\"open\"===this.readyState?(p(\"transport open - closing\"),t()):(p(\"transport not open - deferring close\"),this.once(\"open\",t))},r.prototype.write=function(t){var e=this;this.writable=!1;var n=function(){e.writable=!0,e.emit(\"drain\")};s.encodePayload(t,this.supportsBinary,function(t){e.doWrite(t,n)})},r.prototype.uri=function(){var t=this.query||{},e=this.secure?\"https\":\"http\",n=\"\";!1!==this.timestampRequests&&(t[this.timestampParam]=c()),this.supportsBinary||t.sid||(t.b64=1),t=i.encode(t),this.port&&(\"https\"===e&&443!==Number(this.port)||\"http\"===e&&80!==Number(this.port))&&(n=\":\"+this.port),t.length&&(t=\"?\"+t);var r=this.hostname.indexOf(\":\")!==-1;return e+\"://\"+(r?\"[\"+this.hostname+\"]\":this.hostname)+n+this.path+t}},function(t,e,n){function r(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState=\"\",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.forceNode=t.forceNode,this.extraHeaders=t.extraHeaders,this.localAddress=t.localAddress}var o=n(23),i=n(8);t.exports=r,i(r.prototype),r.prototype.onError=function(t,e){var n=new Error(t);return n.type=\"TransportError\",n.description=e,this.emit(\"error\",n),this},r.prototype.open=function(){return\"closed\"!==this.readyState&&\"\"!==this.readyState||(this.readyState=\"opening\",this.doOpen()),this},r.prototype.close=function(){return\"opening\"!==this.readyState&&\"open\"!==this.readyState||(this.doClose(),this.onClose()),this},r.prototype.send=function(t){if(\"open\"!==this.readyState)throw new Error(\"Transport not open\");this.write(t)},r.prototype.onOpen=function(){this.readyState=\"open\",this.writable=!0,this.emit(\"open\")},r.prototype.onData=function(t){var e=o.decodePacket(t,this.socket.binaryType);this.onPacket(e)},r.prototype.onPacket=function(t){this.emit(\"packet\",t)},r.prototype.onClose=function(){this.readyState=\"closed\",this.emit(\"close\")}},function(t,e,n){(function(t){function r(t,n){var r=\"b\"+e.packets[t.type]+t.data.data;return n(r)}function o(t,n,r){if(!n)return e.encodeBase64Packet(t,r);var o=t.data,i=new Uint8Array(o),s=new Uint8Array(1+o.byteLength);s[0]=v[t.type];for(var a=0;a<i.length;a++)s[a+1]=i[a];return r(s.buffer)}function i(t,n,r){if(!n)return e.encodeBase64Packet(t,r);var o=new FileReader;return o.onload=function(){t.data=o.result,e.encodePacket(t,n,!0,r)},o.readAsArrayBuffer(t.data)}function s(t,n,r){if(!n)return e.encodeBase64Packet(t,r);if(g)return i(t,n,r);var o=new Uint8Array(1);o[0]=v[t.type];var s=new k([o.buffer,t.data]);return r(s)}function a(t){try{t=d.decode(t,{strict:!1})}catch(e){return!1}return t}function c(t,e,n){for(var r=new Array(t.length),o=l(t.length,n),i=function(t,n,o){e(n,function(e,n){r[t]=n,o(e,r)})},s=0;s<t.length;s++)i(s,t[s],o)}var p,u=n(24),h=n(9),f=n(25),l=n(26),d=n(27);t&&t.ArrayBuffer&&(p=n(29));var y=\"undefined\"!=typeof navigator&&/Android/i.test(navigator.userAgent),m=\"undefined\"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),g=y||m;e.protocol=3;var v=e.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},b=u(v),w={type:\"error\",data:\"parser error\"},k=n(30);e.encodePacket=function(e,n,i,a){\"function\"==typeof n&&(a=n,n=!1),\"function\"==typeof i&&(a=i,i=null);var c=void 0===e.data?void 0:e.data.buffer||e.data;if(t.ArrayBuffer&&c instanceof ArrayBuffer)return o(e,n,a);if(k&&c instanceof t.Blob)return s(e,n,a);if(c&&c.base64)return r(e,a);var p=v[e.type];return void 0!==e.data&&(p+=i?d.encode(String(e.data),{strict:!1}):String(e.data)),a(\"\"+p)},e.encodeBase64Packet=function(n,r){var o=\"b\"+e.packets[n.type];if(k&&n.data instanceof t.Blob){var i=new FileReader;return i.onload=function(){var t=i.result.split(\",\")[1];r(o+t)},i.readAsDataURL(n.data)}var s;try{s=String.fromCharCode.apply(null,new Uint8Array(n.data))}catch(a){for(var c=new Uint8Array(n.data),p=new Array(c.length),u=0;u<c.length;u++)p[u]=c[u];s=String.fromCharCode.apply(null,p)}return o+=t.btoa(s),r(o)},e.decodePacket=function(t,n,r){if(void 0===t)return w;if(\"string\"==typeof t){if(\"b\"===t.charAt(0))return e.decodeBase64Packet(t.substr(1),n);if(r&&(t=a(t),t===!1))return w;var o=t.charAt(0);return Number(o)==o&&b[o]?t.length>1?{type:b[o],data:t.substring(1)}:{type:b[o]}:w}var i=new Uint8Array(t),o=i[0],s=f(t,1);return k&&\"blob\"===n&&(s=new k([s])),{type:b[o],data:s}},e.decodeBase64Packet=function(t,e){var n=b[t.charAt(0)];if(!p)return{type:n,data:{base64:!0,data:t.substr(1)}};var r=p.decode(t.substr(1));return\"blob\"===e&&k&&(r=new k([r])),{type:n,data:r}},e.encodePayload=function(t,n,r){function o(t){return t.length+\":\"+t}function i(t,r){e.encodePacket(t,!!s&&n,!1,function(t){r(null,o(t))})}\"function\"==typeof n&&(r=n,n=null);var s=h(t);return n&&s?k&&!g?e.encodePayloadAsBlob(t,r):e.encodePayloadAsArrayBuffer(t,r):t.length?void c(t,i,function(t,e){return r(e.join(\"\"))}):r(\"0:\")},e.decodePayload=function(t,n,r){if(\"string\"!=typeof t)return e.decodePayloadAsBinary(t,n,r);\"function\"==typeof n&&(r=n,n=null);var o;if(\"\"===t)return r(w,0,1);for(var i,s,a=\"\",c=0,p=t.length;c<p;c++){var u=t.charAt(c);if(\":\"===u){if(\"\"===a||a!=(i=Number(a)))return r(w,0,1);if(s=t.substr(c+1,i),a!=s.length)return r(w,0,1);if(s.length){if(o=e.decodePacket(s,n,!1),w.type===o.type&&w.data===o.data)return r(w,0,1);var h=r(o,c+i,p);if(!1===h)return}c+=i,a=\"\"}else a+=u}return\"\"!==a?r(w,0,1):void 0},e.encodePayloadAsArrayBuffer=function(t,n){function r(t,n){e.encodePacket(t,!0,!0,function(t){return n(null,t)})}return t.length?void c(t,r,function(t,e){var r=e.reduce(function(t,e){var n;return n=\"string\"==typeof e?e.length:e.byteLength,t+n.toString().length+n+2},0),o=new Uint8Array(r),i=0;return e.forEach(function(t){var e=\"string\"==typeof t,n=t;if(e){for(var r=new Uint8Array(t.length),s=0;s<t.length;s++)r[s]=t.charCodeAt(s);n=r.buffer}e?o[i++]=0:o[i++]=1;for(var a=n.byteLength.toString(),s=0;s<a.length;s++)o[i++]=parseInt(a[s]);o[i++]=255;for(var r=new Uint8Array(n),s=0;s<r.length;s++)o[i++]=r[s]}),n(o.buffer)}):n(new ArrayBuffer(0))},e.encodePayloadAsBlob=function(t,n){function r(t,n){e.encodePacket(t,!0,!0,function(t){var e=new Uint8Array(1);if(e[0]=1,\"string\"==typeof t){for(var r=new Uint8Array(t.length),o=0;o<t.length;o++)r[o]=t.charCodeAt(o);t=r.buffer,e[0]=0}for(var i=t instanceof ArrayBuffer?t.byteLength:t.size,s=i.toString(),a=new Uint8Array(s.length+1),o=0;o<s.length;o++)a[o]=parseInt(s[o]);if(a[s.length]=255,k){var c=new k([e.buffer,a.buffer,t]);n(null,c)}})}c(t,r,function(t,e){return n(new k(e))})},e.decodePayloadAsBinary=function(t,n,r){\"function\"==typeof n&&(r=n,n=null);for(var o=t,i=[];o.byteLength>0;){for(var s=new Uint8Array(o),a=0===s[0],c=\"\",p=1;255!==s[p];p++){if(c.length>310)return r(w,0,1);c+=s[p]}o=f(o,2+c.length),c=parseInt(c);var u=f(o,0,c);if(a)try{u=String.fromCharCode.apply(null,new Uint8Array(u))}catch(h){var l=new Uint8Array(u);u=\"\";for(var p=0;p<l.length;p++)u+=String.fromCharCode(l[p])}i.push(u),o=f(o,c)}var d=i.length;i.forEach(function(t,o){r(e.decodePacket(t,n,!0),o,d)})}}).call(e,function(){return this}())},function(t,e){t.exports=Object.keys||function(t){var e=[],n=Object.prototype.hasOwnProperty;for(var r in t)n.call(t,r)&&e.push(r);return e}},function(t,e){t.exports=function(t,e,n){var r=t.byteLength;if(e=e||0,n=n||r,t.slice)return t.slice(e,n);if(e<0&&(e+=r),n<0&&(n+=r),n>r&&(n=r),e>=r||e>=n||0===r)return new ArrayBuffer(0);for(var o=new Uint8Array(t),i=new Uint8Array(n-e),s=e,a=0;s<n;s++,a++)i[a]=o[s];return i.buffer}},function(t,e){function n(t,e,n){function o(t,r){if(o.count<=0)throw new Error(\"after called too many times\");--o.count,t?(i=!0,e(t),e=n):0!==o.count||i||e(null,r)}var i=!1;return n=n||r,o.count=t,0===t?e():o}function r(){}t.exports=n},function(t,e,n){var r;(function(t,o){!function(i){function s(t){for(var e,n,r=[],o=0,i=t.length;o<i;)e=t.charCodeAt(o++),e>=55296&&e<=56319&&o<i?(n=t.charCodeAt(o++),56320==(64512&n)?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),o--)):r.push(e);return r}function a(t){for(var e,n=t.length,r=-1,o=\"\";++r<n;)e=t[r],e>65535&&(e-=65536,o+=w(e>>>10&1023|55296),e=56320|1023&e),o+=w(e);return o}function c(t,e){if(t>=55296&&t<=57343){if(e)throw Error(\"Lone surrogate U+\"+t.toString(16).toUpperCase()+\" is not a scalar value\");return!1}return!0}function p(t,e){return w(t>>e&63|128)}function u(t,e){if(0==(4294967168&t))return w(t);var n=\"\";return 0==(4294965248&t)?n=w(t>>6&31|192):0==(4294901760&t)?(c(t,e)||(t=65533),n=w(t>>12&15|224),n+=p(t,6)):0==(4292870144&t)&&(n=w(t>>18&7|240),n+=p(t,12),n+=p(t,6)),n+=w(63&t|128)}function h(t,e){e=e||{};for(var n,r=!1!==e.strict,o=s(t),i=o.length,a=-1,c=\"\";++a<i;)n=o[a],c+=u(n,r);return c}function f(){if(b>=v)throw Error(\"Invalid byte index\");var t=255&g[b];if(b++,128==(192&t))return 63&t;throw Error(\"Invalid continuation byte\")}function l(t){var e,n,r,o,i;if(b>v)throw Error(\"Invalid byte index\");if(b==v)return!1;if(e=255&g[b],b++,0==(128&e))return e;if(192==(224&e)){if(n=f(),i=(31&e)<<6|n,i>=128)return i;throw Error(\"Invalid continuation byte\")}if(224==(240&e)){if(n=f(),r=f(),i=(15&e)<<12|n<<6|r,i>=2048)return c(i,t)?i:65533;throw Error(\"Invalid continuation byte\")}if(240==(248&e)&&(n=f(),r=f(),o=f(),i=(7&e)<<18|n<<12|r<<6|o,i>=65536&&i<=1114111))return i;throw Error(\"Invalid UTF-8 detected\")}function d(t,e){e=e||{};var n=!1!==e.strict;g=s(t),v=g.length,b=0;for(var r,o=[];(r=l(n))!==!1;)o.push(r);return a(o)}var y=\"object\"==typeof e&&e,m=(\"object\"==typeof t&&t&&t.exports==y&&t,\"object\"==typeof o&&o);m.global!==m&&m.window!==m||(i=m);var g,v,b,w=String.fromCharCode,k={version:\"2.1.2\",encode:h,decode:d};r=function(){return k}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))}(this)}).call(e,n(28)(t),function(){return this}())},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e){!function(){\"use strict\";for(var t=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\",n=new Uint8Array(256),r=0;r<t.length;r++)n[t.charCodeAt(r)]=r;e.encode=function(e){var n,r=new Uint8Array(e),o=r.length,i=\"\";for(n=0;n<o;n+=3)i+=t[r[n]>>2],i+=t[(3&r[n])<<4|r[n+1]>>4],i+=t[(15&r[n+1])<<2|r[n+2]>>6],i+=t[63&r[n+2]];return o%3===2?i=i.substring(0,i.length-1)+\"=\":o%3===1&&(i=i.substring(0,i.length-2)+\"==\"),i},e.decode=function(t){var e,r,o,i,s,a=.75*t.length,c=t.length,p=0;\"=\"===t[t.length-1]&&(a--,\"=\"===t[t.length-2]&&a--);var u=new ArrayBuffer(a),h=new Uint8Array(u);for(e=0;e<c;e+=4)r=n[t.charCodeAt(e)],o=n[t.charCodeAt(e+1)],i=n[t.charCodeAt(e+2)],s=n[t.charCodeAt(e+3)],h[p++]=r<<2|o>>4,h[p++]=(15&o)<<4|i>>2,h[p++]=(3&i)<<6|63&s;return u}}()},function(t,e){(function(e){function n(t){for(var e=0;e<t.length;e++){var n=t[e];if(n.buffer instanceof ArrayBuffer){var r=n.buffer;if(n.byteLength!==r.byteLength){var o=new Uint8Array(n.byteLength);o.set(new Uint8Array(r,n.byteOffset,n.byteLength)),r=o.buffer}t[e]=r}}}function r(t,e){e=e||{};var r=new i;n(t);for(var o=0;o<t.length;o++)r.append(t[o]);return e.type?r.getBlob(e.type):r.getBlob()}function o(t,e){return n(t),new Blob(t,e||{})}var i=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,s=function(){try{var t=new Blob([\"hi\"]);return 2===t.size}catch(e){return!1}}(),a=s&&function(){try{var t=new Blob([new Uint8Array([1,2])]);return 2===t.size}catch(e){return!1}}(),c=i&&i.prototype.append&&i.prototype.getBlob;t.exports=function(){return s?a?e.Blob:o:c?r:void 0}()}).call(e,function(){return this}())},function(t,e){e.encode=function(t){var e=\"\";for(var n in t)t.hasOwnProperty(n)&&(e.length&&(e+=\"&\"),e+=encodeURIComponent(n)+\"=\"+encodeURIComponent(t[n]));return e},e.decode=function(t){for(var e={},n=t.split(\"&\"),r=0,o=n.length;r<o;r++){var i=n[r].split(\"=\");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}},function(t,e){t.exports=function(t,e){var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e){\"use strict\";function n(t){var e=\"\";do e=s[t%a]+e,t=Math.floor(t/a);while(t>0);return e}function r(t){var e=0;for(u=0;u<t.length;u++)e=e*a+c[t.charAt(u)];return e}function o(){var t=n(+new Date);return t!==i?(p=0,i=t):t+\".\"+n(p++)}for(var i,s=\"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_\".split(\"\"),a=64,c={},p=0,u=0;u<a;u++)c[s[u]]=u;o.encode=n,o.decode=r,t.exports=o},function(t,e,n){(function(e){function r(){}function o(t){i.call(this,t),this.query=this.query||{},a||(e.___eio||(e.___eio=[]),a=e.___eio),this.index=a.length;var n=this;a.push(function(t){n.onData(t)}),this.query.j=this.index,e.document&&e.addEventListener&&e.addEventListener(\"beforeunload\",function(){n.script&&(n.script.onerror=r)},!1)}var i=n(21),s=n(32);t.exports=o;var a,c=/\\n/g,p=/\\\\n/g;s(o,i),o.prototype.supportsBinary=!1,o.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),i.prototype.doClose.call(this)},o.prototype.doPoll=function(){var t=this,e=document.createElement(\"script\");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(e){t.onError(\"jsonp poll error\",e)};var n=document.getElementsByTagName(\"script\")[0];n?n.parentNode.insertBefore(e,n):(document.head||document.body).appendChild(e),this.script=e;var r=\"undefined\"!=typeof navigator&&/gecko/i.test(navigator.userAgent);r&&setTimeout(function(){var t=document.createElement(\"iframe\");document.body.appendChild(t),document.body.removeChild(t)},100)},o.prototype.doWrite=function(t,e){function n(){r(),e()}function r(){if(o.iframe)try{o.form.removeChild(o.iframe)}catch(t){o.onError(\"jsonp polling iframe removal error\",t)}try{var e='<iframe src=\"javascript:0\" name=\"'+o.iframeId+'\">';i=document.createElement(e)}catch(t){i=document.createElement(\"iframe\"),i.name=o.iframeId,i.src=\"javascript:0\"}i.id=o.iframeId,o.form.appendChild(i),o.iframe=i}var o=this;if(!this.form){var i,s=document.createElement(\"form\"),a=document.createElement(\"textarea\"),u=this.iframeId=\"eio_iframe_\"+this.index;s.className=\"socketio\",s.style.position=\"absolute\",s.style.top=\"-1000px\",s.style.left=\"-1000px\",s.target=u,s.method=\"POST\",s.setAttribute(\"accept-charset\",\"utf-8\"),a.name=\"d\",s.appendChild(a),document.body.appendChild(s),this.form=s,this.area=a}this.form.action=this.uri(),r(),t=t.replace(p,\"\\\\\\n\"),this.area.value=t.replace(c,\"\\\\n\");try{this.form.submit()}catch(h){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){\"complete\"===o.iframe.readyState&&n()}:this.iframe.onload=n}}).call(e,function(){return this}())},function(t,e,n){(function(e){function r(t){var e=t&&t.forceBase64;e&&(this.supportsBinary=!1),this.perMessageDeflate=t.perMessageDeflate,this.usingBrowserWebSocket=h&&!t.forceNode,this.protocols=t.protocols,this.usingBrowserWebSocket||(l=o),i.call(this,t)}var o,i=n(22),s=n(23),a=n(31),c=n(32),p=n(33),u=n(3)(\"engine.io-client:websocket\"),h=e.WebSocket||e.MozWebSocket;if(\"undefined\"==typeof window)try{o=n(36)}catch(f){}var l=h;l||\"undefined\"!=typeof window||(l=o),t.exports=r,c(r,i),r.prototype.name=\"websocket\",r.prototype.supportsBinary=!0,r.prototype.doOpen=function(){if(this.check()){var t=this.uri(),e=this.protocols,n={agent:this.agent,perMessageDeflate:this.perMessageDeflate};n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(n.headers=this.extraHeaders),this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket?e?new l(t,e):new l(t):new l(t,e,n)}catch(r){return this.emit(\"error\",r)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType=\"nodebuffer\"):this.ws.binaryType=\"arraybuffer\",this.addEventListeners()}},r.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError(\"websocket error\",e)}},r.prototype.write=function(t){function n(){r.emit(\"flush\"),setTimeout(function(){r.writable=!0,r.emit(\"drain\")},0)}var r=this;this.writable=!1;for(var o=t.length,i=0,a=o;i<a;i++)!function(t){s.encodePacket(t,r.supportsBinary,function(i){if(!r.usingBrowserWebSocket){var s={};if(t.options&&(s.compress=t.options.compress),r.perMessageDeflate){var a=\"string\"==typeof i?e.Buffer.byteLength(i):i.length;a<r.perMessageDeflate.threshold&&(s.compress=!1)}}try{r.usingBrowserWebSocket?r.ws.send(i):r.ws.send(i,s)}catch(c){u(\"websocket closed before onclose event\")}--o||n()})}(t[i])},r.prototype.onClose=function(){i.prototype.onClose.call(this)},r.prototype.doClose=function(){\"undefined\"!=typeof this.ws&&this.ws.close()},r.prototype.uri=function(){var t=this.query||{},e=this.secure?\"wss\":\"ws\",n=\"\";this.port&&(\"wss\"===e&&443!==Number(this.port)||\"ws\"===e&&80!==Number(this.port))&&(n=\":\"+this.port),this.timestampRequests&&(t[this.timestampParam]=p()),this.supportsBinary||(t.b64=1),t=a.encode(t),t.length&&(t=\"?\"+t);var r=this.hostname.indexOf(\":\")!==-1;return e+\"://\"+(r?\"[\"+this.hostname+\"]\":this.hostname)+n+this.path+t},r.prototype.check=function(){return!(!l||\"__initialize\"in l&&this.name===r.prototype.name)}}).call(e,function(){return this}())},function(t,e){},function(t,e){var n=[].indexOf;t.exports=function(t,e){if(n)return t.indexOf(e);for(var r=0;r<t.length;++r)if(t[r]===e)return r;return-1}},function(t,e){(function(e){var n=/^[\\],:{}\\s]*$/,r=/\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g,o=/\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g,i=/(?:^|:|,)(?:\\s*\\[)+/g,s=/^\\s+/,a=/\\s+$/;t.exports=function(t){return\"string\"==typeof t&&t?(t=t.replace(s,\"\").replace(a,\"\"),e.JSON&&JSON.parse?JSON.parse(t):n.test(t.replace(r,\"@\").replace(o,\"]\").replace(i,\"\"))?new Function(\"return \"+t)():void 0):null}}).call(e,function(){return this}())},function(t,e,n){\"use strict\";function r(t,e,n){this.io=t,this.nsp=e,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}var o=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t},i=n(7),s=n(8),a=n(40),c=n(41),p=n(42),u=n(3)(\"socket.io-client:socket\"),h=n(31);t.exports=e=r;var f={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},l=s.prototype.emit;s(r.prototype),r.prototype.subEvents=function(){if(!this.subs){var t=this.io;this.subs=[c(t,\"open\",p(this,\"onopen\")),c(t,\"packet\",p(this,\"onpacket\")),c(t,\"close\",p(this,\"onclose\"))]}},r.prototype.open=r.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),\"open\"===this.io.readyState&&this.onopen(),this.emit(\"connecting\"),this)},r.prototype.send=function(){var t=a(arguments);return t.unshift(\"message\"),this.emit.apply(this,t),this},r.prototype.emit=function(t){if(f.hasOwnProperty(t))return l.apply(this,arguments),this;var e=a(arguments),n={type:i.EVENT,data:e};return n.options={},n.options.compress=!this.flags||!1!==this.flags.compress,\"function\"==typeof e[e.length-1]&&(u(\"emitting packet with ack id %d\",this.ids),this.acks[this.ids]=e.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),delete this.flags,this},r.prototype.packet=function(t){t.nsp=this.nsp,this.io.packet(t)},r.prototype.onopen=function(){if(u(\"transport is open - connecting\"),\"/\"!==this.nsp)if(this.query){var t=\"object\"===o(this.query)?h.encode(this.query):this.query;u(\"sending connect packet with query %s\",t),this.packet({type:i.CONNECT,query:t})}else this.packet({type:i.CONNECT})},r.prototype.onclose=function(t){u(\"close (%s)\",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emit(\"disconnect\",t)},r.prototype.onpacket=function(t){if(t.nsp===this.nsp)switch(t.type){case i.CONNECT:this.onconnect();break;case i.EVENT:this.onevent(t);break;case i.BINARY_EVENT:this.onevent(t);break;case i.ACK:this.onack(t);break;case i.BINARY_ACK:this.onack(t);break;case i.DISCONNECT:this.ondisconnect();break;case i.ERROR:this.emit(\"error\",t.data)}},r.prototype.onevent=function(t){var e=t.data||[];u(\"emitting event %j\",e),null!=t.id&&(u(\"attaching ack callback to event\"),e.push(this.ack(t.id))),this.connected?l.apply(this,e):this.receiveBuffer.push(e)},r.prototype.ack=function(t){var e=this,n=!1;return function(){if(!n){n=!0;var r=a(arguments);u(\"sending ack %j\",r),e.packet({type:i.ACK,id:t,data:r})}}},r.prototype.onack=function(t){var e=this.acks[t.id];\"function\"==typeof e?(u(\"calling ack %s with %j\",t.id,t.data),e.apply(this,t.data),delete this.acks[t.id]):u(\"bad ack %s\",t.id)},r.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit(\"connect\"),this.emitBuffered()},r.prototype.emitBuffered=function(){var t;for(t=0;t<this.receiveBuffer.length;t++)l.apply(this,this.receiveBuffer[t]);for(this.receiveBuffer=[],t=0;t<this.sendBuffer.length;t++)this.packet(this.sendBuffer[t]);this.sendBuffer=[]},r.prototype.ondisconnect=function(){u(\"server disconnect (%s)\",this.nsp),this.destroy(),this.onclose(\"io server disconnect\")},r.prototype.destroy=function(){if(this.subs){for(var t=0;t<this.subs.length;t++)this.subs[t].destroy();this.subs=null}this.io.destroy(this)},r.prototype.close=r.prototype.disconnect=function(){return this.connected&&(u(\"performing disconnect (%s)\",this.nsp),this.packet({type:i.DISCONNECT})),this.destroy(),this.connected&&this.onclose(\"io client disconnect\"),this},r.prototype.compress=function(t){return this.flags=this.flags||{},this.flags.compress=t,this}},function(t,e){function n(t,e){var n=[];e=e||0;for(var r=e||0;r<t.length;r++)n[r-e]=t[r];return n}t.exports=n},function(t,e){\"use strict\";function n(t,e,n){return t.on(e,n),{destroy:function(){t.removeListener(e,n)}}}t.exports=n},function(t,e){var n=[].slice;t.exports=function(t,e){if(\"string\"==typeof e&&(e=t[e]),\"function\"!=typeof e)throw new Error(\"bind() requires a function\");var r=n.call(arguments,2);return function(){return e.apply(t,r.concat(n.call(arguments)))}}},function(t,e){function n(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}t.exports=n,n.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-n:t+n}return 0|Math.min(t,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(t){this.ms=t},n.prototype.setMax=function(t){this.max=t},n.prototype.setJitter=function(t){this.jitter=t}}])});\r\n","const SDPTransform = require('sdp-transform');  // eslint-disable-line\r\nconst CandidateInfo = require('./CandidateInfo');\r\nconst CodecInfo = require('./CodecInfo');\r\nconst DTLSInfo = require('./DTLSInfo');\r\nconst ICEInfo = require('./ICEInfo');\r\nconst MediaInfo = require('./MediaInfo');\r\nconst Setup = require('./Setup');\r\nconst Direction = require('./Direction');\r\nconst DirectionWay = require('./DirectionWay');\r\nconst SourceGroupInfo = require('./SourceGroupInfo');\r\nconst SourceInfo = require('./SourceInfo');\r\nconst StreamInfo = require('./StreamInfo');\r\nconst TrackInfo = require('./TrackInfo');\r\nconst TrackEncodingInfo = require('./TrackEncodingInfo');\r\nconst SimulcastInfo = require('./SimulcastInfo');\r\nconst SimulcastStreamInfo = require('./SimulcastStreamInfo');\r\nconst RIDInfo = require('./RIDInfo');\r\n\r\nclass SDPInfo {\r\n  constructor(version) {\r\n    this.version = version || 1;\r\n    this.name = 'sdp-semantic';\r\n    this.streams = new Map();\r\n    this.medias = [];\r\n    this.candidates = [];\r\n    this.connection = null;\r\n    this.ice = null;\r\n    this.dtls = null;\r\n  }\r\n\r\n  clone() {\r\n    const cloned = new SDPInfo(this.version);\r\n    cloned.name = this.name;\r\n    cloned.setConnection(this.connection);\r\n    this.medias.forEach((media) => {\r\n      cloned.addMedia(media.clone());\r\n    });\r\n    this.streams.forEach((stream) => {\r\n      cloned.addStream(stream.clone());\r\n    });\r\n    this.candidates.forEach((candidate) => {\r\n      cloned.addCandidate(candidate.clone());\r\n    });\r\n    cloned.setICE(this.ice.clone());\r\n    cloned.setDTLS(this.dtls.clone());\r\n    return cloned;\r\n  }\r\n\r\n  plain() {\r\n    const plain = {\r\n      version: this.version,\r\n      name: this.name,\r\n      streams: [],\r\n      medias: [],\r\n      candidates: [],\r\n      connection: this.connection,\r\n    };\r\n    this.medias.forEach((media) => {\r\n      plain.medias.push(media.plain());\r\n    });\r\n    this.streams.forEach((stream) => {\r\n      plain.streams.push(stream.plain());\r\n    });\r\n    this.candidates.forEach((candidate) => {\r\n      plain.candidates.push(candidate.plain());\r\n    });\r\n    plain.ice = this.ice && this.ice.plain();\r\n    plain.dtls = this.dtls && this.dtls.plain();\r\n    return plain;\r\n  }\r\n\r\n  setVersion(version) {\r\n    this.version = version;\r\n  }\r\n\r\n  setOrigin(origin) {\r\n    this.origin = origin;\r\n  }\r\n\r\n  setName(name) {\r\n    this.name = name;\r\n  }\r\n\r\n  getConnection() {\r\n    return this.connection;\r\n  }\r\n\r\n  setConnection(connection) {\r\n    this.connection = connection;\r\n  }\r\n\r\n  setTiming(timing) {\r\n    this.timing = timing;\r\n  }\r\n\r\n  addMedia(media) {\r\n    this.medias.push(media);\r\n  }\r\n\r\n  getMedia(type) {\r\n    let result;\r\n    this.medias.forEach((media) => {\r\n      if (media.getType().toLowerCase() === type.toLowerCase()) {\r\n        result = media;\r\n      }\r\n    });\r\n    return result;\r\n  }\r\n\r\n  getMedias(type) {\r\n    if (!type) {\r\n      return this.medias;\r\n    }\r\n    const medias = [];\r\n    this.medias.forEach((media) => {\r\n      if (media.getType().toLowerCase() === type.toLowerCase()) {\r\n        medias.push(media);\r\n      }\r\n    });\r\n    return medias;\r\n  }\r\n\r\n  getMediaById(msid) {\r\n    let result;\r\n    this.medias.forEach((media) => {\r\n      if (media.getId().toLowerCase() === msid.toLowerCase()) {\r\n        result = media;\r\n      }\r\n    });\r\n    return result;\r\n  }\r\n\r\n  getVersion() {\r\n    return this.version;\r\n  }\r\n\r\n  getDTLS() {\r\n    return this.dtls;\r\n  }\r\n\r\n  setDTLS(dtlsInfo) {\r\n    this.dtls = dtlsInfo;\r\n  }\r\n\r\n  getICE() {\r\n    return this.ice;\r\n  }\r\n\r\n  setICE(iceInfo) {\r\n    this.ice = iceInfo;\r\n  }\r\n\r\n  addCandidate(candidate) {\r\n    this.candidates.push(candidate);\r\n  }\r\n\r\n  addCandidates(candidates) {\r\n    candidates.forEach((candidate) => {\r\n      this.addCandidate(candidate);\r\n    });\r\n  }\r\n\r\n  getCandidates() {\r\n    return this.candidates;\r\n  }\r\n\r\n  getStream(id) {\r\n    return this.streams.get(id);\r\n  }\r\n\r\n  getStreams() {\r\n    return this.streams;\r\n  }\r\n\r\n  getFirstStream() {\r\n    if (this.streams.values().length > 0) {\r\n      return this.streams.values()[0];\r\n    }\r\n    return null;\r\n  }\r\n\r\n  addStream(stream) {\r\n    this.streams.set(stream.getId(), stream);\r\n  }\r\n\r\n  removeStream(stream) {\r\n    this.streams.delete(stream.getId());\r\n  }\r\n\r\n  toJSON() {\r\n    const sdp = {\r\n      version: 0,\r\n      media: [],\r\n    };\r\n\r\n    sdp.version = this.version || 0;\r\n    sdp.origin = this.origin || {\r\n      username: '-',\r\n      sessionId: (new Date()).getTime(),\r\n      sessionVersion: this.version,\r\n      netType: 'IN',\r\n      ipVer: 4,\r\n      address: '127.0.0.1',\r\n    };\r\n\r\n    sdp.name = this.name || 'semantic-sdp';\r\n\r\n    sdp.connection = this.getConnection();\r\n    sdp.timing = this.timing || { start: 0, stop: 0 };\r\n\r\n    let ice = this.getICE();\r\n    if (ice) {\r\n      if (ice.isLite()) {\r\n        sdp.icelite = 'ice-lite';\r\n      }\r\n      sdp.iceOptions = ice.getOpts();\r\n      sdp.iceUfrag = ice.getUfrag();\r\n      sdp.icePwd = ice.getPwd();\r\n    }\r\n\r\n    sdp.msidSemantic = this.msidSemantic || { semantic: 'WMS', token: '*' };\r\n    sdp.groups = [];\r\n\r\n    const bundle = { type: 'BUNDLE', mids: [] };\r\n    let dtls = this.getDTLS();\r\n    if (dtls) {\r\n      sdp.fingerprint = {\r\n        type: dtls.getHash(),\r\n        hash: dtls.getFingerprint(),\r\n      };\r\n\r\n      sdp.setup = Setup.toString(dtls.getSetup());\r\n    }\r\n\r\n    this.medias.forEach((media) => {\r\n      const md = {\r\n        type: media.getType(),\r\n        port: media.getPort(),\r\n        protocol: 'UDP/TLS/RTP/SAVPF',\r\n        fmtp: [],\r\n        rtp: [],\r\n        rtcpFb: [],\r\n        ext: [],\r\n        bandwidth: [],\r\n        candidates: [],\r\n        ssrcGroups: [],\r\n        ssrcs: [],\r\n        rids: [],\r\n      };\r\n\r\n      md.direction = Direction.toString(media.getDirection());\r\n\r\n      md.rtcpMux = 'rtcp-mux';\r\n\r\n      md.connection = media.getConnection();\r\n\r\n      md.xGoogleFlag = media.getXGoogleFlag();\r\n\r\n      md.mid = media.getId();\r\n\r\n      bundle.mids.push(media.getId());\r\n      md.rtcp = media.rtcp;\r\n\r\n      if (media.getBitrate() > 0) {\r\n        md.bandwidth.push({\r\n          type: 'AS',\r\n          limit: media.getBitrate(),\r\n        });\r\n      }\r\n\r\n      const candidates = media.getCandidates();\r\n      candidates.forEach((candidate) => {\r\n        md.candidates.push({\r\n          foundation: candidate.getFoundation(),\r\n          component: candidate.getComponentId(),\r\n          transport: candidate.getTransport(),\r\n          priority: candidate.getPriority(),\r\n          ip: candidate.getAddress(),\r\n          port: candidate.getPort(),\r\n          type: candidate.getType(),\r\n          relAddr: candidate.getRelAddr(),\r\n          relPort: candidate.getRelPort(),\r\n          generation: candidate.getGeneration(),\r\n        });\r\n      });\r\n\r\n      ice = media.getICE();\r\n      if (ice) {\r\n        if (ice.isLite()) {\r\n          md.icelite = 'ice-lite';\r\n        }\r\n        md.iceOptions = ice.getOpts();\r\n        md.iceUfrag = ice.getUfrag();\r\n        md.icePwd = ice.getPwd();\r\n        if (ice.isEndOfCandidates()) {\r\n          md.endOfCandidates = ice.isEndOfCandidates();\r\n        }\r\n      }\r\n\r\n      dtls = media.getDTLS();\r\n      if (dtls) {\r\n        md.fingerprint = {\r\n          type: dtls.getHash(),\r\n          hash: dtls.getFingerprint(),\r\n        };\r\n\r\n        md.setup = Setup.toString(dtls.getSetup());\r\n      }\r\n\r\n      if (media.setup) {\r\n        md.setup = Setup.toString(media.setup);\r\n      }\r\n\r\n      media.getCodecs().forEach((codec) => {\r\n        md.rtp.push({\r\n          payload: codec.getType(),\r\n          codec: codec.getCodec(),\r\n          rate: codec.getRate(),\r\n          encoding: codec.getEncoding(),\r\n        });\r\n\r\n        const params = codec.getParams();\r\n        if (Object.keys(params).length > 0) {\r\n          md.fmtp.push({\r\n            payload: codec.getType(),\r\n            config: Object.keys(params)\r\n                          .map(item => item + (params[item] ? `=${params[item]}` : ''))\r\n                          .join(';'),\r\n          });\r\n        }\r\n\r\n        codec.getFeedback().forEach((rtcpFb) => {\r\n          md.rtcpFb.push({\r\n            payload: codec.getType(),\r\n            type: rtcpFb.type,\r\n            subtype: rtcpFb.subtype,\r\n          });\r\n        });\r\n\r\n        if (codec.hasRTX()) {\r\n          md.rtp.push({\r\n            payload: codec.getRTX(),\r\n            codec: 'rtx',\r\n            rate: codec.getRate(),\r\n            encoding: codec.getEncoding(),\r\n          });\r\n          md.fmtp.push({\r\n            payload: codec.getRTX(),\r\n            config: `apt=${codec.getType()}`,\r\n          });\r\n        }\r\n      });\r\n      const payloads = [];\r\n\r\n      md.rtp.forEach((rtp) => {\r\n        payloads.push(rtp.payload);\r\n      });\r\n\r\n      md.payloads = payloads.join(' ');\r\n\r\n      media.getExtensions().forEach((uri, value) => {\r\n        md.ext.push({\r\n          value,\r\n          uri,\r\n        });\r\n      });\r\n\r\n      media.getRIDs().forEach((ridInfo) => {\r\n        const rid = {\r\n          id: ridInfo.getId(),\r\n          direction: DirectionWay.toString(ridInfo.getDirection()),\r\n          params: '',\r\n        };\r\n        if (ridInfo.getFormats().length) {\r\n          rid.params = `pt=${ridInfo.getFormats().join(',')}`;\r\n        }\r\n        ridInfo.getParams().forEach((param, key) => {\r\n          const prefix = rid.params.length ? ';' : '';\r\n          rid.params += `${prefix}${key}=${param}`;\r\n        });\r\n\r\n        md.rids.push(rid);\r\n      });\r\n\r\n      const simulcast = media.getSimulcast();\r\n      const simulcast03 = media.getSimulcast03();\r\n\r\n      if (simulcast) {\r\n        let index = 1;\r\n        md.simulcast = {};\r\n        const send = simulcast.getSimulcastStreams(DirectionWay.SEND);\r\n        const recv = simulcast.getSimulcastStreams(DirectionWay.RECV);\r\n\r\n        if (send && send.length) {\r\n          let list = '';\r\n          send.forEach((stream) => {\r\n            let alternatives = '';\r\n            stream.forEach((entry) => {\r\n              alternatives +=\r\n                (alternatives.length ? ',' : '') + (entry.isPaused() ? '~' : '') + entry.getId();\r\n            });\r\n            list += (list.length ? ';' : '') + alternatives;\r\n          });\r\n          md.simulcast[`dir${index}`] = 'send';\r\n          md.simulcast[`list${index}`] = list;\r\n          index += 1;\r\n        }\r\n\r\n        if (recv && recv.length) {\r\n          let list = [];\r\n          recv.forEach((stream) => {\r\n            let alternatives = '';\r\n            stream.forEach((entry) => {\r\n              alternatives +=\r\n                (alternatives.length ? ',' : '') + (entry.isPaused() ? '~' : '') + entry.getId();\r\n            });\r\n            list += (list.length ? ';' : '') + alternatives;\r\n          });\r\n          md.simulcast[`dir${index}`] = 'recv';\r\n          md.simulcast[`list${index}`] = list;\r\n          index += 1;\r\n        }\r\n      }\r\n\r\n      if (simulcast03) {\r\n        md.simulcast_03 = {\r\n          value: simulcast03.getSimulcastPlainString(),\r\n        };\r\n      }\r\n\r\n      sdp.media.push(md);\r\n    });\r\n    bundle.mids.sort();\r\n    sdp.media.sort((m1, m2) => {\r\n      if (m1.mid < m2.mid) return -1;\r\n      if (m1.mid > m2.mid) return 1;\r\n      return 0;\r\n    });\r\n\r\n    for (const stream of this.streams.values()) { // eslint-disable-line no-restricted-syntax\r\n      for (const track of stream.getTracks().values()) { // eslint-disable-line no-restricted-syntax\r\n        for (const md of sdp.media) { // eslint-disable-line no-restricted-syntax\r\n          // Check if it is unified or plan B\r\n          if (track.getMediaId()) {\r\n            // Unified, check if it is bounded to an specific line\r\n            if (track.getMediaId() === md.mid) {\r\n              track.getSourceGroups().forEach((group) => {\r\n                md.ssrcGroups.push({\r\n                  semantics: group.getSemantics(),\r\n                  ssrcs: group.getSSRCs().join(' '),\r\n                });\r\n              });\r\n\r\n              track.getSSRCs().forEach((source) => {\r\n                md.ssrcs.push({\r\n                  id: source.ssrc,\r\n                  attribute: 'cname',\r\n                  value: source.getCName(),\r\n                });\r\n              });\r\n              if (stream.getId() && track.getId()) {\r\n                md.msid = `${stream.getId()} ${track.getId()}`;\r\n              }\r\n              break;\r\n            }\r\n          } else if (md.type.toLowerCase() === track.getMedia().toLowerCase()) {\r\n            // Plan B\r\n            track.getSourceGroups().forEach((group) => {\r\n              md.ssrcGroups.push({\r\n                semantics: group.getSemantics(),\r\n                ssrcs: group.getSSRCs().join(' '),\r\n              });\r\n            });\r\n\r\n            track.getSSRCs().forEach((source) => {\r\n              md.ssrcs.push({\r\n                id: source.ssrc,\r\n                attribute: 'cname',\r\n                value: source.getCName(),\r\n              });\r\n              if (source.getStreamId() && source.getTrackId()) {\r\n                md.ssrcs.push({\r\n                  id: source.ssrc,\r\n                  attribute: 'msid',\r\n                  value: `${source.getStreamId()} ${source.getTrackId()}`,\r\n                });\r\n              }\r\n              if (source.getMSLabel()) {\r\n                md.ssrcs.push({\r\n                  id: source.ssrc,\r\n                  attribute: 'mslabel',\r\n                  value: source.getMSLabel(),\r\n                });\r\n              }\r\n              if (source.getLabel()) {\r\n                md.ssrcs.push({\r\n                  id: source.ssrc,\r\n                  attribute: 'label',\r\n                  value: source.getLabel(),\r\n                });\r\n              }\r\n            });\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    bundle.mids = bundle.mids.join(' ');\r\n    sdp.groups.push(bundle);\r\n\r\n    return sdp;\r\n  }\r\n\r\n  toString() {\r\n    const sdp = this.toJSON();\r\n    return SDPTransform.write(sdp);\r\n  }\r\n}\r\n\r\nfunction getFormats(mediaInfo, md) {\r\n  const apts = new Map();\r\n\r\n  md.rtp.forEach((fmt) => {\r\n    const type = fmt.payload;\r\n    const codec = fmt.codec;\r\n    const rate = fmt.rate;\r\n    const encoding = fmt.encoding;\r\n\r\n    const params = {};\r\n    const feedback = [];\r\n\r\n    md.fmtp.forEach((fmtp) => {\r\n      if (fmtp.payload === type) {\r\n        const list = fmtp.config.split(';');\r\n        list.forEach((entry) => {\r\n          const param = entry.split('=');\r\n          params[param[0].trim()] = (param[1] || '').trim();\r\n        });\r\n      }\r\n    });\r\n    if (md.rtcpFb) {\r\n      md.rtcpFb.forEach((rtcpFb) => {\r\n        if (rtcpFb.payload === type) {\r\n          feedback.push({ type: rtcpFb.type, subtype: rtcpFb.subtype });\r\n        }\r\n      });\r\n    }\r\n    if (codec.toUpperCase() === 'RTX') {\r\n      apts.set(parseInt(params.apt, 10), type);\r\n    } else {\r\n      mediaInfo.addCodec(new CodecInfo(codec, type, rate, encoding, params, feedback));\r\n    }\r\n  });\r\n\r\n  apts.forEach((apt, id) => {\r\n    const codecInfo = mediaInfo.getCodecForType(id);\r\n    if (codecInfo) {\r\n      codecInfo.setRTX(apt);\r\n    }\r\n  });\r\n}\r\n\r\nfunction getRIDs(mediaInfo, md) {\r\n  const rids = md.rids;\r\n  if (!rids) {\r\n    return;\r\n  }\r\n  rids.forEach((rid) => {\r\n    const ridInfo = new RIDInfo(rid.id, DirectionWay.byValue(rid.direction));\r\n    let formats = [];\r\n    const params = new Map();\r\n    if (rid.params) {\r\n      const list = SDPTransform.parseParams(rid.params);\r\n      Object.keys(list).forEach((key) => {\r\n        if (key === 'pt') {\r\n          formats = list[key].split(',');\r\n        } else {\r\n          params.set(key, list[key]);\r\n        }\r\n      });\r\n      ridInfo.setFormats(formats);\r\n      ridInfo.setParams(params);\r\n    }\r\n    mediaInfo.addRID(ridInfo);\r\n  });\r\n}\r\n\r\nfunction getSimulcastDir(index, md, simulcast) {\r\n  const simulcastDir = md.simulcast[`dir${index}`];\r\n  const simulcastList = md.simulcast[`list${index}`];\r\n  if (simulcastDir) {\r\n    const direction = DirectionWay.byValue(simulcastDir);\r\n    const list = SDPTransform.parseSimulcastStreamList(simulcastList);\r\n    list.forEach((stream) => {\r\n      const alternatives = [];\r\n      stream.forEach((entry) => {\r\n        alternatives.push(new SimulcastStreamInfo(entry.scid, entry.paused));\r\n      });\r\n      simulcast.addSimulcastAlternativeStreams(direction, alternatives);\r\n    });\r\n  }\r\n}\r\n\r\nfunction getSimulcast3Dir(md, simulcast) {\r\n  simulcast.setSimulcastPlainString(md.simulcast_03.value);\r\n}\r\n\r\nfunction getSimulcast(mediaInfo, md) {\r\n  const encodings = [];\r\n  if (md.simulcast) {\r\n    const simulcast = new SimulcastInfo();\r\n    getSimulcastDir('1', md, simulcast);\r\n    getSimulcastDir('2', md, simulcast);\r\n\r\n    simulcast.getSimulcastStreams(DirectionWay.SEND).forEach((streams) => {\r\n      const alternatives = [];\r\n      streams.forEach((stream) => {\r\n        const encoding = new TrackEncodingInfo(stream.getId(), stream.isPaused());\r\n        const ridInfo = mediaInfo.getRID(encoding.getId());\r\n        if (ridInfo) {\r\n          const formats = ridInfo.getFormats();\r\n          formats.forEach((format) => {\r\n            const codecInfo = mediaInfo.getCodecForType(format);\r\n            if (codecInfo) {\r\n              encoding.addCodec(codecInfo);\r\n            }\r\n          });\r\n          encoding.setParams(ridInfo.getParams());\r\n          alternatives.push(encoding);\r\n        }\r\n      });\r\n      if (alternatives.length) {\r\n        encodings.push(alternatives);\r\n      }\r\n    });\r\n\r\n    mediaInfo.setSimulcast(simulcast);\r\n  }\r\n  if (md.simulcast_03) {\r\n    const simulcast = new SimulcastInfo();\r\n    getSimulcast3Dir(md, simulcast);\r\n    mediaInfo.setSimulcast03(simulcast);\r\n  }\r\n  return encodings;\r\n}\r\n\r\nfunction getTracks(encodings, sdpInfo, md) {\r\n  const sources = new Map();\r\n  const media = md.type;\r\n  if (md.ssrcs) {\r\n    let track;\r\n    let stream;\r\n    let source;\r\n    md.ssrcs.forEach((ssrcAttr) => {\r\n      const ssrc = ssrcAttr.id;\r\n      const key = ssrcAttr.attribute;\r\n      const value = ssrcAttr.value;\r\n      source = sources.get(ssrc);\r\n      if (!source) {\r\n        source = new SourceInfo(ssrc);\r\n        sources.set(source.getSSRC(), source);\r\n      }\r\n      if (key.toLowerCase() === 'cname') {\r\n        source.setCName(value);\r\n      } else if (key.toLowerCase() === 'mslabel') {\r\n        source.setMSLabel(value);\r\n      } else if (key.toLowerCase() === 'label') {\r\n        source.setLabel(value);\r\n      } else if (key.toLowerCase() === 'msid') {\r\n        const ids = value.split(' ');\r\n        const streamId = ids[0];\r\n        const trackId = ids[1];\r\n        source.setStreamId(streamId);\r\n        source.setTrackId(trackId);\r\n        stream = sdpInfo.getStream(streamId);\r\n        if (!stream) {\r\n          stream = new StreamInfo(streamId);\r\n          sdpInfo.addStream(stream);\r\n        }\r\n        track = stream.getTrack(trackId);\r\n        if (!track) {\r\n          track = new TrackInfo(media, trackId);\r\n          track.setEncodings(encodings);\r\n          stream.addTrack(track);\r\n        }\r\n        track.addSSRC(source);\r\n      }\r\n    });\r\n  }\r\n\r\n  if (md.msid) {\r\n    const ids = md.msid.split(' ');\r\n    const streamId = ids[0];\r\n    const trackId = ids[1];\r\n\r\n    let stream = sdpInfo.getStream(streamId);\r\n    if (!stream) {\r\n      stream = new StreamInfo(streamId);\r\n      sdpInfo.addStream(stream);\r\n    }\r\n    let track = stream.getTrack(trackId);\r\n    if (!track) {\r\n      track = new TrackInfo(media, trackId);\r\n      track.setMediaId(md.mid);\r\n      track.setEncodings(encodings);\r\n      stream.addTrack(track);\r\n    }\r\n\r\n    sources.forEach((key, ssrc) => {\r\n      const source = sources.get(ssrc);\r\n      if (!source.getStreamId()) {\r\n        source.setStreamId(streamId);\r\n        source.setTrackId(trackId);\r\n        track.addSSRC(source);\r\n      }\r\n    });\r\n  }\r\n\r\n  if (md.ssrcGroups) {\r\n    md.ssrcGroups.forEach((ssrcGroupAttr) => {\r\n      const ssrcs = ssrcGroupAttr.ssrcs.split(' ');\r\n      const group = new SourceGroupInfo(ssrcGroupAttr.semantics, ssrcs);\r\n      const source = sources.get(parseInt(ssrcs[0], 10));\r\n      sdpInfo\r\n        .getStream(source.getStreamId())\r\n        .getTrack(source.getTrackId())\r\n        .addSourceGroup(group);\r\n    });\r\n  }\r\n}\r\n\r\nSDPInfo.processString = (string) => {\r\n  const sdp = SDPTransform.parse(string);\r\n  return SDPInfo.process(sdp);\r\n};\r\n\r\n\r\nSDPInfo.process = (sdp) => {\r\n  const sdpInfo = new SDPInfo();\r\n\r\n  sdpInfo.setVersion(sdp.version);\r\n  sdpInfo.setTiming(sdp.timing);\r\n  sdpInfo.setConnection(sdp.connection);\r\n  sdpInfo.setOrigin(sdp.origin);\r\n  sdpInfo.msidSemantic = sdp.msidSemantic;\r\n  sdpInfo.name = sdp.name;\r\n\r\n  let ufrag = sdp.iceUfrag;\r\n  let pwd = sdp.icePwd;\r\n  let iceOptions = sdp.iceOptions;\r\n  if (ufrag || pwd || iceOptions) {\r\n    sdpInfo.setICE(new ICEInfo(ufrag, pwd, iceOptions));\r\n  }\r\n\r\n  let fingerprintAttr = sdp.fingerprint;\r\n  if (fingerprintAttr) {\r\n    const remoteHash = fingerprintAttr.type;\r\n    const remoteFingerprint = fingerprintAttr.hash;\r\n    let setup = null;\r\n    if (sdp.setup) {\r\n      setup = Setup.byValue(sdp.setup);\r\n    }\r\n\r\n    sdpInfo.setDTLS(new DTLSInfo(setup, remoteHash, remoteFingerprint));\r\n  }\r\n\r\n  sdp.media.forEach((md) => {\r\n    const media = md.type;\r\n    const mid = md.mid;\r\n    const port = md.port;\r\n    const mediaInfo = new MediaInfo(mid, port, media);\r\n    mediaInfo.setXGoogleFlag(md.xGoogleFlag);\r\n    mediaInfo.rtcp = md.rtcp;\r\n    mediaInfo.setConnection(md.connection);\r\n\r\n    if (md.bandwidth && md.bandwidth.length > 0) {\r\n      md.bandwidth.forEach((bandwidth) => {\r\n        if (bandwidth.type === 'AS') {\r\n          mediaInfo.setBitrate(bandwidth.limit);\r\n        }\r\n      });\r\n    }\r\n\r\n    ufrag = md.iceUfrag;\r\n    pwd = md.icePwd;\r\n    iceOptions = md.iceOptions;\r\n    if (ufrag || pwd || iceOptions) {\r\n      const thisIce = new ICEInfo(ufrag, pwd, iceOptions);\r\n      if (md.endOfCandidates) {\r\n        thisIce.setEndOfCandidates('end-of-candidates');\r\n      }\r\n      mediaInfo.setICE(thisIce);\r\n    }\r\n\r\n    fingerprintAttr = md.fingerprint;\r\n    if (fingerprintAttr) {\r\n      const remoteHash = fingerprintAttr.type;\r\n      const remoteFingerprint = fingerprintAttr.hash;\r\n      let setup = Setup.ACTPASS;\r\n      if (md.setup) {\r\n        setup = Setup.byValue(md.setup);\r\n      }\r\n\r\n      mediaInfo.setDTLS(new DTLSInfo(setup, remoteHash, remoteFingerprint));\r\n    }\r\n\r\n    if (md.setup) {\r\n      mediaInfo.setSetup(Setup.byValue(md.setup));\r\n    }\r\n\r\n    let direction = Direction.SENDRECV;\r\n\r\n    if (md.direction) {\r\n      direction = Direction.byValue(md.direction.toUpperCase());\r\n    }\r\n\r\n    mediaInfo.setDirection(direction);\r\n\r\n    const candidates = md.candidates;\r\n    if (candidates) {\r\n      candidates.forEach((candidate) => {\r\n        mediaInfo.addCandidate(new CandidateInfo(candidate.foundation, candidate.component,\r\n          candidate.transport, candidate.priority, candidate.ip, candidate.port, candidate.type,\r\n          candidate.generation, candidate.relAddr, candidate.relPort));\r\n      });\r\n    }\r\n\r\n    getFormats(mediaInfo, md);\r\n\r\n    const extmaps = md.ext;\r\n    if (extmaps) {\r\n      extmaps.forEach((extmap) => {\r\n        mediaInfo.addExtension(extmap.value, extmap.uri);\r\n      });\r\n    }\r\n\r\n    getRIDs(mediaInfo, md);\r\n\r\n    const encodings = getSimulcast(mediaInfo, md);\r\n\r\n    getTracks(encodings, sdpInfo, md);\r\n\r\n    sdpInfo.addMedia(mediaInfo);\r\n  });\r\n  return sdpInfo;\r\n};\r\n\r\nmodule.exports = SDPInfo;\r\n","var parser = require('./parser');\nvar writer = require('./writer');\n\nexports.write = writer;\nexports.parse = parser.parse;\nexports.parseFmtpConfig = parser.parseFmtpConfig;\nexports.parseParams = parser.parseParams;\nexports.parsePayloads = parser.parsePayloads;\nexports.parseRemoteCandidates = parser.parseRemoteCandidates;\nexports.parseImageAttributes = parser.parseImageAttributes;\nexports.parseSimulcastStreamList = parser.parseSimulcastStreamList;\n","var toIntIfInt = function (v) {\n  return String(Number(v)) === v ? Number(v) : v;\n};\n\nvar attachProperties = function (match, location, names, rawName) {\n  if (rawName && !names) {\n    location[rawName] = toIntIfInt(match[1]);\n  }\n  else {\n    for (var i = 0; i < names.length; i += 1) {\n      if (match[i+1] != null) {\n        location[names[i]] = toIntIfInt(match[i+1]);\n      }\n    }\n  }\n};\n\nvar parseReg = function (obj, location, content) {\n  var needsBlank = obj.name && obj.names;\n  if (obj.push && !location[obj.push]) {\n    location[obj.push] = [];\n  }\n  else if (needsBlank && !location[obj.name]) {\n    location[obj.name] = {};\n  }\n  var keyLocation = obj.push ?\n    {} :  // blank object that will be pushed\n    needsBlank ? location[obj.name] : location; // otherwise, named location or root\n\n  attachProperties(content.match(obj.reg), keyLocation, obj.names, obj.name);\n\n  if (obj.push) {\n    location[obj.push].push(keyLocation);\n  }\n};\n\nvar grammar = require('./grammar');\nvar validLine = RegExp.prototype.test.bind(/^([a-z])=(.*)/);\n\nexports.parse = function (sdp) {\n  var session = {}\n    , media = []\n    , location = session; // points at where properties go under (one of the above)\n\n  // parse lines we understand\n  sdp.split(/(\\r\\n|\\r|\\n)/).filter(validLine).forEach(function (l) {\n    var type = l[0];\n    var content = l.slice(2);\n    if (type === 'm') {\n      media.push({rtp: [], fmtp: []});\n      location = media[media.length-1]; // point at latest media line\n    }\n\n    for (var j = 0; j < (grammar[type] || []).length; j += 1) {\n      var obj = grammar[type][j];\n      if (obj.reg.test(content)) {\n        return parseReg(obj, location, content);\n      }\n    }\n  });\n\n  session.media = media; // link it up\n  return session;\n};\n\nvar paramReducer = function (acc, expr) {\n  var s = expr.split(/=(.+)/, 2);\n  if (s.length === 2) {\n    acc[s[0]] = toIntIfInt(s[1]);\n  } else if (s.length === 1 && expr.length > 1) {\n    acc[s[0]] = undefined;\n  }\n  return acc;\n};\n\nexports.parseParams = function (str) {\n  return str.split(/\\;\\s?/).reduce(paramReducer, {});\n};\n\n// For backward compatibility - alias will be removed in 3.0.0\nexports.parseFmtpConfig = exports.parseParams;\n\nexports.parsePayloads = function (str) {\n  return str.split(' ').map(Number);\n};\n\nexports.parseRemoteCandidates = function (str) {\n  var candidates = [];\n  var parts = str.split(' ').map(toIntIfInt);\n  for (var i = 0; i < parts.length; i += 3) {\n    candidates.push({\n      component: parts[i],\n      ip: parts[i + 1],\n      port: parts[i + 2]\n    });\n  }\n  return candidates;\n};\n\nexports.parseImageAttributes = function (str) {\n  return str.split(' ').map(function (item) {\n    return item.substring(1, item.length-1).split(',').reduce(paramReducer, {});\n  });\n};\n\nexports.parseSimulcastStreamList = function (str) {\n  return str.split(';').map(function (stream) {\n    return stream.split(',').map(function (format) {\n      var scid, paused = false;\n\n      if (format[0] !== '~') {\n        scid = toIntIfInt(format);\n      } else {\n        scid = toIntIfInt(format.substring(1, format.length));\n        paused = true;\n      }\n\n      return {\n        scid: scid,\n        paused: paused\n      };\n    });\n  });\n};\n","var grammar = require('./grammar');\n\n// customized util.format - discards excess arguments and can void middle ones\nvar formatRegExp = /%[sdv%]/g;\nvar format = function (formatStr) {\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  return formatStr.replace(formatRegExp, function (x) {\n    if (i >= len) {\n      return x; // missing argument\n    }\n    var arg = args[i];\n    i += 1;\n    switch (x) {\n    case '%%':\n      return '%';\n    case '%s':\n      return String(arg);\n    case '%d':\n      return Number(arg);\n    case '%v':\n      return '';\n    }\n  });\n  // NB: we discard excess arguments - they are typically undefined from makeLine\n};\n\nvar makeLine = function (type, obj, location) {\n  var str = obj.format instanceof Function ?\n    (obj.format(obj.push ? location : location[obj.name])) :\n    obj.format;\n\n  var args = [type + '=' + str];\n  if (obj.names) {\n    for (var i = 0; i < obj.names.length; i += 1) {\n      var n = obj.names[i];\n      if (obj.name) {\n        args.push(location[obj.name][n]);\n      }\n      else { // for mLine and push attributes\n        args.push(location[obj.names[i]]);\n      }\n    }\n  }\n  else {\n    args.push(location[obj.name]);\n  }\n  return format.apply(null, args);\n};\n\n// RFC specified order\n// TODO: extend this with all the rest\nvar defaultOuterOrder = [\n  'v', 'o', 's', 'i',\n  'u', 'e', 'p', 'c',\n  'b', 't', 'r', 'z', 'a'\n];\nvar defaultInnerOrder = ['i', 'c', 'b', 'a'];\n\n\nmodule.exports = function (session, opts) {\n  opts = opts || {};\n  // ensure certain properties exist\n  if (session.version == null) {\n    session.version = 0; // 'v=0' must be there (only defined version atm)\n  }\n  if (session.name == null) {\n    session.name = ' '; // 's= ' must be there if no meaningful name set\n  }\n  session.media.forEach(function (mLine) {\n    if (mLine.payloads == null) {\n      mLine.payloads = '';\n    }\n  });\n\n  var outerOrder = opts.outerOrder || defaultOuterOrder;\n  var innerOrder = opts.innerOrder || defaultInnerOrder;\n  var sdp = [];\n\n  // loop through outerOrder for matching properties on session\n  outerOrder.forEach(function (type) {\n    grammar[type].forEach(function (obj) {\n      if (obj.name in session && session[obj.name] != null) {\n        sdp.push(makeLine(type, obj, session));\n      }\n      else if (obj.push in session && session[obj.push] != null) {\n        session[obj.push].forEach(function (el) {\n          sdp.push(makeLine(type, obj, el));\n        });\n      }\n    });\n  });\n\n  // then for each media line, follow the innerOrder\n  session.media.forEach(function (mLine) {\n    sdp.push(makeLine('m', grammar.m[0], mLine));\n\n    innerOrder.forEach(function (type) {\n      grammar[type].forEach(function (obj) {\n        if (obj.name in mLine && mLine[obj.name] != null) {\n          sdp.push(makeLine(type, obj, mLine));\n        }\n        else if (obj.push in mLine && mLine[obj.push] != null) {\n          mLine[obj.push].forEach(function (el) {\n            sdp.push(makeLine(type, obj, el));\n          });\n        }\n      });\n    });\n  });\n\n  return sdp.join('\\r\\n') + '\\r\\n';\n};\n","class TrackEncodingInfo {\r\n  constructor(id, paused) {\r\n    this.id = id;\r\n    this.paused = paused;\r\n    this.codecs = new Map();\r\n    this.params = new Map();\r\n  }\r\n\r\n  clone() {\r\n    const cloned = new TrackEncodingInfo(this.id, this.paused);\r\n    this.codecs.forEach((codec) => {\r\n      cloned.addCodec(codec.cloned());\r\n    });\r\n    cloned.setParams(this.params);\r\n    return cloned;\r\n  }\r\n\r\n  plain() {\r\n    const plain = {\r\n      id: this.id,\r\n      paused: this.paused,\r\n      codecs: {},\r\n      params: {},\r\n    };\r\n    this.codecs.keys().forEach((id) => {\r\n      plain.codecs[id] = this.codecs.get(id).plain();\r\n    });\r\n    this.params.keys().forEach((id) => {\r\n      plain.params[id] = this.params.get(id).param;\r\n    });\r\n    return plain;\r\n  }\r\n\r\n  getId() {\r\n    return this.id;\r\n  }\r\n\r\n  getCodecs() {\r\n    return this.codecs;\r\n  }\r\n\r\n  addCodec(codec) {\r\n    this.codecs.set(codec.getType(), codec);\r\n  }\r\n\r\n  getParams() {\r\n    return this.params;\r\n  }\r\n\r\n  setParams(params) {\r\n    this.params = new Map(params);\r\n  }\r\n\r\n  isPaused() {\r\n    return this.paused;\r\n  }\r\n}\r\n\r\nmodule.exports = TrackEncodingInfo;\r\n","class SimulcastStreamInfo {\r\n  constructor(id, paused) {\r\n    this.paused = paused;\r\n    this.id = id;\r\n  }\r\n\r\n  clone() {\r\n    return new SimulcastStreamInfo(this.id, this.paused);\r\n  }\r\n\r\n  plain() {\r\n    return {\r\n      id: this.id,\r\n      paused: this.paused,\r\n    };\r\n  }\r\n\r\n  isPaused() {\r\n    return this.paused;\r\n  }\r\n\r\n  getId() {\r\n    return this.id;\r\n  }\r\n}\r\n\r\nmodule.exports = SimulcastStreamInfo;\r\n","const DirectionWay = require('./DirectionWay');\r\n\r\nclass RIDInfo {\r\n  constructor(id, direction) {\r\n    this.id = id;\r\n    this.direction = direction;\r\n    this.formats = [];\r\n    this.params = new Map();\r\n  }\r\n\r\n  clone() {\r\n    const cloned = new RIDInfo(this.id, this.direction);\r\n    cloned.setFormats(this.formats);\r\n    cloned.setParams(this.params);\r\n    return cloned;\r\n  }\r\n\r\n  plain() {\r\n    const plain = {\r\n      id: this.id,\r\n      direction: DirectionWay.toString(this.direction),\r\n      formats: this.formats,\r\n      params: {},\r\n    };\r\n    this.params.forEach((param, id) => {\r\n      plain.params[id] = param;\r\n    });\r\n    return plain;\r\n  }\r\n\r\n  getId() {\r\n    return this.id;\r\n  }\r\n\r\n  getDirection() {\r\n    return this.direction;\r\n  }\r\n\r\n  setDirection(direction) {\r\n    this.direction = direction;\r\n  }\r\n\r\n  getFormats() {\r\n    return this.formats;\r\n  }\r\n\r\n  setFormats(formats) {\r\n    this.formats = [];\r\n    formats.forEach((format) => {\r\n      this.formats.push(parseInt(format, 10));\r\n    });\r\n  }\r\n\r\n  getParams() {\r\n    return this.params;\r\n  }\r\n\r\n  setParams(params) {\r\n    this.params = new Map(params);\r\n  }\r\n}\r\n\r\nmodule.exports = RIDInfo;\r\n","module.exports = function(originalModule) {\n\tif (!originalModule.webpackPolyfill) {\n\t\tvar module = Object.create(originalModule);\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"exports\", {\n\t\t\tenumerable: true\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","module.exports = global[\"adapter\"] = require(\"-!C:\\\\workspace\\\\www\\\\licode\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js??ref--4!.\\\\adapter.js\");","(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.adapter = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\r\n/*\r\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\r\n *\r\n *  Use of this source code is governed by a BSD-style license\r\n *  that can be found in the LICENSE file in the root of the source\r\n *  tree.\r\n */\r\n /* eslint-env node */\r\n'use strict';\r\n\r\nvar SDPUtils = require('sdp');\r\n\r\nfunction writeMediaSection(transceiver, caps, type, stream, dtlsRole) {\r\n  var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\r\n\r\n  // Map ICE parameters (ufrag, pwd) to SDP.\r\n  sdp += SDPUtils.writeIceParameters(\r\n      transceiver.iceGatherer.getLocalParameters());\r\n\r\n  // Map DTLS parameters to SDP.\r\n  sdp += SDPUtils.writeDtlsParameters(\r\n      transceiver.dtlsTransport.getLocalParameters(),\r\n      type === 'offer' ? 'actpass' : dtlsRole || 'active');\r\n\r\n  sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\r\n\r\n  if (transceiver.direction) {\r\n    sdp += 'a=' + transceiver.direction + '\\r\\n';\r\n  } else if (transceiver.rtpSender && transceiver.rtpReceiver) {\r\n    sdp += 'a=sendrecv\\r\\n';\r\n  } else if (transceiver.rtpSender) {\r\n    sdp += 'a=sendonly\\r\\n';\r\n  } else if (transceiver.rtpReceiver) {\r\n    sdp += 'a=recvonly\\r\\n';\r\n  } else {\r\n    sdp += 'a=inactive\\r\\n';\r\n  }\r\n\r\n  if (transceiver.rtpSender) {\r\n    // spec.\r\n    var msid = 'msid:' + stream.id + ' ' +\r\n        transceiver.rtpSender.track.id + '\\r\\n';\r\n    sdp += 'a=' + msid;\r\n\r\n    // for Chrome.\r\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\r\n        ' ' + msid;\r\n    if (transceiver.sendEncodingParameters[0].rtx) {\r\n      sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\r\n          ' ' + msid;\r\n      sdp += 'a=ssrc-group:FID ' +\r\n          transceiver.sendEncodingParameters[0].ssrc + ' ' +\r\n          transceiver.sendEncodingParameters[0].rtx.ssrc +\r\n          '\\r\\n';\r\n    }\r\n  }\r\n  // FIXME: this should be written by writeRtpDescription.\r\n  sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\r\n      ' cname:' + SDPUtils.localCName + '\\r\\n';\r\n  if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\r\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\r\n        ' cname:' + SDPUtils.localCName + '\\r\\n';\r\n  }\r\n  return sdp;\r\n}\r\n\r\n// Edge does not like\r\n// 1) stun: filtered after 14393 unless ?transport=udp is present\r\n// 2) turn: that does not have all of turn:host:port?transport=udp\r\n// 3) turn: with ipv6 addresses\r\n// 4) turn: occurring muliple times\r\nfunction filterIceServers(iceServers, edgeVersion) {\r\n  var hasTurn = false;\r\n  iceServers = JSON.parse(JSON.stringify(iceServers));\r\n  return iceServers.filter(function(server) {\r\n    if (server && (server.urls || server.url)) {\r\n      var urls = server.urls || server.url;\r\n      if (server.url && !server.urls) {\r\n        console.warn('RTCIceServer.url is deprecated! Use urls instead.');\r\n      }\r\n      var isString = typeof urls === 'string';\r\n      if (isString) {\r\n        urls = [urls];\r\n      }\r\n      urls = urls.filter(function(url) {\r\n        var validTurn = url.indexOf('turn:') === 0 &&\r\n            url.indexOf('transport=udp') !== -1 &&\r\n            url.indexOf('turn:[') === -1 &&\r\n            !hasTurn;\r\n\r\n        if (validTurn) {\r\n          hasTurn = true;\r\n          return true;\r\n        }\r\n        return url.indexOf('stun:') === 0 && edgeVersion >= 14393 &&\r\n            url.indexOf('?transport=udp') === -1;\r\n      });\r\n\r\n      delete server.url;\r\n      server.urls = isString ? urls[0] : urls;\r\n      return !!urls.length;\r\n    }\r\n    return false;\r\n  });\r\n}\r\n\r\n// Determines the intersection of local and remote capabilities.\r\nfunction getCommonCapabilities(localCapabilities, remoteCapabilities) {\r\n  var commonCapabilities = {\r\n    codecs: [],\r\n    headerExtensions: [],\r\n    fecMechanisms: []\r\n  };\r\n\r\n  var findCodecByPayloadType = function(pt, codecs) {\r\n    pt = parseInt(pt, 10);\r\n    for (var i = 0; i < codecs.length; i++) {\r\n      if (codecs[i].payloadType === pt ||\r\n          codecs[i].preferredPayloadType === pt) {\r\n        return codecs[i];\r\n      }\r\n    }\r\n  };\r\n\r\n  var rtxCapabilityMatches = function(lRtx, rRtx, lCodecs, rCodecs) {\r\n    var lCodec = findCodecByPayloadType(lRtx.parameters.apt, lCodecs);\r\n    var rCodec = findCodecByPayloadType(rRtx.parameters.apt, rCodecs);\r\n    return lCodec && rCodec &&\r\n        lCodec.name.toLowerCase() === rCodec.name.toLowerCase();\r\n  };\r\n\r\n  localCapabilities.codecs.forEach(function(lCodec) {\r\n    for (var i = 0; i < remoteCapabilities.codecs.length; i++) {\r\n      var rCodec = remoteCapabilities.codecs[i];\r\n      if (lCodec.name.toLowerCase() === rCodec.name.toLowerCase() &&\r\n          lCodec.clockRate === rCodec.clockRate) {\r\n        if (lCodec.name.toLowerCase() === 'rtx' &&\r\n            lCodec.parameters && rCodec.parameters.apt) {\r\n          // for RTX we need to find the local rtx that has a apt\r\n          // which points to the same local codec as the remote one.\r\n          if (!rtxCapabilityMatches(lCodec, rCodec,\r\n              localCapabilities.codecs, remoteCapabilities.codecs)) {\r\n            continue;\r\n          }\r\n        }\r\n        rCodec = JSON.parse(JSON.stringify(rCodec)); // deepcopy\r\n        // number of channels is the highest common number of channels\r\n        rCodec.numChannels = Math.min(lCodec.numChannels,\r\n            rCodec.numChannels);\r\n        // push rCodec so we reply with offerer payload type\r\n        commonCapabilities.codecs.push(rCodec);\r\n\r\n        // determine common feedback mechanisms\r\n        rCodec.rtcpFeedback = rCodec.rtcpFeedback.filter(function(fb) {\r\n          for (var j = 0; j < lCodec.rtcpFeedback.length; j++) {\r\n            if (lCodec.rtcpFeedback[j].type === fb.type &&\r\n                lCodec.rtcpFeedback[j].parameter === fb.parameter) {\r\n              return true;\r\n            }\r\n          }\r\n          return false;\r\n        });\r\n        // FIXME: also need to determine .parameters\r\n        //  see https://github.com/openpeer/ortc/issues/569\r\n        break;\r\n      }\r\n    }\r\n  });\r\n\r\n  localCapabilities.headerExtensions.forEach(function(lHeaderExtension) {\r\n    for (var i = 0; i < remoteCapabilities.headerExtensions.length;\r\n         i++) {\r\n      var rHeaderExtension = remoteCapabilities.headerExtensions[i];\r\n      if (lHeaderExtension.uri === rHeaderExtension.uri) {\r\n        commonCapabilities.headerExtensions.push(rHeaderExtension);\r\n        break;\r\n      }\r\n    }\r\n  });\r\n\r\n  // FIXME: fecMechanisms\r\n  return commonCapabilities;\r\n}\r\n\r\n// is action=setLocalDescription with type allowed in signalingState\r\nfunction isActionAllowedInSignalingState(action, type, signalingState) {\r\n  return {\r\n    offer: {\r\n      setLocalDescription: ['stable', 'have-local-offer'],\r\n      setRemoteDescription: ['stable', 'have-remote-offer']\r\n    },\r\n    answer: {\r\n      setLocalDescription: ['have-remote-offer', 'have-local-pranswer'],\r\n      setRemoteDescription: ['have-local-offer', 'have-remote-pranswer']\r\n    }\r\n  }[type][action].indexOf(signalingState) !== -1;\r\n}\r\n\r\nfunction maybeAddCandidate(iceTransport, candidate) {\r\n  // Edge's internal representation adds some fields therefore\r\n  // not all field are taken into account.\r\n  var alreadyAdded = iceTransport.getRemoteCandidates()\r\n      .find(function(remoteCandidate) {\r\n        return candidate.foundation === remoteCandidate.foundation &&\r\n            candidate.ip === remoteCandidate.ip &&\r\n            candidate.port === remoteCandidate.port &&\r\n            candidate.priority === remoteCandidate.priority &&\r\n            candidate.protocol === remoteCandidate.protocol &&\r\n            candidate.type === remoteCandidate.type;\r\n      });\r\n  if (!alreadyAdded) {\r\n    iceTransport.addRemoteCandidate(candidate);\r\n  }\r\n  return !alreadyAdded;\r\n}\r\n\r\nmodule.exports = function(window, edgeVersion) {\r\n  var RTCPeerConnection = function(config) {\r\n    var self = this;\r\n\r\n    var _eventTarget = document.createDocumentFragment();\r\n    ['addEventListener', 'removeEventListener', 'dispatchEvent']\r\n        .forEach(function(method) {\r\n          self[method] = _eventTarget[method].bind(_eventTarget);\r\n        });\r\n\r\n    this.onicecandidate = null;\r\n    this.onaddstream = null;\r\n    this.ontrack = null;\r\n    this.onremovestream = null;\r\n    this.onsignalingstatechange = null;\r\n    this.oniceconnectionstatechange = null;\r\n    this.onicegatheringstatechange = null;\r\n    this.onnegotiationneeded = null;\r\n    this.ondatachannel = null;\r\n    this.canTrickleIceCandidates = null;\r\n\r\n    this.needNegotiation = false;\r\n\r\n    this.localStreams = [];\r\n    this.remoteStreams = [];\r\n\r\n    this.localDescription = null;\r\n    this.remoteDescription = null;\r\n\r\n    this.signalingState = 'stable';\r\n    this.iceConnectionState = 'new';\r\n    this.iceGatheringState = 'new';\r\n\r\n    config = JSON.parse(JSON.stringify(config || {}));\r\n\r\n    this.usingBundle = config.bundlePolicy === 'max-bundle';\r\n    if (config.rtcpMuxPolicy === 'negotiate') {\r\n      var e = new Error('rtcpMuxPolicy \\'negotiate\\' is not supported');\r\n      e.name = 'NotSupportedError';\r\n      throw(e);\r\n    } else if (!config.rtcpMuxPolicy) {\r\n      config.rtcpMuxPolicy = 'require';\r\n    }\r\n\r\n    switch (config.iceTransportPolicy) {\r\n      case 'all':\r\n      case 'relay':\r\n        break;\r\n      default:\r\n        config.iceTransportPolicy = 'all';\r\n        break;\r\n    }\r\n\r\n    switch (config.bundlePolicy) {\r\n      case 'balanced':\r\n      case 'max-compat':\r\n      case 'max-bundle':\r\n        break;\r\n      default:\r\n        config.bundlePolicy = 'balanced';\r\n        break;\r\n    }\r\n\r\n    config.iceServers = filterIceServers(config.iceServers || [], edgeVersion);\r\n\r\n    this._iceGatherers = [];\r\n    if (config.iceCandidatePoolSize) {\r\n      for (var i = config.iceCandidatePoolSize; i > 0; i--) {\r\n        this._iceGatherers = new window.RTCIceGatherer({\r\n          iceServers: config.iceServers,\r\n          gatherPolicy: config.iceTransportPolicy\r\n        });\r\n      }\r\n    } else {\r\n      config.iceCandidatePoolSize = 0;\r\n    }\r\n\r\n    this._config = config;\r\n\r\n    // per-track iceGathers, iceTransports, dtlsTransports, rtpSenders, ...\r\n    // everything that is needed to describe a SDP m-line.\r\n    this.transceivers = [];\r\n\r\n    this._sdpSessionId = SDPUtils.generateSessionId();\r\n    this._sdpSessionVersion = 0;\r\n\r\n    this._dtlsRole = undefined; // role for a=setup to use in answers.\r\n  };\r\n\r\n  RTCPeerConnection.prototype._emitGatheringStateChange = function() {\r\n    var event = new Event('icegatheringstatechange');\r\n    this.dispatchEvent(event);\r\n    if (typeof this.onicegatheringstatechange === 'function') {\r\n      this.onicegatheringstatechange(event);\r\n    }\r\n  };\r\n\r\n  RTCPeerConnection.prototype.getConfiguration = function() {\r\n    return this._config;\r\n  };\r\n\r\n  RTCPeerConnection.prototype.getLocalStreams = function() {\r\n    return this.localStreams;\r\n  };\r\n\r\n  RTCPeerConnection.prototype.getRemoteStreams = function() {\r\n    return this.remoteStreams;\r\n  };\r\n\r\n  // internal helper to create a transceiver object.\r\n  // (whih is not yet the same as the WebRTC 1.0 transceiver)\r\n  RTCPeerConnection.prototype._createTransceiver = function(kind) {\r\n    var hasBundleTransport = this.transceivers.length > 0;\r\n    var transceiver = {\r\n      track: null,\r\n      iceGatherer: null,\r\n      iceTransport: null,\r\n      dtlsTransport: null,\r\n      localCapabilities: null,\r\n      remoteCapabilities: null,\r\n      rtpSender: null,\r\n      rtpReceiver: null,\r\n      kind: kind,\r\n      mid: null,\r\n      sendEncodingParameters: null,\r\n      recvEncodingParameters: null,\r\n      stream: null,\r\n      wantReceive: true\r\n    };\r\n    if (this.usingBundle && hasBundleTransport) {\r\n      transceiver.iceTransport = this.transceivers[0].iceTransport;\r\n      transceiver.dtlsTransport = this.transceivers[0].dtlsTransport;\r\n    } else {\r\n      var transports = this._createIceAndDtlsTransports();\r\n      transceiver.iceTransport = transports.iceTransport;\r\n      transceiver.dtlsTransport = transports.dtlsTransport;\r\n    }\r\n    this.transceivers.push(transceiver);\r\n    return transceiver;\r\n  };\r\n\r\n  RTCPeerConnection.prototype.addTrack = function(track, stream) {\r\n    var transceiver;\r\n    for (var i = 0; i < this.transceivers.length; i++) {\r\n      if (!this.transceivers[i].track &&\r\n          this.transceivers[i].kind === track.kind) {\r\n        transceiver = this.transceivers[i];\r\n      }\r\n    }\r\n    if (!transceiver) {\r\n      transceiver = this._createTransceiver(track.kind);\r\n    }\r\n\r\n    this._maybeFireNegotiationNeeded();\r\n\r\n    if (this.localStreams.indexOf(stream) === -1) {\r\n      this.localStreams.push(stream);\r\n    }\r\n\r\n    transceiver.track = track;\r\n    transceiver.stream = stream;\r\n    transceiver.rtpSender = new window.RTCRtpSender(track,\r\n        transceiver.dtlsTransport);\r\n    return transceiver.rtpSender;\r\n  };\r\n\r\n  RTCPeerConnection.prototype.addStream = function(stream) {\r\n    var self = this;\r\n    if (edgeVersion >= 15025) {\r\n      stream.getTracks().forEach(function(track) {\r\n        self.addTrack(track, stream);\r\n      });\r\n    } else {\r\n      // Clone is necessary for local demos mostly, attaching directly\r\n      // to two different senders does not work (build 10547).\r\n      // Fixed in 15025 (or earlier)\r\n      var clonedStream = stream.clone();\r\n      stream.getTracks().forEach(function(track, idx) {\r\n        var clonedTrack = clonedStream.getTracks()[idx];\r\n        track.addEventListener('enabled', function(event) {\r\n          clonedTrack.enabled = event.enabled;\r\n        });\r\n      });\r\n      clonedStream.getTracks().forEach(function(track) {\r\n        self.addTrack(track, clonedStream);\r\n      });\r\n    }\r\n  };\r\n\r\n  RTCPeerConnection.prototype.removeStream = function(stream) {\r\n    var idx = this.localStreams.indexOf(stream);\r\n    if (idx > -1) {\r\n      this.localStreams.splice(idx, 1);\r\n      this._maybeFireNegotiationNeeded();\r\n    }\r\n  };\r\n\r\n  RTCPeerConnection.prototype.getSenders = function() {\r\n    return this.transceivers.filter(function(transceiver) {\r\n      return !!transceiver.rtpSender;\r\n    })\r\n    .map(function(transceiver) {\r\n      return transceiver.rtpSender;\r\n    });\r\n  };\r\n\r\n  RTCPeerConnection.prototype.getReceivers = function() {\r\n    return this.transceivers.filter(function(transceiver) {\r\n      return !!transceiver.rtpReceiver;\r\n    })\r\n    .map(function(transceiver) {\r\n      return transceiver.rtpReceiver;\r\n    });\r\n  };\r\n\r\n\r\n  RTCPeerConnection.prototype._createIceGatherer = function(sdpMLineIndex,\r\n      usingBundle) {\r\n    var self = this;\r\n    if (usingBundle && sdpMLineIndex > 0) {\r\n      return this.transceivers[0].iceGatherer;\r\n    } else if (this._iceGatherers.length) {\r\n      return this._iceGatherers.shift();\r\n    }\r\n    var iceGatherer = new window.RTCIceGatherer({\r\n      iceServers: this._config.iceServers,\r\n      gatherPolicy: this._config.iceTransportPolicy\r\n    });\r\n    Object.defineProperty(iceGatherer, 'state',\r\n        {value: 'new', writable: true}\r\n    );\r\n\r\n    this.transceivers[sdpMLineIndex].candidates = [];\r\n    this.transceivers[sdpMLineIndex].bufferCandidates = function(event) {\r\n      var end = !event.candidate || Object.keys(event.candidate).length === 0;\r\n      // polyfill since RTCIceGatherer.state is not implemented in\r\n      // Edge 10547 yet.\r\n      iceGatherer.state = end ? 'completed' : 'gathering';\r\n      if (self.transceivers[sdpMLineIndex].candidates !== null) {\r\n        self.transceivers[sdpMLineIndex].candidates.push(event.candidate);\r\n      }\r\n    };\r\n    iceGatherer.addEventListener('localcandidate',\r\n      this.transceivers[sdpMLineIndex].bufferCandidates);\r\n    return iceGatherer;\r\n  };\r\n\r\n  // start gathering from an RTCIceGatherer.\r\n  RTCPeerConnection.prototype._gather = function(mid, sdpMLineIndex) {\r\n    var self = this;\r\n    var iceGatherer = this.transceivers[sdpMLineIndex].iceGatherer;\r\n    if (iceGatherer.onlocalcandidate) {\r\n      return;\r\n    }\r\n    var candidates = this.transceivers[sdpMLineIndex].candidates;\r\n    this.transceivers[sdpMLineIndex].candidates = null;\r\n    iceGatherer.removeEventListener('localcandidate',\r\n      this.transceivers[sdpMLineIndex].bufferCandidates);\r\n    iceGatherer.onlocalcandidate = function(evt) {\r\n      if (self.usingBundle && sdpMLineIndex > 0) {\r\n        // if we know that we use bundle we can drop candidates with\r\n        // dpMLineIndex > 0. If we don't do this then our state gets\r\n        // confused since we dispose the extra ice gatherer.\r\n        return;\r\n      }\r\n      var event = new Event('icecandidate');\r\n      event.candidate = {sdpMid: mid, sdpMLineIndex: sdpMLineIndex};\r\n\r\n      var cand = evt.candidate;\r\n      // Edge emits an empty object for RTCIceCandidateComplete\r\n      var end = !cand || Object.keys(cand).length === 0;\r\n      if (end) {\r\n        // polyfill since RTCIceGatherer.state is not implemented in\r\n        // Edge 10547 yet.\r\n        if (iceGatherer.state === 'new' || iceGatherer.state === 'gathering') {\r\n          iceGatherer.state = 'completed';\r\n        }\r\n      } else {\r\n        if (iceGatherer.state === 'new') {\r\n          iceGatherer.state = 'gathering';\r\n        }\r\n        // RTCIceCandidate doesn't have a component, needs to be added\r\n        cand.component = 1;\r\n        event.candidate.candidate = SDPUtils.writeCandidate(cand);\r\n      }\r\n\r\n      // update local description.\r\n      var sections = SDPUtils.splitSections(self.localDescription.sdp);\r\n      if (!end) {\r\n        sections[event.candidate.sdpMLineIndex + 1] +=\r\n            'a=' + event.candidate.candidate + '\\r\\n';\r\n      } else {\r\n        sections[event.candidate.sdpMLineIndex + 1] +=\r\n            'a=end-of-candidates\\r\\n';\r\n      }\r\n      self.localDescription.sdp = sections.join('');\r\n      var complete = self.transceivers.every(function(transceiver) {\r\n        return transceiver.iceGatherer &&\r\n            transceiver.iceGatherer.state === 'completed';\r\n      });\r\n\r\n      if (self.iceGatheringState !== 'gathering') {\r\n        self.iceGatheringState = 'gathering';\r\n        self._emitGatheringStateChange();\r\n      }\r\n\r\n      // Emit candidate. Also emit null candidate when all gatherers are\r\n      // complete.\r\n      if (!end) {\r\n        self.dispatchEvent(event);\r\n        if (typeof self.onicecandidate === 'function') {\r\n          self.onicecandidate(event);\r\n        }\r\n      }\r\n      if (complete) {\r\n        self.dispatchEvent(new Event('icecandidate'));\r\n        if (typeof self.onicecandidate === 'function') {\r\n          self.onicecandidate(new Event('icecandidate'));\r\n        }\r\n        self.iceGatheringState = 'complete';\r\n        self._emitGatheringStateChange();\r\n      }\r\n    };\r\n\r\n    // emit already gathered candidates.\r\n    window.setTimeout(function() {\r\n      candidates.forEach(function(candidate) {\r\n        var e = new Event('RTCIceGatherEvent');\r\n        e.candidate = candidate;\r\n        iceGatherer.onlocalcandidate(e);\r\n      });\r\n    }, 0);\r\n  };\r\n\r\n  // Create ICE transport and DTLS transport.\r\n  RTCPeerConnection.prototype._createIceAndDtlsTransports = function() {\r\n    var self = this;\r\n    var iceTransport = new window.RTCIceTransport(null);\r\n    iceTransport.onicestatechange = function() {\r\n      self._updateConnectionState();\r\n    };\r\n\r\n    var dtlsTransport = new window.RTCDtlsTransport(iceTransport);\r\n    dtlsTransport.ondtlsstatechange = function() {\r\n      self._updateConnectionState();\r\n    };\r\n    dtlsTransport.onerror = function() {\r\n      // onerror does not set state to failed by itself.\r\n      Object.defineProperty(dtlsTransport, 'state',\r\n          {value: 'failed', writable: true});\r\n      self._updateConnectionState();\r\n    };\r\n\r\n    return {\r\n      iceTransport: iceTransport,\r\n      dtlsTransport: dtlsTransport\r\n    };\r\n  };\r\n\r\n  // Destroy ICE gatherer, ICE transport and DTLS transport.\r\n  // Without triggering the callbacks.\r\n  RTCPeerConnection.prototype._disposeIceAndDtlsTransports = function(\r\n      sdpMLineIndex) {\r\n    var iceGatherer = this.transceivers[sdpMLineIndex].iceGatherer;\r\n    if (iceGatherer) {\r\n      delete iceGatherer.onlocalcandidate;\r\n      delete this.transceivers[sdpMLineIndex].iceGatherer;\r\n    }\r\n    var iceTransport = this.transceivers[sdpMLineIndex].iceTransport;\r\n    if (iceTransport) {\r\n      delete iceTransport.onicestatechange;\r\n      delete this.transceivers[sdpMLineIndex].iceTransport;\r\n    }\r\n    var dtlsTransport = this.transceivers[sdpMLineIndex].dtlsTransport;\r\n    if (dtlsTransport) {\r\n      delete dtlsTransport.ondtlsstatechange;\r\n      delete dtlsTransport.onerror;\r\n      delete this.transceivers[sdpMLineIndex].dtlsTransport;\r\n    }\r\n  };\r\n\r\n  // Start the RTP Sender and Receiver for a transceiver.\r\n  RTCPeerConnection.prototype._transceive = function(transceiver,\r\n      send, recv) {\r\n    var params = getCommonCapabilities(transceiver.localCapabilities,\r\n        transceiver.remoteCapabilities);\r\n    if (send && transceiver.rtpSender) {\r\n      params.encodings = transceiver.sendEncodingParameters;\r\n      params.rtcp = {\r\n        cname: SDPUtils.localCName,\r\n        compound: transceiver.rtcpParameters.compound\r\n      };\r\n      if (transceiver.recvEncodingParameters.length) {\r\n        params.rtcp.ssrc = transceiver.recvEncodingParameters[0].ssrc;\r\n      }\r\n      transceiver.rtpSender.send(params);\r\n    }\r\n    if (recv && transceiver.rtpReceiver && params.codecs.length > 0) {\r\n      // remove RTX field in Edge 14942\r\n      if (transceiver.kind === 'video'\r\n          && transceiver.recvEncodingParameters\r\n          && edgeVersion < 15019) {\r\n        transceiver.recvEncodingParameters.forEach(function(p) {\r\n          delete p.rtx;\r\n        });\r\n      }\r\n      params.encodings = transceiver.recvEncodingParameters;\r\n      params.rtcp = {\r\n        cname: transceiver.rtcpParameters.cname,\r\n        compound: transceiver.rtcpParameters.compound\r\n      };\r\n      if (transceiver.sendEncodingParameters.length) {\r\n        params.rtcp.ssrc = transceiver.sendEncodingParameters[0].ssrc;\r\n      }\r\n      transceiver.rtpReceiver.receive(params);\r\n    }\r\n  };\r\n\r\n  RTCPeerConnection.prototype.setLocalDescription = function(description) {\r\n    var self = this;\r\n    var args = arguments;\r\n\r\n    if (!isActionAllowedInSignalingState('setLocalDescription',\r\n        description.type, this.signalingState)) {\r\n      return new Promise(function(resolve, reject) {\r\n        var e = new Error('Can not set local ' + description.type +\r\n            ' in state ' + self.signalingState);\r\n        e.name = 'InvalidStateError';\r\n        if (args.length > 2 && typeof args[2] === 'function') {\r\n          args[2].apply(null, [e]);\r\n        }\r\n        reject(e);\r\n      });\r\n    }\r\n\r\n    var sections;\r\n    var sessionpart;\r\n    if (description.type === 'offer') {\r\n      // VERY limited support for SDP munging. Limited to:\r\n      // * changing the order of codecs\r\n      sections = SDPUtils.splitSections(description.sdp);\r\n      sessionpart = sections.shift();\r\n      sections.forEach(function(mediaSection, sdpMLineIndex) {\r\n        var caps = SDPUtils.parseRtpParameters(mediaSection);\r\n        self.transceivers[sdpMLineIndex].localCapabilities = caps;\r\n      });\r\n\r\n      this.transceivers.forEach(function(transceiver, sdpMLineIndex) {\r\n        self._gather(transceiver.mid, sdpMLineIndex);\r\n      });\r\n    } else if (description.type === 'answer') {\r\n      sections = SDPUtils.splitSections(self.remoteDescription.sdp);\r\n      sessionpart = sections.shift();\r\n      var isIceLite = SDPUtils.matchPrefix(sessionpart,\r\n          'a=ice-lite').length > 0;\r\n      sections.forEach(function(mediaSection, sdpMLineIndex) {\r\n        var transceiver = self.transceivers[sdpMLineIndex];\r\n        var iceGatherer = transceiver.iceGatherer;\r\n        var iceTransport = transceiver.iceTransport;\r\n        var dtlsTransport = transceiver.dtlsTransport;\r\n        var localCapabilities = transceiver.localCapabilities;\r\n        var remoteCapabilities = transceiver.remoteCapabilities;\r\n\r\n        // treat bundle-only as not-rejected.\r\n        var rejected = SDPUtils.isRejected(mediaSection) &&\r\n            !SDPUtils.matchPrefix(mediaSection, 'a=bundle-only').length === 1;\r\n\r\n        if (!rejected && !transceiver.isDatachannel) {\r\n          var remoteIceParameters = SDPUtils.getIceParameters(\r\n              mediaSection, sessionpart);\r\n          var remoteDtlsParameters = SDPUtils.getDtlsParameters(\r\n              mediaSection, sessionpart);\r\n          if (isIceLite) {\r\n            remoteDtlsParameters.role = 'server';\r\n          }\r\n\r\n          if (!self.usingBundle || sdpMLineIndex === 0) {\r\n            self._gather(transceiver.mid, sdpMLineIndex);\r\n            if (iceTransport.state === 'new') {\r\n              iceTransport.start(iceGatherer, remoteIceParameters,\r\n                  isIceLite ? 'controlling' : 'controlled');\r\n            }\r\n            if (dtlsTransport.state === 'new') {\r\n              dtlsTransport.start(remoteDtlsParameters);\r\n            }\r\n          }\r\n\r\n          // Calculate intersection of capabilities.\r\n          var params = getCommonCapabilities(localCapabilities,\r\n              remoteCapabilities);\r\n\r\n          // Start the RTCRtpSender. The RTCRtpReceiver for this\r\n          // transceiver has already been started in setRemoteDescription.\r\n          self._transceive(transceiver,\r\n              params.codecs.length > 0,\r\n              false);\r\n        }\r\n      });\r\n    }\r\n\r\n    this.localDescription = {\r\n      type: description.type,\r\n      sdp: description.sdp\r\n    };\r\n    switch (description.type) {\r\n      case 'offer':\r\n        this._updateSignalingState('have-local-offer');\r\n        break;\r\n      case 'answer':\r\n        this._updateSignalingState('stable');\r\n        break;\r\n      default:\r\n        throw new TypeError('unsupported type \"' + description.type +\r\n            '\"');\r\n    }\r\n\r\n    // If a success callback was provided, emit ICE candidates after it\r\n    // has been executed. Otherwise, emit callback after the Promise is\r\n    // resolved.\r\n    var cb = arguments.length > 1 && typeof arguments[1] === 'function' &&\r\n        arguments[1];\r\n    return new Promise(function(resolve) {\r\n      if (cb) {\r\n        cb.apply(null);\r\n      }\r\n      resolve();\r\n    });\r\n  };\r\n\r\n  RTCPeerConnection.prototype.setRemoteDescription = function(description) {\r\n    var self = this;\r\n    var args = arguments;\r\n\r\n    if (!isActionAllowedInSignalingState('setRemoteDescription',\r\n        description.type, this.signalingState)) {\r\n      return new Promise(function(resolve, reject) {\r\n        var e = new Error('Can not set remote ' + description.type +\r\n            ' in state ' + self.signalingState);\r\n        e.name = 'InvalidStateError';\r\n        if (args.length > 2 && typeof args[2] === 'function') {\r\n          args[2].apply(null, [e]);\r\n        }\r\n        reject(e);\r\n      });\r\n    }\r\n\r\n    var streams = {};\r\n    this.remoteStreams.forEach(function(stream) {\r\n      streams[stream.id] = stream;\r\n    });\r\n    var receiverList = [];\r\n    var sections = SDPUtils.splitSections(description.sdp);\r\n    var sessionpart = sections.shift();\r\n    var isIceLite = SDPUtils.matchPrefix(sessionpart,\r\n        'a=ice-lite').length > 0;\r\n    var usingBundle = SDPUtils.matchPrefix(sessionpart,\r\n        'a=group:BUNDLE ').length > 0;\r\n    this.usingBundle = usingBundle;\r\n    var iceOptions = SDPUtils.matchPrefix(sessionpart,\r\n        'a=ice-options:')[0];\r\n    if (iceOptions) {\r\n      this.canTrickleIceCandidates = iceOptions.substr(14).split(' ')\r\n          .indexOf('trickle') >= 0;\r\n    } else {\r\n      this.canTrickleIceCandidates = false;\r\n    }\r\n\r\n    sections.forEach(function(mediaSection, sdpMLineIndex) {\r\n      var lines = SDPUtils.splitLines(mediaSection);\r\n      var kind = SDPUtils.getKind(mediaSection);\r\n      // treat bundle-only as not-rejected.\r\n      var rejected = SDPUtils.isRejected(mediaSection) &&\r\n          !SDPUtils.matchPrefix(mediaSection, 'a=bundle-only').length === 1;\r\n      var protocol = lines[0].substr(2).split(' ')[2];\r\n\r\n      var direction = SDPUtils.getDirection(mediaSection, sessionpart);\r\n      var remoteMsid = SDPUtils.parseMsid(mediaSection);\r\n\r\n      var mid = SDPUtils.getMid(mediaSection) || SDPUtils.generateIdentifier();\r\n\r\n      // Reject datachannels which are not implemented yet.\r\n      if (kind === 'application' && protocol === 'DTLS/SCTP') {\r\n        self.transceivers[sdpMLineIndex] = {\r\n          mid: mid,\r\n          isDatachannel: true\r\n        };\r\n        return;\r\n      }\r\n\r\n      var transceiver;\r\n      var iceGatherer;\r\n      var iceTransport;\r\n      var dtlsTransport;\r\n      var rtpReceiver;\r\n      var sendEncodingParameters;\r\n      var recvEncodingParameters;\r\n      var localCapabilities;\r\n\r\n      var track;\r\n      // FIXME: ensure the mediaSection has rtcp-mux set.\r\n      var remoteCapabilities = SDPUtils.parseRtpParameters(mediaSection);\r\n      var remoteIceParameters;\r\n      var remoteDtlsParameters;\r\n      if (!rejected) {\r\n        remoteIceParameters = SDPUtils.getIceParameters(mediaSection,\r\n            sessionpart);\r\n        remoteDtlsParameters = SDPUtils.getDtlsParameters(mediaSection,\r\n            sessionpart);\r\n        remoteDtlsParameters.role = 'client';\r\n      }\r\n      recvEncodingParameters =\r\n          SDPUtils.parseRtpEncodingParameters(mediaSection);\r\n\r\n      var rtcpParameters = SDPUtils.parseRtcpParameters(mediaSection);\r\n\r\n      var isComplete = SDPUtils.matchPrefix(mediaSection,\r\n          'a=end-of-candidates', sessionpart).length > 0;\r\n      var cands = SDPUtils.matchPrefix(mediaSection, 'a=candidate:')\r\n          .map(function(cand) {\r\n            return SDPUtils.parseCandidate(cand);\r\n          })\r\n          .filter(function(cand) {\r\n            return cand.component === 1;\r\n          });\r\n\r\n      // Check if we can use BUNDLE and dispose transports.\r\n      if ((description.type === 'offer' || description.type === 'answer') &&\r\n          !rejected && usingBundle && sdpMLineIndex > 0 &&\r\n          self.transceivers[sdpMLineIndex]) {\r\n        self._disposeIceAndDtlsTransports(sdpMLineIndex);\r\n        self.transceivers[sdpMLineIndex].iceGatherer =\r\n            self.transceivers[0].iceGatherer;\r\n        self.transceivers[sdpMLineIndex].iceTransport =\r\n            self.transceivers[0].iceTransport;\r\n        self.transceivers[sdpMLineIndex].dtlsTransport =\r\n            self.transceivers[0].dtlsTransport;\r\n        if (self.transceivers[sdpMLineIndex].rtpSender) {\r\n          self.transceivers[sdpMLineIndex].rtpSender.setTransport(\r\n              self.transceivers[0].dtlsTransport);\r\n        }\r\n        if (self.transceivers[sdpMLineIndex].rtpReceiver) {\r\n          self.transceivers[sdpMLineIndex].rtpReceiver.setTransport(\r\n              self.transceivers[0].dtlsTransport);\r\n        }\r\n      }\r\n      if (description.type === 'offer' && !rejected) {\r\n        transceiver = self.transceivers[sdpMLineIndex] ||\r\n            self._createTransceiver(kind);\r\n        transceiver.mid = mid;\r\n\r\n        if (!transceiver.iceGatherer) {\r\n          transceiver.iceGatherer = self._createIceGatherer(sdpMLineIndex,\r\n              usingBundle);\r\n        }\r\n\r\n        if (cands.length && transceiver.iceTransport.state === 'new') {\r\n          if (isComplete && (!usingBundle || sdpMLineIndex === 0)) {\r\n            transceiver.iceTransport.setRemoteCandidates(cands);\r\n          } else {\r\n            cands.forEach(function(candidate) {\r\n              maybeAddCandidate(transceiver.iceTransport, candidate);\r\n            });\r\n          }\r\n        }\r\n\r\n        localCapabilities = window.RTCRtpReceiver.getCapabilities(kind);\r\n\r\n        // filter RTX until additional stuff needed for RTX is implemented\r\n        // in adapter.js\r\n        if (edgeVersion < 15019) {\r\n          localCapabilities.codecs = localCapabilities.codecs.filter(\r\n              function(codec) {\r\n                return codec.name !== 'rtx';\r\n              });\r\n        }\r\n\r\n        sendEncodingParameters = transceiver.sendEncodingParameters || [{\r\n          ssrc: (2 * sdpMLineIndex + 2) * 1001\r\n        }];\r\n\r\n        var isNewTrack = false;\r\n        if (direction === 'sendrecv' || direction === 'sendonly') {\r\n          isNewTrack = !transceiver.rtpReceiver;\r\n          rtpReceiver = transceiver.rtpReceiver ||\r\n              new window.RTCRtpReceiver(transceiver.dtlsTransport, kind);\r\n\r\n          if (isNewTrack) {\r\n            var stream;\r\n            track = rtpReceiver.track;\r\n            // FIXME: does not work with Plan B.\r\n            if (remoteMsid) {\r\n              if (!streams[remoteMsid.stream]) {\r\n                streams[remoteMsid.stream] = new window.MediaStream();\r\n                Object.defineProperty(streams[remoteMsid.stream], 'id', {\r\n                  get: function() {\r\n                    return remoteMsid.stream;\r\n                  }\r\n                });\r\n              }\r\n              Object.defineProperty(track, 'id', {\r\n                get: function() {\r\n                  return remoteMsid.track;\r\n                }\r\n              });\r\n              stream = streams[remoteMsid.stream];\r\n            } else {\r\n              if (!streams.default) {\r\n                streams.default = new window.MediaStream();\r\n              }\r\n              stream = streams.default;\r\n            }\r\n            stream.addTrack(track);\r\n            receiverList.push([track, rtpReceiver, stream]);\r\n          }\r\n        }\r\n\r\n        transceiver.localCapabilities = localCapabilities;\r\n        transceiver.remoteCapabilities = remoteCapabilities;\r\n        transceiver.rtpReceiver = rtpReceiver;\r\n        transceiver.rtcpParameters = rtcpParameters;\r\n        transceiver.sendEncodingParameters = sendEncodingParameters;\r\n        transceiver.recvEncodingParameters = recvEncodingParameters;\r\n\r\n        // Start the RTCRtpReceiver now. The RTPSender is started in\r\n        // setLocalDescription.\r\n        self._transceive(self.transceivers[sdpMLineIndex],\r\n            false,\r\n            isNewTrack);\r\n      } else if (description.type === 'answer' && !rejected) {\r\n        transceiver = self.transceivers[sdpMLineIndex];\r\n        iceGatherer = transceiver.iceGatherer;\r\n        iceTransport = transceiver.iceTransport;\r\n        dtlsTransport = transceiver.dtlsTransport;\r\n        rtpReceiver = transceiver.rtpReceiver;\r\n        sendEncodingParameters = transceiver.sendEncodingParameters;\r\n        localCapabilities = transceiver.localCapabilities;\r\n\r\n        self.transceivers[sdpMLineIndex].recvEncodingParameters =\r\n            recvEncodingParameters;\r\n        self.transceivers[sdpMLineIndex].remoteCapabilities =\r\n            remoteCapabilities;\r\n        self.transceivers[sdpMLineIndex].rtcpParameters = rtcpParameters;\r\n\r\n        if (cands.length && iceTransport.state === 'new') {\r\n          if ((isIceLite || isComplete) &&\r\n              (!usingBundle || sdpMLineIndex === 0)) {\r\n            iceTransport.setRemoteCandidates(cands);\r\n          } else {\r\n            cands.forEach(function(candidate) {\r\n              maybeAddCandidate(transceiver.iceTransport, candidate);\r\n            });\r\n          }\r\n        }\r\n\r\n        if (!usingBundle || sdpMLineIndex === 0) {\r\n          if (iceTransport.state === 'new') {\r\n            iceTransport.start(iceGatherer, remoteIceParameters,\r\n                'controlling');\r\n          }\r\n          if (dtlsTransport.state === 'new') {\r\n            dtlsTransport.start(remoteDtlsParameters);\r\n          }\r\n        }\r\n\r\n        self._transceive(transceiver,\r\n            direction === 'sendrecv' || direction === 'recvonly',\r\n            direction === 'sendrecv' || direction === 'sendonly');\r\n\r\n        if (rtpReceiver &&\r\n            (direction === 'sendrecv' || direction === 'sendonly')) {\r\n          track = rtpReceiver.track;\r\n          if (remoteMsid) {\r\n            if (!streams[remoteMsid.stream]) {\r\n              streams[remoteMsid.stream] = new window.MediaStream();\r\n            }\r\n            streams[remoteMsid.stream].addTrack(track);\r\n            receiverList.push([track, rtpReceiver, streams[remoteMsid.stream]]);\r\n          } else {\r\n            if (!streams.default) {\r\n              streams.default = new window.MediaStream();\r\n            }\r\n            streams.default.addTrack(track);\r\n            receiverList.push([track, rtpReceiver, streams.default]);\r\n          }\r\n        } else {\r\n          // FIXME: actually the receiver should be created later.\r\n          delete transceiver.rtpReceiver;\r\n        }\r\n      }\r\n    });\r\n\r\n    if (this._dtlsRole === undefined) {\r\n      this._dtlsRole = description.type === 'offer' ? 'active' : 'passive';\r\n    }\r\n\r\n    this.remoteDescription = {\r\n      type: description.type,\r\n      sdp: description.sdp\r\n    };\r\n    switch (description.type) {\r\n      case 'offer':\r\n        this._updateSignalingState('have-remote-offer');\r\n        break;\r\n      case 'answer':\r\n        this._updateSignalingState('stable');\r\n        break;\r\n      default:\r\n        throw new TypeError('unsupported type \"' + description.type +\r\n            '\"');\r\n    }\r\n    Object.keys(streams).forEach(function(sid) {\r\n      var stream = streams[sid];\r\n      if (stream.getTracks().length) {\r\n        if (self.remoteStreams.indexOf(stream) === -1) {\r\n          self.remoteStreams.push(stream);\r\n          var event = new Event('addstream');\r\n          event.stream = stream;\r\n          window.setTimeout(function() {\r\n            self.dispatchEvent(event);\r\n            if (typeof self.onaddstream === 'function') {\r\n              self.onaddstream(event);\r\n            }\r\n          });\r\n        }\r\n\r\n        receiverList.forEach(function(item) {\r\n          var track = item[0];\r\n          var receiver = item[1];\r\n          if (stream.id !== item[2].id) {\r\n            return;\r\n          }\r\n          var trackEvent = new Event('track');\r\n          trackEvent.track = track;\r\n          trackEvent.receiver = receiver;\r\n          trackEvent.transceiver = {receiver: receiver};\r\n          trackEvent.streams = [stream];\r\n          window.setTimeout(function() {\r\n            self.dispatchEvent(trackEvent);\r\n            if (typeof self.ontrack === 'function') {\r\n              self.ontrack(trackEvent);\r\n            }\r\n          });\r\n        });\r\n      }\r\n    });\r\n\r\n    // check whether addIceCandidate({}) was called within four seconds after\r\n    // setRemoteDescription.\r\n    window.setTimeout(function() {\r\n      if (!(self && self.transceivers)) {\r\n        return;\r\n      }\r\n      self.transceivers.forEach(function(transceiver) {\r\n        if (transceiver.iceTransport &&\r\n            transceiver.iceTransport.state === 'new' &&\r\n            transceiver.iceTransport.getRemoteCandidates().length > 0) {\r\n          console.warn('Timeout for addRemoteCandidate. Consider sending ' +\r\n              'an end-of-candidates notification');\r\n          transceiver.iceTransport.addRemoteCandidate({});\r\n        }\r\n      });\r\n    }, 4000);\r\n\r\n    return new Promise(function(resolve) {\r\n      if (args.length > 1 && typeof args[1] === 'function') {\r\n        args[1].apply(null);\r\n      }\r\n      resolve();\r\n    });\r\n  };\r\n\r\n  RTCPeerConnection.prototype.close = function() {\r\n    this.transceivers.forEach(function(transceiver) {\r\n      /* not yet\r\n      if (transceiver.iceGatherer) {\r\n        transceiver.iceGatherer.close();\r\n      }\r\n      */\r\n      if (transceiver.iceTransport) {\r\n        transceiver.iceTransport.stop();\r\n      }\r\n      if (transceiver.dtlsTransport) {\r\n        transceiver.dtlsTransport.stop();\r\n      }\r\n      if (transceiver.rtpSender) {\r\n        transceiver.rtpSender.stop();\r\n      }\r\n      if (transceiver.rtpReceiver) {\r\n        transceiver.rtpReceiver.stop();\r\n      }\r\n    });\r\n    // FIXME: clean up tracks, local streams, remote streams, etc\r\n    this._updateSignalingState('closed');\r\n  };\r\n\r\n  // Update the signaling state.\r\n  RTCPeerConnection.prototype._updateSignalingState = function(newState) {\r\n    this.signalingState = newState;\r\n    var event = new Event('signalingstatechange');\r\n    this.dispatchEvent(event);\r\n    if (typeof this.onsignalingstatechange === 'function') {\r\n      this.onsignalingstatechange(event);\r\n    }\r\n  };\r\n\r\n  // Determine whether to fire the negotiationneeded event.\r\n  RTCPeerConnection.prototype._maybeFireNegotiationNeeded = function() {\r\n    var self = this;\r\n    if (this.signalingState !== 'stable' || this.needNegotiation === true) {\r\n      return;\r\n    }\r\n    this.needNegotiation = true;\r\n    window.setTimeout(function() {\r\n      if (self.needNegotiation === false) {\r\n        return;\r\n      }\r\n      self.needNegotiation = false;\r\n      var event = new Event('negotiationneeded');\r\n      self.dispatchEvent(event);\r\n      if (typeof self.onnegotiationneeded === 'function') {\r\n        self.onnegotiationneeded(event);\r\n      }\r\n    }, 0);\r\n  };\r\n\r\n  // Update the connection state.\r\n  RTCPeerConnection.prototype._updateConnectionState = function() {\r\n    var newState;\r\n    var states = {\r\n      'new': 0,\r\n      closed: 0,\r\n      connecting: 0,\r\n      checking: 0,\r\n      connected: 0,\r\n      completed: 0,\r\n      disconnected: 0,\r\n      failed: 0\r\n    };\r\n    this.transceivers.forEach(function(transceiver) {\r\n      states[transceiver.iceTransport.state]++;\r\n      states[transceiver.dtlsTransport.state]++;\r\n    });\r\n    // ICETransport.completed and connected are the same for this purpose.\r\n    states.connected += states.completed;\r\n\r\n    newState = 'new';\r\n    if (states.failed > 0) {\r\n      newState = 'failed';\r\n    } else if (states.connecting > 0 || states.checking > 0) {\r\n      newState = 'connecting';\r\n    } else if (states.disconnected > 0) {\r\n      newState = 'disconnected';\r\n    } else if (states.new > 0) {\r\n      newState = 'new';\r\n    } else if (states.connected > 0 || states.completed > 0) {\r\n      newState = 'connected';\r\n    }\r\n\r\n    if (newState !== this.iceConnectionState) {\r\n      this.iceConnectionState = newState;\r\n      var event = new Event('iceconnectionstatechange');\r\n      this.dispatchEvent(event);\r\n      if (typeof this.oniceconnectionstatechange === 'function') {\r\n        this.oniceconnectionstatechange(event);\r\n      }\r\n    }\r\n  };\r\n\r\n  RTCPeerConnection.prototype.createOffer = function() {\r\n    var self = this;\r\n    var args = arguments;\r\n\r\n    var offerOptions;\r\n    if (arguments.length === 1 && typeof arguments[0] !== 'function') {\r\n      offerOptions = arguments[0];\r\n    } else if (arguments.length === 3) {\r\n      offerOptions = arguments[2];\r\n    }\r\n\r\n    var numAudioTracks = this.transceivers.filter(function(t) {\r\n      return t.kind === 'audio';\r\n    }).length;\r\n    var numVideoTracks = this.transceivers.filter(function(t) {\r\n      return t.kind === 'video';\r\n    }).length;\r\n\r\n    // Determine number of audio and video tracks we need to send/recv.\r\n    if (offerOptions) {\r\n      // Reject Chrome legacy constraints.\r\n      if (offerOptions.mandatory || offerOptions.optional) {\r\n        throw new TypeError(\r\n            'Legacy mandatory/optional constraints not supported.');\r\n      }\r\n      if (offerOptions.offerToReceiveAudio !== undefined) {\r\n        if (offerOptions.offerToReceiveAudio === true) {\r\n          numAudioTracks = 1;\r\n        } else if (offerOptions.offerToReceiveAudio === false) {\r\n          numAudioTracks = 0;\r\n        } else {\r\n          numAudioTracks = offerOptions.offerToReceiveAudio;\r\n        }\r\n      }\r\n      if (offerOptions.offerToReceiveVideo !== undefined) {\r\n        if (offerOptions.offerToReceiveVideo === true) {\r\n          numVideoTracks = 1;\r\n        } else if (offerOptions.offerToReceiveVideo === false) {\r\n          numVideoTracks = 0;\r\n        } else {\r\n          numVideoTracks = offerOptions.offerToReceiveVideo;\r\n        }\r\n      }\r\n    }\r\n\r\n    this.transceivers.forEach(function(transceiver) {\r\n      if (transceiver.kind === 'audio') {\r\n        numAudioTracks--;\r\n        if (numAudioTracks < 0) {\r\n          transceiver.wantReceive = false;\r\n        }\r\n      } else if (transceiver.kind === 'video') {\r\n        numVideoTracks--;\r\n        if (numVideoTracks < 0) {\r\n          transceiver.wantReceive = false;\r\n        }\r\n      }\r\n    });\r\n\r\n    // Create M-lines for recvonly streams.\r\n    while (numAudioTracks > 0 || numVideoTracks > 0) {\r\n      if (numAudioTracks > 0) {\r\n        this._createTransceiver('audio');\r\n        numAudioTracks--;\r\n      }\r\n      if (numVideoTracks > 0) {\r\n        this._createTransceiver('video');\r\n        numVideoTracks--;\r\n      }\r\n    }\r\n\r\n    var sdp = SDPUtils.writeSessionBoilerplate(this._sdpSessionId,\r\n        this._sdpSessionVersion++);\r\n    this.transceivers.forEach(function(transceiver, sdpMLineIndex) {\r\n      // For each track, create an ice gatherer, ice transport,\r\n      // dtls transport, potentially rtpsender and rtpreceiver.\r\n      var track = transceiver.track;\r\n      var kind = transceiver.kind;\r\n      var mid = SDPUtils.generateIdentifier();\r\n      transceiver.mid = mid;\r\n\r\n      if (!transceiver.iceGatherer) {\r\n        transceiver.iceGatherer = self._createIceGatherer(sdpMLineIndex,\r\n            self.usingBundle);\r\n      }\r\n\r\n      var localCapabilities = window.RTCRtpSender.getCapabilities(kind);\r\n      // filter RTX until additional stuff needed for RTX is implemented\r\n      // in adapter.js\r\n      if (edgeVersion < 15019) {\r\n        localCapabilities.codecs = localCapabilities.codecs.filter(\r\n            function(codec) {\r\n              return codec.name !== 'rtx';\r\n            });\r\n      }\r\n      localCapabilities.codecs.forEach(function(codec) {\r\n        // work around https://bugs.chromium.org/p/webrtc/issues/detail?id=6552\r\n        // by adding level-asymmetry-allowed=1\r\n        if (codec.name === 'H264' &&\r\n            codec.parameters['level-asymmetry-allowed'] === undefined) {\r\n          codec.parameters['level-asymmetry-allowed'] = '1';\r\n        }\r\n      });\r\n\r\n      // generate an ssrc now, to be used later in rtpSender.send\r\n      var sendEncodingParameters = transceiver.sendEncodingParameters || [{\r\n        ssrc: (2 * sdpMLineIndex + 1) * 1001\r\n      }];\r\n      if (track) {\r\n        // add RTX\r\n        if (edgeVersion >= 15019 && kind === 'video' &&\r\n            !sendEncodingParameters[0].rtx) {\r\n          sendEncodingParameters[0].rtx = {\r\n            ssrc: sendEncodingParameters[0].ssrc + 1\r\n          };\r\n        }\r\n      }\r\n\r\n      if (transceiver.wantReceive) {\r\n        transceiver.rtpReceiver = new window.RTCRtpReceiver(\r\n            transceiver.dtlsTransport, kind);\r\n      }\r\n\r\n      transceiver.localCapabilities = localCapabilities;\r\n      transceiver.sendEncodingParameters = sendEncodingParameters;\r\n    });\r\n\r\n    // always offer BUNDLE and dispose on return if not supported.\r\n    if (this._config.bundlePolicy !== 'max-compat') {\r\n      sdp += 'a=group:BUNDLE ' + this.transceivers.map(function(t) {\r\n        return t.mid;\r\n      }).join(' ') + '\\r\\n';\r\n    }\r\n    sdp += 'a=ice-options:trickle\\r\\n';\r\n\r\n    this.transceivers.forEach(function(transceiver, sdpMLineIndex) {\r\n      sdp += writeMediaSection(transceiver, transceiver.localCapabilities,\r\n          'offer', transceiver.stream, self._dtlsRole);\r\n      sdp += 'a=rtcp-rsize\\r\\n';\r\n\r\n      if (transceiver.iceGatherer && self.iceGatheringState !== 'new' &&\r\n          (sdpMLineIndex === 0 || !self.usingBundle)) {\r\n        transceiver.iceGatherer.getLocalCandidates().forEach(function(cand) {\r\n          cand.component = 1;\r\n          sdp += 'a=' + SDPUtils.writeCandidate(cand) + '\\r\\n';\r\n        });\r\n\r\n        if (transceiver.iceGatherer.state === 'completed') {\r\n          sdp += 'a=end-of-candidates\\r\\n';\r\n        }\r\n      }\r\n    });\r\n\r\n    var desc = new window.RTCSessionDescription({\r\n      type: 'offer',\r\n      sdp: sdp\r\n    });\r\n    return new Promise(function(resolve) {\r\n      if (args.length > 0 && typeof args[0] === 'function') {\r\n        args[0].apply(null, [desc]);\r\n        resolve();\r\n        return;\r\n      }\r\n      resolve(desc);\r\n    });\r\n  };\r\n\r\n  RTCPeerConnection.prototype.createAnswer = function() {\r\n    var self = this;\r\n    var args = arguments;\r\n\r\n    var sdp = SDPUtils.writeSessionBoilerplate(this._sdpSessionId,\r\n        this._sdpSessionVersion++);\r\n    if (this.usingBundle) {\r\n      sdp += 'a=group:BUNDLE ' + this.transceivers.map(function(t) {\r\n        return t.mid;\r\n      }).join(' ') + '\\r\\n';\r\n    }\r\n    var mediaSectionsInOffer = SDPUtils.splitSections(\r\n        this.remoteDescription.sdp).length - 1;\r\n    this.transceivers.forEach(function(transceiver, sdpMLineIndex) {\r\n      if (sdpMLineIndex + 1 > mediaSectionsInOffer) {\r\n        return;\r\n      }\r\n      if (transceiver.isDatachannel) {\r\n        sdp += 'm=application 0 DTLS/SCTP 5000\\r\\n' +\r\n            'c=IN IP4 0.0.0.0\\r\\n' +\r\n            'a=mid:' + transceiver.mid + '\\r\\n';\r\n        return;\r\n      }\r\n\r\n      // FIXME: look at direction.\r\n      if (transceiver.stream) {\r\n        var localTrack;\r\n        if (transceiver.kind === 'audio') {\r\n          localTrack = transceiver.stream.getAudioTracks()[0];\r\n        } else if (transceiver.kind === 'video') {\r\n          localTrack = transceiver.stream.getVideoTracks()[0];\r\n        }\r\n        if (localTrack) {\r\n          // add RTX\r\n          if (edgeVersion >= 15019 && transceiver.kind === 'video' &&\r\n              !transceiver.sendEncodingParameters[0].rtx) {\r\n            transceiver.sendEncodingParameters[0].rtx = {\r\n              ssrc: transceiver.sendEncodingParameters[0].ssrc + 1\r\n            };\r\n          }\r\n        }\r\n      }\r\n\r\n      // Calculate intersection of capabilities.\r\n      var commonCapabilities = getCommonCapabilities(\r\n          transceiver.localCapabilities,\r\n          transceiver.remoteCapabilities);\r\n\r\n      var hasRtx = commonCapabilities.codecs.filter(function(c) {\r\n        return c.name.toLowerCase() === 'rtx';\r\n      }).length;\r\n      if (!hasRtx && transceiver.sendEncodingParameters[0].rtx) {\r\n        delete transceiver.sendEncodingParameters[0].rtx;\r\n      }\r\n\r\n      sdp += writeMediaSection(transceiver, commonCapabilities,\r\n          'answer', transceiver.stream, self._dtlsRole);\r\n      if (transceiver.rtcpParameters &&\r\n          transceiver.rtcpParameters.reducedSize) {\r\n        sdp += 'a=rtcp-rsize\\r\\n';\r\n      }\r\n    });\r\n\r\n    var desc = new window.RTCSessionDescription({\r\n      type: 'answer',\r\n      sdp: sdp\r\n    });\r\n    return new Promise(function(resolve) {\r\n      if (args.length > 0 && typeof args[0] === 'function') {\r\n        args[0].apply(null, [desc]);\r\n        resolve();\r\n        return;\r\n      }\r\n      resolve(desc);\r\n    });\r\n  };\r\n\r\n  RTCPeerConnection.prototype.addIceCandidate = function(candidate) {\r\n    var err;\r\n    var sections;\r\n    if (!candidate || candidate.candidate === '') {\r\n      for (var j = 0; j < this.transceivers.length; j++) {\r\n        if (this.transceivers[j].isDatachannel) {\r\n          continue;\r\n        }\r\n        this.transceivers[j].iceTransport.addRemoteCandidate({});\r\n        sections = SDPUtils.splitSections(this.remoteDescription.sdp);\r\n        sections[j + 1] += 'a=end-of-candidates\\r\\n';\r\n        this.remoteDescription.sdp = sections.join('');\r\n        if (this.usingBundle) {\r\n          break;\r\n        }\r\n      }\r\n    } else if (!(candidate.sdpMLineIndex !== undefined || candidate.sdpMid)) {\r\n      throw new TypeError('sdpMLineIndex or sdpMid required');\r\n    } else if (!this.remoteDescription) {\r\n      err = new Error('Can not add ICE candidate without ' +\r\n          'a remote description');\r\n      err.name = 'InvalidStateError';\r\n    } else {\r\n      var sdpMLineIndex = candidate.sdpMLineIndex;\r\n      if (candidate.sdpMid) {\r\n        for (var i = 0; i < this.transceivers.length; i++) {\r\n          if (this.transceivers[i].mid === candidate.sdpMid) {\r\n            sdpMLineIndex = i;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n      var transceiver = this.transceivers[sdpMLineIndex];\r\n      if (transceiver) {\r\n        if (transceiver.isDatachannel) {\r\n          return Promise.resolve();\r\n        }\r\n        var cand = Object.keys(candidate.candidate).length > 0 ?\r\n            SDPUtils.parseCandidate(candidate.candidate) : {};\r\n        // Ignore Chrome's invalid candidates since Edge does not like them.\r\n        if (cand.protocol === 'tcp' && (cand.port === 0 || cand.port === 9)) {\r\n          return Promise.resolve();\r\n        }\r\n        // Ignore RTCP candidates, we assume RTCP-MUX.\r\n        if (cand.component && cand.component !== 1) {\r\n          return Promise.resolve();\r\n        }\r\n        // when using bundle, avoid adding candidates to the wrong\r\n        // ice transport. And avoid adding candidates added in the SDP.\r\n        if (sdpMLineIndex === 0 || (sdpMLineIndex > 0 &&\r\n            transceiver.iceTransport !== this.transceivers[0].iceTransport)) {\r\n          if (!maybeAddCandidate(transceiver.iceTransport, cand)) {\r\n            err = new Error('Can not add ICE candidate');\r\n            err.name = 'OperationError';\r\n          }\r\n        }\r\n\r\n        if (!err) {\r\n          // update the remoteDescription.\r\n          var candidateString = candidate.candidate.trim();\r\n          if (candidateString.indexOf('a=') === 0) {\r\n            candidateString = candidateString.substr(2);\r\n          }\r\n          sections = SDPUtils.splitSections(this.remoteDescription.sdp);\r\n          sections[sdpMLineIndex + 1] += 'a=' +\r\n              (cand.type ? candidateString : 'end-of-candidates')\r\n              + '\\r\\n';\r\n          this.remoteDescription.sdp = sections.join('');\r\n        }\r\n      } else {\r\n        err = new Error('Can not add ICE candidate');\r\n        err.name = 'OperationError';\r\n      }\r\n    }\r\n    var args = arguments;\r\n    return new Promise(function(resolve, reject) {\r\n      if (err) {\r\n        if (args.length > 2 && typeof args[2] === 'function') {\r\n          args[2].apply(null, [err]);\r\n        }\r\n        reject(err);\r\n      } else {\r\n        if (args.length > 1 && typeof args[1] === 'function') {\r\n          args[1].apply(null);\r\n        }\r\n        resolve();\r\n      }\r\n    });\r\n  };\r\n\r\n  RTCPeerConnection.prototype.getStats = function() {\r\n    var promises = [];\r\n    this.transceivers.forEach(function(transceiver) {\r\n      ['rtpSender', 'rtpReceiver', 'iceGatherer', 'iceTransport',\r\n          'dtlsTransport'].forEach(function(method) {\r\n            if (transceiver[method]) {\r\n              promises.push(transceiver[method].getStats());\r\n            }\r\n          });\r\n    });\r\n    var cb = arguments.length > 1 && typeof arguments[1] === 'function' &&\r\n        arguments[1];\r\n    var fixStatsType = function(stat) {\r\n      return {\r\n        inboundrtp: 'inbound-rtp',\r\n        outboundrtp: 'outbound-rtp',\r\n        candidatepair: 'candidate-pair',\r\n        localcandidate: 'local-candidate',\r\n        remotecandidate: 'remote-candidate'\r\n      }[stat.type] || stat.type;\r\n    };\r\n    return new Promise(function(resolve) {\r\n      // shim getStats with maplike support\r\n      var results = new Map();\r\n      Promise.all(promises).then(function(res) {\r\n        res.forEach(function(result) {\r\n          Object.keys(result).forEach(function(id) {\r\n            result[id].type = fixStatsType(result[id]);\r\n            results.set(id, result[id]);\r\n          });\r\n        });\r\n        if (cb) {\r\n          cb.apply(null, results);\r\n        }\r\n        resolve(results);\r\n      });\r\n    });\r\n  };\r\n  return RTCPeerConnection;\r\n};\r\n\r\n},{\"sdp\":2}],2:[function(require,module,exports){\r\n /* eslint-env node */\r\n'use strict';\r\n\r\n// SDP helpers.\r\nvar SDPUtils = {};\r\n\r\n// Generate an alphanumeric identifier for cname or mids.\r\n// TODO: use UUIDs instead? https://gist.github.com/jed/982883\r\nSDPUtils.generateIdentifier = function() {\r\n  return Math.random().toString(36).substr(2, 10);\r\n};\r\n\r\n// The RTCP CNAME used by all peerconnections from the same JS.\r\nSDPUtils.localCName = SDPUtils.generateIdentifier();\r\n\r\n// Splits SDP into lines, dealing with both CRLF and LF.\r\nSDPUtils.splitLines = function(blob) {\r\n  return blob.trim().split('\\n').map(function(line) {\r\n    return line.trim();\r\n  });\r\n};\r\n// Splits SDP into sessionpart and mediasections. Ensures CRLF.\r\nSDPUtils.splitSections = function(blob) {\r\n  var parts = blob.split('\\nm=');\r\n  return parts.map(function(part, index) {\r\n    return (index > 0 ? 'm=' + part : part).trim() + '\\r\\n';\r\n  });\r\n};\r\n\r\n// Returns lines that start with a certain prefix.\r\nSDPUtils.matchPrefix = function(blob, prefix) {\r\n  return SDPUtils.splitLines(blob).filter(function(line) {\r\n    return line.indexOf(prefix) === 0;\r\n  });\r\n};\r\n\r\n// Parses an ICE candidate line. Sample input:\r\n// candidate:702786350 2 udp 41819902 8.8.8.8 60769 typ relay raddr 8.8.8.8\r\n// rport 55996\"\r\nSDPUtils.parseCandidate = function(line) {\r\n  var parts;\r\n  // Parse both variants.\r\n  if (line.indexOf('a=candidate:') === 0) {\r\n    parts = line.substring(12).split(' ');\r\n  } else {\r\n    parts = line.substring(10).split(' ');\r\n  }\r\n\r\n  var candidate = {\r\n    foundation: parts[0],\r\n    component: parseInt(parts[1], 10),\r\n    protocol: parts[2].toLowerCase(),\r\n    priority: parseInt(parts[3], 10),\r\n    ip: parts[4],\r\n    port: parseInt(parts[5], 10),\r\n    // skip parts[6] == 'typ'\r\n    type: parts[7]\r\n  };\r\n\r\n  for (var i = 8; i < parts.length; i += 2) {\r\n    switch (parts[i]) {\r\n      case 'raddr':\r\n        candidate.relatedAddress = parts[i + 1];\r\n        break;\r\n      case 'rport':\r\n        candidate.relatedPort = parseInt(parts[i + 1], 10);\r\n        break;\r\n      case 'tcptype':\r\n        candidate.tcpType = parts[i + 1];\r\n        break;\r\n      case 'ufrag':\r\n        candidate.ufrag = parts[i + 1]; // for backward compability.\r\n        candidate.usernameFragment = parts[i + 1];\r\n        break;\r\n      default: // extension handling, in particular ufrag\r\n        candidate[parts[i]] = parts[i + 1];\r\n        break;\r\n    }\r\n  }\r\n  return candidate;\r\n};\r\n\r\n// Translates a candidate object into SDP candidate attribute.\r\nSDPUtils.writeCandidate = function(candidate) {\r\n  var sdp = [];\r\n  sdp.push(candidate.foundation);\r\n  sdp.push(candidate.component);\r\n  sdp.push(candidate.protocol.toUpperCase());\r\n  sdp.push(candidate.priority);\r\n  sdp.push(candidate.ip);\r\n  sdp.push(candidate.port);\r\n\r\n  var type = candidate.type;\r\n  sdp.push('typ');\r\n  sdp.push(type);\r\n  if (type !== 'host' && candidate.relatedAddress &&\r\n      candidate.relatedPort) {\r\n    sdp.push('raddr');\r\n    sdp.push(candidate.relatedAddress); // was: relAddr\r\n    sdp.push('rport');\r\n    sdp.push(candidate.relatedPort); // was: relPort\r\n  }\r\n  if (candidate.tcpType && candidate.protocol.toLowerCase() === 'tcp') {\r\n    sdp.push('tcptype');\r\n    sdp.push(candidate.tcpType);\r\n  }\r\n  if (candidate.ufrag) {\r\n    sdp.push('ufrag');\r\n    sdp.push(candidate.ufrag);\r\n  }\r\n  return 'candidate:' + sdp.join(' ');\r\n};\r\n\r\n// Parses an ice-options line, returns an array of option tags.\r\n// a=ice-options:foo bar\r\nSDPUtils.parseIceOptions = function(line) {\r\n  return line.substr(14).split(' ');\r\n}\r\n\r\n// Parses an rtpmap line, returns RTCRtpCoddecParameters. Sample input:\r\n// a=rtpmap:111 opus/48000/2\r\nSDPUtils.parseRtpMap = function(line) {\r\n  var parts = line.substr(9).split(' ');\r\n  var parsed = {\r\n    payloadType: parseInt(parts.shift(), 10) // was: id\r\n  };\r\n\r\n  parts = parts[0].split('/');\r\n\r\n  parsed.name = parts[0];\r\n  parsed.clockRate = parseInt(parts[1], 10); // was: clockrate\r\n  // was: channels\r\n  parsed.numChannels = parts.length === 3 ? parseInt(parts[2], 10) : 1;\r\n  return parsed;\r\n};\r\n\r\n// Generate an a=rtpmap line from RTCRtpCodecCapability or\r\n// RTCRtpCodecParameters.\r\nSDPUtils.writeRtpMap = function(codec) {\r\n  var pt = codec.payloadType;\r\n  if (codec.preferredPayloadType !== undefined) {\r\n    pt = codec.preferredPayloadType;\r\n  }\r\n  return 'a=rtpmap:' + pt + ' ' + codec.name + '/' + codec.clockRate +\r\n      (codec.numChannels !== 1 ? '/' + codec.numChannels : '') + '\\r\\n';\r\n};\r\n\r\n// Parses an a=extmap line (headerextension from RFC 5285). Sample input:\r\n// a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\r\n// a=extmap:2/sendonly urn:ietf:params:rtp-hdrext:toffset\r\nSDPUtils.parseExtmap = function(line) {\r\n  var parts = line.substr(9).split(' ');\r\n  return {\r\n    id: parseInt(parts[0], 10),\r\n    direction: parts[0].indexOf('/') > 0 ? parts[0].split('/')[1] : 'sendrecv',\r\n    uri: parts[1]\r\n  };\r\n};\r\n\r\n// Generates a=extmap line from RTCRtpHeaderExtensionParameters or\r\n// RTCRtpHeaderExtension.\r\nSDPUtils.writeExtmap = function(headerExtension) {\r\n  return 'a=extmap:' + (headerExtension.id || headerExtension.preferredId) +\r\n      (headerExtension.direction && headerExtension.direction !== 'sendrecv'\r\n          ? '/' + headerExtension.direction\r\n          : '') +\r\n      ' ' + headerExtension.uri + '\\r\\n';\r\n};\r\n\r\n// Parses an ftmp line, returns dictionary. Sample input:\r\n// a=fmtp:96 vbr=on;cng=on\r\n// Also deals with vbr=on; cng=on\r\nSDPUtils.parseFmtp = function(line) {\r\n  var parsed = {};\r\n  var kv;\r\n  var parts = line.substr(line.indexOf(' ') + 1).split(';');\r\n  for (var j = 0; j < parts.length; j++) {\r\n    kv = parts[j].trim().split('=');\r\n    parsed[kv[0].trim()] = kv[1];\r\n  }\r\n  return parsed;\r\n};\r\n\r\n// Generates an a=ftmp line from RTCRtpCodecCapability or RTCRtpCodecParameters.\r\nSDPUtils.writeFmtp = function(codec) {\r\n  var line = '';\r\n  var pt = codec.payloadType;\r\n  if (codec.preferredPayloadType !== undefined) {\r\n    pt = codec.preferredPayloadType;\r\n  }\r\n  if (codec.parameters && Object.keys(codec.parameters).length) {\r\n    var params = [];\r\n    Object.keys(codec.parameters).forEach(function(param) {\r\n      params.push(param + '=' + codec.parameters[param]);\r\n    });\r\n    line += 'a=fmtp:' + pt + ' ' + params.join(';') + '\\r\\n';\r\n  }\r\n  return line;\r\n};\r\n\r\n// Parses an rtcp-fb line, returns RTCPRtcpFeedback object. Sample input:\r\n// a=rtcp-fb:98 nack rpsi\r\nSDPUtils.parseRtcpFb = function(line) {\r\n  var parts = line.substr(line.indexOf(' ') + 1).split(' ');\r\n  return {\r\n    type: parts.shift(),\r\n    parameter: parts.join(' ')\r\n  };\r\n};\r\n// Generate a=rtcp-fb lines from RTCRtpCodecCapability or RTCRtpCodecParameters.\r\nSDPUtils.writeRtcpFb = function(codec) {\r\n  var lines = '';\r\n  var pt = codec.payloadType;\r\n  if (codec.preferredPayloadType !== undefined) {\r\n    pt = codec.preferredPayloadType;\r\n  }\r\n  if (codec.rtcpFeedback && codec.rtcpFeedback.length) {\r\n    // FIXME: special handling for trr-int?\r\n    codec.rtcpFeedback.forEach(function(fb) {\r\n      lines += 'a=rtcp-fb:' + pt + ' ' + fb.type +\r\n      (fb.parameter && fb.parameter.length ? ' ' + fb.parameter : '') +\r\n          '\\r\\n';\r\n    });\r\n  }\r\n  return lines;\r\n};\r\n\r\n// Parses an RFC 5576 ssrc media attribute. Sample input:\r\n// a=ssrc:3735928559 cname:something\r\nSDPUtils.parseSsrcMedia = function(line) {\r\n  var sp = line.indexOf(' ');\r\n  var parts = {\r\n    ssrc: parseInt(line.substr(7, sp - 7), 10)\r\n  };\r\n  var colon = line.indexOf(':', sp);\r\n  if (colon > -1) {\r\n    parts.attribute = line.substr(sp + 1, colon - sp - 1);\r\n    parts.value = line.substr(colon + 1);\r\n  } else {\r\n    parts.attribute = line.substr(sp + 1);\r\n  }\r\n  return parts;\r\n};\r\n\r\n// Extracts the MID (RFC 5888) from a media section.\r\n// returns the MID or undefined if no mid line was found.\r\nSDPUtils.getMid = function(mediaSection) {\r\n  var mid = SDPUtils.matchPrefix(mediaSection, 'a=mid:')[0];\r\n  if (mid) {\r\n    return mid.substr(6);\r\n  }\r\n}\r\n\r\nSDPUtils.parseFingerprint = function(line) {\r\n  var parts = line.substr(14).split(' ');\r\n  return {\r\n    algorithm: parts[0].toLowerCase(), // algorithm is case-sensitive in Edge.\r\n    value: parts[1]\r\n  };\r\n};\r\n\r\n// Extracts DTLS parameters from SDP media section or sessionpart.\r\n// FIXME: for consistency with other functions this should only\r\n//   get the fingerprint line as input. See also getIceParameters.\r\nSDPUtils.getDtlsParameters = function(mediaSection, sessionpart) {\r\n  var lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\r\n      'a=fingerprint:');\r\n  // Note: a=setup line is ignored since we use the 'auto' role.\r\n  // Note2: 'algorithm' is not case sensitive except in Edge.\r\n  return {\r\n    role: 'auto',\r\n    fingerprints: lines.map(SDPUtils.parseFingerprint)\r\n  };\r\n};\r\n\r\n// Serializes DTLS parameters to SDP.\r\nSDPUtils.writeDtlsParameters = function(params, setupType) {\r\n  var sdp = 'a=setup:' + setupType + '\\r\\n';\r\n  params.fingerprints.forEach(function(fp) {\r\n    sdp += 'a=fingerprint:' + fp.algorithm + ' ' + fp.value + '\\r\\n';\r\n  });\r\n  return sdp;\r\n};\r\n// Parses ICE information from SDP media section or sessionpart.\r\n// FIXME: for consistency with other functions this should only\r\n//   get the ice-ufrag and ice-pwd lines as input.\r\nSDPUtils.getIceParameters = function(mediaSection, sessionpart) {\r\n  var lines = SDPUtils.splitLines(mediaSection);\r\n  // Search in session part, too.\r\n  lines = lines.concat(SDPUtils.splitLines(sessionpart));\r\n  var iceParameters = {\r\n    usernameFragment: lines.filter(function(line) {\r\n      return line.indexOf('a=ice-ufrag:') === 0;\r\n    })[0].substr(12),\r\n    password: lines.filter(function(line) {\r\n      return line.indexOf('a=ice-pwd:') === 0;\r\n    })[0].substr(10)\r\n  };\r\n  return iceParameters;\r\n};\r\n\r\n// Serializes ICE parameters to SDP.\r\nSDPUtils.writeIceParameters = function(params) {\r\n  return 'a=ice-ufrag:' + params.usernameFragment + '\\r\\n' +\r\n      'a=ice-pwd:' + params.password + '\\r\\n';\r\n};\r\n\r\n// Parses the SDP media section and returns RTCRtpParameters.\r\nSDPUtils.parseRtpParameters = function(mediaSection) {\r\n  var description = {\r\n    codecs: [],\r\n    headerExtensions: [],\r\n    fecMechanisms: [],\r\n    rtcp: []\r\n  };\r\n  var lines = SDPUtils.splitLines(mediaSection);\r\n  var mline = lines[0].split(' ');\r\n  for (var i = 3; i < mline.length; i++) { // find all codecs from mline[3..]\r\n    var pt = mline[i];\r\n    var rtpmapline = SDPUtils.matchPrefix(\r\n        mediaSection, 'a=rtpmap:' + pt + ' ')[0];\r\n    if (rtpmapline) {\r\n      var codec = SDPUtils.parseRtpMap(rtpmapline);\r\n      var fmtps = SDPUtils.matchPrefix(\r\n          mediaSection, 'a=fmtp:' + pt + ' ');\r\n      // Only the first a=fmtp:<pt> is considered.\r\n      codec.parameters = fmtps.length ? SDPUtils.parseFmtp(fmtps[0]) : {};\r\n      codec.rtcpFeedback = SDPUtils.matchPrefix(\r\n          mediaSection, 'a=rtcp-fb:' + pt + ' ')\r\n        .map(SDPUtils.parseRtcpFb);\r\n      description.codecs.push(codec);\r\n      // parse FEC mechanisms from rtpmap lines.\r\n      switch (codec.name.toUpperCase()) {\r\n        case 'RED':\r\n        case 'ULPFEC':\r\n          description.fecMechanisms.push(codec.name.toUpperCase());\r\n          break;\r\n        default: // only RED and ULPFEC are recognized as FEC mechanisms.\r\n          break;\r\n      }\r\n    }\r\n  }\r\n  SDPUtils.matchPrefix(mediaSection, 'a=extmap:').forEach(function(line) {\r\n    description.headerExtensions.push(SDPUtils.parseExtmap(line));\r\n  });\r\n  // FIXME: parse rtcp.\r\n  return description;\r\n};\r\n\r\n// Generates parts of the SDP media section describing the capabilities /\r\n// parameters.\r\nSDPUtils.writeRtpDescription = function(kind, caps) {\r\n  var sdp = '';\r\n\r\n  // Build the mline.\r\n  sdp += 'm=' + kind + ' ';\r\n  sdp += caps.codecs.length > 0 ? '9' : '0'; // reject if no codecs.\r\n  sdp += ' UDP/TLS/RTP/SAVPF ';\r\n  sdp += caps.codecs.map(function(codec) {\r\n    if (codec.preferredPayloadType !== undefined) {\r\n      return codec.preferredPayloadType;\r\n    }\r\n    return codec.payloadType;\r\n  }).join(' ') + '\\r\\n';\r\n\r\n  sdp += 'c=IN IP4 0.0.0.0\\r\\n';\r\n  sdp += 'a=rtcp:9 IN IP4 0.0.0.0\\r\\n';\r\n\r\n  // Add a=rtpmap lines for each codec. Also fmtp and rtcp-fb.\r\n  caps.codecs.forEach(function(codec) {\r\n    sdp += SDPUtils.writeRtpMap(codec);\r\n    sdp += SDPUtils.writeFmtp(codec);\r\n    sdp += SDPUtils.writeRtcpFb(codec);\r\n  });\r\n  var maxptime = 0;\r\n  caps.codecs.forEach(function(codec) {\r\n    if (codec.maxptime > maxptime) {\r\n      maxptime = codec.maxptime;\r\n    }\r\n  });\r\n  if (maxptime > 0) {\r\n    sdp += 'a=maxptime:' + maxptime + '\\r\\n';\r\n  }\r\n  sdp += 'a=rtcp-mux\\r\\n';\r\n\r\n  caps.headerExtensions.forEach(function(extension) {\r\n    sdp += SDPUtils.writeExtmap(extension);\r\n  });\r\n  // FIXME: write fecMechanisms.\r\n  return sdp;\r\n};\r\n\r\n// Parses the SDP media section and returns an array of\r\n// RTCRtpEncodingParameters.\r\nSDPUtils.parseRtpEncodingParameters = function(mediaSection) {\r\n  var encodingParameters = [];\r\n  var description = SDPUtils.parseRtpParameters(mediaSection);\r\n  var hasRed = description.fecMechanisms.indexOf('RED') !== -1;\r\n  var hasUlpfec = description.fecMechanisms.indexOf('ULPFEC') !== -1;\r\n\r\n  // filter a=ssrc:... cname:, ignore PlanB-msid\r\n  var ssrcs = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\r\n  .map(function(line) {\r\n    return SDPUtils.parseSsrcMedia(line);\r\n  })\r\n  .filter(function(parts) {\r\n    return parts.attribute === 'cname';\r\n  });\r\n  var primarySsrc = ssrcs.length > 0 && ssrcs[0].ssrc;\r\n  var secondarySsrc;\r\n\r\n  var flows = SDPUtils.matchPrefix(mediaSection, 'a=ssrc-group:FID')\r\n  .map(function(line) {\r\n    var parts = line.split(' ');\r\n    parts.shift();\r\n    return parts.map(function(part) {\r\n      return parseInt(part, 10);\r\n    });\r\n  });\r\n  if (flows.length > 0 && flows[0].length > 1 && flows[0][0] === primarySsrc) {\r\n    secondarySsrc = flows[0][1];\r\n  }\r\n\r\n  description.codecs.forEach(function(codec) {\r\n    if (codec.name.toUpperCase() === 'RTX' && codec.parameters.apt) {\r\n      var encParam = {\r\n        ssrc: primarySsrc,\r\n        codecPayloadType: parseInt(codec.parameters.apt, 10),\r\n        rtx: {\r\n          ssrc: secondarySsrc\r\n        }\r\n      };\r\n      encodingParameters.push(encParam);\r\n      if (hasRed) {\r\n        encParam = JSON.parse(JSON.stringify(encParam));\r\n        encParam.fec = {\r\n          ssrc: secondarySsrc,\r\n          mechanism: hasUlpfec ? 'red+ulpfec' : 'red'\r\n        };\r\n        encodingParameters.push(encParam);\r\n      }\r\n    }\r\n  });\r\n  if (encodingParameters.length === 0 && primarySsrc) {\r\n    encodingParameters.push({\r\n      ssrc: primarySsrc\r\n    });\r\n  }\r\n\r\n  // we support both b=AS and b=TIAS but interpret AS as TIAS.\r\n  var bandwidth = SDPUtils.matchPrefix(mediaSection, 'b=');\r\n  if (bandwidth.length) {\r\n    if (bandwidth[0].indexOf('b=TIAS:') === 0) {\r\n      bandwidth = parseInt(bandwidth[0].substr(7), 10);\r\n    } else if (bandwidth[0].indexOf('b=AS:') === 0) {\r\n      // use formula from JSEP to convert b=AS to TIAS value.\r\n      bandwidth = parseInt(bandwidth[0].substr(5), 10) * 1000 * 0.95\r\n          - (50 * 40 * 8);\r\n    } else {\r\n      bandwidth = undefined;\r\n    }\r\n    encodingParameters.forEach(function(params) {\r\n      params.maxBitrate = bandwidth;\r\n    });\r\n  }\r\n  return encodingParameters;\r\n};\r\n\r\n// parses http://draft.ortc.org/#rtcrtcpparameters*\r\nSDPUtils.parseRtcpParameters = function(mediaSection) {\r\n  var rtcpParameters = {};\r\n\r\n  var cname;\r\n  // Gets the first SSRC. Note that with RTX there might be multiple\r\n  // SSRCs.\r\n  var remoteSsrc = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\r\n      .map(function(line) {\r\n        return SDPUtils.parseSsrcMedia(line);\r\n      })\r\n      .filter(function(obj) {\r\n        return obj.attribute === 'cname';\r\n      })[0];\r\n  if (remoteSsrc) {\r\n    rtcpParameters.cname = remoteSsrc.value;\r\n    rtcpParameters.ssrc = remoteSsrc.ssrc;\r\n  }\r\n\r\n  // Edge uses the compound attribute instead of reducedSize\r\n  // compound is !reducedSize\r\n  var rsize = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-rsize');\r\n  rtcpParameters.reducedSize = rsize.length > 0;\r\n  rtcpParameters.compound = rsize.length === 0;\r\n\r\n  // parses the rtcp-mux attrbute.\r\n  // Note that Edge does not support unmuxed RTCP.\r\n  var mux = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-mux');\r\n  rtcpParameters.mux = mux.length > 0;\r\n\r\n  return rtcpParameters;\r\n};\r\n\r\n// parses either a=msid: or a=ssrc:... msid lines and returns\r\n// the id of the MediaStream and MediaStreamTrack.\r\nSDPUtils.parseMsid = function(mediaSection) {\r\n  var parts;\r\n  var spec = SDPUtils.matchPrefix(mediaSection, 'a=msid:');\r\n  if (spec.length === 1) {\r\n    parts = spec[0].substr(7).split(' ');\r\n    return {stream: parts[0], track: parts[1]};\r\n  }\r\n  var planB = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\r\n  .map(function(line) {\r\n    return SDPUtils.parseSsrcMedia(line);\r\n  })\r\n  .filter(function(parts) {\r\n    return parts.attribute === 'msid';\r\n  });\r\n  if (planB.length > 0) {\r\n    parts = planB[0].value.split(' ');\r\n    return {stream: parts[0], track: parts[1]};\r\n  }\r\n};\r\n\r\n// Generate a session ID for SDP.\r\n// https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-20#section-5.2.1\r\n// recommends using a cryptographically random +ve 64-bit value\r\n// but right now this should be acceptable and within the right range\r\nSDPUtils.generateSessionId = function() {\r\n  return Math.random().toString().substr(2, 21);\r\n};\r\n\r\n// Write boilder plate for start of SDP\r\n// sessId argument is optional - if not supplied it will\r\n// be generated randomly\r\n// sessVersion is optional and defaults to 2\r\nSDPUtils.writeSessionBoilerplate = function(sessId, sessVer) {\r\n  var sessionId;\r\n  var version = sessVer !== undefined ? sessVer : 2;\r\n  if (sessId) {\r\n    sessionId = sessId;\r\n  } else {\r\n    sessionId = SDPUtils.generateSessionId();\r\n  }\r\n  // FIXME: sess-id should be an NTP timestamp.\r\n  return 'v=0\\r\\n' +\r\n      'o=thisisadapterortc ' + sessionId + ' ' + version + ' IN IP4 127.0.0.1\\r\\n' +\r\n      's=-\\r\\n' +\r\n      't=0 0\\r\\n';\r\n};\r\n\r\nSDPUtils.writeMediaSection = function(transceiver, caps, type, stream) {\r\n  var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\r\n\r\n  // Map ICE parameters (ufrag, pwd) to SDP.\r\n  sdp += SDPUtils.writeIceParameters(\r\n      transceiver.iceGatherer.getLocalParameters());\r\n\r\n  // Map DTLS parameters to SDP.\r\n  sdp += SDPUtils.writeDtlsParameters(\r\n      transceiver.dtlsTransport.getLocalParameters(),\r\n      type === 'offer' ? 'actpass' : 'active');\r\n\r\n  sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\r\n\r\n  if (transceiver.direction) {\r\n    sdp += 'a=' + transceiver.direction + '\\r\\n';\r\n  } else if (transceiver.rtpSender && transceiver.rtpReceiver) {\r\n    sdp += 'a=sendrecv\\r\\n';\r\n  } else if (transceiver.rtpSender) {\r\n    sdp += 'a=sendonly\\r\\n';\r\n  } else if (transceiver.rtpReceiver) {\r\n    sdp += 'a=recvonly\\r\\n';\r\n  } else {\r\n    sdp += 'a=inactive\\r\\n';\r\n  }\r\n\r\n  if (transceiver.rtpSender) {\r\n    // spec.\r\n    var msid = 'msid:' + stream.id + ' ' +\r\n        transceiver.rtpSender.track.id + '\\r\\n';\r\n    sdp += 'a=' + msid;\r\n\r\n    // for Chrome.\r\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\r\n        ' ' + msid;\r\n    if (transceiver.sendEncodingParameters[0].rtx) {\r\n      sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\r\n          ' ' + msid;\r\n      sdp += 'a=ssrc-group:FID ' +\r\n          transceiver.sendEncodingParameters[0].ssrc + ' ' +\r\n          transceiver.sendEncodingParameters[0].rtx.ssrc +\r\n          '\\r\\n';\r\n    }\r\n  }\r\n  // FIXME: this should be written by writeRtpDescription.\r\n  sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\r\n      ' cname:' + SDPUtils.localCName + '\\r\\n';\r\n  if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\r\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\r\n        ' cname:' + SDPUtils.localCName + '\\r\\n';\r\n  }\r\n  return sdp;\r\n};\r\n\r\n// Gets the direction from the mediaSection or the sessionpart.\r\nSDPUtils.getDirection = function(mediaSection, sessionpart) {\r\n  // Look for sendrecv, sendonly, recvonly, inactive, default to sendrecv.\r\n  var lines = SDPUtils.splitLines(mediaSection);\r\n  for (var i = 0; i < lines.length; i++) {\r\n    switch (lines[i]) {\r\n      case 'a=sendrecv':\r\n      case 'a=sendonly':\r\n      case 'a=recvonly':\r\n      case 'a=inactive':\r\n        return lines[i].substr(2);\r\n      default:\r\n        // FIXME: What should happen here?\r\n    }\r\n  }\r\n  if (sessionpart) {\r\n    return SDPUtils.getDirection(sessionpart);\r\n  }\r\n  return 'sendrecv';\r\n};\r\n\r\nSDPUtils.getKind = function(mediaSection) {\r\n  var lines = SDPUtils.splitLines(mediaSection);\r\n  var mline = lines[0].split(' ');\r\n  return mline[0].substr(2);\r\n};\r\n\r\nSDPUtils.isRejected = function(mediaSection) {\r\n  return mediaSection.split(' ', 2)[1] === '0';\r\n};\r\n\r\nSDPUtils.parseMLine = function(mediaSection) {\r\n  var lines = SDPUtils.splitLines(mediaSection);\r\n  var mline = lines[0].split(' ');\r\n  return {\r\n    kind: mline[0].substr(2),\r\n    port: parseInt(mline[1], 10),\r\n    protocol: mline[2],\r\n    fmt: mline.slice(3).join(' ')\r\n  };\r\n};\r\n\r\n// Expose public methods.\r\nif (typeof module === 'object') {\r\n  module.exports = SDPUtils;\r\n}\r\n\r\n},{}],3:[function(require,module,exports){\r\n(function (global){\r\n/*\r\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\r\n *\r\n *  Use of this source code is governed by a BSD-style license\r\n *  that can be found in the LICENSE file in the root of the source\r\n *  tree.\r\n */\r\n /* eslint-env node */\r\n\r\n'use strict';\r\n\r\nvar adapterFactory = require('./adapter_factory.js');\r\nmodule.exports = adapterFactory({window: global.window});\r\n\r\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\r\n},{\"./adapter_factory.js\":4}],4:[function(require,module,exports){\r\n/*\r\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\r\n *\r\n *  Use of this source code is governed by a BSD-style license\r\n *  that can be found in the LICENSE file in the root of the source\r\n *  tree.\r\n */\r\n /* eslint-env node */\r\n\r\n'use strict';\r\n\r\nvar utils = require('./utils');\r\n// Shimming starts here.\r\nmodule.exports = function(dependencies, opts) {\r\n  var window = dependencies && dependencies.window;\r\n\r\n  var options = {\r\n    shimChrome: true,\r\n    shimFirefox: true,\r\n    shimEdge: true,\r\n    shimSafari: true,\r\n  };\r\n\r\n  for (var key in opts) {\r\n    if (hasOwnProperty.call(opts, key)) {\r\n      options[key] = opts[key];\r\n    }\r\n  }\r\n\r\n  // Utils.\r\n  var logging = utils.log;\r\n  var browserDetails = utils.detectBrowser(window);\r\n\r\n  // Export to the adapter global object visible in the browser.\r\n  var adapter = {\r\n    browserDetails: browserDetails,\r\n    extractVersion: utils.extractVersion,\r\n    disableLog: utils.disableLog,\r\n    disableWarnings: utils.disableWarnings\r\n  };\r\n\r\n  // Uncomment the line below if you want logging to occur, including logging\r\n  // for the switch statement below. Can also be turned on in the browser via\r\n  // adapter.disableLog(false), but then logging from the switch statement below\r\n  // will not appear.\r\n  // require('./utils').disableLog(false);\r\n\r\n  // Browser shims.\r\n  var chromeShim = require('./chrome/chrome_shim') || null;\r\n  var edgeShim = require('./edge/edge_shim') || null;\r\n  var firefoxShim = require('./firefox/firefox_shim') || null;\r\n  var safariShim = require('./safari/safari_shim') || null;\r\n  var commonShim = require('./common_shim') || null;\r\n\r\n  // Shim browser if found.\r\n  switch (browserDetails.browser) {\r\n    case 'chrome':\r\n      if (!chromeShim || !chromeShim.shimPeerConnection ||\r\n          !options.shimChrome) {\r\n        logging('Chrome shim is not included in this adapter release.');\r\n        return adapter;\r\n      }\r\n      logging('adapter.js shimming chrome.');\r\n      // Export to the adapter global object visible in the browser.\r\n      adapter.browserShim = chromeShim;\r\n      commonShim.shimCreateObjectURL(window);\r\n\r\n      chromeShim.shimGetUserMedia(window);\r\n      chromeShim.shimMediaStream(window);\r\n      chromeShim.shimSourceObject(window);\r\n      chromeShim.shimPeerConnection(window);\r\n      chromeShim.shimOnTrack(window);\r\n      chromeShim.shimAddTrackRemoveTrack(window);\r\n      chromeShim.shimGetSendersWithDtmf(window);\r\n\r\n      commonShim.shimRTCIceCandidate(window);\r\n      break;\r\n    case 'firefox':\r\n      if (!firefoxShim || !firefoxShim.shimPeerConnection ||\r\n          !options.shimFirefox) {\r\n        logging('Firefox shim is not included in this adapter release.');\r\n        return adapter;\r\n      }\r\n      logging('adapter.js shimming firefox.');\r\n      // Export to the adapter global object visible in the browser.\r\n      adapter.browserShim = firefoxShim;\r\n      commonShim.shimCreateObjectURL(window);\r\n\r\n      firefoxShim.shimGetUserMedia(window);\r\n      firefoxShim.shimSourceObject(window);\r\n      firefoxShim.shimPeerConnection(window);\r\n      firefoxShim.shimOnTrack(window);\r\n\r\n      commonShim.shimRTCIceCandidate(window);\r\n      break;\r\n    case 'edge':\r\n      if (!edgeShim || !edgeShim.shimPeerConnection || !options.shimEdge) {\r\n        logging('MS edge shim is not included in this adapter release.');\r\n        return adapter;\r\n      }\r\n      logging('adapter.js shimming edge.');\r\n      // Export to the adapter global object visible in the browser.\r\n      adapter.browserShim = edgeShim;\r\n      commonShim.shimCreateObjectURL(window);\r\n\r\n      edgeShim.shimGetUserMedia(window);\r\n      edgeShim.shimPeerConnection(window);\r\n      edgeShim.shimReplaceTrack(window);\r\n\r\n      // the edge shim implements the full RTCIceCandidate object.\r\n      break;\r\n    case 'safari':\r\n      if (!safariShim || !options.shimSafari) {\r\n        logging('Safari shim is not included in this adapter release.');\r\n        return adapter;\r\n      }\r\n      logging('adapter.js shimming safari.');\r\n      // Export to the adapter global object visible in the browser.\r\n      adapter.browserShim = safariShim;\r\n      commonShim.shimCreateObjectURL(window);\r\n\r\n      safariShim.shimRTCIceServerUrls(window);\r\n      safariShim.shimCallbacksAPI(window);\r\n      safariShim.shimLocalStreamsAPI(window);\r\n      safariShim.shimRemoteStreamsAPI(window);\r\n      safariShim.shimTrackEventTransceiver(window);\r\n      safariShim.shimGetUserMedia(window);\r\n      safariShim.shimCreateOfferLegacy(window);\r\n\r\n      commonShim.shimRTCIceCandidate(window);\r\n      break;\r\n    default:\r\n      logging('Unsupported browser!');\r\n      break;\r\n  }\r\n\r\n  return adapter;\r\n};\r\n\r\n},{\"./chrome/chrome_shim\":5,\"./common_shim\":7,\"./edge/edge_shim\":8,\"./firefox/firefox_shim\":10,\"./safari/safari_shim\":12,\"./utils\":13}],5:[function(require,module,exports){\r\n\r\n/*\r\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\r\n *\r\n *  Use of this source code is governed by a BSD-style license\r\n *  that can be found in the LICENSE file in the root of the source\r\n *  tree.\r\n */\r\n /* eslint-env node */\r\n'use strict';\r\nvar utils = require('../utils.js');\r\nvar logging = utils.log;\r\n\r\nvar chromeShim = {\r\n  shimMediaStream: function(window) {\r\n    window.MediaStream = window.MediaStream || window.webkitMediaStream;\r\n  },\r\n\r\n  shimOnTrack: function(window) {\r\n    if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\r\n        window.RTCPeerConnection.prototype)) {\r\n      Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\r\n        get: function() {\r\n          return this._ontrack;\r\n        },\r\n        set: function(f) {\r\n          if (this._ontrack) {\r\n            this.removeEventListener('track', this._ontrack);\r\n          }\r\n          this.addEventListener('track', this._ontrack = f);\r\n        }\r\n      });\r\n      var origSetRemoteDescription =\r\n          window.RTCPeerConnection.prototype.setRemoteDescription;\r\n      window.RTCPeerConnection.prototype.setRemoteDescription = function() {\r\n        var pc = this;\r\n        if (!pc._ontrackpoly) {\r\n          pc._ontrackpoly = function(e) {\r\n            // onaddstream does not fire when a track is added to an existing\r\n            // stream. But stream.onaddtrack is implemented so we use that.\r\n            e.stream.addEventListener('addtrack', function(te) {\r\n              var receiver;\r\n              if (window.RTCPeerConnection.prototype.getReceivers) {\r\n                receiver = pc.getReceivers().find(function(r) {\r\n                  return r.track && r.track.id === te.track.id;\r\n                });\r\n              } else {\r\n                receiver = {track: te.track};\r\n              }\r\n\r\n              var event = new Event('track');\r\n              event.track = te.track;\r\n              event.receiver = receiver;\r\n              event.transceiver = {receiver: receiver};\r\n              event.streams = [e.stream];\r\n              pc.dispatchEvent(event);\r\n            });\r\n            e.stream.getTracks().forEach(function(track) {\r\n              var receiver;\r\n              if (window.RTCPeerConnection.prototype.getReceivers) {\r\n                receiver = pc.getReceivers().find(function(r) {\r\n                  return r.track && r.track.id === track.id;\r\n                });\r\n              } else {\r\n                receiver = {track: track};\r\n              }\r\n              var event = new Event('track');\r\n              event.track = track;\r\n              event.receiver = receiver;\r\n              event.transceiver = {receiver: receiver};\r\n              event.streams = [e.stream];\r\n              pc.dispatchEvent(event);\r\n            });\r\n          };\r\n          pc.addEventListener('addstream', pc._ontrackpoly);\r\n        }\r\n        return origSetRemoteDescription.apply(pc, arguments);\r\n      };\r\n    }\r\n  },\r\n\r\n  shimGetSendersWithDtmf: function(window) {\r\n    // Overrides addTrack/removeTrack, depends on shimAddTrackRemoveTrack.\r\n    if (typeof window === 'object' && window.RTCPeerConnection &&\r\n        !('getSenders' in window.RTCPeerConnection.prototype) &&\r\n        'createDTMFSender' in window.RTCPeerConnection.prototype) {\r\n      var shimSenderWithDtmf = function(pc, track) {\r\n        return {\r\n          track: track,\r\n          get dtmf() {\r\n            if (this._dtmf === undefined) {\r\n              if (track.kind === 'audio') {\r\n                this._dtmf = pc.createDTMFSender(track);\r\n              } else {\r\n                this._dtmf = null;\r\n              }\r\n            }\r\n            return this._dtmf;\r\n          },\r\n          _pc: pc\r\n        };\r\n      };\r\n\r\n      // augment addTrack when getSenders is not available.\r\n      if (!window.RTCPeerConnection.prototype.getSenders) {\r\n        window.RTCPeerConnection.prototype.getSenders = function() {\r\n          this._senders = this._senders || [];\r\n          return this._senders.slice(); // return a copy of the internal state.\r\n        };\r\n        var origAddTrack = window.RTCPeerConnection.prototype.addTrack;\r\n        window.RTCPeerConnection.prototype.addTrack = function(track, stream) {\r\n          var pc = this;\r\n          var sender = origAddTrack.apply(pc, arguments);\r\n          if (!sender) {\r\n            sender = shimSenderWithDtmf(pc, track);\r\n            pc._senders.push(sender);\r\n          }\r\n          return sender;\r\n        };\r\n\r\n        var origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\r\n        window.RTCPeerConnection.prototype.removeTrack = function(sender) {\r\n          var pc = this;\r\n          origRemoveTrack.apply(pc, arguments);\r\n          var idx = pc._senders.indexOf(sender);\r\n          if (idx !== -1) {\r\n            pc._senders.splice(idx, 1);\r\n          }\r\n        };\r\n      }\r\n      var origAddStream = window.RTCPeerConnection.prototype.addStream;\r\n      window.RTCPeerConnection.prototype.addStream = function(stream) {\r\n        var pc = this;\r\n        pc._senders = pc._senders || [];\r\n        origAddStream.apply(pc, [stream]);\r\n        stream.getTracks().forEach(function(track) {\r\n          pc._senders.push(shimSenderWithDtmf(pc, track));\r\n        });\r\n      };\r\n\r\n      var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\r\n      window.RTCPeerConnection.prototype.removeStream = function(stream) {\r\n        var pc = this;\r\n        pc._senders = pc._senders || [];\r\n        origRemoveStream.apply(pc, [stream]);\r\n\r\n        stream.getTracks().forEach(function(track) {\r\n          var sender = pc._senders.find(function(s) {\r\n            return s.track === track;\r\n          });\r\n          if (sender) {\r\n            pc._senders.splice(pc._senders.indexOf(sender), 1); // remove sender\r\n          }\r\n        });\r\n      };\r\n    } else if (typeof window === 'object' && window.RTCPeerConnection &&\r\n               'getSenders' in window.RTCPeerConnection.prototype &&\r\n               'createDTMFSender' in window.RTCPeerConnection.prototype &&\r\n               window.RTCRtpSender &&\r\n               !('dtmf' in window.RTCRtpSender.prototype)) {\r\n      var origGetSenders = window.RTCPeerConnection.prototype.getSenders;\r\n      window.RTCPeerConnection.prototype.getSenders = function() {\r\n        var pc = this;\r\n        var senders = origGetSenders.apply(pc, []);\r\n        senders.forEach(function(sender) {\r\n          sender._pc = pc;\r\n        });\r\n        return senders;\r\n      };\r\n\r\n      Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\r\n        get: function() {\r\n          if (this._dtmf === undefined) {\r\n            if (this.track.kind === 'audio') {\r\n              this._dtmf = this._pc.createDTMFSender(this.track);\r\n            } else {\r\n              this._dtmf = null;\r\n            }\r\n          }\r\n          return this._dtmf;\r\n        }\r\n      });\r\n    }\r\n  },\r\n\r\n  shimSourceObject: function(window) {\r\n    var URL = window && window.URL;\r\n\r\n    if (typeof window === 'object') {\r\n      if (window.HTMLMediaElement &&\r\n        !('srcObject' in window.HTMLMediaElement.prototype)) {\r\n        // Shim the srcObject property, once, when HTMLMediaElement is found.\r\n        Object.defineProperty(window.HTMLMediaElement.prototype, 'srcObject', {\r\n          get: function() {\r\n            return this._srcObject;\r\n          },\r\n          set: function(stream) {\r\n            var self = this;\r\n            // Use _srcObject as a private property for this shim\r\n            this._srcObject = stream;\r\n            if (this.src) {\r\n              URL.revokeObjectURL(this.src);\r\n            }\r\n\r\n            if (!stream) {\r\n              this.src = '';\r\n              return undefined;\r\n            }\r\n            this.src = URL.createObjectURL(stream);\r\n            // We need to recreate the blob url when a track is added or\r\n            // removed. Doing it manually since we want to avoid a recursion.\r\n            stream.addEventListener('addtrack', function() {\r\n              if (self.src) {\r\n                URL.revokeObjectURL(self.src);\r\n              }\r\n              self.src = URL.createObjectURL(stream);\r\n            });\r\n            stream.addEventListener('removetrack', function() {\r\n              if (self.src) {\r\n                URL.revokeObjectURL(self.src);\r\n              }\r\n              self.src = URL.createObjectURL(stream);\r\n            });\r\n          }\r\n        });\r\n      }\r\n    }\r\n  },\r\n\r\n  shimAddTrackRemoveTrack: function(window) {\r\n    var browserDetails = utils.detectBrowser(window);\r\n    // shim addTrack and removeTrack.\r\n    if (window.RTCPeerConnection.prototype.addTrack &&\r\n        browserDetails.version >= 63) {\r\n      return;\r\n    }\r\n\r\n    // also shim pc.getLocalStreams when addTrack is shimmed\r\n    // to return the original streams.\r\n    var origGetLocalStreams = window.RTCPeerConnection.prototype\r\n        .getLocalStreams;\r\n    window.RTCPeerConnection.prototype.getLocalStreams = function() {\r\n      var self = this;\r\n      var nativeStreams = origGetLocalStreams.apply(this);\r\n      self._reverseStreams = self._reverseStreams || {};\r\n      return nativeStreams.map(function(stream) {\r\n        return self._reverseStreams[stream.id];\r\n      });\r\n    };\r\n\r\n    var origAddStream = window.RTCPeerConnection.prototype.addStream;\r\n    window.RTCPeerConnection.prototype.addStream = function(stream) {\r\n      var pc = this;\r\n      pc._streams = pc._streams || {};\r\n      pc._reverseStreams = pc._reverseStreams || {};\r\n\r\n      stream.getTracks().forEach(function(track) {\r\n        var alreadyExists = pc.getSenders().find(function(s) {\r\n          return s.track === track;\r\n        });\r\n        if (alreadyExists) {\r\n          throw new DOMException('Track already exists.',\r\n              'InvalidAccessError');\r\n        }\r\n      });\r\n      // Add identity mapping for consistency with addTrack.\r\n      // Unless this is being used with a stream from addTrack.\r\n      if (!pc._reverseStreams[stream.id]) {\r\n        var newStream = new window.MediaStream(stream.getTracks());\r\n        pc._streams[stream.id] = newStream;\r\n        pc._reverseStreams[newStream.id] = stream;\r\n        stream = newStream;\r\n      }\r\n      origAddStream.apply(pc, [stream]);\r\n    };\r\n\r\n    var origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\r\n    window.RTCPeerConnection.prototype.removeStream = function(stream) {\r\n      var pc = this;\r\n      pc._streams = pc._streams || {};\r\n      pc._reverseStreams = pc._reverseStreams || {};\r\n\r\n      origRemoveStream.apply(pc, [(pc._streams[stream.id] || stream)]);\r\n      delete pc._reverseStreams[(pc._streams[stream.id] ?\r\n          pc._streams[stream.id].id : stream.id)];\r\n      delete pc._streams[stream.id];\r\n    };\r\n\r\n    window.RTCPeerConnection.prototype.addTrack = function(track, stream) {\r\n      var pc = this;\r\n      if (pc.signalingState === 'closed') {\r\n        throw new DOMException(\r\n          'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\r\n          'InvalidStateError');\r\n      }\r\n      var streams = [].slice.call(arguments, 1);\r\n      if (streams.length !== 1 ||\r\n          !streams[0].getTracks().find(function(t) {\r\n            return t === track;\r\n          })) {\r\n        // this is not fully correct but all we can manage without\r\n        // [[associated MediaStreams]] internal slot.\r\n        throw new DOMException(\r\n          'The adapter.js addTrack polyfill only supports a single ' +\r\n          ' stream which is associated with the specified track.',\r\n          'NotSupportedError');\r\n      }\r\n\r\n      var alreadyExists = pc.getSenders().find(function(s) {\r\n        return s.track === track;\r\n      });\r\n      if (alreadyExists) {\r\n        throw new DOMException('Track already exists.',\r\n            'InvalidAccessError');\r\n      }\r\n\r\n      pc._streams = pc._streams || {};\r\n      pc._reverseStreams = pc._reverseStreams || {};\r\n      var oldStream = pc._streams[stream.id];\r\n      if (oldStream) {\r\n        // this is using odd Chrome behaviour, use with caution:\r\n        // https://bugs.chromium.org/p/webrtc/issues/detail?id=7815\r\n        // Note: we rely on the high-level addTrack/dtmf shim to\r\n        // create the sender with a dtmf sender.\r\n        oldStream.addTrack(track);\r\n\r\n        // Trigger ONN async.\r\n        Promise.resolve().then(function() {\r\n          pc.dispatchEvent(new Event('negotiationneeded'));\r\n        });\r\n      } else {\r\n        var newStream = new window.MediaStream([track]);\r\n        pc._streams[stream.id] = newStream;\r\n        pc._reverseStreams[newStream.id] = stream;\r\n        pc.addStream(newStream);\r\n      }\r\n      return pc.getSenders().find(function(s) {\r\n        return s.track === track;\r\n      });\r\n    };\r\n\r\n    // replace the internal stream id with the external one and\r\n    // vice versa.\r\n    function replaceInternalStreamId(pc, description) {\r\n      var sdp = description.sdp;\r\n      Object.keys(pc._reverseStreams || []).forEach(function(internalId) {\r\n        var externalStream = pc._reverseStreams[internalId];\r\n        var internalStream = pc._streams[externalStream.id];\r\n        sdp = sdp.replace(new RegExp(internalStream.id, 'g'),\r\n            externalStream.id);\r\n      });\r\n      return new RTCSessionDescription({\r\n        type: description.type,\r\n        sdp: sdp\r\n      });\r\n    }\r\n    function replaceExternalStreamId(pc, description) {\r\n      var sdp = description.sdp;\r\n      Object.keys(pc._reverseStreams || []).forEach(function(internalId) {\r\n        var externalStream = pc._reverseStreams[internalId];\r\n        var internalStream = pc._streams[externalStream.id];\r\n        sdp = sdp.replace(new RegExp(externalStream.id, 'g'),\r\n            internalStream.id);\r\n      });\r\n      return new RTCSessionDescription({\r\n        type: description.type,\r\n        sdp: sdp\r\n      });\r\n    }\r\n    ['createOffer', 'createAnswer'].forEach(function(method) {\r\n      var nativeMethod = window.RTCPeerConnection.prototype[method];\r\n      window.RTCPeerConnection.prototype[method] = function() {\r\n        var pc = this;\r\n        var args = arguments;\r\n        var isLegacyCall = arguments.length &&\r\n            typeof arguments[0] === 'function';\r\n        if (isLegacyCall) {\r\n          return nativeMethod.apply(pc, [\r\n            function(description) {\r\n              var desc = replaceInternalStreamId(pc, description);\r\n              args[0].apply(null, [desc]);\r\n            },\r\n            function(err) {\r\n              if (args[1]) {\r\n                args[1].apply(null, err);\r\n              }\r\n            }, arguments[2]\r\n          ]);\r\n        }\r\n        return nativeMethod.apply(pc, arguments)\r\n        .then(function(description) {\r\n          return replaceInternalStreamId(pc, description);\r\n        });\r\n      };\r\n    });\r\n\r\n    var origSetLocalDescription =\r\n        window.RTCPeerConnection.prototype.setLocalDescription;\r\n    window.RTCPeerConnection.prototype.setLocalDescription = function() {\r\n      var pc = this;\r\n      if (!arguments.length || !arguments[0].type) {\r\n        return origSetLocalDescription.apply(pc, arguments);\r\n      }\r\n      arguments[0] = replaceExternalStreamId(pc, arguments[0]);\r\n      return origSetLocalDescription.apply(pc, arguments);\r\n    };\r\n\r\n    // TODO: mangle getStats: https://w3c.github.io/webrtc-stats/#dom-rtcmediastreamstats-streamidentifier\r\n\r\n    var origLocalDescription = Object.getOwnPropertyDescriptor(\r\n        window.RTCPeerConnection.prototype, 'localDescription');\r\n    Object.defineProperty(window.RTCPeerConnection.prototype,\r\n        'localDescription', {\r\n          get: function() {\r\n            var pc = this;\r\n            var description = origLocalDescription.get.apply(this);\r\n            if (description.type === '') {\r\n              return description;\r\n            }\r\n            return replaceInternalStreamId(pc, description);\r\n          }\r\n        });\r\n\r\n    window.RTCPeerConnection.prototype.removeTrack = function(sender) {\r\n      var pc = this;\r\n      if (pc.signalingState === 'closed') {\r\n        throw new DOMException(\r\n          'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\r\n          'InvalidStateError');\r\n      }\r\n      // We can not yet check for sender instanceof RTCRtpSender\r\n      // since we shim RTPSender. So we check if sender._pc is set.\r\n      if (!sender._pc) {\r\n        throw new DOMException('Argument 1 of RTCPeerConnection.removeTrack ' +\r\n            'does not implement interface RTCRtpSender.', 'TypeError');\r\n      }\r\n      var isLocal = sender._pc === pc;\r\n      if (!isLocal) {\r\n        throw new DOMException('Sender was not created by this connection.',\r\n            'InvalidAccessError');\r\n      }\r\n\r\n      // Search for the native stream the senders track belongs to.\r\n      pc._streams = pc._streams || {};\r\n      var stream;\r\n      Object.keys(pc._streams).forEach(function(streamid) {\r\n        var hasTrack = pc._streams[streamid].getTracks().find(function(track) {\r\n          return sender.track === track;\r\n        });\r\n        if (hasTrack) {\r\n          stream = pc._streams[streamid];\r\n        }\r\n      });\r\n\r\n      if (stream) {\r\n        if (stream.getTracks().length === 1) {\r\n          // if this is the last track of the stream, remove the stream. This\r\n          // takes care of any shimmed _senders.\r\n          pc.removeStream(pc._reverseStreams[stream.id]);\r\n        } else {\r\n          // relying on the same odd chrome behaviour as above.\r\n          stream.removeTrack(sender.track);\r\n        }\r\n        pc.dispatchEvent(new Event('negotiationneeded'));\r\n      }\r\n    };\r\n  },\r\n\r\n  shimPeerConnection: function(window) {\r\n    var browserDetails = utils.detectBrowser(window);\r\n\r\n    // The RTCPeerConnection object.\r\n    if (!window.RTCPeerConnection) {\r\n      window.RTCPeerConnection = function(pcConfig, pcConstraints) {\r\n        // Translate iceTransportPolicy to iceTransports,\r\n        // see https://code.google.com/p/webrtc/issues/detail?id=4869\r\n        // this was fixed in M56 along with unprefixing RTCPeerConnection.\r\n        logging('PeerConnection');\r\n        if (pcConfig && pcConfig.iceTransportPolicy) {\r\n          pcConfig.iceTransports = pcConfig.iceTransportPolicy;\r\n        }\r\n\r\n        return new window.webkitRTCPeerConnection(pcConfig, pcConstraints);\r\n      };\r\n      window.RTCPeerConnection.prototype =\r\n          window.webkitRTCPeerConnection.prototype;\r\n      // wrap static methods. Currently just generateCertificate.\r\n      if (window.webkitRTCPeerConnection.generateCertificate) {\r\n        Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\r\n          get: function() {\r\n            return window.webkitRTCPeerConnection.generateCertificate;\r\n          }\r\n        });\r\n      }\r\n    } else {\r\n      // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\r\n      var OrigPeerConnection = window.RTCPeerConnection;\r\n      window.RTCPeerConnection = function(pcConfig, pcConstraints) {\r\n        if (pcConfig && pcConfig.iceServers) {\r\n          var newIceServers = [];\r\n          for (var i = 0; i < pcConfig.iceServers.length; i++) {\r\n            var server = pcConfig.iceServers[i];\r\n            if (!server.hasOwnProperty('urls') &&\r\n                server.hasOwnProperty('url')) {\r\n              utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\r\n              server = JSON.parse(JSON.stringify(server));\r\n              server.urls = server.url;\r\n              newIceServers.push(server);\r\n            } else {\r\n              newIceServers.push(pcConfig.iceServers[i]);\r\n            }\r\n          }\r\n          pcConfig.iceServers = newIceServers;\r\n        }\r\n        return new OrigPeerConnection(pcConfig, pcConstraints);\r\n      };\r\n      window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\r\n      // wrap static methods. Currently just generateCertificate.\r\n      Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\r\n        get: function() {\r\n          return OrigPeerConnection.generateCertificate;\r\n        }\r\n      });\r\n    }\r\n\r\n    var origGetStats = window.RTCPeerConnection.prototype.getStats;\r\n    window.RTCPeerConnection.prototype.getStats = function(selector,\r\n        successCallback, errorCallback) {\r\n      var self = this;\r\n      var args = arguments;\r\n\r\n      // If selector is a function then we are in the old style stats so just\r\n      // pass back the original getStats format to avoid breaking old users.\r\n      if (arguments.length > 0 && typeof selector === 'function') {\r\n        return origGetStats.apply(this, arguments);\r\n      }\r\n\r\n      // When spec-style getStats is supported, return those when called with\r\n      // either no arguments or the selector argument is null.\r\n      if (origGetStats.length === 0 && (arguments.length === 0 ||\r\n          typeof arguments[0] !== 'function')) {\r\n        return origGetStats.apply(this, []);\r\n      }\r\n\r\n      var fixChromeStats_ = function(response) {\r\n        var standardReport = {};\r\n        var reports = response.result();\r\n        reports.forEach(function(report) {\r\n          var standardStats = {\r\n            id: report.id,\r\n            timestamp: report.timestamp,\r\n            type: {\r\n              localcandidate: 'local-candidate',\r\n              remotecandidate: 'remote-candidate'\r\n            }[report.type] || report.type\r\n          };\r\n          report.names().forEach(function(name) {\r\n            standardStats[name] = report.stat(name);\r\n          });\r\n          standardReport[standardStats.id] = standardStats;\r\n        });\r\n\r\n        return standardReport;\r\n      };\r\n\r\n      // shim getStats with maplike support\r\n      var makeMapStats = function(stats) {\r\n        return new Map(Object.keys(stats).map(function(key) {\r\n          return [key, stats[key]];\r\n        }));\r\n      };\r\n\r\n      if (arguments.length >= 2) {\r\n        var successCallbackWrapper_ = function(response) {\r\n          args[1](makeMapStats(fixChromeStats_(response)));\r\n        };\r\n\r\n        return origGetStats.apply(this, [successCallbackWrapper_,\r\n          arguments[0]]);\r\n      }\r\n\r\n      // promise-support\r\n      return new Promise(function(resolve, reject) {\r\n        origGetStats.apply(self, [\r\n          function(response) {\r\n            resolve(makeMapStats(fixChromeStats_(response)));\r\n          }, reject]);\r\n      }).then(successCallback, errorCallback);\r\n    };\r\n\r\n    // add promise support -- natively available in Chrome 51\r\n    if (browserDetails.version < 51) {\r\n      ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\r\n          .forEach(function(method) {\r\n            var nativeMethod = window.RTCPeerConnection.prototype[method];\r\n            window.RTCPeerConnection.prototype[method] = function() {\r\n              var args = arguments;\r\n              var self = this;\r\n              var promise = new Promise(function(resolve, reject) {\r\n                nativeMethod.apply(self, [args[0], resolve, reject]);\r\n              });\r\n              if (args.length < 2) {\r\n                return promise;\r\n              }\r\n              return promise.then(function() {\r\n                args[1].apply(null, []);\r\n              },\r\n              function(err) {\r\n                if (args.length >= 3) {\r\n                  args[2].apply(null, [err]);\r\n                }\r\n              });\r\n            };\r\n          });\r\n    }\r\n\r\n    // promise support for createOffer and createAnswer. Available (without\r\n    // bugs) since M52: crbug/619289\r\n    if (browserDetails.version < 52) {\r\n      ['createOffer', 'createAnswer'].forEach(function(method) {\r\n        var nativeMethod = window.RTCPeerConnection.prototype[method];\r\n        window.RTCPeerConnection.prototype[method] = function() {\r\n          var self = this;\r\n          if (arguments.length < 1 || (arguments.length === 1 &&\r\n              typeof arguments[0] === 'object')) {\r\n            var opts = arguments.length === 1 ? arguments[0] : undefined;\r\n            return new Promise(function(resolve, reject) {\r\n              nativeMethod.apply(self, [resolve, reject, opts]);\r\n            });\r\n          }\r\n          return nativeMethod.apply(this, arguments);\r\n        };\r\n      });\r\n    }\r\n\r\n    // shim implicit creation of RTCSessionDescription/RTCIceCandidate\r\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\r\n        .forEach(function(method) {\r\n          var nativeMethod = window.RTCPeerConnection.prototype[method];\r\n          window.RTCPeerConnection.prototype[method] = function() {\r\n            arguments[0] = new ((method === 'addIceCandidate') ?\r\n                window.RTCIceCandidate :\r\n                window.RTCSessionDescription)(arguments[0]);\r\n            return nativeMethod.apply(this, arguments);\r\n          };\r\n        });\r\n\r\n    // support for addIceCandidate(null or undefined)\r\n    var nativeAddIceCandidate =\r\n        window.RTCPeerConnection.prototype.addIceCandidate;\r\n    window.RTCPeerConnection.prototype.addIceCandidate = function() {\r\n      if (!arguments[0]) {\r\n        if (arguments[1]) {\r\n          arguments[1].apply(null);\r\n        }\r\n        return Promise.resolve();\r\n      }\r\n      return nativeAddIceCandidate.apply(this, arguments);\r\n    };\r\n  }\r\n};\r\n\r\n\r\n// Expose public methods.\r\nmodule.exports = {\r\n  shimMediaStream: chromeShim.shimMediaStream,\r\n  shimOnTrack: chromeShim.shimOnTrack,\r\n  shimAddTrackRemoveTrack: chromeShim.shimAddTrackRemoveTrack,\r\n  shimGetSendersWithDtmf: chromeShim.shimGetSendersWithDtmf,\r\n  shimSourceObject: chromeShim.shimSourceObject,\r\n  shimPeerConnection: chromeShim.shimPeerConnection,\r\n  shimGetUserMedia: require('./getusermedia')\r\n};\r\n\r\n},{\"../utils.js\":13,\"./getusermedia\":6}],6:[function(require,module,exports){\r\n/*\r\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\r\n *\r\n *  Use of this source code is governed by a BSD-style license\r\n *  that can be found in the LICENSE file in the root of the source\r\n *  tree.\r\n */\r\n /* eslint-env node */\r\n'use strict';\r\nvar utils = require('../utils.js');\r\nvar logging = utils.log;\r\n\r\n// Expose public methods.\r\nmodule.exports = function(window) {\r\n  var browserDetails = utils.detectBrowser(window);\r\n  var navigator = window && window.navigator;\r\n\r\n  var constraintsToChrome_ = function(c) {\r\n    if (typeof c !== 'object' || c.mandatory || c.optional) {\r\n      return c;\r\n    }\r\n    var cc = {};\r\n    Object.keys(c).forEach(function(key) {\r\n      if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\r\n        return;\r\n      }\r\n      var r = (typeof c[key] === 'object') ? c[key] : {ideal: c[key]};\r\n      if (r.exact !== undefined && typeof r.exact === 'number') {\r\n        r.min = r.max = r.exact;\r\n      }\r\n      var oldname_ = function(prefix, name) {\r\n        if (prefix) {\r\n          return prefix + name.charAt(0).toUpperCase() + name.slice(1);\r\n        }\r\n        return (name === 'deviceId') ? 'sourceId' : name;\r\n      };\r\n      if (r.ideal !== undefined) {\r\n        cc.optional = cc.optional || [];\r\n        var oc = {};\r\n        if (typeof r.ideal === 'number') {\r\n          oc[oldname_('min', key)] = r.ideal;\r\n          cc.optional.push(oc);\r\n          oc = {};\r\n          oc[oldname_('max', key)] = r.ideal;\r\n          cc.optional.push(oc);\r\n        } else {\r\n          oc[oldname_('', key)] = r.ideal;\r\n          cc.optional.push(oc);\r\n        }\r\n      }\r\n      if (r.exact !== undefined && typeof r.exact !== 'number') {\r\n        cc.mandatory = cc.mandatory || {};\r\n        cc.mandatory[oldname_('', key)] = r.exact;\r\n      } else {\r\n        ['min', 'max'].forEach(function(mix) {\r\n          if (r[mix] !== undefined) {\r\n            cc.mandatory = cc.mandatory || {};\r\n            cc.mandatory[oldname_(mix, key)] = r[mix];\r\n          }\r\n        });\r\n      }\r\n    });\r\n    if (c.advanced) {\r\n      cc.optional = (cc.optional || []).concat(c.advanced);\r\n    }\r\n    return cc;\r\n  };\r\n\r\n  var shimConstraints_ = function(constraints, func) {\r\n    constraints = JSON.parse(JSON.stringify(constraints));\r\n    if (constraints && typeof constraints.audio === 'object') {\r\n      var remap = function(obj, a, b) {\r\n        if (a in obj && !(b in obj)) {\r\n          obj[b] = obj[a];\r\n          delete obj[a];\r\n        }\r\n      };\r\n      constraints = JSON.parse(JSON.stringify(constraints));\r\n      remap(constraints.audio, 'autoGainControl', 'googAutoGainControl');\r\n      remap(constraints.audio, 'noiseSuppression', 'googNoiseSuppression');\r\n      constraints.audio = constraintsToChrome_(constraints.audio);\r\n    }\r\n    if (constraints && typeof constraints.video === 'object') {\r\n      // Shim facingMode for mobile & surface pro.\r\n      var face = constraints.video.facingMode;\r\n      face = face && ((typeof face === 'object') ? face : {ideal: face});\r\n      var getSupportedFacingModeLies = browserDetails.version < 66;\r\n\r\n      if ((face && (face.exact === 'user' || face.exact === 'environment' ||\r\n                    face.ideal === 'user' || face.ideal === 'environment')) &&\r\n          !(navigator.mediaDevices.getSupportedConstraints &&\r\n            navigator.mediaDevices.getSupportedConstraints().facingMode &&\r\n            !getSupportedFacingModeLies)) {\r\n        delete constraints.video.facingMode;\r\n        var matches;\r\n        if (face.exact === 'environment' || face.ideal === 'environment') {\r\n          matches = ['back', 'rear'];\r\n        } else if (face.exact === 'user' || face.ideal === 'user') {\r\n          matches = ['front'];\r\n        }\r\n        if (matches) {\r\n          // Look for matches in label, or use last cam for back (typical).\r\n          return navigator.mediaDevices.enumerateDevices()\r\n          .then(function(devices) {\r\n            devices = devices.filter(function(d) {\r\n              return d.kind === 'videoinput';\r\n            });\r\n            var dev = devices.find(function(d) {\r\n              return matches.some(function(match) {\r\n                return d.label.toLowerCase().indexOf(match) !== -1;\r\n              });\r\n            });\r\n            if (!dev && devices.length && matches.indexOf('back') !== -1) {\r\n              dev = devices[devices.length - 1]; // more likely the back cam\r\n            }\r\n            if (dev) {\r\n              constraints.video.deviceId = face.exact ? {exact: dev.deviceId} :\r\n                                                        {ideal: dev.deviceId};\r\n            }\r\n            constraints.video = constraintsToChrome_(constraints.video);\r\n            logging('chrome: ' + JSON.stringify(constraints));\r\n            return func(constraints);\r\n          });\r\n        }\r\n      }\r\n      constraints.video = constraintsToChrome_(constraints.video);\r\n    }\r\n    logging('chrome: ' + JSON.stringify(constraints));\r\n    return func(constraints);\r\n  };\r\n\r\n  var shimError_ = function(e) {\r\n    return {\r\n      name: {\r\n        PermissionDeniedError: 'NotAllowedError',\r\n        InvalidStateError: 'NotReadableError',\r\n        DevicesNotFoundError: 'NotFoundError',\r\n        ConstraintNotSatisfiedError: 'OverconstrainedError',\r\n        TrackStartError: 'NotReadableError',\r\n        MediaDeviceFailedDueToShutdown: 'NotReadableError',\r\n        MediaDeviceKillSwitchOn: 'NotReadableError'\r\n      }[e.name] || e.name,\r\n      message: e.message,\r\n      constraint: e.constraintName,\r\n      toString: function() {\r\n        return this.name + (this.message && ': ') + this.message;\r\n      }\r\n    };\r\n  };\r\n\r\n  var getUserMedia_ = function(constraints, onSuccess, onError) {\r\n    shimConstraints_(constraints, function(c) {\r\n      navigator.webkitGetUserMedia(c, onSuccess, function(e) {\r\n        if (onError) {\r\n          onError(shimError_(e));\r\n        }\r\n      });\r\n    });\r\n  };\r\n\r\n  navigator.getUserMedia = getUserMedia_;\r\n\r\n  // Returns the result of getUserMedia as a Promise.\r\n  var getUserMediaPromise_ = function(constraints) {\r\n    return new Promise(function(resolve, reject) {\r\n      navigator.getUserMedia(constraints, resolve, reject);\r\n    });\r\n  };\r\n\r\n  if (!navigator.mediaDevices) {\r\n    navigator.mediaDevices = {\r\n      getUserMedia: getUserMediaPromise_,\r\n      enumerateDevices: function() {\r\n        return new Promise(function(resolve) {\r\n          var kinds = {audio: 'audioinput', video: 'videoinput'};\r\n          return window.MediaStreamTrack.getSources(function(devices) {\r\n            resolve(devices.map(function(device) {\r\n              return {label: device.label,\r\n                kind: kinds[device.kind],\r\n                deviceId: device.id,\r\n                groupId: ''};\r\n            }));\r\n          });\r\n        });\r\n      },\r\n      getSupportedConstraints: function() {\r\n        return {\r\n          deviceId: true, echoCancellation: true, facingMode: true,\r\n          frameRate: true, height: true, width: true\r\n        };\r\n      }\r\n    };\r\n  }\r\n\r\n  // A shim for getUserMedia method on the mediaDevices object.\r\n  // TODO(KaptenJansson) remove once implemented in Chrome stable.\r\n  if (!navigator.mediaDevices.getUserMedia) {\r\n    navigator.mediaDevices.getUserMedia = function(constraints) {\r\n      return getUserMediaPromise_(constraints);\r\n    };\r\n  } else {\r\n    // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia\r\n    // function which returns a Promise, it does not accept spec-style\r\n    // constraints.\r\n    var origGetUserMedia = navigator.mediaDevices.getUserMedia.\r\n        bind(navigator.mediaDevices);\r\n    navigator.mediaDevices.getUserMedia = function(cs) {\r\n      return shimConstraints_(cs, function(c) {\r\n        return origGetUserMedia(c).then(function(stream) {\r\n          if (c.audio && !stream.getAudioTracks().length ||\r\n              c.video && !stream.getVideoTracks().length) {\r\n            stream.getTracks().forEach(function(track) {\r\n              track.stop();\r\n            });\r\n            throw new DOMException('', 'NotFoundError');\r\n          }\r\n          return stream;\r\n        }, function(e) {\r\n          return Promise.reject(shimError_(e));\r\n        });\r\n      });\r\n    };\r\n  }\r\n\r\n  // Dummy devicechange event methods.\r\n  // TODO(KaptenJansson) remove once implemented in Chrome stable.\r\n  if (typeof navigator.mediaDevices.addEventListener === 'undefined') {\r\n    navigator.mediaDevices.addEventListener = function() {\r\n      logging('Dummy mediaDevices.addEventListener called.');\r\n    };\r\n  }\r\n  if (typeof navigator.mediaDevices.removeEventListener === 'undefined') {\r\n    navigator.mediaDevices.removeEventListener = function() {\r\n      logging('Dummy mediaDevices.removeEventListener called.');\r\n    };\r\n  }\r\n};\r\n\r\n},{\"../utils.js\":13}],7:[function(require,module,exports){\r\n/*\r\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\r\n *\r\n *  Use of this source code is governed by a BSD-style license\r\n *  that can be found in the LICENSE file in the root of the source\r\n *  tree.\r\n */\r\n /* eslint-env node */\r\n'use strict';\r\n\r\nvar SDPUtils = require('sdp');\r\nvar utils = require('./utils');\r\n\r\n// Wraps the peerconnection event eventNameToWrap in a function\r\n// which returns the modified event object.\r\nfunction wrapPeerConnectionEvent(window, eventNameToWrap, wrapper) {\r\n  if (!window.RTCPeerConnection) {\r\n    return;\r\n  }\r\n  var proto = window.RTCPeerConnection.prototype;\r\n  var nativeAddEventListener = proto.addEventListener;\r\n  proto.addEventListener = function(nativeEventName, cb) {\r\n    if (nativeEventName !== eventNameToWrap) {\r\n      return nativeAddEventListener.apply(this, arguments);\r\n    }\r\n    var wrappedCallback = function(e) {\r\n      cb(wrapper(e));\r\n    };\r\n    this._eventMap = this._eventMap || {};\r\n    this._eventMap[cb] = wrappedCallback;\r\n    return nativeAddEventListener.apply(this, [nativeEventName,\r\n      wrappedCallback]);\r\n  };\r\n\r\n  var nativeRemoveEventListener = proto.removeEventListener;\r\n  proto.removeEventListener = function(nativeEventName, cb) {\r\n    if (nativeEventName !== eventNameToWrap || !this._eventMap\r\n        || !this._eventMap[cb]) {\r\n      return nativeRemoveEventListener.apply(this, arguments);\r\n    }\r\n    var unwrappedCb = this._eventMap[cb];\r\n    delete this._eventMap[cb];\r\n    return nativeRemoveEventListener.apply(this, [nativeEventName,\r\n      unwrappedCb]);\r\n  };\r\n\r\n  Object.defineProperty(proto, 'on' + eventNameToWrap, {\r\n    get: function() {\r\n      return this['_on' + eventNameToWrap];\r\n    },\r\n    set: function(cb) {\r\n      if (this['_on' + eventNameToWrap]) {\r\n        this.removeEventListener(eventNameToWrap,\r\n            this['_on' + eventNameToWrap]);\r\n        delete this['_on' + eventNameToWrap];\r\n      }\r\n      if (cb) {\r\n        this.addEventListener(eventNameToWrap,\r\n            this['_on' + eventNameToWrap] = cb);\r\n      }\r\n    }\r\n  });\r\n}\r\n\r\nmodule.exports = {\r\n  shimRTCIceCandidate: function(window) {\r\n    // foundation is arbitrarily chosen as an indicator for full support for\r\n    // https://w3c.github.io/webrtc-pc/#rtcicecandidate-interface\r\n    if (window.RTCIceCandidate && 'foundation' in\r\n        window.RTCIceCandidate.prototype) {\r\n      return;\r\n    }\r\n\r\n    var NativeRTCIceCandidate = window.RTCIceCandidate;\r\n    window.RTCIceCandidate = function(args) {\r\n      // Remove the a= which shouldn't be part of the candidate string.\r\n      if (typeof args === 'object' && args.candidate &&\r\n          args.candidate.indexOf('a=') === 0) {\r\n        args = JSON.parse(JSON.stringify(args));\r\n        args.candidate = args.candidate.substr(2);\r\n      }\r\n\r\n      // Augment the native candidate with the parsed fields.\r\n      var nativeCandidate = new NativeRTCIceCandidate(args);\r\n      var parsedCandidate = SDPUtils.parseCandidate(args.candidate);\r\n      var augmentedCandidate = Object.assign(nativeCandidate,\r\n          parsedCandidate);\r\n\r\n      // Add a serializer that does not serialize the extra attributes.\r\n      augmentedCandidate.toJSON = function() {\r\n        return {\r\n          candidate: augmentedCandidate.candidate,\r\n          sdpMid: augmentedCandidate.sdpMid,\r\n          sdpMLineIndex: augmentedCandidate.sdpMLineIndex,\r\n          usernameFragment: augmentedCandidate.usernameFragment,\r\n        };\r\n      };\r\n      return augmentedCandidate;\r\n    };\r\n\r\n    // Hook up the augmented candidate in onicecandidate and\r\n    // addEventListener('icecandidate', ...)\r\n    wrapPeerConnectionEvent(window, 'icecandidate', function(e) {\r\n      if (e.candidate) {\r\n        Object.defineProperty(e, 'candidate', {\r\n          value: new window.RTCIceCandidate(e.candidate),\r\n          writable: 'false'\r\n        });\r\n      }\r\n      return e;\r\n    });\r\n  },\r\n\r\n  // shimCreateObjectURL must be called before shimSourceObject to avoid loop.\r\n\r\n  shimCreateObjectURL: function(window) {\r\n    var URL = window && window.URL;\r\n\r\n    if (!(typeof window === 'object' && window.HTMLMediaElement &&\r\n          'srcObject' in window.HTMLMediaElement.prototype &&\r\n        URL.createObjectURL && URL.revokeObjectURL)) {\r\n      // Only shim CreateObjectURL using srcObject if srcObject exists.\r\n      return undefined;\r\n    }\r\n\r\n    var nativeCreateObjectURL = URL.createObjectURL.bind(URL);\r\n    var nativeRevokeObjectURL = URL.revokeObjectURL.bind(URL);\r\n    var streams = new Map(), newId = 0;\r\n\r\n    URL.createObjectURL = function(stream) {\r\n      if ('getTracks' in stream) {\r\n        var url = 'polyblob:' + (++newId);\r\n        streams.set(url, stream);\r\n        utils.deprecated('URL.createObjectURL(stream)',\r\n            'elem.srcObject = stream');\r\n        return url;\r\n      }\r\n      return nativeCreateObjectURL(stream);\r\n    };\r\n    URL.revokeObjectURL = function(url) {\r\n      nativeRevokeObjectURL(url);\r\n      streams.delete(url);\r\n    };\r\n\r\n    var dsc = Object.getOwnPropertyDescriptor(window.HTMLMediaElement.prototype,\r\n                                              'src');\r\n    Object.defineProperty(window.HTMLMediaElement.prototype, 'src', {\r\n      get: function() {\r\n        return dsc.get.apply(this);\r\n      },\r\n      set: function(url) {\r\n        this.srcObject = streams.get(url) || null;\r\n        return dsc.set.apply(this, [url]);\r\n      }\r\n    });\r\n\r\n    var nativeSetAttribute = window.HTMLMediaElement.prototype.setAttribute;\r\n    window.HTMLMediaElement.prototype.setAttribute = function() {\r\n      if (arguments.length === 2 &&\r\n          ('' + arguments[0]).toLowerCase() === 'src') {\r\n        this.srcObject = streams.get(arguments[1]) || null;\r\n      }\r\n      return nativeSetAttribute.apply(this, arguments);\r\n    };\r\n  }\r\n};\r\n\r\n},{\"./utils\":13,\"sdp\":2}],8:[function(require,module,exports){\r\n/*\r\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\r\n *\r\n *  Use of this source code is governed by a BSD-style license\r\n *  that can be found in the LICENSE file in the root of the source\r\n *  tree.\r\n */\r\n /* eslint-env node */\r\n'use strict';\r\n\r\nvar utils = require('../utils');\r\nvar shimRTCPeerConnection = require('rtcpeerconnection-shim');\r\n\r\nmodule.exports = {\r\n  shimGetUserMedia: require('./getusermedia'),\r\n  shimPeerConnection: function(window) {\r\n    var browserDetails = utils.detectBrowser(window);\r\n\r\n    if (window.RTCIceGatherer) {\r\n      // ORTC defines an RTCIceCandidate object but no constructor.\r\n      // Not implemented in Edge.\r\n      if (!window.RTCIceCandidate) {\r\n        window.RTCIceCandidate = function(args) {\r\n          return args;\r\n        };\r\n      }\r\n      // ORTC does not have a session description object but\r\n      // other browsers (i.e. Chrome) that will support both PC and ORTC\r\n      // in the future might have this defined already.\r\n      if (!window.RTCSessionDescription) {\r\n        window.RTCSessionDescription = function(args) {\r\n          return args;\r\n        };\r\n      }\r\n      // this adds an additional event listener to MediaStrackTrack that signals\r\n      // when a tracks enabled property was changed. Workaround for a bug in\r\n      // addStream, see below. No longer required in 15025+\r\n      if (browserDetails.version < 15025) {\r\n        var origMSTEnabled = Object.getOwnPropertyDescriptor(\r\n            window.MediaStreamTrack.prototype, 'enabled');\r\n        Object.defineProperty(window.MediaStreamTrack.prototype, 'enabled', {\r\n          set: function(value) {\r\n            origMSTEnabled.set.call(this, value);\r\n            var ev = new Event('enabled');\r\n            ev.enabled = value;\r\n            this.dispatchEvent(ev);\r\n          }\r\n        });\r\n      }\r\n    }\r\n\r\n    // ORTC defines the DTMF sender a bit different.\r\n    // https://github.com/w3c/ortc/issues/714\r\n    if (window.RTCRtpSender && !('dtmf' in window.RTCRtpSender.prototype)) {\r\n      Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\r\n        get: function() {\r\n          if (this._dtmf === undefined) {\r\n            if (this.track.kind === 'audio') {\r\n              this._dtmf = new window.RTCDtmfSender(this);\r\n            } else if (this.track.kind === 'video') {\r\n              this._dtmf = null;\r\n            }\r\n          }\r\n          return this._dtmf;\r\n        }\r\n      });\r\n    }\r\n\r\n    window.RTCPeerConnection =\r\n        shimRTCPeerConnection(window, browserDetails.version);\r\n  },\r\n  shimReplaceTrack: function(window) {\r\n    // ORTC has replaceTrack -- https://github.com/w3c/ortc/issues/614\r\n    if (window.RTCRtpSender &&\r\n        !('replaceTrack' in window.RTCRtpSender.prototype)) {\r\n      window.RTCRtpSender.prototype.replaceTrack =\r\n          window.RTCRtpSender.prototype.setTrack;\r\n    }\r\n  }\r\n};\r\n\r\n},{\"../utils\":13,\"./getusermedia\":9,\"rtcpeerconnection-shim\":1}],9:[function(require,module,exports){\r\n/*\r\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\r\n *\r\n *  Use of this source code is governed by a BSD-style license\r\n *  that can be found in the LICENSE file in the root of the source\r\n *  tree.\r\n */\r\n /* eslint-env node */\r\n'use strict';\r\n\r\n// Expose public methods.\r\nmodule.exports = function(window) {\r\n  var navigator = window && window.navigator;\r\n\r\n  var shimError_ = function(e) {\r\n    return {\r\n      name: {PermissionDeniedError: 'NotAllowedError'}[e.name] || e.name,\r\n      message: e.message,\r\n      constraint: e.constraint,\r\n      toString: function() {\r\n        return this.name;\r\n      }\r\n    };\r\n  };\r\n\r\n  // getUserMedia error shim.\r\n  var origGetUserMedia = navigator.mediaDevices.getUserMedia.\r\n      bind(navigator.mediaDevices);\r\n  navigator.mediaDevices.getUserMedia = function(c) {\r\n    return origGetUserMedia(c).catch(function(e) {\r\n      return Promise.reject(shimError_(e));\r\n    });\r\n  };\r\n};\r\n\r\n},{}],10:[function(require,module,exports){\r\n/*\r\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\r\n *\r\n *  Use of this source code is governed by a BSD-style license\r\n *  that can be found in the LICENSE file in the root of the source\r\n *  tree.\r\n */\r\n /* eslint-env node */\r\n'use strict';\r\n\r\nvar utils = require('../utils');\r\n\r\nvar firefoxShim = {\r\n  shimOnTrack: function(window) {\r\n    if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\r\n        window.RTCPeerConnection.prototype)) {\r\n      Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\r\n        get: function() {\r\n          return this._ontrack;\r\n        },\r\n        set: function(f) {\r\n          if (this._ontrack) {\r\n            this.removeEventListener('track', this._ontrack);\r\n            this.removeEventListener('addstream', this._ontrackpoly);\r\n          }\r\n          this.addEventListener('track', this._ontrack = f);\r\n          this.addEventListener('addstream', this._ontrackpoly = function(e) {\r\n            e.stream.getTracks().forEach(function(track) {\r\n              var event = new Event('track');\r\n              event.track = track;\r\n              event.receiver = {track: track};\r\n              event.transceiver = {receiver: event.receiver};\r\n              event.streams = [e.stream];\r\n              this.dispatchEvent(event);\r\n            }.bind(this));\r\n          }.bind(this));\r\n        }\r\n      });\r\n    }\r\n    if (typeof window === 'object' && window.RTCTrackEvent &&\r\n        ('receiver' in window.RTCTrackEvent.prototype) &&\r\n        !('transceiver' in window.RTCTrackEvent.prototype)) {\r\n      Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\r\n        get: function() {\r\n          return {receiver: this.receiver};\r\n        }\r\n      });\r\n    }\r\n  },\r\n\r\n  shimSourceObject: function(window) {\r\n    // Firefox has supported mozSrcObject since FF22, unprefixed in 42.\r\n    if (typeof window === 'object') {\r\n      if (window.HTMLMediaElement &&\r\n        !('srcObject' in window.HTMLMediaElement.prototype)) {\r\n        // Shim the srcObject property, once, when HTMLMediaElement is found.\r\n        Object.defineProperty(window.HTMLMediaElement.prototype, 'srcObject', {\r\n          get: function() {\r\n            return this.mozSrcObject;\r\n          },\r\n          set: function(stream) {\r\n            this.mozSrcObject = stream;\r\n          }\r\n        });\r\n      }\r\n    }\r\n  },\r\n\r\n  shimPeerConnection: function(window) {\r\n    var browserDetails = utils.detectBrowser(window);\r\n\r\n    if (typeof window !== 'object' || !(window.RTCPeerConnection ||\r\n        window.mozRTCPeerConnection)) {\r\n      return; // probably media.peerconnection.enabled=false in about:config\r\n    }\r\n    // The RTCPeerConnection object.\r\n    if (!window.RTCPeerConnection) {\r\n      window.RTCPeerConnection = function(pcConfig, pcConstraints) {\r\n        if (browserDetails.version < 38) {\r\n          // .urls is not supported in FF < 38.\r\n          // create RTCIceServers with a single url.\r\n          if (pcConfig && pcConfig.iceServers) {\r\n            var newIceServers = [];\r\n            for (var i = 0; i < pcConfig.iceServers.length; i++) {\r\n              var server = pcConfig.iceServers[i];\r\n              if (server.hasOwnProperty('urls')) {\r\n                for (var j = 0; j < server.urls.length; j++) {\r\n                  var newServer = {\r\n                    url: server.urls[j]\r\n                  };\r\n                  if (server.urls[j].indexOf('turn') === 0) {\r\n                    newServer.username = server.username;\r\n                    newServer.credential = server.credential;\r\n                  }\r\n                  newIceServers.push(newServer);\r\n                }\r\n              } else {\r\n                newIceServers.push(pcConfig.iceServers[i]);\r\n              }\r\n            }\r\n            pcConfig.iceServers = newIceServers;\r\n          }\r\n        }\r\n        return new window.mozRTCPeerConnection(pcConfig, pcConstraints);\r\n      };\r\n      window.RTCPeerConnection.prototype =\r\n          window.mozRTCPeerConnection.prototype;\r\n\r\n      // wrap static methods. Currently just generateCertificate.\r\n      if (window.mozRTCPeerConnection.generateCertificate) {\r\n        Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\r\n          get: function() {\r\n            return window.mozRTCPeerConnection.generateCertificate;\r\n          }\r\n        });\r\n      }\r\n\r\n      window.RTCSessionDescription = window.mozRTCSessionDescription;\r\n      window.RTCIceCandidate = window.mozRTCIceCandidate;\r\n    }\r\n\r\n    // shim away need for obsolete RTCIceCandidate/RTCSessionDescription.\r\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\r\n        .forEach(function(method) {\r\n          var nativeMethod = window.RTCPeerConnection.prototype[method];\r\n          window.RTCPeerConnection.prototype[method] = function() {\r\n            arguments[0] = new ((method === 'addIceCandidate') ?\r\n                window.RTCIceCandidate :\r\n                window.RTCSessionDescription)(arguments[0]);\r\n            return nativeMethod.apply(this, arguments);\r\n          };\r\n        });\r\n\r\n    // support for addIceCandidate(null or undefined)\r\n    var nativeAddIceCandidate =\r\n        window.RTCPeerConnection.prototype.addIceCandidate;\r\n    window.RTCPeerConnection.prototype.addIceCandidate = function() {\r\n      if (!arguments[0]) {\r\n        if (arguments[1]) {\r\n          arguments[1].apply(null);\r\n        }\r\n        return Promise.resolve();\r\n      }\r\n      return nativeAddIceCandidate.apply(this, arguments);\r\n    };\r\n\r\n    // shim getStats with maplike support\r\n    var makeMapStats = function(stats) {\r\n      var map = new Map();\r\n      Object.keys(stats).forEach(function(key) {\r\n        map.set(key, stats[key]);\r\n        map[key] = stats[key];\r\n      });\r\n      return map;\r\n    };\r\n\r\n    var modernStatsTypes = {\r\n      inboundrtp: 'inbound-rtp',\r\n      outboundrtp: 'outbound-rtp',\r\n      candidatepair: 'candidate-pair',\r\n      localcandidate: 'local-candidate',\r\n      remotecandidate: 'remote-candidate'\r\n    };\r\n\r\n    var nativeGetStats = window.RTCPeerConnection.prototype.getStats;\r\n    window.RTCPeerConnection.prototype.getStats = function(\r\n      selector,\r\n      onSucc,\r\n      onErr\r\n    ) {\r\n      return nativeGetStats.apply(this, [selector || null])\r\n        .then(function(stats) {\r\n          if (browserDetails.version < 48) {\r\n            stats = makeMapStats(stats);\r\n          }\r\n          if (browserDetails.version < 53 && !onSucc) {\r\n            // Shim only promise getStats with spec-hyphens in type names\r\n            // Leave callback version alone; misc old uses of forEach before Map\r\n            try {\r\n              stats.forEach(function(stat) {\r\n                stat.type = modernStatsTypes[stat.type] || stat.type;\r\n              });\r\n            } catch (e) {\r\n              if (e.name !== 'TypeError') {\r\n                throw e;\r\n              }\r\n              // Avoid TypeError: \"type\" is read-only, in old versions. 34-43ish\r\n              stats.forEach(function(stat, i) {\r\n                stats.set(i, Object.assign({}, stat, {\r\n                  type: modernStatsTypes[stat.type] || stat.type\r\n                }));\r\n              });\r\n            }\r\n          }\r\n          return stats;\r\n        })\r\n        .then(onSucc, onErr);\r\n    };\r\n  }\r\n};\r\n\r\n// Expose public methods.\r\nmodule.exports = {\r\n  shimOnTrack: firefoxShim.shimOnTrack,\r\n  shimSourceObject: firefoxShim.shimSourceObject,\r\n  shimPeerConnection: firefoxShim.shimPeerConnection,\r\n  shimGetUserMedia: require('./getusermedia')\r\n};\r\n\r\n},{\"../utils\":13,\"./getusermedia\":11}],11:[function(require,module,exports){\r\n/*\r\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\r\n *\r\n *  Use of this source code is governed by a BSD-style license\r\n *  that can be found in the LICENSE file in the root of the source\r\n *  tree.\r\n */\r\n /* eslint-env node */\r\n'use strict';\r\n\r\nvar utils = require('../utils');\r\nvar logging = utils.log;\r\n\r\n// Expose public methods.\r\nmodule.exports = function(window) {\r\n  var browserDetails = utils.detectBrowser(window);\r\n  var navigator = window && window.navigator;\r\n  var MediaStreamTrack = window && window.MediaStreamTrack;\r\n\r\n  var shimError_ = function(e) {\r\n    return {\r\n      name: {\r\n        InternalError: 'NotReadableError',\r\n        NotSupportedError: 'TypeError',\r\n        PermissionDeniedError: 'NotAllowedError',\r\n        SecurityError: 'NotAllowedError'\r\n      }[e.name] || e.name,\r\n      message: {\r\n        'The operation is insecure.': 'The request is not allowed by the ' +\r\n        'user agent or the platform in the current context.'\r\n      }[e.message] || e.message,\r\n      constraint: e.constraint,\r\n      toString: function() {\r\n        return this.name + (this.message && ': ') + this.message;\r\n      }\r\n    };\r\n  };\r\n\r\n  // getUserMedia constraints shim.\r\n  var getUserMedia_ = function(constraints, onSuccess, onError) {\r\n    var constraintsToFF37_ = function(c) {\r\n      if (typeof c !== 'object' || c.require) {\r\n        return c;\r\n      }\r\n      var require = [];\r\n      Object.keys(c).forEach(function(key) {\r\n        if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\r\n          return;\r\n        }\r\n        var r = c[key] = (typeof c[key] === 'object') ?\r\n            c[key] : {ideal: c[key]};\r\n        if (r.min !== undefined ||\r\n            r.max !== undefined || r.exact !== undefined) {\r\n          require.push(key);\r\n        }\r\n        if (r.exact !== undefined) {\r\n          if (typeof r.exact === 'number') {\r\n            r. min = r.max = r.exact;\r\n          } else {\r\n            c[key] = r.exact;\r\n          }\r\n          delete r.exact;\r\n        }\r\n        if (r.ideal !== undefined) {\r\n          c.advanced = c.advanced || [];\r\n          var oc = {};\r\n          if (typeof r.ideal === 'number') {\r\n            oc[key] = {min: r.ideal, max: r.ideal};\r\n          } else {\r\n            oc[key] = r.ideal;\r\n          }\r\n          c.advanced.push(oc);\r\n          delete r.ideal;\r\n          if (!Object.keys(r).length) {\r\n            delete c[key];\r\n          }\r\n        }\r\n      });\r\n      if (require.length) {\r\n        c.require = require;\r\n      }\r\n      return c;\r\n    };\r\n    constraints = JSON.parse(JSON.stringify(constraints));\r\n    if (browserDetails.version < 38) {\r\n      logging('spec: ' + JSON.stringify(constraints));\r\n      if (constraints.audio) {\r\n        constraints.audio = constraintsToFF37_(constraints.audio);\r\n      }\r\n      if (constraints.video) {\r\n        constraints.video = constraintsToFF37_(constraints.video);\r\n      }\r\n      logging('ff37: ' + JSON.stringify(constraints));\r\n    }\r\n    return navigator.mozGetUserMedia(constraints, onSuccess, function(e) {\r\n      onError(shimError_(e));\r\n    });\r\n  };\r\n\r\n  // Returns the result of getUserMedia as a Promise.\r\n  var getUserMediaPromise_ = function(constraints) {\r\n    return new Promise(function(resolve, reject) {\r\n      getUserMedia_(constraints, resolve, reject);\r\n    });\r\n  };\r\n\r\n  // Shim for mediaDevices on older versions.\r\n  if (!navigator.mediaDevices) {\r\n    navigator.mediaDevices = {getUserMedia: getUserMediaPromise_,\r\n      addEventListener: function() { },\r\n      removeEventListener: function() { }\r\n    };\r\n  }\r\n  navigator.mediaDevices.enumerateDevices =\r\n      navigator.mediaDevices.enumerateDevices || function() {\r\n        return new Promise(function(resolve) {\r\n          var infos = [\r\n            {kind: 'audioinput', deviceId: 'default', label: '', groupId: ''},\r\n            {kind: 'videoinput', deviceId: 'default', label: '', groupId: ''}\r\n          ];\r\n          resolve(infos);\r\n        });\r\n      };\r\n\r\n  if (browserDetails.version < 41) {\r\n    // Work around http://bugzil.la/1169665\r\n    var orgEnumerateDevices =\r\n        navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);\r\n    navigator.mediaDevices.enumerateDevices = function() {\r\n      return orgEnumerateDevices().then(undefined, function(e) {\r\n        if (e.name === 'NotFoundError') {\r\n          return [];\r\n        }\r\n        throw e;\r\n      });\r\n    };\r\n  }\r\n  if (browserDetails.version < 49) {\r\n    var origGetUserMedia = navigator.mediaDevices.getUserMedia.\r\n        bind(navigator.mediaDevices);\r\n    navigator.mediaDevices.getUserMedia = function(c) {\r\n      return origGetUserMedia(c).then(function(stream) {\r\n        // Work around https://bugzil.la/802326\r\n        if (c.audio && !stream.getAudioTracks().length ||\r\n            c.video && !stream.getVideoTracks().length) {\r\n          stream.getTracks().forEach(function(track) {\r\n            track.stop();\r\n          });\r\n          throw new DOMException('The object can not be found here.',\r\n                                 'NotFoundError');\r\n        }\r\n        return stream;\r\n      }, function(e) {\r\n        return Promise.reject(shimError_(e));\r\n      });\r\n    };\r\n  }\r\n  if (!(browserDetails.version > 55 &&\r\n      'autoGainControl' in navigator.mediaDevices.getSupportedConstraints())) {\r\n    var remap = function(obj, a, b) {\r\n      if (a in obj && !(b in obj)) {\r\n        obj[b] = obj[a];\r\n        delete obj[a];\r\n      }\r\n    };\r\n\r\n    var nativeGetUserMedia = navigator.mediaDevices.getUserMedia.\r\n        bind(navigator.mediaDevices);\r\n    navigator.mediaDevices.getUserMedia = function(c) {\r\n      if (typeof c === 'object' && typeof c.audio === 'object') {\r\n        c = JSON.parse(JSON.stringify(c));\r\n        remap(c.audio, 'autoGainControl', 'mozAutoGainControl');\r\n        remap(c.audio, 'noiseSuppression', 'mozNoiseSuppression');\r\n      }\r\n      return nativeGetUserMedia(c);\r\n    };\r\n\r\n    if (MediaStreamTrack && MediaStreamTrack.prototype.getSettings) {\r\n      var nativeGetSettings = MediaStreamTrack.prototype.getSettings;\r\n      MediaStreamTrack.prototype.getSettings = function() {\r\n        var obj = nativeGetSettings.apply(this, arguments);\r\n        remap(obj, 'mozAutoGainControl', 'autoGainControl');\r\n        remap(obj, 'mozNoiseSuppression', 'noiseSuppression');\r\n        return obj;\r\n      };\r\n    }\r\n\r\n    if (MediaStreamTrack && MediaStreamTrack.prototype.applyConstraints) {\r\n      var nativeApplyConstraints = MediaStreamTrack.prototype.applyConstraints;\r\n      MediaStreamTrack.prototype.applyConstraints = function(c) {\r\n        if (this.kind === 'audio' && typeof c === 'object') {\r\n          c = JSON.parse(JSON.stringify(c));\r\n          remap(c, 'autoGainControl', 'mozAutoGainControl');\r\n          remap(c, 'noiseSuppression', 'mozNoiseSuppression');\r\n        }\r\n        return nativeApplyConstraints.apply(this, [c]);\r\n      };\r\n    }\r\n  }\r\n  navigator.getUserMedia = function(constraints, onSuccess, onError) {\r\n    if (browserDetails.version < 44) {\r\n      return getUserMedia_(constraints, onSuccess, onError);\r\n    }\r\n    // Replace Firefox 44+'s deprecation warning with unprefixed version.\r\n    utils.deprecated('navigator.getUserMedia',\r\n        'navigator.mediaDevices.getUserMedia');\r\n    navigator.mediaDevices.getUserMedia(constraints).then(onSuccess, onError);\r\n  };\r\n};\r\n\r\n},{\"../utils\":13}],12:[function(require,module,exports){\r\n/*\r\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\r\n *\r\n *  Use of this source code is governed by a BSD-style license\r\n *  that can be found in the LICENSE file in the root of the source\r\n *  tree.\r\n */\r\n'use strict';\r\nvar utils = require('../utils');\r\n\r\nvar safariShim = {\r\n  // TODO: DrAlex, should be here, double check against LayoutTests\r\n\r\n  // TODO: once the back-end for the mac port is done, add.\r\n  // TODO: check for webkitGTK+\r\n  // shimPeerConnection: function() { },\r\n\r\n  shimLocalStreamsAPI: function(window) {\r\n    if (typeof window !== 'object' || !window.RTCPeerConnection) {\r\n      return;\r\n    }\r\n    if (!('getLocalStreams' in window.RTCPeerConnection.prototype)) {\r\n      window.RTCPeerConnection.prototype.getLocalStreams = function() {\r\n        if (!this._localStreams) {\r\n          this._localStreams = [];\r\n        }\r\n        return this._localStreams;\r\n      };\r\n    }\r\n    if (!('getStreamById' in window.RTCPeerConnection.prototype)) {\r\n      window.RTCPeerConnection.prototype.getStreamById = function(id) {\r\n        var result = null;\r\n        if (this._localStreams) {\r\n          this._localStreams.forEach(function(stream) {\r\n            if (stream.id === id) {\r\n              result = stream;\r\n            }\r\n          });\r\n        }\r\n        if (this._remoteStreams) {\r\n          this._remoteStreams.forEach(function(stream) {\r\n            if (stream.id === id) {\r\n              result = stream;\r\n            }\r\n          });\r\n        }\r\n        return result;\r\n      };\r\n    }\r\n    if (!('addStream' in window.RTCPeerConnection.prototype)) {\r\n      var _addTrack = window.RTCPeerConnection.prototype.addTrack;\r\n      window.RTCPeerConnection.prototype.addStream = function(stream) {\r\n        if (!this._localStreams) {\r\n          this._localStreams = [];\r\n        }\r\n        if (this._localStreams.indexOf(stream) === -1) {\r\n          this._localStreams.push(stream);\r\n        }\r\n        var self = this;\r\n        stream.getTracks().forEach(function(track) {\r\n          _addTrack.call(self, track, stream);\r\n        });\r\n      };\r\n\r\n      window.RTCPeerConnection.prototype.addTrack = function(track, stream) {\r\n        if (stream) {\r\n          if (!this._localStreams) {\r\n            this._localStreams = [stream];\r\n          } else if (this._localStreams.indexOf(stream) === -1) {\r\n            this._localStreams.push(stream);\r\n          }\r\n        }\r\n        _addTrack.call(this, track, stream);\r\n      };\r\n    }\r\n    if (!('removeStream' in window.RTCPeerConnection.prototype)) {\r\n      window.RTCPeerConnection.prototype.removeStream = function(stream) {\r\n        if (!this._localStreams) {\r\n          this._localStreams = [];\r\n        }\r\n        var index = this._localStreams.indexOf(stream);\r\n        if (index === -1) {\r\n          return;\r\n        }\r\n        this._localStreams.splice(index, 1);\r\n        var self = this;\r\n        var tracks = stream.getTracks();\r\n        this.getSenders().forEach(function(sender) {\r\n          if (tracks.indexOf(sender.track) !== -1) {\r\n            self.removeTrack(sender);\r\n          }\r\n        });\r\n      };\r\n    }\r\n  },\r\n  shimRemoteStreamsAPI: function(window) {\r\n    if (typeof window !== 'object' || !window.RTCPeerConnection) {\r\n      return;\r\n    }\r\n    if (!('getRemoteStreams' in window.RTCPeerConnection.prototype)) {\r\n      window.RTCPeerConnection.prototype.getRemoteStreams = function() {\r\n        return this._remoteStreams ? this._remoteStreams : [];\r\n      };\r\n    }\r\n    if (!('onaddstream' in window.RTCPeerConnection.prototype)) {\r\n      Object.defineProperty(window.RTCPeerConnection.prototype, 'onaddstream', {\r\n        get: function() {\r\n          return this._onaddstream;\r\n        },\r\n        set: function(f) {\r\n          if (this._onaddstream) {\r\n            this.removeEventListener('addstream', this._onaddstream);\r\n            this.removeEventListener('track', this._onaddstreampoly);\r\n          }\r\n          this.addEventListener('addstream', this._onaddstream = f);\r\n          this.addEventListener('track', this._onaddstreampoly = function(e) {\r\n            var stream = e.streams[0];\r\n            if (!this._remoteStreams) {\r\n              this._remoteStreams = [];\r\n            }\r\n            if (this._remoteStreams.indexOf(stream) >= 0) {\r\n              return;\r\n            }\r\n            this._remoteStreams.push(stream);\r\n            var event = new Event('addstream');\r\n            event.stream = e.streams[0];\r\n            this.dispatchEvent(event);\r\n          }.bind(this));\r\n        }\r\n      });\r\n    }\r\n  },\r\n  shimCallbacksAPI: function(window) {\r\n    if (typeof window !== 'object' || !window.RTCPeerConnection) {\r\n      return;\r\n    }\r\n    var prototype = window.RTCPeerConnection.prototype;\r\n    var createOffer = prototype.createOffer;\r\n    var createAnswer = prototype.createAnswer;\r\n    var setLocalDescription = prototype.setLocalDescription;\r\n    var setRemoteDescription = prototype.setRemoteDescription;\r\n    var addIceCandidate = prototype.addIceCandidate;\r\n\r\n    prototype.createOffer = function(successCallback, failureCallback) {\r\n      var options = (arguments.length >= 2) ? arguments[2] : arguments[0];\r\n      var promise = createOffer.apply(this, [options]);\r\n      if (!failureCallback) {\r\n        return promise;\r\n      }\r\n      promise.then(successCallback, failureCallback);\r\n      return Promise.resolve();\r\n    };\r\n\r\n    prototype.createAnswer = function(successCallback, failureCallback) {\r\n      var options = (arguments.length >= 2) ? arguments[2] : arguments[0];\r\n      var promise = createAnswer.apply(this, [options]);\r\n      if (!failureCallback) {\r\n        return promise;\r\n      }\r\n      promise.then(successCallback, failureCallback);\r\n      return Promise.resolve();\r\n    };\r\n\r\n    var withCallback = function(description, successCallback, failureCallback) {\r\n      var promise = setLocalDescription.apply(this, [description]);\r\n      if (!failureCallback) {\r\n        return promise;\r\n      }\r\n      promise.then(successCallback, failureCallback);\r\n      return Promise.resolve();\r\n    };\r\n    prototype.setLocalDescription = withCallback;\r\n\r\n    withCallback = function(description, successCallback, failureCallback) {\r\n      var promise = setRemoteDescription.apply(this, [description]);\r\n      if (!failureCallback) {\r\n        return promise;\r\n      }\r\n      promise.then(successCallback, failureCallback);\r\n      return Promise.resolve();\r\n    };\r\n    prototype.setRemoteDescription = withCallback;\r\n\r\n    withCallback = function(candidate, successCallback, failureCallback) {\r\n      var promise = addIceCandidate.apply(this, [candidate]);\r\n      if (!failureCallback) {\r\n        return promise;\r\n      }\r\n      promise.then(successCallback, failureCallback);\r\n      return Promise.resolve();\r\n    };\r\n    prototype.addIceCandidate = withCallback;\r\n  },\r\n  shimGetUserMedia: function(window) {\r\n    var navigator = window && window.navigator;\r\n\r\n    if (!navigator.getUserMedia) {\r\n      if (navigator.webkitGetUserMedia) {\r\n        navigator.getUserMedia = navigator.webkitGetUserMedia.bind(navigator);\r\n      } else if (navigator.mediaDevices &&\r\n          navigator.mediaDevices.getUserMedia) {\r\n        navigator.getUserMedia = function(constraints, cb, errcb) {\r\n          navigator.mediaDevices.getUserMedia(constraints)\r\n          .then(cb, errcb);\r\n        }.bind(navigator);\r\n      }\r\n    }\r\n  },\r\n  shimRTCIceServerUrls: function(window) {\r\n    // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\r\n    var OrigPeerConnection = window.RTCPeerConnection;\r\n    window.RTCPeerConnection = function(pcConfig, pcConstraints) {\r\n      if (pcConfig && pcConfig.iceServers) {\r\n        var newIceServers = [];\r\n        for (var i = 0; i < pcConfig.iceServers.length; i++) {\r\n          var server = pcConfig.iceServers[i];\r\n          if (!server.hasOwnProperty('urls') &&\r\n              server.hasOwnProperty('url')) {\r\n            utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\r\n            server = JSON.parse(JSON.stringify(server));\r\n            server.urls = server.url;\r\n            delete server.url;\r\n            newIceServers.push(server);\r\n          } else {\r\n            newIceServers.push(pcConfig.iceServers[i]);\r\n          }\r\n        }\r\n        pcConfig.iceServers = newIceServers;\r\n      }\r\n      return new OrigPeerConnection(pcConfig, pcConstraints);\r\n    };\r\n    window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\r\n    // wrap static methods. Currently just generateCertificate.\r\n    if ('generateCertificate' in window.RTCPeerConnection) {\r\n      Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\r\n        get: function() {\r\n          return OrigPeerConnection.generateCertificate;\r\n        }\r\n      });\r\n    }\r\n  },\r\n  shimTrackEventTransceiver: function(window) {\r\n    // Add event.transceiver member over deprecated event.receiver\r\n    if (typeof window === 'object' && window.RTCPeerConnection &&\r\n        ('receiver' in window.RTCTrackEvent.prototype) &&\r\n        // can't check 'transceiver' in window.RTCTrackEvent.prototype, as it is\r\n        // defined for some reason even when window.RTCTransceiver is not.\r\n        !window.RTCTransceiver) {\r\n      Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\r\n        get: function() {\r\n          return {receiver: this.receiver};\r\n        }\r\n      });\r\n    }\r\n  },\r\n\r\n  shimCreateOfferLegacy: function(window) {\r\n    var origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\r\n    window.RTCPeerConnection.prototype.createOffer = function(offerOptions) {\r\n      var pc = this;\r\n      if (offerOptions) {\r\n        var audioTransceiver = pc.getTransceivers().find(function(transceiver) {\r\n          return transceiver.sender.track &&\r\n              transceiver.sender.track.kind === 'audio';\r\n        });\r\n        if (offerOptions.offerToReceiveAudio === false && audioTransceiver) {\r\n          if (audioTransceiver.direction === 'sendrecv') {\r\n            audioTransceiver.setDirection('sendonly');\r\n          } else if (audioTransceiver.direction === 'recvonly') {\r\n            audioTransceiver.setDirection('inactive');\r\n          }\r\n        } else if (offerOptions.offerToReceiveAudio === true &&\r\n            !audioTransceiver) {\r\n          pc.addTransceiver('audio');\r\n        }\r\n\r\n        var videoTransceiver = pc.getTransceivers().find(function(transceiver) {\r\n          return transceiver.sender.track &&\r\n              transceiver.sender.track.kind === 'video';\r\n        });\r\n        if (offerOptions.offerToReceiveVideo === false && videoTransceiver) {\r\n          if (videoTransceiver.direction === 'sendrecv') {\r\n            videoTransceiver.setDirection('sendonly');\r\n          } else if (videoTransceiver.direction === 'recvonly') {\r\n            videoTransceiver.setDirection('inactive');\r\n          }\r\n        } else if (offerOptions.offerToReceiveVideo === true &&\r\n            !videoTransceiver) {\r\n          pc.addTransceiver('video');\r\n        }\r\n      }\r\n      return origCreateOffer.apply(pc, arguments);\r\n    };\r\n  }\r\n};\r\n\r\n// Expose public methods.\r\nmodule.exports = {\r\n  shimCallbacksAPI: safariShim.shimCallbacksAPI,\r\n  shimLocalStreamsAPI: safariShim.shimLocalStreamsAPI,\r\n  shimRemoteStreamsAPI: safariShim.shimRemoteStreamsAPI,\r\n  shimGetUserMedia: safariShim.shimGetUserMedia,\r\n  shimRTCIceServerUrls: safariShim.shimRTCIceServerUrls,\r\n  shimTrackEventTransceiver: safariShim.shimTrackEventTransceiver,\r\n  shimCreateOfferLegacy: safariShim.shimCreateOfferLegacy\r\n  // TODO\r\n  // shimPeerConnection: safariShim.shimPeerConnection\r\n};\r\n\r\n},{\"../utils\":13}],13:[function(require,module,exports){\r\n/*\r\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\r\n *\r\n *  Use of this source code is governed by a BSD-style license\r\n *  that can be found in the LICENSE file in the root of the source\r\n *  tree.\r\n */\r\n /* eslint-env node */\r\n'use strict';\r\n\r\nvar logDisabled_ = true;\r\nvar deprecationWarnings_ = true;\r\n\r\n// Utility methods.\r\nvar utils = {\r\n  disableLog: function(bool) {\r\n    if (typeof bool !== 'boolean') {\r\n      return new Error('Argument type: ' + typeof bool +\r\n          '. Please use a boolean.');\r\n    }\r\n    logDisabled_ = bool;\r\n    return (bool) ? 'adapter.js logging disabled' :\r\n        'adapter.js logging enabled';\r\n  },\r\n\r\n  /**\r\n   * Disable or enable deprecation warnings\r\n   * @param {!boolean} bool set to true to disable warnings.\r\n   */\r\n  disableWarnings: function(bool) {\r\n    if (typeof bool !== 'boolean') {\r\n      return new Error('Argument type: ' + typeof bool +\r\n          '. Please use a boolean.');\r\n    }\r\n    deprecationWarnings_ = !bool;\r\n    return 'adapter.js deprecation warnings ' + (bool ? 'disabled' : 'enabled');\r\n  },\r\n\r\n  log: function() {\r\n    if (typeof window === 'object') {\r\n      if (logDisabled_) {\r\n        return;\r\n      }\r\n      if (typeof console !== 'undefined' && typeof console.log === 'function') {\r\n        console.log.apply(console, arguments);\r\n      }\r\n    }\r\n  },\r\n\r\n  /**\r\n   * Shows a deprecation warning suggesting the modern and spec-compatible API.\r\n   */\r\n  deprecated: function(oldMethod, newMethod) {\r\n    if (!deprecationWarnings_) {\r\n      return;\r\n    }\r\n    console.warn(oldMethod + ' is deprecated, please use ' + newMethod +\r\n        ' instead.');\r\n  },\r\n\r\n  /**\r\n   * Extract browser version out of the provided user agent string.\r\n   *\r\n   * @param {!string} uastring userAgent string.\r\n   * @param {!string} expr Regular expression used as match criteria.\r\n   * @param {!number} pos position in the version string to be returned.\r\n   * @return {!number} browser version.\r\n   */\r\n  extractVersion: function(uastring, expr, pos) {\r\n    var match = uastring.match(expr);\r\n    return match && match.length >= pos && parseInt(match[pos], 10);\r\n  },\r\n\r\n  /**\r\n   * Browser detector.\r\n   *\r\n   * @return {object} result containing browser and version\r\n   *     properties.\r\n   */\r\n  detectBrowser: function(window) {\r\n    var navigator = window && window.navigator;\r\n\r\n    // Returned result object.\r\n    var result = {};\r\n    result.browser = null;\r\n    result.version = null;\r\n\r\n    // Fail early if it's not a browser\r\n    if (typeof window === 'undefined' || !window.navigator) {\r\n      result.browser = 'Not a browser.';\r\n      return result;\r\n    }\r\n\r\n    // Firefox.\r\n    if (navigator.mozGetUserMedia) {\r\n      result.browser = 'firefox';\r\n      result.version = this.extractVersion(navigator.userAgent,\r\n          /Firefox\\/(\\d+)\\./, 1);\r\n    } else if (navigator.webkitGetUserMedia) {\r\n      // Chrome, Chromium, Webview, Opera, all use the chrome shim for now\r\n      if (window.webkitRTCPeerConnection) {\r\n        result.browser = 'chrome';\r\n        result.version = this.extractVersion(navigator.userAgent,\r\n          /Chrom(e|ium)\\/(\\d+)\\./, 2);\r\n      } else { // Safari (in an unpublished version) or unknown webkit-based.\r\n        if (navigator.userAgent.match(/Version\\/(\\d+).(\\d+)/)) {\r\n          result.browser = 'safari';\r\n          result.version = this.extractVersion(navigator.userAgent,\r\n            /AppleWebKit\\/(\\d+)\\./, 1);\r\n        } else { // unknown webkit-based browser.\r\n          result.browser = 'Unsupported webkit-based browser ' +\r\n              'with GUM support but no WebRTC support.';\r\n          return result;\r\n        }\r\n      }\r\n    } else if (navigator.mediaDevices &&\r\n        navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/)) { // Edge.\r\n      result.browser = 'edge';\r\n      result.version = this.extractVersion(navigator.userAgent,\r\n          /Edge\\/(\\d+).(\\d+)$/, 2);\r\n    } else if (navigator.mediaDevices &&\r\n        navigator.userAgent.match(/AppleWebKit\\/(\\d+)\\./)) {\r\n        // Safari, with webkitGetUserMedia removed.\r\n      result.browser = 'safari';\r\n      result.version = this.extractVersion(navigator.userAgent,\r\n          /AppleWebKit\\/(\\d+)\\./, 1);\r\n    } else { // Default fallthrough: not supported.\r\n      result.browser = 'Not a supported browser.';\r\n      return result;\r\n    }\r\n\r\n    return result;\r\n  },\r\n\r\n};\r\n\r\n// Export.\r\nmodule.exports = {\r\n  log: utils.log,\r\n  deprecated: utils.deprecated,\r\n  disableLog: utils.disableLog,\r\n  disableWarnings: utils.disableWarnings,\r\n  extractVersion: utils.extractVersion,\r\n  shimCreateObjectURL: utils.shimCreateObjectURL,\r\n  detectBrowser: utils.detectBrowser.bind(utils)\r\n};\r\n\r\n},{}]},{},[3])(3)\r\n});\r\n","require(\"!!C:\\\\workspace\\\\www\\\\licode\\\\node_modules\\\\script-loader\\\\addScript.js\")(require(\"!!C:\\\\workspace\\\\www\\\\licode\\\\node_modules\\\\raw-loader\\\\index.js!C:\\\\workspace\\\\www\\\\licode\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js??ref--4!C:\\\\workspace\\\\www\\\\licode\\\\erizo_controller\\\\erizoClient\\\\src\\\\utils\\\\L.Resizer.js\"))","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\nmodule.exports = function(src) {\n\tfunction log(error) {\n\t\t(typeof console !== \"undefined\")\n\t\t&& (console.error || console.log)(\"[Script Loader]\", error);\n\t}\n\n\t// Check for IE =< 8\n\tfunction isIE() {\n\t\treturn typeof attachEvent !== \"undefined\" && typeof addEventListener === \"undefined\";\n\t}\n\n\ttry {\n\t\tif (typeof execScript !== \"undefined\" && isIE()) {\n\t\t\texecScript(src);\n\t\t} else if (typeof eval !== \"undefined\") {\n\t\t\teval.call(null, src);\n\t\t} else {\n\t\t\tlog(\"EvalError: No eval function available\");\n\t\t}\n\t} catch (error) {\n\t\tlog(error);\n\t}\n}\n","module.exports = \"/* globals $$, jQuery, Elements, document, window, L */\\n\\n/**\\r\\n* Copyright 2013 Marc J. Schmidt. See the LICENSE file at the top-level\\r\\n* directory of this distribution and at\\r\\n* https://github.com/marcj/css-element-queries/blob/master/LICENSE.\\r\\n*/\\nthis.L = this.L || {};\\n/**\\r\\n * @param {HTMLElement} element\\r\\n * @param {String}      prop\\r\\n * @returns {String|Number}\\r\\n */\\n\\nL.GetComputedStyle = function (computedElement, prop) {\\n  if (computedElement.currentStyle) {\\n    return computedElement.currentStyle[prop];\\n  } else if (window.getComputedStyle) {\\n    return window.getComputedStyle(computedElement, null).getPropertyValue(prop);\\n  }\\n\\n  return computedElement.style[prop];\\n};\\n/**\\r\\n *\\r\\n * @type {Function}\\r\\n * @constructor\\r\\n */\\n\\n\\nL.ElementQueries = function ElementQueries() {\\n  /**\\r\\n   *\\r\\n   * @param element\\r\\n   * @returns {Number}\\r\\n   */\\n  function getEmSize() {\\n    var element = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : document.documentElement;\\n    var fontSize = L.GetComputedStyle(element, 'fontSize');\\n    return parseFloat(fontSize) || 16;\\n  }\\n  /**\\r\\n   *\\r\\n   * @copyright https://github.com/Mr0grog/element-query/blob/master/LICENSE\\r\\n   *\\r\\n   * @param element\\r\\n   * @param value\\r\\n   * @param units\\r\\n   * @returns {*}\\r\\n   */\\n\\n\\n  function convertToPx(element, originalValue) {\\n    var vh;\\n    var vw;\\n    var chooser;\\n    var units = originalValue.replace(/[0-9]*/, '');\\n    var value = parseFloat(originalValue);\\n\\n    switch (units) {\\n      case 'px':\\n        return value;\\n\\n      case 'em':\\n        return value * getEmSize(element);\\n\\n      case 'rem':\\n        return value * getEmSize();\\n      // Viewport units!\\n      // According to http://quirksmode.org/mobile/tableViewport.html\\n      // documentElement.clientWidth/Height gets us the most reliable info\\n\\n      case 'vw':\\n        return value * document.documentElement.clientWidth / 100;\\n\\n      case 'vh':\\n        return value * document.documentElement.clientHeight / 100;\\n\\n      case 'vmin':\\n      case 'vmax':\\n        vw = document.documentElement.clientWidth / 100;\\n        vh = document.documentElement.clientHeight / 100;\\n        chooser = Math[units === 'vmin' ? 'min' : 'max'];\\n        return value * chooser(vw, vh);\\n\\n      default:\\n        return value;\\n      // for now, not supporting physical units (since they are just a set number of px)\\n      // or ex/ch (getting accurate measurements is hard)\\n    }\\n  }\\n  /**\\r\\n   *\\r\\n   * @param {HTMLElement} element\\r\\n   * @constructor\\r\\n   */\\n\\n\\n  function SetupInformation(element) {\\n    var _this = this;\\n\\n    this.element = element;\\n    this.options = [];\\n    var i;\\n    var j;\\n    var option;\\n    var width = 0;\\n    var height = 0;\\n    var value;\\n    var actualValue;\\n    var attrValues;\\n    var attrValue;\\n    var attrName;\\n    /**\\r\\n     * @param option {mode: 'min|max', property: 'width|height', value: '123px'}\\r\\n     */\\n\\n    this.addOption = function (newOption) {\\n      _this.options.push(newOption);\\n    };\\n\\n    var attributes = ['min-width', 'min-height', 'max-width', 'max-height'];\\n    /**\\r\\n     * Extracts the computed width/height and sets to min/max- attribute.\\r\\n     */\\n\\n    this.call = function () {\\n      // extract current dimensions\\n      width = _this.element.offsetWidth;\\n      height = _this.element.offsetHeight;\\n      attrValues = {};\\n\\n      for (i = 0, j = _this.options.length; i < j; i += 1) {\\n        option = _this.options[i];\\n        value = convertToPx(_this.element, option.value);\\n        actualValue = option.property === 'width' ? width : height;\\n        attrName = \\\"\\\".concat(option.mode, \\\"-\\\").concat(option.property);\\n        attrValue = '';\\n\\n        if (option.mode === 'min' && actualValue >= value) {\\n          attrValue += option.value;\\n        }\\n\\n        if (option.mode === 'max' && actualValue <= value) {\\n          attrValue += option.value;\\n        }\\n\\n        if (!attrValues[attrName]) attrValues[attrName] = '';\\n\\n        if (attrValue && \\\" \\\".concat(attrValues[attrName], \\\" \\\").indexOf(\\\" \\\".concat(attrValue, \\\" \\\")) === -1) {\\n          attrValues[attrName] += \\\" \\\".concat(attrValue);\\n        }\\n      }\\n\\n      for (var k = 0; k < attributes.length; k += 1) {\\n        if (attrValues[attributes[k]]) {\\n          _this.element.setAttribute(attributes[k], attrValues[attributes[k]].substr(1));\\n        } else {\\n          _this.element.removeAttribute(attributes[k]);\\n        }\\n      }\\n    };\\n  }\\n  /**\\r\\n   * @param {HTMLElement} element\\r\\n   * @param {Object}      options\\r\\n   */\\n\\n\\n  function setupElement(originalElement, options) {\\n    var element = originalElement;\\n\\n    if (element.elementQueriesSetupInformation) {\\n      element.elementQueriesSetupInformation.addOption(options);\\n    } else {\\n      element.elementQueriesSetupInformation = new SetupInformation(element);\\n      element.elementQueriesSetupInformation.addOption(options);\\n      element.sensor = new L.ResizeSensor(element, function () {\\n        element.elementQueriesSetupInformation.call();\\n      });\\n    }\\n\\n    element.elementQueriesSetupInformation.call();\\n    return element;\\n  }\\n  /**\\r\\n   * @param {String} selector\\r\\n   * @param {String} mode min|max\\r\\n   * @param {String} property width|height\\r\\n   * @param {String} value\\r\\n   */\\n\\n\\n  function queueQuery(selector, mode, property, value) {\\n    var query;\\n    if (document.querySelectorAll) query = document.querySelectorAll.bind(document);\\n    if (!query && typeof $$ !== 'undefined') query = $$;\\n    if (!query && typeof jQuery !== 'undefined') query = jQuery;\\n\\n    if (!query) {\\n      throw new Error('No document.querySelectorAll, jQuery or Mootools\\\\'s $$ found.');\\n    }\\n\\n    var elements = query(selector) || [];\\n\\n    for (var i = 0, j = elements.length; i < j; i += 1) {\\n      elements[i] = setupElement(elements[i], {\\n        mode: mode,\\n        property: property,\\n        value: value\\n      });\\n    }\\n  }\\n\\n  var regex = /,?([^,\\\\n]*)\\\\[[\\\\s\\\\t]*(min|max)-(width|height)[\\\\s\\\\t]*[~$^]?=[\\\\s\\\\t]*\\\"([^\\\"]*)\\\"[\\\\s\\\\t]*]([^\\\\n\\\\s{]*)/mgi; // jshint ignore:line\\n\\n  /**\\r\\n   * @param {String} css\\r\\n   */\\n\\n  function extractQuery(originalCss) {\\n    var match;\\n    var css = originalCss.replace(/'/g, '\\\"');\\n\\n    while ((match = regex.exec(css)) !== null) {\\n      if (match.length > 5) {\\n        queueQuery(match[1] || match[5], match[2], match[3], match[4]);\\n      }\\n    }\\n  }\\n  /**\\r\\n   * @param {CssRule[]|String} rules\\r\\n   */\\n\\n\\n  function readRules(originalRules) {\\n    if (!originalRules) {\\n      return;\\n    }\\n\\n    var selector = '';\\n    var rules = originalRules;\\n\\n    if (typeof originalRules === 'string') {\\n      rules = originalRules.toLowerCase();\\n\\n      if (rules.indexOf('min-width') !== -1 || rules.indexOf('max-width') !== -1) {\\n        extractQuery(rules);\\n      }\\n    } else {\\n      for (var i = 0, j = rules.length; i < j; i += 1) {\\n        if (rules[i].type === 1) {\\n          selector = rules[i].selectorText || rules[i].cssText;\\n\\n          if (selector.indexOf('min-height') !== -1 || selector.indexOf('max-height') !== -1) {\\n            extractQuery(selector);\\n          } else if (selector.indexOf('min-width') !== -1 || selector.indexOf('max-width') !== -1) {\\n            extractQuery(selector);\\n          }\\n        } else if (rules[i].type === 4) {\\n          readRules(rules[i].cssRules || rules[i].rules);\\n        }\\n      }\\n    }\\n  }\\n  /**\\r\\n   * Searches all css rules and setups the event listener\\r\\n   * to all elements with element query rules..\\r\\n   */\\n\\n\\n  this.init = function () {\\n    var styleSheets = document.styleSheets || [];\\n\\n    for (var i = 0, j = styleSheets.length; i < j; i += 1) {\\n      if (Object.prototype.hasOwnProperty.call(styleSheets[i], 'cssText')) {\\n        readRules(styleSheets[i].cssText);\\n      } else if (Object.prototype.hasOwnProperty.call(styleSheets[i], 'cssRules')) {\\n        readRules(styleSheets[i].cssRules);\\n      } else if (Object.prototype.hasOwnProperty.call(styleSheets[i], 'rules')) {\\n        readRules(styleSheets[i].rules);\\n      }\\n    }\\n  };\\n};\\n\\nfunction init() {\\n  new L.ElementQueries().init();\\n}\\n\\nif (window.addEventListener) {\\n  window.addEventListener('load', init, false);\\n} else {\\n  window.attachEvent('onload', init);\\n}\\n/**\\r\\n * Iterate over each of the provided element(s).\\r\\n *\\r\\n * @param {HTMLElement|HTMLElement[]} elements\\r\\n * @param {Function}                  callback\\r\\n */\\n\\n\\nfunction forEachElement(elements) {\\n  var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {};\\n  var elementsType = Object.prototype.toString.call(elements);\\n  var isCollectionTyped = elementsType === '[object Array]' || elementsType === '[object NodeList]' || elementsType === '[object HTMLCollection]' || typeof jQuery !== 'undefined' && elements instanceof jQuery || // jquery\\n  typeof Elements !== 'undefined' && elements instanceof Elements // mootools\\n  ;\\n  var i = 0;\\n  var j = elements.length;\\n\\n  if (isCollectionTyped) {\\n    for (; i < j; i += 1) {\\n      callback(elements[i]);\\n    }\\n  } else {\\n    callback(elements);\\n  }\\n}\\n/**\\r\\n * Class for dimension change detection.\\r\\n *\\r\\n * @param {Element|Element[]|Elements|jQuery} element\\r\\n * @param {Function} callback\\r\\n *\\r\\n * @constructor\\r\\n */\\n\\n\\nL.ResizeSensor = function ResizeSensor(element) {\\n  var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {};\\n\\n  /**\\r\\n   *\\r\\n   * @constructor\\r\\n   */\\n  function EventQueue() {\\n    var q = [];\\n\\n    this.add = function (ev) {\\n      q.push(ev);\\n    };\\n\\n    var i;\\n    var j;\\n\\n    this.call = function () {\\n      for (i = 0, j = q.length; i < j; i += 1) {\\n        q[i].call();\\n      }\\n    };\\n\\n    this.remove = function (ev) {\\n      var newQueue = [];\\n\\n      for (i = 0, j = q.length; i < j; i += 1) {\\n        if (q[i] !== ev) newQueue.push(q[i]);\\n      }\\n\\n      q = newQueue;\\n    };\\n\\n    this.length = function () {\\n      return q.length;\\n    };\\n  }\\n  /**\\r\\n   *\\r\\n   * @param {HTMLElement} element\\r\\n   * @param {Function}    resized\\r\\n   */\\n\\n\\n  function attachResizeEvent(htmlElement, resized) {\\n    // Only used for the dirty checking, so the event callback count is limted\\n    //  to max 1 call per fps per sensor.\\n    // In combination with the event based resize sensor this saves cpu time,\\n    // because the sensor is too fast and\\n    // would generate too many unnecessary events.\\n    var customRequestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || function delay(fn) {\\n      return window.setTimeout(fn, 20);\\n    };\\n\\n    var newElement = htmlElement;\\n\\n    if (!newElement.resizedAttached) {\\n      newElement.resizedAttached = new EventQueue();\\n      newElement.resizedAttached.add(resized);\\n    } else if (newElement.resizedAttached) {\\n      newElement.resizedAttached.add(resized);\\n      return;\\n    }\\n\\n    newElement.resizeSensor = document.createElement('div');\\n    newElement.resizeSensor.className = 'resize-sensor';\\n    var style = 'position: absolute; left: 0; top: 0; right: 0; bottom: 0; ' + 'overflow: hidden; z-index: -1; visibility: hidden;';\\n    var styleChild = 'position: absolute; left: 0; top: 0; transition: 0s;';\\n    newElement.resizeSensor.style.cssText = style;\\n    newElement.resizeSensor.innerHTML = \\\"<div class=\\\\\\\"resize-sensor-expand\\\\\\\" style=\\\\\\\"\\\".concat(style, \\\"\\\\\\\">\\\") + \\\"<div style=\\\\\\\"\\\".concat(styleChild, \\\"\\\\\\\"></div>\\\") + '</div>' + \\\"<div class=\\\\\\\"resize-sensor-shrink\\\\\\\" style=\\\\\\\"\\\".concat(style, \\\"\\\\\\\">\\\") + \\\"<div style=\\\\\\\"\\\".concat(styleChild, \\\" width: 200%; height: 200%\\\\\\\"></div>\\\") + '</div>';\\n    newElement.appendChild(newElement.resizeSensor);\\n\\n    if (L.GetComputedStyle(newElement, 'position') === 'static') {\\n      newElement.style.position = 'relative';\\n    }\\n\\n    var expand = newElement.resizeSensor.childNodes[0];\\n    var expandChild = expand.childNodes[0];\\n    var shrink = newElement.resizeSensor.childNodes[1];\\n\\n    var reset = function reset() {\\n      expandChild.style.width = \\\"\\\".concat(100000, \\\"px\\\");\\n      expandChild.style.height = \\\"\\\".concat(100000, \\\"px\\\");\\n      expand.scrollLeft = 100000;\\n      expand.scrollTop = 100000;\\n      shrink.scrollLeft = 100000;\\n      shrink.scrollTop = 100000;\\n    };\\n\\n    reset();\\n    var dirty = false;\\n\\n    var dirtyChecking = function dirtyChecking() {\\n      if (!newElement.resizedAttached) return;\\n\\n      if (dirty) {\\n        newElement.resizedAttached.call();\\n        dirty = false;\\n      }\\n\\n      customRequestAnimationFrame(dirtyChecking);\\n    };\\n\\n    customRequestAnimationFrame(dirtyChecking);\\n    var lastWidth;\\n    var lastHeight;\\n    var cachedWidth;\\n    var cachedHeight; // useful to not query offsetWidth twice\\n\\n    var onScroll = function onScroll() {\\n      if ((cachedWidth = newElement.offsetWidth) !== lastWidth || (cachedHeight = newElement.offsetHeight) !== lastHeight) {\\n        dirty = true;\\n        lastWidth = cachedWidth;\\n        lastHeight = cachedHeight;\\n      }\\n\\n      reset();\\n    };\\n\\n    var addEvent = function addEvent(el, name, cb) {\\n      if (el.attachEvent) {\\n        el.attachEvent(\\\"on\\\".concat(name), cb);\\n      } else {\\n        el.addEventListener(name, cb);\\n      }\\n    };\\n\\n    addEvent(expand, 'scroll', onScroll);\\n    addEvent(shrink, 'scroll', onScroll);\\n  }\\n\\n  forEachElement(element, function (elem) {\\n    attachResizeEvent(elem, callback);\\n  });\\n\\n  this.detach = function (ev) {\\n    L.ResizeSensor.detach(element, ev);\\n  };\\n};\\n\\nL.ResizeSensor.detach = function (element, ev) {\\n  forEachElement(element, function (elem) {\\n    var elementItem = elem;\\n\\n    if (elementItem.resizedAttached && typeof ev === 'function') {\\n      elementItem.resizedAttached.remove(ev);\\n      if (elementItem.resizedAttached.length()) return;\\n    }\\n\\n    if (elementItem.resizeSensor) {\\n      if (elementItem.contains(elementItem.resizeSensor)) {\\n        elementItem.removeChild(elementItem.resizeSensor);\\n      }\\n\\n      delete elementItem.resizeSensor;\\n      delete elementItem.resizedAttached;\\n    }\\n  });\\n};\"","const SdpHelpers = {};\r\n\r\nSdpHelpers.addSim = (spatialLayers) => {\r\n  let line = 'a=ssrc-group:SIM';\r\n  spatialLayers.forEach((spatialLayerId) => {\r\n    line += ` ${spatialLayerId}`;\r\n  });\r\n  return `${line}\\r\\n`;\r\n};\r\n\r\nSdpHelpers.addGroup = (spatialLayerId, spatialLayerIdRtx) =>\r\n  `a=ssrc-group:FID ${spatialLayerId} ${spatialLayerIdRtx}\\r\\n`;\r\n\r\nSdpHelpers.addSpatialLayer = (cname, msid, mslabel,\r\n  label, spatialLayerId, spatialLayerIdRtx) =>\r\n  `a=ssrc:${spatialLayerId} cname:${cname}\\r\\n` +\r\n  `a=ssrc:${spatialLayerId} msid:${msid}\\r\\n` +\r\n  `a=ssrc:${spatialLayerId} mslabel:${mslabel}\\r\\n` +\r\n  `a=ssrc:${spatialLayerId} label:${label}\\r\\n` +\r\n  `a=ssrc:${spatialLayerIdRtx} cname:${cname}\\r\\n` +\r\n  `a=ssrc:${spatialLayerIdRtx} msid:${msid}\\r\\n` +\r\n  `a=ssrc:${spatialLayerIdRtx} mslabel:${mslabel}\\r\\n` +\r\n  `a=ssrc:${spatialLayerIdRtx} label:${label}\\r\\n`;\r\n\r\nSdpHelpers.setMaxBW = (sdp, spec) => {\r\n  if (!spec.p2p) {\r\n    return;\r\n  }\r\n  if (spec.video && spec.maxVideoBW) {\r\n    const video = sdp.getMedia('video');\r\n    if (video) {\r\n      video.setBitrate(spec.maxVideoBW);\r\n    }\r\n  }\r\n\r\n  if (spec.audio && spec.maxAudioBW) {\r\n    const audio = sdp.getMedia('audio');\r\n    if (audio) {\r\n      audio.setBitrate(spec.maxAudioBW);\r\n    }\r\n  }\r\n};\r\n\r\nSdpHelpers.enableOpusNacks = (sdpInput) => {\r\n  let sdp = sdpInput;\r\n  const sdpMatch = sdp.match(/a=rtpmap:(.*)opus.*\\r\\n/);\r\n  if (sdpMatch !== null) {\r\n    const theLine = `${sdpMatch[0]}a=rtcp-fb:${sdpMatch[1]}nack\\r\\n`;\r\n    sdp = sdp.replace(sdpMatch[0], theLine);\r\n  }\r\n\r\n  return sdp;\r\n};\r\n\r\nSdpHelpers.setParamForCodecs = (sdpInfo, mediaType, paramName, value) => {\r\n  sdpInfo.medias.forEach((mediaInfo) => {\r\n    if (mediaInfo.id === mediaType) {\r\n      mediaInfo.codecs.forEach((codec) => {\r\n        codec.setParam(paramName, value);\r\n      });\r\n    }\r\n  });\r\n};\r\n\r\nexport default SdpHelpers;\r\n","/* global RTCSessionDescription, RTCIceCandidate, RTCPeerConnection */\r\n// eslint-disable-next-line\r\nimport SemanticSdp from '../../../common/semanticSdp/SemanticSdp';\r\n\r\nimport SdpHelpers from '../utils/SdpHelpers';\r\nimport Logger from '../utils/Logger';\r\n\r\nconst BaseStack = (specInput) => {\r\n  const that = {};\r\n  const specBase = specInput;\r\n  const offerQueue = [];\r\n  let localDesc;\r\n  let remoteDesc;\r\n  let localSdp;\r\n  let remoteSdp;\r\n  let processOffer;\r\n  let isNegotiating = false;\r\n  let latestSessionVersion = -1;\r\n\r\n  Logger.info('Starting Base stack', specBase);\r\n\r\n  that.pcConfig = {\r\n    iceServers: [],\r\n  };\r\n\r\n  that.con = {};\r\n  if (specBase.iceServers !== undefined) {\r\n    that.pcConfig.iceServers = specBase.iceServers;\r\n  }\r\n  if (specBase.forceTurn === true) {\r\n    that.pcConfig.iceTransportPolicy = 'relay';\r\n  }\r\n  that.audio = specBase.audio;\r\n  that.video = specBase.video;\r\n  if (that.audio === undefined) {\r\n    that.audio = true;\r\n  }\r\n  if (that.video === undefined) {\r\n    that.video = true;\r\n  }\r\n  specBase.remoteCandidates = [];\r\n  specBase.localCandidates = [];\r\n  specBase.remoteDescriptionSet = false;\r\n\r\n  that.mediaConstraints = {\r\n    offerToReceiveVideo: (that.video !== undefined && that.video !== false),\r\n    offerToReceiveAudio: (that.audio !== undefined && that.audio !== false),\r\n  };\r\n\r\n  that.peerConnection = new RTCPeerConnection(that.pcConfig, that.con);\r\n\r\n  // Aux functions\r\n\r\n  const errorCallback = (where, errorcb, message) => {\r\n    Logger.error('message:', message, 'in baseStack at', where);\r\n    if (errorcb !== undefined) {\r\n      errorcb('error');\r\n    }\r\n  };\r\n\r\n  const successCallback = (message) => {\r\n    Logger.info('Success in BaseStack', message);\r\n  };\r\n\r\n  const onIceCandidate = (event) => {\r\n    let candidateObject = {};\r\n    const candidate = event.candidate;\r\n    if (!candidate) {\r\n      Logger.info('Gathered all candidates. Sending END candidate');\r\n      candidateObject = {\r\n        sdpMLineIndex: -1,\r\n        sdpMid: 'end',\r\n        candidate: 'end',\r\n      };\r\n    } else {\r\n      candidateObject = {\r\n        sdpMLineIndex: candidate.sdpMLineIndex,\r\n        sdpMid: candidate.sdpMid,\r\n        candidate: candidate.candidate,\r\n      };\r\n      if (!candidateObject.candidate.match(/a=/)) {\r\n        candidateObject.candidate = `a=${candidateObject.candidate}`;\r\n      }\r\n    }\r\n\r\n    if (specBase.remoteDescriptionSet) {\r\n      specBase.callback({ type: 'candidate', candidate: candidateObject });\r\n    } else {\r\n      specBase.localCandidates.push(candidateObject);\r\n      Logger.info('Storing candidate: ', specBase.localCandidates.length, candidateObject);\r\n    }\r\n  };\r\n\r\n  const checkOfferQueue = () => {\r\n    if (!isNegotiating && offerQueue.length > 0) {\r\n      const args = offerQueue.pop();\r\n      if (args[0] === 'local') {\r\n        that.createOffer(args[1], args[2], args[3]);\r\n      } else {\r\n        processOffer(args[1]);\r\n      }\r\n    }\r\n  };\r\n\r\n  const setLocalDescForOffer = (isSubscribe, streamId, sessionDescription) => {\r\n    localDesc = sessionDescription;\r\n    if (!isSubscribe) {\r\n      localDesc.sdp = that.enableSimulcast(localDesc.sdp);\r\n    }\r\n    localSdp = SemanticSdp.SDPInfo.processString(localDesc.sdp);\r\n    SdpHelpers.setMaxBW(localSdp, specBase);\r\n    localDesc.sdp = localSdp.toString();\r\n    that.localSdp = localSdp;\r\n\r\n    specBase.callback({\r\n      type: localDesc.type,\r\n      sdp: localDesc.sdp,\r\n      config: { maxVideoBW: specBase.maxVideoBW },\r\n    }, streamId);\r\n  };\r\n\r\n  const setLocalDescForAnswer = (sessionDescription) => {\r\n    localDesc = sessionDescription;\r\n    localSdp = SemanticSdp.SDPInfo.processString(localDesc.sdp);\r\n    SdpHelpers.setMaxBW(localSdp, specBase);\r\n    localDesc.sdp = localSdp.toString();\r\n    that.localSdp = localSdp;\r\n    specBase.callback({\r\n      type: localDesc.type,\r\n      sdp: localDesc.sdp,\r\n      config: { maxVideoBW: specBase.maxVideoBW },\r\n    });\r\n    Logger.info('Setting local description', localDesc);\r\n    that.peerConnection.setLocalDescription(localDesc).then(() => {\r\n      isNegotiating = false;\r\n      checkOfferQueue();\r\n      successCallback();\r\n    }).catch(errorCallback);\r\n  };\r\n\r\n  processOffer = (message) => {\r\n    const msg = message;\r\n    if (isNegotiating) {\r\n      offerQueue.push(['remote', message]);\r\n      return;\r\n    }\r\n    isNegotiating = true;\r\n    remoteSdp = SemanticSdp.SDPInfo.processString(msg.sdp);\r\n    SdpHelpers.setMaxBW(remoteSdp, specBase);\r\n    msg.sdp = remoteSdp.toString();\r\n    that.remoteSdp = remoteSdp;\r\n    that.peerConnection.setRemoteDescription(msg).then(() => {\r\n      that.peerConnection.createAnswer(that.mediaConstraints)\r\n      .then(setLocalDescForAnswer)\r\n      .catch(errorCallback.bind(null, 'createAnswer', undefined));\r\n      specBase.remoteDescriptionSet = true;\r\n    }).catch(errorCallback.bind(null, 'process Offer', undefined));\r\n  };\r\n\r\n  const processAnswer = (message) => {\r\n    const msg = message;\r\n\r\n    remoteSdp = SemanticSdp.SDPInfo.processString(msg.sdp);\r\n    const sessionVersion = remoteSdp && remoteSdp.origin && remoteSdp.origin.sessionVersion;\r\n    if (latestSessionVersion >= sessionVersion) {\r\n      return;\r\n    }\r\n    Logger.info('Set remote and local description');\r\n    latestSessionVersion = sessionVersion;\r\n\r\n    SdpHelpers.setMaxBW(remoteSdp, specBase);\r\n    that.setStartVideoBW(remoteSdp);\r\n    that.setHardMinVideoBW(remoteSdp);\r\n\r\n    msg.sdp = remoteSdp.toString();\r\n    Logger.debug('Remote Description', msg.sdp);\r\n    Logger.debug('Local Description', localDesc.sdp);\r\n    that.remoteSdp = remoteSdp;\r\n\r\n    remoteDesc = msg;\r\n    that.peerConnection.setLocalDescription(localDesc).then(() => {\r\n      that.peerConnection.setRemoteDescription(new RTCSessionDescription(msg)).then(() => {\r\n        specBase.remoteDescriptionSet = true;\r\n        Logger.info('Candidates to be added: ', specBase.remoteCandidates.length,\r\n                      specBase.remoteCandidates);\r\n        while (specBase.remoteCandidates.length > 0) {\r\n          // IMPORTANT: preserve ordering of candidates\r\n          that.peerConnection.addIceCandidate(specBase.remoteCandidates.shift());\r\n        }\r\n        Logger.info('Local candidates to send:', specBase.localCandidates.length);\r\n        while (specBase.localCandidates.length > 0) {\r\n          // IMPORTANT: preserve ordering of candidates\r\n          specBase.callback({ type: 'candidate', candidate: specBase.localCandidates.shift() });\r\n        }\r\n        isNegotiating = false;\r\n        checkOfferQueue();\r\n      }).catch(errorCallback.bind(null, 'processAnswer', undefined));\r\n    }).catch(errorCallback.bind(null, 'processAnswer', undefined));\r\n  };\r\n\r\n  const processNewCandidate = (message) => {\r\n    const msg = message;\r\n    try {\r\n      let obj;\r\n      if (typeof (msg.candidate) === 'object') {\r\n        obj = msg.candidate;\r\n      } else {\r\n        obj = JSON.parse(msg.candidate);\r\n      }\r\n      if (obj.candidate === 'end') {\r\n        // ignore the end candidate for chrome\r\n        return;\r\n      }\r\n      obj.candidate = obj.candidate.replace(/a=/g, '');\r\n      obj.sdpMLineIndex = parseInt(obj.sdpMLineIndex, 10);\r\n      const candidate = new RTCIceCandidate(obj);\r\n      if (specBase.remoteDescriptionSet) {\r\n        that.peerConnection.addIceCandidate(candidate);\r\n      } else {\r\n        specBase.remoteCandidates.push(candidate);\r\n      }\r\n    } catch (e) {\r\n      Logger.error('Error parsing candidate', msg.candidate);\r\n    }\r\n  };\r\n\r\n  // Peerconnection events\r\n\r\n  that.peerConnection.onicecandidate = onIceCandidate;\r\n  // public functions\r\n\r\n  that.setStartVideoBW = (sdpInput) => {\r\n    Logger.error('startVideoBW not implemented for this browser');\r\n    return sdpInput;\r\n  };\r\n\r\n  that.setHardMinVideoBW = (sdpInput) => {\r\n    Logger.error('hardMinVideoBw not implemented for this browser');\r\n    return sdpInput;\r\n  };\r\n\r\n  that.enableSimulcast = (sdpInput) => {\r\n    Logger.error('Simulcast not implemented');\r\n    return sdpInput;\r\n  };\r\n\r\n  that.close = () => {\r\n    that.state = 'closed';\r\n    that.peerConnection.close();\r\n  };\r\n\r\n  that.setSimulcast = (enable) => {\r\n    that.simulcast = enable;\r\n  };\r\n\r\n  that.setVideo = (video) => {\r\n    that.video = video;\r\n  };\r\n\r\n  that.setAudio = (audio) => {\r\n    that.audio = audio;\r\n  };\r\n\r\n  that.updateSpec = (configInput, streamId, callback = () => {}) => {\r\n    const config = configInput;\r\n    const shouldApplyMaxVideoBWToSdp = specBase.p2p && config.maxVideoBW;\r\n    const shouldSendMaxVideoBWInOptions = !specBase.p2p && config.maxVideoBW;\r\n    if (shouldApplyMaxVideoBWToSdp || config.maxAudioBW) {\r\n      if (config.maxVideoBW) {\r\n        Logger.debug('Maxvideo Requested:', config.maxVideoBW,\r\n                                'limit:', specBase.limitMaxVideoBW);\r\n        if (config.maxVideoBW > specBase.limitMaxVideoBW) {\r\n          config.maxVideoBW = specBase.limitMaxVideoBW;\r\n        }\r\n        specBase.maxVideoBW = config.maxVideoBW;\r\n        Logger.debug('Result', specBase.maxVideoBW);\r\n      }\r\n      if (config.maxAudioBW) {\r\n        if (config.maxAudioBW > specBase.limitMaxAudioBW) {\r\n          config.maxAudioBW = specBase.limitMaxAudioBW;\r\n        }\r\n        specBase.maxAudioBW = config.maxAudioBW;\r\n      }\r\n\r\n      localSdp = SemanticSdp.SDPInfo.processString(localDesc.sdp);\r\n      SdpHelpers.setMaxBW(localSdp, specBase);\r\n      localDesc.sdp = localSdp.toString();\r\n      that.localSdp = localSdp;\r\n\r\n      if (config.Sdp || config.maxAudioBW) {\r\n        Logger.debug('Updating with SDP renegotiation', specBase.maxVideoBW, specBase.maxAudioBW);\r\n        that.peerConnection.setLocalDescription(localDesc)\r\n          .then(() => {\r\n            remoteSdp = SemanticSdp.SDPInfo.processString(remoteDesc.sdp);\r\n            SdpHelpers.setMaxBW(remoteSdp, specBase);\r\n            remoteDesc.sdp = remoteSdp.toString();\r\n            that.remoteSdp = remoteSdp;\r\n            return that.peerConnection.setRemoteDescription(new RTCSessionDescription(remoteDesc));\r\n          }).then(() => {\r\n            specBase.remoteDescriptionSet = true;\r\n            specBase.callback({ type: 'updatestream', sdp: localDesc.sdp }, streamId);\r\n          }).catch(errorCallback.bind(null, 'updateSpec', callback));\r\n      } else {\r\n        Logger.debug('Updating without SDP renegotiation, ' +\r\n                     'newVideoBW:', specBase.maxVideoBW,\r\n                     'newAudioBW:', specBase.maxAudioBW);\r\n        specBase.callback({ type: 'updatestream', sdp: localDesc.sdp }, streamId);\r\n      }\r\n    }\r\n    if (shouldSendMaxVideoBWInOptions ||\r\n        config.minVideoBW ||\r\n        (config.slideShowMode !== undefined) ||\r\n        (config.muteStream !== undefined) ||\r\n        (config.qualityLayer !== undefined) ||\r\n        (config.minLayer !== undefined) ||\r\n        (config.video !== undefined)) {\r\n      Logger.debug('MaxVideoBW Changed to ', config.maxVideoBW);\r\n      Logger.debug('MinVideo Changed to ', config.minVideoBW);\r\n      Logger.debug('SlideShowMode Changed to ', config.slideShowMode);\r\n      Logger.debug('muteStream changed to ', config.muteStream);\r\n      Logger.debug('Video Constraints', config.video);\r\n      specBase.callback({ type: 'updatestream', config }, streamId);\r\n    }\r\n  };\r\n\r\n  that.createOffer = (isSubscribe = false, forceOfferToReceive = false, streamId = '') => {\r\n    if (!isSubscribe && !forceOfferToReceive) {\r\n      that.mediaConstraints = {\r\n        offerToReceiveVideo: false,\r\n        offerToReceiveAudio: false,\r\n      };\r\n    }\r\n    if (isNegotiating) {\r\n      offerQueue.push(['local', isSubscribe, forceOfferToReceive, streamId]);\r\n      return;\r\n    }\r\n    isNegotiating = true;\r\n    Logger.debug('Creating offer', that.mediaConstraints, streamId);\r\n    that.peerConnection.createOffer(that.mediaConstraints)\r\n    .then(setLocalDescForOffer.bind(null, isSubscribe, streamId))\r\n    .catch(errorCallback.bind(null, 'Create Offer', undefined));\r\n  };\r\n\r\n  that.addStream = (stream) => {\r\n    that.peerConnection.addStream(stream);\r\n  };\r\n\r\n  that.removeStream = (stream) => {\r\n    that.peerConnection.removeStream(stream);\r\n  };\r\n\r\n  that.processSignalingMessage = (msgInput) => {\r\n    if (msgInput.type === 'offer') {\r\n      processOffer(msgInput);\r\n    } else if (msgInput.type === 'answer') {\r\n      processAnswer(msgInput);\r\n    } else if (msgInput.type === 'candidate') {\r\n      processNewCandidate(msgInput);\r\n    }\r\n  };\r\n\r\n  return that;\r\n};\r\n\r\nexport default BaseStack;\r\n","import BaseStack from './BaseStack';\r\nimport SdpHelpers from './../utils/SdpHelpers';\r\nimport Logger from '../utils/Logger';\r\n\r\nconst ChromeStableStack = (specInput) => {\r\n  Logger.info('Starting Chrome stable stack', specInput);\r\n  const spec = specInput;\r\n  const that = BaseStack(specInput);\r\n  const defaultSimulcastSpatialLayers = 2;\r\n\r\n  that.enableSimulcast = (sdpInput) => {\r\n    let result;\r\n    let sdp = sdpInput;\r\n    if (!that.simulcast) {\r\n      return sdp;\r\n    }\r\n\r\n    // TODO(javier): Improve the way we check for current video ssrcs\r\n    const matchGroup = sdp.match(/a=ssrc-group:FID ([0-9]*) ([0-9]*)\\r?\\n/);\r\n    if (!matchGroup || (matchGroup.length <= 0)) {\r\n      return sdp;\r\n    }\r\n    // TODO (pedro): Consider adding these to SdpHelpers\r\n    const numSpatialLayers = that.simulcast.numSpatialLayers || defaultSimulcastSpatialLayers;\r\n    const baseSsrc = parseInt(matchGroup[1], 10);\r\n    const baseSsrcRtx = parseInt(matchGroup[2], 10);\r\n    const cname = sdp.match(new RegExp(`a=ssrc:${matchGroup[1]} cname:(.*)\\r?\\n`))[1];\r\n    const msid = sdp.match(new RegExp(`a=ssrc:${matchGroup[1]} msid:(.*)\\r?\\n`))[1];\r\n    const mslabel = sdp.match(new RegExp(`a=ssrc:${matchGroup[1]} mslabel:(.*)\\r?\\n`))[1];\r\n    const label = sdp.match(new RegExp(`a=ssrc:${matchGroup[1]} label:(.*)\\r?\\n`))[1];\r\n\r\n    sdp.match(new RegExp(`a=ssrc:${matchGroup[1]}.*\\r?\\n`, 'g')).forEach((line) => {\r\n      sdp = sdp.replace(line, '');\r\n    });\r\n    sdp.match(new RegExp(`a=ssrc:${matchGroup[2]}.*\\r?\\n`, 'g')).forEach((line) => {\r\n      sdp = sdp.replace(line, '');\r\n    });\r\n\r\n    const spatialLayers = [baseSsrc];\r\n    const spatialLayersRtx = [baseSsrcRtx];\r\n\r\n    for (let i = 1; i < numSpatialLayers; i += 1) {\r\n      spatialLayers.push(baseSsrc + (i * 1000));\r\n      spatialLayersRtx.push(baseSsrcRtx + (i * 1000));\r\n    }\r\n\r\n    result = SdpHelpers.addSim(spatialLayers);\r\n    let spatialLayerId;\r\n    let spatialLayerIdRtx;\r\n    for (let i = 0; i < spatialLayers.length; i += 1) {\r\n      spatialLayerId = spatialLayers[i];\r\n      spatialLayerIdRtx = spatialLayersRtx[i];\r\n      result += SdpHelpers.addGroup(spatialLayerId, spatialLayerIdRtx);\r\n    }\r\n\r\n    for (let i = 0; i < spatialLayers.length; i += 1) {\r\n      spatialLayerId = spatialLayers[i];\r\n      spatialLayerIdRtx = spatialLayersRtx[i];\r\n      result += SdpHelpers.addSpatialLayer(cname,\r\n        msid, mslabel, label, spatialLayerId, spatialLayerIdRtx);\r\n    }\r\n    result += 'a=x-google-flag:conference\\r\\n';\r\n    return sdp.replace(matchGroup[0], result);\r\n  };\r\n\r\n  that.setStartVideoBW = (sdpInfo) => {\r\n    if (that.video && spec.startVideoBW) {\r\n      Logger.debug(`startVideoBW requested: ${spec.startVideoBW}`);\r\n      SdpHelpers.setParamForCodecs(sdpInfo, 'video', 'x-google-start-bitrate', spec.startVideoBW);\r\n    }\r\n  };\r\n\r\n  that.setHardMinVideoBW = (sdpInfo) => {\r\n    if (that.video && spec.hardMinVideoBW) {\r\n      Logger.debug(`hardMinVideoBW requested: ${spec.hardMinVideoBW}`);\r\n      SdpHelpers.setParamForCodecs(sdpInfo, 'video', 'x-google-min-bitrate', spec.hardMinVideoBW);\r\n    }\r\n  };\r\n\r\n  return that;\r\n};\r\n\r\nexport default ChromeStableStack;\r\n","import Logger from '../utils/Logger';\r\nimport BaseStack from './BaseStack';\r\n\r\nconst FirefoxStack = (specInput) => {\r\n  Logger.info('Starting Firefox stack');\r\n  const that = BaseStack(specInput);\r\n  const defaultSimulcastSpatialLayers = 2;\r\n\r\n  const possibleLayers = [\r\n    { rid: 'low', scaleResolutionDownBy: 3 },\r\n    { rid: 'med', scaleResolutionDownBy: 2 },\r\n    { rid: 'high' },\r\n  ];\r\n\r\n  const getSimulcastParameters = (sender) => {\r\n    let numSpatialLayers = that.simulcast.numSpatialLayers || defaultSimulcastSpatialLayers;\r\n    const totalLayers = possibleLayers.length;\r\n    numSpatialLayers = numSpatialLayers < totalLayers ?\r\n                          numSpatialLayers : totalLayers;\r\n    const parameters = sender.getParameters() || {};\r\n    parameters.encodings = [];\r\n\r\n    for (let layer = totalLayers - 1; layer >= totalLayers - numSpatialLayers; layer -= 1) {\r\n      parameters.encodings.push(possibleLayers[layer]);\r\n    }\r\n    return sender.setParameters(parameters);\r\n  };\r\n\r\n  const enableSimulcast = () => {\r\n    if (!that.simulcast) {\r\n      return [];\r\n    }\r\n    const promises = [];\r\n    that.peerConnection.getSenders().forEach((sender) => {\r\n      if (sender.track.kind === 'video') {\r\n        promises.push(getSimulcastParameters(sender));\r\n      }\r\n    });\r\n    return promises;\r\n  };\r\n\r\n  that.enableSimulcast = sdp => sdp;\r\n\r\n  const baseCreateOffer = that.createOffer;\r\n\r\n  that.createOffer = (isSubscribe, forceOfferToReceive = false, streamId = '') => {\r\n    let promises = [];\r\n    if (isSubscribe !== true) {\r\n      promises = enableSimulcast();\r\n    }\r\n    Promise.all(promises).then(() => {\r\n      baseCreateOffer(isSubscribe, forceOfferToReceive, streamId);\r\n    });\r\n  };\r\n\r\n  return that;\r\n};\r\n\r\nexport default FirefoxStack;\r\n","import Logger from '../utils/Logger';\r\n\r\nconst FcStack = (spec) => {\r\n  /*\r\n  spec.callback({\r\n      type: sessionDescription.type,\r\n      sdp: sessionDescription.sdp\r\n  });\r\n  */\r\n  const that = {};\r\n\r\n  that.pcConfig = {};\r\n\r\n  that.peerConnection = {};\r\n  that.desc = {};\r\n  that.signalCallback = undefined;\r\n\r\n  that.close = () => {\r\n    Logger.info('Close FcStack');\r\n  };\r\n\r\n  that.createOffer = () => {\r\n    Logger.debug('FCSTACK: CreateOffer');\r\n  };\r\n\r\n  that.addStream = (stream) => {\r\n    Logger.debug('FCSTACK: addStream', stream);\r\n  };\r\n\r\n  that.processSignalingMessage = (msg) => {\r\n    Logger.debug('FCSTACK: processSignaling', msg);\r\n    if (that.signalCallback !== undefined) { that.signalCallback(msg); }\r\n  };\r\n\r\n  that.sendSignalingMessage = (msg) => {\r\n    Logger.debug('FCSTACK: Sending signaling Message', msg);\r\n    spec.callback(msg);\r\n  };\r\n\r\n  that.setSignalingCallback = (callback = () => {}) => {\r\n    Logger.debug('FCSTACK: Setting signalling callback');\r\n    that.signalCallback = callback;\r\n  };\r\n  return that;\r\n};\r\n\r\nexport default FcStack;\r\n","/* global */\r\nimport Logger from './utils/Logger';\r\n\r\n/*\r\n * Class EventDispatcher provides event handling to sub-classes.\r\n * It is inherited from Publisher, Room, etc.\r\n */\r\nconst EventDispatcher = () => {\r\n  const that = {};\r\n  // Private vars\r\n  const dispatcher = {\r\n    eventListeners: {},\r\n  };\r\n\r\n  // Public functions\r\n\r\n  // It adds an event listener attached to an event type.\r\n  that.addEventListener = (eventType, listener) => {\r\n    if (dispatcher.eventListeners[eventType] === undefined) {\r\n      dispatcher.eventListeners[eventType] = [];\r\n    }\r\n    dispatcher.eventListeners[eventType].push(listener);\r\n  };\r\n\r\n  // It removes an available event listener.\r\n  that.removeEventListener = (eventType, listener) => {\r\n    if (!dispatcher.eventListeners[eventType]) {\r\n      return;\r\n    }\r\n    const index = dispatcher.eventListeners[eventType].indexOf(listener);\r\n    if (index !== -1) {\r\n      dispatcher.eventListeners[eventType].splice(index, 1);\r\n    }\r\n  };\r\n\r\n  that.removeAllListeners = () => {\r\n    dispatcher.eventListeners = {};\r\n  };\r\n\r\n  // It dispatch a new event to the event listeners, based on the type\r\n  // of event. All events are intended to be LicodeEvents.\r\n  that.dispatchEvent = (event) => {\r\n    if (!event || !event.type) {\r\n      throw new Error('Undefined event');\r\n    }\r\n    Logger.debug(`Event: ${event.type}`);\r\n    const listeners = dispatcher.eventListeners[event.type] || [];\r\n    for (let i = 0; i < listeners.length; i += 1) {\r\n      listeners[i](event);\r\n    }\r\n  };\r\n\r\n  that.on = that.addEventListener;\r\n  that.off = that.removeEventListener;\r\n  that.emit = that.dispatchEvent;\r\n\r\n  return that;\r\n};\r\n\r\nclass EventEmitter {\r\n  constructor() {\r\n    this.emitter = EventDispatcher();\r\n  }\r\n  addEventListener(eventType, listener) {\r\n    this.emitter.addEventListener(eventType, listener);\r\n  }\r\n  removeEventListener(eventType, listener) {\r\n    this.emitter.removeEventListener(eventType, listener);\r\n  }\r\n  dispatchEvent(evt) {\r\n    this.emitter.dispatchEvent(evt);\r\n  }\r\n  on(eventType, listener) {\r\n    this.addEventListener(eventType, listener);\r\n  }\r\n  off(eventType, listener) {\r\n    this.removeEventListener(eventType, listener);\r\n  }\r\n  emit(evt) {\r\n    this.dispatchEvent(evt);\r\n  }\r\n}\r\n\r\n\r\n// **** EVENTS ****\r\n\r\n/*\r\n * Class LicodeEvent represents a generic Event in the library.\r\n * It handles the type of event, that is important when adding\r\n * event listeners to EventDispatchers and dispatching new events.\r\n * A LicodeEvent can be initialized this way:\r\n * var event = LicodeEvent({type: \"room-connected\"});\r\n */\r\nconst LicodeEvent = (spec) => {\r\n  const that = {};\r\n\r\n  // Event type. Examples are: 'room-connected', 'stream-added', etc.\r\n  that.type = spec.type;\r\n\r\n  return that;\r\n};\r\n\r\n/*\r\n * Class ConnectionEvent represents an Event that happens in a Room. It is a\r\n * LicodeEvent.\r\n * It is usually initialized as:\r\n * var roomEvent = RoomEvent({type:\"stream-added\", streams:[stream1, stream2]});\r\n * Event types:\r\n * 'stream-added' - a stream has been added to the connection.\r\n * 'stream-removed' - a stream has been removed from the connection.\r\n * 'ice-state-change' - ICE state changed\r\n */\r\nconst ConnectionEvent = (spec) => {\r\n  const that = LicodeEvent(spec);\r\n\r\n  that.stream = spec.stream;\r\n  that.state = spec.state;\r\n\r\n  return that;\r\n};\r\n\r\n/*\r\n * Class RoomEvent represents an Event that happens in a Room. It is a\r\n * LicodeEvent.\r\n * It is usually initialized as:\r\n * var roomEvent = RoomEvent({type:\"room-connected\", streams:[stream1, stream2]});\r\n * Event types:\r\n * 'room-connected' - points out that the user has been successfully connected to the room.\r\n * 'room-disconnected' - shows that the user has been already disconnected.\r\n */\r\nconst RoomEvent = (spec) => {\r\n  const that = LicodeEvent(spec);\r\n\r\n  // A list with the streams that are published in the room.\r\n  that.streams = spec.streams;\r\n  that.message = spec.message;\r\n\r\n  return that;\r\n};\r\n\r\n/*\r\n * Class StreamEvent represents an event related to a stream. It is a LicodeEvent.\r\n * It is usually initialized this way:\r\n * var streamEvent = StreamEvent({type:\"stream-added\", stream:stream1});\r\n * Event types:\r\n * 'stream-added' - indicates that there is a new stream available in the room.\r\n * 'stream-removed' - shows that a previous available stream has been removed from the room.\r\n */\r\nconst StreamEvent = (spec) => {\r\n  const that = LicodeEvent(spec);\r\n\r\n  // The stream related to this event.\r\n  that.stream = spec.stream;\r\n\r\n  that.msg = spec.msg;\r\n  that.bandwidth = spec.bandwidth;\r\n  that.attrs = spec.attrs;\r\n\r\n  return that;\r\n};\r\n\r\n/*\r\n * Class PublisherEvent represents an event related to a publisher. It is a LicodeEvent.\r\n * It usually initializes as:\r\n * var publisherEvent = PublisherEvent({})\r\n * Event types:\r\n * 'access-accepted' - indicates that the user has accepted to share his camera and microphone\r\n */\r\nconst PublisherEvent = (spec) => {\r\n  const that = LicodeEvent(spec);\r\n\r\n  return that;\r\n};\r\n\r\nexport { EventDispatcher, EventEmitter, LicodeEvent, RoomEvent, StreamEvent, PublisherEvent,\r\n  ConnectionEvent };\r\n","/* global unescape */\r\n\r\nconst ErizoMap = () => {\r\n  const that = {};\r\n  let values = {};\r\n\r\n  that.add = (id, value) => {\r\n    values[id] = value;\r\n  };\r\n\r\n  that.get = id => values[id];\r\n\r\n  that.has = id => values[id] !== undefined;\r\n\r\n  that.size = () => Object.keys(values).length;\r\n\r\n  that.forEach = (func) => {\r\n    const keys = Object.keys(values);\r\n    for (let index = 0; index < keys.length; index += 1) {\r\n      const key = keys[index];\r\n      const value = values[key];\r\n      func(value, key);\r\n    }\r\n  };\r\n\r\n  that.keys = () => Object.keys(values);\r\n\r\n  that.remove = (id) => {\r\n    delete values[id];\r\n  };\r\n\r\n  that.clear = () => {\r\n    values = {};\r\n  };\r\n\r\n  return that;\r\n};\r\n\r\nexport default ErizoMap;\r\n","/* global */\r\nimport ChromeStableStack from './webrtc-stacks/ChromeStableStack';\r\nimport FirefoxStack from './webrtc-stacks/FirefoxStack';\r\nimport FcStack from './webrtc-stacks/FcStack';\r\nimport Logger from './utils/Logger';\r\nimport { EventEmitter, ConnectionEvent } from './Events';\r\nimport ErizoMap from './utils/ErizoMap';\r\nimport ConnectionHelpers from './utils/ConnectionHelpers';\r\n\r\nconst EventEmitterConst = EventEmitter; // makes google-closure-compiler happy\r\nlet ErizoSessionId = 103;\r\n\r\nclass ErizoConnection extends EventEmitterConst {\r\n  constructor(specInput, erizoId = undefined) {\r\n    super();\r\n    Logger.debug('Building a new Connection');\r\n    this.stack = {};\r\n\r\n    this.erizoId = erizoId;\r\n    this.streamsMap = ErizoMap(); // key:streamId, value: stream\r\n\r\n    const spec = specInput;\r\n    ErizoSessionId += 1;\r\n    spec.sessionId = ErizoSessionId;\r\n    this.sessionId = ErizoSessionId;\r\n\r\n    // Check which WebRTC Stack is installed.\r\n    this.browser = ConnectionHelpers.getBrowser();\r\n    if (this.browser === 'fake') {\r\n      Logger.warning('Publish/subscribe video/audio streams not supported in erizofc yet');\r\n      this.stack = FcStack(spec);\r\n    } else if (this.browser === 'mozilla') {\r\n      Logger.debug('Firefox Stack');\r\n      this.stack = FirefoxStack(spec);\r\n    } else if (this.browser === 'safari') {\r\n      Logger.debug('Safari using Chrome Stable Stack');\r\n      this.stack = ChromeStableStack(spec);\r\n    } else if (this.browser === 'chrome-stable' || this.browser === 'electron') {\r\n      Logger.debug('Chrome Stable Stack');\r\n      this.stack = ChromeStableStack(spec);\r\n    } else {\r\n      Logger.error('No stack available for this browser');\r\n      throw new Error('WebRTC stack not available');\r\n    }\r\n    if (!this.stack.updateSpec) {\r\n      this.stack.updateSpec = (newSpec, callback = () => {}) => {\r\n        Logger.error('Update Configuration not implemented in this browser');\r\n        callback('unimplemented');\r\n      };\r\n    }\r\n    if (!this.stack.setSignallingCallback) {\r\n      this.stack.setSignallingCallback = () => {\r\n        Logger.error('setSignallingCallback is not implemented in this stack');\r\n      };\r\n    }\r\n\r\n    // PeerConnection Events\r\n    if (this.stack.peerConnection) {\r\n      this.peerConnection = this.stack.peerConnection; // For backwards compatibility\r\n      this.stack.peerConnection.onaddstream = (evt) => {\r\n        this.emit(ConnectionEvent({ type: 'add-stream', stream: evt.stream }));\r\n      };\r\n\r\n      this.stack.peerConnection.onremovestream = (evt) => {\r\n        this.emit(ConnectionEvent({ type: 'remove-stream', stream: evt.stream }));\r\n      };\r\n\r\n      this.stack.peerConnection.oniceconnectionstatechange = () => {\r\n        const state = this.stack.peerConnection.iceConnectionState;\r\n        this.emit(ConnectionEvent({ type: 'ice-state-change', state }));\r\n      };\r\n    }\r\n  }\r\n\r\n  close() {\r\n    Logger.debug('Closing ErizoConnection');\r\n    this.streamsMap.clear();\r\n    this.stack.close();\r\n  }\r\n\r\n  createOffer(isSubscribe, forceOfferToReceive, streamId) {\r\n    this.stack.createOffer(isSubscribe, forceOfferToReceive, streamId);\r\n  }\r\n\r\n  addStream(stream) {\r\n    Logger.debug(`message: Adding stream to Connection, streamId: ${stream.getID()}`);\r\n    this.streamsMap.add(stream.getID(), stream);\r\n    if (stream.local) {\r\n      this.stack.addStream(stream.stream);\r\n    }\r\n  }\r\n\r\n  removeStream(stream) {\r\n    const streamId = stream.getID();\r\n    if (!this.streamsMap.has(streamId)) {\r\n      Logger.warning(`message: Cannot remove stream not in map, streamId: ${streamId}`);\r\n      return;\r\n    }\r\n    if (stream.local) {\r\n      this.stack.removeStream(stream.stream);\r\n    }\r\n    this.streamsMap.remove(streamId);\r\n  }\r\n\r\n  processSignalingMessage(msg) {\r\n    this.stack.processSignalingMessage(msg);\r\n  }\r\n\r\n  sendSignalingMessage(msg) {\r\n    this.stack.sendSignalingMessage(msg);\r\n  }\r\n\r\n  setSimulcast(enable) {\r\n    this.stack.setSimulcast(enable);\r\n  }\r\n\r\n  setVideo(video) {\r\n    this.stack.setVideo(video);\r\n  }\r\n\r\n  setAudio(audio) {\r\n    this.stack.setAudio(audio);\r\n  }\r\n\r\n  updateSpec(configInput, streamId, callback) {\r\n    this.stack.updateSpec(configInput, streamId, callback);\r\n  }\r\n}\r\n\r\nclass ErizoConnectionManager {\r\n  constructor() {\r\n    this.ErizoConnectionsMap = new Map(); // key: erizoId, value: {connectionId: connection}\r\n  }\r\n\r\n  getOrBuildErizoConnection(specInput, erizoId = undefined, singlePC = false) {\r\n    Logger.debug(`message: getOrBuildErizoConnection, erizoId: ${erizoId}`);\r\n    let connection = {};\r\n\r\n    if (erizoId === undefined) {\r\n      // we have no erizoJS id - p2p\r\n      return new ErizoConnection(specInput);\r\n    }\r\n    if (singlePC) {\r\n      let connectionEntry;\r\n      if (this.ErizoConnectionsMap.has(erizoId)) {\r\n        connectionEntry = this.ErizoConnectionsMap.get(erizoId);\r\n      } else {\r\n        connectionEntry = {};\r\n        this.ErizoConnectionsMap.set(erizoId, connectionEntry);\r\n      }\r\n      if (!connectionEntry['single-pc']) {\r\n        connectionEntry['single-pc'] = new ErizoConnection(specInput, erizoId);\r\n      }\r\n      connection = connectionEntry['single-pc'];\r\n    } else {\r\n      connection = new ErizoConnection(specInput, erizoId);\r\n      if (this.ErizoConnectionsMap.has(erizoId)) {\r\n        this.ErizoConnectionsMap.get(erizoId)[connection.sessionId] = connection;\r\n      } else {\r\n        const connectionEntry = {};\r\n        connectionEntry[connection.sessionId] = connection;\r\n        this.ErizoConnectionsMap.set(erizoId, connectionEntry);\r\n      }\r\n    }\r\n    if (specInput.simulcast) {\r\n      connection.setSimulcast(specInput.simulcast);\r\n    }\r\n    if (specInput.video) {\r\n      connection.setVideo(specInput.video);\r\n    }\r\n    if (specInput.audio) {\r\n      connection.setVideo(specInput.audio);\r\n    }\r\n\r\n    return connection;\r\n  }\r\n\r\n  maybeCloseConnection(connection) {\r\n    Logger.debug(`Trying to remove connection ${connection.sessionId}\r\n       with erizoId ${connection.erizoId}`);\r\n    if (connection.streamsMap.size() === 0) {\r\n      connection.close();\r\n      if (this.ErizoConnectionsMap.get(connection.erizoId) !== undefined) {\r\n        delete this.ErizoConnectionsMap.get(connection.erizoId)[connection.sessionId];\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default ErizoConnectionManager;\r\n","/* global */\r\n\r\nimport io from '../lib/socket.io';\r\nimport Logger from './utils/Logger';\r\n\r\nimport { EventDispatcher, LicodeEvent } from './Events';\r\n\r\nconst SocketEvent = (type, specInput) => {\r\n  const that = LicodeEvent({ type });\r\n  that.args = specInput.args;\r\n  return that;\r\n};\r\n\r\n/*\r\n * Class Stream represents a local or a remote Stream in the Room. It will handle the WebRTC\r\n * stream and identify the stream and where it should be drawn.\r\n */\r\nconst Socket = (newIo) => {\r\n  const that = EventDispatcher();\r\n  const defaultCallback = () => {};\r\n  const messageBuffer = [];\r\n\r\n  that.CONNECTED = Symbol('connected');\r\n  that.RECONNECTING = Symbol('reconnecting');\r\n  that.DISCONNECTED = Symbol('disconnected');\r\n\r\n  const WEBSOCKET_NORMAL_CLOSURE = 1000;\r\n  that.state = that.DISCONNECTED;\r\n  that.IO = newIo === undefined ? io : newIo;\r\n\r\n  let socket;\r\n\r\n  const emit = (type, ...args) => {\r\n    that.emit(SocketEvent(type, { args }));\r\n  };\r\n\r\n  const addToBuffer = (type, message, callback, error) => {\r\n    messageBuffer.push([type, message, callback, error]);\r\n  };\r\n\r\n  const flushBuffer = () => {\r\n    if (that.state !== that.CONNECTED) {\r\n      return;\r\n    }\r\n    messageBuffer.forEach((message) => {\r\n      that.sendMessage(...message);\r\n    });\r\n  };\r\n\r\n  that.connect = (token, userOptions, callback = defaultCallback, error = defaultCallback) => {\r\n    const options = {\r\n      reconnection: true,\r\n      reconnectionAttempts: 3,\r\n      secure: token.secure,\r\n      forceNew: true,\r\n      transports: ['websocket'],\r\n      rejectUnauthorized: false,\r\n    };\r\n    const transport = token.secure ? 'wss://' : 'ws://';\r\n    const host = token.host;\r\n    socket = that.IO.connect(transport + host, options);\r\n\r\n    // Hack to know the exact reason of the WS closure (socket.io does not publish it)\r\n    let closeCode = WEBSOCKET_NORMAL_CLOSURE;\r\n    const socketOnCloseFunction = socket.io.engine.transport.ws.onclose;\r\n    socket.io.engine.transport.ws.onclose = (closeEvent) => {\r\n      Logger.warning('WebSocket closed, code:', closeEvent.code);\r\n      closeCode = closeEvent.code;\r\n      socketOnCloseFunction(closeEvent);\r\n    };\r\n    that.socket = socket;\r\n    socket.on('onAddStream', emit.bind(that, 'onAddStream'));\r\n\r\n    socket.on('signaling_message_erizo', emit.bind(that, 'signaling_message_erizo'));\r\n    socket.on('signaling_message_peer', emit.bind(that, 'signaling_message_peer'));\r\n    socket.on('publish_me', emit.bind(that, 'publish_me'));\r\n    socket.on('unpublish_me', emit.bind(that, 'unpublish_me'));\r\n    socket.on('onBandwidthAlert', emit.bind(that, 'onBandwidthAlert'));\r\n\r\n    // We receive an event of new data in one of the streams\r\n    socket.on('onDataStream', emit.bind(that, 'onDataStream'));\r\n\r\n    // We receive an event of new data in one of the streams\r\n    socket.on('onUpdateAttributeStream', emit.bind(that, 'onUpdateAttributeStream'));\r\n\r\n    // We receive an event of a stream removed from the room\r\n    socket.on('onRemoveStream', emit.bind(that, 'onRemoveStream'));\r\n\r\n    // The socket has disconnected\r\n    socket.on('disconnect', (reason) => {\r\n      Logger.debug('disconnect', that.id, reason);\r\n      if (closeCode !== WEBSOCKET_NORMAL_CLOSURE) {\r\n        that.state = that.RECONNECTING;\r\n        return;\r\n      }\r\n      emit('disconnect', reason);\r\n      socket.close();\r\n    });\r\n\r\n    socket.on('connection_failed', (evt) => {\r\n      Logger.error('connection failed, id:', that.id);\r\n      emit('connection_failed', evt);\r\n    });\r\n    socket.on('error', (err) => {\r\n      Logger.warning('socket error, id:', that.id, ', error:', err.message);\r\n      emit('error');\r\n    });\r\n    socket.on('connect_error', (err) => {\r\n      Logger.warning('connect error, id:', that.id, ', error:', err.message);\r\n    });\r\n\r\n    socket.on('connect_timeout', (err) => {\r\n      Logger.warning('connect timeout, id:', that.id, ', error:', err.message);\r\n    });\r\n\r\n    socket.on('reconnecting', (attemptNumber) => {\r\n      Logger.debug('reconnecting, id:', that.id, ', attempet:', attemptNumber);\r\n    });\r\n\r\n    socket.on('reconnect', (attemptNumber) => {\r\n      Logger.debug('reconnected, id:', that.id, ', attempet:', attemptNumber);\r\n      that.state = that.CONNECTED;\r\n      socket.emit('reconnected', that.id);\r\n      flushBuffer();\r\n    });\r\n\r\n    socket.on('reconnect_attempt', (attemptNumber) => {\r\n      Logger.debug('reconnect attempt, id:', that.id, ', attempet:', attemptNumber);\r\n    });\r\n\r\n    socket.on('reconnect_error', (err) => {\r\n      Logger.debug('error reconnecting, id:', that.id, ', error:', err.message);\r\n    });\r\n\r\n    socket.on('reconnect_failed', () => {\r\n      Logger.warning('reconnect failed, id:', that.id);\r\n      that.state = that.DISCONNECTED;\r\n      emit('disconnect', 'reconnect failed');\r\n    });\r\n\r\n    // First message with the token\r\n    const message = userOptions;\r\n    message.token = token;\r\n    that.sendMessage('token', message, (response) => {\r\n      that.state = that.CONNECTED;\r\n      that.id = response.clientId;\r\n      callback(response);\r\n    }, error);\r\n  };\r\n\r\n  that.disconnect = () => {\r\n    that.state = that.DISCONNECTED;\r\n    socket.disconnect();\r\n  };\r\n\r\n  // Function to send a message to the server using socket.io\r\n  that.sendMessage = (type, msg, callback = defaultCallback, error = defaultCallback) => {\r\n    if (that.state === that.DISCONNECTED && type !== 'token') {\r\n      Logger.error('Trying to send a message over a disconnected Socket');\r\n      return;\r\n    }\r\n    if (that.state === that.RECONNECTING) {\r\n      addToBuffer(type, msg, callback, error);\r\n      return;\r\n    }\r\n    socket.emit(type, msg, (respType, resp) => {\r\n      if (respType === 'success') {\r\n        callback(resp);\r\n      } else if (respType === 'error') {\r\n        error(resp);\r\n      } else {\r\n        callback(respType, resp);\r\n      }\r\n    });\r\n  };\r\n\r\n  // It sends a SDP message to the server using socket.io\r\n  that.sendSDP = (type, options, sdp, callback = defaultCallback) => {\r\n    if (that.state === that.DISCONNECTED) {\r\n      Logger.error('Trying to send a message over a disconnected Socket');\r\n      return;\r\n    }\r\n    socket.emit(type, options, sdp, (...args) => {\r\n      callback(...args);\r\n    });\r\n  };\r\n  return that;\r\n};\r\n\r\nexport { SocketEvent, Socket };\r\n","/*\r\n * View class represents a HTML component\r\n * Every view is an EventDispatcher.\r\n */\r\n\r\nimport { EventDispatcher } from '../Events';\r\n\r\nconst View = () => {\r\n  const that = EventDispatcher({});\r\n\r\n  // Variables\r\n\r\n  // URL where it will look for icons and assets\r\n  /*global App*/\r\n  that.url = App && App.staticUrl + \"assets/img/weedeo\";\r\n  return that;\r\n};\r\n\r\nexport default View;\r\n","/* global document */\r\n\r\nimport View from './View';\r\n\r\n/*\r\n * Speaker represents the volume icon that will be shown in the mediaPlayer, for example.\r\n * It manages the volume level of the media tag given in the constructor.\r\n * Every Speaker is a View.\r\n * Ex.: var speaker = Speaker({elementID: element, media: mediaTag, id: id});\r\n */\r\nconst Speaker = (spec) => {\r\n  const that = View({});\r\n  let lastVolume = 50;\r\n\r\n  const mute = () => {\r\n    that.media.muted = true;\r\n    that.icon.setAttribute('src', `${that.url}/assets/mute48.png`);\r\n    if (that.stream.local) {\r\n      that.stream.stream.getAudioTracks()[0].enabled = false;\r\n    } else {\r\n      lastVolume = that.picker.value;\r\n      that.picker.value = 0;\r\n      that.media.volume = 0;\r\n    }\r\n  };\r\n\r\n  const unmute = () => {\r\n    that.media.muted = false;\r\n    that.icon.setAttribute('src', `${that.url}/assets/sound48.png`);\r\n    if (that.stream.local) {\r\n      that.stream.stream.getAudioTracks()[0].enabled = true;\r\n    } else {\r\n      that.picker.value = lastVolume;\r\n      that.media.volume = that.picker.value / 100;\r\n    }\r\n  };\r\n\r\n  // Variables\r\n\r\n  // DOM element in which the Speaker will be appended\r\n  that.elementID = spec.elementID;\r\n\r\n  // media tag\r\n  that.media = spec.media;\r\n\r\n  // Speaker id\r\n  that.id = spec.id;\r\n\r\n  // MediaStream\r\n  that.stream = spec.stream;\r\n\r\n  // Container\r\n  that.div = document.createElement('div');\r\n  that.div.setAttribute('style', 'width: 40%; height: 100%; max-width: 32px; ' +\r\n                                   'position: absolute; right: 0;z-index:0;');\r\n\r\n  // Volume icon\r\n  that.icon = document.createElement('img');\r\n  that.icon.setAttribute('id', `volume_${that.id}`);\r\n  that.icon.setAttribute('src', `${that.url}/assets/sound48.png`);\r\n  that.icon.setAttribute('style', 'width: 80%; height: 100%; position: absolute;');\r\n  that.div.appendChild(that.icon);\r\n\r\n  that.icon.onclick = () => {\r\n    if (that.media.muted) {\r\n      unmute();\r\n    } else {\r\n      mute();\r\n    }\r\n  };\r\n\r\n  if (!that.stream.local) {\r\n    // Volume bar\r\n    that.picker = document.createElement('input');\r\n    that.picker.setAttribute('id', `picker_${that.id}`);\r\n    that.picker.type = 'range';\r\n    that.picker.min = 0;\r\n    that.picker.max = 100;\r\n    that.picker.step = 10;\r\n    that.picker.value = lastVolume;\r\n    //  FireFox supports range sliders as of version 23\r\n    that.picker.setAttribute('orient', 'vertical');\r\n    that.div.appendChild(that.picker);\r\n    that.media.volume = that.picker.value / 100;\r\n    that.media.muted = false;\r\n\r\n    that.picker.oninput = () => {\r\n      if (that.picker.value > 0) {\r\n        that.media.muted = false;\r\n        that.icon.setAttribute('src', `${that.url}/assets/sound48.png`);\r\n      } else {\r\n        that.media.muted = true;\r\n        that.icon.setAttribute('src', `${that.url}/assets/mute48.png`);\r\n      }\r\n      that.media.volume = that.picker.value / 100;\r\n    };\r\n\r\n    // Private functions\r\n    const show = (displaying) => {\r\n      that.picker.setAttribute('style', `background: transparent; width: 32px;\r\n                                         height: 100px; position: absolute; bottom: 90%;\r\n                                         z-index: 1; right: 0px; -webkit-appearance: slider-vertical;\r\n                                         bottom: ${that.div.offsetHeight}px; display: ${displaying}`);\r\n    };\r\n\r\n    // Public functions\r\n    that.div.onmouseover = () => {\r\n      show('block');\r\n    };\r\n\r\n    that.div.onmouseout = () => {\r\n      show('none');\r\n    };\r\n\r\n    show('none');\r\n  }\r\n\r\n  document.getElementById(that.elementID).appendChild(that.div);\r\n  return that;\r\n};\r\n\r\nexport default Speaker;\r\n","/* global document, clearTimeout, setTimeout */\r\n\r\nimport View from './View';\r\nimport Speaker from './Speaker';\r\n\r\n/*\r\n * Bar represents the bottom menu bar of every mediaPlayer.\r\n * It contains a Speaker and an icon.\r\n * Every Bar is a View.\r\n * Ex.: var bar = Bar({elementID: element, id: id});\r\n */\r\nconst Bar = (spec) => {\r\n  const that = View({});\r\n  let waiting;\r\n\r\n  // Variables\r\n\r\n  // DOM element in which the Bar will be appended\r\n  that.elementID = spec.elementID;\r\n\r\n  // Bar ID\r\n  that.id = spec.id;\r\n\r\n  // Container\r\n  that.div = document.createElement('div');\r\n  that.div.setAttribute('id', `bar_${that.id}`);\r\n  that.div.setAttribute('class', 'licode_bar');\r\n\r\n  // Bottom bar\r\n  that.bar = document.createElement('div');\r\n  that.bar.setAttribute('style', 'width: 100%; height: 15%; max-height: 30px; ' +\r\n                                 'position: absolute; bottom: 0; right: 0; ' +\r\n                                 'background-color: rgba(255,255,255,0.62)');\r\n  that.bar.setAttribute('id', `subbar_${that.id}`);\r\n  that.bar.setAttribute('class', 'licode_subbar');\r\n\r\n  // Lynckia icon\r\n  that.link = document.createElement('a');\r\n  that.link.setAttribute('href', 'http://www.lynckia.com/');\r\n  that.link.setAttribute('class', 'licode_link');\r\n  that.link.setAttribute('target', '_blank');\r\n\r\n  that.logo = document.createElement('img');\r\n  that.logo.setAttribute('style', 'width: 100%; height: 100%; max-width: 30px; ' +\r\n                                  'position: absolute; top: 0; left: 2px;');\r\n  that.logo.setAttribute('class', 'licode_logo');\r\n  that.logo.setAttribute('alt', 'Lynckia');\r\n  that.logo.setAttribute('src', `${that.url}/assets/star.svg`);\r\n\r\n  // Private functions\r\n  const show = (displaying) => {\r\n    let action = displaying;\r\n    if (displaying !== 'block') {\r\n      action = 'none';\r\n    } else {\r\n      clearTimeout(waiting);\r\n    }\r\n\r\n    that.div.setAttribute('style',\r\n      `width: 100%; height: 100%; position: relative; bottom: 0; right: 0; display: ${action}`);\r\n  };\r\n\r\n  // Public functions\r\n  that.display = () => {\r\n    show('block');\r\n  };\r\n\r\n  that.hide = () => {\r\n    waiting = setTimeout(show, 1000);\r\n  };\r\n\r\n  document.getElementById(that.elementID).appendChild(that.div);\r\n  that.div.appendChild(that.bar);\r\n  that.bar.appendChild(that.link);\r\n  that.link.appendChild(that.logo);\r\n\r\n  // Speaker component\r\n  if (!spec.stream.screen && (spec.options === undefined ||\r\n                              spec.options.speaker === undefined ||\r\n                              spec.options.speaker === true)) {\r\n    that.speaker = Speaker({ elementID: `subbar_${that.id}`,\r\n      id: that.id,\r\n      stream: spec.stream,\r\n      media: spec.media });\r\n  }\r\n\r\n  that.display();\r\n  that.hide();\r\n\r\n  return that;\r\n};\r\n\r\nexport default Bar;\r\n","/* global document, L */\r\n\r\nimport View from './View';\r\nimport Bar from './Bar';\r\n\r\n/*\r\n * VideoPlayer represents a Licode video component that shows either a local or a remote video.\r\n * Ex.: var player = VideoPlayer({id: id, stream: stream, elementID: elementID});\r\n * A VideoPlayer is also a View component.\r\n */\r\nconst VideoPlayer = (spec) => {\r\n  const that = View({});\r\n\r\n  // Variables\r\n\r\n  // VideoPlayer ID\r\n  that.id = spec.id;\r\n\r\n  // Stream that the VideoPlayer will play\r\n  that.stream = spec.stream.stream;\r\n\r\n  // DOM element in which the VideoPlayer will be appended\r\n  that.elementID = spec.elementID;\r\n\r\n  // Private functions\r\n  const onmouseover = () => {\r\n    that.bar.display();\r\n  };\r\n\r\n  const onmouseout = () => {\r\n    that.bar.hide();\r\n  };\r\n\r\n  const applyRatio = (ratio, width, height, reverse) => {\r\n    const condition = !reverse ? width * (1 / ratio) < height : width * (1 / ratio) > height;\r\n    if (condition) {\r\n      that.video.style.width = `${width}px`;\r\n      that.video.style.height = `${(1 / ratio) * width}px`;\r\n\r\n      that.video.style.top = `${-((((1 / ratio) * width) / 2) - (height / 2))}px`;\r\n      that.video.style.left = '0px';\r\n    } else {\r\n      that.video.style.height = `${height}px`;\r\n      that.video.style.width = `${ratio * height}px`;\r\n\r\n      that.video.style.left = `${-(((ratio * height) / 2) - (width / 2))}px`;\r\n      that.video.style.top = '0px';\r\n    }\r\n  };\r\n\r\n  // Public functions\r\n\r\n  // It will stop the VideoPlayer and remove it from the HTML\r\n  that.destroy = () => {\r\n    that.video.pause();\r\n    delete that.resizer;\r\n    that.parentNode.removeChild(that.div);\r\n  };\r\n\r\n  that.resize = () => {\r\n    const width = that.container.offsetWidth;\r\n    const height = that.container.offsetHeight;\r\n\r\n    if (spec.stream.screen || spec.options.crop === false) {\r\n      applyRatio(16 / 9, width, height, false);\r\n    } else if (width !== that.containerWidth || height !== that.containerHeight) {\r\n      applyRatio(4 / 3, width, height, true);\r\n    }\r\n\r\n    that.containerWidth = width;\r\n    that.containerHeight = height;\r\n  };\r\n\r\n  /* window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function (m, key, value) {\r\n      document.getElementById(key).value = unescape(value);\r\n  }); */\r\n\r\n  // Container\r\n  that.div = document.createElement('div');\r\n  that.div.setAttribute('id', `player_${that.id}`);\r\n  that.div.setAttribute('class', 'licode_player');\r\n  that.div.setAttribute('style', 'width: 100%; height: 100%; position: relative; ' +\r\n                                   'background-color: black; overflow: hidden;');\r\n\r\n  // Loader icon\r\n  if (spec.options.loader !== false) {\r\n    that.loader = document.createElement('img');\r\n    that.loader.setAttribute('style', 'width: 16px; height: 16px; position: absolute; ' +\r\n                                        'top: 50%; left: 50%; margin-top: -8px; margin-left: -8px');\r\n    that.loader.setAttribute('id', `back_${that.id}`);\r\n    that.loader.setAttribute('class', 'licode_loader');\r\n    that.loader.setAttribute('src', `${that.url}/assets/loader.gif`);\r\n  }\r\n\r\n  // Video tag\r\n  that.video = document.createElement('video');\r\n  that.video.setAttribute('id', `stream${that.id}`);\r\n  that.video.setAttribute('class', 'licode_stream');\r\n  that.video.setAttribute('style', 'width: 100%; height: 100%; position: absolute');\r\n  that.video.setAttribute('autoplay', 'autoplay');\r\n  that.video.setAttribute('playsinline', 'playsinline');\r\n\r\n  if (spec.stream.local) { that.video.volume = 0; }\r\n\r\n  if (that.elementID !== undefined) {\r\n    // Check for a passed DOM node.\r\n    if (typeof that.elementID === 'object' &&\r\n          typeof that.elementID.appendChild === 'function') {\r\n      that.container = that.elementID;\r\n    } else {\r\n      that.container = document.getElementById(that.elementID);\r\n    }\r\n  } else {\r\n    that.container = document.body;\r\n  }\r\n  that.container.appendChild(that.div);\r\n\r\n  that.parentNode = that.div.parentNode;\r\n\r\n  if (that.loader) {\r\n    that.div.appendChild(that.loader);\r\n  }\r\n  that.div.appendChild(that.video);\r\n\r\n  that.containerWidth = 0;\r\n  that.containerHeight = 0;\r\n\r\n  if (spec.options.resizer !== false) {\r\n    that.resizer = L.ResizeSensor(that.container, that.resize);\r\n\r\n    that.resize();\r\n  }\r\n\r\n  // Bottom Bar\r\n  if (spec.options.bar !== false) {\r\n    that.bar = Bar({ elementID: `player_${that.id}`,\r\n      id: that.id,\r\n      stream: spec.stream,\r\n      media: that.video,\r\n      options: spec.options });\r\n\r\n    that.div.onmouseover = onmouseover;\r\n    that.div.onmouseout = onmouseout;\r\n  } else {\r\n    // Expose a consistent object to manipulate the media.\r\n    that.media = that.video;\r\n  }\r\n\r\n  that.video.srcObject = that.stream;\r\n\r\n  return that;\r\n};\r\n\r\nexport default VideoPlayer;\r\n","/* global document */\r\n\r\nimport View from './View';\r\nimport Bar from './Bar';\r\n\r\n/*\r\n * AudioPlayer represents a Licode Audio component that shows either a local or a remote Audio.\r\n * Ex.: var player = AudioPlayer({id: id, stream: stream, elementID: elementID});\r\n * A AudioPlayer is also a View component.\r\n */\r\n\r\nconst AudioPlayer = (spec) => {\r\n  const that = View({});\r\n  let onmouseover;\r\n  let onmouseout;\r\n\r\n  // Variables\r\n\r\n  // AudioPlayer ID\r\n  that.id = spec.id;\r\n\r\n  // Stream that the AudioPlayer will play\r\n  that.stream = spec.stream.stream;\r\n\r\n  // DOM element in which the AudioPlayer will be appended\r\n  that.elementID = spec.elementID;\r\n\r\n\r\n    // Audio tag\r\n  that.audio = document.createElement('audio');\r\n  that.audio.setAttribute('id', `stream${that.id}`);\r\n  that.audio.setAttribute('class', 'licode_stream');\r\n  that.audio.setAttribute('style', 'width: 100%; height: 100%; position: absolute');\r\n  that.audio.setAttribute('autoplay', 'autoplay');\r\n\r\n  if (spec.stream.local) { that.audio.volume = 0; }\r\n\r\n  if (that.elementID !== undefined) {\r\n    // It will stop the AudioPlayer and remove it from the HTML\r\n    that.destroy = () => {\r\n      that.audio.pause();\r\n      that.parentNode.removeChild(that.div);\r\n    };\r\n\r\n    onmouseover = () => {\r\n      that.bar.display();\r\n    };\r\n\r\n    onmouseout = () => {\r\n      that.bar.hide();\r\n    };\r\n\r\n    // Container\r\n    that.div = document.createElement('div');\r\n    that.div.setAttribute('id', `player_${that.id}`);\r\n    that.div.setAttribute('class', 'licode_player');\r\n    that.div.setAttribute('style', 'width: 100%; height: 100%; position: relative; ' +\r\n                              'overflow: hidden;');\r\n\r\n    // Check for a passed DOM node.\r\n    if (typeof that.elementID === 'object' &&\r\n          typeof that.elementID.appendChild === 'function') {\r\n      that.container = that.elementID;\r\n    } else {\r\n      that.container = document.getElementById(that.elementID);\r\n    }\r\n    that.container.appendChild(that.div);\r\n\r\n    that.parentNode = that.div.parentNode;\r\n\r\n    that.div.appendChild(that.audio);\r\n\r\n    // Bottom Bar\r\n    if (spec.options.bar !== false) {\r\n      that.bar = Bar({ elementID: `player_${that.id}`,\r\n        id: that.id,\r\n        stream: spec.stream,\r\n        media: that.audio,\r\n        options: spec.options });\r\n\r\n      that.div.onmouseover = onmouseover;\r\n      that.div.onmouseout = onmouseout;\r\n    } else {\r\n      // Expose a consistent object to manipulate the media.\r\n      that.media = that.audio;\r\n    }\r\n  } else {\r\n    // It will stop the AudioPlayer and remove it from the HTML\r\n    that.destroy = () => {\r\n      that.audio.pause();\r\n      that.parentNode.removeChild(that.audio);\r\n    };\r\n\r\n    document.body.appendChild(that.audio);\r\n    that.parentNode = document.body;\r\n  }\r\n\r\n  that.audio.srcObject = that.stream;\r\n\r\n  return that;\r\n};\r\n\r\nexport default AudioPlayer;\r\n","/* global document */\r\n\r\nimport { EventDispatcher, StreamEvent } from './Events';\r\nimport ConnectionHelpers from './utils/ConnectionHelpers';\r\nimport ErizoMap from './utils/ErizoMap';\r\nimport VideoPlayer from './views/VideoPlayer';\r\nimport AudioPlayer from './views/AudioPlayer';\r\nimport Logger from './utils/Logger';\r\n\r\n/*\r\n * Class Stream represents a local or a remote Stream in the Room. It will handle the WebRTC\r\n * stream and identify the stream and where it should be drawn.\r\n */\r\nconst Stream = (altConnectionHelpers, specInput) => {\r\n  const spec = specInput;\r\n  const that = EventDispatcher(spec);\r\n\r\n  that.stream = spec.stream;\r\n  that.url = spec.url;\r\n  that.recording = spec.recording;\r\n  that.room = undefined;\r\n  that.showing = false;\r\n  that.local = false;\r\n  that.video = spec.video;\r\n  that.audio = spec.audio;\r\n  that.screen = spec.screen;\r\n  that.videoSize = spec.videoSize;\r\n  that.videoFrameRate = spec.videoFrameRate;\r\n  that.extensionId = spec.extensionId;\r\n  that.desktopStreamId = spec.desktopStreamId;\r\n  that.audioMuted = false;\r\n  that.videoMuted = false;\r\n  that.p2p = false;\r\n  that.ConnectionHelpers =\r\n    altConnectionHelpers === undefined ? ConnectionHelpers : altConnectionHelpers;\r\n\r\n  const onStreamAddedToPC = (evt) => {\r\n    if (evt.stream.id === that.getLabel()) {\r\n      that.emit(StreamEvent({ type: 'added', stream: evt.stream }));\r\n    }\r\n  };\r\n\r\n  const onStreamRemovedFroPC = (evt) => {\r\n    if (evt.stream.id === that.getLabel()) {\r\n      that.emit(StreamEvent({ type: 'removed', stream: that }));\r\n    }\r\n  };\r\n\r\n  const onICEConnectionStateChange = (msg) => {\r\n    that.emit(StreamEvent({ type: 'icestatechanged', msg }));\r\n  };\r\n\r\n  if (that.videoSize !== undefined &&\r\n        (!(that.videoSize instanceof Array) ||\r\n           that.videoSize.length !== 4)) {\r\n    throw Error('Invalid Video Size');\r\n  }\r\n  if (spec.local === undefined || spec.local === true) {\r\n    that.local = true;\r\n  }\r\n\r\n  // Public functions\r\n  that.getID = () => {\r\n    let id;\r\n    // Unpublished local streams don't yet have an ID.\r\n    if (that.local && !spec.streamID) {\r\n      id = 'local';\r\n    } else {\r\n      id = spec.streamID;\r\n    }\r\n    return id;\r\n  };\r\n\r\n  that.getLabel = () => {\r\n    if (that.stream && that.stream.id) {\r\n      return that.stream.id;\r\n    }\r\n    return spec.label;\r\n  };\r\n\r\n  // Get attributes of this stream.\r\n  that.getAttributes = () => spec.attributes;\r\n\r\n  // Changes the attributes of this stream in the room.\r\n  that.setAttributes = (attrs) => {\r\n    if (that.local) {\r\n      that.emit(StreamEvent({ type: 'internal-set-attributes', stream: that, attrs }));\r\n      return;\r\n    }\r\n    Logger.error('Failed to set attributes data. This Stream object has not been published.');\r\n  };\r\n\r\n  that.updateLocalAttributes = (attrs) => {\r\n    spec.attributes = attrs;\r\n  };\r\n\r\n  // Indicates if the stream has audio activated\r\n  that.hasAudio = () => spec.audio !== false && spec.audio !== undefined;\r\n\r\n  // Indicates if the stream has video activated\r\n  that.hasVideo = () => spec.video !== false && spec.video !== undefined;\r\n\r\n  // Indicates if the stream has data activated\r\n  that.hasData = () => spec.data !== false && spec.data !== undefined;\r\n\r\n  // Indicates if the stream has screen activated\r\n  that.hasScreen = () => spec.screen;\r\n\r\n  that.hasMedia = () => spec.audio || spec.video || spec.screen;\r\n\r\n  that.isExternal = () => that.url !== undefined || that.recording !== undefined;\r\n\r\n  that.addPC = (pc, p2pKey = undefined) => {\r\n    if (p2pKey) {\r\n      that.p2p = true;\r\n      if (that.pc === undefined) {\r\n        that.pc = ErizoMap();\r\n      }\r\n      that.pc.add(p2pKey, pc);\r\n      pc.on('ice-state-change', onICEConnectionStateChange);\r\n      return;\r\n    }\r\n    if (that.pc) {\r\n      that.pc.off('add-stream', onStreamAddedToPC);\r\n      that.pc.off('remove-stream', onStreamRemovedFroPC);\r\n      that.pc.off('ice-state-change', onICEConnectionStateChange);\r\n    }\r\n    that.pc = pc;\r\n    that.pc.on('add-stream', onStreamAddedToPC);\r\n    that.pc.on('remove-stream', onStreamRemovedFroPC);\r\n    that.pc.on('ice-state-change', onICEConnectionStateChange);\r\n  };\r\n\r\n  // Sends data through this stream.\r\n  that.sendData = (msg) => {\r\n    if (that.local && that.hasData()) {\r\n      that.emit(StreamEvent({ type: 'internal-send-data', stream: that, msg }));\r\n      return;\r\n    }\r\n    Logger.error('Failed to send data. This Stream object has not been published.');\r\n  };\r\n\r\n  // Initializes the stream and tries to retrieve a stream from local video and audio\r\n  // We need to call this method before we can publish it in the room.\r\n  that.init = () => {\r\n    try {\r\n      if ((spec.audio || spec.video || spec.screen) && spec.url === undefined) {\r\n        Logger.info('Requested access to local media');\r\n        let videoOpt = spec.video;\r\n        if (videoOpt === true || spec.screen === true) {\r\n          videoOpt = videoOpt === true ? {} : videoOpt;\r\n          if (that.videoSize !== undefined) {\r\n            videoOpt.width = {\r\n              min: that.videoSize[0],\r\n              max: that.videoSize[2],\r\n            };\r\n\r\n            videoOpt.height = {\r\n              min: that.videoSize[1],\r\n              max: that.videoSize[3],\r\n            };\r\n          }\r\n\r\n          if (that.videoFrameRate !== undefined) {\r\n            videoOpt.frameRate = {\r\n              min: that.videoFrameRate[0],\r\n              max: that.videoFrameRate[1],\r\n            };\r\n          }\r\n        } else if (spec.screen === true && videoOpt === undefined) {\r\n          videoOpt = true;\r\n        }\r\n        const opt = { video: videoOpt,\r\n          audio: spec.audio,\r\n          fake: spec.fake,\r\n          screen: spec.screen,\r\n          extensionId: that.extensionId,\r\n          desktopStreamId: that.desktopStreamId };\r\n\r\n        that.ConnectionHelpers.GetUserMedia(opt, (stream) => {\r\n          Logger.info('User has granted access to local media.');\r\n          that.stream = stream;\r\n\r\n          that.dispatchEvent(StreamEvent({ type: 'access-accepted' }));\r\n\r\n          that.stream.getTracks().forEach((trackInput) => {\r\n            Logger.info('getTracks', trackInput);\r\n            const track = trackInput;\r\n            track.onended = () => {\r\n              that.stream.getTracks().forEach((secondTrackInput) => {\r\n                const secondTrack = secondTrackInput;\r\n                secondTrack.onended = null;\r\n              });\r\n              const streamEvent = StreamEvent({ type: 'stream-ended',\r\n                stream: that,\r\n                msg: track.kind });\r\n              that.dispatchEvent(streamEvent);\r\n            };\r\n          });\r\n        }, (error) => {\r\n          Logger.error(`Failed to get access to local media. Error code was ${\r\n                           error.code}.`);\r\n          const streamEvent = StreamEvent({ type: 'access-denied', msg: error });\r\n          that.dispatchEvent(streamEvent);\r\n        });\r\n      } else {\r\n        const streamEvent = StreamEvent({ type: 'access-accepted' });\r\n        that.dispatchEvent(streamEvent);\r\n      }\r\n    } catch (e) {\r\n      Logger.error(`Failed to get access to local media. Error was ${e}.`);\r\n      const streamEvent = StreamEvent({ type: 'access-denied', msg: e });\r\n      that.dispatchEvent(streamEvent);\r\n    }\r\n  };\r\n\r\n\r\n  that.close = () => {\r\n    if (that.local) {\r\n      if (that.room !== undefined) {\r\n        that.room.unpublish(that);\r\n      }\r\n      // Remove HTML element\r\n      that.hide();\r\n      if (that.stream !== undefined) {\r\n        that.stream.getTracks().forEach((trackInput) => {\r\n          const track = trackInput;\r\n          track.onended = null;\r\n          track.stop();\r\n        });\r\n      }\r\n      that.stream = undefined;\r\n    }\r\n    if (that.pc && !that.p2p) {\r\n      that.pc.off('add-stream', onStreamAddedToPC);\r\n      that.pc.off('remove-stream', onStreamRemovedFroPC);\r\n      that.pc.off('ice-state-change', onICEConnectionStateChange);\r\n    } else if (that.pc && that.p2p) {\r\n      that.pc.forEach((pc) => {\r\n        pc.off('add-stream', onStreamAddedToPC);\r\n        pc.off('remove-stream', onStreamRemovedFroPC);\r\n        pc.off('ice-state-change', onICEConnectionStateChange);\r\n      });\r\n    }\r\n  };\r\n\r\n  that.play = (elementID, optionsInput) => {\r\n    const options = optionsInput || {};\r\n    that.elementID = elementID;\r\n    let player;\r\n    if (that.hasVideo() || that.hasScreen()) {\r\n      // Draw on HTML\r\n      if (elementID !== undefined) {\r\n        player = VideoPlayer({ id: that.getID(),\r\n          stream: that,\r\n          elementID,\r\n          options });\r\n        that.player = player;\r\n        that.showing = true;\r\n      }\r\n    } else if (that.hasAudio()) {\r\n      player = AudioPlayer({ id: that.getID(),\r\n        stream: that,\r\n        elementID,\r\n        options });\r\n      that.player = player;\r\n      that.showing = true;\r\n    }\r\n  };\r\n\r\n  that.stop = () => {\r\n    if (that.showing) {\r\n      if (that.player !== undefined) {\r\n        that.player.destroy();\r\n        that.showing = false;\r\n      }\r\n    }\r\n  };\r\n\r\n  that.show = that.play;\r\n  that.hide = that.stop;\r\n\r\n  const getFrame = () => {\r\n    if (that.player !== undefined && that.stream !== undefined) {\r\n      const video = that.player.video;\r\n      const style = document.defaultView.getComputedStyle(video);\r\n      const width = parseInt(style.getPropertyValue('width'), 10);\r\n      const height = parseInt(style.getPropertyValue('height'), 10);\r\n      const left = parseInt(style.getPropertyValue('left'), 10);\r\n      const top = parseInt(style.getPropertyValue('top'), 10);\r\n\r\n      let div;\r\n      if (typeof that.elementID === 'object' &&\r\n              typeof that.elementID.appendChild === 'function') {\r\n        div = that.elementID;\r\n      } else {\r\n        div = document.getElementById(that.elementID);\r\n      }\r\n\r\n      const divStyle = document.defaultView.getComputedStyle(div);\r\n      const divWidth = parseInt(divStyle.getPropertyValue('width'), 10);\r\n      const divHeight = parseInt(divStyle.getPropertyValue('height'), 10);\r\n      const canvas = document.createElement('canvas');\r\n\r\n      canvas.id = 'testing';\r\n      canvas.width = divWidth;\r\n      canvas.height = divHeight;\r\n      canvas.setAttribute('style', 'display: none');\r\n      // document.body.appendChild(canvas);\r\n      const context = canvas.getContext('2d');\r\n\r\n      context.drawImage(video, left, top, width, height);\r\n\r\n      return canvas;\r\n    }\r\n    return null;\r\n  };\r\n\r\n  that.getVideoFrameURL = (format) => {\r\n    const canvas = getFrame();\r\n    if (canvas !== null) {\r\n      if (format) {\r\n        return canvas.toDataURL(format);\r\n      }\r\n      return canvas.toDataURL();\r\n    }\r\n    return null;\r\n  };\r\n\r\n  that.getVideoFrame = () => {\r\n    const canvas = getFrame();\r\n    if (canvas !== null) {\r\n      return canvas.getContext('2d').getImageData(0, 0, canvas.width, canvas.height);\r\n    }\r\n    return null;\r\n  };\r\n\r\n  that.checkOptions = (configInput, isUpdate) => {\r\n    const config = configInput;\r\n    // TODO: Check for any incompatible options\r\n    if (isUpdate === true) {  // We are updating the stream\r\n      if (config.audio || config.screen) {\r\n        Logger.warning('Cannot update type of subscription');\r\n        config.audio = undefined;\r\n        config.screen = undefined;\r\n      }\r\n    } else if (that.local === false) { // check what we can subscribe to\r\n      if (config.video === true && that.hasVideo() === false) {\r\n        Logger.warning('Trying to subscribe to video when there is no ' +\r\n                                   'video, won\\'t subscribe to video');\r\n        config.video = false;\r\n      }\r\n      if (config.audio === true && that.hasAudio() === false) {\r\n        Logger.warning('Trying to subscribe to audio when there is no ' +\r\n                                   'audio, won\\'t subscribe to audio');\r\n        config.audio = false;\r\n      }\r\n    }\r\n    if (that.local === false) {\r\n      if (!that.hasVideo() && (config.slideShowMode === true)) {\r\n        Logger.warning('Cannot enable slideShowMode if it is not a video ' +\r\n                                 'subscription, please check your parameters');\r\n        config.slideShowMode = false;\r\n      }\r\n    }\r\n  };\r\n\r\n  const muteStream = (callback = () => {}) => {\r\n    if (that.room && that.room.p2p) {\r\n      Logger.warning('muteAudio/muteVideo are not implemented in p2p streams');\r\n      callback('error');\r\n      return;\r\n    }\r\n    if (that.stream) {\r\n      for (let index = 0; index < that.stream.getVideoTracks().length; index += 1) {\r\n        const track = that.stream.getVideoTracks()[index];\r\n        track.enabled = !that.videoMuted;\r\n      }\r\n    }\r\n    const config = { muteStream: { audio: that.audioMuted, video: that.videoMuted } };\r\n    that.checkOptions(config, true);\r\n    if (that.pc) {\r\n      that.pc.updateSpec(config, that.getID(), callback);\r\n    }\r\n  };\r\n\r\n  that.muteAudio = (isMuted, callback = () => {}) => {\r\n    that.audioMuted = isMuted;\r\n    muteStream(callback);\r\n  };\r\n\r\n  that.muteVideo = (isMuted, callback = () => {}) => {\r\n    that.videoMuted = isMuted;\r\n    muteStream(callback);\r\n  };\r\n\r\n  // eslint-disable-next-line no-underscore-dangle\r\n  that._setStaticQualityLayer = (spatialLayer, temporalLayer, callback = () => {}) => {\r\n    if (that.room && that.room.p2p) {\r\n      Logger.warning('setStaticQualityLayer is not implemented in p2p streams');\r\n      callback('error');\r\n      return;\r\n    }\r\n    const config = { qualityLayer: { spatialLayer, temporalLayer } };\r\n    that.checkOptions(config, true);\r\n    that.pc.updateSpec(config, that.getID(), callback);\r\n  };\r\n\r\n  // eslint-disable-next-line no-underscore-dangle\r\n  that._setDynamicQualityLayer = (callback) => {\r\n    if (that.room && that.room.p2p) {\r\n      Logger.warning('setDynamicQualityLayer is not implemented in p2p streams');\r\n      callback('error');\r\n      return;\r\n    }\r\n    const config = { qualityLayer: { spatialLayer: -1, temporalLayer: -1 } };\r\n    that.checkOptions(config, true);\r\n    that.pc.updateSpec(config, that.getID(), callback);\r\n  };\r\n\r\n  // eslint-disable-next-line no-underscore-dangle\r\n  that._setMinSpatialLayer = (spatialLayer, callback = () => {}) => {\r\n    if (that.room && that.room.p2p) {\r\n      Logger.warning('setMinSpatialLayer is not implemented in p2p streams');\r\n      callback('error');\r\n      return;\r\n    }\r\n    const config = { minLayer: { spatialLayer } };\r\n    that.checkOptions(config, true);\r\n    Logger.debug('Calling updateSpec with config', config);\r\n    that.pc.updateSpec(config, that.getID(), callback);\r\n  };\r\n\r\n  const controlHandler = (handlersInput, publisherSideInput, enable) => {\r\n    let publisherSide = publisherSideInput;\r\n    let handlers = handlersInput;\r\n    if (publisherSide !== true) {\r\n      publisherSide = false;\r\n    }\r\n\r\n    handlers = (typeof handlers === 'string') ? [handlers] : handlers;\r\n    handlers = (handlers instanceof Array) ? handlers : [];\r\n\r\n    if (handlers.length > 0) {\r\n      that.room.sendControlMessage(that, 'control', { name: 'controlhandlers',\r\n        enable,\r\n        publisherSide,\r\n        handlers });\r\n    }\r\n  };\r\n\r\n  that.disableHandlers = (handlers, publisherSide) => {\r\n    controlHandler(handlers, publisherSide, false);\r\n  };\r\n\r\n  that.enableHandlers = (handlers, publisherSide) => {\r\n    controlHandler(handlers, publisherSide, true);\r\n  };\r\n\r\n  that.updateConfiguration = (config, callback = () => {}) => {\r\n    if (config === undefined) { return; }\r\n    if (that.pc) {\r\n      that.checkOptions(config, true);\r\n      if (that.local) {\r\n        if (that.room.p2p) {\r\n          for (let index = 0; index < that.pc.length; index += 1) {\r\n            that.pc[index].updateSpec(config, that.getID(), callback);\r\n          }\r\n        } else {\r\n          that.pc.updateSpec(config, that.getID(), callback);\r\n        }\r\n      } else {\r\n        that.pc.updateSpec(config, that.getID(), callback);\r\n      }\r\n    } else {\r\n      callback('This stream has no peerConnection attached, ignoring');\r\n    }\r\n  };\r\n\r\n  return that;\r\n};\r\n\r\nexport default Stream;\r\n","/* global unescape */\r\n\r\nconst Base64 = (() => {\r\n  let base64Str;\r\n  let base64Count;\r\n\r\n  const END_OF_INPUT = -1;\r\n  const base64Chars = [\r\n    'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H',\r\n    'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P',\r\n    'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X',\r\n    'Y', 'Z', 'a', 'b', 'c', 'd', 'e', 'f',\r\n    'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n',\r\n    'o', 'p', 'q', 'r', 's', 't', 'u', 'v',\r\n    'w', 'x', 'y', 'z', '0', '1', '2', '3',\r\n    '4', '5', '6', '7', '8', '9', '+', '/',\r\n  ];\r\n\r\n  const reverseBase64Chars = [];\r\n\r\n  for (let i = 0; i < base64Chars.length; i += 1) {\r\n    reverseBase64Chars[base64Chars[i]] = i;\r\n  }\r\n\r\n  const setBase64Str = (str) => {\r\n    base64Str = str;\r\n    base64Count = 0;\r\n  };\r\n\r\n  const readBase64 = () => {\r\n    if (!base64Str) {\r\n      return END_OF_INPUT;\r\n    }\r\n    if (base64Count >= base64Str.length) {\r\n      return END_OF_INPUT;\r\n    }\r\n    const c = base64Str.charCodeAt(base64Count) & 0xff;  // eslint-disable-line no-bitwise\r\n    base64Count += 1;\r\n    return c;\r\n  };\r\n\r\n  const encodeBase64 = (str) => {\r\n    let result;\r\n    let lineCount;\r\n    let done;\r\n    setBase64Str(str);\r\n    result = '';\r\n    const inBuffer = new Array(3);\r\n    lineCount = 0;\r\n    done = false;\r\n    while (!done && (inBuffer[0] = readBase64()) !== END_OF_INPUT) {\r\n      inBuffer[1] = readBase64();\r\n      inBuffer[2] = readBase64();\r\n      // eslint-disable-next-line no-bitwise\r\n      result += (base64Chars[inBuffer[0] >> 2]);\r\n      if (inBuffer[1] !== END_OF_INPUT) {\r\n        // eslint-disable-next-line no-bitwise\r\n        result += (base64Chars[((inBuffer[0] << 4) & 0x30) | (inBuffer[1] >> 4)]);\r\n        if (inBuffer[2] !== END_OF_INPUT) {\r\n          // eslint-disable-next-line no-bitwise\r\n          result += (base64Chars[((inBuffer[1] << 2) & 0x3c) | (inBuffer[2] >> 6)]);\r\n          // eslint-disable-next-line no-bitwise\r\n          result += (base64Chars[inBuffer[2] & 0x3F]);\r\n        } else {\r\n          // eslint-disable-next-line no-bitwise\r\n          result += (base64Chars[((inBuffer[1] << 2) & 0x3c)]);\r\n          result = `${result}=`;\r\n          done = true;\r\n        }\r\n      } else {\r\n        // eslint-disable-next-line no-bitwise\r\n        result += (base64Chars[((inBuffer[0] << 4) & 0x30)]);\r\n        result = `${result}=`;\r\n        result = `${result}=`;\r\n        done = true;\r\n      }\r\n      lineCount += 4;\r\n      if (lineCount >= 76) {\r\n        result = `${result}\\n`;\r\n        lineCount = 0;\r\n      }\r\n    }\r\n    return result;\r\n  };\r\n\r\n  const readReverseBase64 = () => {\r\n    if (!base64Str) {\r\n      return END_OF_INPUT;\r\n    }\r\n    // eslint-disable-next-line no-constant-condition\r\n    while (true) {\r\n      if (base64Count >= base64Str.length) {\r\n        return END_OF_INPUT;\r\n      }\r\n      const nextCharacter = base64Str.charAt(base64Count);\r\n      base64Count += 1;\r\n      if (reverseBase64Chars[nextCharacter]) {\r\n        return reverseBase64Chars[nextCharacter];\r\n      }\r\n      if (nextCharacter === 'A') {\r\n        return 0;\r\n      }\r\n    }\r\n  };\r\n\r\n  const ntos = (value) => {\r\n    let n = value.toString(16);\r\n    if (n.length === 1) {\r\n      n = `0${n}`;\r\n    }\r\n    n = `%${n}`;\r\n    return unescape(n);\r\n  };\r\n\r\n  const decodeBase64 = (str) => {\r\n    let result;\r\n    let done;\r\n    setBase64Str(str);\r\n    result = '';\r\n    const inBuffer = new Array(4);\r\n    done = false;\r\n    while (!done &&\r\n              (inBuffer[0] = readReverseBase64()) !== END_OF_INPUT &&\r\n              (inBuffer[1] = readReverseBase64()) !== END_OF_INPUT) {\r\n      inBuffer[2] = readReverseBase64();\r\n      inBuffer[3] = readReverseBase64();\r\n      // eslint-disable-next-line no-bitwise,no-mixed-operators\r\n      result += ntos((((inBuffer[0] << 2) & 0xff) | inBuffer[1] >> 4));\r\n      if (inBuffer[2] !== END_OF_INPUT) {\r\n        // eslint-disable-next-line no-bitwise,no-mixed-operators\r\n        result += ntos((((inBuffer[1] << 4) & 0xff) | inBuffer[2] >> 2));\r\n        if (inBuffer[3] !== END_OF_INPUT) {\r\n          // eslint-disable-next-line no-bitwise\r\n          result += ntos((((inBuffer[2] << 6) & 0xff) | inBuffer[3]));\r\n        } else {\r\n          done = true;\r\n        }\r\n      } else {\r\n        done = true;\r\n      }\r\n    }\r\n    return result;\r\n  };\r\n\r\n  return {\r\n    encodeBase64,\r\n    decodeBase64,\r\n  };\r\n})();\r\n\r\nexport default Base64;\r\n","import ErizoConnectionManager from './ErizoConnectionManager';\r\nimport ConnectionHelpers from './utils/ConnectionHelpers';\r\nimport { EventDispatcher, StreamEvent, RoomEvent } from './Events';\r\nimport { Socket } from './Socket';\r\nimport Stream from './Stream';\r\nimport ErizoMap from './utils/ErizoMap';\r\nimport Base64 from './utils/Base64';\r\nimport Logger from './utils/Logger';\r\n\r\n/*\r\n * Class Room represents a Licode Room. It will handle the connection, local stream publication and\r\n * remote stream subscription.\r\n * Typical Room initialization would be:\r\n * var room = Erizo.Room({token:'213h8012hwduahd-321ueiwqewq'});\r\n * It also handles RoomEvents and StreamEvents. For example:\r\n * Event 'room-connected' points out that the user has been successfully connected to the room.\r\n * Event 'room-disconnected' shows that the user has been already disconnected.\r\n * Event 'stream-added' indicates that there is a new stream available in the room.\r\n * Event 'stream-removed' shows that a previous available stream has been removed from the room.\r\n */\r\nconst Room = (altIo, altConnectionHelpers, altConnectionManager, specInput) => {\r\n  const spec = specInput;\r\n  const that = EventDispatcher(specInput);\r\n  const DISCONNECTED = 0;\r\n  const CONNECTING = 1;\r\n  const CONNECTED = 2;\r\n\r\n\r\n  that.remoteStreams = ErizoMap();\r\n  that.localStreams = ErizoMap();\r\n  that.roomID = '';\r\n  that.state = DISCONNECTED;\r\n  that.p2p = false;\r\n  that.ConnectionHelpers =\r\n    altConnectionHelpers === undefined ? ConnectionHelpers : altConnectionHelpers;\r\n\r\n  that.erizoConnectionManager =\r\n    altConnectionManager === undefined ? new ErizoConnectionManager()\r\n    : new altConnectionManager.ErizoConnectionManager();\r\n\r\n  let socket = Socket(altIo);\r\n  that.socket = socket;\r\n  let remoteStreams = that.remoteStreams;\r\n  let localStreams = that.localStreams;\r\n  // Private functions\r\n  const removeStream = (streamInput) => {\r\n    const stream = streamInput;\r\n    stream.removeAllListeners();\r\n\r\n    if (stream.pc && !that.p2p) {\r\n      stream.pc.removeStream(stream);\r\n    }\r\n\r\n    Logger.debug('Removed stream');\r\n    if (stream.stream) {\r\n      // Remove HTML element\r\n      stream.hide();\r\n\r\n      stream.stop();\r\n      stream.close();\r\n      delete stream.stream;\r\n    }\r\n\r\n    // Close PC stream\r\n    if (stream.pc) {\r\n      if (stream.local && that.p2p) {\r\n        stream.pc.forEach((connection, id) => {\r\n          connection.close();\r\n          stream.pc.remove(id);\r\n        });\r\n      } else {\r\n        that.erizoConnectionManager.maybeCloseConnection(stream.pc);\r\n        delete stream.pc;\r\n      }\r\n    }\r\n  };\r\n\r\n  const onStreamFailed = (streamInput, message) => {\r\n    const stream = streamInput;\r\n    if (that.state !== DISCONNECTED && stream && !stream.failed) {\r\n      stream.failed = true;\r\n      const streamFailedEvt = StreamEvent(\r\n        { type: 'stream-failed',\r\n          msg: message || 'Stream failed after connection',\r\n          stream });\r\n      that.dispatchEvent(streamFailedEvt);\r\n      if (stream.local) {\r\n        that.unpublish(stream);\r\n      } else {\r\n        that.unsubscribe(stream);\r\n      }\r\n    }\r\n  };\r\n\r\n  const dispatchStreamSubscribed = (streamInput, evt) => {\r\n    const stream = streamInput;\r\n    // Draw on html\r\n    Logger.info('Stream subscribed');\r\n    stream.stream = evt.stream;\r\n    if (!that.p2p) {\r\n      stream.pc.addStream(stream);\r\n    }\r\n    const evt2 = StreamEvent({ type: 'stream-subscribed', stream });\r\n    that.dispatchEvent(evt2);\r\n  };\r\n\r\n  const getP2PConnectionOptions = (stream, peerSocket) => {\r\n    const options = {\r\n      callback(msg) {\r\n        socket.sendSDP('signaling_message', {\r\n          streamId: stream.getID(),\r\n          peerSocket,\r\n          msg });\r\n      },\r\n      audio: stream.hasAudio(),\r\n      video: stream.hasVideo(),\r\n      iceServers: that.iceServers,\r\n      maxAudioBW: stream.maxAudioBW,\r\n      maxVideoBW: stream.maxVideoBW,\r\n      limitMaxAudioBW: spec.maxAudioBW,\r\n      limitMaxVideoBW: spec.maxVideoBW,\r\n      forceTurn: stream.forceTurn,\r\n      p2p: true,\r\n    };\r\n    return options;\r\n  };\r\n\r\n  const createRemoteStreamP2PConnection = (streamInput, peerSocket) => {\r\n    const stream = streamInput;\r\n    stream.addPC(that.erizoConnectionManager.getOrBuildErizoConnection(\r\n      getP2PConnectionOptions(stream, peerSocket)));\r\n    stream.on('added', dispatchStreamSubscribed.bind(null, stream));\r\n    stream.on('icestatechanged', (evt) => {\r\n      Logger.info(`${stream.getID()} - iceConnectionState: ${evt.msg.state}`);\r\n      if (evt.msg.state === 'failed') {\r\n        onStreamFailed(stream);\r\n      }\r\n    });\r\n  };\r\n\r\n  const createLocalStreamP2PConnection = (streamInput, peerSocket) => {\r\n    const stream = streamInput;\r\n    const connection = that.erizoConnectionManager.getOrBuildErizoConnection(\r\n      getP2PConnectionOptions(stream, peerSocket));\r\n\r\n    stream.addPC(connection, peerSocket);\r\n\r\n    stream.on('icestatechanged', (evt) => {\r\n      Logger.info(`${stream.getID()} - iceConnectionState: ${evt.msg.state}`);\r\n      if (evt.msg.state === 'failed') {\r\n        stream.pc.get(peerSocket).close();\r\n        stream.pc.remove(peerSocket);\r\n      }\r\n    });\r\n    connection.addStream(stream);\r\n    connection.createOffer();\r\n  };\r\n\r\n  const removeLocalStreamP2PConnection = (streamInput, peerSocket) => {\r\n    const stream = streamInput;\r\n    if (stream.pc === undefined || !stream.pc.has(peerSocket)) {\r\n      return;\r\n    }\r\n    const pc = stream.pc.get(peerSocket);\r\n    pc.close();\r\n    stream.pc.remove(peerSocket);\r\n  };\r\n\r\n  const getErizoConnectionOptions = (stream, options, isRemote) => {\r\n    const connectionOpts = {\r\n      callback(message, streamId = stream.getID()) {\r\n        Logger.info('Sending message', message, stream.getID(), streamId);\r\n        socket.sendSDP('signaling_message', {\r\n          streamId,\r\n          msg: message,\r\n          browser: stream.pc && stream.pc.browser }, undefined, () => {});\r\n      },\r\n      nop2p: true,\r\n      audio: options.audio && stream.hasAudio(),\r\n      video: options.video && stream.hasVideo(),\r\n      maxAudioBW: options.maxAudioBW,\r\n      maxVideoBW: options.maxVideoBW,\r\n      limitMaxAudioBW: spec.maxAudioBW,\r\n      limitMaxVideoBW: spec.maxVideoBW,\r\n      label: stream.getLabel(),\r\n      iceServers: that.iceServers,\r\n      forceTurn: stream.forceTurn,\r\n      p2p: false,\r\n    };\r\n    if (!isRemote) {\r\n      connectionOpts.simulcast = options.simulcast;\r\n      connectionOpts.startVideoBW = options.startVideoBW;\r\n      connectionOpts.hardMinVideoBW = options.hardMinVideoBW;\r\n    }\r\n    return connectionOpts;\r\n  };\r\n\r\n  const createRemoteStreamErizoConnection = (streamInput, erizoId, options) => {\r\n    const stream = streamInput;\r\n    stream.addPC(that.erizoConnectionManager.getOrBuildErizoConnection(\r\n      getErizoConnectionOptions(stream, options, true), erizoId, spec.singlePC));\r\n    stream.on('added', dispatchStreamSubscribed.bind(null, stream));\r\n    stream.on('icestatechanged', (evt) => {\r\n      Logger.info(`${stream.getID()} - iceConnectionState: ${evt.msg.state}`);\r\n      if (evt.msg.state === 'failed') {\r\n        onStreamFailed(stream);\r\n      }\r\n    });\r\n    stream.pc.createOffer(true, false, stream.getID());\r\n  };\r\n\r\n  const createLocalStreamErizoConnection = (streamInput, erizoId, options) => {\r\n    const stream = streamInput;\r\n    stream.addPC(that.erizoConnectionManager.getOrBuildErizoConnection(\r\n      getErizoConnectionOptions(stream, options), erizoId, spec.singlePC));\r\n\r\n    stream.on('icestatechanged', (evt) => {\r\n      Logger.info(`${stream.getID()} - iceConnectionState: ${evt.msg.state}`);\r\n      if (evt.msg.state === 'failed') {\r\n        onStreamFailed(stream);\r\n      }\r\n    });\r\n    stream.pc.addStream(stream);\r\n    if (!options.createOffer) { stream.pc.createOffer(false, spec.singlePC, stream.getID()); }\r\n  };\r\n\r\n  // We receive an event with a new stream in the room.\r\n  // type can be \"media\" or \"data\"\r\n\r\n  const socketOnAddStream = (arg) => {\r\n    if (remoteStreams.has(arg.id)) {\r\n      return;\r\n    }\r\n    const stream = Stream(that.Connection, { streamID: arg.id,\r\n      local: localStreams.has(arg.id),\r\n      audio: arg.audio,\r\n      video: arg.video,\r\n      data: arg.data,\r\n      label: arg.label,\r\n      screen: arg.screen,\r\n      attributes: arg.attributes });\r\n    stream.room = that;\r\n    remoteStreams.add(arg.id, stream);\r\n    const evt = StreamEvent({ type: 'stream-added', stream });\r\n    that.dispatchEvent(evt);\r\n  };\r\n\r\n  const socketOnErizoMessage = (arg) => {\r\n    let stream;\r\n    if (arg.peerId) {\r\n      stream = remoteStreams.get(arg.peerId);\r\n    } else {\r\n      stream = localStreams.get(arg.streamId);\r\n    }\r\n\r\n    if (stream && stream.pc && !stream.failed) {\r\n      stream.pc.processSignalingMessage(arg.mess);\r\n    }\r\n  };\r\n\r\n  const socketOnPeerMessage = (arg) => {\r\n    let stream = localStreams.get(arg.streamId);\r\n\r\n    if (stream && !stream.failed) {\r\n      stream.pc.get(arg.peerSocket).processSignalingMessage(arg.msg);\r\n    } else {\r\n      stream = remoteStreams.get(arg.streamId);\r\n\r\n      if (!stream.pc) {\r\n        createRemoteStreamP2PConnection(stream, arg.peerSocket);\r\n      }\r\n      stream.pc.processSignalingMessage(arg.msg);\r\n    }\r\n  };\r\n\r\n  const socketOnPublishMe = (arg) => {\r\n    const myStream = localStreams.get(arg.streamId);\r\n\r\n    createLocalStreamP2PConnection(myStream, arg.peerSocket);\r\n  };\r\n\r\n  const socketOnUnpublishMe = (arg) => {\r\n    const myStream = localStreams.get(arg.streamId);\r\n    if (myStream) {\r\n      removeLocalStreamP2PConnection(myStream, arg.peerSocket);\r\n    }\r\n  };\r\n\r\n  const socketOnBandwidthAlert = (arg) => {\r\n    Logger.info('Bandwidth Alert on', arg.streamID, 'message',\r\n                        arg.message, 'BW:', arg.bandwidth);\r\n    if (arg.streamID) {\r\n      const stream = remoteStreams.get(arg.streamID);\r\n      if (stream && !stream.failed) {\r\n        const evt = StreamEvent({ type: 'bandwidth-alert',\r\n          stream,\r\n          msg: arg.message,\r\n          bandwidth: arg.bandwidth });\r\n        stream.dispatchEvent(evt);\r\n      }\r\n    }\r\n  };\r\n\r\n  // We receive an event of new data in one of the streams\r\n  const socketOnDataStream = (arg) => {\r\n    const stream = remoteStreams.get(arg.id);\r\n    const evt = StreamEvent({ type: 'stream-data', msg: arg.msg, stream });\r\n    stream.dispatchEvent(evt);\r\n  };\r\n\r\n  // We receive an event of new data in one of the streams\r\n  const socketOnUpdateAttributeStream = (arg) => {\r\n    const stream = remoteStreams.get(arg.id);\r\n    const evt = StreamEvent({ type: 'stream-attributes-update',\r\n      attrs: arg.attrs,\r\n      stream });\r\n    stream.updateLocalAttributes(arg.attrs);\r\n    stream.dispatchEvent(evt);\r\n  };\r\n\r\n  // We receive an event of a stream removed from the room\r\n  const socketOnRemoveStream = (arg) => {\r\n    let stream = localStreams.get(arg.id);\r\n    if (stream) {\r\n      onStreamFailed(stream);\r\n      return;\r\n    }\r\n    stream = remoteStreams.get(arg.id);\r\n    if (stream) {\r\n      removeStream(stream);\r\n      remoteStreams.remove(arg.id);\r\n      const evt = StreamEvent({ type: 'stream-removed', stream });\r\n      that.dispatchEvent(evt);\r\n    }\r\n  };\r\n\r\n  // The socket has disconnected\r\n  const socketOnDisconnect = () => {\r\n    Logger.info('Socket disconnected, lost connection to ErizoController');\r\n    if (that.state !== DISCONNECTED) {\r\n      Logger.error('Unexpected disconnection from ErizoController');\r\n      const disconnectEvt = RoomEvent({ type: 'room-disconnected',\r\n        message: 'unexpected-disconnection' });\r\n      that.dispatchEvent(disconnectEvt);\r\n    }\r\n  };\r\n\r\n  const socketOnICEConnectionFailed = (arg) => {\r\n    let stream;\r\n    if (!arg.streamId) {\r\n      return;\r\n    }\r\n    const message = `ICE Connection Failed on ${arg.type} ${arg.streamId} ${that.state}`;\r\n    Logger.error(message);\r\n    if (arg.type === 'publish') {\r\n      stream = localStreams.get(arg.streamId);\r\n    } else {\r\n      stream = remoteStreams.get(arg.streamId);\r\n    }\r\n    onStreamFailed(stream, message);\r\n  };\r\n\r\n  const socketOnError = (e) => {\r\n    Logger.error('Cannot connect to erizo Controller');\r\n    const connectEvt = RoomEvent({ type: 'room-error', message: e });\r\n    that.dispatchEvent(connectEvt);\r\n  };\r\n\r\n  const sendDataSocketFromStreamEvent = (evt) => {\r\n    const stream = evt.stream;\r\n    const msg = evt.msg;\r\n    if (stream.local) {\r\n      socket.sendMessage('sendDataStream', { id: stream.getID(), msg });\r\n    } else {\r\n      Logger.error('You can not send data through a remote stream');\r\n    }\r\n  };\r\n\r\n  const updateAttributesFromStreamEvent = (evt) => {\r\n    const stream = evt.stream;\r\n    const attrs = evt.attrs;\r\n    if (stream.local) {\r\n      stream.updateLocalAttributes(attrs);\r\n      socket.sendMessage('updateStreamAttributes', { id: stream.getID(), attrs });\r\n    } else {\r\n      Logger.error('You can not update attributes in a remote stream');\r\n    }\r\n  };\r\n\r\n  const socketEventToArgs = (func, event) => {\r\n    if (event.args) {\r\n      func(...event.args);\r\n    } else {\r\n      func();\r\n    }\r\n  };\r\n\r\n  const createSdpConstraints = (type, stream, options) => ({\r\n    state: type,\r\n    data: stream.hasData(),\r\n    audio: stream.hasAudio(),\r\n    video: stream.hasVideo(),\r\n    label: stream.getLabel(),\r\n    screen: stream.hasScreen(),\r\n    attributes: stream.getAttributes(),\r\n    metadata: options.metadata,\r\n    createOffer: options.createOffer,\r\n    muteStream: options.muteStream,\r\n  });\r\n\r\n  const populateStreamFunctions = (id, streamInput, error, callback = () => {}) => {\r\n    const stream = streamInput;\r\n    if (id === null) {\r\n      Logger.error('Error when publishing the stream', error);\r\n      // Unauth -1052488119\r\n      // Network -5\r\n      callback(undefined, error);\r\n      return;\r\n    }\r\n    Logger.info('Stream published');\r\n    stream.getID = () => id;\r\n    stream.on('internal-send-data', sendDataSocketFromStreamEvent);\r\n    stream.on('internal-set-attributes', updateAttributesFromStreamEvent);\r\n    localStreams.add(id, stream);\r\n    stream.room = that;\r\n    callback(id);\r\n  };\r\n\r\n  const publishExternal = (streamInput, options, callback = () => {}) => {\r\n    const stream = streamInput;\r\n    let type;\r\n    let arg;\r\n    if (stream.url) {\r\n      type = 'url';\r\n      arg = stream.url;\r\n    } else {\r\n      type = 'recording';\r\n      arg = stream.recording;\r\n    }\r\n    Logger.info('Checking publish options for', stream.getID());\r\n    stream.checkOptions(options);\r\n    socket.sendSDP('publish', createSdpConstraints(type, stream, options), arg,\r\n      (id, error) => {\r\n        populateStreamFunctions(id, stream, error, callback);\r\n      });\r\n  };\r\n\r\n  const publishP2P = (streamInput, options, callback = () => {}) => {\r\n    const stream = streamInput;\r\n    // We save them now to be used when actually publishing in P2P mode.\r\n    stream.maxAudioBW = options.maxAudioBW;\r\n    stream.maxVideoBW = options.maxVideoBW;\r\n    socket.sendSDP('publish', createSdpConstraints('p2p', stream, options), undefined, (id, error) => {\r\n      populateStreamFunctions(id, stream, error, callback);\r\n    });\r\n  };\r\n\r\n  const publishData = (streamInput, options, callback = () => {}) => {\r\n    const stream = streamInput;\r\n    socket.sendSDP('publish', createSdpConstraints('data', stream, options), undefined, (id, error) => {\r\n      populateStreamFunctions(id, stream, error, callback);\r\n    });\r\n  };\r\n\r\n  const publishErizo = (streamInput, options, callback = () => {}) => {\r\n    const stream = streamInput;\r\n    Logger.info('Publishing to Erizo Normally, is createOffer', options.createOffer);\r\n    const constraints = createSdpConstraints('erizo', stream, options);\r\n    constraints.minVideoBW = options.minVideoBW;\r\n    constraints.maxVideoBW = options.maxVideoBW;\r\n    constraints.scheme = options.scheme;\r\n\r\n    socket.sendSDP('publish', constraints, undefined, (id, erizoId, error) => {\r\n      if (id === null) {\r\n        Logger.error('Error publishing stream', error);\r\n        callback(undefined, error);\r\n        return;\r\n      }\r\n      populateStreamFunctions(id, stream, error, undefined);\r\n      createLocalStreamErizoConnection(stream, erizoId, options);\r\n      callback(id);\r\n    });\r\n  };\r\n\r\n  const getVideoConstraints = (stream, video) => {\r\n    const hasVideo = video && stream.hasVideo();\r\n    const width = video && video.width;\r\n    const height = video && video.height;\r\n    const frameRate = video && video.frameRate;\r\n    if (width || height || frameRate) {\r\n      return { width, height, frameRate };\r\n    }\r\n    return hasVideo;\r\n  };\r\n\r\n  const subscribeErizo = (streamInput, optionsInput, callback = () => {}) => {\r\n    const stream = streamInput;\r\n    const options = optionsInput;\r\n    options.maxVideoBW = options.maxVideoBW || spec.defaultVideoBW;\r\n    if (options.maxVideoBW > spec.maxVideoBW) {\r\n      options.maxVideoBW = spec.maxVideoBW;\r\n    }\r\n    options.audio = (options.audio === undefined) ? true : options.audio;\r\n    options.video = (options.video === undefined) ? true : options.video;\r\n    options.data = (options.data === undefined) ? true : options.data;\r\n    stream.checkOptions(options);\r\n    const constraint = { streamId: stream.getID(),\r\n      audio: options.audio && stream.hasAudio(),\r\n      video: getVideoConstraints(stream, options.video),\r\n      maxVideoBW: options.maxVideoBW,\r\n      data: options.data && stream.hasData(),\r\n      browser: that.ConnectionHelpers.getBrowser(),\r\n      createOffer: options.createOffer,\r\n      metadata: options.metadata,\r\n      muteStream: options.muteStream,\r\n      slideShowMode: options.slideShowMode };\r\n    socket.sendSDP('subscribe', constraint, undefined, (result, erizoId, error) => {\r\n      if (result === null) {\r\n        Logger.error('Error subscribing to stream ', error);\r\n        callback(undefined, error);\r\n        return;\r\n      }\r\n\r\n      Logger.info('Subscriber added');\r\n      createRemoteStreamErizoConnection(stream, erizoId, options);\r\n\r\n      callback(true);\r\n    });\r\n  };\r\n\r\n  const subscribeData = (streamInput, options, callback = () => {}) => {\r\n    const stream = streamInput;\r\n    socket.sendSDP('subscribe',\r\n      { streamId: stream.getID(),\r\n        data: options.data,\r\n        metadata: options.metadata },\r\n      undefined, (result, error) => {\r\n        if (result === null) {\r\n          Logger.error('Error subscribing to stream ', error);\r\n          callback(undefined, error);\r\n          return;\r\n        }\r\n        Logger.info('Stream subscribed');\r\n        const evt = StreamEvent({ type: 'stream-subscribed', stream });\r\n        that.dispatchEvent(evt);\r\n        callback(true);\r\n      });\r\n  };\r\n\r\n  const clearAll = () => {\r\n    that.state = DISCONNECTED;\r\n    socket.state = socket.DISCONNECTED;\r\n\r\n    // Remove all streams\r\n    remoteStreams.forEach((stream, id) => {\r\n      removeStream(stream);\r\n      remoteStreams.remove(id);\r\n      if (stream && !stream.failed) {\r\n        const evt2 = StreamEvent({ type: 'stream-removed', stream });\r\n        that.dispatchEvent(evt2);\r\n      }\r\n    });\r\n    remoteStreams = ErizoMap();\r\n\r\n    // Close Peer Connections\r\n    localStreams.forEach((stream, id) => {\r\n      removeStream(stream);\r\n      localStreams.remove(id);\r\n    });\r\n    localStreams = ErizoMap();\r\n\r\n    // Close socket\r\n    try {\r\n      socket.disconnect();\r\n    } catch (error) {\r\n      Logger.debug('Socket already disconnected');\r\n    }\r\n    socket = undefined;\r\n  };\r\n\r\n  // Public functions\r\n\r\n  // It stablishes a connection to the room.\r\n  // Once it is done it throws a RoomEvent(\"room-connected\")\r\n  that.connect = (options = {}) => {\r\n    const token = Base64.decodeBase64(spec.token);\r\n\r\n    if (that.state !== DISCONNECTED) {\r\n      Logger.warning('Room already connected');\r\n    }\r\n\r\n    // 1- Connect to Erizo-Controller\r\n    that.state = CONNECTING;\r\n    socket.connect(JSON.parse(token), options, (response) => {\r\n      let stream;\r\n      const streamList = [];\r\n      const streams = response.streams || [];\r\n      const roomId = response.id;\r\n\r\n      that.p2p = response.p2p;\r\n      that.iceServers = response.iceServers;\r\n      that.state = CONNECTED;\r\n      spec.singlePC = response.singlePC;\r\n      spec.defaultVideoBW = response.defaultVideoBW;\r\n      spec.maxVideoBW = response.maxVideoBW;\r\n\r\n      // 2- Retrieve list of streams\r\n      const streamIndices = Object.keys(streams);\r\n      for (let index = 0; index < streamIndices.length; index += 1) {\r\n        const arg = streams[streamIndices[index]];\r\n        stream = Stream(that.ConnectionHelpers, { streamID: arg.id,\r\n          local: false,\r\n          audio: arg.audio,\r\n          video: arg.video,\r\n          data: arg.data,\r\n          label: arg.label,\r\n          screen: arg.screen,\r\n          attributes: arg.attributes });\r\n        stream.room = that;\r\n        streamList.push(stream);\r\n        remoteStreams.add(arg.id, stream);\r\n      }\r\n\r\n      // 3 - Update RoomID\r\n      that.roomID = roomId;\r\n\r\n      Logger.info(`Connected to room ${that.roomID}`);\r\n\r\n      const connectEvt = RoomEvent({ type: 'room-connected', streams: streamList });\r\n      that.dispatchEvent(connectEvt);\r\n    }, (error) => {\r\n      Logger.error(`Not Connected! Error: ${error}`);\r\n      const connectEvt = RoomEvent({ type: 'room-error', message: error });\r\n      that.dispatchEvent(connectEvt);\r\n    });\r\n  };\r\n\r\n  // It disconnects from the room, dispatching a new RoomEvent(\"room-disconnected\")\r\n  that.disconnect = () => {\r\n    Logger.debug('Disconnection requested');\r\n    // 1- Disconnect from room\r\n    const disconnectEvt = RoomEvent({ type: 'room-disconnected',\r\n      message: 'expected-disconnection' });\r\n    that.dispatchEvent(disconnectEvt);\r\n  };\r\n\r\n  // It publishes the stream provided as argument. Once it is added it throws a\r\n  // StreamEvent(\"stream-added\").\r\n  that.publish = (streamInput, optionsInput = {}, callback = () => {}) => {\r\n    const stream = streamInput;\r\n    const options = optionsInput;\r\n\r\n    options.maxVideoBW = options.maxVideoBW || spec.defaultVideoBW;\r\n    if (options.maxVideoBW > spec.maxVideoBW) {\r\n      options.maxVideoBW = spec.maxVideoBW;\r\n    }\r\n\r\n    if (options.minVideoBW === undefined) {\r\n      options.minVideoBW = 0;\r\n    }\r\n\r\n    if (options.minVideoBW > spec.defaultVideoBW) {\r\n      options.minVideoBW = spec.defaultVideoBW;\r\n    }\r\n\r\n    stream.forceTurn = options.forceTurn;\r\n\r\n    options.simulcast = options.simulcast || false;\r\n\r\n    options.muteStream = {\r\n      audio: stream.audioMuted,\r\n      video: stream.videoMuted,\r\n    };\r\n\r\n    // 1- If the stream is not local or it is a failed stream we do nothing.\r\n    if (stream && stream.local && !stream.failed && !localStreams.has(stream.getID())) {\r\n      // 2- Publish Media Stream to Erizo-Controller\r\n      if (stream.hasMedia()) {\r\n        if (stream.isExternal()) {\r\n          publishExternal(stream, options, callback);\r\n        } else if (that.p2p) {\r\n          publishP2P(stream, options, callback);\r\n        } else {\r\n          publishErizo(stream, options, callback);\r\n        }\r\n      } else if (stream.hasData()) {\r\n        publishData(stream, options, callback);\r\n      }\r\n    } else {\r\n      Logger.error('Trying to publish invalid stream');\r\n      callback(undefined, 'Invalid Stream');\r\n    }\r\n  };\r\n\r\n  // Returns callback(id, error)\r\n  that.startRecording = (stream, callback = () => {}) => {\r\n    if (stream === undefined) {\r\n      Logger.error('Trying to start recording on an invalid stream', stream);\r\n      callback(undefined, 'Invalid Stream');\r\n      return;\r\n    }\r\n    Logger.debug(`Start Recording stream: ${stream.getID()}`);\r\n    socket.sendMessage('startRecorder', { to: stream.getID() }, (id, error) => {\r\n      if (id === null) {\r\n        Logger.error('Error on start recording', error);\r\n        callback(undefined, error);\r\n        return;\r\n      }\r\n\r\n      Logger.info('Start recording', id);\r\n      callback(id);\r\n    });\r\n  };\r\n\r\n  // Returns callback(id, error)\r\n  that.stopRecording = (recordingId, callback = () => {}) => {\r\n    socket.sendMessage('stopRecorder', { id: recordingId }, (result, error) => {\r\n      if (result === null) {\r\n        Logger.error('Error on stop recording', error);\r\n        callback(undefined, error);\r\n        return;\r\n      }\r\n      Logger.info('Stop recording', recordingId);\r\n      callback(true);\r\n    });\r\n  };\r\n\r\n  // It unpublishes the local stream in the room, dispatching a StreamEvent(\"stream-removed\")\r\n  that.unpublish = (streamInput, callback = () => {}) => {\r\n    const stream = streamInput;\r\n    // Unpublish stream from Erizo-Controller\r\n    if (stream && stream.local) {\r\n      // Media stream\r\n      socket.sendMessage('unpublish', stream.getID(), (result, error) => {\r\n        if (result === null) {\r\n          Logger.error('Error unpublishing stream', error);\r\n          callback(undefined, error);\r\n          return;\r\n        }\r\n\r\n        delete stream.failed;\r\n        callback(true);\r\n      });\r\n\r\n      Logger.info('Stream unpublished');\r\n      stream.room = undefined;\r\n      if (stream.hasMedia() && !stream.isExternal()) {\r\n        const localStream = localStreams.has(stream.getID()) ?\r\n                              localStreams.get(stream.getID()) : stream;\r\n        removeStream(localStream);\r\n      }\r\n      localStreams.remove(stream.getID());\r\n\r\n      stream.getID = () => {};\r\n      stream.off('internal-send-data', sendDataSocketFromStreamEvent);\r\n      stream.off('internal-set-attributes', updateAttributesFromStreamEvent);\r\n    } else {\r\n      const error = 'Cannot unpublish, stream does not exist or is not local';\r\n      Logger.error(error);\r\n      callback(undefined, error);\r\n    }\r\n  };\r\n\r\n  that.sendControlMessage = (stream, type, action) => {\r\n    if (stream && stream.getID()) {\r\n      const msg = { type: 'control', action };\r\n      socket.sendSDP('signaling_message', { streamId: stream.getID(), msg });\r\n    }\r\n  };\r\n\r\n  // It subscribe to a remote stream and draws it inside the HTML tag given by the ID='elementID'\r\n  that.subscribe = (streamInput, optionsInput = {}, callback = () => {}) => {\r\n    const stream = streamInput;\r\n    const options = optionsInput;\r\n\r\n    if (stream && !stream.local && !stream.failed) {\r\n      if (stream.hasMedia()) {\r\n        // 1- Subscribe to Stream\r\n        if (!stream.hasVideo() && !stream.hasScreen()) {\r\n          options.video = false;\r\n        }\r\n        if (!stream.hasAudio()) {\r\n          options.audio = false;\r\n        }\r\n\r\n        options.muteStream = {\r\n          audio: stream.audioMuted,\r\n          video: stream.videoMuted,\r\n        };\r\n\r\n        stream.forceTurn = options.forceTurn;\r\n\r\n        if (that.p2p) {\r\n          socket.sendSDP('subscribe', { streamId: stream.getID(), metadata: options.metadata });\r\n          callback(true);\r\n        } else {\r\n          subscribeErizo(stream, options, callback);\r\n        }\r\n      } else if (stream.hasData() && options.data !== false) {\r\n        subscribeData(stream, options, callback);\r\n      } else {\r\n        Logger.warning('There\\'s nothing to subscribe to');\r\n        callback(undefined, 'Nothing to subscribe to');\r\n        return;\r\n      }\r\n      // Subscribe to stream stream\r\n      Logger.info(`Subscribing to: ${stream.getID()}`);\r\n    } else {\r\n      let error = 'Error on subscribe';\r\n      if (!stream) {\r\n        Logger.warning('Cannot subscribe to invalid stream');\r\n        error = 'Invalid or undefined stream';\r\n      } else if (stream.local) {\r\n        Logger.warning('Cannot subscribe to local stream, you should ' +\r\n                         'subscribe to the remote version of your local stream');\r\n        error = 'Local copy of stream';\r\n      } else if (stream.failed) {\r\n        Logger.warning('Cannot subscribe to failed stream.');\r\n        error = 'Failed stream';\r\n      }\r\n      callback(undefined, error);\r\n    }\r\n  };\r\n\r\n  // It unsubscribes from the stream, removing the HTML element.\r\n  that.unsubscribe = (streamInput, callback = () => {}) => {\r\n    const stream = streamInput;\r\n    // Unsubscribe from stream\r\n    if (socket !== undefined) {\r\n      if (stream && !stream.local) {\r\n        socket.sendMessage('unsubscribe', stream.getID(), (result, error) => {\r\n          if (result === null) {\r\n            callback(undefined, error);\r\n            return;\r\n          }\r\n          removeStream(stream);\r\n          delete stream.failed;\r\n          callback(true);\r\n        }, () => {\r\n          Logger.error('Error calling unsubscribe.');\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  that.getStreamStats = (stream, callback = () => {}) => {\r\n    if (!socket) {\r\n      return 'Error getting stats - no socket';\r\n    }\r\n    if (!stream) {\r\n      return 'Error getting stats - no stream';\r\n    }\r\n\r\n    socket.sendMessage('getStreamStats', stream.getID(), (result) => {\r\n      if (result) {\r\n        callback(result);\r\n      }\r\n    });\r\n    return undefined;\r\n  };\r\n\r\n  // It searchs the streams that have \"name\" attribute with \"value\" value\r\n  that.getStreamsByAttribute = (name, value) => {\r\n    const streams = [];\r\n\r\n    remoteStreams.forEach((stream) => {\r\n      if (stream.getAttributes() !== undefined && stream.getAttributes()[name] === value) {\r\n        streams.push(stream);\r\n      }\r\n    });\r\n\r\n    return streams;\r\n  };\r\n\r\n  that.on('room-disconnected', clearAll);\r\n\r\n  socket.on('onAddStream', socketEventToArgs.bind(null, socketOnAddStream));\r\n  socket.on('signaling_message_erizo', socketEventToArgs.bind(null, socketOnErizoMessage));\r\n  socket.on('signaling_message_peer', socketEventToArgs.bind(null, socketOnPeerMessage));\r\n  socket.on('publish_me', socketEventToArgs.bind(null, socketOnPublishMe));\r\n  socket.on('unpublish_me', socketEventToArgs.bind(null, socketOnUnpublishMe));\r\n  socket.on('onBandwidthAlert', socketEventToArgs.bind(null, socketOnBandwidthAlert));\r\n  socket.on('onDataStream', socketEventToArgs.bind(null, socketOnDataStream));\r\n  socket.on('onUpdateAttributeStream', socketEventToArgs.bind(null, socketOnUpdateAttributeStream));\r\n  socket.on('onRemoveStream', socketEventToArgs.bind(null, socketOnRemoveStream));\r\n  socket.on('disconnect', socketEventToArgs.bind(null, socketOnDisconnect));\r\n  socket.on('connection_failed', socketEventToArgs.bind(null, socketOnICEConnectionFailed));\r\n  socket.on('error', socketEventToArgs.bind(null, socketOnError));\r\n\r\n  return that;\r\n};\r\n\r\nexport default Room;\r\n","import Room from './Room';\r\nimport { LicodeEvent, RoomEvent, StreamEvent } from './Events';\r\nimport Stream from './Stream';\r\nimport Logger from './utils/Logger';\r\n\r\n// eslint-disable-next-line \r\nrequire('expose-loader?adapter!../lib/adapter.js');\r\n// eslint-disable-next-line\r\nrequire('script-loader!./utils/L.Resizer.js');\r\n\r\n\r\nconst Erizo = {\r\n  Room: Room.bind(null, undefined, undefined, undefined),\r\n  LicodeEvent,\r\n  RoomEvent,\r\n  StreamEvent,\r\n  Stream: Stream.bind(null, undefined),\r\n  Logger,\r\n};\r\n\r\nexport default Erizo;\r\n"],"sourceRoot":""}